---
title: Creare un flusso di lavoro personalizzato (Master Data Services) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: reference
ms.assetid: 8e4403e9-595c-4b6b-9d0c-f6ae1b2bc99d
author: lrtoyou1223
ms.author: lle
ms.openlocfilehash: cac53946d83eda178328b153875a86440517a560
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87638438"
---
# <a name="create-a-custom-workflow-master-data-services"></a><span data-ttu-id="fc8c2-102">Creare un flusso di lavoro personalizzato (Master Data Services)</span><span class="sxs-lookup"><span data-stu-id="fc8c2-102">Create a Custom Workflow (Master Data Services)</span></span>
  <span data-ttu-id="fc8c2-103">In [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] vengono utilizzate le regole business per creare soluzioni di base per il flusso di lavoro, come l'aggiornamento e la convalida automatici dei dati e l'invio di notifiche mediante posta elettronica in base alle condizioni specificate.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-103">[!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] uses business rules to create basic workflow solutions, such as to automatically update and validate data and have e-mail notifications sent, based on conditions you specify.</span></span> <span data-ttu-id="fc8c2-104">Quando è necessaria un'elaborazione più complessa di quella fornita dalle azioni predefinite del flusso di lavoro, utilizzare un flusso di lavoro personalizzato.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-104">When you require processing that is more complex than what the built-in workflow actions provide, use a custom workflow.</span></span> <span data-ttu-id="fc8c2-105">Un flusso di lavoro personalizzato è un assembly .NET che viene creato.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-105">A custom workflow is a .NET assembly that you create.</span></span> <span data-ttu-id="fc8c2-106">Quando viene chiamato l'assembly del flusso di lavoro, il codice può eseguire qualsiasi azione richiesta dalla situazione.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-106">When your workflow assembly is called, your code can take whatever action your situation requires.</span></span> <span data-ttu-id="fc8c2-107">Se ad esempio il flusso di lavoro richiede l'elaborazione di eventi complessi, come le approvazioni multilivello o gli alberi delle decisioni complessi, è possibile configurare [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] in modo da avviare un flusso di lavoro personalizzato che analizza i dati e determina dove inviarli per l'approvazione.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-107">For example, if your workflow requires complex event processing, such as multi-tiered approvals or complicated decision trees, you can configure [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to start a custom workflow that analyzes the data and determines where to send it for approval.</span></span>  
  
## <a name="how-custom-workflows-are-processed"></a><span data-ttu-id="fc8c2-108">Elaborazione di flussi di lavoro personalizzati</span><span class="sxs-lookup"><span data-stu-id="fc8c2-108">How Custom Workflows Are Processed</span></span>  
 <span data-ttu-id="fc8c2-109">Per l'elaborazione dei flussi di lavoro personalizzati sono necessari tre componenti principali: applicazione Web [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], SQL Server MDS Workflow Integration Service e assembly del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-109">There are three main components involved to process custom workflows: the [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] web application, SQL Server MDS Workflow Integration Service, and the workflow handler assembly.</span></span> <span data-ttu-id="fc8c2-110">Di seguito è riportata la procedura di elaborazione di un flusso di lavoro personalizzato mediante tali componenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-110">These components process a custom workflow as follows:</span></span>  
  
1.  <span data-ttu-id="fc8c2-111">Utilizzare [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] per convalidare un'entità che avvia un flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-111">You use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to validate an entity that starts a workflow.</span></span>  
  
2.  [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] <span data-ttu-id="fc8c2-112">invia i membri che soddisfano le condizioni delle regole business a una coda di Service Broker nel database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-112">sends members that meet the business rule conditions to a Service Broker queue in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
3.  <span data-ttu-id="fc8c2-113">A intervalli regolari SQL Server MDS Workflow Integration Service chiama una stored procedure nel database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-113">At regular intervals, SQL Server MDS Workflow Integration Service calls a stored procedure in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span>  
  
4.  <span data-ttu-id="fc8c2-114">Quando questa stored procedure trova i record nella coda di Service Broker, li restituisce a SQL Server MDS Workflow Integration Service.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-114">When this stored procedure finds records in the Service Broker queue, it returns them to SQL Server MDS Workflow Integration Service.</span></span>  
  
5.  <span data-ttu-id="fc8c2-115">SQL Server MDS Workflow Integration Service instrada i dati all'assembly del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-115">SQL Server MDS Workflow Integration Services routes the data to your workflow handler assembly.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fc8c2-116">Nota: SQL Server MDS Workflow Integration Service deve attivare processi semplici.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-116">Note: SQL Server MDS Workflow Integration Service is meant to trigger simple processes.</span></span> <span data-ttu-id="fc8c2-117">Se il codice personalizzato richiede un'elaborazione complessa, completare l'elaborazione in un thread separato o all'esterno del processo del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-117">If your custom code requires complex processing, complete your processing either in a separate thread or outside of the workflow process.</span></span>  
  
## <a name="configure-master-data-services-for-custom-workflows"></a><span data-ttu-id="fc8c2-118">Configurare Master Data Services per i flussi di lavoro personalizzati</span><span class="sxs-lookup"><span data-stu-id="fc8c2-118">Configure Master Data Services for Custom Workflows</span></span>  
 <span data-ttu-id="fc8c2-119">Per creare di un flusso di lavoro personalizzato, è necessario scrivere codice personalizzato e configurare [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] in modo da passare i dati del flusso di lavoro al gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-119">Creating a custom workflow requires writing some custom code and configuring [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] to pass workflow data to your workflow handler.</span></span> <span data-ttu-id="fc8c2-120">Per consentire l'elaborazione del flusso di lavoro personalizzato, effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-120">Follow these steps to enable custom workflow processing:</span></span>  
  
1.  <span data-ttu-id="fc8c2-121">Creare un assembly .NET che implementi [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span><span class="sxs-lookup"><span data-stu-id="fc8c2-121">Create a .NET assembly that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)).</span></span>  
  
2.  <span data-ttu-id="fc8c2-122">Configurare SQL Server MDS Workflow Integration Service per la connessione al database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] e per associare un tag al gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-122">Configure SQL Server MDS Workflow Integration Service to connect to your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler.</span></span>  
  
3.  <span data-ttu-id="fc8c2-123">Avviare SQL Server MDS Workflow Integration Service.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-123">Start SQL Server MDS Workflow Integration Service.</span></span>  
  
4.  <span data-ttu-id="fc8c2-124">Creare una regola business in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] per avviare un flusso di lavoro contrassegnato con il nome del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-124">Create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] that starts a workflow that is tagged with the name of your workflow handler.</span></span>  
  
5.  <span data-ttu-id="fc8c2-125">Applicare la regola business a un membro che attiva il flusso di lavoro personalizzato.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-125">Apply the business rule to a member that triggers your custom workflow.</span></span>  
  
### <a name="create-the-workflow-handler-assembly"></a><span data-ttu-id="fc8c2-126">Creare l'assembly del gestore del flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="fc8c2-126">Create the Workflow Handler Assembly</span></span>  
 <span data-ttu-id="fc8c2-127">Un flusso di lavoro personalizzato è un assembly della libreria di classi .NET che implementa l'interfaccia [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="fc8c2-127">A custom workflow is a .NET class library assembly that implements the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="fc8c2-128">SQL Server servizio di integrazione del flusso di lavoro MDS chiama il metodo [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) per eseguire il codice.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-128">SQL Server MDS Workflow Integration Service calls the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method to run your code.</span></span> <span data-ttu-id="fc8c2-129">Per il codice di esempio che implementa [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), vedere [esempio di flusso di lavoro personalizzato &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span><span class="sxs-lookup"><span data-stu-id="fc8c2-129">For example code that implements [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)), see [Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md).</span></span>  
  
 <span data-ttu-id="fc8c2-130">Per creare con Visual Studio 2010 un assembly che SQL Server MDS Workflow Integration Service può chiamare per gestire un flusso di lavoro personalizzato, effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-130">Follow these steps to use Visual Studio 2010 to create an assembly that SQL Server MDS Workflow Integration Service can call to handle a custom workflow:</span></span>  
  
1.  <span data-ttu-id="fc8c2-131">In Visual Studio 2010 creare un nuovo progetto **Libreria di classi** che usa il linguaggio scelto.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-131">In Visual Studio 2010, create a new **Class Library** project that uses the language of your choice.</span></span> <span data-ttu-id="fc8c2-132">Per creare una Libreria di classi C# selezionare i tipi di progetto **Visual C#\Windows** e selezionare il modello **Libreria di classi**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-132">To create a C# Class Library, select the **Visual C#\Windows** project types and select the **Class Library** template.</span></span> <span data-ttu-id="fc8c2-133">Immettere un nome per il progetto, ad esempio **MDSWorkflowTest** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-133">Enter a name for your project, such as **MDSWorkflowTest**, and click **OK**.</span></span>  
  
2.  <span data-ttu-id="fc8c2-134">Aggiungere un riferimento a Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-134">Add a reference to Microsoft.MasterDataServices.WorkflowTypeExtender.dll.</span></span> <span data-ttu-id="fc8c2-135">Questo assembly si trova in \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-135">This assembly can be found in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
3.  <span data-ttu-id="fc8c2-136">Aggiungere 'using Microsoft.MasterDataServices.Core.Workflow;' al file di codice C#.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-136">Add 'using Microsoft.MasterDataServices.Core.Workflow;' to your C# code file.</span></span>  
  
4.  <span data-ttu-id="fc8c2-137">Ereditare da [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) nella dichiarazione della classe.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-137">Inherit from [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) in your class declaration.</span></span> <span data-ttu-id="fc8c2-138">La dichiarazione di classe deve essere simile a: 'public class WorkflowTester : IWorkflowTypeExtender'.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-138">The class declaration should be similar to: 'public class WorkflowTester : IWorkflowTypeExtender'.</span></span>  
  
5.  <span data-ttu-id="fc8c2-139">Implementare l'interfaccia [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) .</span><span class="sxs-lookup"><span data-stu-id="fc8c2-139">Implement the [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender](/previous-versions/sql/sql-server-2016/hh758785(v=sql.130)) interface.</span></span> <span data-ttu-id="fc8c2-140">Il metodo [Microsoft. MasterDataServices. WorkflowTypeExtender. IWorkflowTypeExtender. StartWorkflow \*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) viene chiamato dal servizio di integrazione del flusso di lavoro di SQL Server MDS per avviare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-140">The [Microsoft.MasterDataServices.WorkflowTypeExtender.IWorkflowTypeExtender.StartWorkflow\*](/previous-versions/sql/sql-server-2016/hh759009(v=sql.130)) method is called by SQL Server MDS Workflow Integration Service to start your workflow.</span></span>  
  
6.  <span data-ttu-id="fc8c2-141">Copiare l'assembly nel percorso dell'eseguibile del servizio di integrazione del flusso di lavoro di SQL Server MDS, denominato Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-141">Copy your assembly to the location of the SQL Server MDS Workflow Integration Service executable, named Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
### <a name="configure-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="fc8c2-142">Configurare SQL Server MDS Workflow Integration Service</span><span class="sxs-lookup"><span data-stu-id="fc8c2-142">Configure SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="fc8c2-143">Per modificare il file di configurazione di [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] in modo da includere le informazioni di connessione per il database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] e associare un tag all'assembly del gestore del flusso di lavoro, effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-143">Edit the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] configuration file to include connection information for your [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database and to associate a tag with your workflow handler assembly by following these steps:</span></span>  
  
1.  <span data-ttu-id="fc8c2-144">Trovare Microsoft.MasterDataServices.Workflow.exe.config in \<Your installation folder> \Master Data Services\WebApplication\bin.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-144">Find Microsoft.MasterDataServices.Workflow.exe.config in \<Your installation folder>\Master Data Services\WebApplication\bin.</span></span>  
  
2.  <span data-ttu-id="fc8c2-145">Aggiungere le informazioni di connessione al database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] all'impostazione "ConnectionString".</span><span class="sxs-lookup"><span data-stu-id="fc8c2-145">Add the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database connection information to the "ConnectionString" setting.</span></span> <span data-ttu-id="fc8c2-146">Se nell'installazione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] vengono utilizzate regole di confronto con distinzione tra maiuscole e minuscole, il nome del database deve essere immesso nella stessa combinazione di maiuscole e minuscole del database.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-146">If your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation uses case-sensitive collation, the name of the database must be entered in the same case as in the database.</span></span> <span data-ttu-id="fc8c2-147">Il tag di impostazione completo, ad esempio, potrebbe essere analogo al seguente:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-147">For example, the complete setting tag might look like this:</span></span>  
  
    ```xml  
    <setting name="ConnectionString" serializeAs="String">  
        <value>Server=myServer;Database=myDatabase;Integrated Security=True</value>  
    </setting>  
    ```  
  
3.  <span data-ttu-id="fc8c2-148">Sotto l'impostazione "ConnectionString" aggiungere l'impostazione "WorkflowTypeExtenders" per associare il nome di un tag all'assembly del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-148">Below the "ConnectionString" setting add a "WorkflowTypeExtenders" setting to associate a tag name with your workflow handler assembly.</span></span> <span data-ttu-id="fc8c2-149">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-149">For example:</span></span>  
  
    ```xml  
    <setting name="WorkflowTypeExtenders" serializeAs="String">  
        <value>TEST=MDSWorkflowTestLib.WorkflowTester, MDSWorkflowTestLib</value>  
    </setting>  
    ```  
  
     <span data-ttu-id="fc8c2-150">Il testo interno del \<value> tag è nel formato \<Workflow tag> = \<assembly-qualified workflow type name> .</span><span class="sxs-lookup"><span data-stu-id="fc8c2-150">The inner text of the \<value> tag is in the form of \<Workflow tag>=\<assembly-qualified workflow type name>.</span></span> <span data-ttu-id="fc8c2-151">\<Workflow tag>nome usato per identificare l'assembly del gestore del flusso di lavoro quando si crea una regola business in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fc8c2-151">\<Workflow tag> is a name you use to identify the workflow handler assembly when you create a business rule in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)].</span></span> <span data-ttu-id="fc8c2-152">\<assembly-qualified workflow type name>nome completo dello spazio dei nomi della classe del flusso di lavoro, seguito da una virgola e dal nome visualizzato dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-152">\<assembly-qualified workflow type name> is the namespace-qualified name of your workflow class, followed by a comma, followed by the display name of the assembly.</span></span> <span data-ttu-id="fc8c2-153">Se il nome dell'assembly è sicuro, è necessario includere anche le informazioni sulla versione e l'oggetto PublicKeyToken.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-153">If your assembly is strongly named, you also have to include version information and its PublicKeyToken.</span></span> <span data-ttu-id="fc8c2-154">\<setting>Se sono stati creati più gestori del flusso di lavoro per diversi tipi di flussi di lavoro, è possibile includere più tag.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-154">You can include multiple \<setting> tags if you have created multiple workflow handlers for different kinds of workflows.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fc8c2-155">A seconda della configurazione del server, è possibile che venga visualizzato l'errore "Accesso negato" quando si tenta di salvare il file Microsoft.MasterDataServices.Workflow.exe.config.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-155">Depending on the configuration of your server, you may see an "Access is denied" error when you try to save the Microsoft.MasterDataServices.Workflow.exe.config file.</span></span> <span data-ttu-id="fc8c2-156">In tal caso, disabilitare temporaneamente la funzionalità Controllo dell'account utente nel server.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-156">If this occurs, temporarily disable User Account Control (UAC) on the server.</span></span> <span data-ttu-id="fc8c2-157">A tale scopo, aprire il Pannello di controllo e fare clic su **Sistema e sicurezza**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-157">To do this, open Control Panel, click **System and Security**.</span></span> <span data-ttu-id="fc8c2-158">In **Centro notifiche** fare clic su **Modifica impostazioni di Controllo dell'account utente**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-158">Under **Action Center**, click **Change User Account Control Settings**.</span></span> <span data-ttu-id="fc8c2-159">Nella finestra di dialogo **Impostazioni di Controllo account utente** far scorrere la barra verso il basso in modo da non ricevere alcuna notifica.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-159">In the **User Account Control Settings** dialog, slide the bar to the bottom so that you are never notified.</span></span> <span data-ttu-id="fc8c2-160">Riavviare il computer e ripetere i passaggi precedenti per modificare il file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-160">Restart your computer and repeat the preceding steps to edit your configuration file.</span></span> <span data-ttu-id="fc8c2-161">Dopo avere salvato il file, reimpostare le impostazioni del Controllo dell'account utente sul livello predefinito.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-161">After saving the file, reset your UAC settings to the default level.</span></span>  
  
### <a name="start-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="fc8c2-162">Avviare SQL Server MDS Workflow Integration Service</span><span class="sxs-lookup"><span data-stu-id="fc8c2-162">Start SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="fc8c2-163">Per impostazione predefinita, SQL Server MDS Workflow Integration Service non è installato.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-163">By default, SQL Server MDS Workflow Integration Service is not installed.</span></span> <span data-ttu-id="fc8c2-164">Per poter utilizzare il servizio, è necessario prima installarlo.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-164">You must install the service before it can be used.</span></span> <span data-ttu-id="fc8c2-165">Per una maggiore sicurezza, creare un utente locale per il servizio e concedere all'utente solo le autorizzazioni necessarie per eseguire le operazioni del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-165">For the greatest security, create a local user for the service and grant this user only the permissions needed to perform workflow operations.</span></span> <span data-ttu-id="fc8c2-166">Per creare un utente e per installare e avviare il servizio, effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-166">To create a user, install the service, and start the service, follow these steps:</span></span>  
  
1.  <span data-ttu-id="fc8c2-167">Utilizzare Utenti e gruppi locali per creare un utente locale denominato, ad esempio, mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-167">Use the Local Users and Groups manager to create a local user named, for example, mds_workflow_service.</span></span>  
  
2.  <span data-ttu-id="fc8c2-168">Utilizzare SQL Server Management Studio per concedere all'utente mds_workflow_service l'autorizzazione per eseguire la stored procedure [mdm].[udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-168">Use SQL Server Management Studio to grant the mds_workflow_service user permission to execute the [mdm].[udpExternalActionsGet] stored procedure.</span></span> <span data-ttu-id="fc8c2-169">A tale scopo, creare un nuovo account di accesso per l'account mds_workflow_service, creare un nuovo utente nel database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)], eseguire il mapping di questo utente all'account di accesso mds_workflow_service e concedere all'utente l'autorizzazione EXECUTE per la stored procedure [mdm].[udpExternalActionsGet].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-169">To do this, create a new login for the mds_workflow_service account, create a new user in the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database, map this user to the mds_workflow_service login, and grant the user EXECUTE permission to the [mdm].[udpExternalActionsGet] stored procedure.</span></span>  
  
3.  <span data-ttu-id="fc8c2-170">Concedere all'utente mds_workflow_service l'autorizzazione per eseguire l'assembly del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-170">Grant the mds_workflow_service user permission to execute the workflow handler assembly.</span></span> <span data-ttu-id="fc8c2-171">A tale scopo, aggiungere l'utente mds_workflow_service alla scheda **Sicurezza** nelle **Proprietà** dell'assembly del gestore del flusso di lavoro e concedere all'utente mds_workflow_service le autorizzazioni READ ed EXECUTE.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-171">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of the workflow handler assembly and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
4.  <span data-ttu-id="fc8c2-172">Concedere all'utente mds_workflow_service l'autorizzazione per eseguire l'eseguibile di SQL Server MDS Workflow Integration Service.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-172">Grant the mds_workflow_service user permission to execute the SQL Server MDS Workflow Integration Service executable.</span></span> <span data-ttu-id="fc8c2-173">A tale scopo, aggiungere l'utente mds_workflow_service alla scheda **sicurezza** delle **Proprietà** di Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder> \Master Data Services\WebApplication\bin e concedere all'utente mds_workflow_service l'autorizzazione di lettura ed esecuzione.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-173">To do this, add the mds_workflow_service user to the **Security** tab of the **Properties** of Microsoft.MasterDataServices.Workflow.exe, in \<Your installation folder>\Master Data Services\WebApplication\bin and grant the mds_workflow_service user READ and EXECUTE permission.</span></span>  
  
5.  <span data-ttu-id="fc8c2-174">Installare SQL Server MDS Workflow Integration Service mediante l'utilità di installazione .NET, denominata InstallUtil.exe.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-174">Install SQL Server MDS Workflow Integration Service by using the .NET installation utility, named InstallUtil.exe.</span></span> <span data-ttu-id="fc8c2-175">InstallUtil.exe si trova nella cartella di installazione .NET, ad esempio C:\Windows\Microsoft.NET\Framework\v4.0.30319\\.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-175">InstallUtil.exe can be found in the .NET installation folder, such as C:\Windows\Microsoft.NET\Framework\v4.0.30319\\.</span></span> <span data-ttu-id="fc8c2-176">Installare SQL Server MDS Workflow Integration Service immettendo in un prompt dei comandi con privilegi elevati il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-176">Install SQL Server MDS Workflow Integration Service by entering the following in an elevated command prompt:</span></span>  
  
    ```  
    C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil Microsoft.MasterDataServices.Workflow.exe  
    ```  
  
     <span data-ttu-id="fc8c2-177">Quando richiesto durante l'installazione, specificare l'utente mds_workflow_service.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-177">Specify the mds_workflow_service user when prompted during installation.</span></span>  
  
6.  <span data-ttu-id="fc8c2-178">Avviare SQL Server MDS Workflow Integration Service mediante lo snap-in Servizi.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-178">Start SQL Server MDS Workflow Integration Service by using the Services snap-in.</span></span> <span data-ttu-id="fc8c2-179">A tale scopo, trovare SQL Server MDS Workflow Integration Service nello snap-in Servizi, selezionarlo e fare clic sul collegamento **Avvia**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-179">To do this, find SQL Server MDS Workflow Integration Service in the Services snap-in, select it, and click the  **Start** link.</span></span>  
  
### <a name="create-a-workflow-business-rule"></a><span data-ttu-id="fc8c2-180">Creare una regola business del flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="fc8c2-180">Create a Workflow Business Rule</span></span>  
 <span data-ttu-id="fc8c2-181">Utilizzare [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] per creare e pubblicare una regola business che, quando applicata, consente di avviare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-181">Use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to create and publish a business rule that will start the workflow when applied.</span></span> <span data-ttu-id="fc8c2-182">È necessario assicurarsi che la regola business contenga le azioni che modificano i valori dell'attributo, in modo tale che una volta applicata la regola restituisca false.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-182">You should ensure that your business rule contains actions that change attribute values, so that the rule evaluates to false after it has been applied once.</span></span> <span data-ttu-id="fc8c2-183">Ad esempio, la regola business potrebbe restituire true quando un valore dell'attributo Price è maggiore di 500 e il valore dell'attributo Approved è vuoto.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-183">For example, your business rule might evaluate to true when a Price attribute value is greater than 500 and the Approved attribute value is blank.</span></span> <span data-ttu-id="fc8c2-184">La regola può includere quindi due azioni: una per impostare il valore dell'attributo Approved su Pending e l'altra per avviare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-184">The rule can then include two actions: one to set the Approved attribute value to Pending and one to start the workflow.</span></span> <span data-ttu-id="fc8c2-185">In alternativa, è possibile creare una regola che utilizzi la condizione "has changed" e aggiungere gli attributi ai gruppi rilevamento modifiche.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-185">Alternatively, you may want to create a rule that uses the "has changed" condition and add your attributes to change tracking groups.</span></span> <span data-ttu-id="fc8c2-186">Per altre informazioni sulle regole business, vedere [Regole business &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="fc8c2-186">For more information about business rules, see [Business Rules &#40;Master Data Services&#41;](../business-rules-master-data-services.md).</span></span>  
  
 <span data-ttu-id="fc8c2-187">Per creare una regola business che avvia un flusso di lavoro personalizzato in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-187">Create a business rule that starts a custom workflow in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] by following these steps:</span></span>  
  
1.  <span data-ttu-id="fc8c2-188">Nell'editor delle regola business di [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] dopo avere specificato le condizioni della regola business trascinare l'azione **Avvia flusso di lavoro** dall'**elenco di azioni esterne** all'etichetta **Azione** del riquadro **THEN**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-188">In the business rule editor of [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], after you have specified the conditions of your business rule, drag the **Start Workflow** action from the **External actions** list to the **THEN** pane's **Action** label.</span></span>  
  
2.  <span data-ttu-id="fc8c2-189">Nella casella **Tipo di flusso di lavoro** del riquadro **Modifica azione** digitare il tag che identifica l'assembly del gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-189">In the **Edit Action** pane, in the **Workflow type** box, type the tag that identifies your workflow handler assembly.</span></span> <span data-ttu-id="fc8c2-190">Si tratta del tag specificato nel file di configurazione per l'assembly, ad esempio TEST.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-190">This is the tag you specified in the configuration file for your assembly, for example, TEST.</span></span>  
  
3.  <span data-ttu-id="fc8c2-191">Facoltativamente, selezionare la casella di controllo **Includi dati membro**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-191">Optionally, select the **Include member data** check box.</span></span> <span data-ttu-id="fc8c2-192">Questa opzione consente di includere i nomi e i valori degli attributi nel codice XML passato al gestore del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-192">Choose this to include attribute names and values in the XML that is passed to the workflow handler.</span></span>  
  
4.  <span data-ttu-id="fc8c2-193">Nella casella **Sito flusso di lavoro** digitare il nome di un sito Web.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-193">In the **Workflow site** box, type the name of a website.</span></span> <span data-ttu-id="fc8c2-194">Questa opzione potrebbe non essere valida per il flusso di lavoro personalizzato, ma può essere utilizzata per il contesto aggiunto.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-194">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
5.  <span data-ttu-id="fc8c2-195">Nella casella **Nome flusso di lavoro** digitare il nome del flusso di lavoro di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-195">In the **Workflow name** box, type the name of your workflow from Visual Studio.</span></span> <span data-ttu-id="fc8c2-196">Questa opzione potrebbe non essere valida per il flusso di lavoro personalizzato, ma può essere utilizzata per il contesto aggiunto.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-196">For your custom workflow this may not apply, but can be used for added context.</span></span>  
  
6.  <span data-ttu-id="fc8c2-197">Salvare e pubblicare la regola business.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-197">Save and publish the business rule.</span></span>  
  
### <a name="apply-business-rules-to-start-a-workflow"></a><span data-ttu-id="fc8c2-198">Applicare le regole business per avviare un flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="fc8c2-198">Apply Business Rules to Start a Workflow</span></span>  
 <span data-ttu-id="fc8c2-199">Applicare la regola business ai dati per avviare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-199">Apply the business rule to your data to start the workflow.</span></span> <span data-ttu-id="fc8c2-200">A tale scopo, utilizzare [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] per modificare l'entità che contiene i membri che di desidera convalidare.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-200">To do this, use [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] to edit the entity that contains the members you want to validate.</span></span> <span data-ttu-id="fc8c2-201">Fare clic su **Applica regole business**.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-201">Click **Apply business rules**.</span></span> <span data-ttu-id="fc8c2-202">In risposta alla regola business, in [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] viene popolata la coda di Service Broker del database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-202">In response to the business rule, [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] populates the Service Broker queue of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="fc8c2-203">Quando SQL Server MDS Workflow Integration Service controlla la coda, invia i dati all'assembly del gestore del flusso di lavoro specificato e cancella la coda.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-203">When SQL Server MDS Workflow Integration Service checks the queue, it sends the data to the specified workflow handler assembly and clears the queue.</span></span> <span data-ttu-id="fc8c2-204">L'assembly del gestore del flusso di lavoro esegue qualsiasi azione in esso codificata.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-204">The workflow handler assembly performs whatever actions you have coded into it.</span></span>  
  
## <a name="troubleshoot-custom-workflows"></a><span data-ttu-id="fc8c2-205">Risolvere i problemi relativi ai flussi di lavoro personalizzati</span><span class="sxs-lookup"><span data-stu-id="fc8c2-205">Troubleshoot Custom Workflows</span></span>  
 <span data-ttu-id="fc8c2-206">Se l'assembly del gestore del flusso di lavoro non riceve dati, è possibile provare a eseguire il debug di SQL Server MDS Workflow Integration Service o a visualizzare la coda di Service Broker.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-206">If your workflow handler assembly doesn't receive data, you can try debugging SQL Server MDS Workflow Integration Service or viewing the Service Broker queue.</span></span>  
  
### <a name="debug-sql-server-mds-workflow-integration-service"></a><span data-ttu-id="fc8c2-207">Eseguire il debug di SQL Server MDS Workflow Integration Service</span><span class="sxs-lookup"><span data-stu-id="fc8c2-207">Debug SQL Server MDS Workflow Integration Service</span></span>  
 <span data-ttu-id="fc8c2-208">Per eseguire il debug di SQL Server Workflow Integration Service, effettuare i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc8c2-208">To debug SQL Server Workflow Integration Service, take the following steps:</span></span>  
  
1.  <span data-ttu-id="fc8c2-209">Utilizzare lo snap-in Servizi per arrestare il servizio.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-209">Use the Services snap-in to stop the service.</span></span>  
  
2.  <span data-ttu-id="fc8c2-210">Aprire un prompt dei comandi, passare al percorso del servizio ed eseguire il servizio in modalità console immettendo Microsoft.MasterDataServices.Workflow.exe -console.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-210">Open a command prompt, navigate to the location of the service, and run the service in console mode by entering: Microsoft.MasterDataServices.Workflow.exe -console.</span></span>  
  
3.  <span data-ttu-id="fc8c2-211">In [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)] aggiornare il membro e applicare di nuovo le regole business.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-211">In [!INCLUDE[ssMDSmdm](../../includes/ssmdsmdm-md.md)], update your member and apply business rules again.</span></span> <span data-ttu-id="fc8c2-212">I log dettagliati vengono visualizzati nella finestra della console.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-212">Detailed logs are displayed in the console window.</span></span>  
  
### <a name="view-the-service-broker-queue"></a><span data-ttu-id="fc8c2-213">Visualizzare la coda di Service Broker</span><span class="sxs-lookup"><span data-stu-id="fc8c2-213">View the Service Broker Queue</span></span>  
 <span data-ttu-id="fc8c2-214">La coda di Service Broker che contiene i dati master passati come parte del flusso di lavoro è mdm.microsoft/mdm/queue/externalaction.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-214">The Service Broker queue that contains the master data passed as part of the workflow is: mdm.microsoft/mdm/queue/externalaction.</span></span> <span data-ttu-id="fc8c2-215">Le code si trovano in **Esplora oggetti** di SQL Management Studio nel nodo Service Broker del database [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fc8c2-215">Queues can be found in the **Object Explorer** of SQL Management Studio under the Service Broker node of the [!INCLUDE[ssMDSshort](../../includes/ssmdsshort-md.md)] database.</span></span> <span data-ttu-id="fc8c2-216">Tenere presente che, se il servizio ha cancellato correttamente la coda, questa sarà vuota.</span><span class="sxs-lookup"><span data-stu-id="fc8c2-216">Be aware that, if the service cleared the queue properly, this queue will be empty.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fc8c2-217">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="fc8c2-217">See Also</span></span>  
 <span data-ttu-id="fc8c2-218">[Esempio di flusso di lavoro personalizzato &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span><span class="sxs-lookup"><span data-stu-id="fc8c2-218">[Custom Workflow Example &#40;Master Data Services&#41;](create-a-custom-workflow-example.md) </span></span>  
 [<span data-ttu-id="fc8c2-219">Descrizione XML del flusso di lavoro personalizzato &#40;Master Data Services&#41;</span><span class="sxs-lookup"><span data-stu-id="fc8c2-219">Custom Workflow XML Description &#40;Master Data Services&#41;</span></span>](create-a-custom-workflow-xml-description.md)  
  
  
