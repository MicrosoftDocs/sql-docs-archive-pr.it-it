---
title: Implementare la sicurezza di SQL Server Agent | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, security
- security [SQL Server Agent], about security
- security [SQL Server Agent]
- security [SQL Server], SQL Server Agent
ms.assetid: d770d35c-c8de-4e00-9a85-7d03f45a0f0d
author: stevestein
ms.author: sstein
ms.openlocfilehash: 8b70449ace66d4e33a547eca1c0b19eafabde5a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87715031"
---
# <a name="implement-sql-server-agent-security"></a><span data-ttu-id="495ef-102">Implementazione della sicurezza di SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="495ef-102">Implement SQL Server Agent Security</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="495ef-103">Agent consente all'amministratore del database di eseguire ciascun passaggio di un processo in un contesto di sicurezza in cui sono disponibili solo le autorizzazioni necessarie all'esecuzione di tale passaggio e che viene determinato da un proxy di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="495ef-103">Agent lets the database administrator run each job step in a security context that has only the permissions required to perform that job step, which is determined by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy.</span></span> <span data-ttu-id="495ef-104">Per impostare le autorizzazioni per un particolare passaggio di un processo, è necessario creare un proxy che disponga delle autorizzazioni necessarie e quindi assegnare questo proxy al passaggio del processo.</span><span class="sxs-lookup"><span data-stu-id="495ef-104">To set the permissions for a particular job step, you create a proxy that has the required permissions and then assign that proxy to the job step.</span></span> <span data-ttu-id="495ef-105">È possibile specificare un proxy per più di un passaggio di processo.</span><span class="sxs-lookup"><span data-stu-id="495ef-105">A proxy can be specified for more than one job step.</span></span> <span data-ttu-id="495ef-106">Per i passaggi che richiedono le medesime autorizzazioni, viene utilizzato lo stesso proxy.</span><span class="sxs-lookup"><span data-stu-id="495ef-106">For job steps that require the same permissions, you use the same proxy.</span></span>  
  
 <span data-ttu-id="495ef-107">Nella sezione che segue viene spiegato quale ruolo di database concedere agli utenti affinché possano creare o eseguire processi utilizzando [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="495ef-107">The following section explains what database role you must grant to users so they can create or execute jobs by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="granting-access-to-sql-server-agent"></a><span data-ttu-id="495ef-108">Concessione dell'accesso a SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="495ef-108">Granting Access to SQL Server Agent</span></span>  
 <span data-ttu-id="495ef-109">Per poter utilizzare [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, l'utente deve essere membro di uno o più dei seguenti ruoli predefiniti di database:</span><span class="sxs-lookup"><span data-stu-id="495ef-109">To use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, users must be a member of one or more of the following fixed database roles:</span></span>  
  
-   <span data-ttu-id="495ef-110">**SQLAgentUserRole**</span><span class="sxs-lookup"><span data-stu-id="495ef-110">**SQLAgentUserRole**</span></span>  
  
-   <span data-ttu-id="495ef-111">**SQLAgentReaderRole**</span><span class="sxs-lookup"><span data-stu-id="495ef-111">**SQLAgentReaderRole**</span></span>  
  
-   <span data-ttu-id="495ef-112">**SQLAgentOperatorRole**</span><span class="sxs-lookup"><span data-stu-id="495ef-112">**SQLAgentOperatorRole**</span></span>  
  
 <span data-ttu-id="495ef-113">Questi ruoli sono archiviati nel database **msdb** .</span><span class="sxs-lookup"><span data-stu-id="495ef-113">These roles are stored in the **msdb** database.</span></span> <span data-ttu-id="495ef-114">Per impostazione predefinita, nessun utente è membro di questi ruoli di database.</span><span class="sxs-lookup"><span data-stu-id="495ef-114">By default, no user is a member of these database roles.</span></span> <span data-ttu-id="495ef-115">L'appartenenza a questi ruoli deve essere concessa esplicitamente.</span><span class="sxs-lookup"><span data-stu-id="495ef-115">Membership in these roles must be granted explicitly.</span></span> <span data-ttu-id="495ef-116">Gli utenti membri del ruolo di server predefinito **sysadmin** hanno accesso completo a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent e non hanno bisogno di essere membri di questi ruoli di database predefiniti per poter usare [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="495ef-116">Users who are members of the **sysadmin** fixed server role have full access to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, and do not need to be a member of these fixed database roles to use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span> <span data-ttu-id="495ef-117">Se un utente non è membro di uno di questi ruoli di database o del ruolo **sysadmin** , il nodo di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent non è disponibile quando l'utente si connette a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tramite [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="495ef-117">If a user is not a member of one of these database roles or of the **sysadmin** role, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent node is not available to them when they connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="495ef-118">I membri di questi ruoli di database possono visualizzare ed eseguire processi di cui sono proprietari e possono creare passaggi di processo eseguibili come un account proxy esistente.</span><span class="sxs-lookup"><span data-stu-id="495ef-118">Members of these database roles can view and execute jobs that they own, and create job steps that run as an existing proxy account.</span></span> <span data-ttu-id="495ef-119">Per altre informazioni sulle autorizzazioni specifiche associate a ognuno di questi ruoli, vedere [Ruoli di database predefiniti di SQL Server Agent](sql-server-agent-fixed-database-roles.md).</span><span class="sxs-lookup"><span data-stu-id="495ef-119">For more information about the specific permissions that are associated with each of these roles, see [SQL Server Agent Fixed Database Roles](sql-server-agent-fixed-database-roles.md).</span></span>  
  
 <span data-ttu-id="495ef-120">I membri del ruolo predefinito del server **sysadmin** sono autorizzati a creare, modificare ed eliminare account proxy.</span><span class="sxs-lookup"><span data-stu-id="495ef-120">Members of the **sysadmin** fixed server role have permission to create, modify, and delete proxy accounts.</span></span> <span data-ttu-id="495ef-121">I membri del ruolo **sysadmin** sono autorizzati a creare passaggi di processo che non specificano un proxy ma che invece vengono eseguiti come account di servizio di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, vale a dire l'account usato per avviare [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="495ef-121">Members of the **sysadmin** role have permission to create job steps that do not specify a proxy, but instead run as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account, which is the account that is used to start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="495ef-122">Linee guida</span><span class="sxs-lookup"><span data-stu-id="495ef-122">Guidelines</span></span>  
 <span data-ttu-id="495ef-123">Per migliorare la sicurezza dell'implementazione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, attenersi alle seguenti indicazioni generali:</span><span class="sxs-lookup"><span data-stu-id="495ef-123">Follow these guidelines to improve the security of your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent implementation:</span></span>  
  
-   <span data-ttu-id="495ef-124">Creare appositi account utente dedicati per i proxy e utilizzare questi account solo per eseguire passaggi di processo.</span><span class="sxs-lookup"><span data-stu-id="495ef-124">Create dedicated user accounts specifically for proxies, and only use these proxy user accounts for running job steps.</span></span>  
  
-   <span data-ttu-id="495ef-125">Concedere le autorizzazioni necessarie solo agli account utente proxy.</span><span class="sxs-lookup"><span data-stu-id="495ef-125">Only grant the necessary permissions to proxy user accounts.</span></span> <span data-ttu-id="495ef-126">Concedere solo le autorizzazioni effettivamente richieste per eseguire i passaggi di processo assegnati a un particolare account proxy.</span><span class="sxs-lookup"><span data-stu-id="495ef-126">Grant only those permissions actually required to run the job steps that are assigned to a given proxy account.</span></span>  
  
-   <span data-ttu-id="495ef-127">Non eseguire il servizio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent usando un account Microsoft Windows che è membro del gruppo **Administrators** di Windows.</span><span class="sxs-lookup"><span data-stu-id="495ef-127">Do not run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service under a Microsoft Windows account that is a member of the Windows **Administrators** group.</span></span>  
  
-   <span data-ttu-id="495ef-128">I proxy hanno lo stesso livello di sicurezza dell'archivio credenziali di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="495ef-128">Proxies are only as secure as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] credential store.</span></span>  
  
-   <span data-ttu-id="495ef-129">Se le operazioni di scrittura dell'utente possono scrivere nel registro eventi NT, possono generare avvisi tramite [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="495ef-129">If user write operations can write to the NT Event log, they can raise alerts via [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
-   <span data-ttu-id="495ef-130">Non specificare l'account amministratore NT come account di servizio o account proxy.</span><span class="sxs-lookup"><span data-stu-id="495ef-130">Do not specify the NT Admin account as a service account or proxy account.</span></span>  
  
-   <span data-ttu-id="495ef-131">Notare che [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent dispongono dell'accesso reciproco alle proprie risorse.</span><span class="sxs-lookup"><span data-stu-id="495ef-131">Note that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent have access to each other's assets.</span></span> <span data-ttu-id="495ef-132">I due servizi condividono un unico spazio di elaborazione e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent è un sysadmin sul servizio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="495ef-132">The two services share a single process space and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is a sysadmin on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span>  
  
-   <span data-ttu-id="495ef-133">Quando un processo TSX viene integrato con un processo MSX, sysadmins di MSX assume il controllo totale dell'istanza TSX di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="495ef-133">When a TSX enlists with an MSX, the MSX sysadmins gets total control over the TSX instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="495ef-134">Il processo ACE è un'estensione e non può richiamare se stesso.</span><span class="sxs-lookup"><span data-stu-id="495ef-134">ACE is an extension and cannot invoke itself.</span></span> <span data-ttu-id="495ef-135">ACE viene richiamato da Chainer ScenarioEngine.exe, anche noto come Microsoft.SqlServer.Chainer.Setup.exe, o può essere richiamato da un altro processo host.</span><span class="sxs-lookup"><span data-stu-id="495ef-135">ACE is invoked by Chainer ScenarioEngine.exe - also known as Microsoft.SqlServer.Chainer.Setup.exe - or it can be invoked by another host process.</span></span>  
  
-   <span data-ttu-id="495ef-136">ACE dipende dalle DLL di configurazione seguenti di proprietà di SSDP, perché le API delle DLL vengono richiamate da ACE:</span><span class="sxs-lookup"><span data-stu-id="495ef-136">ACE depends on the following configuration DLL's owned by SSDP, because those API's of DLL's are called by ACE:</span></span>  
  
    -   <span data-ttu-id="495ef-137">**SCO**: Microsoft.SqlServer.Configuration.Sco.dll, incluse le nuove convalide SCO per gli account virtuali</span><span class="sxs-lookup"><span data-stu-id="495ef-137">**SCO** - Microsoft.SqlServer.Configuration.Sco.dll, including new SCO validations for virtual accounts</span></span>  
  
    -   <span data-ttu-id="495ef-138">**Cluster**: Microsoft.SqlServer.Configuration.Cluster.dll</span><span class="sxs-lookup"><span data-stu-id="495ef-138">**Cluster** - Microsoft.SqlServer.Configuration.Cluster.dll</span></span>  
  
    -   <span data-ttu-id="495ef-139">**SFC**: Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span><span class="sxs-lookup"><span data-stu-id="495ef-139">**SFC** - Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span></span>  
  
    -   <span data-ttu-id="495ef-140">**Extension**: Microsoft.SqlServer.Configuration.ConfigExtension.dll</span><span class="sxs-lookup"><span data-stu-id="495ef-140">**Extension** - Microsoft.SqlServer.Configuration.ConfigExtension.dll</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="495ef-141">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="495ef-141">See Also</span></span>  
 <span data-ttu-id="495ef-142">[Ruoli predefiniti](../../reporting-services/security/role-definitions-predefined-roles.md) </span><span class="sxs-lookup"><span data-stu-id="495ef-142">[Predefined Roles](../../reporting-services/security/role-definitions-predefined-roles.md) </span></span>  
 <span data-ttu-id="495ef-143">[sp_addrolemember &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="495ef-143">[sp_addrolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span></span>  
 <span data-ttu-id="495ef-144">[sp_droprolemember &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="495ef-144">[sp_droprolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span></span>  
 [<span data-ttu-id="495ef-145">Centro sicurezza per il motore di Database di SQL Server e il Database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="495ef-145">Security Center for SQL Server Database Engine and Azure SQL Database</span></span>](../../relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database.md)  
  
  
