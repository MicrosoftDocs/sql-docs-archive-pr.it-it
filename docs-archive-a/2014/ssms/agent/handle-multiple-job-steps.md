---
title: Gestire più passaggi di processo | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- job steps [SQL Server Agent]
- ordering job steps [SQL Server]
- multiple job steps
- SQL Server Agent jobs, job steps
- control of flow for jobs [SQL Server]
ms.assetid: 7aba19ff-72b3-45f6-8e54-23f4988d63a8
author: stevestein
ms.author: sstein
ms.openlocfilehash: fef0fb69b5bfd028977276d8efabc333a21e0feb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87623709"
---
# <a name="handle-multiple-job-steps"></a><span data-ttu-id="2d111-102">Gestione di più passaggi di processo</span><span class="sxs-lookup"><span data-stu-id="2d111-102">Handle Multiple Job Steps</span></span>
  <span data-ttu-id="2d111-103">Se il processo è costituito da più passaggi, è necessario specificare l'ordine di esecuzione dei passaggi.</span><span class="sxs-lookup"><span data-stu-id="2d111-103">If your job has more than one job step, you must specify the order in which the job steps run.</span></span> <span data-ttu-id="2d111-104">Questa operazione è denominata \*controllo di Flow \* *.*</span><span class="sxs-lookup"><span data-stu-id="2d111-104">This is called *control of flow\*\*.*</span></span> <span data-ttu-id="2d111-105">È possibile aggiungere nuovi passaggi di processo e modificare il flusso dei passaggi esistenti in qualsiasi momento. Le modifiche verranno applicate alla successiva esecuzione del processo.</span><span class="sxs-lookup"><span data-stu-id="2d111-105">You can add new job steps and rearrange the flow of job steps at any time; the changes take effect the next time the job is run.</span></span> <span data-ttu-id="2d111-106">Nella figura riportata di seguito è illustrato il controllo di flusso relativo a un processo di backup del database.</span><span class="sxs-lookup"><span data-stu-id="2d111-106">This illustration shows the control of flow for a database backup job.</span></span>  
  
 <span data-ttu-id="2d111-107">![Controllo di flusso dei passaggi di processi di SQL Server Agent](../../database-engine/media/dbflow01.gif "Controllo di flusso dei passaggi di processi di SQL Server Agent")</span><span class="sxs-lookup"><span data-stu-id="2d111-107">![SQL Server Agent job steps control of flow](../../database-engine/media/dbflow01.gif "SQL Server Agent job steps control of flow")</span></span>  
  
 <span data-ttu-id="2d111-108">Il primo passaggio è rappresentato dal backup del database.</span><span class="sxs-lookup"><span data-stu-id="2d111-108">The first step is Backup Database.</span></span> <span data-ttu-id="2d111-109">Se questo passaggio non viene completato, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent segnala l'errore all'operatore specificato per la ricezione di notifiche.</span><span class="sxs-lookup"><span data-stu-id="2d111-109">If this step fails, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent reports failure to the operator who is defined to receive notification.</span></span> <span data-ttu-id="2d111-110">Se invece il backup del database viene completamente, il processo procede con il passaggio successivo, ovvero la ripulitura dei dati dei clienti.</span><span class="sxs-lookup"><span data-stu-id="2d111-110">If the Backup Database step succeeds, the job proceeds to the next step, "Scrub" Customer Data.</span></span> <span data-ttu-id="2d111-111">Se questo passaggio non viene eseguito correttamente, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent passa al ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="2d111-111">If this step fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent skips forward to Restore Database.</span></span> <span data-ttu-id="2d111-112">Se invece la ripulitura dei dati dei clienti viene completata, il processo procede con il passaggio successivo, ovvero l'aggiornamento delle statistiche, e così via fino al passaggio finale che può essere la segnalazione dell'avvenuto completamento o della mancata esecuzione.</span><span class="sxs-lookup"><span data-stu-id="2d111-112">If "Scrub" Customer Data succeeds, the job proceeds to the next step, Update Statistics, and so on, until the final step either results in Report Success or Report Failure.</span></span>  
  
 <span data-ttu-id="2d111-113">È necessario definire un'azione di controllo del flusso in corrispondenza dell'esecuzione o della mancata esecuzione di ogni passaggio di processo.</span><span class="sxs-lookup"><span data-stu-id="2d111-113">You define a control-of-flow action for the success and failure of each job step.</span></span> <span data-ttu-id="2d111-114">È inoltre necessario specificare un'operazione da eseguire sia in caso di esecuzione che di mancata esecuzione di un passaggio di processo.</span><span class="sxs-lookup"><span data-stu-id="2d111-114">You must specify an action to be taken when a job step succeeds and an action to be taken when a job step fails.</span></span> <span data-ttu-id="2d111-115">È infine possibile definire il numero di tentativi di ripetizione di un passaggio di processo non eseguito correttamente, nonché l'intervallo tra i tentativi.</span><span class="sxs-lookup"><span data-stu-id="2d111-115">You can also define the number of retry attempts for failed job steps and the interval between the retry attempts.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2d111-116">Quando si utilizza l'interfaccia utente grafica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent e si eliminano uno o più passaggi da un processo composto da più passaggi, tutti i passaggi del processo vengono rimossi e quindi vengono aggiunti nuovamente i passaggi restanti con i riferimenti corretti in caso di esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="2d111-116">When you use the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent graphical user interface (GUI) and delete one or more steps from a multistep job, the GUI removes all job steps and then adds the remaining steps back with the correct on-success or on-failure references.</span></span> <span data-ttu-id="2d111-117">Ad esempio, si supponga di eseguire un processo con cinque passaggi e che il primo passaggio sia configurato in modo da rimandare direttamente al passaggio 4 se completato correttamente.</span><span class="sxs-lookup"><span data-stu-id="2d111-117">For example, suppose you have a job with five steps, and the first step is configured to jump to step 4 if it completes successfully.</span></span> <span data-ttu-id="2d111-118">Se si utilizza l'interfaccia utente grafica e si elimina il passaggio 3, vengono rimossi tutti i passaggi per questo processo e vengono aggiunti i quattro passaggi restanti (1, 2, 4 e 5) con i riferimenti corretti.</span><span class="sxs-lookup"><span data-stu-id="2d111-118">If you delete step 3, the GUI removes all steps for this job and adds the remaining four steps (1, 2, 4, and 5) with corrected references.</span></span> <span data-ttu-id="2d111-119">In questo caso, il riferimento nel passaggio 1 verrebbe configurato per rimandare al passaggio 3 se il passaggio 1 viene completato correttamente.</span><span class="sxs-lookup"><span data-stu-id="2d111-119">In this case, the reference in step 1 would be reconfigured to jump to step 3 if step 1 completes successfully.</span></span>  
  
 <span data-ttu-id="2d111-120">I passaggi di processo devono essere autonomi.</span><span class="sxs-lookup"><span data-stu-id="2d111-120">Job steps must be self-contained.</span></span> <span data-ttu-id="2d111-121">Tra un passaggio di processo e l'altro non è pertanto consentito il trasferimento di valori booleani, dati o valori numerici.</span><span class="sxs-lookup"><span data-stu-id="2d111-121">That is, a job cannot pass Boolean values, data, or numeric values between job steps.</span></span> <span data-ttu-id="2d111-122">È tuttavia possibile passare valori da un passaggio di processo [!INCLUDE[tsql](../../includes/tsql-md.md)] a un altro utilizzando tabelle permanenti o tabelle temporanee globali.</span><span class="sxs-lookup"><span data-stu-id="2d111-122">You can, however, pass values from one [!INCLUDE[tsql](../../includes/tsql-md.md)] job step to another by using permanent tables or global temporary tables.</span></span> <span data-ttu-id="2d111-123">In particolare è possibile utilizzare file per passare valori di passaggi di processo che eseguono programmi eseguibili da un passaggio di processo a un altro.</span><span class="sxs-lookup"><span data-stu-id="2d111-123">You can pass values from job steps that run executable programs from one job step to another job step by using files.</span></span> <span data-ttu-id="2d111-124">Ad esempio, l'eseguibile eseguito da un passaggio di processo scrive in un file, mentre quello eseguito da un passaggio di processo successivo legge il file.</span><span class="sxs-lookup"><span data-stu-id="2d111-124">For example, the executable run by one job step writes a file, and the executable run by a subsequent job step reads the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2d111-125">Se si creano passaggi di processo ciclici (al passaggio 1 segue il passaggio 2, quindi dal passaggio 2 si torna al passaggio 1) e il processo viene creato tramite [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], viene visualizzato un messaggio di avviso.</span><span class="sxs-lookup"><span data-stu-id="2d111-125">If you create looping job steps (job step 1 is followed by job step 2, then job step 2 returns to job step 1), a warning message appears when the job is created using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2d111-126">Agent registra i dati relativi al processo e ai passaggi di processo nella cronologia del processo.</span><span class="sxs-lookup"><span data-stu-id="2d111-126">Agent records job and job step information in the job history.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2d111-127">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2d111-127">See Also</span></span>  
 <span data-ttu-id="2d111-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2d111-128">[sp_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-add-job-transact-sql) </span></span>  
 <span data-ttu-id="2d111-129">[dbo.sysjobhistory &#40;&#41;Transact-SQL](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2d111-129">[dbo.sysjobhistory &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobhistory-transact-sql) </span></span>  
 <span data-ttu-id="2d111-130">[Processi didbo.sys&#40;&#41;Transact-SQL](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2d111-130">[dbo.sysjobs &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobs-transact-sql) </span></span>  
 <span data-ttu-id="2d111-131">[dbo.sysJobSteps &#40;&#41;Transact-SQL](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2d111-131">[dbo.sysjobsteps &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/dbo-sysjobsteps-transact-sql) </span></span>  
 <span data-ttu-id="2d111-132">[Implementazione di processi](implement-jobs.md) </span><span class="sxs-lookup"><span data-stu-id="2d111-132">[Implement Jobs](implement-jobs.md) </span></span>  
 [<span data-ttu-id="2d111-133">Gestire passaggi di processo</span><span class="sxs-lookup"><span data-stu-id="2d111-133">Manage Job Steps</span></span>](manage-job-steps.md)  
  
  
