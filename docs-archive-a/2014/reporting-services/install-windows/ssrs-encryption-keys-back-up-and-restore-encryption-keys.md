---
title: Eseguire il backup e il ripristino delle chiavi di crittografia di Reporting Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- backing up encryption keys [Reporting Services]
- restoring encryption keys [Reporting Services]
- encryption keys [Reporting Services]
- symmetric keys [Reporting Services]
ms.assetid: 6773d5df-03ef-4781-beb7-9f6825bac979
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: c8e7e61f58632898fc6150210598a671157639a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87726623"
---
# <a name="back-up-and-restore-reporting-services-encryption-keys"></a><span data-ttu-id="b33b5-102">Eseguire il backup e il ripristino delle chiavi di crittografia di Reporting Services</span><span class="sxs-lookup"><span data-stu-id="b33b5-102">Back Up and Restore Reporting Services Encryption Keys</span></span>
  <span data-ttu-id="b33b5-103">Un aspetto importante della configurazione del server di report riguarda la creazione di una copia di backup della chiave simmetrica utilizzata per crittografare le informazioni riservate.</span><span class="sxs-lookup"><span data-stu-id="b33b5-103">An important part of report server configuration is creating a backup copy of the symmetric key used for encrypting sensitive information.</span></span> <span data-ttu-id="b33b5-104">La copia di backup della chiave è obbligatoria per molte operazioni di routine e consente di riutilizzare un database del server di report esistente in una nuova installazione.</span><span class="sxs-lookup"><span data-stu-id="b33b5-104">A backup copy of the key is required for many routine operations, and enables you to reuse an existing report server database in a new installation.</span></span>  
  
 <span data-ttu-id="b33b5-105">**[!INCLUDE[applies](../../includes/applies-md.md)]**  Modalità nativa di [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] | Modalità SharePoint di [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b33b5-105">**[!INCLUDE[applies](../../includes/applies-md.md)]**  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native Mode | [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] SharePoint mode</span></span>  
  
 <span data-ttu-id="b33b5-106">È necessario ripristinare la copia di backup della chiave di crittografia se si verifica uno degli eventi seguenti:</span><span class="sxs-lookup"><span data-stu-id="b33b5-106">It is necessary to restore the backup copy of the encryption key when any of the following events occur:</span></span>  
  
-   <span data-ttu-id="b33b5-107">Modifica del nome account del servizio Windows ReportServer o reimpostazione della password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-107">Changing the Report Server Windows service account name or resetting the password.</span></span> <span data-ttu-id="b33b5-108">Quando si utilizza Gestione configurazione Reporting Services, il backup della chiave fa parte dell'operazione di modifica del nome dell'account del servizio.</span><span class="sxs-lookup"><span data-stu-id="b33b5-108">When you use the Reporting Services Configuration Manager, backing up the key is part of a service account name change operation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="b33b5-109">La reimpostazione della password non equivale all'operazione di modifica della password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-109">Resetting the password is not the same as changing the password.</span></span> <span data-ttu-id="b33b5-110">Per reimpostare la password è necessario disporre dell'autorizzazione per sovrascrivere le informazioni relative all'account nel controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="b33b5-110">A password reset requires permission to overwrite account information on the domain controller.</span></span> <span data-ttu-id="b33b5-111">Le reimpostazioni delle password vengono eseguite da un amministratore di sistema quando l'utente dimentica o non conosce una password specifica.</span><span class="sxs-lookup"><span data-stu-id="b33b5-111">Password resets are performed by a system administrator when you forget or do not know a particular password.</span></span> <span data-ttu-id="b33b5-112">Il ripristino della chiave simmetrica è richiesto solo si rende necessario reimpostare la password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-112">Only password resets require symmetric key restoration.</span></span> <span data-ttu-id="b33b5-113">Il ripristino della chiave simmetrica non è necessario quando la password dell'account viene modificata periodicamente.</span><span class="sxs-lookup"><span data-stu-id="b33b5-113">Periodically changing an account password does not require you to reset the symmetric key.</span></span>  
  
-   <span data-ttu-id="b33b5-114">Ridenominazione del computer o dell'istanza che ospita il server di report (un'istanza del server di report è basata su un nome di istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="b33b5-114">Renaming the computer or instance that hosts the report server (a report server instance is based on a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name).</span></span>  
  
-   <span data-ttu-id="b33b5-115">Migrazione dell'installazione del server di report o configurazione di un server di report per utilizzare un diverso database del server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-115">Migrating a report server installation or configuring a report server to use a different report server database.</span></span>  
  
-   <span data-ttu-id="b33b5-116">Recupero dell'installazione del server di report in seguito a un errore hardware.</span><span class="sxs-lookup"><span data-stu-id="b33b5-116">Recovering a report server installation due to hardware failure.</span></span>  
  
 <span data-ttu-id="b33b5-117">È sufficiente eseguire il backup di una sola copia della chiave simmetrica.</span><span class="sxs-lookup"><span data-stu-id="b33b5-117">You only need to back up one copy of the symmetric key.</span></span> <span data-ttu-id="b33b5-118">Tra un database del server di report e una chiave simmetrica esiste una corrispondenza uno-a-uno.</span><span class="sxs-lookup"><span data-stu-id="b33b5-118">There is a one-to-one correspondence between a report server database and a symmetric key.</span></span> <span data-ttu-id="b33b5-119">Sebbene sia richiesto il backup di una sola copia, potrebbe essere necessario ripristinare la chiave più volte se si eseguono più server di report in un modello di distribuzione con scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="b33b5-119">Although you only need to back up one copy, you might need to restore the key multiple times if you are running multiple report servers in a scale-out deployment model.</span></span> <span data-ttu-id="b33b5-120">Per ogni istanza del server di report è necessario disporre della relativa copia della chiave simmetrica per bloccare e sbloccare i dati nel database del server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-120">Each report server instance will need its copy of the symmetric key to lock and unlock data in the report server database.</span></span>  
  
  
## <a name="backing-up-the-encryption-keys"></a><span data-ttu-id="b33b5-121">Backup delle chiavi di crittografia</span><span class="sxs-lookup"><span data-stu-id="b33b5-121">Backing Up the Encryption Keys</span></span>  
 <span data-ttu-id="b33b5-122">Durante il backup della chiave simmetrica, la chiave viene scritta nel file specificato dall'utente e quindi viene codificata utilizzando la password fornita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="b33b5-122">Backing up the symmetric key is a process that writes the key to a file that you specify, and then scrambles the key using a password that you provide.</span></span> <span data-ttu-id="b33b5-123">La chiave simmetrica non può mai essere archiviata non crittografata, pertanto è necessario fornire una password per codificarla al momento di salvarla su disco.</span><span class="sxs-lookup"><span data-stu-id="b33b5-123">The symmetric key can never be stored in an unencrypted state so you must provide a password to encrypt the key when you save it to disk.</span></span> <span data-ttu-id="b33b5-124">Dopo aver creato il file, è necessario archiviarlo in un percorso protetto e **ricordare la password** per poterlo sbloccare.</span><span class="sxs-lookup"><span data-stu-id="b33b5-124">After the file is created, you must store it in a secure location **and remember the password** that is used to unlock the file.</span></span> <span data-ttu-id="b33b5-125">Per eseguire il backup della chiave simmetrica, è possibile utilizzare gli strumenti riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="b33b5-125">To backup the symmetric key, you can use the following tools:</span></span>  
  
 <span data-ttu-id="b33b5-126">**Modalità nativa:** Gestione configurazione Reporting Services o l'utilità **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="b33b5-126">**Native mode:** Either the Reporting Services Configuration Manager or the **rskeymgmt** utility.</span></span>  
  
 <span data-ttu-id="b33b5-127">**Modalità SharePoint:** pagine di Amministrazione centrale SharePoint o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b33b5-127">**SharePoint mode:** SharePoint Central Administration pages or PowerShell.</span></span>  
  
####  <a name="backup-sharepoint-mode-report-servers"></a><a name="bkmk_backup_sharepoint"></a> <span data-ttu-id="b33b5-128">Eseguire il backup di server di report in modalità SharePoint</span><span class="sxs-lookup"><span data-stu-id="b33b5-128">Backup SharePoint Mode Report Servers</span></span>  
 <span data-ttu-id="b33b5-129">Per i server di report in modalità SharePoint è possibile utilizzare i comandi di PowerShell o le pagine di gestione per l'applicazione di servizio [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="b33b5-129">For SharePoint mode report servers you can either use PowerShell commands or use the management pages for the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service application.</span></span> <span data-ttu-id="b33b5-130">Per altre informazioni, vedere la sezione "Gestione chiavi" di [Gestire un'applicazione di servizio SharePoint di Reporting Services](../manage-a-reporting-services-sharepoint-service-application.md)</span><span class="sxs-lookup"><span data-stu-id="b33b5-130">For more information, see the "Key Management" section of [Manage a Reporting Services SharePoint Service Application](../manage-a-reporting-services-sharepoint-service-application.md)</span></span>  
  
####  <a name="back-up-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_backup_configuration_manager"></a> <span data-ttu-id="b33b5-131">Eseguire il backup di chiavi di crittografia - Gestione configurazione Reporting Services (modalità nativa)</span><span class="sxs-lookup"><span data-stu-id="b33b5-131">Back up encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b33b5-132">Avviare Gestione configurazione Reporting Services, quindi connettersi all'istanza del server di report che si desidera configurare.</span><span class="sxs-lookup"><span data-stu-id="b33b5-132">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="b33b5-133">Fare clic su **Chiave di crittografia**e quindi su **Backup**.</span><span class="sxs-lookup"><span data-stu-id="b33b5-133">Click **Encryption Keys**, and then click **Back Up**.</span></span>  
  
3.  <span data-ttu-id="b33b5-134">Utilizzare una password complessa.</span><span class="sxs-lookup"><span data-stu-id="b33b5-134">Type a strong password.</span></span>  
  
4.  <span data-ttu-id="b33b5-135">Specificare un file in cui includere la chiave archiviata.</span><span class="sxs-lookup"><span data-stu-id="b33b5-135">Specify a file to contain the stored key.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="b33b5-136">aggiunge l'estensione snk al file.</span><span class="sxs-lookup"><span data-stu-id="b33b5-136">appends a .snk file extension to the file.</span></span> <span data-ttu-id="b33b5-137">È consigliabile archiviare il file su un disco separato dal server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-137">Consider storing the file on a disk separate from the report server.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="back-up-encryption-keys--rskeymgmt-native-mode"></a><a name="bkmk_backup_rskeymgmt"></a><span data-ttu-id="b33b5-138">Eseguire il backup delle chiavi di crittografia-rskeymgmt (modalità nativa)</span><span class="sxs-lookup"><span data-stu-id="b33b5-138">Back up encryption keys -rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b33b5-139">Eseguire l'utilità **rskeymgmt.exe** nel computer locale che ospita il server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-139">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="b33b5-140">È necessario utilizzare l'argomento di estrazione `-e` per copiare la chiave. Specificare un nome file e una password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-140">You must use the `-e` extract argument to copy the key, provide a file name, and specify a password.</span></span> <span data-ttu-id="b33b5-141">Nell'esempio seguente vengono illustrati gli argomenti che è necessario specificare:</span><span class="sxs-lookup"><span data-stu-id="b33b5-141">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -e -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="restore-encryption-keys"></a><span data-ttu-id="b33b5-142">Ripristinare le chiavi di crittografia</span><span class="sxs-lookup"><span data-stu-id="b33b5-142">Restore Encryption Keys</span></span>  
 <span data-ttu-id="b33b5-143">Durante il ripristino della chiave simmetrica, la chiave simmetrica esistente e archiviata nel database del server di report viene sovrascritta.</span><span class="sxs-lookup"><span data-stu-id="b33b5-143">Restoring the symmetric key overwrites the existing symmetric key that is stored in the report server database.</span></span> <span data-ttu-id="b33b5-144">Durante il ripristino di una chiave di crittografia, una chiave inutilizzabile viene sostituita con una copia salvata in precedenza su disco.</span><span class="sxs-lookup"><span data-stu-id="b33b5-144">Restoring an encryption key replaces an unusable key with a copy that you previously saved to disk.</span></span> <span data-ttu-id="b33b5-145">A seguito del ripristino delle chiavi di crittografia si verificano le azioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="b33b5-145">Restoring encryption keys results in the following actions:</span></span>  
  
-   <span data-ttu-id="b33b5-146">La chiave simmetrica viene aperta dal file di backup protetto da password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-146">The symmetric key is opened from the password protected backup file.</span></span>  
  
-   <span data-ttu-id="b33b5-147">La chiave simmetrica viene crittografata tramite la chiave pubblica del servizio Windows ReportServer.</span><span class="sxs-lookup"><span data-stu-id="b33b5-147">The symmetric key is encrypted using the public key of the Report Server Windows service.</span></span>  
  
-   <span data-ttu-id="b33b5-148">La chiave simmetrica crittografata viene archiviata nel database del server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-148">The encrypted symmetric key is stored in the report server database.</span></span>  
  
-   <span data-ttu-id="b33b5-149">I dati della chiave simmetrica archiviati in precedenza, ad esempio le informazioni sulla chiave già presenti nel database del server di report a seguito di una distribuzione precedente, vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="b33b5-149">The previously stored symmetric key data (for example, key information that was already in the report server database from a previous deployment) is deleted.</span></span>  
  
 <span data-ttu-id="b33b5-150">Per ripristinare la chiave di crittografia è necessario possederne una copia su file.</span><span class="sxs-lookup"><span data-stu-id="b33b5-150">To restore the encryption key, you must have a copy of the encryption key on file.</span></span> <span data-ttu-id="b33b5-151">È inoltre necessario conoscere la password per l'accesso alla copia archiviata.</span><span class="sxs-lookup"><span data-stu-id="b33b5-151">You must also know the password that unlocks the stored copy.</span></span> <span data-ttu-id="b33b5-152">Il possesso della chiave e della password consente di eseguire lo strumento di configurazione di Reporting Services o l'utilità **rskeymgmt** per ripristinare la chiave.</span><span class="sxs-lookup"><span data-stu-id="b33b5-152">If you have the key and the password, you can run the Reporting Services Configuration tool or **rskeymgmt** utility to restore the key.</span></span> <span data-ttu-id="b33b5-153">La chiave simmetrica deve essere la stessa che blocca e sblocca i dati crittografati attualmente archiviati nel database del server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-153">The symmetric key must be the same one that locks and unlocks encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="b33b5-154">Se viene ripristinata una copia non valida, il server di report non è in grado di accedere ai dati crittografati attualmente archiviati nel database del server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-154">If you restore a copy that is not valid, the report server cannot access the encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="b33b5-155">In questo caso, potrebbe essere necessario eliminare tutti i valori crittografati se non è possibile ripristinare una chiave valida.</span><span class="sxs-lookup"><span data-stu-id="b33b5-155">If this occurs, you might need to delete all encrypted values if you cannot restore a valid key.</span></span> <span data-ttu-id="b33b5-156">Se per qualche ragione non è possibile ripristinare la chiave di crittografia, ad esempio se non si possiede una copia di backup, è necessario eliminare la chiave esistente e il contenuto crittografato.</span><span class="sxs-lookup"><span data-stu-id="b33b5-156">If for some reason you cannot restore the encryption key (for example, if you do not have a backup copy), you must delete the existing key and encrypted content.</span></span> <span data-ttu-id="b33b5-157">Per altre informazioni, vedere [Eliminare e ricreare chiavi di crittografia &#40;Gestione configurazione SSRS&#41;](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span><span class="sxs-lookup"><span data-stu-id="b33b5-157">For more information, see [Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span></span> <span data-ttu-id="b33b5-158">Per altre informazioni sulla creazione della chiave simmetrica, vedere [Inizializzare un server di report &#40;Gestione configurazione SSRS&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="b33b5-158">For more information about creating symmetric keys, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
####  <a name="restore-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_restore_configuration_manager"></a> <span data-ttu-id="b33b5-159">Ripristinare le chiavi di crittografia - Gestione configurazione Reporting Services (modalità nativa)</span><span class="sxs-lookup"><span data-stu-id="b33b5-159">Restore encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b33b5-160">Avviare Gestione configurazione Reporting Services, quindi connettersi all'istanza del server di report che si desidera configurare.</span><span class="sxs-lookup"><span data-stu-id="b33b5-160">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="b33b5-161">Nella pagina chiavi di crittografia fare clic su **Ripristina**.</span><span class="sxs-lookup"><span data-stu-id="b33b5-161">On the Encryption Keys page, click **Restore**.</span></span>  
  
3.  <span data-ttu-id="b33b5-162">Selezionare il file con estensione snk che contiene la copia di backup.</span><span class="sxs-lookup"><span data-stu-id="b33b5-162">Select the .snk file that contains the back up copy.</span></span>  
  
4.  <span data-ttu-id="b33b5-163">Digitare la password che sblocca il file.</span><span class="sxs-lookup"><span data-stu-id="b33b5-163">Type the password that unlocks the file.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="restore-encryption-keys---rskeymgmt-native-mode"></a><a name="bkmk_restore_rskeymgmt"></a> <span data-ttu-id="b33b5-164">Ripristinare le chiavi di crittografia - rskeymgmt (modalità nativa)</span><span class="sxs-lookup"><span data-stu-id="b33b5-164">Restore encryption keys - rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="b33b5-165">Eseguire l'utilità **rskeymgmt.exe** nel computer locale che ospita il server di report.</span><span class="sxs-lookup"><span data-stu-id="b33b5-165">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="b33b5-166">Utilizzare l'argomento `-a` per ripristinare le chiavi.</span><span class="sxs-lookup"><span data-stu-id="b33b5-166">Use the `-a` argument to restore the keys.</span></span> <span data-ttu-id="b33b5-167">È necessario fornire un nome file completo e specificare una password.</span><span class="sxs-lookup"><span data-stu-id="b33b5-167">You must provide a fully-qualified file name and specify a password.</span></span> <span data-ttu-id="b33b5-168">Nell'esempio seguente vengono illustrati gli argomenti che è necessario specificare:</span><span class="sxs-lookup"><span data-stu-id="b33b5-168">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -a -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="b33b5-169">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="b33b5-169">See Also</span></span>  
 [<span data-ttu-id="b33b5-170">Configurare e gestire chiavi di crittografia &#40;Gestione configurazione SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="b33b5-170">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-manage-encryption-keys.md)  
