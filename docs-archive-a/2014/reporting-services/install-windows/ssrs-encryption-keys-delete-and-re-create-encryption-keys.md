---
title: Eliminare e ricreare chiavi di crittografia (Gestione configurazione SSRS) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- re-creating encryption keys
- encryption keys [Reporting Services]
- deleting encryption keys
- symmetric keys [Reporting Services]
- removing encryption keys
- resetting encryption keys
ms.assetid: 201afe5f-acc9-4a37-b5ec-121dc7df2a61
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 8fa5138e4bbb84395bad79a272d2bde31389396b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87726615"
---
# <a name="delete-and-re-create-encryption-keys--ssrs-configuration-manager"></a><span data-ttu-id="90723-102">Eliminare e ricreare chiavi di crittografia (Gestione configurazione SSRS)</span><span class="sxs-lookup"><span data-stu-id="90723-102">Delete and Re-create Encryption Keys  (SSRS Configuration Manager)</span></span>
  <span data-ttu-id="90723-103">Le attività di eliminazione e ricreazione di chiavi di crittografia non rientrano nella manutenzione di routine delle chiavi di crittografia.</span><span class="sxs-lookup"><span data-stu-id="90723-103">Deleting and re-creating encryption keys are activities that fall outside of routine encryption key maintenance.</span></span> <span data-ttu-id="90723-104">Tali attività vengono eseguite in risposta a una specifica minaccia al server di report oppure come ultima risorsa quando non è più possibile accedere a un database del server di report.</span><span class="sxs-lookup"><span data-stu-id="90723-104">You perform these tasks in response to a specific threat to your report server, or as a last resort when you can no longer access a report server database.</span></span>  
  
-   <span data-ttu-id="90723-105">Ricreare la chiave simmetrica quando si ritiene che quella esistente sia compromessa.</span><span class="sxs-lookup"><span data-stu-id="90723-105">Re-create the symmetric key when you believe the existing symmetric key is compromised.</span></span> <span data-ttu-id="90723-106">È inoltre possibile ricreare la chiave regolarmente come procedura consigliata per la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="90723-106">You can also re-create the key on a regular basis as a security best practice.</span></span>  
  
-   <span data-ttu-id="90723-107">Eliminare le chiavi di crittografia esistenti e il contenuto crittografato inutilizzabile quando non è possibile ripristinare la chiave simmetrica.</span><span class="sxs-lookup"><span data-stu-id="90723-107">Delete existing encryption keys and unusable encrypted content when you cannot restore the symmetric key.</span></span>  
  
## <a name="re-creating-encryption-keys"></a><span data-ttu-id="90723-108">ricreazione di chiavi di crittografia</span><span class="sxs-lookup"><span data-stu-id="90723-108">Re-creating Encryption Keys</span></span>  
 <span data-ttu-id="90723-109">Se si ha la prova che la chiave simmetrica sia nota a utenti non autorizzati oppure se il server di report è stato attaccato, come misura di sicurezza è possibile ricreare la chiave simmetrica in modo da reimpostarla.</span><span class="sxs-lookup"><span data-stu-id="90723-109">If you have evidence that the symmetric key is known to unauthorized users, or if your report server has been under attack and you want to reset the symmetric key as a precaution, you can re-create the symmetric key.</span></span> <span data-ttu-id="90723-110">Se si ricrea la chiave simmetrica, tutti i valori crittografati verranno crittografati nuovamente utilizzando il nuovo valore.</span><span class="sxs-lookup"><span data-stu-id="90723-110">When you re-create the symmetric key, all encrypted values will be re-encrypted using the new value.</span></span> <span data-ttu-id="90723-111">Se si eseguono più server in una distribuzione con scalabilità orizzontale, tutte le copie della chiave simmetrica verranno aggiornate in base al nuovo valore.</span><span class="sxs-lookup"><span data-stu-id="90723-111">If you are running multiple report servers in a scale-out deployment, all copies of the symmetric key will be updated to the new value.</span></span> <span data-ttu-id="90723-112">Il server di report utilizza le chiavi pubbliche disponibili per aggiornare la chiave simmetrica per ogni server presente nella distribuzione.</span><span class="sxs-lookup"><span data-stu-id="90723-112">The report server uses the public keys available to it to update the symmetric key for each server in the deployment.</span></span>  
  
 <span data-ttu-id="90723-113">La chiave simmetrica può essere ricreata solo quando il server di report è in uno stato attivo.</span><span class="sxs-lookup"><span data-stu-id="90723-113">You can only re-create the symmetric key when the report server is in a working state.</span></span> <span data-ttu-id="90723-114">La ricreazione delle chiavi di crittografia e la riesecuzione della crittografia del contenuto interferisce con le operazioni del server.</span><span class="sxs-lookup"><span data-stu-id="90723-114">Re-creating the encryption keys and re-encrypting content disrupts server operations.</span></span> <span data-ttu-id="90723-115">Durante l'operazione di riesecuzione della crittografia il server deve essere offline</span><span class="sxs-lookup"><span data-stu-id="90723-115">You must take the server offline while re-encryption is underway.</span></span> <span data-ttu-id="90723-116">e il server di report non deve ricevere richieste.</span><span class="sxs-lookup"><span data-stu-id="90723-116">There should be no requests made to the report server during re-encryption.</span></span>  
  
 <span data-ttu-id="90723-117">Per reimpostare la chiave simmetrica e i dati crittografati è possibile usare lo strumento di configurazione di Reporting Services o l'utilità **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="90723-117">You can use the Reporting Services Configuration tool or the **rskeymgmt** utility to reset the symmetric key and encrypted data.</span></span> <span data-ttu-id="90723-118">Per altre informazioni sulla creazione della chiave simmetrica, vedere [Inizializzare un server di report &#40;Gestione configurazione SSRS&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="90723-118">For more information about how the symmetric key is created, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
#### <a name="how-to-re-create-encryption-keys-reporting-services-configuration-tool"></a><span data-ttu-id="90723-119">Come ricreare chiavi di crittografia (strumento di configurazione di Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="90723-119">How to re-create encryption keys (Reporting Services Configuration Tool)</span></span>  
  
1.  <span data-ttu-id="90723-120">Disabilitare il servizio Web ReportServer e l'accesso HTTP modificando la proprietà `IsWebServiceEnabled` nel file rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="90723-120">Disable the Report Server Web service and HTTP access by modifying the `IsWebServiceEnabled` property in the rsreportserver.config file.</span></span> <span data-ttu-id="90723-121">Questo passaggio arresta temporaneamente l'invio delle richieste di autenticazione al server di report senza arrestare completamente il server.</span><span class="sxs-lookup"><span data-stu-id="90723-121">This step temporarily stops authentication requests from being sent to the report server without completely shutting down the server.</span></span> <span data-ttu-id="90723-122">È necessario disporre di un servizio minimo per poter ricreare le chiavi.</span><span class="sxs-lookup"><span data-stu-id="90723-122">You must have minimal service so that you can recreate the keys.</span></span>  
  
     <span data-ttu-id="90723-123">Se vengono ricreate chiavi di crittografia per una distribuzione con scalabilità orizzontale del server di report, disabilitare questa proprietà in tutte le istanze presenti nella distribuzione.</span><span class="sxs-lookup"><span data-stu-id="90723-123">If you are recreating encryption keys for a report server scale-out deployment, disable this property on all instances in the deployment.</span></span>  
  
    1.  <span data-ttu-id="90723-124">Aprire Esplora risorse e passare all' *unità*:\Programmi\Microsoft SQL Server\\*istanza_server_report*\Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="90723-124">Open Windows Explorer and navigate to *drive*:\Program Files\Microsoft SQL Server\\*report_server_instance*\Reporting Services.</span></span> <span data-ttu-id="90723-125">Sostituire *unità* con la lettera dell'unità locale e *istanza_server_report* con il nome della cartella che corrisponde all'istanza del server di report per cui si vuole disabilitare il servizio Web e l'accesso HTTP.</span><span class="sxs-lookup"><span data-stu-id="90723-125">Replace *drive* with your drive letter and *report_server_instance* with the folder name that corresponds to the report server instance for which you want to disable the Web service and HTTP access.</span></span> <span data-ttu-id="90723-126">Ad esempio, C:\Programmi\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="90723-126">For example, C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services.</span></span>  
  
    2.  <span data-ttu-id="90723-127">Aprire il file rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="90723-127">Open the rsreportserver.config file.</span></span>  
  
    3.  <span data-ttu-id="90723-128">Per la proprietà `IsWebServiceEnabled`, specificare `False`, quindi salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="90723-128">For the `IsWebServiceEnabled` property, specify `False`, and then save your changes.</span></span>  
  
2.  <span data-ttu-id="90723-129">Avviare lo strumento di configurazione di Reporting Services e quindi connettersi all'istanza del server di report che si desidera configurare.</span><span class="sxs-lookup"><span data-stu-id="90723-129">Start the Reporting Services Configuration tool, and then connect to the report server instance you want to configure.</span></span>  
  
3.  <span data-ttu-id="90723-130">Nella pagina Chiave di crittografia fare clic su **Cambia**.</span><span class="sxs-lookup"><span data-stu-id="90723-130">On the Encryption Keys page, click **Change**.</span></span> [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
4.  <span data-ttu-id="90723-131">Riavviare il servizio Windows ReportServer.</span><span class="sxs-lookup"><span data-stu-id="90723-131">Restart the Report Server Windows service.</span></span> <span data-ttu-id="90723-132">Se si ricreano chiavi di crittografia per una distribuzione con scalabilità orizzontale, riavviare il servizio su tutte le istanze.</span><span class="sxs-lookup"><span data-stu-id="90723-132">If you are recreating encryption keys for a scale-out deployment, restart the service on all instances.</span></span>  
  
5.  <span data-ttu-id="90723-133">Riabilitare il servizio Web ReportServer e l'accesso HTTP modificando la proprietà `IsWebServiceEnabled` nel file rsreportserver.config.</span><span class="sxs-lookup"><span data-stu-id="90723-133">Re-enable the Web service and HTTP access by modifying the `IsWebServiceEnabled` property in the rsreportserver.config file.</span></span> <span data-ttu-id="90723-134">Se si utilizza una distribuzione con scalabilità orizzontale, eseguire questa procedura per tutte le istanze.</span><span class="sxs-lookup"><span data-stu-id="90723-134">Do this for all instances if you are working with a scale out deployment.</span></span>  
  
#### <a name="how-to-re-create-encryption-keys-rskeymgmt"></a><span data-ttu-id="90723-135">Come ricreare chiavi di crittografia (rskeymgmt)</span><span class="sxs-lookup"><span data-stu-id="90723-135">How to re-create encryption keys (rskeymgmt)</span></span>  
  
1.  <span data-ttu-id="90723-136">Disabilitare il servizio Web ReportServer e l'accesso HTTP.</span><span class="sxs-lookup"><span data-stu-id="90723-136">Disable the Report Server Web service and HTTP access.</span></span> <span data-ttu-id="90723-137">Per arrestare le operazioni del servizio Web, seguire le istruzioni riportate nella procedura precedente.</span><span class="sxs-lookup"><span data-stu-id="90723-137">Use the instructions in the previous procedure to stop Web service operations.</span></span>  
  
2.  <span data-ttu-id="90723-138">Eseguire l'utilità **rskeymgmt.exe** nel computer locale che ospita il server di report.</span><span class="sxs-lookup"><span data-stu-id="90723-138">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="90723-139">Per reimpostare la chiave simmetrica, utilizzare l'argomento `-s`.</span><span class="sxs-lookup"><span data-stu-id="90723-139">Use the `-s` argument to reset the symmetric key.</span></span> <span data-ttu-id="90723-140">Non sono necessari altri argomenti:</span><span class="sxs-lookup"><span data-stu-id="90723-140">No other arguments are required:</span></span>  
  
    ```  
    rskeymgmt -s  
    ```  
  
3.  <span data-ttu-id="90723-141">Riavviare il servizio Windows e abilitare le operazioni del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="90723-141">Restart the Windows service and enable Web service operations.</span></span>  
  
## <a name="deleting-unusable-encrypted-content"></a><span data-ttu-id="90723-142">Eliminazione di contenuto crittografato non utilizzabile</span><span class="sxs-lookup"><span data-stu-id="90723-142">Deleting Unusable Encrypted Content</span></span>  
 <span data-ttu-id="90723-143">Se per qualsiasi motivo non è possibile ripristinare la chiave di crittografia, il server di report non è in grado di decrittografare e utilizzare dati crittografati con quella chiave.</span><span class="sxs-lookup"><span data-stu-id="90723-143">If for some reason you cannot restore the encryption key, the report server will never be able to decrypt and use any data that is encrypted with that key.</span></span> <span data-ttu-id="90723-144">Per ripristinare lo stato attivo del server di report, è necessario eliminare i valori crittografati attualmente archiviati nel database del server di report e quindi specificare di nuovo manualmente i valori necessari.</span><span class="sxs-lookup"><span data-stu-id="90723-144">To return the report server to a working state, you must delete the encrypted values that are currently stored in the report server database and then manually re-specify the values you need.</span></span>  
  
 <span data-ttu-id="90723-145">Se si eliminano le chiavi di crittografia, verranno rimosse tutte le informazioni relative alla chiave simmetrica dal database del server di report e verrà eliminato tutto il contenuto crittografato.</span><span class="sxs-lookup"><span data-stu-id="90723-145">Deleting the encryption keys removes all symmetric key information from the report server database and deletes any encrypted content.</span></span> <span data-ttu-id="90723-146">Tutti i dati non crittografati rimarranno invariati. Verrà eliminato solo il contenuto crittografato.</span><span class="sxs-lookup"><span data-stu-id="90723-146">All unencrypted data is left intact; only encrypted content is removed.</span></span> <span data-ttu-id="90723-147">Quando si eliminano le chiavi di crittografia, il server di report viene reinizializzato automaticamente mediante l'aggiunta di una nuova chiave simmetrica.</span><span class="sxs-lookup"><span data-stu-id="90723-147">When you delete the encryption keys, the report server re-initializes itself automatically by adding a new symmetric key.</span></span> <span data-ttu-id="90723-148">Quando viene eliminato contenuto crittografato, si verifica quanto riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="90723-148">The following occurs when you delete encrypted content:</span></span>  
  
-   <span data-ttu-id="90723-149">Vengono eliminate le stringhe di connessione nelle origini dei dati condivise.</span><span class="sxs-lookup"><span data-stu-id="90723-149">Connection strings in shared data sources are deleted.</span></span> <span data-ttu-id="90723-150">Per gli utenti che eseguono report viene visualizzato l'errore "La proprietà ConnectionString non è stata inizializzata".</span><span class="sxs-lookup"><span data-stu-id="90723-150">Users who run reports get the error "The ConnectionString property has not been initialized."</span></span>  
  
-   <span data-ttu-id="90723-151">Le credenziali archiviate vengono eliminate.</span><span class="sxs-lookup"><span data-stu-id="90723-151">Stored credentials are deleted.</span></span> <span data-ttu-id="90723-152">I report e le origini dei dati condivise vengono riconfigurati in modo da utilizzare le credenziali richieste.</span><span class="sxs-lookup"><span data-stu-id="90723-152">Reports and shared data sources are reconfigured to use prompted credentials.</span></span>  
  
-   <span data-ttu-id="90723-153">I report basati su modelli, e che richiedono origini dei dati condivise configurate con credenziali archiviate o prive di credenziali, non vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="90723-153">Reports that are based on models (and require shared data sources configured with stored or no credentials) will not run.</span></span>  
  
-   <span data-ttu-id="90723-154">Le sottoscrizioni vengono disattivate.</span><span class="sxs-lookup"><span data-stu-id="90723-154">Subscriptions are deactivated.</span></span>  
  
 <span data-ttu-id="90723-155">Il contenuto crittografato eliminato non potrà essere recuperato.</span><span class="sxs-lookup"><span data-stu-id="90723-155">Once you delete encrypted content, you cannot recover it.</span></span> <span data-ttu-id="90723-156">Oltre a specificare di nuovo le stringhe di connessione e le credenziali archiviate, è necessario attivare le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="90723-156">You must re-specify connection strings and stored credentials, and you must activate subscriptions.</span></span>  
  
 <span data-ttu-id="90723-157">Per rimuovere i valori è possibile usare lo strumento di configurazione di Reporting Services o l'utilità **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="90723-157">You can use the Reporting Services Configuration tool or the **rskeymgmt** utility to remove the values.</span></span>  
  
#### <a name="how-to-delete-encryption-keys-reporting-services-configuration-tool"></a><span data-ttu-id="90723-158">Come eliminare chiavi di crittografia (strumento di configurazione di Reporting Services)</span><span class="sxs-lookup"><span data-stu-id="90723-158">How to delete encryption keys (Reporting Services Configuration Tool)</span></span>  
  
1.  <span data-ttu-id="90723-159">Avviare lo strumento di configurazione di Reporting Services e quindi connettersi all'istanza del server di report che si desidera configurare.</span><span class="sxs-lookup"><span data-stu-id="90723-159">Start the Reporting Services Configuration tool, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="90723-160">Fare clic su **Chiave di crittografia**e quindi su **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="90723-160">Click **Encryption Keys**, and then click **Delete**.</span></span> [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
3.  <span data-ttu-id="90723-161">Riavviare il servizio Windows ReportServer.</span><span class="sxs-lookup"><span data-stu-id="90723-161">Restart the Report Server Windows service.</span></span> <span data-ttu-id="90723-162">Per una distribuzione con scalabilità orizzontale, eseguire questa procedura per tutte le istanze del server di report.</span><span class="sxs-lookup"><span data-stu-id="90723-162">For a scale-out deployment, do this on all report server instances.</span></span>  
  
#### <a name="how-to-delete-encryption-keys-rskeymmgt"></a><span data-ttu-id="90723-163">Come eliminare chiavi di crittografia (rskeymgmt)</span><span class="sxs-lookup"><span data-stu-id="90723-163">How to delete encryption keys (rskeymmgt)</span></span>  
  
1.  <span data-ttu-id="90723-164">Eseguire l'utilità **rskeymgmt.exe** nel computer locale che ospita il server di report.</span><span class="sxs-lookup"><span data-stu-id="90723-164">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="90723-165">È necessario usare l'argomento di applicazione **-d** .</span><span class="sxs-lookup"><span data-stu-id="90723-165">You must use the **-d** apply argument.</span></span> <span data-ttu-id="90723-166">Nell'esempio seguente viene illustrato l'argomento che è necessario specificare:</span><span class="sxs-lookup"><span data-stu-id="90723-166">The following example illustrates the argument you must specify:</span></span>  
  
    ```  
    rskeymgmt -d  
    ```  
  
2.  <span data-ttu-id="90723-167">Riavviare il servizio Windows ReportServer.</span><span class="sxs-lookup"><span data-stu-id="90723-167">Restart the Report Server Windows service.</span></span> <span data-ttu-id="90723-168">Per una distribuzione con scalabilità orizzontale, eseguire questa procedura per tutte le istanze del server di report.</span><span class="sxs-lookup"><span data-stu-id="90723-168">For a scale-out deployment, do this on all report server instances.</span></span>  
  
#### <a name="how-to-re-specify-encrypted-values"></a><span data-ttu-id="90723-169">Come specificare di nuovo i valori crittografati</span><span class="sxs-lookup"><span data-stu-id="90723-169">How to re-specify encrypted values</span></span>  
  
1.  <span data-ttu-id="90723-170">Digitare di nuovo la stringa di connessione per ogni origine dei dati condivisa.</span><span class="sxs-lookup"><span data-stu-id="90723-170">For each shared data source, you must retype the connection string.</span></span>  
  
2.  <span data-ttu-id="90723-171">Digitare di nuovo il nome utente e la password per ogni report e origine dati condivisa che utilizza le credenziali archiviate, quindi salvare.</span><span class="sxs-lookup"><span data-stu-id="90723-171">For each report and shared data source that uses stored credentials, you must retype the user name and password, and then save.</span></span> <span data-ttu-id="90723-172">Per altre informazioni, vedere [Specificare le credenziali e le informazioni sulla connessione per le origini dati del report](../../integration-services/connection-manager/data-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Documentazione online.</span><span class="sxs-lookup"><span data-stu-id="90723-172">For more information, see [Specify Credential and Connection Information for Report Data Sources](../../integration-services/connection-manager/data-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
3.  <span data-ttu-id="90723-173">Aprire ogni sottoscrizione guidata dai dati e digitare di nuovo le credenziali per l'accesso al database di sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="90723-173">For each data-driven subscription, open each subscription and retype the credentials to the subscription database.</span></span>  
  
4.  <span data-ttu-id="90723-174">Aprire ogni sottoscrizione che utilizza dati crittografati, incluse l'estensione per il recapito tramite condivisione file ed eventuali estensioni per il recapito di terze parti che utilizzano la crittografia, e quindi digitare di nuovo le credenziali.</span><span class="sxs-lookup"><span data-stu-id="90723-174">For subscriptions that use encrypted data (this includes the File Share delivery extension and any third-party delivery extension that uses encryption), open each subscription and retype credentials.</span></span> <span data-ttu-id="90723-175">Le sottoscrizioni che utilizzano il recapito tramite posta elettronica di Report Server non utilizzano dati crittografati e quindi non sono interessate dalla modifica delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="90723-175">Subscriptions that use Report Server e-mail delivery do not use encrypted data and are unaffected by the key change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90723-176">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="90723-176">See Also</span></span>  
 <span data-ttu-id="90723-177">[Configurare e gestire chiavi di crittografia &#40;Configuration Manager SSRS&#41;](ssrs-encryption-keys-manage-encryption-keys.md) </span><span class="sxs-lookup"><span data-stu-id="90723-177">[Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) </span></span>  
 [<span data-ttu-id="90723-178">Archiviare i dati crittografati del server di report &#40;Gestione configurazione SSRS &#41;</span><span class="sxs-lookup"><span data-stu-id="90723-178">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
