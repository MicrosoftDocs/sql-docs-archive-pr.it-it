---
title: Visualizzare e analizzare le tracce con SQL Server Profiler | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: profiler
ms.topic: conceptual
helpviewer_keywords:
- Profiler [SQL Server Profiler], viewing traces
- SQL Server Profiler, viewing traces
- traces [SQL Server], viewing
- SQL Server Profiler, troubleshooting
- troubleshooting [SQL Server], traces
- events [SQL Server], finding inside trace
- Profiler [SQL Server Profiler], troubleshooting
- traces [SQL Server], events
ms.assetid: 17e821ca-a12e-4192-acc1-96765d9ae266
author: stevestein
ms.author: sstein
ms.openlocfilehash: b3e848fe9a07d838631eef1737c2a7679b67e649
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87626431"
---
# <a name="view-and-analyze-traces-with-sql-server-profiler"></a><span data-ttu-id="3c8a3-102">Visualizzare e analizzare le tracce con SQL Server Profiler</span><span class="sxs-lookup"><span data-stu-id="3c8a3-102">View and Analyze Traces with SQL Server Profiler</span></span>
  <span data-ttu-id="3c8a3-103">Utilizzare [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] per visualizzare i dati eventi acquisiti in una traccia.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-103">Use [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to view captured event data in a trace.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="3c8a3-104">consente di visualizzare i dati in base alle proprietà definite della traccia.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-104">displays data based on defined trace properties.</span></span> <span data-ttu-id="3c8a3-105">Per analizzare i dati di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] è possibile copiarli in un altro programma, ad esempio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] o Ottimizzazione guidata [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-105">One way to analyze [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data is to copy the data to another program, such as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="3c8a3-106">Se la colonna di dati **Text** è inclusa nella traccia, in Ottimizzazione guidata è possibile usare un file di traccia contenente eventi correlati a batch SQL e RPC (Remote Procedure Call).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-106">Tuning Advisor can use a trace file that contains SQL batch and remote procedure call (RPC) events if the **Text** data column is included in the trace.</span></span> <span data-ttu-id="3c8a3-107">Per assicurarsi di acquisire gli eventi e le colonne corretti da utilizzare con Ottimizzazione guidata [!INCLUDE[ssDE](../../includes/ssde-md.md)] , utilizzare il modello di ottimizzazione predefinito disponibile in [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3c8a3-107">To make sure that the correct events and columns are captured for use with [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor, use the predefined Tuning template that is supplied with [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
 <span data-ttu-id="3c8a3-108">Quando si apre una traccia utilizzando [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], non è necessario specificare l'estensione di file trc per il file di traccia, se tale file è stato creato da stored procedure sistema di [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] o di Traccia SQL.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-108">When you open a trace by using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], the trace file does not need to have the .trc file extension if the file was created by either [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] or SQL Trace system stored procedures.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="3c8a3-109">è anche in grado di leggere file con estensione log di Traccia SQL e file script SQL generici.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-109">can also read SQL Trace .log files and generic SQL script files.</span></span> <span data-ttu-id="3c8a3-110">Per l'apertura di un file log di Traccia SQL senza estensione log, ad esempio trace.txt, specificare **SQLTrace_Log** come formato del file.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-110">When opening a SQL Trace .log file that does not have a .log file extension, such as trace.txt, specify **SQLTrace_Log** as the file format.</span></span>  
  
 <span data-ttu-id="3c8a3-111">È possibile configurare il formato di visualizzazione della data e dell'ora di [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] per semplificare l'analisi delle tracce.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-111">You can configure the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] date and time display format to assist in trace analysis.</span></span>  
  
## <a name="troubleshooting-data"></a><span data-ttu-id="3c8a3-112">Risoluzione dei problemi relativi ai dati</span><span class="sxs-lookup"><span data-stu-id="3c8a3-112">Troubleshooting Data</span></span>  
 <span data-ttu-id="3c8a3-113">[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]consente di risolvere i problemi relativi ai dati raggruppando le tracce o i file di traccia in base alle colonne di dati **Duration**, **CPU**, **Reads**o **Writes** .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-113">Using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], you can troubleshoot data by grouping traces or trace files by the **Duration**, **CPU**, **Reads**, or **Writes** data columns.</span></span> <span data-ttu-id="3c8a3-114">I dati che possono essere inclusi nella risoluzione dei problemi corrispondono a query con prestazioni insufficienti o che generano un numero estremamente elevato di operazioni di letture logiche.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-114">Examples of data you might troubleshoot are queries that perform poorly or that have exceptionally high numbers of logical read operations.</span></span>  
  
 <span data-ttu-id="3c8a3-115">È possibile isolare informazioni aggiuntive salvando le tracce in tabelle e utilizzando istruzioni [!INCLUDE[tsql](../../includes/tsql-md.md)] per eseguire query nei dati di evento.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-115">Additional information can be found by saving traces to tables and using [!INCLUDE[tsql](../../includes/tsql-md.md)] to query the event data.</span></span> <span data-ttu-id="3c8a3-116">Ad esempio, per individuare gli eventi **SQL:BatchCompleted** per i quali il tempo di attesa è stato eccessivo, eseguire quanto segue:</span><span class="sxs-lookup"><span data-stu-id="3c8a3-116">For example, to determine which **SQL:BatchCompleted** events had excessive wait time, execute the following:</span></span>  
  
```  
SELECT  TextData, Duration, CPU  
FROM    trace_table_name  
WHERE   EventClass = 12 -- SQL:BatchCompleted events  
AND     CPU < (Duration * 1000)  
```  
  
> [!NOTE]  
>  <span data-ttu-id="3c8a3-117">Il server indica la durata di un evento in microsecondi (un milionesimo o 10<sup>-6</sup>di secondo) e la quantità di tempo della CPU usato dall'evento in millisecondi (un millesimo o 10<sup>-3</sup>di secondo).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-117">The server reports the duration of an event in microseconds (one millionth, or 10<sup>-6</sup>, of a second) and the amount of CPU time used by the event in milliseconds (one thousandth, or 10<sup>-3</sup>, of a second).</span></span> <span data-ttu-id="3c8a3-118">Nell'interfaccia utente grafica di [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] il valore della colonna **Duration** viene visualizzato in millisecondi. Tuttavia, quando si salva una traccia in un file o in una tabella di database, il valore della colonna **Duration** viene scritto in microsecondi.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-118">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] graphical user interface displays the **Duration** column in milliseconds by default, but when a trace is saved to either a file or a database table, the **Duration** column value is written in microseconds.</span></span>  
  
## <a name="displaying-object-names-when-viewing-traces"></a><span data-ttu-id="3c8a3-119">Visualizzazione dei nomi degli oggetti durante la visualizzazione delle tracce</span><span class="sxs-lookup"><span data-stu-id="3c8a3-119">Displaying Object Names When Viewing Traces</span></span>  
 <span data-ttu-id="3c8a3-120">Per visualizzare il nome di un oggetto invece dell'identificatore dell'oggetto, ovvero**Object ID**, è necessario acquisire le colonne di dati **Server Name** e **Database ID** insieme alla colonna di dati **Object Name** .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-120">If you wish to display the name of an object rather than the object identifier (**Object ID**), you must capture the **Server Name** and **Database ID** data columns along with the **Object Name** data column.</span></span>  
  
 <span data-ttu-id="3c8a3-121">Se si sceglie di basare il raggruppamento sulla colonna di dati **Object ID** assicurarsi di eseguire innanzitutto il raggruppamento in base alle colonne di dati **Server Name** e **Database ID** e quindi in base alla colonna di dati **Object ID** .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-121">If you choose to group by the **Object ID** data column, make sure you group by the **Server Name** and **Database ID** data columns first, and then by the **Object ID** data column.</span></span> <span data-ttu-id="3c8a3-122">. Analogamente, se si sceglie di basare il raggruppamento sulla colonna di dati **Index ID** , assicurarsi di eseguire innanzitutto il raggruppamento in base alle colonne di dati **Server Name**, **Database ID**e **Object ID** e quindi in base alle colonne di dati **Index ID** .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-122">Similarly, if you choose to group by the **Index ID** data column, make sure you group by the **Server Name**, **Database ID**, and **Object ID** data columns first, and then by the **Index ID** data columns.</span></span> <span data-ttu-id="3c8a3-123">È necessario attenersi a tale ordine durante il raggruppamento, poiché gli ID di oggetto e di indice non sono univoci nei server e nei database e negli oggetti relativi agli ID degli indici.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-123">You must group in this order because object and index IDs are not unique among servers and databases (and among objects for index IDs).</span></span>  
  
## <a name="finding-specific-events-within-a-trace"></a><span data-ttu-id="3c8a3-124">Individuazione di eventi specifici in una traccia</span><span class="sxs-lookup"><span data-stu-id="3c8a3-124">Finding Specific Events Within a Trace</span></span>  
 <span data-ttu-id="3c8a3-125">Per individuare e raggruppare gli eventi in una traccia, eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="3c8a3-125">To find and group events in a trace, follow these steps:</span></span>  
  
1.  <span data-ttu-id="3c8a3-126">Creare la traccia.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-126">Create your trace.</span></span>  
  
    -   <span data-ttu-id="3c8a3-127">Nella definizione della traccia includere le colonne di dati **Event Class**, **ClientProcessID**e **Start Time** oltre alle altre colonne di dati che si desidera acquisire.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-127">When defining the trace, capture the **Event Class**, **ClientProcessID**, and **Start Time** data columns in addition to any other data columns you want to capture.</span></span> <span data-ttu-id="3c8a3-128">Per altre informazioni, vedere [Creare una traccia &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-128">For more information, see [Create a Trace &#40;SQL Server Profiler&#41;](create-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="3c8a3-129">Raggruppare i dati acquisiti in base alla colonna di dati **Event Class**e salvare la traccia in un file o in una tabella.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-129">Group the captured data by the **Event Class**data column, and capture the trace to a file or table.</span></span> <span data-ttu-id="3c8a3-130">Per raggruppare i dati acquisiti, fare clic su **Organizza colonne** nella scheda **Selezione eventi** della finestra di dialogo Proprietà traccia.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-130">To group the captured data, click **Organize Columns** on the **Events Selection** tab of the Trace Properties dialog box.</span></span> <span data-ttu-id="3c8a3-131">Per altre informazioni, vedere [Organizzare le colonne visualizzate in una traccia &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-131">For more information, see [Organize Columns Displayed in a Trace &#40;SQL Server Profiler&#41;](organize-columns-displayed-in-a-trace-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="3c8a3-132">Avviare la traccia e quindi arrestarla quando è trascorso l'intervallo di tempo appropriato o dopo l'acquisizione di un determinato numero di eventi.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-132">Start the trace and stop it after the appropriate time has passed or number of events have been captured.</span></span>  
  
2.  <span data-ttu-id="3c8a3-133">Determinare quali eventi si desidera individuare.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-133">Find the target events.</span></span>  
  
    -   <span data-ttu-id="3c8a3-134">Aprire il file o la tabella di traccia ed espandere il nodo della classe di evento desiderata, ad esempio **Deadlock Chain**.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-134">Open the trace file or table, and expand the node of the desired event class; for example, **Deadlock Chain**.</span></span> <span data-ttu-id="3c8a3-135">Per altre informazioni, vedere [Aprire un file di traccia &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) o Ottimizzazione guidata [Aprire una tabella di traccia &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="3c8a3-135">For more information, see [Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) or [Open a Trace Table &#40;SQL Server Profiler&#41;](open-a-trace-table-sql-server-profiler.md).</span></span>  
  
    -   <span data-ttu-id="3c8a3-136">Eseguire una ricerca nei dati della traccia fino a individuare gli eventi desiderati. Per semplificare la ricerca dei valori desiderati nella traccia, scegliere **Trova** dal menu **Modifica** di [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-136">Search through the trace data until you find the events for which you are looking (use the **Find** command on the **Edit** menu of [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] to help you find values in the trace).</span></span> <span data-ttu-id="3c8a3-137">Prendere nota dei valori delle colonne di dati **ClientProcessID** e **Start Time** degli eventi tracciati.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-137">Note the values in the **ClientProcessID** and **Start Time** data columns of the events you trace.</span></span>  
  
3.  <span data-ttu-id="3c8a3-138">Visualizzare gli eventi nel contesto.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-138">Display the events in context.</span></span>  
  
    -   <span data-ttu-id="3c8a3-139">Visualizzare le proprietà della traccia ed eseguire il raggruppamento in base alla colonna di dati **ClientProcessID**anziché alla colonna di dati **Event Class** .</span><span class="sxs-lookup"><span data-stu-id="3c8a3-139">Display the trace properties, and group by the **ClientProcessID**data column rather than by the **Event Class** data column.</span></span>  
  
    -   <span data-ttu-id="3c8a3-140">Espandere il nodo di ogni ID di processo client che si desidera visualizzare.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-140">Expand the nodes of each client process ID you want to view.</span></span> <span data-ttu-id="3c8a3-141">Eseguire una ricerca manuale nella traccia oppure usare il comando **Trova** per individuare i valori **Start Time**degli eventi desiderati, annotati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-141">Search through the trace manually, or use **Find** until you find the previously noted **Start Time**values of the target events.</span></span> <span data-ttu-id="3c8a3-142">Gli eventi vengono visualizzati in ordine cronologico con gli altri eventi che appartengono a ogni ID processo client selezionato.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-142">The events are displayed in chronological order with the other events that belong to each selected client process ID.</span></span> <span data-ttu-id="3c8a3-143">Ad esempio, gli eventi **Deadlock** e **Deadlock Chain**, acquisiti all'interno della traccia, vengono visualizzati immediatamente dopo gli eventi **SQL:BatchStarting**all'interno dell'ID processo client espanso.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-143">For example, the **Deadlock** and **Deadlock Chain**events, captured within the trace, appear immediately after the **SQL:BatchStarting**events within the expanded client process ID.</span></span>  
  
 <span data-ttu-id="3c8a3-144">È possibile utilizzare la stessa tecnica per individuare eventuali eventi raggruppati.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-144">The same technique can be used to find any grouped events.</span></span> <span data-ttu-id="3c8a3-145">Dopo avere trovato gli eventi desiderati, raggrupparli in base a **ClientProcessID**, **ApplicationName**o a un'altra classe di evento, per visualizzare le attività correlate in ordine cronologico.</span><span class="sxs-lookup"><span data-stu-id="3c8a3-145">Once you have found the events you seek, group them by **ClientProcessID**, **ApplicationName**, or another event class to view related activity in chronological order.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3c8a3-146">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3c8a3-146">See Also</span></span>  
 <span data-ttu-id="3c8a3-147">[Visualizzare una traccia salvata &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="3c8a3-147">[View a Saved Trace &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-a-saved-trace-transact-sql.md) </span></span>  
 <span data-ttu-id="3c8a3-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3c8a3-148">[sys.fn_trace_getinfo &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/sys-fn-trace-getinfo-transact-sql) </span></span>  
 <span data-ttu-id="3c8a3-149">[Visualizzare informazioni sui filtri &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="3c8a3-149">[View Filter Information &#40;SQL Server Profiler&#41;](view-filter-information-sql-server-profiler.md) </span></span>  
 <span data-ttu-id="3c8a3-150">[Visualizzare informazioni sui filtri &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="3c8a3-150">[View Filter Information &#40;Transact-SQL&#41;](../../relational-databases/sql-trace/view-filter-information-transact-sql.md) </span></span>  
 <span data-ttu-id="3c8a3-151">[Aprire un file di traccia &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="3c8a3-151">[Open a Trace File &#40;SQL Server Profiler&#41;](open-a-trace-file-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="3c8a3-152">Aprire una tabella di traccia &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="3c8a3-152">Open a Trace Table &#40;SQL Server Profiler&#41;</span></span>](open-a-trace-table-sql-server-profiler.md)  
  
  
