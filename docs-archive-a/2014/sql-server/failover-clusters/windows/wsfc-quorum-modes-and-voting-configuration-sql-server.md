---
title: Modalità quorum WSFC e configurazione del voto (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], WSFC clusters
- quorum [SQL Server], AlwaysOn and WSFC quorum
- failover clustering [SQL Server], AlwaysOn Availability Groups
ms.assetid: ca0d59ef-25f0-4047-9130-e2282d058283
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6b1d5ad992c59f252f485f2d65451a72f150bef8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87628256"
---
# <a name="wsfc-quorum-modes-and-voting-configuration-sql-server"></a><span data-ttu-id="7b79a-102">Modalità quorum WSFC e configurazione del voto (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7b79a-102">WSFC Quorum Modes and Voting Configuration (SQL Server)</span></span>
  <span data-ttu-id="7b79a-103">Sia i [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] sia le istanze del cluster di failover AlwaysOn utilizzano Windows Server Failover Clustering (WSFC) come tecnologia della piattaforma.</span><span class="sxs-lookup"><span data-stu-id="7b79a-103">Both [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)][!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and AlwaysOn Failover Cluster Instances (FCI) take advantage of Windows Server Failover Clustering (WSFC) as a platform technology.</span></span>  <span data-ttu-id="7b79a-104">WSFC utilizza un approccio basato sul quorum per monitorare l'integrità complessiva del cluster e aumentare al massimo la tolleranza di errore a livello di nodo.</span><span class="sxs-lookup"><span data-stu-id="7b79a-104">WSFC uses a quorum-based approach to monitoring overall cluster health and maximize node-level fault tolerance.</span></span> <span data-ttu-id="7b79a-105">Una comprensione di base delle modalità quorum WSFC e della configurazione di voto dei nodi è molto importante per progettare ed eseguire la soluzione di ripristino di emergenza e a disponibilità elevata AlwaysOn, nonché per risolverne i problemi.</span><span class="sxs-lookup"><span data-stu-id="7b79a-105">A fundamental understanding of WSFC quorum modes and node voting configuration is very important to designing, operating, and troubleshooting your AlwaysOn high availability and disaster recovery solution.</span></span>  
  
 <span data-ttu-id="7b79a-106">**Contenuto dell'argomento:**</span><span class="sxs-lookup"><span data-stu-id="7b79a-106">**In this topic:**</span></span>  
  
-   [<span data-ttu-id="7b79a-107">Rilevamento dell'integrità del cluster per quorum</span><span class="sxs-lookup"><span data-stu-id="7b79a-107">Cluster Health Detection by Quorum</span></span>](#ClusterHealthDetectionbyQuorum)  
  
-   [<span data-ttu-id="7b79a-108">Modalità quorum</span><span class="sxs-lookup"><span data-stu-id="7b79a-108">Quorum Modes</span></span>](#QuorumModes)  
  
-   [<span data-ttu-id="7b79a-109">Nodi votanti e non votanti</span><span class="sxs-lookup"><span data-stu-id="7b79a-109">Voting and Non-Voting Nodes</span></span>](#VotingandNonVotingNodes)  
  
-   [<span data-ttu-id="7b79a-110">Rettifiche consigliate per il voto del quorum</span><span class="sxs-lookup"><span data-stu-id="7b79a-110">Recommended Adjustments to Quorum Voting</span></span>](#RecommendedAdjustmentstoQuorumVoting)  
  
-   [<span data-ttu-id="7b79a-111">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="7b79a-111">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="7b79a-112">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="7b79a-112">Related Content</span></span>](#RelatedContent)  
  
##  <a name="cluster-health-detection-by-quorum"></a><a name="ClusterHealthDetectionbyQuorum"></a> <span data-ttu-id="7b79a-113">Rilevamento dell'integrità del cluster in base al quorum</span><span class="sxs-lookup"><span data-stu-id="7b79a-113">Cluster Health Detection by Quorum</span></span>  
 <span data-ttu-id="7b79a-114">Ogni nodo in un cluster WSFC partecipa alla comunicazione heartbeat periodica per condividere il proprio stato di integrità con gli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="7b79a-114">Each node in a WSFC cluster participates in periodic heartbeat communication to share the node's health status with the other nodes.</span></span> <span data-ttu-id="7b79a-115">I nodi che non rispondono sono considerati in stato di errore.</span><span class="sxs-lookup"><span data-stu-id="7b79a-115">Unresponsive nodes are considered to be in a failed state.</span></span>  
  
 <span data-ttu-id="7b79a-116">Un set di nodi *quorum* rappresenta una maggioranza dei nodi votanti e degli elementi di controllo nel cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="7b79a-116">A *quorum* node set is a majority of the voting nodes and witnesses in the WSFC cluster.</span></span> <span data-ttu-id="7b79a-117">L'integrità e lo stato complessivi di un cluster WSFC sono determinati da un *voto quorum*periodico.</span><span class="sxs-lookup"><span data-stu-id="7b79a-117">The overall health and status of a WSFC cluster is determined by a periodic *quorum vote*.</span></span>  <span data-ttu-id="7b79a-118">La presenza di un quorum indica che il cluster è integro e in grado di fornire tolleranza di errore a livello di nodo.</span><span class="sxs-lookup"><span data-stu-id="7b79a-118">The presence of a quorum means that the cluster is healthy and able to provide node-level fault tolerance.</span></span>  
  
 <span data-ttu-id="7b79a-119">L'assenza di un quorum indica che il cluster non è integro.</span><span class="sxs-lookup"><span data-stu-id="7b79a-119">The absence of a quorum indicates that the cluster is not healthy.</span></span>  <span data-ttu-id="7b79a-120">È necessario gestire l'integrità complessiva del cluster WSFC per garantire che siano disponibili nodi secondari integri in cui eseguire il failover dei nodi primari.</span><span class="sxs-lookup"><span data-stu-id="7b79a-120">Overall WSFC cluster health must be maintained in order to ensure that healthy secondary nodes are available for primary nodes to fail over to.</span></span>  <span data-ttu-id="7b79a-121">Se il voto quorum non riesce, il cluster WSFC verrà impostato offline come misura precauzionale.</span><span class="sxs-lookup"><span data-stu-id="7b79a-121">If the quorum vote fails, the WSFC cluster will be set offline as a precautionary measure.</span></span>  <span data-ttu-id="7b79a-122">Ciò provocherà inoltre l'arresto di tutte le istanze di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] registrate con il cluster.</span><span class="sxs-lookup"><span data-stu-id="7b79a-122">This will also cause all [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances registered with the cluster to be stopped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7b79a-123">Se un cluster WSFC viene impostato offline a causa di un errore del quorum, è necessario l'intervento manuale per reimpostare online il cluster.</span><span class="sxs-lookup"><span data-stu-id="7b79a-123">If a WSFC cluster is set offline because of quorum failure, manual intervention is required to bring it back online.</span></span>  
>   
>  <span data-ttu-id="7b79a-124">Per ulteriori informazioni, vedere la pagina relativa al [ripristino di emergenza WSFC tramite quorum forzato &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7b79a-124">For more information, see: [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md).</span></span>  
  
##  <a name="quorum-modes"></a><a name="QuorumModes"></a><span data-ttu-id="7b79a-125">Modalità quorum</span><span class="sxs-lookup"><span data-stu-id="7b79a-125">Quorum Modes</span></span>  
 <span data-ttu-id="7b79a-126">Viene impostata una *modalità quorum* al livello del cluster WSFC che specifica la metodologia utilizzata per i voti quorum.</span><span class="sxs-lookup"><span data-stu-id="7b79a-126">A *quorum mode* is configured at the WSFC cluster level that dictates the methodology used for quorum voting.</span></span>  <span data-ttu-id="7b79a-127">L'utilità Gestione cluster di failover specifica una modalità quorum consigliata basata sul numero di nodi nel cluster.</span><span class="sxs-lookup"><span data-stu-id="7b79a-127">The Failover Cluster Manager utility will recommend a quorum mode based on the number of nodes in the cluster.</span></span>  
  
 <span data-ttu-id="7b79a-128">È possibile utilizzare le modalità quorum seguenti per determinare gli elementi che costituiscono un quorum di voti:</span><span class="sxs-lookup"><span data-stu-id="7b79a-128">The following quorum modes can be used to determine what constitutes a quorum of votes:</span></span>  
  
-   <span data-ttu-id="7b79a-129">**Maggioranza dei nodi.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-129">**Node Majority.**</span></span> <span data-ttu-id="7b79a-130">Oltre la metà dei nodi votanti nel cluster deve votare affermativamente perché il cluster sia integro.</span><span class="sxs-lookup"><span data-stu-id="7b79a-130">More than one-half of the voting nodes in the cluster must vote affirmatively for the cluster to be healthy.</span></span>  
  
-   <span data-ttu-id="7b79a-131">**Maggioranza dei nodi e delle condivisioni file.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-131">**Node and File Share Majority.**</span></span> <span data-ttu-id="7b79a-132">Simile alla modalità quorum Maggioranza dei nodi, ad eccezione del fatto che viene configurata anche una condivisione file remota come elemento di controllo del voto e la connettività da qualsiasi nodo a tale condivisione viene anch'essa conteggiata come voto affermativo.</span><span class="sxs-lookup"><span data-stu-id="7b79a-132">Similar to Node Majority quorum mode, except that a remote file share is also configured as a voting witness, and connectivity from any node to that share is also counted as an affirmative vote.</span></span>  <span data-ttu-id="7b79a-133">Oltre la metà dei possibili voti deve essere affermativa perché il cluster sia integro.</span><span class="sxs-lookup"><span data-stu-id="7b79a-133">More than one-half of the possible votes must be affirmative for the cluster to be healthy.</span></span>  
  
     <span data-ttu-id="7b79a-134">Come procedura consigliata, la condivisione file di controllo non deve trovarsi in alcun nodo nel cluster e deve essere visibile a tutti i nodi nel cluster.</span><span class="sxs-lookup"><span data-stu-id="7b79a-134">As a best practice, the witness file share should not reside on any node in the cluster, and it should be visible to all nodes in the cluster.</span></span>  
  
-   <span data-ttu-id="7b79a-135">**Maggioranza dei nodi e dei dischi.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-135">**Node and Disk Majority.**</span></span> <span data-ttu-id="7b79a-136">Simile alla modalità quorum Maggioranza dei nodi, ad eccezione del fatto che viene designata come elemento di controllo di voto anche una risorsa cluster di tipo disco condiviso e la connettività da qualsiasi nodo a tale disco condiviso viene conteggiata anch'essa come voto affermativo.</span><span class="sxs-lookup"><span data-stu-id="7b79a-136">Similar to Node Majority quorum mode, except that a shared disk cluster resource is also designated as a voting witness, and connectivity from any node to that shared disk is also counted as an affirmative vote.</span></span>  <span data-ttu-id="7b79a-137">Oltre la metà dei possibili voti deve essere affermativa perché il cluster sia integro.</span><span class="sxs-lookup"><span data-stu-id="7b79a-137">More than one-half of the possible votes must be affirmative for the cluster to be healthy.</span></span>  
  
-   <span data-ttu-id="7b79a-138">**Solo disco.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-138">**Disk Only.**</span></span> <span data-ttu-id="7b79a-139">Viene designata come elemento di controllo anche una risorsa cluster di tipo disco condiviso e la connettività da qualsiasi nodo a tale disco condiviso viene conteggiata anch'essa come voto affermativo.</span><span class="sxs-lookup"><span data-stu-id="7b79a-139">A shared disk cluster resource is designated as a witness, and connectivity by any node to that shared disk is counted as an affirmative vote.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="7b79a-140">Quando si utilizza una configurazione di archiviazione asimmetrica per [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], è in genere consigliabile utilizzare la modalità quorum Maggioranza dei nodi se è presente un numero dispari di nodi votanti oppure la modalità Maggioranza dei nodi e delle condivisioni file quando è presente un numero pari di nodi votanti.</span><span class="sxs-lookup"><span data-stu-id="7b79a-140">When using an asymmetric storage configuration for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], you should generally use the Node Majority quorum mode when you have an odd number of voting nodes, or the Node and File Share Majority quorum mode when you have an even number of voting nodes.</span></span>  
  
##  <a name="voting-and-non-voting-nodes"></a><a name="VotingandNonVotingNodes"></a> <span data-ttu-id="7b79a-141">Nodi votanti e non votanti</span><span class="sxs-lookup"><span data-stu-id="7b79a-141">Voting and Non-Voting Nodes</span></span>  
 <span data-ttu-id="7b79a-142">Per impostazione predefinita, ogni nodo nel cluster WSFC è incluso come un membro del quorum del cluster. Ogni nodo dispone di un singolo voto per determinare l'integrità complessiva del cluster e ogni nodo tenterà continuamente di stabilire un quorum.</span><span class="sxs-lookup"><span data-stu-id="7b79a-142">By default, each node in the WSFC cluster is included as a member of the cluster quorum; each node has a single vote in determining the overall cluster health, and each node will continuously attempt to establish a quorum.</span></span>  <span data-ttu-id="7b79a-143">La discussione del quorum a questo punto ha qualificato attentamente il set di nodi del cluster WSFC che votano sull'integrità del cluster come *nodi votanti*.</span><span class="sxs-lookup"><span data-stu-id="7b79a-143">The quorum discussion to this point has carefully qualified the set of WSFC cluster nodes that vote on cluster health as *voting nodes*.</span></span>  
  
 <span data-ttu-id="7b79a-144">Nessun singolo nodo in un cluster WSFC può determinare in modo definitivo che il cluster è integro o non integro complessivamente.</span><span class="sxs-lookup"><span data-stu-id="7b79a-144">No individual node in a WSFC cluster can definitively determine that the cluster as a whole is healthy or unhealthy.</span></span>  <span data-ttu-id="7b79a-145">In qualsiasi momento specificato, dal punto di vista di ciascun nodo, alcuni degli altri nodi possono apparire come offline, con un failover in corso oppure possono non rispondere a causa di un errore di comunicazione di rete.</span><span class="sxs-lookup"><span data-stu-id="7b79a-145">At any given moment, from the perspective of each node, some of the other nodes may appear to be offline, or appear to be in the process of failover, or appear unresponsive due to a network communication failure.</span></span>  <span data-ttu-id="7b79a-146">Una funzione principale del voto quorum consiste nel determinare se lo stato apparente di ogni nodo nel cluster WSFC è davvero l'effettivo stato di tali nodi.</span><span class="sxs-lookup"><span data-stu-id="7b79a-146">A key function of the quorum vote is to determine whether the apparent state of each of node in the WSFC cluster is indeed that actual state of those nodes.</span></span>  
  
 <span data-ttu-id="7b79a-147">Per tutti i modelli di quorum ad eccezione di "Solo disco", l'efficacia di un voto quorum dipende da comunicazioni affidabili tra tutti i nodi votanti nel cluster.</span><span class="sxs-lookup"><span data-stu-id="7b79a-147">For all of the quorum models except 'Disk Only', the effectiveness of a quorum vote depends on reliable communications between all of the voting nodes in the cluster.</span></span> <span data-ttu-id="7b79a-148">Le comunicazioni di rete tra nodi nella stessa subnet fisica devono essere considerate affidabili e il voto quorum deve essere considerato attendibile.</span><span class="sxs-lookup"><span data-stu-id="7b79a-148">Network communications between nodes on the same physical subnet should be considered reliable; the quorum vote should be trusted.</span></span>  
  
 <span data-ttu-id="7b79a-149">Se, tuttavia, viene rilevato che un nodo in un'altra subnet non risponde in un voto quorum, ma è in realtà online e altrimenti integro, la causa è molto probabilmente un errore di comunicazioni di rete tra subnet.</span><span class="sxs-lookup"><span data-stu-id="7b79a-149">However, if a node on another subnet is seen as non-responsive in a quorum vote, but it is actually online and otherwise healthy, that is most likely due to a network communications failure between subnets.</span></span>  <span data-ttu-id="7b79a-150">Poiché dipende dalla topologia del cluster, dalla modalità quorum e dalla configurazione dei criteri di failover, l'errore di comunicazione di rete può effettivamente comportare la creazione di più di un set (o subset) di nodi votanti.</span><span class="sxs-lookup"><span data-stu-id="7b79a-150">Depending upon the cluster topology, quorum mode, and failover policy configuration, that network communications failure may effectively create more than one set (or subset) of voting nodes.</span></span>  
  
 <span data-ttu-id="7b79a-151">Quando più di un subset di nodi votanti è in grado di stabilire singolarmente un quorum, si verifica uno *scenario split brain*.</span><span class="sxs-lookup"><span data-stu-id="7b79a-151">When more than one subset of voting nodes is able to establish a quorum on its own, that is known as a *split-brain scenario*.</span></span>  <span data-ttu-id="7b79a-152">In tale scenario i nodi nei quorum separati possono comportarsi in modo diverso ed essere in conflitto gli uni con gli altri.</span><span class="sxs-lookup"><span data-stu-id="7b79a-152">In such a scenario, the nodes in the separate quorums may behave differently, and in conflict with one another.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7b79a-153">Lo scenario split brain è possibile solo quando un amministratore di sistema esegue manualmente un'operazione di quorum forzata o, in casi molto rari, un failover forzato, suddividendo in modo esplicito il set di nodi quorum.</span><span class="sxs-lookup"><span data-stu-id="7b79a-153">The split-brain scenario is only possible when a system administrator manually performs a forced quorum operation, or in very rare circumstances, a forced failover; explicitly subdividing the quorum node set.</span></span>  
  
 <span data-ttu-id="7b79a-154">Per semplificare la configurazione del quorum e aumentare i tempi di esecuzione, è possibile modificare l'impostazione *NodeWeight* di ogni nodo in modo che il voto del nodo non venga conteggiato per il quorum.</span><span class="sxs-lookup"><span data-stu-id="7b79a-154">In order to simplify your quorum configuration and increase up-time, you may want to adjust each node's *NodeWeight* setting so that the node's vote is not counted towards the quorum.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7b79a-155">Per utilizzare le impostazioni NodeWeight, è necessario applicare l'aggiornamento rapido seguente a tutti i server del cluster WSFC:</span><span class="sxs-lookup"><span data-stu-id="7b79a-155">In order to use NodeWeight settings, the following hotfix must be applied to all servers in the WSFC cluster:</span></span>  
>   
>  <span data-ttu-id="7b79a-156">[KB2494036](https://support.microsoft.com/kb/2494036): è disponibile un hotfix che consente di configurare un nodo del cluster che non dispone di voti quorum in [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] e in[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]</span><span class="sxs-lookup"><span data-stu-id="7b79a-156">[KB2494036](https://support.microsoft.com/kb/2494036): A hotfix is available to let you configure a cluster node that does not have quorum votes in [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and in [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]</span></span>  
  
##  <a name="recommended-adjustments-to-quorum-voting"></a><a name="RecommendedAdjustmentstoQuorumVoting"></a> <span data-ttu-id="7b79a-157">Modifiche ai voti quorum consigliate</span><span class="sxs-lookup"><span data-stu-id="7b79a-157">Recommended Adjustments to Quorum Voting</span></span>  
 <span data-ttu-id="7b79a-158">Per abilitare o disabilitare il voto di un nodo WSFC specifico, attenersi alle linee guida seguenti:</span><span class="sxs-lookup"><span data-stu-id="7b79a-158">When enabling or disabling a given WSFC node's vote, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="7b79a-159">**Nessun voto per impostazione predefinita.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-159">**No vote by default.**</span></span> <span data-ttu-id="7b79a-160">Supporre che ogni nodo sia escluso dal voto in assenza di una giustificazione esplicita.</span><span class="sxs-lookup"><span data-stu-id="7b79a-160">Assume that each node should not vote without explicit justification.</span></span>  
  
-   <span data-ttu-id="7b79a-161">**Includere tutti le repliche primarie.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-161">**Include all primary replicas.**</span></span> <span data-ttu-id="7b79a-162">Ogni nodo WSFC che ospita una replica primaria del gruppo disponibilità o rappresenta il proprietario preferito di un'istanza del cluster di failover deve disporre di un voto.</span><span class="sxs-lookup"><span data-stu-id="7b79a-162">Each WSFC node that hosts an availability group primary replica or is the preferred owner of an FCI should have a vote.</span></span>  
  
-   <span data-ttu-id="7b79a-163">**Includere i possibili proprietari del failover automatico.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-163">**Include possible automatic failover owners.**</span></span> <span data-ttu-id="7b79a-164">Ogni nodo che può ospitare una replica primaria in seguito a un failover automatico del gruppo di disponibilità o al failover dell'istanza del cluster di failover deve disporre di un voto.</span><span class="sxs-lookup"><span data-stu-id="7b79a-164">Each node that could host a primary replica, as the result of an automatic availability group failover or FCI failover, should have a vote.</span></span> <span data-ttu-id="7b79a-165">Se è presente un solo gruppo di disponibilità nel cluster WSFC e le repliche di disponibilità sono ospitate solo da istanze autonome, questa regola include solo la replica secondaria che rappresenta la destinazione del failover automatico.</span><span class="sxs-lookup"><span data-stu-id="7b79a-165">If there is only one availability group in the WSFC cluster and availability replicas are hosted only by standalone instances, this rule includes only the secondary replica that is the automatic failover target.</span></span>  
  
-   <span data-ttu-id="7b79a-166">**Escludere nodi del sito secondari.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-166">**Exclude secondary site nodes.**</span></span> <span data-ttu-id="7b79a-167">In generale, non assegnare voti a nodi WSFC che si trovano in un sito di ripristino di emergenza secondario.</span><span class="sxs-lookup"><span data-stu-id="7b79a-167">In general, do not give votes to WSFC nodes that reside at a secondary disaster recovery site.</span></span>  <span data-ttu-id="7b79a-168">Non è consigliabile fare in modo che i nodi nel sito secondario contribuiscano a una decisione che comporti l'impostazione offline del cluster quando non vi sono problemi con il sito primario.</span><span class="sxs-lookup"><span data-stu-id="7b79a-168">You do not want nodes in the secondary site to contribute to a decision to take the cluster offline when there is nothing wrong with the primary site.</span></span>  
  
-   <span data-ttu-id="7b79a-169">**Numero dispari di voti.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-169">**Odd number of votes.**</span></span> <span data-ttu-id="7b79a-170">Se necessario, aggiungere una condivisione file di controllo, un nodo di controllo o un disco di controllo al cluster e modificare la modalità quorum per impedire possibili valori equivalenti nel voto quorum.</span><span class="sxs-lookup"><span data-stu-id="7b79a-170">If necessary, add a witness file share, a witness node, or a witness disk to the cluster and adjust the quorum mode to prevent possible ties in the quorum vote.</span></span>  
  
-   <span data-ttu-id="7b79a-171">**Valutare nuovamente le assegnazioni dei voti dopo il failover.**</span><span class="sxs-lookup"><span data-stu-id="7b79a-171">**Re-assess vote assignments post-failover.**</span></span> <span data-ttu-id="7b79a-172">Non è consigliabile eseguire il failover in una configurazione del cluster che non supporta un quorum integro.</span><span class="sxs-lookup"><span data-stu-id="7b79a-172">You do not want to fail over into a cluster configuration that does not support a healthy quorum.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="7b79a-173">Quando si convalida la configurazione dei voti quorum di WSFC, nella Creazione guidata Gruppo di disponibilità AlwaysOn viene visualizzato un avviso se una o più delle condizioni seguenti è vera:</span><span class="sxs-lookup"><span data-stu-id="7b79a-173">When validating WSFC quorum vote configuration, the AlwaysOn Availability Group Wizard shows a warning if any of the following conditions are true:</span></span>  
> 
>  -   <span data-ttu-id="7b79a-174">Il nodo del cluster che ospita la replica primaria non dispone di un voto.</span><span class="sxs-lookup"><span data-stu-id="7b79a-174">The cluster node that hosts the primary replica does not have a vote</span></span>  
> -   <span data-ttu-id="7b79a-175">Una replica secondaria è configurata per il failover automatico e il relativo nodo del cluster non dispone di un voto.</span><span class="sxs-lookup"><span data-stu-id="7b79a-175">A secondary replica is configured for automatic failover and its cluster node does not have a vote.</span></span>  
> -   <span data-ttu-id="7b79a-176">[KB2494036](https://support.microsoft.com/kb/2494036) non è installato in tutti i nodi del cluster che ospitano repliche di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="7b79a-176">[KB2494036](https://support.microsoft.com/kb/2494036) is not installed on all cluster nodes that host availability replicas.</span></span> <span data-ttu-id="7b79a-177">Questa patch è necessaria per aggiungere o rimuovere voti per i nodi del cluster in distribuzioni multisito.</span><span class="sxs-lookup"><span data-stu-id="7b79a-177">This patch is required to add or remove votes for cluster nodes in multi-site deployments.</span></span> <span data-ttu-id="7b79a-178">Tuttavia, in distribuzioni a singolo sito, non è in genere necessaria e l'avviso può essere ignorato senza rischi.</span><span class="sxs-lookup"><span data-stu-id="7b79a-178">However, in single-site deployments, it is usually not required and you may safely ignore the warning.</span></span>  
> 
> [!TIP]
>  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="7b79a-179">espone diverse DMW (viste a gestione dinamica) di sistema che semplificano la gestione delle impostazioni correlate alla configurazione del cluster WSFC e dei voti quorum dei nodi.</span><span class="sxs-lookup"><span data-stu-id="7b79a-179">exposes several system dynamic management views (DMVs) that can help you manage settings related WSFC cluster configuration and node quorum voting.</span></span>  
> 
>  <span data-ttu-id="7b79a-180">Per altre informazioni, vedere  [sys.dm_hadr_cluster](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-transact-sql), [sys.dm_hadr_cluster_members](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-members-transact-sql), [sys.dm_os_cluster_nodes](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-nodes-transact-sql), [sys.dm_hadr_cluster_networks](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-networks-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="7b79a-180">For more information, see:  [sys.dm_hadr_cluster](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-transact-sql), [sys.dm_hadr_cluster_members](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-members-transact-sql), [sys.dm_os_cluster_nodes](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-nodes-transact-sql), [sys.dm_hadr_cluster_networks](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-networks-transact-sql)</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="7b79a-181">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="7b79a-181">Related Tasks</span></span>  
  
-   [<span data-ttu-id="7b79a-182">Visualizzare le impostazioni NodeWeight per il quorum del cluster</span><span class="sxs-lookup"><span data-stu-id="7b79a-182">View Cluster Quorum NodeWeight Settings</span></span>](view-cluster-quorum-nodeweight-settings.md)  
  
-   [<span data-ttu-id="7b79a-183">Configurare le impostazioni NodeWeight per il quorum del cluster</span><span class="sxs-lookup"><span data-stu-id="7b79a-183">Configure Cluster Quorum NodeWeight Settings</span></span>](configure-cluster-quorum-nodeweight-settings.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="7b79a-184">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="7b79a-184">Related Content</span></span>  
  
-   [<span data-ttu-id="7b79a-185">Pagina relativa alla guida alle soluzioni AlwaysOn di Microsoft SQL Server per la disponibilità elevata e il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="7b79a-185">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="7b79a-186">Controllo della configurazione di voto quorum nelle procedure guidate dei gruppi di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="7b79a-186">Quorum vote configuration check in AlwaysOn Availability Group Wizards</span></span>](https://blogs.msdn.com/b/sqlalwayson/archive/2012/03/13/quorum-vote-configuration-check-in-alwayson-availability-group-wizards-andy-jing.aspx)  
  
-   <span data-ttu-id="7b79a-187">[Tecnologie di Windows Server: cluster di failover](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="7b79a-187">[Windows Server Technologies:  Failover Clusters](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span></span>  
  
-   <span data-ttu-id="7b79a-188">[Guida dettagliata al cluster di failover: configurazione del quorum in un cluster di failover](https://technet.microsoft.com/library/cc770620\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="7b79a-188">[Failover Cluster Step-by-Step Guide: Configuring the Quorum in a Failover Cluster](https://technet.microsoft.com/library/cc770620\(WS.10\).aspx)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7b79a-189">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7b79a-189">See Also</span></span>  
 <span data-ttu-id="7b79a-190">[Ripristino di emergenza WSFC tramite quorum forzato &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7b79a-190">[WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) </span></span>  
 [<span data-ttu-id="7b79a-191">Windows Server Failover Clustering &#40;WSFC&#41; con SQL Server</span><span class="sxs-lookup"><span data-stu-id="7b79a-191">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](windows-server-failover-clustering-wsfc-with-sql-server.md)  
  
  
