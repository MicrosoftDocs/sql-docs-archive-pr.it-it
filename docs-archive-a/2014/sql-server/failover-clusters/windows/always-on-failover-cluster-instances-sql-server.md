---
title: Istanze del cluster di failover Always On (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- clustering [SQL Server]
- high availability [SQL Server], failover clustering
- virtual servers [SQL Server], about virtual servers
- clusters [SQL Server]
- servers [SQL Server], failover clustering
- resource groups [SQL Server]
- availability [SQL Server]
- failover clustering [SQL Server]
- AlwaysOn [SQL Server], see failover clustering [SQL Server]
ms.assetid: 86a15b33-4d03-4549-8ea2-b45e4f1baad7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6adc173560fd83d00616eb00c63651ef667c2a00
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87628281"
---
# <a name="always-on-failover-cluster-instances-sql-server"></a><span data-ttu-id="d3b99-102">Istanze del cluster di failover Always On (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="d3b99-102">Always On Failover Cluster Instances (SQL Server)</span></span>
  <span data-ttu-id="d3b99-103">Nell'ambito dell' [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] offerta always on, always on istanze del cluster di failover utilizzano la funzionalità WSFC (Windows Server Failover Clustering) per fornire la disponibilità elevata locale tramite la ridondanza a livello di istanza del server, ovvero un' *istanza del cluster* di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-103">As part of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Always On offering, Always On Failover Cluster Instances leverages Windows Server Failover Clustering (WSFC) functionality to provide local high availability through redundancy at the server-instance level-a *failover cluster instance* (FCI).</span></span> <span data-ttu-id="d3b99-104">Un'istanza del cluster di failover è una sola istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installata nei nodi del clustering di failover di Windows Server (WSFC) e, possibilmente, in più subnet.</span><span class="sxs-lookup"><span data-stu-id="d3b99-104">An FCI is a single instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is installed across Windows Server Failover Clustering (WSFC) nodes and, possibly, across multiple subnets.</span></span> <span data-ttu-id="d3b99-105">In rete, un'istanza del cluster di failover appare come un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in esecuzione in un singolo computer, le cui funzionalità forniscono il failover da un nodo WSFC a un altro, quando il nodo corrente non è più disponibile.</span><span class="sxs-lookup"><span data-stu-id="d3b99-105">On the network, an FCI appears to be an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] running on a single computer, but the FCI provides failover from one WSFC node to another if the current node becomes unavailable.</span></span>  
  
 <span data-ttu-id="d3b99-106">Un'istanza del cluster di failover può sfruttare i [gruppi di disponibilità AlwaysOn](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) per offrire ripristino di emergenza remoto a livello di database.</span><span class="sxs-lookup"><span data-stu-id="d3b99-106">An FCI can leverage [Always On Availability Groups](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md)to provide remote disaster recovery at the database level.</span></span> <span data-ttu-id="d3b99-107">Per altre informazioni, vedere [Clustering di failover e gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d3b99-107">For more information, see [Failover Clustering and Always On Availability Groups (;SQL Server);](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d3b99-108">A partire da [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], le istanze del cluster di failover Always On supportano i volumi condivisi cluster sia in [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] che in [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d3b99-108">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], Always On Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="d3b99-109">Per ulteriori informazioni sui volumi condivisi cluster, vedere [Informazioni sui volumi condivisi del cluster in un cluster di failover](https://technet.microsoft.com/library/dd759255.aspx).</span><span class="sxs-lookup"><span data-stu-id="d3b99-109">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
 <span data-ttu-id="d3b99-110">**Contenuto dell'argomento**</span><span class="sxs-lookup"><span data-stu-id="d3b99-110">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="d3b99-111">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="d3b99-111">Benefits</span></span>](#Benefits)  
  
-   [<span data-ttu-id="d3b99-112">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="d3b99-112">Recommendations</span></span>](#Recommendations)  
  
-   [<span data-ttu-id="d3b99-113">Panoramica dell'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-113">Failover Cluster Instance Overview</span></span>](#Overview)  
  
-   [<span data-ttu-id="d3b99-114">Elementi di un'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-114">Elements of a Failover Cluster Instance</span></span>](#FCIelements)  
  
-   [<span data-ttu-id="d3b99-115">Concetti e attività del failover di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d3b99-115">SQL Server Failover Concepts and Tasks</span></span>](#ConceptsAndTasks)  
  
-   [<span data-ttu-id="d3b99-116">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d3b99-116">Related Topics</span></span>](#RelatedTopics)  
  
##  <a name="benefits-of-a-failover-cluster-instance"></a><a name="Benefits"></a> <span data-ttu-id="d3b99-117">Vantaggi di un'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-117">Benefits of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="d3b99-118">Quando si verifica un errore dell'hardware o del software di un server, le applicazioni o i client che si connettono al server subiranno tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="d3b99-118">When there is hardware or software failure of a server, the applications or clients connecting to the server will experience downtime.</span></span> <span data-ttu-id="d3b99-119">Quando un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] è configurata per essere un'istanza del cluster di failover (anziché un'istanza autonoma), la disponibilità elevata di quell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] è protetta dalla presenza di nodi ridondanti nell'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-119">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is configured to be an FCI (instead of a standalone instance), the high availability of that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is protected by the presence of redundant nodes in the FCI.</span></span> <span data-ttu-id="d3b99-120">Solo un nodo per volta nell'istanza del cluster di failover possiede il gruppo di risorse WSFC.</span><span class="sxs-lookup"><span data-stu-id="d3b99-120">Only one of the nodes in the FCI owns the WSFC resource group at a time.</span></span> <span data-ttu-id="d3b99-121">Nel caso di errore (hardware, del sistema operativo, di applicazione o del servizio) o di aggiornamento pianificato, la proprietà del gruppo di risorse viene spostata a un altro nodo WSFC.</span><span class="sxs-lookup"><span data-stu-id="d3b99-121">In case of a failure (hardware failures, operating system failures, application or service failures), or a planned upgrade, the resource group ownership is moved to another WSFC node.</span></span> <span data-ttu-id="d3b99-122">Questo processo non è visibile al client o all'applicazione che si connette a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , riducendo di conseguenza i tempi d'inattività dell'applicazione o dei client durante un errore.</span><span class="sxs-lookup"><span data-stu-id="d3b99-122">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span> <span data-ttu-id="d3b99-123">Di seguito vengono elencati i vantaggi principali offerti dalle istanze del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="d3b99-123">The following lists some key benefits that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances provide:</span></span>  
  
-   <span data-ttu-id="d3b99-124">Protezione a livello di istanza tramite ridondanza</span><span class="sxs-lookup"><span data-stu-id="d3b99-124">Protection at the instance level through redundancy</span></span>  
  
-   <span data-ttu-id="d3b99-125">Failover automatico in caso di errore (errore hardware, del sistema operativo, dell'applicazione o del servizio)</span><span class="sxs-lookup"><span data-stu-id="d3b99-125">Automatic failover in the event of a failure (hardware failures, operating system failures, application or service failures)</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="d3b99-126">In un gruppo di disponibilità Always On, non è supportato il failover automatico da un'istanza del cluster di failover agli altri nodi all'interno del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="d3b99-126">In an Always On availability group, automatic failover from an FCI to other nodes within the availability group is not supported.</span></span> <span data-ttu-id="d3b99-127">Questo vuole dire che le istanze del cluster di failover e i nodi autonomi non devono essere accoppiati all'interno di un gruppo di disponibilità se il failover automatico è un importante componente della soluzione di disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="d3b99-127">This means that FCIs and standalone nodes should not be coupled together within an availability group if automatic failover is an important component your high availability solution.</span></span> <span data-ttu-id="d3b99-128">Tuttavia, è possibile creare questo accoppiamento per il *ripristino di emergenza* .</span><span class="sxs-lookup"><span data-stu-id="d3b99-128">However, this coupling can be made for your *disaster recovery* solution.</span></span>  
  
-   <span data-ttu-id="d3b99-129">Il supporto per una matrice estesa di soluzioni di archiviazione, tra cui i dischi WSFC (iSCSI, Fiber Channel e così via) e le condivisioni di file Server Message Block (SMB).</span><span class="sxs-lookup"><span data-stu-id="d3b99-129">Support for a broad array of storage solutions, including WSFC cluster disks (iSCSI, Fiber Channel, and so on) and server message block (SMB) file shares.</span></span>  
  
-   <span data-ttu-id="d3b99-130">Per la soluzione del ripristino di emergenza si usa un'istanza del cluster di failover su più subnet o l'esecuzione di un database ospitato dall'istanza del cluster di failover in un gruppo di disponibilità Always On.</span><span class="sxs-lookup"><span data-stu-id="d3b99-130">Disaster recovery solution using a multi-subnet FCI or running an FCI-hosted database inside an Always On availability group.</span></span> <span data-ttu-id="d3b99-131">Con il nuovo supporto di più subnet in [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], un'istanza del cluster di failover su più subnet non richiede più una LAN virtuale, aumentando la facilità di gestione e la sicurezza di un'istanza del cluster di failover su più subnet.</span><span class="sxs-lookup"><span data-stu-id="d3b99-131">With the new multi-subnet support in [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], a multi-subnet FCI no longer requires a virtual LAN, increasing the manageability and security of a multi-subnet FCI.</span></span>  
  
-   <span data-ttu-id="d3b99-132">Nessuna riconfigurazione di applicazioni e client durante i failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-132">Zero reconfiguration of applications and clients during failovers</span></span>  
  
-   <span data-ttu-id="d3b99-133">Criteri di failover flessibili per gli eventi del trigger granulari per failover automatici</span><span class="sxs-lookup"><span data-stu-id="d3b99-133">Flexible failover policy for granular trigger events for automatic failovers</span></span>  
  
-   <span data-ttu-id="d3b99-134">Failover affidabili tramite il rilevamento di integrità periodico e dettagliato utilizzando connessioni dedicate e persistenti</span><span class="sxs-lookup"><span data-stu-id="d3b99-134">Reliable failovers through periodic and detailed health detection using dedicated and persisted connections</span></span>  
  
-   <span data-ttu-id="d3b99-135">Configurabilità e prevedibilità della durata del failover tramite checkpoint di background indiretti</span><span class="sxs-lookup"><span data-stu-id="d3b99-135">Configurability and predictability in failover time through indirect background checkpoints</span></span>  
  
-   <span data-ttu-id="d3b99-136">Utilizzo rallentato delle risorse durante i failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-136">Throttled resource usage during failovers</span></span>  
  
##  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="d3b99-137">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="d3b99-137">Recommendations</span></span>  
 <span data-ttu-id="d3b99-138">In un ambiente di produzione è consigliabile usare indirizzi IP statici in combinazione con l'indirizzo IP virtuale di un'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-138">In a production environment, we recommend that you use static IP addresses in conjunction the virtual IP address of a Failover Cluster Instance.</span></span>  <span data-ttu-id="d3b99-139">È consigliabile evitare l'utilizzo di DHCP in un ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="d3b99-139">We recommend against using DHCP in a production environment.</span></span> <span data-ttu-id="d3b99-140">In caso di inattività, se il lease IP DHCP scade, per la registrazione del nuovo indirizzo IP DHCP associato al nome DNS viene richiesto tempo aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="d3b99-140">In the event of down time, if the DHCP IP lease expires, extra time is required to re-register the new DHCP IP address associated with the DNS name.</span></span>  
  
##  <a name="failover-cluster-instance-overview"></a><a name="Overview"></a><span data-ttu-id="d3b99-141">Panoramica dell'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-141">Failover Cluster Instance Overview</span></span>  
 <span data-ttu-id="d3b99-142">Un'istanza del cluster di failover viene eseguita in un gruppo di risorse WSFC con uno o più nodi WSFC.</span><span class="sxs-lookup"><span data-stu-id="d3b99-142">An FCI runs in a WSFC resource group with one or more WSFC nodes.</span></span> <span data-ttu-id="d3b99-143">Quando l'istanza del cluster di failover viene avviata, uno dei nodi presume la proprietà del gruppo di risorse e attiva la modalità online dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-143">When the FCI starts up, one of the nodes assume ownership of the resource group and brings its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance online.</span></span> <span data-ttu-id="d3b99-144">Le risorse di proprietà di questo nodo includono:</span><span class="sxs-lookup"><span data-stu-id="d3b99-144">The resources owned by this node include:</span></span>  
  
-   <span data-ttu-id="d3b99-145">Nome della rete</span><span class="sxs-lookup"><span data-stu-id="d3b99-145">Network name</span></span>  
  
-   <span data-ttu-id="d3b99-146">Indirizzo IP</span><span class="sxs-lookup"><span data-stu-id="d3b99-146">IP address</span></span>  
  
-   <span data-ttu-id="d3b99-147">Dischi condivisi</span><span class="sxs-lookup"><span data-stu-id="d3b99-147">Shared disks</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="d3b99-148">Servizio del motore di database</span><span class="sxs-lookup"><span data-stu-id="d3b99-148">Database Engine service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="d3b99-149">Agent</span><span class="sxs-lookup"><span data-stu-id="d3b99-149">Agent service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="d3b99-150">Analysis Services, se installato</span><span class="sxs-lookup"><span data-stu-id="d3b99-150">Analysis Services service, if installed</span></span>  
  
-   <span data-ttu-id="d3b99-151">Una risorsa di condivisione file, se la funzionalità FILESTREAM è installata</span><span class="sxs-lookup"><span data-stu-id="d3b99-151">One file share resource, if the FILESTREAM feature is installed</span></span>  
  
 <span data-ttu-id="d3b99-152">In qualsiasi momento, solo il proprietario del gruppo di risorse, e nessun altro nodo nell'istanza del cluster di failover, esegue i rispettivi servizi di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="d3b99-152">At any time, only the resource group owner (and no other node in the FCI) is running its respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group.</span></span> <span data-ttu-id="d3b99-153">Quando si verifica un failover, ad esempio un failover automatico o un failover pianificato, si verifica la seguente sequenza di eventi:</span><span class="sxs-lookup"><span data-stu-id="d3b99-153">When a failover occurs, whether it be an automatic failover or a planned failover, the following sequence of events happen:</span></span>  
  
1.  <span data-ttu-id="d3b99-154">A meno che non si verifichi un errore hardware o di sistema, tutte le pagine dirty della cache del buffer vengono scritte su disco.</span><span class="sxs-lookup"><span data-stu-id="d3b99-154">Unless a hardware or system failure occurs, all dirty pages in the buffer cache are written to disk.</span></span>  
  
2.  <span data-ttu-id="d3b99-155">Tutti i rispettivi servizi [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] nel gruppo di risorse vengono arrestati sul nodo attivo.</span><span class="sxs-lookup"><span data-stu-id="d3b99-155">All respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group are stopped on the active node.</span></span>  
  
3.  <span data-ttu-id="d3b99-156">La proprietà del gruppo di risorse viene trasferita a un altro nodo nell'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-156">The resource group ownership is transferred to another node in the FCI.</span></span>  
  
4.  <span data-ttu-id="d3b99-157">I servizi [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] vengono avviati dal nuovo proprietario del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="d3b99-157">The new resource group owner starts its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services.</span></span>  
  
5.  <span data-ttu-id="d3b99-158">Le richieste di connessione dell'applicazione client vengono dirette automaticamente al nuovo nodo attivo utilizzando lo stesso nome della rete virtuale (VNN, Virtual Network Name).</span><span class="sxs-lookup"><span data-stu-id="d3b99-158">Client application connection requests are automatically directed to the new active node using the same virtual network name (VNN).</span></span>  
  
 <span data-ttu-id="d3b99-159">L'istanza del cluster di failover è online finché l'integrità del quorum del cluster WSFC sottostante è buona (la maggioranza dei nodi WSFC del quorum è disponibile come destinazione del failover automatico).</span><span class="sxs-lookup"><span data-stu-id="d3b99-159">The FCI is online as long as its underlying WSFC cluster is in good quorum health (the majority of the quorum WSFC nodes are available as automatic failover targets).</span></span> <span data-ttu-id="d3b99-160">Quando il cluster WSFC perde il quorum per un errore hardware, software, di rete o per la configurazione impropria del quorum, l'intero cluster WSFC, insieme all'istanza del cluster di failover viene portato offline.</span><span class="sxs-lookup"><span data-stu-id="d3b99-160">When the WSFC cluster loses its quorum, whether due to hardware, software, network failure, or improper quorum configuration, the entire WSFC cluster, along with the FCI, is brought offline.</span></span> <span data-ttu-id="d3b99-161">Quindi, in questo scenario di failover non pianificato è richiesto l'intervento manuale per ristabilire il quorum nei nodi disponibili restanti in modo da riportare il cluster WSFC e l'istanza del cluster di failover online.</span><span class="sxs-lookup"><span data-stu-id="d3b99-161">Manual intervention is then required in this unplanned failover scenario to reestablish quorum in the remaining available nodes in order to bring the WSFC cluster and FCI back online.</span></span> <span data-ttu-id="d3b99-162">Per ulteriori informazioni, vedere [modalità quorum WSFC e configurazione del voto (; SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d3b99-162">For more information, see [WSFC Quorum Modes and Voting Configuration (;SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
### <a name="predictable-failover-time"></a><span data-ttu-id="d3b99-163">Tempo stimabile di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-163">Predictable Failover Time</span></span>  
 <span data-ttu-id="d3b99-164">A seconda di quando l'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ha eseguito l'ultima operazione di checkpoint, è possibile che vi sia una quantità sostanziale di pagine dirty nella cache del buffer.</span><span class="sxs-lookup"><span data-stu-id="d3b99-164">Depending on when your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance last performed a checkpoint operation, there can be a substantial amount of dirty pages in the buffer cache.</span></span> <span data-ttu-id="d3b99-165">Di conseguenza, i failover durano per tutto il tempo che occorre per scrivere le pagine dirty restanti sul disco che può comportare un tempo di failover lungo e imprevedibile.</span><span class="sxs-lookup"><span data-stu-id="d3b99-165">Consequently, failovers last as long as it takes to write the remaining dirty pages to disk, which can lead to long and unpredictable failover time.</span></span> <span data-ttu-id="d3b99-166">A partire da [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]l'istanza del cluster di failover può usare checkpoint indiretti per limitare la quantità di pagine dirty mantenute nella cache del buffer.</span><span class="sxs-lookup"><span data-stu-id="d3b99-166">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the FCI can use indirect checkpoints to throttle the amount of dirty pages kept in the buffer cache.</span></span> <span data-ttu-id="d3b99-167">Sebbene vengano utilizzate risorse aggiuntive sotto un carico di lavoro normale, la durata del failover è più stimabile e configurabile.</span><span class="sxs-lookup"><span data-stu-id="d3b99-167">While this does consume additional resources under regular workload, it makes the failover time more predictable as well as more configurable.</span></span> <span data-ttu-id="d3b99-168">Questa operazione si rivela utile quando il contratto di servizio dell'organizzazione specifica l'obiettivo del tempo di recupero (RTO, Recovery Time Objective) per la soluzione di disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="d3b99-168">This is very useful when the service-level agreement in your organization specifies the recovery time objective (RTO) for your high availability solution.</span></span> <span data-ttu-id="d3b99-169">Per ulteriori informazioni sui checkpoint indiretti, vedere [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span><span class="sxs-lookup"><span data-stu-id="d3b99-169">For more information on indirect checkpoints, see [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span></span>  
  
### <a name="reliable-health-monitoring-and-flexible-failover-policy"></a><span data-ttu-id="d3b99-170">Criteri di failover flessibili e monitoraggio dell'integrità affidabile</span><span class="sxs-lookup"><span data-stu-id="d3b99-170">Reliable Health Monitoring and Flexible Failover Policy</span></span>  
 <span data-ttu-id="d3b99-171">Una volta avviata l'istanza del cluster di failover, il servizio WSFC esegue il monitoraggio dell'integrità del cluster del servizio WSFC sottostante e l'integrità dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-171">After the FCI starts successfully, the WSFC service monitors both the health of the underlying WSFC cluster, as well as the health of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="d3b99-172">A partire da [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]il servizio WSFC usa una connessione dedicata per eseguire il polling dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] attiva per la diagnostica dettagliata dei componenti tramite una stored procedure di sistema.</span><span class="sxs-lookup"><span data-stu-id="d3b99-172">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the WSFC service uses a dedicated connection to poll the active [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for detailed component diagnostics through a system stored procedure.</span></span> <span data-ttu-id="d3b99-173">L'implicazione di ciò è costituita da tre riduzioni:</span><span class="sxs-lookup"><span data-stu-id="d3b99-173">The implication of this is three-fold:</span></span>  
  
-   <span data-ttu-id="d3b99-174">La connessione dedicata all'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] consente di eseguire il polling costantemente in modo affidabile per la diagnostica dei componenti, anche quando il carico di lavoro dell'istanza del cluster di failover è elevato.</span><span class="sxs-lookup"><span data-stu-id="d3b99-174">The dedicated connection to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance makes it possible to reliably poll for component diagnostics all the time, even when the FCI is under heavy load.</span></span> <span data-ttu-id="d3b99-175">In tal modo è possibile distinguere tra un sistema in carico di lavoro elevato e un sistema che effettivamente è in condizione di errore, evitando pertanto problemi quali failover falsi.</span><span class="sxs-lookup"><span data-stu-id="d3b99-175">This makes it possible to distinguish between a system that is under heavy load and a system that actually has failure conditions, thus preventing issues such as false failovers.</span></span>  
  
-   <span data-ttu-id="d3b99-176">La diagnostica dettagliata dei componenti consente di configurare più criteri di failover flessibili per permettere di scegliere le condizioni di errore che attivano i failover e quelle che non li attivano.</span><span class="sxs-lookup"><span data-stu-id="d3b99-176">The detailed component diagnostics makes it possible to configure a more flexible failover policy, whereby you can choose what failure conditions trigger failovers and which failure conditions do not.</span></span>  
  
-   <span data-ttu-id="d3b99-177">La diagnostica dettagliata dei componenti abilita anche una migliore risoluzione dei problemi dei failover automatici in modo retroattivo.</span><span class="sxs-lookup"><span data-stu-id="d3b99-177">The detailed component diagnostics also enables better troubleshooting of automatic failovers retroactively.</span></span> <span data-ttu-id="d3b99-178">Le informazioni di diagnostica vengono archiviate in file di log che vengono collocati insieme ai log degli errori di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-178">The diagnostic information is stored to log files, which are collocated with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] error logs.</span></span> <span data-ttu-id="d3b99-179">È possibile caricare i file nel visualizzatore file di log per controllare gli stati dei componenti precedenti all'occorrenza del failover per determinare la causa del failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-179">You can load them into the Log File Viewer to inspect the component states leading up to the failover occurrence in order to determine what cause that failover.</span></span>  
  
 <span data-ttu-id="d3b99-180">Per ulteriori informazioni, vedere [criteri di failover per le istanze del cluster di failover](failover-policy-for-failover-cluster-instances.md)</span><span class="sxs-lookup"><span data-stu-id="d3b99-180">For more information, see [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md)</span></span>  
  
##  <a name="elements-of-a-failover-cluster-instance"></a><a name="FCIelements"></a><span data-ttu-id="d3b99-181">Elementi di un'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-181">Elements of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="d3b99-182">Un'istanza del cluster di failover è costituita da un set di server fisici (nodi) con configurazioni hardware simili e configurazioni software identiche, tra cui la versione del sistema operativo e il livello della patch e la versione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , il livello della patch, i componenti e il nome dell'istanza.</span><span class="sxs-lookup"><span data-stu-id="d3b99-182">An FCI consists of a set of physical servers (nodes) that contain similar hardware configuration as well as identical software configuration that includes operating system version and patch level, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] version, patch level, components, and instance name.</span></span> <span data-ttu-id="d3b99-183">La configurazione del software identica è necessaria assicurarsi che l'istanza del cluster di failover possa essere totalmente funzionale quando si verifica un errore tra i nodi.</span><span class="sxs-lookup"><span data-stu-id="d3b99-183">Identical software configuration is necessary to ensure that the FCI can be fully functional as it fails over between the nodes.</span></span>  
  
 <span data-ttu-id="d3b99-184">Gruppo di risorse WSFC</span><span class="sxs-lookup"><span data-stu-id="d3b99-184">WSFC Resource Group</span></span>  
 <span data-ttu-id="d3b99-185">Un'istanza del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] viene eseguita in un gruppo di risorse WSFC.</span><span class="sxs-lookup"><span data-stu-id="d3b99-185">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI runs in a WSFC resource group.</span></span> <span data-ttu-id="d3b99-186">Ogni nodo nel gruppo di risorse gestisce una copia sincronizzata delle impostazioni di configurazione e delle chiavi del Registro di sistema del checkpoint per assicurare la funzionalità completa dell'istanza del cluster di failover dopo un failover e solo un nodo per volta (il nodo attivo) possiede nel cluster il gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="d3b99-186">Each node in the resource group maintains a synchronized copy of the configuration settings and check-pointed registry keys to ensure full functionality of the FCI after a failover, and only one of the nodes in the cluster owns the resource group at a time (the active node).</span></span> <span data-ttu-id="d3b99-187">Il servizio WSFC gestisce il cluster del server, la configurazione del quorum, i criteri del failover e le operazioni del failover, nonché il nome di rete virtuale e gli indirizzi IP virtuali per l'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-187">The WSFC service manages the server cluster, quorum configuration, failover policy, and failover operations, as well as the VNN and virtual IP addresses for the FCI.</span></span> <span data-ttu-id="d3b99-188">In caso di errore (hardware, del sistema operativo, dell'applicazione o del servizio) o di un aggiornamento pianificato, la proprietà del gruppo di risorse viene spostata a un altro nodo dell'istanza del cluster di failover. Il numero di nodi supportati in un gruppo di risorse WSFC dipende dall'edizione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-188">In case of a failure (hardware failures, operating system failures, application or service failures) or a planned upgrade, the resource group ownership is moved to another node in the FCI.The number of nodes that are supported in a WSFC resource group depends on your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="d3b99-189">Inoltre, lo stesso cluster WSFC può eseguire più istanze del cluster di failover (più gruppi di risorse), a seconda della capacità hardware, ad esempio CPU, memoria e numero di dischi.</span><span class="sxs-lookup"><span data-stu-id="d3b99-189">Also, the same WSFC cluster can run multiple FCIs (multiple resource groups), depending on your hardware capacity, such as CPUs, memory, and number of disks.</span></span>  
  
 <span data-ttu-id="d3b99-190">Binari di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d3b99-190">SQL Server Binaries</span></span>  
 <span data-ttu-id="d3b99-191">I file binari del prodotto sono installati in locale in ogni nodo dell'istanza del cluster di failover, come avviene per le installazioni autonome di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-191">The product binaries are installed locally on each node of the FCI, a process similar to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] stand-alone installations.</span></span> <span data-ttu-id="d3b99-192">Tuttavia, durante l'avvio, i servizi non vengono avviati automaticamente, ma gestiti dal servizio WSFC.</span><span class="sxs-lookup"><span data-stu-id="d3b99-192">However, during startup, the services are not started automatically, but managed by WSFC.</span></span>  
  
 <span data-ttu-id="d3b99-193">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="d3b99-193">Storage</span></span>  
 <span data-ttu-id="d3b99-194">Diversamente dal gruppo di disponibilità Always On, un'istanza del cluster di failover deve usare l'archiviazione condivisa tra tutti i nodi dell'istanza del cluster di failover per l'archiviazione di log e database.</span><span class="sxs-lookup"><span data-stu-id="d3b99-194">Contrary to the Always On availability group, an FCI must use shared storage between all nodes of the FCI for database and log storage.</span></span> <span data-ttu-id="d3b99-195">L'archiviazione condivisa può avvenire in dischi di cluster WSFC, dischi su una rete SAN o condivisioni di file con un protocollo SMB.</span><span class="sxs-lookup"><span data-stu-id="d3b99-195">The shared storage can be in the form of WSFC cluster disks, disks on a SAN, or file shares on an SMB.</span></span> <span data-ttu-id="d3b99-196">In tal modo, tutti i nodi nell'istanza del cluster di failover dispongono della stessa vista di dati dell'istanza quando si verifica un failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-196">This way, all nodes in the FCI have the same view of instance data whenever a failover occurs.</span></span> <span data-ttu-id="d3b99-197">Tuttavia, questo vuole dire che l'archiviazione condivisa potenzialmente potrebbe essere l'unico punto di errore e l'istanza del cluster di failover dipende dalla soluzione di archiviazione sottostante per assicurare la protezione dei dati.</span><span class="sxs-lookup"><span data-stu-id="d3b99-197">This does mean, however, that the shared storage has the potential of being the single point of failure, and FCI depends on the underlying storage solution to ensure data protection.</span></span>  
  
 <span data-ttu-id="d3b99-198">Nome rete</span><span class="sxs-lookup"><span data-stu-id="d3b99-198">Network Name</span></span>  
 <span data-ttu-id="d3b99-199">Il nome della rete virtuale (VNN, Virtual Network Name) fornisce un punto di connessione unificato per l'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-199">The VNN for the FCI provides a unified connection point for the FCI.</span></span> <span data-ttu-id="d3b99-200">In tal modo le applicazioni possono connettersi al nome VNN senza il bisogno di conoscere il nodo al momento attivo.</span><span class="sxs-lookup"><span data-stu-id="d3b99-200">This allows applications to connect to the VNN without the need to know the currently active node.</span></span> <span data-ttu-id="d3b99-201">Quando si verifica un failover, il VNN viene registrato nel nuovo nodo attivo dopo l'avvio.</span><span class="sxs-lookup"><span data-stu-id="d3b99-201">When a failover occurs, the VNN is registered to the new active node after it starts.</span></span> <span data-ttu-id="d3b99-202">Questo processo non è visibile al client o all'applicazione che si connette a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , riducendo di conseguenza i tempi d'inattività dell'applicazione o dei client durante un errore.</span><span class="sxs-lookup"><span data-stu-id="d3b99-202">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span>  
  
 <span data-ttu-id="d3b99-203">IP virtuali</span><span class="sxs-lookup"><span data-stu-id="d3b99-203">Virtual IPs</span></span>  
 <span data-ttu-id="d3b99-204">Nel caso di un'istanza del cluster di failover su più subnet, un indirizzo IP virtuale viene assegnato a ogni subnet nell'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-204">In the case of a multi-subnet FCI, a virtual IP address is assigned to each subnet in the FCI.</span></span> <span data-ttu-id="d3b99-205">Durante un failover, il VNN sul server DNS viene aggiornato per puntare all'indirizzo IP virtuale per la rispettiva subnet.</span><span class="sxs-lookup"><span data-stu-id="d3b99-205">During a failover, the VNN on the DNS server is updated to point to the virtual IP address for the respective subnet.</span></span> <span data-ttu-id="d3b99-206">Le applicazioni e i client si possono connettere quindi all'istanza del cluster di failover utilizzando lo stesso VNN dopo un failover su più subnet.</span><span class="sxs-lookup"><span data-stu-id="d3b99-206">Applications and clients can then connect to the FCI using the same VNN after a multi-subnet failover.</span></span>  
  
##  <a name="sql-server-failover-concepts-and-tasks"></a><a name="ConceptsAndTasks"></a> <span data-ttu-id="d3b99-207">Concetti e attività di failover di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d3b99-207">SQL Server Failover Concepts and Tasks</span></span>  
  
|<span data-ttu-id="d3b99-208">Concetti e attività</span><span class="sxs-lookup"><span data-stu-id="d3b99-208">Concepts and Tasks</span></span>|<span data-ttu-id="d3b99-209">Argomento</span><span class="sxs-lookup"><span data-stu-id="d3b99-209">Topic</span></span>|  
|------------------------|-----------|  
|<span data-ttu-id="d3b99-210">Descrive il meccanismo di rilevamento dell'errore e i criteri di failover flessibili.</span><span class="sxs-lookup"><span data-stu-id="d3b99-210">Describes the failure detection mechanism and the flexible failover policy.</span></span>|[<span data-ttu-id="d3b99-211">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="d3b99-211">Failover Policy for Failover Cluster Instances</span></span>](failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="d3b99-212">Descrive i concetti dell'amministrazione e della manutenzione dell'istanza del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="d3b99-212">Describes concepts in FCI administration and maintenance.</span></span>|[<span data-ttu-id="d3b99-213">Gestione e manutenzione dell'istanza del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="d3b99-213">Failover Cluster Instance Administration and Maintenance</span></span>](failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="d3b99-214">Descrive la configurazione di più subnet e concetti</span><span class="sxs-lookup"><span data-stu-id="d3b99-214">Describes multi-subnet configuration and concepts</span></span>|[<span data-ttu-id="d3b99-215">SQL Server il clustering su più subnet (; SQL Server);</span><span class="sxs-lookup"><span data-stu-id="d3b99-215">SQL Server Multi-Subnet Clustering (;SQL Server);</span></span>](sql-server-multi-subnet-clustering-sql-server.md)|  
  
##  <a name="related-topics"></a><a name="RelatedTopics"></a><span data-ttu-id="d3b99-216">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d3b99-216">Related Topics</span></span>  
  
|<span data-ttu-id="d3b99-217">**Descrizioni argomento**</span><span class="sxs-lookup"><span data-stu-id="d3b99-217">**Topic descriptions**</span></span>|<span data-ttu-id="d3b99-218">**Argomento**</span><span class="sxs-lookup"><span data-stu-id="d3b99-218">**Topic**</span></span>|  
|----------------------------|---------------|  
|<span data-ttu-id="d3b99-219">Descrive come installare e configurare una nuova istanza del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-219">Describes how to install a new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI.</span></span>|[<span data-ttu-id="d3b99-220">Creazione di un nuovo cluster di failover di SQL Server (; Configurazione);</span><span class="sxs-lookup"><span data-stu-id="d3b99-220">Create a New SQL Server Failover Cluster (;Setup);</span></span>](../install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="d3b99-221">Descrive la modalità di aggiornamento a un cluster di failover di [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d3b99-221">Describes how to upgrade to a [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster.</span></span>|[<span data-ttu-id="d3b99-222">Aggiornare un cluster di failover di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d3b99-222">Upgrade a SQL Server Failover Cluster</span></span>](upgrade-a-sql-server-failover-cluster-instance.md)|  
|<span data-ttu-id="d3b99-223">Descrive i concetti relativi al clustering di failover di Windows e fornisce collegamenti ad attività correlate al clustering di failover di Windows</span><span class="sxs-lookup"><span data-stu-id="d3b99-223">Describes Windows Failover Clustering Concepts and provides links to tasks related to Windows Failover Clustering</span></span>|[!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]<span data-ttu-id="d3b99-224">: [Panoramica dei cluster di failover](https://go.microsoft.com/fwlink/?LinkId=177878)</span><span class="sxs-lookup"><span data-stu-id="d3b99-224">: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177878)</span></span><br /><br /> [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)] <span data-ttu-id="d3b99-225">R2: [Panoramica dei cluster di failover](https://go.microsoft.com/fwlink/?LinkId=177879)</span><span class="sxs-lookup"><span data-stu-id="d3b99-225">R2: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177879)</span></span>|  
|<span data-ttu-id="d3b99-226">Descrive le diversità tra il concetto di nodo in un'istanza del cluster di failover e di replica in un gruppo di disponibilità e le considerazioni per l'utilizzo di un'istanza del cluster di failover per ospitare una replica per un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="d3b99-226">Describes the distinctions in concepts between nodes in an FCI and replicas within an availability group and considerations for using an FCI to host a replica for an availability group.</span></span>|[<span data-ttu-id="d3b99-227">Clustering di failover e gruppi di disponibilità Always On (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="d3b99-227">Failover Clustering and Always On Availability Groups (SQL Server)</span></span>](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md)|  
  
  
