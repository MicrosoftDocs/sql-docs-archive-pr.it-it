---
title: Criteri di failover per istanze del cluster di failover | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- flexible failover policy
ms.assetid: 39ceaac5-42fa-4b5d-bfb6-54403d7f0dc9
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8d441e5627280cb46168d9ff187d7f43da8b26a6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87628270"
---
# <a name="failover-policy-for-failover-cluster-instances"></a><span data-ttu-id="75acb-102">Criteri di failover per istanze del cluster di failover</span><span class="sxs-lookup"><span data-stu-id="75acb-102">Failover Policy for Failover Cluster Instances</span></span>
  <span data-ttu-id="75acb-103">In un'istanza del cluster di failover (FCI, Failover Cluster Instance) di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , solo un nodo può possedere il gruppo di risorse del cluster WSFC (Windows Server Failover Cluster) a un'ora specificata.</span><span class="sxs-lookup"><span data-stu-id="75acb-103">In a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI), only one node can own the Windows Server Failover Cluster (WSFC) cluster resource group at a given time.</span></span> <span data-ttu-id="75acb-104">Le richieste del client vengono servite tramite questo nodo nell'istanza FCI.</span><span class="sxs-lookup"><span data-stu-id="75acb-104">The client requests are served through this node in the FCI.</span></span> <span data-ttu-id="75acb-105">In caso di errore e riavvio non eseguito, la proprietà del gruppo viene spostata in un altro nodo WSFC nell'istanza FCI.</span><span class="sxs-lookup"><span data-stu-id="75acb-105">In the case of a failure and an unsuccessful restart, the group ownership is moved to another WSFC node in the FCI.</span></span> <span data-ttu-id="75acb-106">Questo processo viene chiamato failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-106">This process is called failover.</span></span> [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="75acb-107">aumenta l'affidabilità di rilevamento dell'errore e offre criteri di failover flessibili.</span><span class="sxs-lookup"><span data-stu-id="75acb-107">increases the reliability of failure detection and provides a flexible failover policy.</span></span>  
  
 <span data-ttu-id="75acb-108">Un'istanza FCI di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dipende dal servizio WSFC sottostante per il rilevamento del failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-108">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI depends on the underlying WSFC service for failover detection.</span></span> <span data-ttu-id="75acb-109">Pertanto, due meccanismi determinano il comportamento del failover per l'istanza FCI: la prima è la funzionalità di WSFC nativa e la seconda è la funzionalità aggiunta dall'installazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="75acb-109">Therefore, two mechanisms determine the failover behavior for FCI: the former is native WSFC functionality, and the latter is functionality added by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup.</span></span>  
  
-   <span data-ttu-id="75acb-110">Il cluster WSFC gestisce la configurazione del quorum che assicura una destinazione del failover univoca in un failover automatico.</span><span class="sxs-lookup"><span data-stu-id="75acb-110">The WSFC cluster maintains the quorum configuration, which ensures a unique failover target in an automatic failover.</span></span> <span data-ttu-id="75acb-111">Il servizio WSFC determina se il cluster è sempre nell'integrità del quorum ottimale e porta di conseguenza il gruppo di risorse online e offline.</span><span class="sxs-lookup"><span data-stu-id="75acb-111">The WSFC service determines whether the cluster is in optimal quorum health at all times and brings the resource group online and offline accordingly.</span></span>  
  
-   <span data-ttu-id="75acb-112">L'istanza [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] attiva riporta periodicamente un set di diagnostica del componente al gruppo di risorse WSFC su una connessione dedicata.</span><span class="sxs-lookup"><span data-stu-id="75acb-112">The active [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance periodically reports a set of component diagnostics to the WSFC resource group over a dedicated connection.</span></span> <span data-ttu-id="75acb-113">Il gruppo di risorse WSFC gestisce i criteri del failover che definiscono le condizioni di errore che attivano operazioni di riavvio e failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-113">The WSFC resource group maintains the failover policy, which defines the failure conditions that trigger restarts and failovers.</span></span>  
  
 <span data-ttu-id="75acb-114">In questo argomento viene illustrato il secondo meccanismo.</span><span class="sxs-lookup"><span data-stu-id="75acb-114">This topic discusses the second mechanism above.</span></span> <span data-ttu-id="75acb-115">Per altre informazioni sul comportamento di WSFC per la configurazione del quorum e il rilevamento dell'integrità, vedere [Modalità quorum WSFC e configurazione del voto &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="75acb-115">For more information on the WSFC behavior for quorum configuration and health detection, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="75acb-116">I failover automatici da e verso un'istanza FCI non sono consentiti in un gruppo di disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="75acb-116">Automatic failovers to and from an FCI are not allowed in an AlwaysOn availability group.</span></span> <span data-ttu-id="75acb-117">I failover manuali da e verso un'istanza FCI sono consentiti in un gruppo di disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="75acb-117">However, manual failovers to and from and FCI are allowed in an AlwaysOn availability group.</span></span>  
  
##  <a name="failover-policy-overview"></a><a name="Concepts"></a> <span data-ttu-id="75acb-118">Panoramica dei criteri di failover</span><span class="sxs-lookup"><span data-stu-id="75acb-118">Failover Policy Overview</span></span>  
 <span data-ttu-id="75acb-119">Il processo del failover si può essere suddiviso nei passaggi indicati di seguito.</span><span class="sxs-lookup"><span data-stu-id="75acb-119">The failover process can be broken down into the following steps:</span></span>  
  
1.  [<span data-ttu-id="75acb-120">Monitoraggio dello stato di integrità</span><span class="sxs-lookup"><span data-stu-id="75acb-120">Monitor the Health Status</span></span>](failover-policy-for-failover-cluster-instances.md#monitor)  
  
2.  [<span data-ttu-id="75acb-121">Determinazione degli errori</span><span class="sxs-lookup"><span data-stu-id="75acb-121">Determining Failures</span></span>](failover-policy-for-failover-cluster-instances.md#determine)  
  
3.  [<span data-ttu-id="75acb-122">Risposta agli errori</span><span class="sxs-lookup"><span data-stu-id="75acb-122">Responding to Failures</span></span>](failover-policy-for-failover-cluster-instances.md#respond)  
  
###  <a name="monitor-the-health-status"></a><a name="monitor"></a><span data-ttu-id="75acb-123">Monitorare lo stato di integrità</span><span class="sxs-lookup"><span data-stu-id="75acb-123">Monitor the Health Status</span></span>  
 <span data-ttu-id="75acb-124">Tre sono i tipi di stato di integrità che vengono monitorati per l'istanza FCI:</span><span class="sxs-lookup"><span data-stu-id="75acb-124">There are three types of health statuses that are monitored for the FCI:</span></span>  
  
-   [<span data-ttu-id="75acb-125">Stato del servizio SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-125">State of the SQL Server service</span></span>](failover-policy-for-failover-cluster-instances.md#service)  
  
-   [<span data-ttu-id="75acb-126">Velocità di risposta dell'istanza di SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-126">Responsiveness of the SQL Server instance</span></span>](failover-policy-for-failover-cluster-instances.md#instance)  
  
-   [<span data-ttu-id="75acb-127">Diagnostica dei componenti di SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-127">SQL Server component diagnostics</span></span>](failover-policy-for-failover-cluster-instances.md#component)  
  
####  <a name="state-of-the-sql-server-service"></a><a name="service"></a> <span data-ttu-id="75acb-128">Stato del servizio SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-128">State of the SQL Server service</span></span>  
 <span data-ttu-id="75acb-129">Il servizio WSFC esegue il monitoraggio lo stato iniziale del servizio SQL Server sul nodo FCI attivo per rilevare quando viene arrestato il servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-129">The WSFC service monitors the start state of the SQL Server service on the active FCI node to detect when the SQL Server service is stopped.</span></span>  
  
####  <a name="responsiveness-of-the-sql-server-instance"></a><a name="instance"></a><span data-ttu-id="75acb-130">Velocità di risposta dell'istanza di SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-130">Responsiveness of the SQL Server instance</span></span>  
 <span data-ttu-id="75acb-131">Durante l'avvio di SQL Server, il servizio WSFC utilizza la DLL risorse del motore di database di SQL Server per creare una nuova connessione a un thread separato utilizzata esclusivamente per il monitoraggio dello stato di integrità.</span><span class="sxs-lookup"><span data-stu-id="75acb-131">During SQL Server startup, the WSFC service uses the SQL Server Database Engine resource DLL to create a new connection to on a separate thread that is used exclusively for monitoring the health status.</span></span> <span data-ttu-id="75acb-132">In tal modo si assicura che l'istanza di SQL disponga delle risorse richieste per restituire lo stato di integrità durante il caricamento.</span><span class="sxs-lookup"><span data-stu-id="75acb-132">This ensures that there the SQL instance has the required resources to report its health status while under load.</span></span> <span data-ttu-id="75acb-133">Tramite questa connessione dedicata, SQL Server esegue la stored procedure di sistema [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) in modalità ripetizione per restituire periodicamente lo stato di integrità dei componenti di SQL Server per la DLL risorse.</span><span class="sxs-lookup"><span data-stu-id="75acb-133">Using this dedicated connection, SQL Server runs the [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) system stored procedure in repeat mode to periodically report the health status of the SQL Server components to the resource DLL.</span></span>  
  
 <span data-ttu-id="75acb-134">La DLL risorse determina la velocità di risposta dell'istanza di SQL utilizzando un timeout di controllo integrità.</span><span class="sxs-lookup"><span data-stu-id="75acb-134">The resource DLL determines the responsiveness of the SQL instance using a health check timeout.</span></span> <span data-ttu-id="75acb-135">La proprietà HealthCheckTimeout consente di definire il tempo di attesa della DLL risorse per la stored procedure sp_server_diagnostics prima che venga stabilita la mancata risposta da parte dell'istanza di SQL al servizio WSFC.</span><span class="sxs-lookup"><span data-stu-id="75acb-135">The HealthCheckTimeout property defines how long the resource DLL should wait for the sp_server_diagnostics stored procedure before it reports the SQL instance as unresponsive to the WSFC service.</span></span> <span data-ttu-id="75acb-136">Questa proprietà è configurabile utilizzando T-SQL così come nello snap-in Gestione cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-136">This property is configurable using T-SQL as well as in the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="75acb-137">Per altre informazioni, vedere [Configurazione delle impostazioni HealthCheckTimeout](configure-healthchecktimeout-property-settings.md).</span><span class="sxs-lookup"><span data-stu-id="75acb-137">For more information, see [Configure HealthCheckTimeout Property Settings](configure-healthchecktimeout-property-settings.md).</span></span> <span data-ttu-id="75acb-138">Di seguito viene descritta l'influenza di questa proprietà sulle impostazioni del timeout e dell'intervallo di ripetizione:</span><span class="sxs-lookup"><span data-stu-id="75acb-138">The following items describe how this property affects timeout and repeat interval settings:</span></span>  
  
-   <span data-ttu-id="75acb-139">Tramite la DLL risorse viene chiamata la stored procedure sp_server_diagnostics e impostato l'intervallo di ripetizione su un terzo dell'impostazione HealthCheckTimeout.</span><span class="sxs-lookup"><span data-stu-id="75acb-139">The resource DLL calls the sp_server_diagnostics stored procedure and sets the repeat interval to one-third of the HealthCheckTimeout setting.</span></span>  
  
-   <span data-ttu-id="75acb-140">Se la stored procedure sp_server_diagnostics è lenta o non consente la restituzione di informazioni, tramite la DLL risorse si attenderà l'intervallo specificato da HealthCheckTimeout, prima di restituire al servizio WSFC la mancata risposta da parte dell'istanza SQL.</span><span class="sxs-lookup"><span data-stu-id="75acb-140">If the sp_server_diagnostics stored procedure is slow or is not returning information, the resource DLL will wait for the interval specified by HealthCheckTimeout before it reports to the WSFC service that the SQL instance is unresponsive.</span></span>  
  
-   <span data-ttu-id="75acb-141">Se la connessione dedicata viene persa, la DLL risorse ritenterà la connessione all'istanza di SQL per il tempo specificato da HealthCheckTimeout prima che riporti al servizio WSFC che l'istanza SQL non risponde.</span><span class="sxs-lookup"><span data-stu-id="75acb-141">If the dedicated connection is lost, the resource DLL will retry the connection to the SQL instance for the interval specified by HealthCheckTimeout before it reports to the WSFC service that the SQL instance is unresponsive.</span></span>  
  
####  <a name="sql-server-component-diagnostics"></a><a name="component"></a><span data-ttu-id="75acb-142">Diagnostica componenti SQL Server</span><span class="sxs-lookup"><span data-stu-id="75acb-142">SQL Server component diagnostics</span></span>  
 <span data-ttu-id="75acb-143">La stored procedure di sistema sp_server_diagnostics raccoglie periodicamente i dati di diagnostica dei componenti sull'istanza di SQL.</span><span class="sxs-lookup"><span data-stu-id="75acb-143">The system stored procedure sp_server_diagnostics periodically collects component diagnostics on the SQL instance.</span></span> <span data-ttu-id="75acb-144">Le informazioni diagnostiche raccolte vengono visualizzate in una riga per ognuno dei componenti seguenti e passate al thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="75acb-144">The diagnostic information that is collected is surfaced as a row for each of the following components and passed to the calling thread.</span></span>  
  
1.  <span data-ttu-id="75acb-145">sistema</span><span class="sxs-lookup"><span data-stu-id="75acb-145">system</span></span>  
  
2.  <span data-ttu-id="75acb-146">Risorsa</span><span class="sxs-lookup"><span data-stu-id="75acb-146">resource</span></span>  
  
3.  <span data-ttu-id="75acb-147">processo query</span><span class="sxs-lookup"><span data-stu-id="75acb-147">query process</span></span>  
  
4.  <span data-ttu-id="75acb-148">io_subsystem</span><span class="sxs-lookup"><span data-stu-id="75acb-148">io_subsystem</span></span>  
  
5.  <span data-ttu-id="75acb-149">eventi</span><span class="sxs-lookup"><span data-stu-id="75acb-149">events</span></span>  
  
 <span data-ttu-id="75acb-150">I componenti system, resource e query process vengono utilizzati per il rilevamento di errori.</span><span class="sxs-lookup"><span data-stu-id="75acb-150">The system, resource, and query process components are used for failure detection.</span></span> <span data-ttu-id="75acb-151">I componenti io_subsytem ed events vengono utilizzati solo per scopi diagnostici.</span><span class="sxs-lookup"><span data-stu-id="75acb-151">The io_subsytem and events components are used for diagnostic purposes only.</span></span>  
  
 <span data-ttu-id="75acb-152">Ogni set di righe di informazioni viene scritto anche nel log di diagnostica dei cluster di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-152">Each rowset of information is also written to the SQL Server cluster diagnostics log.</span></span> <span data-ttu-id="75acb-153">Per altre informazioni, vedere [Visualizzazione e lettura del log di diagnostica dell'istanza del cluster di failover](view-and-read-failover-cluster-instance-diagnostics-log.md).</span><span class="sxs-lookup"><span data-stu-id="75acb-153">For more information, see [View and Read Failover Cluster Instance Diagnostics Log](view-and-read-failover-cluster-instance-diagnostics-log.md).</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="75acb-154">La stored procedure sp_server_diagnostic viene utilizzata dalla tecnologia SQL Server AlwaysOn, ma è anche disponibile per essere usata da qualsiasi istanza di SQL Server per il rilevamento e la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="75acb-154">While the sp_server_diagnostic stored procedure is used by SQL Server AlwaysOn technology, it is available for use in any SQL Server instance to help detect and troubleshoot problems.</span></span>  
  
####  <a name="determining-failures"></a><a name="determine"></a> <span data-ttu-id="75acb-155">Determinazione di errori</span><span class="sxs-lookup"><span data-stu-id="75acb-155">Determining Failures</span></span>  
 <span data-ttu-id="75acb-156">La DLL risorse del motore di database di SQL Server determina se lo stato di integrità rilevato è una condizione di errore utilizzando la proprietà FailureConditionLevel.</span><span class="sxs-lookup"><span data-stu-id="75acb-156">The SQL Server Database Engine resource DLL determines whether the detected health status is a condition for failure using the FailureConditionLevel property.</span></span> <span data-ttu-id="75acb-157">La proprietà FailureConditionLevel definisce quale stato integrità rilevato causa il riavvio o il failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-157">The FailureConditionLevel property defines which detected health statuses cause restarts or failovers.</span></span> <span data-ttu-id="75acb-158">Sono disponibili più livelli di opzioni, da nessun riavvio o failover automatico a tutte le possibili condizioni di errore che comportano un riavvio o un failover automatico.</span><span class="sxs-lookup"><span data-stu-id="75acb-158">Multiple levels of options are available, ranging from no automatic restart or failover to all possible failure conditions resulting in an automatic restart or failover.</span></span> <span data-ttu-id="75acb-159">Per altre informazioni su come configurare questa proprietà, vedere [Configurare le impostazioni della proprietà FailureConditionLevel](configure-failureconditionlevel-property-settings.md).</span><span class="sxs-lookup"><span data-stu-id="75acb-159">For more information about how to configure this property, see [Configure FailureConditionLevel Property Settings](configure-failureconditionlevel-property-settings.md).</span></span>  
  
 <span data-ttu-id="75acb-160">Le condizioni di errore vengono impostate in base a un ordine crescente.</span><span class="sxs-lookup"><span data-stu-id="75acb-160">The failure conditions are set on an increasing scale.</span></span> <span data-ttu-id="75acb-161">In ognuno dei livelli 1-5 sono incluse tutte le condizioni dei livelli precedenti oltre alle proprie condizioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="75acb-161">For levels 1-5, each level includes all the conditions from the previous levels in addition to its own conditions.</span></span> <span data-ttu-id="75acb-162">Pertanto, in ogni livello la probabilità di un failover o di un riavvio è maggiore.</span><span class="sxs-lookup"><span data-stu-id="75acb-162">This means that with each level, there is an increased probability of a failover or restart.</span></span> <span data-ttu-id="75acb-163">I livelli delle condizioni di errore sono descritti nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="75acb-163">The failure condition levels are described in the following table.</span></span>  
  
 <span data-ttu-id="75acb-164">Rivedere [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) poiché questa stored procedure di sistema gioca un ruolo importante nei livelli di condizione di errore.</span><span class="sxs-lookup"><span data-stu-id="75acb-164">Review [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) as this system stored procedure plays in important role in the failure condition levels.</span></span>  
  
|<span data-ttu-id="75acb-165">Level</span><span class="sxs-lookup"><span data-stu-id="75acb-165">Level</span></span>|<span data-ttu-id="75acb-166">Condizione</span><span class="sxs-lookup"><span data-stu-id="75acb-166">Condition</span></span>|<span data-ttu-id="75acb-167">Descrizione</span><span class="sxs-lookup"><span data-stu-id="75acb-167">Description</span></span>|  
|-----------|---------------|-----------------|  
|<span data-ttu-id="75acb-168">0</span><span class="sxs-lookup"><span data-stu-id="75acb-168">0</span></span>|<span data-ttu-id="75acb-169">Nessun failover o riavvio automatico</span><span class="sxs-lookup"><span data-stu-id="75acb-169">No automatic failover or restart</span></span>|<span data-ttu-id="75acb-170">Viene indicato che con qualsiasi condizione di errore non verrà attivato automaticamente alcun failover o riavvio.</span><span class="sxs-lookup"><span data-stu-id="75acb-170">Indicates that no failover or restart will be triggered automatically on any failure conditions.</span></span> <span data-ttu-id="75acb-171">Questo livello serve solo per scopi di manutenzione del sistema.</span><span class="sxs-lookup"><span data-stu-id="75acb-171">This level is for system maintenance purposes only.</span></span>|  
|<span data-ttu-id="75acb-172">1</span><span class="sxs-lookup"><span data-stu-id="75acb-172">1</span></span>|<span data-ttu-id="75acb-173">Failover o riavvio in caso di server non disponibile</span><span class="sxs-lookup"><span data-stu-id="75acb-173">Failover or restart on server down</span></span>|<span data-ttu-id="75acb-174">Viene indicato che verrà attivato un riavvio o un failover del server se si verifica la condizione seguente:</span><span class="sxs-lookup"><span data-stu-id="75acb-174">Indicates that a server restart or failover will be triggered if the following condition is raised:</span></span><br /><br /> <span data-ttu-id="75acb-175">Indisponibilità del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-175">SQL Server service is down.</span></span>|  
|<span data-ttu-id="75acb-176">2</span><span class="sxs-lookup"><span data-stu-id="75acb-176">2</span></span>|<span data-ttu-id="75acb-177">Failover o riavvio in caso di mancata risposta da parte del server</span><span class="sxs-lookup"><span data-stu-id="75acb-177">Failover or restart on server unresponsive</span></span>|<span data-ttu-id="75acb-178">Viene indicato che verrà attivato un riavvio o un failover del server se si verifica una qualsiasi delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="75acb-178">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="75acb-179">Indisponibilità del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-179">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="75acb-180">L'istanza di SQL Server non risponde (la DLL risorse non può ricevere dati da sp_server_diagnostics entro le impostazioni HealthCheckTimeout).</span><span class="sxs-lookup"><span data-stu-id="75acb-180">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span>|  
|<span data-ttu-id="75acb-181">3\*</span><span class="sxs-lookup"><span data-stu-id="75acb-181">3\*</span></span>|<span data-ttu-id="75acb-182">Failover o riavvio in caso di errori critici del server</span><span class="sxs-lookup"><span data-stu-id="75acb-182">Failover or restart on critical server errors</span></span>|<span data-ttu-id="75acb-183">Viene indicato che verrà attivato un riavvio o un failover del server se si verifica una qualsiasi delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="75acb-183">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="75acb-184">Indisponibilità del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-184">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="75acb-185">L'istanza di SQL Server non risponde (la DLL risorse non può ricevere dati da sp_server_diagnostics entro le impostazioni HealthCheckTimeout).</span><span class="sxs-lookup"><span data-stu-id="75acb-185">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="75acb-186">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di sistema.</span><span class="sxs-lookup"><span data-stu-id="75acb-186">System stored procedure sp_server_diagnostics returns 'system error'.</span></span>|  
|<span data-ttu-id="75acb-187">4</span><span class="sxs-lookup"><span data-stu-id="75acb-187">4</span></span>|<span data-ttu-id="75acb-188">Failover o riavvio in caso di errori del server con gravità moderata</span><span class="sxs-lookup"><span data-stu-id="75acb-188">Failover or restart on moderate server errors</span></span>|<span data-ttu-id="75acb-189">Viene indicato che verrà attivato un riavvio o un failover del server se si verifica una qualsiasi delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="75acb-189">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="75acb-190">Indisponibilità del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-190">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="75acb-191">L'istanza di SQL Server non risponde (la DLL risorse non può ricevere dati da sp_server_diagnostics entro le impostazioni HealthCheckTimeout).</span><span class="sxs-lookup"><span data-stu-id="75acb-191">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="75acb-192">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di sistema.</span><span class="sxs-lookup"><span data-stu-id="75acb-192">System stored procedure sp_server_diagnostics returns 'system error'.</span></span><br /><br /> <span data-ttu-id="75acb-193">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di risorsa.</span><span class="sxs-lookup"><span data-stu-id="75acb-193">System  stored procedure sp_server_diagnostics returns 'resource error'.</span></span>|  
|<span data-ttu-id="75acb-194">5</span><span class="sxs-lookup"><span data-stu-id="75acb-194">5</span></span>|<span data-ttu-id="75acb-195">Failover o riavvio in caso di qualsiasi condizione di errore qualificata</span><span class="sxs-lookup"><span data-stu-id="75acb-195">Failover or restart on any qualified failure conditions</span></span>|<span data-ttu-id="75acb-196">Viene indicato che verrà attivato un riavvio o un failover del server se si verifica una qualsiasi delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="75acb-196">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="75acb-197">Indisponibilità del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="75acb-197">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="75acb-198">L'istanza di SQL Server non risponde (la DLL risorse non può ricevere dati da sp_server_diagnostics entro le impostazioni HealthCheckTimeout).</span><span class="sxs-lookup"><span data-stu-id="75acb-198">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="75acb-199">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di sistema.</span><span class="sxs-lookup"><span data-stu-id="75acb-199">System stored procedure sp_server_diagnostics returns 'system error'.</span></span><br /><br /> <span data-ttu-id="75acb-200">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di risorsa.</span><span class="sxs-lookup"><span data-stu-id="75acb-200">System  stored procedure sp_server_diagnostics returns 'resource error'.</span></span><br /><br /> <span data-ttu-id="75acb-201">La stored procedure di sistema sp_server_diagnostics restituisce l'errore di elaborazione query.</span><span class="sxs-lookup"><span data-stu-id="75acb-201">System stored procedure sp_server_diagnostics returns 'query_processing error'.</span></span>|  
  
 <span data-ttu-id="75acb-202">\*Valore predefinito</span><span class="sxs-lookup"><span data-stu-id="75acb-202">\*Default Value</span></span>  
  
####  <a name="responding-to-failures"></a><a name="respond"></a><span data-ttu-id="75acb-203">Risposta agli errori</span><span class="sxs-lookup"><span data-stu-id="75acb-203">Responding to Failures</span></span>  
 <span data-ttu-id="75acb-204">Una volta rilevata una o più condizioni di errore, il servizio WSFC risponde agli errori in base allo stato del quorum WSFC e alle impostazioni di riavvio e failover del gruppo di risorse di FCI.</span><span class="sxs-lookup"><span data-stu-id="75acb-204">After one or more failure conditions are detected, how the WSFC service responds to the failures depends on the WSFC quorum state and the restart and failover settings of the FCI resource group.</span></span> <span data-ttu-id="75acb-205">Se l'istanza FCI ha perso il quorum WSFC, l'intera istanza FCI viene portata offline e perde la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="75acb-205">If the FCI has lost its WSFC quorum, then the entire FCI is brought offline and the FCI has lost its high availability.</span></span> <span data-ttu-id="75acb-206">Se l'istanza FCI ancora mantiene il quorum WSFC, è possibile che il servizio WSFC risponda prima tentando di riavviare il nodo in errore e quindi eseguendo il failover se i tentativi del riavvio non riescono.</span><span class="sxs-lookup"><span data-stu-id="75acb-206">If the FCI still retains its WSFC quorum, then the WSFC service may respond by first attempting to restart the failed node and then failover if the restart attempts are unsuccessful.</span></span> <span data-ttu-id="75acb-207">Le impostazioni di riavvio e failover vengono configurate nello snap-in Gestione cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="75acb-207">The restart and failover settings are configured in the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="75acb-208">Per ulteriori informazioni su queste impostazioni, vedere [ \<Resource> proprietà: scheda criteri](https://technet.microsoft.com/library/cc725685.aspx).</span><span class="sxs-lookup"><span data-stu-id="75acb-208">For more information these settings, see [\<Resource> Properties: Policies Tab](https://technet.microsoft.com/library/cc725685.aspx).</span></span>  
  
 <span data-ttu-id="75acb-209">Per altre informazioni, vedere [Modalità quorum WSFC e configurazione del voto &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="75acb-209">For more information on maintaining quorum health, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="75acb-210">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="75acb-210">See Also</span></span>  
 [<span data-ttu-id="75acb-211">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="75acb-211">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)  
  
  
