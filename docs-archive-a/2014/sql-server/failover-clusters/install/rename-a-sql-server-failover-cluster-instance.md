---
title: Rinominare un'istanza del cluster di failover di SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], virtual servers
- renaming virtual servers
- virtual servers [SQL Server], failover clustering
- failover clustering [SQL Server], virtual servers
ms.assetid: 2a49d417-25fb-4760-8ae5-5871bfb1e6f3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 397e36931e446861db0fcb899cad30e8c7b1ffc2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87628295"
---
# <a name="rename-a-sql-server-failover-cluster-instance"></a><span data-ttu-id="0f791-102">Ridenominare un'istanza del cluster di failover di SQL Server</span><span class="sxs-lookup"><span data-stu-id="0f791-102">Rename a SQL Server Failover Cluster Instance</span></span>
  <span data-ttu-id="0f791-103">Se un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fa parte di un cluster di failover, il processo di ridenominazione del server virtuale è diverso da quello previsto per un'istanza autonoma.</span><span class="sxs-lookup"><span data-stu-id="0f791-103">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is part of a failover cluster, the process of renaming the virtual server differs from that of renaming a stand-alone instance.</span></span> <span data-ttu-id="0f791-104">Per altre informazioni, vedere [Rinominare un computer che ospita un'istanza autonoma di SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0f791-104">For more information, see [Rename a Computer that Hosts a Stand-Alone Instance of SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span></span>  
  
 <span data-ttu-id="0f791-105">Il nome del server virtuale è sempre uguale al nome di rete SQL, ovvero al nome di rete del server virtuale SQL.</span><span class="sxs-lookup"><span data-stu-id="0f791-105">The name of the virtual server is always the same as the name of the SQL Network Name (the SQL Virtual Server Network Name).</span></span> <span data-ttu-id="0f791-106">È possibile modificare il nome del server virtuale, ma non è possibile modificare il nome dell'istanza.</span><span class="sxs-lookup"><span data-stu-id="0f791-106">Although you can change the name of the virtual server, you cannot change the instance name.</span></span> <span data-ttu-id="0f791-107">Ad esempio, è possibile modificare il nome di un server virtuale denominato VS1\instance1 in un altro nome quale SQL35\instance1, ma la parte relativa al nome dell'istanza, in questo caso instance1, rimarrà invariata.</span><span class="sxs-lookup"><span data-stu-id="0f791-107">For example, you can change a virtual server named VS1\instance1 to some other name, such as SQL35\instance1, but the instance portion of the name, instance1, will remain unchanged.</span></span>  
  
 <span data-ttu-id="0f791-108">Prima di iniziare il processo di ridenominazione, tenere presenti le considerazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="0f791-108">Before you begin the renaming process, review the items below.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="0f791-109">non supporta la ridenominazione di server coinvolti nella replica, eccetto nel caso in cui venga utilizzata il log shipping con la replica.</span><span class="sxs-lookup"><span data-stu-id="0f791-109">does not support renaming servers involved in replication, except in the case of using log shipping with replication.</span></span> <span data-ttu-id="0f791-110">È possibile rinominare il server secondario nel log shipping in caso di perdita definitiva del server primario.</span><span class="sxs-lookup"><span data-stu-id="0f791-110">The secondary server in log shipping can be renamed if the primary server is permanently lost.</span></span> <span data-ttu-id="0f791-111">Per altre informazioni, vedere [Log shipping e replica &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="0f791-111">For more information, see [Log Shipping and Replication &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span></span>  
  
-   <span data-ttu-id="0f791-112">Se si rinomina un server virtuale configurato per l'utilizzo del mirroring del database, è necessario disabilitare il mirroring del database prima di eseguire la ridenominazione e quindi riabilitarlo con il nome del nuovo server virtuale.</span><span class="sxs-lookup"><span data-stu-id="0f791-112">When renaming a virtual server that is configured to use database mirroring, you must turn off database mirroring before the renaming operation, and then re-establish database mirroring with the new virtual server name.</span></span> <span data-ttu-id="0f791-113">I metadati per il mirroring del database non verranno aggiornati automaticamente in modo da riflettere il nome del nuovo server virtuale.</span><span class="sxs-lookup"><span data-stu-id="0f791-113">Metadata for database mirroring will not be updated automatically to reflect the new virtual server name.</span></span>  
  
### <a name="to-rename-a-virtual-server"></a><span data-ttu-id="0f791-114">Per rinominare un server virtuale</span><span class="sxs-lookup"><span data-stu-id="0f791-114">To rename a virtual server</span></span>  
  
1.  <span data-ttu-id="0f791-115">In Amministrazione cluster, impostare il nuovo nome come nome di rete SQL.</span><span class="sxs-lookup"><span data-stu-id="0f791-115">Using Cluster Administrator, change the SQL Network Name to the new name.</span></span>  
  
2.  <span data-ttu-id="0f791-116">Portare la risorsa del nome di rete offline.</span><span class="sxs-lookup"><span data-stu-id="0f791-116">Take the network name resource offline.</span></span> <span data-ttu-id="0f791-117">In questo modo, la risorsa di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e anche le altre risorse dipendenti saranno offline.</span><span class="sxs-lookup"><span data-stu-id="0f791-117">This takes the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource and other dependent resources offline as well.</span></span>  
  
3.  <span data-ttu-id="0f791-118">Portare di nuovo online la risorsa di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0f791-118">Bring the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource back online.</span></span>  
  
## <a name="verify-the-renaming-operation"></a><span data-ttu-id="0f791-119">Verifica dell'operazione di ridenominazione</span><span class="sxs-lookup"><span data-stu-id="0f791-119">Verify the Renaming Operation</span></span>  
 <span data-ttu-id="0f791-120">Dopo avere rinominato un server virtuale, tutte le connessioni che utilizzavano il nome precedente dovranno utilizzare il nuovo nome per la connessione.</span><span class="sxs-lookup"><span data-stu-id="0f791-120">After a virtual server has been renamed, any connections that used the old name must now connect using the new name.</span></span>  
  
 <span data-ttu-id="0f791-121">Per verificare che la ridenominazione sia stata completata, selezionare informazioni da `@@servername` o `sys.servers`.</span><span class="sxs-lookup"><span data-stu-id="0f791-121">To verify that the renaming operation has completed, select information from either `@@servername` or `sys.servers`.</span></span> <span data-ttu-id="0f791-122">La funzione `@@servername` restituirà il nome del nuovo server virtuale, il cui nome verrà visualizzato nella tabella `sys.servers`.</span><span class="sxs-lookup"><span data-stu-id="0f791-122">The `@@servername` function will return the new virtual server name, and the `sys.servers` table will show the new virtual server name.</span></span> <span data-ttu-id="0f791-123">Per verificare che il processo di failover funzioni correttamente con il nome del nuovo server virtuale, tentare di eseguire il failover della risorsa di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] negli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="0f791-123">To verify that the failover process is working correctly with the new name, the user should also try to fail the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource over to the other nodes.</span></span>  
  
 <span data-ttu-id="0f791-124">Per le connessioni da qualsiasi nodo del cluster, è possibile utilizzare quasi immediatamente il nuovo nome.</span><span class="sxs-lookup"><span data-stu-id="0f791-124">For connections from any node in the cluster, the new name can be used almost immediately.</span></span> <span data-ttu-id="0f791-125">Per le connessioni che utilizzano il nuovo nome da un computer client, non è tuttavia possibile connettersi al server fino a quando il nuovo nome non è visibile nel computer client.</span><span class="sxs-lookup"><span data-stu-id="0f791-125">However, for connections using the new name from a client computer, the new name cannot be used to connect to the server until the new name is visible to that client computer.</span></span> <span data-ttu-id="0f791-126">La quantità di tempo necessaria per la propagazione del nuovo nome nella rete può variare da pochi secondi ad alcuni minuti, a seconda della configurazione della rete. Il tempo necessario prima che il nome precedente non sia più visibile nella rete potrebbe essere più lungo.</span><span class="sxs-lookup"><span data-stu-id="0f791-126">The length of time required for the new name to be propagated across a network can be a few seconds, or as long as 3 to 5 minutes, depending on the network configuration; additional time may be required before the old virtual server name is no longer visible on the network.</span></span>  
  
 <span data-ttu-id="0f791-127">Per ridurre al minimo il ritardo nella propagazione di un'operazione di ridenominazione all'interno della rete, eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="0f791-127">To minimize network propagation delay of a virtual server renaming operation, use the following steps:</span></span>  
  
#### <a name="to-minimize-network-propagation-delay"></a><span data-ttu-id="0f791-128">Per ridurre al minimo il ritardo nella propagazione</span><span class="sxs-lookup"><span data-stu-id="0f791-128">To minimize network propagation delay</span></span>  
  
1.  <span data-ttu-id="0f791-129">Eseguire i comandi seguenti a un prompt dei comandi nel nodo server:</span><span class="sxs-lookup"><span data-stu-id="0f791-129">Issue the following commands from a command prompt on the server node:</span></span>  
  
    ```  
    ipconfig /flushdns  
    ipconfig /registerdns  
    nbtstat -RR  
    ```  
  
## <a name="additional-considerations-after-the-renaming-operation"></a><span data-ttu-id="0f791-130">Ulteriori considerazioni dopo la ridenominazione dell'operazione</span><span class="sxs-lookup"><span data-stu-id="0f791-130">Additional considerations after the Renaming Operation</span></span>  
 <span data-ttu-id="0f791-131">Dopo la ridenominazione del nome di rete del cluster di failover, è necessario verificare e applicare le istruzioni riportate di seguito per abilitare tutti gli scenari in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent e [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0f791-131">After we rename the network name of failover cluster we need to verify and perform the following instructions to enable all scenarios in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent and [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="0f791-132">\*\* [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] :\*\* Dopo aver modificato il nome di rete di un' [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] istanza del cluster di failover utilizzando lo strumento Amministrazione cluster di Windows, l'operazione di aggiornamento o disinstallazione futura potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="0f791-132">**[!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]:** After you change the network name of a [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] failover cluster instance using Windows Cluster Administrator tool, the future upgrade or uninstall operation might fail.</span></span> <span data-ttu-id="0f791-133">Per risolvere questo problema, aggiornare la voce del registro di sistema **clustername** seguendo le istruzioni nella sezione relativa alla risoluzione di [questo](https://go.microsoft.com/fwlink/?LinkId=244002) ( https://go.microsoft.com/fwlink/?LinkId=244002) .</span><span class="sxs-lookup"><span data-stu-id="0f791-133">To resolve this issue update the **ClusterName** registry entry following the instructions in the resolution section of [this](https://go.microsoft.com/fwlink/?LinkId=244002) (https://go.microsoft.com/fwlink/?LinkId=244002).</span></span>  
  
 <span data-ttu-id="0f791-134">\*\* [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Servizio Agent:\*\* verificare ed eseguire le azioni aggiuntive seguenti per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Servizio Agent:</span><span class="sxs-lookup"><span data-stu-id="0f791-134">**[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:** Verify and perform the below additional actions for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:</span></span>  
  
-   <span data-ttu-id="0f791-135">Correggere le impostazioni del Registro di sistema se SQL Agent è configurato per l'inoltro eventi.</span><span class="sxs-lookup"><span data-stu-id="0f791-135">Fix the registry settings if SQL Agent is configured for event forwarding.</span></span> <span data-ttu-id="0f791-136">Per altre informazioni, vedere [Designazione di un server di inoltro eventi &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="0f791-136">For more information, see [Designate an Events Forwarding Server &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="0f791-137">Correggere i nomi delle istanze del server master (MSX) e dei server di destinazione (TSX) quando si ridenominano computer o nomi di rete cluster.</span><span class="sxs-lookup"><span data-stu-id="0f791-137">Fix the master server (MSX) and target servers (TSX) instance names when machines / cluster network name is renamed.</span></span> <span data-ttu-id="0f791-138">Per altre informazioni, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="0f791-138">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="0f791-139">Escludere più server di destinazione da un server master</span><span class="sxs-lookup"><span data-stu-id="0f791-139">Defect Multiple Target Servers from a Master Server</span></span>](../../../ssms/agent/defect-multiple-target-servers-from-a-master-server.md)  
  
    -   [<span data-ttu-id="0f791-140">Creazione di un ambiente multiserver</span><span class="sxs-lookup"><span data-stu-id="0f791-140">Create a Multiserver Environment</span></span>](../../../ssms/agent/create-a-multiserver-environment.md)  
  
-   <span data-ttu-id="0f791-141">Riconfigurare il log shipping in modo da utilizzare il nome aggiornato del server nei log di backup e ripristino.</span><span class="sxs-lookup"><span data-stu-id="0f791-141">Reconfigure the Log Shipping so that updated server name is used to backup and restore logs.</span></span> <span data-ttu-id="0f791-142">Per altre informazioni, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="0f791-142">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="0f791-143">Configurare il log shipping &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0f791-143">Configure Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/configure-log-shipping-sql-server.md)  
  
    -   [<span data-ttu-id="0f791-144">Rimuovere il log shipping &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="0f791-144">Remove Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/remove-log-shipping-sql-server.md)  
  
-   <span data-ttu-id="0f791-145">Aggiornare i passaggi del processo che dipendono dal nome del server.</span><span class="sxs-lookup"><span data-stu-id="0f791-145">Update the Jobsteps that depend on server name.</span></span> <span data-ttu-id="0f791-146">Per altre informazioni, vedere [Gestire passaggi di processo](../../../ssms/agent/manage-job-steps.md).</span><span class="sxs-lookup"><span data-stu-id="0f791-146">For more information, see [Manage Job Steps](../../../ssms/agent/manage-job-steps.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f791-147">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="0f791-147">See Also</span></span>  
 [<span data-ttu-id="0f791-148">Rinominare un computer che ospita un'istanza autonoma di SQL Server</span><span class="sxs-lookup"><span data-stu-id="0f791-148">Rename a Computer that Hosts a Stand-Alone Instance of SQL Server</span></span>](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md)  
  
  
