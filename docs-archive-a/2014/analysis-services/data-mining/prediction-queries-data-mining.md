---
title: Query di stima (data mining) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e5e6686c-1360-480e-8c0d-8a56204fbed9
author: minewiskan
ms.author: owend
ms.openlocfilehash: 543055aaed5d8991ed2c913a6ae46575c774e216
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87718966"
---
# <a name="prediction-queries-data-mining"></a><span data-ttu-id="890f6-102">Prediction Queries (Data Mining)</span><span class="sxs-lookup"><span data-stu-id="890f6-102">Prediction Queries (Data Mining)</span></span>
  <span data-ttu-id="890f6-103">L'obiettivo di un progetto di data mining tipico consiste nell'utilizzare il modello di data mining per eseguire stime.</span><span class="sxs-lookup"><span data-stu-id="890f6-103">The goal of a typical data mining project is to use the mining model to make predictions.</span></span> <span data-ttu-id="890f6-104">Ad esempio, potrebbe essere necessario stimare la quantità di tempo di inattività prevista per un determinato cluster di server o generare un punteggio che indichi se è probabile che segmenti di clienti rispondano a una campagna pubblicitaria.</span><span class="sxs-lookup"><span data-stu-id="890f6-104">For example, you might want to predict the amount of expected downtime for a certain cluster of servers, or generate a score that indicates whether segments of customers are likely to respond to an advertising campaign.</span></span> <span data-ttu-id="890f6-105">Per effettuare tutte queste operazioni, è necessario creare una query di stima.</span><span class="sxs-lookup"><span data-stu-id="890f6-105">To do all these things, you would create a prediction query.</span></span>  
  
 <span data-ttu-id="890f6-106">A livello funzionale esistono diversi tipi di query di stima supportati in SQL Server, a seconda del tipo di input per la query:</span><span class="sxs-lookup"><span data-stu-id="890f6-106">Functionally, there are different types of prediction queries supported in SQL Server, depending on the type of inputs to the query:</span></span>  
  
|<span data-ttu-id="890f6-107">Tipo di query</span><span class="sxs-lookup"><span data-stu-id="890f6-107">Query Type</span></span>|<span data-ttu-id="890f6-108">Opzioni query</span><span class="sxs-lookup"><span data-stu-id="890f6-108">Query Options</span></span>|  
|----------------|-------------------|  
|<span data-ttu-id="890f6-109">Query di stima singleton</span><span class="sxs-lookup"><span data-stu-id="890f6-109">Singleton prediction queries</span></span>|<span data-ttu-id="890f6-110">Utilizzare una query singleton se si desidera eseguire una stima dei risultati per uno o più case nuovi.</span><span class="sxs-lookup"><span data-stu-id="890f6-110">Use a singleton query when you want to predict outcomes for a single new case, or multiple new cases.</span></span> <span data-ttu-id="890f6-111">I valori di input devono essere immessi direttamente nella query e quest'ultima viene eseguita come singola sessione.</span><span class="sxs-lookup"><span data-stu-id="890f6-111">You provide the input values directly in the query, and the query is executed as a single session.</span></span>|  
|<span data-ttu-id="890f6-112">Stime in batch</span><span class="sxs-lookup"><span data-stu-id="890f6-112">Batch predictions</span></span>|<span data-ttu-id="890f6-113">Utilizzare le stime in batch quando si dispone di dati esterni che si desidera inserire nel modello per utilizzarli come base per le stime.</span><span class="sxs-lookup"><span data-stu-id="890f6-113">Use batch predictions when you have external data that you want to feed into the model, to use as the basis for predictions.</span></span> <span data-ttu-id="890f6-114">Per eseguire stime per un intero set di dati, è necessario eseguire il mapping dei dati nell'origine esterna alle colonne del modello, quindi specificare il tipo di dati predittivi che si desidera restituire.</span><span class="sxs-lookup"><span data-stu-id="890f6-114">To make predictions for an entire set of data, you map the data in the external source to the columns in the model, and then specify the type of predictive data you want to output.</span></span><br /><br /> <span data-ttu-id="890f6-115">La query per l'intero set di dati viene eseguita in una singola sessione, rendendo questa opzione molto più efficiente rispetto all'invio di più query ripetute.</span><span class="sxs-lookup"><span data-stu-id="890f6-115">The query for the entire dataset is executed in a single session, making this option much more efficient than sending multiple repeated queries.</span></span>|  
|<span data-ttu-id="890f6-116">Stime basate su serie temporali</span><span class="sxs-lookup"><span data-stu-id="890f6-116">Time Series predictions</span></span>|<span data-ttu-id="890f6-117">Utilizzare una query di serie temporale se si desidera stimare un valore in diversi passaggi futuri.</span><span class="sxs-lookup"><span data-stu-id="890f6-117">Use a time series query when you want to predict a value over some number of future steps.</span></span> <span data-ttu-id="890f6-118">Tramite Data mining di SQL Server, nelle query di serie temporali è disponibile anche la funzionalità seguente:</span><span class="sxs-lookup"><span data-stu-id="890f6-118">SQL Server Data Mining also provides the following functionality in time series queries:</span></span><br /><br /> <span data-ttu-id="890f6-119">È possibile estendere un modello esistente aggiungendo nuovi dati come parte della query ed eseguire stime basate sulla serie composta.</span><span class="sxs-lookup"><span data-stu-id="890f6-119">You can extend an existing model by adding new data as part of the query, and make predictions based on the composite series.</span></span><br /><br /> <span data-ttu-id="890f6-120">È possibile applicare il modello esistente a una nuova serie di dati utilizzando l'opzione REPLACE_MODEL_CASES.</span><span class="sxs-lookup"><span data-stu-id="890f6-120">You can apply an existing model to a new data series by using the REPLACE_MODEL_CASES option.</span></span><br /><br /> <span data-ttu-id="890f6-121">È possibile eseguire una stima incrociata.</span><span class="sxs-lookup"><span data-stu-id="890f6-121">You can perform cross-prediction.</span></span>|  
  
 <span data-ttu-id="890f6-122">Nelle sezioni seguenti viene descritta la sintassi generale delle query di stima, i relativi tipi differenti nonché come utilizzare i risultati di tali query.</span><span class="sxs-lookup"><span data-stu-id="890f6-122">The following sections describe the general syntax of prediction queries, the different types of prediction queries, and how to work with the results of prediction queries.</span></span>  
  
 [<span data-ttu-id="890f6-123">Progettazione delle query di stima di base</span><span class="sxs-lookup"><span data-stu-id="890f6-123">Basic Prediction Query Design</span></span>](#bkmk_PredQuery)  
  
-   [<span data-ttu-id="890f6-124">Aggiunta di funzioni di stima</span><span class="sxs-lookup"><span data-stu-id="890f6-124">Adding Prediction Functions</span></span>](#bkmk_PredFunc)  
  
-   [<span data-ttu-id="890f6-125">Query singleton</span><span class="sxs-lookup"><span data-stu-id="890f6-125">Singleton Queries</span></span>](#bkmk_SingletonQuery)  
  
-   [<span data-ttu-id="890f6-126">Query di stima in batch</span><span class="sxs-lookup"><span data-stu-id="890f6-126">Batch Prediction Queries</span></span>](#bkmk_BatchQuery)  
  
 [<span data-ttu-id="890f6-127">Utilizzo dei risultati delle query</span><span class="sxs-lookup"><span data-stu-id="890f6-127">Working with the Results of Queries</span></span>](#bkmk_WorkResults)  
  
##  <a name="basic-prediction-query-design"></a><a name="bkmk_PredQuery"></a> <span data-ttu-id="890f6-128">Progetto di query di stima di base</span><span class="sxs-lookup"><span data-stu-id="890f6-128">Basic Prediction Query Design</span></span>  
 <span data-ttu-id="890f6-129">Quando si crea una stima, si forniscono in genere alcuni nuovi dati e si chiede al modello di generare una stima in base ai nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="890f6-129">When you create a prediction, you typically provide some piece of new data and ask the model to generate a prediction based on the new data.</span></span>  
  
-   <span data-ttu-id="890f6-130">In una query di stima in batch viene eseguito il mapping del modello a un'origine esterna di dati utilizzando un *PREDICTION JOIN*.</span><span class="sxs-lookup"><span data-stu-id="890f6-130">In a batch prediction query, you map the model to an external source of data by using a *prediction join*.</span></span>  
  
-   <span data-ttu-id="890f6-131">In una query di stima singleton digitare uno o più valori da utilizzare come input.</span><span class="sxs-lookup"><span data-stu-id="890f6-131">In a singleton prediction query, you type one or more values to use as inputs.</span></span> <span data-ttu-id="890f6-132">È possibile creare più stime utilizzando una query di stima singleton.</span><span class="sxs-lookup"><span data-stu-id="890f6-132">You can create multiple predictions using a singleton prediction query.</span></span> <span data-ttu-id="890f6-133">Tuttavia, se è necessario creare molte stime, le prestazioni sono migliori se si utilizza una query in batch.</span><span class="sxs-lookup"><span data-stu-id="890f6-133">However, if you need to create many predictions, performance is better when you use a batch query.</span></span>  
  
 <span data-ttu-id="890f6-134">Sia nelle query di stima singleton sia in quelle di stima in batch viene utilizzata la sintassi PREDICTION JOIN per definire i nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="890f6-134">Both singleton and batch prediction queries use the PREDICTION JOIN syntax to define the new data.</span></span> <span data-ttu-id="890f6-135">La differenza consiste nella modalità di specifica dell'input.</span><span class="sxs-lookup"><span data-stu-id="890f6-135">The difference is in how the input side of the prediction join is specified.</span></span>  
  
-   <span data-ttu-id="890f6-136">In una query di stima in batch, i dati provengono da un'origine dati esterna specificata tramite la sintassi OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="890f6-136">In a batch prediction query, the data comes from an external data source that is specified by using the OPENQUERY syntax.</span></span>  
  
-   <span data-ttu-id="890f6-137">In una query di stima singleton, i dati vengono forniti inline come parte della query.</span><span class="sxs-lookup"><span data-stu-id="890f6-137">In a singleton prediction query, the data is supplied inline as part of the query.</span></span>  
  
 <span data-ttu-id="890f6-138">Per i modelli Time Series, i dati di input non sono sempre richiesti; è possibile eseguire stime utilizzando semplicemente i dati già presenti nel modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-138">For time series models, input data is not always required; it is possible to make predictions using just the data already in the model.</span></span> <span data-ttu-id="890f6-139">Tuttavia, se si specificano nuovi dati di input, è necessario decidere se si utilizzeranno i nuovi dati per aggiornare ed estendere il modello o per sostituire la serie originale di dati utilizzata nel modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-139">However, if you do specify new input data, you must decide whether you will use the new data to update and extend the model, or to replace the original series of data that was used in the model.</span></span>  <span data-ttu-id="890f6-140">Per altre informazioni su queste opzioni, vedere [Time Series Model Query Examples](time-series-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="890f6-140">For more information about these options, see [Time Series Model Query Examples](time-series-model-query-examples.md).</span></span>  
  
###  <a name="adding-prediction-functions"></a><a name="bkmk_PredFunc"></a><span data-ttu-id="890f6-141">Aggiunta di funzioni di stima</span><span class="sxs-lookup"><span data-stu-id="890f6-141">Adding Prediction Functions</span></span>  
 <span data-ttu-id="890f6-142">Oltre a stimare un valore, è possibile personalizzare una query di stima per restituire vari tipi di informazioni correlate alla stima.</span><span class="sxs-lookup"><span data-stu-id="890f6-142">In addition to predicting a value, you can customize a prediction query to return various kinds of information that are related to the prediction.</span></span> <span data-ttu-id="890f6-143">Ad esempio, se tramite la stima viene creato un elenco di prodotti da consigliare a un cliente, è necessario restituire anche la probabilità per ogni stima, in modo che sia possibile classificarli e presentare all'utente solo i prodotti consigliati.</span><span class="sxs-lookup"><span data-stu-id="890f6-143">For example, if the prediction creates a list of products to recommend to a customer, you might also want to return the probability for each prediction, so that you can rank them and present only the top recommendations to the user.</span></span>  
  
 <span data-ttu-id="890f6-144">A tale scopo, aggiungere *funzioni di stima* alla query.</span><span class="sxs-lookup"><span data-stu-id="890f6-144">To do this, you add *prediction functions* to the query.</span></span> <span data-ttu-id="890f6-145">Ogni tipo di modello o di query supporta funzioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="890f6-145">Each model or query type supports specific functions.</span></span> <span data-ttu-id="890f6-146">Ad esempio, i modelli di clustering supportano funzioni di stima speciali che forniscono dettagli aggiuntivi sui cluster creati dal modello, mentre i modelli Time Series dispongono di funzioni che consentono di calcolare le differenze nel corso del tempo.</span><span class="sxs-lookup"><span data-stu-id="890f6-146">For example, clustering models support special prediction functions that provide extra detail about the clusters created by the model, whereas time series models have functions that calculate differences over time.</span></span> <span data-ttu-id="890f6-147">Sono inoltre disponibili funzioni di stima generali che funzionano con quasi tutti i tipi di modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-147">There are also general prediction functions that work with almost all model types.</span></span> <span data-ttu-id="890f6-148">Per un elenco delle funzioni di stima supportate nei diversi tipi di query, vedere l'argomento sulla guida di riferimento a DMX: [Funzioni di stima correlate &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="890f6-148">For a list of the prediction functions supported in different types of queries, see this topic the DMX reference:  [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span>  
  
###  <a name="creating-singleton-prediction-queries"></a><a name="bkmk_SingletonQuery"></a><span data-ttu-id="890f6-149">Creazione di query di stima singleton</span><span class="sxs-lookup"><span data-stu-id="890f6-149">Creating Singleton Prediction Queries</span></span>  
 <span data-ttu-id="890f6-150">Una query di stima singleton risulta utile se si desidera creare stime rapide in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="890f6-150">A singleton prediction query is useful when you want to create quick predictions in real time.</span></span> <span data-ttu-id="890f6-151">Uno scenario comune potrebbe essere l'acquisizione di informazioni da un cliente tramite, ad esempio, un form in un sito Web, e il successivo invio di tali dati come input a una query di stima singleton.</span><span class="sxs-lookup"><span data-stu-id="890f6-151">A common scenario might be that you have obtained information from a customer, perhaps by using a form on a Web site, and you want to submit that data as the input to a singleton prediction query.</span></span> <span data-ttu-id="890f6-152">Ad esempio, quando un cliente sceglie un prodotto da un elenco, è possibile utilizzare tale selezione come input per una query che consente di stimare i migliori prodotti da consigliare.</span><span class="sxs-lookup"><span data-stu-id="890f6-152">For example, when a customer chooses a product from a list, you could use that selection as the input to a query that predicts the best products to recommend.</span></span>  
  
 <span data-ttu-id="890f6-153">Per le query di stima singleton non è necessaria una tabella separata contenente l'input.</span><span class="sxs-lookup"><span data-stu-id="890f6-153">Singleton prediction queries do not require a separate table that contains input.</span></span> <span data-ttu-id="890f6-154">Al contrario, vengono fornite una o più righe di valori come input del modello e le stime vengono restituite in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="890f6-154">Instead, you provide one or multiple rows of values as input to the model, and the prediction or predictions are returned in real time.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="890f6-155">Nonostante il nome, le query di stima singleton non eseguono solo stime singole. è possibile generare più stime per ogni set di input.</span><span class="sxs-lookup"><span data-stu-id="890f6-155">Despite the name, singleton prediction queries do not just make single predictions-you can generate multiple predictions for each set of inputs.</span></span> <span data-ttu-id="890f6-156">Specificare più case di input creando un'istruzione SELECT per ogni case di input e combinandoli con l'operatore UNION.</span><span class="sxs-lookup"><span data-stu-id="890f6-156">You provide multiple input cases by creating a SELECT statement for each input case and combining them with the UNION operator.</span></span>  
  
 <span data-ttu-id="890f6-157">Quando si crea una query di stima singleton, è necessario fornire i nuovi dati al modello sotto forma di PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="890f6-157">When you create a singleton prediction query, you must provide the new data to the model in the form of a PREDICTION JOIN.</span></span> <span data-ttu-id="890f6-158">Questo significa che anche se non si esegue il mapping a una tabella effettiva, è necessario assicurarsi che i nuovi dati corrispondano alle colonne esistenti nel modello di data mining.</span><span class="sxs-lookup"><span data-stu-id="890f6-158">This means that even though you are not mapping to an actual table, you must make sure that the new data matches the existing columns in the mining model.</span></span> <span data-ttu-id="890f6-159">Se le nuove colonne di dati e i nuovi dati corrispondono in modo esatto, il mapping delle colonne verrà eseguito automaticamente in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="890f6-159">If the new data columns and the new data match exactly, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will map the columns for you.</span></span> <span data-ttu-id="890f6-160">Questa funzione è denominata *NATURAL PREDICTION JOIN*.</span><span class="sxs-lookup"><span data-stu-id="890f6-160">This is called a *NATURAL PREDICTION JOIN*.</span></span> <span data-ttu-id="890f6-161">Se tuttavia le colonne non corrispondono o se nei nuovi dati non è contenuto lo stesso tipo e la stessa quantità di dati presenti nel modello, è necessario specificare di quali colonne del modello eseguire il mapping ai nuovi dati oppure specificare i valori mancanti.</span><span class="sxs-lookup"><span data-stu-id="890f6-161">However, if the columns do not match, or if the new data does not contain the same kind and amount of data that is in the model, you must specify which columns in the model map to the new data, or specify the missing values.</span></span>  
  
###  <a name="batch-prediction-queries"></a><a name="bkmk_BatchQuery"></a> <span data-ttu-id="890f6-162">Query di stima in batch</span><span class="sxs-lookup"><span data-stu-id="890f6-162">Batch Prediction Queries</span></span>  
 <span data-ttu-id="890f6-163">Una query di stima in batch è utile quando si dispone di dati esterni che si desidera utilizzare per l'esecuzione di stime.</span><span class="sxs-lookup"><span data-stu-id="890f6-163">A batch prediction query is useful when you have external data that you want to use in making predictions.</span></span> <span data-ttu-id="890f6-164">Ad esempio, è probabile che sia stato compilato un modello che consente di suddividere in categorie i clienti in base all'attività online e alla cronologia di acquisto.</span><span class="sxs-lookup"><span data-stu-id="890f6-164">For example, you might have built a model that categorizes customers by their online activity and purchasing history.</span></span> <span data-ttu-id="890f6-165">È possibile applicare tale modello a un elenco di potenziali clienti appena acquisiti per creare proiezioni per le vendite o identificare destinazioni per le campagne proposte.</span><span class="sxs-lookup"><span data-stu-id="890f6-165">You could apply that model to a list of newly acquired leads, to create projections for sales, or to identify targets for proposed campaigns.</span></span>  
  
 <span data-ttu-id="890f6-166">Quando si esegue un PREDICTION JOIN, è necessario eseguire il mapping delle colonne del modello alle colonne nella nuova origine dati.</span><span class="sxs-lookup"><span data-stu-id="890f6-166">When you perform a prediction join, you must map the columns the model to the columns in the new data source.</span></span> <span data-ttu-id="890f6-167">Pertanto, nell'origine dati scelta per un input devono essere presenti dati simili ai dati del modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-167">Therefore, the data source that you choose for an input must data that is somewhat similar to the data in the model.</span></span> <span data-ttu-id="890f6-168">Le nuove informazioni non devono corrispondere esattamente e possono essere incomplete.</span><span class="sxs-lookup"><span data-stu-id="890f6-168">The new information does not have to match exactly, and can be incomplete.</span></span> <span data-ttu-id="890f6-169">Si supponga ad esempio che il training del modello sia stato eseguito utilizzando le informazioni sul reddito e sull'età, ma che nell'elenco clienti utilizzato per le stime siano disponibili le informazioni sull'età, ma non sul reddito.</span><span class="sxs-lookup"><span data-stu-id="890f6-169">For example, suppose the model was trained using information about income and age, but the customer list you are using for predictions has age but nothing about income.</span></span> <span data-ttu-id="890f6-170">In questo scenario è ancora possibile eseguire il mapping dei nuovi dati al modello e creare una stima per ogni cliente.</span><span class="sxs-lookup"><span data-stu-id="890f6-170">In this scenario, you could still map the new data to the model and create a prediction for each customer.</span></span> <span data-ttu-id="890f6-171">Tuttavia, se il reddito fosse un fattore di stima importante per il modello, la mancanza di informazioni complete influirebbe sulla qualità delle stime.</span><span class="sxs-lookup"><span data-stu-id="890f6-171">However, if income was an important predictor for the model, the lack of complete information would affect the quality of predictions.</span></span>  
  
 <span data-ttu-id="890f6-172">Per ottenere i migliori risultati, è necessario unire in join il numero massimo possibile di colonne corrispondenti tra i nuovi dati e il modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-172">To get the best results, you should join as many of the matching columns as possible between the new data and the model.</span></span> <span data-ttu-id="890f6-173">Tuttavia, la query riuscirà anche se non sono presenti corrispondenze.</span><span class="sxs-lookup"><span data-stu-id="890f6-173">However, the query will succeed even if there are no matches.</span></span> <span data-ttu-id="890f6-174">Se nessuna delle colonne è unita in join, tramite la query verrà restituita la stima marginale, che è l'equivalente dell'istruzione `SELECT <predictable-column> FROM <model>` senza una clausola PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="890f6-174">If no columns are joined, the query will return the marginal prediction, which is equivalent to the statement `SELECT <predictable-column> FROM <model>` without a PREDICTION JOIN clause.</span></span>  
  
 <span data-ttu-id="890f6-175">Dopo aver eseguito correttamente il mapping di tutte le colonne attinenti, viene eseguita la query e tramite [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] vengono eseguite le stime per ogni riga nei nuovi dati basati sugli schemi del modello.</span><span class="sxs-lookup"><span data-stu-id="890f6-175">After you have successfully mapped all relevant columns, you run the query, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] makes predictions for each row in the new data based on patterns in the model.</span></span> <span data-ttu-id="890f6-176">È possibile salvare i risultati in una nuova tabella nella vista origine dati contenente i dati esterni oppure copiare e incollare i dati in uso in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] o [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="890f6-176">You can save the results back to a new table in the data source view that contains the external data, or you can copy and paste the data is you are using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="890f6-177">Se si usa la finestra di progettazione in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], l'origine dati esterna deve innanzitutto essere definita come una vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="890f6-177">If you use the designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the external data source must first be defined as a data source view.</span></span>  
  
 <span data-ttu-id="890f6-178">Se si utilizza DMX per creare un prediction join, è possibile specificare l'origine dati esterna utilizzando il comando OPENQUERY, OPENROWSET o SHAPE.</span><span class="sxs-lookup"><span data-stu-id="890f6-178">If you use DMX to create a prediction join, you can specify the external data source by using the OPENQUERY, OPENROWSET, or SHAPE commands.</span></span> <span data-ttu-id="890f6-179">Il metodo predefinito di accesso ai dati nei modelli DMX è OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="890f6-179">The default data access method in the DMX templates is OPENQUERY.</span></span> <span data-ttu-id="890f6-180">Per informazioni su questi metodi, vedere [&#60;source data query&#62;](/sql/dmx/source-data-query).</span><span class="sxs-lookup"><span data-stu-id="890f6-180">For information about these methods, see [&#60;source data query&#62;](/sql/dmx/source-data-query).</span></span>  
  
###  <a name="predictions-in-time-series-mining-models"></a><a name="bkmk_TSQuery"></a> <span data-ttu-id="890f6-181">Stime nei modelli di data mining Time Series</span><span class="sxs-lookup"><span data-stu-id="890f6-181">Predictions in Time Series Mining Models</span></span>  
 <span data-ttu-id="890f6-182">I modelli Time Series sono diversi dagli altri tipi di modelli. È possibile utilizzare il modello originale per creare stime oppure fornire nuovi dati al modello per aggiornarlo e creare stime basate sulle tendenze recenti.</span><span class="sxs-lookup"><span data-stu-id="890f6-182">Time series models are different from other models types; you can either use the model as it is to create predictions, or you can provide new data to the model to update the model and create predictions based on recent trends.</span></span> <span data-ttu-id="890f6-183">Se si aggiungono nuovi dati, è possibile specificare la modalità di utilizzo dei nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="890f6-183">If you add new data, you can specify the way the new data should be used.</span></span>  
  
-   <span data-ttu-id="890f6-184">L'*estensione dei case del modello* prevede l'aggiunta di nuovi dati nella serie esistente di dati nel modello Time Series.</span><span class="sxs-lookup"><span data-stu-id="890f6-184">*Extending the model cases* means that you add the new data onto the existing series of data in the time series model.</span></span> <span data-ttu-id="890f6-185">Da questo momento in poi, le stime sono basate sulla nuova serie combinata.</span><span class="sxs-lookup"><span data-stu-id="890f6-185">Henceforth, predictions are based on the new, combined series.</span></span> <span data-ttu-id="890f6-186">Questa opzione è utile se si desidera aggiungere semplicemente alcuni punti dati a un modello esistente.</span><span class="sxs-lookup"><span data-stu-id="890f6-186">This option is good when you want to simply add a few data points to an existing model.</span></span>  
  
     <span data-ttu-id="890f6-187">Si supponga ad esempio che un modello Time Series esistente sia stato sottoposto a training sui dati delle vendite relativi all'anno precedente.</span><span class="sxs-lookup"><span data-stu-id="890f6-187">For example, suppose that you have an existing time series model that has been trained on the sales data from the previous year.</span></span> <span data-ttu-id="890f6-188">Dopo aver raccolto diversi mesi di nuovi dati delle vendite, si decide di aggiornare le previsioni di vendita per l'anno corrente.</span><span class="sxs-lookup"><span data-stu-id="890f6-188">After you have collected several months of new sales data, you decide to update your sales forecasts for the current year.</span></span> <span data-ttu-id="890f6-189">È possibile creare un PREDICTION JOIN che consente di aggiornare il modello aggiungendo nuovi dati e di estendere il modello per creare nuove stime.</span><span class="sxs-lookup"><span data-stu-id="890f6-189">You can create a prediction join that updates the model by adding new data and extends the model to make new predictions.</span></span>  
  
-   <span data-ttu-id="890f6-190">La*sostituzione dei case del modello* consente di mantenere il modello sottoposto a training, ma i case sottostanti vengono sostituiti con un nuovo set di dati del case.</span><span class="sxs-lookup"><span data-stu-id="890f6-190">*Replacing the model cases* means that you keep the trained model, but replace the underlying cases with a new set of case data.</span></span> <span data-ttu-id="890f6-191">Questa opzione è utile se si desidera mantenere la tendenza nel modello applicandola però a un set di dati diverso.</span><span class="sxs-lookup"><span data-stu-id="890f6-191">This option is useful when you want to keep the trend in the model, but apply it to a different set of data.</span></span>  
  
     <span data-ttu-id="890f6-192">Ad esempio, è possibile che sia stato eseguito il training del modello originale in un set di dati con volumi di vendite molto elevati. Quando si sostituiscono i dati sottostanti con una nuova serie, ad esempio di un archivio con volume di vendite inferiore, si mantiene la tendenza, ma le stime iniziano dai valori della serie di sostituzione.</span><span class="sxs-lookup"><span data-stu-id="890f6-192">For example, your original model might have been trained on a set of data with very high sales volumes; when you replace the underlying data with a new series (perhaps from a store with lower sales volume), you preserve the trend, but the predictions begin from the values in the replacement series.</span></span>  
  
 <span data-ttu-id="890f6-193">Indipendentemente dall'approccio adottato, il punto iniziale per le stime corrisponde sempre alla fine della serie originale.</span><span class="sxs-lookup"><span data-stu-id="890f6-193">Regardless of which approach you use, the starting point for predictions is always the end of the original series.</span></span>  
  
 <span data-ttu-id="890f6-194">Per altre informazioni sulla creazione di prediction join sui modelli Time Series, vedere [Time Series Model Query Examples](time-series-model-query-examples.md) o [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span><span class="sxs-lookup"><span data-stu-id="890f6-194">For more information about how to create prediction joins on time series models, see [Time Series Model Query Examples](time-series-model-query-examples.md) or [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span></span>  
  
##  <a name="working-with-the-results-of-a-prediction-query"></a><a name="bkmk_WorkResults"></a> <span data-ttu-id="890f6-195">Utilizzo dei risultati di una query di stima</span><span class="sxs-lookup"><span data-stu-id="890f6-195">Working with the Results of a Prediction Query</span></span>  
 <span data-ttu-id="890f6-196">Le opzioni per salvare i risultati di una query di stima di data mining sono diverse a seconda della modalità di creazione della query.</span><span class="sxs-lookup"><span data-stu-id="890f6-196">Your options for saving the results of a data mining prediction query are different depending on how you create the query.</span></span>  
  
-   <span data-ttu-id="890f6-197">Quando si compila una query utilizzando il generatore delle query di stima in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] o [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], è possibile salvare i risultati di una query di stima in un'origine dati [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] esistente.</span><span class="sxs-lookup"><span data-stu-id="890f6-197">When you build a query using Prediction Query Builder in either [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can save the results of a prediction query to an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source.</span></span> <span data-ttu-id="890f6-198">Per altre informazioni, vedere [Visualizzare e salvare i risultati di una query di stima](view-and-save-the-results-of-a-prediction-query.md).</span><span class="sxs-lookup"><span data-stu-id="890f6-198">For more information, see [View and Save the Results of a Prediction Query](view-and-save-the-results-of-a-prediction-query.md).</span></span>  
  
-   <span data-ttu-id="890f6-199">Quando si creano query di stima utilizzando DMX nel riquadro query di [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], è possibile utilizzare le opzioni di output della query per salvare i risultati in un file o nel riquadro dei risultati della query come testo o in una griglia.</span><span class="sxs-lookup"><span data-stu-id="890f6-199">When you create prediction queries using DMX in the Query pane of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can use the query output options to save the results to a file, or to the Query Results pane as text or in a grid.</span></span> <span data-ttu-id="890f6-200">Per altre informazioni, vedere [Editor di query e di testo &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="890f6-200">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="890f6-201">Quando si esegue una query di stima utilizzando i componenti di Integration Services, le attività consentono di scrivere i risultati in un database tramite una gestione connessione ADO.NET o OLE DB disponibile.</span><span class="sxs-lookup"><span data-stu-id="890f6-201">When you run a prediction query using the Integration Services components, the tasks provides the ability to write the results to a database by using an available ADO.NET connection manager or OLEDB connection manager.</span></span> <span data-ttu-id="890f6-202">Per altre informazioni, vedere [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span><span class="sxs-lookup"><span data-stu-id="890f6-202">For more information, see [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span></span>  
  
 <span data-ttu-id="890f6-203">È importante comprendere che i risultati di una query di stima non sono come i risultati di una query su un database relazionale che restituisce sempre una sola riga di valori correlati.</span><span class="sxs-lookup"><span data-stu-id="890f6-203">It is important to understand that the results of a prediction query are not like the results of a query on a relational database, which always returns a single row of related values.</span></span> <span data-ttu-id="890f6-204">Ogni funzione di stima DMX aggiunta alla query restituisce un set di righe specifico.</span><span class="sxs-lookup"><span data-stu-id="890f6-204">Each DMX prediction function that you add to a query returns its own rowset.</span></span> <span data-ttu-id="890f6-205">Pertanto, quando si esegue una stima su un singolo case, il risultato può essere un valore stimato insieme a diverse colonne di tabelle nidificate contenenti ulteriori dettagli.</span><span class="sxs-lookup"><span data-stu-id="890f6-205">Therefore, when you make a prediction on a single case, the result might be a predicted value together with several columns of nested tables containing additional detail.</span></span>  
  
 <span data-ttu-id="890f6-206">Se si combinano più funzioni in un'unica query, i risultati restituiti vengono combinati in un set di righe gerarchico.</span><span class="sxs-lookup"><span data-stu-id="890f6-206">If you combine multiple functions in one query, the return results are combined as a hierarchical rowset.</span></span> <span data-ttu-id="890f6-207">Si supponga ad esempio di utilizzare un modello Time Series per stimare valori futuri per l'importo e la quantità delle vendite tramite una query come questa istruzione DMX:</span><span class="sxs-lookup"><span data-stu-id="890f6-207">For example, say you use a time series model to predict future values for sales amount and sales quantity, using a query such as this DMX statement:</span></span>  
  
```  
SELECT  
  PredictTimeSeries([Forecasting].[Amount]) as [PredictedAmount]  
, PredictTimeSeries([Forecasting].[Quantity]) as [PredictedQty]  
FROM  
  [Forecasting]  
  
```  
  
 <span data-ttu-id="890f6-208">I risultati di questa query sono dati da due colonne, una per ogni serie stimata, dove ogni riga contiene una tabella nidificata con i valori stimati:</span><span class="sxs-lookup"><span data-stu-id="890f6-208">The results of this query are two columns, one for each predicted series, where each row contains a nested table with the predicted values:</span></span>  
  
 <span data-ttu-id="890f6-209">**PredictedAmount**</span><span class="sxs-lookup"><span data-stu-id="890f6-209">**PredictedAmount**</span></span>  
  
|<span data-ttu-id="890f6-210">$TIME</span><span class="sxs-lookup"><span data-stu-id="890f6-210">$TIME</span></span>|<span data-ttu-id="890f6-211">Amount</span><span class="sxs-lookup"><span data-stu-id="890f6-211">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="890f6-212">201101</span><span class="sxs-lookup"><span data-stu-id="890f6-212">201101</span></span>|<span data-ttu-id="890f6-213">172067.11</span><span class="sxs-lookup"><span data-stu-id="890f6-213">172067.11</span></span>|  
  
|<span data-ttu-id="890f6-214">$TIME</span><span class="sxs-lookup"><span data-stu-id="890f6-214">$TIME</span></span>|<span data-ttu-id="890f6-215">Amount</span><span class="sxs-lookup"><span data-stu-id="890f6-215">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="890f6-216">201102</span><span class="sxs-lookup"><span data-stu-id="890f6-216">201102</span></span>|<span data-ttu-id="890f6-217">363390.68</span><span class="sxs-lookup"><span data-stu-id="890f6-217">363390.68</span></span>|  
  
 <span data-ttu-id="890f6-218">**PredictedQty**</span><span class="sxs-lookup"><span data-stu-id="890f6-218">**PredictedQty**</span></span>  
  
|<span data-ttu-id="890f6-219">$TIME</span><span class="sxs-lookup"><span data-stu-id="890f6-219">$TIME</span></span>|<span data-ttu-id="890f6-220">Quantità</span><span class="sxs-lookup"><span data-stu-id="890f6-220">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="890f6-221">201101</span><span class="sxs-lookup"><span data-stu-id="890f6-221">201101</span></span>|<span data-ttu-id="890f6-222">77</span><span class="sxs-lookup"><span data-stu-id="890f6-222">77</span></span>|  
  
|<span data-ttu-id="890f6-223">$TIME</span><span class="sxs-lookup"><span data-stu-id="890f6-223">$TIME</span></span>|<span data-ttu-id="890f6-224">Quantità</span><span class="sxs-lookup"><span data-stu-id="890f6-224">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="890f6-225">201102</span><span class="sxs-lookup"><span data-stu-id="890f6-225">201102</span></span>|<span data-ttu-id="890f6-226">260</span><span class="sxs-lookup"><span data-stu-id="890f6-226">260</span></span>|  
  
 <span data-ttu-id="890f6-227">Se il provider non è in grado di gestire i set di righe gerarchici, è possibile fare in modo che i risultati vengano restituiti in formato flat utilizzando la parola chiave FLATTEN nella query di stima.</span><span class="sxs-lookup"><span data-stu-id="890f6-227">If your provider cannot handle hierarchical rowsets, you can flatten the results by using the FLATTEN keyword in the prediction query.</span></span> <span data-ttu-id="890f6-228">Per altre informazioni, inclusi esempi di set di righe bidimensionali, vedere [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span><span class="sxs-lookup"><span data-stu-id="890f6-228">For more information, including examples of flattened rowsets, see [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="890f6-229">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="890f6-229">See Also</span></span>  
 <span data-ttu-id="890f6-230">[Query sul contenuto &#40;&#41;di data mining](content-queries-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="890f6-230">[Content Queries &#40;Data Mining&#41;](content-queries-data-mining.md) </span></span>  
 [<span data-ttu-id="890f6-231">Query di definizione dei dati &#40;Data mining&#41;</span><span class="sxs-lookup"><span data-stu-id="890f6-231">Data Definition Queries &#40;Data Mining&#41;</span></span>](data-definition-queries-data-mining.md)  
  
  
