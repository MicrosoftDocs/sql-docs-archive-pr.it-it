---
title: Tabelle nidificate (Analysis Services-Data mining) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- data mining [Analysis Services], nested tables
- tables [Analysis Services], nested
- nested tables
ms.assetid: cb192aa2-597e-4d4f-ac34-3556d037fed4
author: minewiskan
ms.author: owend
ms.openlocfilehash: 78b1022751ae6d381b86512f45f7232bebe7fcd0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87712643"
---
# <a name="nested-tables-analysis-services---data-mining"></a><span data-ttu-id="baa36-102">Tabelle nidificate (Analysis Services - Data mining)</span><span class="sxs-lookup"><span data-stu-id="baa36-102">Nested Tables (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="baa36-103">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] i dati devono essere inseriti in un algoritmo di data mining come una serie di case contenuti in una tabella del case.</span><span class="sxs-lookup"><span data-stu-id="baa36-103">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], data must be fed to a data mining algorithm as a series of cases that are contained within a case table.</span></span> <span data-ttu-id="baa36-104">Non è tuttavia possibile descrivere tutti i case con una singola riga di dati.</span><span class="sxs-lookup"><span data-stu-id="baa36-104">However, not all cases can be described by a single row of data.</span></span> <span data-ttu-id="baa36-105">È possibile ad esempio che un case derivi da due tabelle, di cui una contiene informazioni sui clienti, l'altra gli acquisti dei clienti.</span><span class="sxs-lookup"><span data-stu-id="baa36-105">For example, a case might be derived from two tables: one table that contains customer information, and another table that contains customer purchases.</span></span> <span data-ttu-id="baa36-106">Poiché a un singolo cliente nella tabella delle informazioni possono essere associati più elementi della tabella degli acquisti, potrebbe risultare difficile descrivere i dati utilizzando una sola riga.</span><span class="sxs-lookup"><span data-stu-id="baa36-106">A single customer in the customer information table might have multiple items in the customer purchases table, which makes it difficult to describe the data by using a single row.</span></span> [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]<span data-ttu-id="baa36-107">fornisce un metodo univoco per la gestione di questi casi, tramite *tabelle nidificate*.</span><span class="sxs-lookup"><span data-stu-id="baa36-107">provides a unique method for handling these cases, by using *nested tables*.</span></span> <span data-ttu-id="baa36-108">Nella figura seguente viene illustrato il concetto di tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="baa36-108">The concept of a nested table is demonstrated in the following illustration.</span></span>  
  
 <span data-ttu-id="baa36-109">![Due tabelle combinate tramite una tabella nidificata](../media/nested-tables.gif "Due tabelle combinate tramite una tabella nidificata")</span><span class="sxs-lookup"><span data-stu-id="baa36-109">![Two tables combined by using a nested table](../media/nested-tables.gif "Two tables combined by using a nested table")</span></span>  
  
 <span data-ttu-id="baa36-110">Nella figura la prima tabella, che corrisponde alla tabella padre, contiene informazioni sui clienti e associa un identificatore univoco a ogni cliente.</span><span class="sxs-lookup"><span data-stu-id="baa36-110">In this diagram, the first table, which is the parent table, contains information about customers, and associates a unique identifier for each customer.</span></span> <span data-ttu-id="baa36-111">La seconda tabella, ovvero la tabella figlio, contiene gli acquisti di ciascun cliente.</span><span class="sxs-lookup"><span data-stu-id="baa36-111">The second table, the child table, contains the purchases for each customer.</span></span> <span data-ttu-id="baa36-112">Tali acquisti sono correlati alla tabella padre tramite un identificatore univoco riportato nella colonna **CustomerKey** .</span><span class="sxs-lookup"><span data-stu-id="baa36-112">The purchases in the child table are related to the parent table by the unique identifier, the **CustomerKey** column.</span></span> <span data-ttu-id="baa36-113">La terza tabella della figura illustra la combinazione delle prime due tabelle.</span><span class="sxs-lookup"><span data-stu-id="baa36-113">The third table in the diagram shows the two tables combined.</span></span>  
  
 <span data-ttu-id="baa36-114">Nella tabella del case una tabella annidata è rappresentata da una colonna speciale con tipo di dati **TABLE**.</span><span class="sxs-lookup"><span data-stu-id="baa36-114">A nested table is represented in the case table as a special column that has a data type of **TABLE**.</span></span> <span data-ttu-id="baa36-115">Per le righe del case questo tipo di colonna include le righe selezionate dalla tabella figlio relative alla tabella padre.</span><span class="sxs-lookup"><span data-stu-id="baa36-115">For any particular case row, this kind of column contains selected rows from the child table that pertain to the parent table.</span></span>  
  
 <span data-ttu-id="baa36-116">I dati di una tabella nidificata possono essere utilizzati per la stima, per l'input o per entrambi.</span><span class="sxs-lookup"><span data-stu-id="baa36-116">The data in a nested table can be used for prediction or for input, or for both.</span></span> <span data-ttu-id="baa36-117">Ad esempio, è possibile che un modello contenga due colonne di tabella nidificata: una potrebbe contenere un elenco dei prodotti acquistati dal cliente, mentre l'altra informazioni sugli hobby e gli interessi del cliente, ottenuti eventualmente da un sondaggio.</span><span class="sxs-lookup"><span data-stu-id="baa36-117">For example, you might have two nested table columns in a model: one nested table column might contain a list of the products that a customer has purchased, while the other nested table column contains information about the customer's hobbies and interests, possibly obtained from a survey.</span></span> <span data-ttu-id="baa36-118">In questo scenario, è possibile utilizzare gli hobby e gli interessi del cliente come input per l'analisi del comportamento di acquisto e la stima degli acquisti probabili.</span><span class="sxs-lookup"><span data-stu-id="baa36-118">In this scenario, you could use the customer's hobbies and interests as an input for analyzing purchasing behavior, and predicting likely purchases.</span></span>  
  
## <a name="joining-case-tables-and-nested-tables"></a><span data-ttu-id="baa36-119">Unione in join di tabelle del case e tabelle nidificate</span><span class="sxs-lookup"><span data-stu-id="baa36-119">Joining Case Tables and Nested Tables</span></span>  
 <span data-ttu-id="baa36-120">Per creare una tabella nidificata, è necessario che le due tabelle di origine includano una relazione definita, in modo da poter correlare gli elementi di una tabella all'altra tabella.</span><span class="sxs-lookup"><span data-stu-id="baa36-120">In order to create a nested table, the two source tables must contain a defined relationship so that the items in one table can be related to the other table.</span></span> <span data-ttu-id="baa36-121">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]è possibile definire questa relazione nella vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="baa36-121">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can define this relationship in the data source view.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="baa36-122">Il campo **CustomerKey** è la chiave relazionale usata per collegare la tabella del case e la tabella annidata all'interno della definizione della vista origine dati e per stabilire la relazione delle colonne all'interno della struttura di data mining.</span><span class="sxs-lookup"><span data-stu-id="baa36-122">The **CustomerKey** field is the relational key that is used to link the case table and the nested table within the data source view definition, and to establish the relationship of the columns within the mining structure.</span></span> <span data-ttu-id="baa36-123">Non è tuttavia necessario in genere utilizzare questa chiave relazionale nei modelli di data mining compilati in base a tale struttura.</span><span class="sxs-lookup"><span data-stu-id="baa36-123">However, typically you should not use this relational key in mining models built on that structure.</span></span> <span data-ttu-id="baa36-124">Solitamente è preferibile omettere la colonna chiave relazionale dal modello di data mining se serve solo per unire in join le tabelle e non fornisce informazioni interessanti per l'analisi.</span><span class="sxs-lookup"><span data-stu-id="baa36-124">Usually it is best to omit the relational key column from the mining model if it serves only to join the tables and does not provide information that is interesting for analysis.</span></span>  
  
 <span data-ttu-id="baa36-125">È possibile creare tabelle nidificate a livello di programmazione tramite DMX (Data Mining Extensions) o AMO (Analysis Management Objects) oppure tramite la Creazione guidata modello di data mining e Progettazione modelli di data mining in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="baa36-125">You can create nested tables programmatically by either using Data Mining Extensions (DMX) or Analysis Management Objects (AMO), or you can use the Data Mining Wizard and Data Mining Designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
## <a name="using-nested-table-columns-in-a-mining-model"></a><span data-ttu-id="baa36-126">Utilizzo di colonne di tabelle nidificate in un modello di data mining</span><span class="sxs-lookup"><span data-stu-id="baa36-126">Using Nested Table Columns in a Mining Model</span></span>  
 <span data-ttu-id="baa36-127">Nella tabella del case la chiave è spesso un ID cliente, un nome di prodotto o una data in una serie, ovvero dati che identificano in modo univoco una riga della tabella.</span><span class="sxs-lookup"><span data-stu-id="baa36-127">In the case table, the key is often a customer ID, a product name, or date in a series: data that uniquely identifies a row in the table.</span></span> <span data-ttu-id="baa36-128">.</span><span class="sxs-lookup"><span data-stu-id="baa36-128">.</span></span> <span data-ttu-id="baa36-129">Nelle tabelle nidificate, tuttavia, la chiave non è in genere la chiave relazionale (o chiave esterna) ma piuttosto la colonna che rappresenta l'attributo da modellare.</span><span class="sxs-lookup"><span data-stu-id="baa36-129">However, in nested tables, the key is typically not the relational key (or foreign key) but rather the column that represents the attribute that you are modeling.</span></span>  
  
 <span data-ttu-id="baa36-130">Ad esempio, se la tabella del case contiene ordini e la tabella nidificata contiene gli elementi di tali ordini, non è in genere necessario modellare la relazione tra gli elementi archiviati nella tabella nidificata tra più ordini, che sono archiviati nella tabella del case.</span><span class="sxs-lookup"><span data-stu-id="baa36-130">For example, if the case table contains orders, and the nested table contains items in the order, you would be interested in modeling the relationship between items stored in the nested table across multiple orders, which are stored in the case table.</span></span> <span data-ttu-id="baa36-131">Pertanto, anche se la tabella annidata **Items** è unita in join alla tabella del case **Orders** tramite la chiave relazionale **OrderID**, non è necessario usare **OrderID** come chiave della tabella relazionale.</span><span class="sxs-lookup"><span data-stu-id="baa36-131">Therefore, although the **Items** nested table is joined to the **Orders** case table by the relational key **OrderID**, you should not use **OrderID** as the nested table key.</span></span> <span data-ttu-id="baa36-132">Al contrario, è possibile selezionare la colonna **Items** come chiave della tabella annidata, poiché tale colonna contiene i dati che si desidera modellare.</span><span class="sxs-lookup"><span data-stu-id="baa36-132">Instead, you would select the **Items** column as the nested table key, because that column contains the data that you want to model.</span></span> <span data-ttu-id="baa36-133">Nella maggior parte dei casi, è possibile ignorare in modo sicuro **OrderID** nel modello di data mining, poiché la relazione tra la tabella del case e la tabella annidata è già stata stabilita dalla definizione della vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="baa36-133">In most cases, you can safely ignore **OrderID** in the mining model, because the relationship between the case table and the nested table has already been established by the data source view definition.</span></span>  
  
 <span data-ttu-id="baa36-134">Quando si sceglie una colonna da utilizzare come chiave della tabella nidificata, è necessario assicurarsi che i valori di tale colonna siano univoci per ogni case.</span><span class="sxs-lookup"><span data-stu-id="baa36-134">When you choose a column to use as the nested table key, you must ensure that the values in that column are unique for each case.</span></span> <span data-ttu-id="baa36-135">Se ad esempio la tabella del case rappresenta i clienti e la tabella nidificata rappresenta gli elementi acquistati, è necessario assicurarsi che nessun elemento sia elencato più di una volta per ogni cliente.</span><span class="sxs-lookup"><span data-stu-id="baa36-135">For example, if the case table represents customers and the nested table represents items purchased by the customer, you must ensure that no item is listed more than one time per customer.</span></span> <span data-ttu-id="baa36-136">Se un cliente ha acquistato lo stesso elemento più di una volta, è possibile creare una vista diversa con una colonna che aggrega il conteggio degli acquisti per ogni prodotto univoco.</span><span class="sxs-lookup"><span data-stu-id="baa36-136">If a customer has purchased the same item more than one time, you might want to create a different view that has a column that aggregates the count of purchases for each unique product.</span></span>  
  
 <span data-ttu-id="baa36-137">La decisione in merito alla gestione dei valori duplicati di una tabella nidificata dipende dal modello di data mining creato e dal problema aziendale da risolvere.</span><span class="sxs-lookup"><span data-stu-id="baa36-137">How you decide to handle duplicate values in a nested table depends on the mining model that you are creating and the business problem that you are solving.</span></span> <span data-ttu-id="baa36-138">In alcuni scenari può non essere importante rilevare il numero di volte in cui un cliente ha acquistato un particolare prodotto, in quanto è necessario controllare solo l'esistenza di almeno un acquisto.</span><span class="sxs-lookup"><span data-stu-id="baa36-138">In some scenarios you might not care how many times a customer has purchased a particular product, but want to check for the existence of at least one purchase.</span></span> <span data-ttu-id="baa36-139">In altri scenari la quantità e la sequenza degli acquisti possono invece essere molto importanti.</span><span class="sxs-lookup"><span data-stu-id="baa36-139">In other scenarios, the quantity and sequence of purchases might be very important.</span></span>  
  
 <span data-ttu-id="baa36-140">Se l'ordine degli elementi è importante, può essere necessaria una colonna aggiuntiva che indica la sequenza.</span><span class="sxs-lookup"><span data-stu-id="baa36-140">If the order of items is important, you might need an additional column that indicates the sequence.</span></span> <span data-ttu-id="baa36-141">Se si usa l'algoritmo Sequence Clustering per creare un modello, è necessario scegliere una colonna *Key Sequence* aggiuntiva per rappresentare l'ordine degli elementi.</span><span class="sxs-lookup"><span data-stu-id="baa36-141">When you use the sequence clustering algorithm to create a model, you must choose an additional *key sequence* column to represent the order of the items.</span></span> <span data-ttu-id="baa36-142">Tale colonna è un tipo speciale di chiave nidificata che viene utilizzata solo nei modelli Sequence Clustering e richiede un tipo univoco di dati numerici.</span><span class="sxs-lookup"><span data-stu-id="baa36-142">The key sequence column is a special kind of nested key that is used only in sequence clustering models, and requires a unique numeric data type.</span></span> <span data-ttu-id="baa36-143">Ad esempio, numeri interi e date possono essere utilizzati come colonna Key Sequence, ma tutti i valori della sequenza devono essere univoci.</span><span class="sxs-lookup"><span data-stu-id="baa36-143">For example, integers and dates can both be used as a key sequence column, but all sequence values must be unique.</span></span> <span data-ttu-id="baa36-144">Oltre a questa colonna, un modello di Sequence Clustering include anche una chiave di tabella nidificata che rappresenta l'attributo da modellare, ad esempio i prodotti acquistati.</span><span class="sxs-lookup"><span data-stu-id="baa36-144">In addition to the key sequence column, a sequence clustering model also has a nested table key that represents the attribute that is being modeled, such as the products that have been purchased.</span></span>  
  
### <a name="using-non-key-nested-columns-from-a-nested-table"></a><span data-ttu-id="baa36-145">Utilizzo di colonne nidificate non chiave di una tabella nidificata</span><span class="sxs-lookup"><span data-stu-id="baa36-145">Using Non-Key Nested Columns from a Nested Table</span></span>  
 <span data-ttu-id="baa36-146">Dopo avere definito il join tra la tabella del case e la tabella nidificata e una volta scelta una colonna che contiene attributi interessanti e univoci da utilizzare come chiave della tabella nidificata, è possibile includere altre colonne della tabella nidificata da utilizzare come input per il modello.</span><span class="sxs-lookup"><span data-stu-id="baa36-146">After you have defined the join between the case table and the nested table, and you have chosen a column that contains interesting and unique attributes to use as the nested table key, you can include other columns from the nested table to use as input to the model.</span></span> <span data-ttu-id="baa36-147">Tutte le colonne della tabella nidificata possono essere utilizzate per l'input, per la stima e per l'input o solo per la stima.</span><span class="sxs-lookup"><span data-stu-id="baa36-147">All columns from the nested table can be used for input, prediction and input, or for prediction only.</span></span>  
  
 <span data-ttu-id="baa36-148">Ad esempio, se la tabella annidata contiene le colonne **Product**, **ProductQuantity**e **ProductPrice**, è possibile scegliere **Product** come chiave della tabella annidata, ma aggiungere **ProductQuantity** alla struttura di data mining da usare come input.</span><span class="sxs-lookup"><span data-stu-id="baa36-148">For example, if the nested table contains the columns **Product**, **ProductQuantity**, and **ProductPrice**, you might choose **Product** as the nested table key, but add **ProductQuantity** to the mining structure to use as input.</span></span>  
  
## <a name="filtering-nested-table-data"></a><span data-ttu-id="baa36-149">Filtro di dati della tabella nidificata</span><span class="sxs-lookup"><span data-stu-id="baa36-149">Filtering Nested Table Data</span></span>  
 <span data-ttu-id="baa36-150">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]è possibile creare filtri sui dati da utilizzare per il training o il test del modello di data mining.</span><span class="sxs-lookup"><span data-stu-id="baa36-150">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can create filters on the data that is used to train or test a data mining model.</span></span> <span data-ttu-id="baa36-151">Un filtro può essere utilizzato per influire sulla composizione del modello oppure per sottoporlo a test in un subset di case.</span><span class="sxs-lookup"><span data-stu-id="baa36-151">A filer can be used to affect the composition of the model, or to test the model on a subset of cases.</span></span> <span data-ttu-id="baa36-152">I filtri possono anche essere applicati alle tabelle nidificate.</span><span class="sxs-lookup"><span data-stu-id="baa36-152">Filters can also be applied to nested tables.</span></span> <span data-ttu-id="baa36-153">Sono tuttavia presenti limitazioni per la sintassi che è possibile utilizzare con le tabelle nidificate.</span><span class="sxs-lookup"><span data-stu-id="baa36-153">However, there are limitations on the syntax that can be used with nested tables.</span></span>  
  
 <span data-ttu-id="baa36-154">Spesso, quando si applica un filtro a una tabella nidificata, si verifica l'esistenza o la non esistenza di un attributo.</span><span class="sxs-lookup"><span data-stu-id="baa36-154">Often when you apply a filter to a nested table you are testing for the existence or nonexistence of an attribute.</span></span> <span data-ttu-id="baa36-155">Ad esempio, è possibile applicare un filtro che limita i case utilizzati nel modello solo a quelli con un valore specificato nella tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="baa36-155">For example, you can apply a filter that restricts the cases used in the model to only those cases that have a specified value in the nested table.</span></span> <span data-ttu-id="baa36-156">Oppure è possibile limitare i case utilizzati nel modello ai clienti che non hanno acquistato un determinato elemento.</span><span class="sxs-lookup"><span data-stu-id="baa36-156">Or, you could restrict the cases used in the model to customers who have not purchased a particular item.</span></span>  
  
 <span data-ttu-id="baa36-157">Quando si creano filtri in una tabella nidificata, è anche possibile utilizzare operatori come maggiore di o minore di.</span><span class="sxs-lookup"><span data-stu-id="baa36-157">When you create filters on a nested table, you can also use operators such as greater than or less than.</span></span> <span data-ttu-id="baa36-158">È ad esempio possibile limitare i case usati nel modello ai clienti che hanno acquistato almeno n unità del prodotto di destinazione.</span><span class="sxs-lookup"><span data-stu-id="baa36-158">For example, you could restrict the cases used in the model to customers who had purchased at least n units of the target product.</span></span> <span data-ttu-id="baa36-159">La possibilità di filtrare gli attributi della tabella nidificata offre una notevole flessibilità per la personalizzazione dei modelli.</span><span class="sxs-lookup"><span data-stu-id="baa36-159">The ability to filter on nested table attributes provides great flexibility for customizing models.</span></span>  
  
 <span data-ttu-id="baa36-160">Per altre informazioni su come creare e usare i filtri dei modelli, vedere [Filtri per i modelli di data mining &#40;Analysis Services - Data mining&#41;](mining-models-analysis-services-data-mining.md).</span><span class="sxs-lookup"><span data-stu-id="baa36-160">For more information about how to create and use model filters, see [Filters for Mining Models &#40;Analysis Services - Data Mining&#41;](mining-models-analysis-services-data-mining.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="baa36-161">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="baa36-161">See Also</span></span>  
 <span data-ttu-id="baa36-162">[Algoritmi di data mining &#40;Analysis Services-&#41;di data mining](data-mining-algorithms-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="baa36-162">[Data Mining Algorithms &#40;Analysis Services - Data Mining&#41;](data-mining-algorithms-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="baa36-163">Strutture di data mining &#40;Analysis Services - Data mining&#41;</span><span class="sxs-lookup"><span data-stu-id="baa36-163">Mining Structures &#40;Analysis Services - Data Mining&#41;</span></span>](mining-structures-analysis-services-data-mining.md)  
  
  
