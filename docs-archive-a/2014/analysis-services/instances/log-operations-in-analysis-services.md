---
title: Operazioni di log in Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: aa1db060-95dc-4198-8aeb-cffdda44b140
author: minewiskan
ms.author: owend
ms.openlocfilehash: 95d0e41576e449ab10b243ef49cbe283940afe0b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87635252"
---
# <a name="log-operations-in-analysis-services"></a><span data-ttu-id="f62af-102">Registrare le operazioni in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f62af-102">Log operations in Analysis Services</span></span>
  <span data-ttu-id="f62af-103">Un'istanza di Analysis Services registrerà notifiche, errori e avvisi del server nel file msmdsrv. log, uno per ogni istanza installata.</span><span class="sxs-lookup"><span data-stu-id="f62af-103">An Analysis Services instance will log server notifications, errors, and warnings to the msmdsrv.log file - one for each instance you install.</span></span> <span data-ttu-id="f62af-104">Gli amministratori fanno riferimento a questo log per informazioni sulla routine nonché per eventi straordinari.</span><span class="sxs-lookup"><span data-stu-id="f62af-104">Administrators refer to this log for insights into routine and extraordinary events alike.</span></span> <span data-ttu-id="f62af-105">Nelle versioni recenti la registrazione è stata migliorata per includere altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="f62af-105">In recent releases, logging has been enhanced to include more information.</span></span> <span data-ttu-id="f62af-106">I record di log includono ora informazioni sull'edizione e la versione del prodotto, nonché eventi del processore, della memoria, della connettività e di blocco.</span><span class="sxs-lookup"><span data-stu-id="f62af-106">Log records now include product version and edition information, as well as processor, memory, connectivity, and blocking events.</span></span> <span data-ttu-id="f62af-107">È possibile consultare l'elenco completo delle modifiche in [Miglioramenti della registrazione](https://support.microsoft.com/kb/2965035).</span><span class="sxs-lookup"><span data-stu-id="f62af-107">You can review the entire change list at [Logging improvements](https://support.microsoft.com/kb/2965035).</span></span>  
  
 <span data-ttu-id="f62af-108">Oltre alla funzionalità di registrazione predefinita, molti amministratori e sviluppatori usano anche gli strumenti forniti dalla community di Analysis Services, ad esempio **ASTrace**, per raccogliere i dati relativi alle operazioni del server.</span><span class="sxs-lookup"><span data-stu-id="f62af-108">Besides the built-in logging feature, many administrators and developers also use tools provided by the Analysis Services community to collect data about server operations, such as **ASTrace**.</span></span> <span data-ttu-id="f62af-109">Vedere [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) (Esempi della community di Microsoft SQL Server: Analysis Services) per i collegamenti per il download.</span><span class="sxs-lookup"><span data-stu-id="f62af-109">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/) for the download links.</span></span>  
  
 <span data-ttu-id="f62af-110">In questo argomento sono incluse le sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="f62af-110">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="f62af-111">Posizione e tipi di log</span><span class="sxs-lookup"><span data-stu-id="f62af-111">Location and types of logs</span></span>](#bkmk_location)  
  
-   [<span data-ttu-id="f62af-112">Informazioni generali sulle impostazioni di configurazione dei file di log</span><span class="sxs-lookup"><span data-stu-id="f62af-112">General information on log file configuration settings</span></span>](#bkmk_general)  
  
-   [<span data-ttu-id="f62af-113">File di log del servizio MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="f62af-113">MSMDSRV service log file</span></span>](#bkmk_msmdsrv)  
  
-   [<span data-ttu-id="f62af-114">Log di query</span><span class="sxs-lookup"><span data-stu-id="f62af-114">Query logs</span></span>](#bkmk_querylog)  
  
-   [<span data-ttu-id="f62af-115">File di minidump (con estensione mdmp)</span><span class="sxs-lookup"><span data-stu-id="f62af-115">Mini dump (.mdmp) files</span></span>](#bkmk_mdmp)  
  
-   [<span data-ttu-id="f62af-116">Suggerimenti e procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="f62af-116">Tips and best practices</span></span>](#bkmk_tips)  
  
> [!NOTE]  
>  <span data-ttu-id="f62af-117">Per informazioni sulla registrazione, potrebbe essere utile interessarsi alle operazioni di traccia che mostrano i percorsi di elaborazione e di esecuzione delle query.</span><span class="sxs-lookup"><span data-stu-id="f62af-117">If you're looking for information about logging, you might also be interested in tracing operations that show processing and query execution paths.</span></span> <span data-ttu-id="f62af-118">Oggetti di traccia per analisi ad hoc e prolungate (come il controllo dell'accesso ai cubi) e consigli sull'uso ottimale dell'Utilità Traccia eventi, di SQL Server Profiler e di xEvents sono disponibili accedendo ai collegamenti forniti nella pagina: [Monitorare un'istanza di Analysis Services](monitor-an-analysis-services-instance.md).</span><span class="sxs-lookup"><span data-stu-id="f62af-118">Trace objects for ad hoc and sustained tracing (such as auditing cube access) ─ as well as recommendations on how to best use Flight Recorder, SQL Server Profiler, and xEvents ─ can be found through the links on this page: [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md).</span></span>  
  
##  <a name="location-and-types-of-logs"></a><a name="bkmk_location"></a><span data-ttu-id="f62af-119">Posizione e tipi di log</span><span class="sxs-lookup"><span data-stu-id="f62af-119">Location and types of logs</span></span>  
 <span data-ttu-id="f62af-120">Analysis Services fornisce i log descritti di seguito.</span><span class="sxs-lookup"><span data-stu-id="f62af-120">Analysis Services provides the logs described below.</span></span>  
  
|<span data-ttu-id="f62af-121">Posizione o nome del file</span><span class="sxs-lookup"><span data-stu-id="f62af-121">File name or Location</span></span>|<span data-ttu-id="f62af-122">Type</span><span class="sxs-lookup"><span data-stu-id="f62af-122">Type</span></span>|<span data-ttu-id="f62af-123">Utilizzo</span><span class="sxs-lookup"><span data-stu-id="f62af-123">Used for</span></span>|<span data-ttu-id="f62af-124">Attivato per impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="f62af-124">On by default</span></span>|  
|---------------------------|----------|--------------|-------------------|  
|<span data-ttu-id="f62af-125">Msmdsrv.log</span><span class="sxs-lookup"><span data-stu-id="f62af-125">Msmdsrv.log</span></span>|<span data-ttu-id="f62af-126">Log degli errori</span><span class="sxs-lookup"><span data-stu-id="f62af-126">Error log</span></span>|<span data-ttu-id="f62af-127">Monitoraggio della routine e risoluzione dei problemi di base</span><span class="sxs-lookup"><span data-stu-id="f62af-127">Routine monitoring and basic troubleshooting</span></span>|<span data-ttu-id="f62af-128">Sì</span><span class="sxs-lookup"><span data-stu-id="f62af-128">Yes</span></span>|  
|<span data-ttu-id="f62af-129">Tabella OlapQueryLog in un database relazionale</span><span class="sxs-lookup"><span data-stu-id="f62af-129">OlapQueryLog table in a relational database</span></span>|<span data-ttu-id="f62af-130">Log di query</span><span class="sxs-lookup"><span data-stu-id="f62af-130">Query log</span></span>|<span data-ttu-id="f62af-131">Raccolta di input per l'Ottimizzazione guidata basata sulle statistiche di utilizzo</span><span class="sxs-lookup"><span data-stu-id="f62af-131">Collect inputs for the Usage Optimization Wizard</span></span>|<span data-ttu-id="f62af-132">No</span><span class="sxs-lookup"><span data-stu-id="f62af-132">No</span></span>|  
|<span data-ttu-id="f62af-133">\<guid>File file sqldmp. mdmp</span><span class="sxs-lookup"><span data-stu-id="f62af-133">SQLDmp\<guid>.mdmp files</span></span>|<span data-ttu-id="f62af-134">Arresti anomali ed eccezioni</span><span class="sxs-lookup"><span data-stu-id="f62af-134">Crashes and exceptions</span></span>|<span data-ttu-id="f62af-135">Risoluzione dei problemi completa</span><span class="sxs-lookup"><span data-stu-id="f62af-135">Deep troubleshooting</span></span>|<span data-ttu-id="f62af-136">No</span><span class="sxs-lookup"><span data-stu-id="f62af-136">No</span></span>|  
  
 <span data-ttu-id="f62af-137">Per altre risorse di informazioni non incluse nel presente argomento, è consigliabile consultare il collegamento seguente: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)(Suggerimenti per la raccolta dati iniziale forniti dal supporto tecnico Microsoft).</span><span class="sxs-lookup"><span data-stu-id="f62af-137">We highly recommend the following link for additional information resources not covered in this topic: [Initial data collection tips from Microsoft Support](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx).</span></span>  
  
##  <a name="general-information-on-log-file-configuration-settings"></a><a name="bkmk_general"></a><span data-ttu-id="f62af-138">Informazioni generali sulle impostazioni di configurazione del file di log</span><span class="sxs-lookup"><span data-stu-id="f62af-138">General information on log file configuration settings</span></span>  
 <span data-ttu-id="f62af-139">È possibile trovare le sezioni per ogni log nel file di configurazione del server msmdsrv.ini, che si trova nella cartella \Programmi\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config.</span><span class="sxs-lookup"><span data-stu-id="f62af-139">You can find sections for each log in the msmdsrv.ini server configuration file, located in the \Program Files\Microsoft SQL Server\MSAS12.MSSQLSERVER\OLAP\Config folder.</span></span> <span data-ttu-id="f62af-140">Per istruzioni su come modificare il file, vedere [configurare le proprietà del server in Analysis Services](../server-properties/server-properties-in-analysis-services.md) .</span><span class="sxs-lookup"><span data-stu-id="f62af-140">See [Configure Server Properties in Analysis Services](../server-properties/server-properties-in-analysis-services.md) for instructions on editing the file.</span></span>  
  
 <span data-ttu-id="f62af-141">Dove possibile, è consigliabile impostare le proprietà di registrazione nella pagina delle proprietà del server di Management Studio.</span><span class="sxs-lookup"><span data-stu-id="f62af-141">Where possible, we suggest that you set logging properties in the server properties page of Management Studio.</span></span> <span data-ttu-id="f62af-142">Anche se in alcuni casi sarà necessario modificare il file msmdsrv.ini direttamente per configurare le impostazioni che non sono visibili negli strumenti di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="f62af-142">Although in some cases, you must edit the msmdsrv.ini file directly to configure settings that are not visible in the administrative tools.</span></span>  
  
 <span data-ttu-id="f62af-143">![Sezione del file di configurazione con le impostazioni di log](../media/ssas-logfilesettings.png "Sezione del file di configurazione con le impostazioni di log")</span><span class="sxs-lookup"><span data-stu-id="f62af-143">![Section of the config file showing log settings](../media/ssas-logfilesettings.png "Section of the config file showing log settings")</span></span>  
  
##  <a name="msmdsrv-service-log-file"></a><a name="bkmk_msmdsrv"></a> <span data-ttu-id="f62af-144">File di log del servizio MSMDSRV</span><span class="sxs-lookup"><span data-stu-id="f62af-144">MSMDSRV service log file</span></span>  
 <span data-ttu-id="f62af-145">Analysis Services registra le operazioni del server nel file msmdsrv.log, uno per ogni istanza, che si trova in \Programmi\Microsoft SQL Server\\<istanza\>\Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="f62af-145">Analysis Services logs server operations to the msmdsrv.log file, one per instance, located at \program files\Microsoft SQL Server\\<instance\>\Olap\Log.</span></span>  
  
 <span data-ttu-id="f62af-146">Questo file di log viene svuotato a ogni riavvio del servizio.</span><span class="sxs-lookup"><span data-stu-id="f62af-146">This log file is emptied at each service restart.</span></span> <span data-ttu-id="f62af-147">Nelle versioni precedenti, gli amministratori a volte riavviavano il servizio al solo scopo di svuotare il file di log prima che diventasse talmente grande da non poter essere usato.</span><span class="sxs-lookup"><span data-stu-id="f62af-147">In previous releases, administrators would sometimes restart the service for the sole purpose of flushing the log file before it could grow so large as to become unusable.</span></span> <span data-ttu-id="f62af-148">Ciò non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="f62af-148">This is no longer necessary.</span></span> <span data-ttu-id="f62af-149">Le impostazioni di configurazione introdotte in SQL Server 2012 SP2 e versioni successive consentono di controllare le dimensioni del file di log e la relativa cronologia:</span><span class="sxs-lookup"><span data-stu-id="f62af-149">Configuration settings, introduced in SQL Server 2012 SP2 and later, give you control over the size of the log file and its history:</span></span>  
  
-   <span data-ttu-id="f62af-150">`MaxFileSizeMB`Specifica le dimensioni massime del file di log in megabyte.</span><span class="sxs-lookup"><span data-stu-id="f62af-150">`MaxFileSizeMB` specifies a maximum log file size in megabytes.</span></span> <span data-ttu-id="f62af-151">L'impostazione predefinita è 256.</span><span class="sxs-lookup"><span data-stu-id="f62af-151">The default is 256.</span></span> <span data-ttu-id="f62af-152">Un valore di sostituzione valido deve essere un numero intero positivo.</span><span class="sxs-lookup"><span data-stu-id="f62af-152">A valid replacement value must be a positive integer.</span></span> <span data-ttu-id="f62af-153">Quando viene raggiunto il valore `MaxFileSizeMB`, Analysis Services rinomina il file corrente come file msmdsrv{timestamp corrente}.log e inizia un nuovo file msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="f62af-153">When `MaxFileSizeMB` is reached, Analysis Services renames the current file as msmdsrv{current timestamp}.log file, and starts a new msmdsrv.log file.</span></span>  
  
-   <span data-ttu-id="f62af-154">`MaxNumberFiles`Specifica la conservazione dei file di log meno recenti.</span><span class="sxs-lookup"><span data-stu-id="f62af-154">`MaxNumberFiles` specifies retention of older log files.</span></span> <span data-ttu-id="f62af-155">Il valore predefinito è 0 (disabilitata).</span><span class="sxs-lookup"><span data-stu-id="f62af-155">The default is 0 (disabled).</span></span> <span data-ttu-id="f62af-156">È possibile modificare tale valore con un numero intero positivo per mantenere le versioni del file di log.</span><span class="sxs-lookup"><span data-stu-id="f62af-156">You can change it to a positive integer to keep versions of the log file.</span></span> <span data-ttu-id="f62af-157">Quando viene raggiunto il valore `MaxNumberFiles`, Analysis Services elimina il file che contiene nel nome il timestamp meno recente.</span><span class="sxs-lookup"><span data-stu-id="f62af-157">When `MaxNumberFiles` is reached, Analysis Services deletes the file with the oldest timestamp in its name.</span></span>  
  
 <span data-ttu-id="f62af-158">Per usare queste impostazioni, eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="f62af-158">To use these settings, do the following:</span></span>  
  
1.  <span data-ttu-id="f62af-159">Aprire msmdsrv.ini nel Blocco note.</span><span class="sxs-lookup"><span data-stu-id="f62af-159">Open msmdsrv.ini in NotePad.</span></span>  
  
2.  <span data-ttu-id="f62af-160">Copiare le due righe seguenti:</span><span class="sxs-lookup"><span data-stu-id="f62af-160">Copy the following two lines:</span></span>  
  
    ```  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    ```  
  
3.  <span data-ttu-id="f62af-161">Incollare le due righe nella sezione Log di msmdsrv.ini, sotto il nome del file msmdsrv.log.</span><span class="sxs-lookup"><span data-stu-id="f62af-161">Paste the two lines into the Log section of msmdsrv.ini, below the filename for msmdsrv.log.</span></span> <span data-ttu-id="f62af-162">Entrambe le impostazioni devono essere aggiunte manualmente.</span><span class="sxs-lookup"><span data-stu-id="f62af-162">Both settings must be added manually.</span></span> <span data-ttu-id="f62af-163">Non ci sono segnaposti nel file msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="f62af-163">There are no placeholders for them in the msmdsrv.ini file.</span></span>  
  
     <span data-ttu-id="f62af-164">Il file di configurazione modificato sarà simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="f62af-164">The changed configuration file should look like the following:</span></span>  
  
    ```  
    <Log>  
    <File>msmdsrv.log</File>  
    <MaxFileSizeMB>256</MaxFileSizeMB>  
    <MaxNumberOfLogFiles>5</MaxNumberOfLogFiles>  
    <FileBufferSize>0</FileBufferSize>  
  
    ```  
  
4.  <span data-ttu-id="f62af-165">Modificare i valori se quelli forniti sono diversi da quelli desiderati.</span><span class="sxs-lookup"><span data-stu-id="f62af-165">Edit the values if those provided differ from what you want.</span></span>  
  
5.  <span data-ttu-id="f62af-166">Salvare il file.</span><span class="sxs-lookup"><span data-stu-id="f62af-166">Save the file.</span></span>  
  
6.  <span data-ttu-id="f62af-167">Riavviare il servizio.</span><span class="sxs-lookup"><span data-stu-id="f62af-167">Restart the service.</span></span>  
  
##  <a name="query-logs"></a><a name="bkmk_querylog"></a><span data-ttu-id="f62af-168">Log di query</span><span class="sxs-lookup"><span data-stu-id="f62af-168">Query logs</span></span>  
 <span data-ttu-id="f62af-169">Log di query è in realtà un nome improprio, perché l'attività di query MDX o DAX degli utenti non viene registrata.</span><span class="sxs-lookup"><span data-stu-id="f62af-169">The query log is a bit of a misnomer in that it does not log the MDX or DAX query activity of your users.</span></span> <span data-ttu-id="f62af-170">Raccoglie invece i dati sulle query generate da Analysis Services, che verranno usati successivamente come input di dati nell'Ottimizzazione guidata basata sulle statistiche di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="f62af-170">Instead, it collects data about queries generated by Analysis Services, which is subsequently used as data input in the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="f62af-171">I dati raccolti nel log di query non vengono usati per l'analisi diretta.</span><span class="sxs-lookup"><span data-stu-id="f62af-171">The data collected in the query log is not intended for direct analysis.</span></span> <span data-ttu-id="f62af-172">In particolare, i set di dati vengono descritti in matrici di bit, con uno zero o un uno che indica le parti del set di dati incluso nella query.</span><span class="sxs-lookup"><span data-stu-id="f62af-172">Specifically, the datasets are described in bit arrays, with a zero or a one indicating the parts of dataset is included in the query.</span></span> <span data-ttu-id="f62af-173">Questi dati saranno usati per la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="f62af-173">Again, this data is meant for the wizard.</span></span>  
  
 <span data-ttu-id="f62af-174">Per il monitoraggio delle query e la risoluzione dei problemi, molti sviluppatori e amministratori usano uno strumento della community, **ASTrace**, per monitorare le query.</span><span class="sxs-lookup"><span data-stu-id="f62af-174">For query monitoring and troubleshooting, many developers and administrators use a community tool, **ASTrace**, to monitor queries.</span></span> <span data-ttu-id="f62af-175">È anche possibile usare SQL Server Profiler, XEvent o una traccia di Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="f62af-175">You can also use SQL Server Profiler, xEvents, or an Analysis Services trace.</span></span> <span data-ttu-id="f62af-176">Per i collegamenti correlati alle tracce, vedere [Monitorare un'istanza di Analysis Services](monitor-an-analysis-services-instance.md) .</span><span class="sxs-lookup"><span data-stu-id="f62af-176">See [Monitor an Analysis Services Instance](monitor-an-analysis-services-instance.md) for tracing-related links.</span></span>  
  
 <span data-ttu-id="f62af-177">Quando è necessario usare il log di query?</span><span class="sxs-lookup"><span data-stu-id="f62af-177">When should you use the query log?</span></span> <span data-ttu-id="f62af-178">È consigliabile abilitare il log di query come parte del processo di ottimizzazione delle prestazioni di esecuzione delle query che include l'Ottimizzazione guidata basata sulle statistiche di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="f62af-178">We recommend enabling the query log as part of a query performance tuning exercise that includes the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="f62af-179">Il log di query non esiste fino a quando non viene abilitata la funzionalità, non vengono create le strutture di dati per supportarla e non vengono impostate le proprietà usate da Analysis Services per individuare e popolare il log.</span><span class="sxs-lookup"><span data-stu-id="f62af-179">The query log does not exist until you enable the feature, create the data structures to support it, and set properties used by Analysis Services to locate and populate the log.</span></span>  
  
 <span data-ttu-id="f62af-180">Per abilitare il file di log, attenersi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="f62af-180">To enable the query log, follow these steps:</span></span>  
  
1.  <span data-ttu-id="f62af-181">Creare un database relazionale di SQL Server per archiviare il log di query.</span><span class="sxs-lookup"><span data-stu-id="f62af-181">Create a SQL Server relational database to store the query log.</span></span>  
  
2.  <span data-ttu-id="f62af-182">Concedere all'account del servizio di Analysis Services le autorizzazioni sufficienti per il database.</span><span class="sxs-lookup"><span data-stu-id="f62af-182">Grant the Analysis Services service account sufficient permissions on the database.</span></span> <span data-ttu-id="f62af-183">L'account richiede le autorizzazioni per creare una tabella, scrivere nella tabella e leggere dalla tabella.</span><span class="sxs-lookup"><span data-stu-id="f62af-183">The account needs permission to create a table, write to the table, and read from the table.</span></span>  
  
3.  <span data-ttu-id="f62af-184">In SQL Server Management Studio fare clic con il pulsante destro del mouse su **Analysis Services**  |  **proprietà**  |  **generale**, impostare **CreateQueryLogTable** su true.</span><span class="sxs-lookup"><span data-stu-id="f62af-184">In SQL Server Management Studio, right-click **Analysis Services** | **Properties** | **General**, set **CreateQueryLogTable** to true.</span></span>  
  
4.  <span data-ttu-id="f62af-185">Facoltativamente, modificare **QueryLogSampling** o **QueryLogTableName** se si vuole eseguire il campionamento delle query con una frequenza diversa o usare un nome diverso per la tabella.</span><span class="sxs-lookup"><span data-stu-id="f62af-185">Optionally, change **QueryLogSampling** or **QueryLogTableName** if you want to sample queries at a different rate, or use a different name for the table.</span></span>  
  
 <span data-ttu-id="f62af-186">La tabella del log di query non verrà creata finché non viene eseguito un numero di query MDX sufficiente per soddisfare i requisiti di campionamento.</span><span class="sxs-lookup"><span data-stu-id="f62af-186">The query log table will not be created until you have run enough MDX queries to meet the sampling requirements.</span></span> <span data-ttu-id="f62af-187">Se ad esempio si mantiene il valore predefinito di 10, è necessario eseguire almeno 10 query prima della creazione della tabella.</span><span class="sxs-lookup"><span data-stu-id="f62af-187">For example, if you keep the default value of 10, you must run at least 10 queries before the table will be created.</span></span>  
  
 <span data-ttu-id="f62af-188">Le impostazioni del log di query sono a livello di server.</span><span class="sxs-lookup"><span data-stu-id="f62af-188">Query log settings are server wide.</span></span> <span data-ttu-id="f62af-189">Le impostazioni specificate verranno usate da tutti i database in esecuzione in questo server.</span><span class="sxs-lookup"><span data-stu-id="f62af-189">The settings you specify will be used by all databases running on this server.</span></span>  
  
 <span data-ttu-id="f62af-190">![Impostazioni del log di query in Management Studio](../media/ssas-querylogsettings.png "Impostazioni del log di query in Management Studio")</span><span class="sxs-lookup"><span data-stu-id="f62af-190">![Query log settings in Management Studio](../media/ssas-querylogsettings.png "Query log settings in Management Studio")</span></span>  
  
 <span data-ttu-id="f62af-191">Dopo aver specificato le impostazioni di configurazione, eseguire una query MDX più volte.</span><span class="sxs-lookup"><span data-stu-id="f62af-191">After the configuration settings are specified, run an MDX query multiple times.</span></span> <span data-ttu-id="f62af-192">Se il campionamento è impostato su 10, eseguire la query 11 volte. Verificare che la tabella sia stata creata.</span><span class="sxs-lookup"><span data-stu-id="f62af-192">If sampling is set to 10, run the query 11 times.Verify the table is created.</span></span> <span data-ttu-id="f62af-193">In Management Studio connettersi al motore di database relazionale, aprire la cartella del database, aprire la cartella **Tabelle** e verificare che **OlapQueryLog** sia presente.</span><span class="sxs-lookup"><span data-stu-id="f62af-193">In Management Studio, connect to the relational database engine, open the database folder, open the **Tables** folder, and verify that **OlapQueryLog** exists.</span></span> <span data-ttu-id="f62af-194">Se la tabella non viene visualizzata immediatamente, aggiornare la cartella per visualizzare le eventuali modifiche al contenuto.</span><span class="sxs-lookup"><span data-stu-id="f62af-194">If you do not immediately see the table, refresh the folder to pick up any changes to its contents.</span></span>  
  
 <span data-ttu-id="f62af-195">Consentire al log di query di raccogliere dati sufficienti per eseguire l'Ottimizzazione guidata basata sulle statistiche di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="f62af-195">Allow the query log to accumulate sufficient data for the Usage Based Optimization Wizard.</span></span> <span data-ttu-id="f62af-196">Se i volumi di query sono ciclici, acquisire un volume di traffico sufficiente da avere un set di dati rappresentativo.</span><span class="sxs-lookup"><span data-stu-id="f62af-196">If query volumes are cyclical, capture enough traffic to have a representative set of data.</span></span> <span data-ttu-id="f62af-197">Per istruzioni su come eseguire la procedura guidata, vedere [Ottimizzazione guidata basata sulle statistiche di utilizzo](https://msdn.microsoft.com/library/ms189706.aspx) .</span><span class="sxs-lookup"><span data-stu-id="f62af-197">See [Usage Based Optimization Wizard](https://msdn.microsoft.com/library/ms189706.aspx) for instructions on how to run the wizard.</span></span>  
  
 <span data-ttu-id="f62af-198">Per altre informazioni sulla configurazione del log di query, vedere [Configuring the Analysis Services Query Log](https://technet.microsoft.com/library/Cc917676) (Configurazione del log di query di Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="f62af-198">See [Configuring the Analysis Services Query Log](https://technet.microsoft.com/library/Cc917676) to learn more about query log configuration.</span></span> <span data-ttu-id="f62af-199">Anche se il documento non è recente, la configurazione del log di query non è stata modificata nelle versioni recenti e le informazioni in esso contenute sono ancora valide.</span><span class="sxs-lookup"><span data-stu-id="f62af-199">Although the paper is quite old, query log configuration has not changed in recent releases and the information it contains still applies.</span></span>  
  
##  <a name="mini-dump-mdmp-files"></a><a name="bkmk_mdmp"></a><span data-ttu-id="f62af-200">File di minidump (con estensione MDMP)</span><span class="sxs-lookup"><span data-stu-id="f62af-200">Mini dump (.mdmp) files</span></span>  
 <span data-ttu-id="f62af-201">I file di dump acquisiscono i dati usati per l'analisi di eventi straordinari.</span><span class="sxs-lookup"><span data-stu-id="f62af-201">Dump files capture data used for analyzing extraordinary events.</span></span> <span data-ttu-id="f62af-202">Analysis Services genera automaticamente dei minidump (con estensione mdmp) in risposta a un arresto anomalo del server, a un'eccezione e ad alcuni errori di configurazione.</span><span class="sxs-lookup"><span data-stu-id="f62af-202">Analysis Services automatically generates mini dumps (.mdmp) in response to a server crash, exception, and some configuration errors.</span></span> <span data-ttu-id="f62af-203">La funzionalità è abilitata ma non invia automaticamente le segnalazioni di arresti anomali.</span><span class="sxs-lookup"><span data-stu-id="f62af-203">The feature is enabled, but does not send crash reports automatically.</span></span>  
  
 <span data-ttu-id="f62af-204">Le segnalazioni di arresti anomali vengono configurate tramite la sezione Eccezioni nel file msmdsrv.ini.</span><span class="sxs-lookup"><span data-stu-id="f62af-204">Crash reports are configured through the Exception section in the Msmdsrv.ini file.</span></span> <span data-ttu-id="f62af-205">Queste impostazioni controllano la generazione dei file di dump di memoria.</span><span class="sxs-lookup"><span data-stu-id="f62af-205">These settings control memory dump file generation.</span></span> <span data-ttu-id="f62af-206">Il frammento di codice seguente mostra i valori predefiniti:</span><span class="sxs-lookup"><span data-stu-id="f62af-206">The following snippet shows the default values:</span></span>  
  
```  
<Exception>  
<CreateAndSendCrashReports>1</CreateAndSendCrashReports>  
<CrashReportsFolder/>  
<SQLDumperFlagsOn>0x0</SQLDumperFlagsOn>  
<SQLDumperFlagsOff>0x0</SQLDumperFlagsOff>  
<MiniDumpFlagsOn>0x0</MiniDumpFlagsOn>  
<MiniDumpFlagsOff>0x0</MiniDumpFlagsOff>  
<MinidumpErrorList>0xC1000000, 0xC1000001, 0xC102003F, 0xC1360054, 0xC1360055</MinidumpErrorList>  
<ExceptionHandlingMode>0</ExceptionHandlingMode>  
<CriticalErrorHandling>1</CriticalErrorHandling>  
<MaxExceptions>500</MaxExceptions>  
<MaxDuplicateDumps>1</MaxDuplicateDumps>  
</Exception>  
```  
  
 <span data-ttu-id="f62af-207">**Configurare le segnalazioni di arresti anomali**</span><span class="sxs-lookup"><span data-stu-id="f62af-207">**Configure Crash Reports**</span></span>  
  
 <span data-ttu-id="f62af-208">Se non diversamente indicato dal supporto tecnico Microsoft, la maggior parte degli amministratori usa le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="f62af-208">Unless otherwise directed by Microsoft Support, most administrators use the default settings.</span></span> <span data-ttu-id="f62af-209">Questo articolo non recente della Knowledge Base viene ancora usato per fornire istruzioni su come configurare i file di dump: [Come configurare SQL Server 2005 Analysis Services per generare file di dump di memoria](https://support.microsoft.com/kb/919711).</span><span class="sxs-lookup"><span data-stu-id="f62af-209">This older KB article is still used to provide instruction on how to configure dump files: [How to configure Analysis Services to generate memory dump files](https://support.microsoft.com/kb/919711).</span></span>  
  
 <span data-ttu-id="f62af-210">L'impostazione di configurazione che verrà modificata con maggiore probabilità è `CreateAndSendCrashReports`, usata per determinare se verrà generato o meno un file di dump di memoria.</span><span class="sxs-lookup"><span data-stu-id="f62af-210">The configuration setting most likely to be modified is the `CreateAndSendCrashReports` setting used to determine whether a memory dump file will be generated.</span></span>  
  
|<span data-ttu-id="f62af-211">Valore</span><span class="sxs-lookup"><span data-stu-id="f62af-211">Value</span></span>|<span data-ttu-id="f62af-212">Descrizione</span><span class="sxs-lookup"><span data-stu-id="f62af-212">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="f62af-213">0</span><span class="sxs-lookup"><span data-stu-id="f62af-213">0</span></span>|<span data-ttu-id="f62af-214">Disattiva il file di dump di memoria.</span><span class="sxs-lookup"><span data-stu-id="f62af-214">Turns off the memory dump file.</span></span> <span data-ttu-id="f62af-215">Tutte le altre impostazioni nella sezione Eccezioni vengono ignorate.</span><span class="sxs-lookup"><span data-stu-id="f62af-215">All other settings under the Exception section are ignored.</span></span>|  
|<span data-ttu-id="f62af-216">1</span><span class="sxs-lookup"><span data-stu-id="f62af-216">1</span></span>|<span data-ttu-id="f62af-217">(Impostazione predefinita) Abilita ma non invia il file di dump di memoria.</span><span class="sxs-lookup"><span data-stu-id="f62af-217">(Default) Enables, but does not send, the memory dump file.</span></span>|  
|<span data-ttu-id="f62af-218">2</span><span class="sxs-lookup"><span data-stu-id="f62af-218">2</span></span>|<span data-ttu-id="f62af-219">Abilita e invia automaticamente una segnalazione di errore a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f62af-219">Enables and automatically sends an error report to Microsoft.</span></span>|  
  
 <span data-ttu-id="f62af-220">`CrashReportsFolder`è il percorso dei file di dump.</span><span class="sxs-lookup"><span data-stu-id="f62af-220">`CrashReportsFolder` is the location of the dump files.</span></span> <span data-ttu-id="f62af-221">Per impostazione predefinita, il file con estensione mdmp e i record di log associati vengono archiviati nella cartella \Olap\Log.</span><span class="sxs-lookup"><span data-stu-id="f62af-221">By default, an .mdmp file and associated log records can be found in the \Olap\Log folder.</span></span>  
  
 <span data-ttu-id="f62af-222">`SQLDumperFlagsOn` viene usata per generare un dump completo.</span><span class="sxs-lookup"><span data-stu-id="f62af-222">`SQLDumperFlagsOn` is used to generate a full dump.</span></span> <span data-ttu-id="f62af-223">Per impostazione predefinita, i dump completi non sono abilitati.</span><span class="sxs-lookup"><span data-stu-id="f62af-223">By default, full dumps are not enabled.</span></span> <span data-ttu-id="f62af-224">È possibile impostare questa proprietà su `0x34`.</span><span class="sxs-lookup"><span data-stu-id="f62af-224">You can set this property to `0x34`.</span></span>  
  
 <span data-ttu-id="f62af-225">Per altre informazioni generiche, vedere i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="f62af-225">The following links provide more background:</span></span>  
  
-   [<span data-ttu-id="f62af-226">Analisi dei minidump di SQL Server</span><span class="sxs-lookup"><span data-stu-id="f62af-226">Looking Deeper into SQL Server using Minidumps</span></span>](https://blogs.msdn.com/b/sqlcat/archive/2009/09/11/looking-deeper-into-sql-server-using-minidumps.aspx)  
  
-   [<span data-ttu-id="f62af-227">Come creare un file di dump in modalità utente</span><span class="sxs-lookup"><span data-stu-id="f62af-227">How to create a user mode dump file</span></span>](https://support.microsoft.com/kb/931673)  
  
-   [<span data-ttu-id="f62af-228">Come usare l'utilità Sqldumper.exe per generare un file di dump in SQL Server</span><span class="sxs-lookup"><span data-stu-id="f62af-228">How to use the Sqldumper.exe utility to generate a dump file in SQL Server</span></span>](https://support.microsoft.com/kb/917825)  
  
##  <a name="tips-and-best-practices"></a><a name="bkmk_tips"></a><span data-ttu-id="f62af-229">Suggerimenti e procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="f62af-229">Tips and best practices</span></span>  
 <span data-ttu-id="f62af-230">Questa sezione è un riepilogo dei suggerimenti indicati in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="f62af-230">This section is a recap of the tips mentioned throughout this article.</span></span>  
  
-   <span data-ttu-id="f62af-231">Configurare il file msmdsrv.log per controllare le dimensioni e il numero di file di log msmdsrv.</span><span class="sxs-lookup"><span data-stu-id="f62af-231">Configure the msmdsrv.log file to control the size and number of msmdsrv log file.</span></span> <span data-ttu-id="f62af-232">Le impostazioni non vengono abilitate per impostazione predefinita, pertanto assicurarsi di aggiungerle come passaggio di post-installazione.</span><span class="sxs-lookup"><span data-stu-id="f62af-232">The settings are not enabled by default, so be sure to add them as post-installation step.</span></span> <span data-ttu-id="f62af-233">Vedere [File di log del servizio MSMDSRV](#bkmk_msmdsrv) in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="f62af-233">See [MSMDSRV service log file](#bkmk_msmdsrv) in this topic.</span></span>  
  
-   <span data-ttu-id="f62af-234">Leggere questo post di blog del supporto tecnico Microsoft per informazioni sulle risorse da usare per ottenere informazioni sulle operazioni del server: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)(Raccolta dati iniziale).</span><span class="sxs-lookup"><span data-stu-id="f62af-234">Review this blog post from Microsoft Customer Support to learn what resources they use to get information about server operations: [Initial Data Collection](https://blogs.msdn.com/b/as_emea/archive/2012/01/02/initial-data-collection-for-troubleshooting-analysis-services-issues.aspx)</span></span>  
  
-   <span data-ttu-id="f62af-235">Usare ASTrace2012, anziché un log di query, per identificare gli utenti che eseguono query sui cubi.</span><span class="sxs-lookup"><span data-stu-id="f62af-235">Use ASTrace2012, rather than a query log, to find out who is querying cubes.</span></span> <span data-ttu-id="f62af-236">Il log di query viene usato generalmente per fornire un input all'Ottimizzazione guidata basata sulle statistiche di utilizzo e i dati acquisiti non sono facili da leggere o interpretare.</span><span class="sxs-lookup"><span data-stu-id="f62af-236">The query log is typically used to provide input into the Usage Based Optimization Wizard, and the data it captures is not easy to read or interpret.</span></span> <span data-ttu-id="f62af-237">ASTrace2012 è uno strumento della community, ampiamente usato, che acquisisce le operazioni di query.</span><span class="sxs-lookup"><span data-stu-id="f62af-237">ASTrace2012 is a community tool, widely used, that captures query operations.</span></span> <span data-ttu-id="f62af-238">Vedere [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/)(Esempi della community di Microsoft SQL Server: Analysis Services).</span><span class="sxs-lookup"><span data-stu-id="f62af-238">See [Microsoft SQL Server Community Samples: Analysis Services](https://sqlsrvanalysissrvcs.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f62af-239">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="f62af-239">See Also</span></span>  
 <span data-ttu-id="f62af-240">[Gestione dell'istanza di Analysis Services](analysis-services-instance-management.md) </span><span class="sxs-lookup"><span data-stu-id="f62af-240">[Analysis Services Instance Management](analysis-services-instance-management.md) </span></span>  
 <span data-ttu-id="f62af-241">[Introduzione al monitoraggio Analysis Services con SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span><span class="sxs-lookup"><span data-stu-id="f62af-241">[Introduction to Monitoring Analysis Services with SQL Server Profiler](introduction-to-monitoring-analysis-services-with-sql-server-profiler.md) </span></span>  
 [<span data-ttu-id="f62af-242">Configurare le proprietà del server in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f62af-242">Configure Server Properties in Analysis Services</span></span>](../server-properties/server-properties-in-analysis-services.md)  
  
  
