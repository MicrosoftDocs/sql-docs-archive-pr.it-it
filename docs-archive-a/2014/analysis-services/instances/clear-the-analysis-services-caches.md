---
title: Cancellare le cache Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 6bf66fdd-6a03-4cea-b7e2-eb676ff276ff
author: minewiskan
ms.author: owend
ms.openlocfilehash: e4890dd322406dcf48bc6b8eca89f292cfe132a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87713643"
---
# <a name="clear-the-analysis-services-caches"></a><span data-ttu-id="eaf28-102">Cancellare le cache di Analysis Services</span><span class="sxs-lookup"><span data-stu-id="eaf28-102">Clear the Analysis Services Caches</span></span>
  <span data-ttu-id="eaf28-103">Analysis Services consente di memorizzare i dati nella cache per migliorare le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="eaf28-103">Analysis Services caches data to boost query performance.</span></span> <span data-ttu-id="eaf28-104">In questo argomento vengono forniti consigli per l'utilizzo del comando XMLA ClearCache con cui cancellare le cache create in risposta a una query MDX.</span><span class="sxs-lookup"><span data-stu-id="eaf28-104">This topic provides recommendations for using the XMLA ClearCache command to clear caches that were created in response to an MDX query.</span></span> <span data-ttu-id="eaf28-105">Gli effetti dell'esecuzione di ClearCache variano a seconda che si utilizzi un modello tabulare o multidimensionale.</span><span class="sxs-lookup"><span data-stu-id="eaf28-105">The effects of running ClearCache vary depending on whether you are using a tabular or multidimensional model.</span></span>  
  
 <span data-ttu-id="eaf28-106">**Quando cancellare la cache per i modelli multidimensionali**</span><span class="sxs-lookup"><span data-stu-id="eaf28-106">**When to clear the cache for multidimensional models**</span></span>  
  
 <span data-ttu-id="eaf28-107">Per i database multidimensionali, in Analysis Services le cache vengono compilate nel motore delle formule in caso di valutazione di un calcolo e nel motore di archiviazione per i risultati delle query sulla dimensione e delle query sul gruppo di misure.</span><span class="sxs-lookup"><span data-stu-id="eaf28-107">For multidimensional databases, Analysis Services builds caches in the formula engine when evaluating a calculation, and in the storage engine for the results of dimension queries and measure group queries.</span></span> <span data-ttu-id="eaf28-108">Le query sul gruppo di misure si verificano quando tramite il motore delle formule devono essere misurati dati per una coordinata o un sottocubo di cella.</span><span class="sxs-lookup"><span data-stu-id="eaf28-108">Measure group queries occur when the formula engine needs measure data for a cell coordinate or subcube.</span></span> <span data-ttu-id="eaf28-109">Le query sulla dimensione si verificano in caso di esecuzione di query sulle gerarchie non naturali e di applicazione di Auto Exist.</span><span class="sxs-lookup"><span data-stu-id="eaf28-109">Dimension queries occur when querying unnatural hierarchies and when applying autoexists.</span></span>  
  
 <span data-ttu-id="eaf28-110">La cancellazione della cache è consigliata quando si effettuano test delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="eaf28-110">Clearing the cache is recommended when conducting performance testing.</span></span> <span data-ttu-id="eaf28-111">Cancellando la cache tra le esecuzioni dei test, ci si assicura che la memorizzazione nella cache non distorca i risultati dei test in cui viene misurato l'impatto di una modifica della progettazione della query.</span><span class="sxs-lookup"><span data-stu-id="eaf28-111">By clearing the cache between test runs, you ensure that caching does not skew any test results that measure the impact of a query design change.</span></span>  
  
 <span data-ttu-id="eaf28-112">**Quando cancellare la cache per i modelli tabulari**</span><span class="sxs-lookup"><span data-stu-id="eaf28-112">**When to clear the cache for tabular models**</span></span>  
  
 <span data-ttu-id="eaf28-113">I modelli tabulari generalmente vengono archiviati in memoria, dove aggregazioni e altri calcoli vengono eseguiti al momento dell'esecuzione di una query.</span><span class="sxs-lookup"><span data-stu-id="eaf28-113">Tabular models are generally stored in memory, where aggregations and other calculations are performed at the time a query is executed.</span></span> <span data-ttu-id="eaf28-114">In tal senso, il comando ClearCache ha un effetto limitato sui modelli tabulari.</span><span class="sxs-lookup"><span data-stu-id="eaf28-114">As such, the ClearCache command has a limited effect on tabular models.</span></span> <span data-ttu-id="eaf28-115">Per un modello tabulare, è possibile che vengano aggiunti dati alle cache di Analysis Services se vengono eseguite query MDX sul modello stesso.</span><span class="sxs-lookup"><span data-stu-id="eaf28-115">For a tabular model, data may be added to the Analysis Services caches if MDX queries are run against it.</span></span> <span data-ttu-id="eaf28-116">In particolare, per le misure DAX a cui fanno riferimento MDX e le operazioni Auto Exist, i risultati possono essere memorizzati rispettivamente nella cache delle formule e nella cache di dimensione.</span><span class="sxs-lookup"><span data-stu-id="eaf28-116">In particular, DAX measures referenced by MDX and autoexists operations can cache results in the formula cache and dimension cache respectively.</span></span> <span data-ttu-id="eaf28-117">Notare, tuttavia, che per le gerarchie non naturali e le query sul gruppo di misure i risultati non vengono memorizzati nella cache del motore di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="eaf28-117">Note however, that unnatural hierarchies and measure group queries do not cache results in the storage engine.</span></span> <span data-ttu-id="eaf28-118">Inoltre, è importante sapere che per le query DAX i risultati non vengono memorizzati nella cache del motore delle formule e di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="eaf28-118">Additionally, it is important to recognize that DAX queries do not cache results in the formula and storage engine.</span></span> <span data-ttu-id="eaf28-119">Nella misura in cui le cache esistono in conseguenza dell'esecuzione di query MDX, l'esecuzione del comando ClearCache su un modello tabulare comporterà l'invalidazione dei dati di sistema eventualmente memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="eaf28-119">To the extent that caches exist as a result of MDX queries, running ClearCache against a tabular model will invalidate any cached data from the system.</span></span>  
  
 <span data-ttu-id="eaf28-120">L'esecuzione di ClearCache cancellerà anche le cache in memoria nel motore di analisi in memoria xVelocity (VertiPaq).</span><span class="sxs-lookup"><span data-stu-id="eaf28-120">Running ClearCache will also clear in-memory caches in the xVelocity in-memory analytics engine (VertiPaq).</span></span> <span data-ttu-id="eaf28-121">Il motore xVelocity gestisce un piccolo set di risultati memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="eaf28-121">The xVelocity engine maintains a small set of cached results.</span></span> <span data-ttu-id="eaf28-122">L'esecuzione di ClearCache comporterà anche l'invalidazione di queste cache nel motore xVelocity.</span><span class="sxs-lookup"><span data-stu-id="eaf28-122">Running ClearCache will invalidate these caches in the xVelocity engine.</span></span>  
  
 <span data-ttu-id="eaf28-123">Infine, l'esecuzione di ClearCache comporterà anche la rimozione dei dati rimasti in memoria quando un modello tabulare viene riconfigurato per la modalità `DirectQuery`.</span><span class="sxs-lookup"><span data-stu-id="eaf28-123">Finally, running ClearCache will also remove residual data that is left in memory when a tabular model is reconfigured for `DirectQuery` mode.</span></span> <span data-ttu-id="eaf28-124">Questo è particolarmente importante se il modello contiene dati sensibili soggetti a controlli rigidi.</span><span class="sxs-lookup"><span data-stu-id="eaf28-124">This is particularly important if the model contains sensitive data that is subject to tight controls.</span></span> <span data-ttu-id="eaf28-125">In questo caso, l'esecuzione di ClearCache è un'azione precauzionale che è possibile intraprendere per assicurarsi che i dati sensibili siano presenti solo nelle posizioni previste.</span><span class="sxs-lookup"><span data-stu-id="eaf28-125">In this case, running ClearCache is a precautionary action that you can take to ensure that sensitive data exists only where you expect it to be.</span></span> <span data-ttu-id="eaf28-126">La cancellazione manuale della cache è necessaria se si utilizza [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] per distribuire il modello e modificare la modalità di query.</span><span class="sxs-lookup"><span data-stu-id="eaf28-126">Clearing the cache manually is necessary if you are using [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] to deploy the model and change the query mode.</span></span> <span data-ttu-id="eaf28-127">Per contro, se si utilizza [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] per specificare `DirectQuery` sul modello e sulle partizioni, la cache verrà automaticamente cancellata quando si passa a tale modalità di query per il modello.</span><span class="sxs-lookup"><span data-stu-id="eaf28-127">In contrast, using [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] to specify `DirectQuery` on the model and partitions will automatically clear the cache when you switch the model to use that query mode.</span></span>  
  
 <span data-ttu-id="eaf28-128">Rispetto ai consigli relativi alla cancellazione delle cache dei modelli multidimensionali durante i test delle prestazioni, non è specificamente consigliato di cancellare le cache dei modelli tabulari.</span><span class="sxs-lookup"><span data-stu-id="eaf28-128">Compared with recommendations for clearing multidimensional model caches during performance testing, there is no broad recommendation for clearing tabular model caches.</span></span> <span data-ttu-id="eaf28-129">Se non si gestisce la distribuzione di un modello tabulare che contiene dati sensibili, non c'è nessuna attività amministrativa specifica che richiede la cancellazione della cache.</span><span class="sxs-lookup"><span data-stu-id="eaf28-129">If you are not managing the deployment of a tabular model that contains sensitive data, there is no specific administrative task that calls for clearing the cache.</span></span>  
  
## <a name="clear-the-cache-for-analysis-services-models"></a><span data-ttu-id="eaf28-130">Cancellare la cache per i modelli di Analysis Services</span><span class="sxs-lookup"><span data-stu-id="eaf28-130">Clear the cache for Analysis Services models</span></span>  
 <span data-ttu-id="eaf28-131">Per cancellare la cache, utilizzare XMLA e [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="eaf28-131">To clear the cache, use XMLA and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="eaf28-132">È possibile cancellare la cache a livello di database, cubo, dimensione o tabella oppure gruppo di misure.</span><span class="sxs-lookup"><span data-stu-id="eaf28-132">You can clear the cache at the database, cube, dimension or table, or measure group level.</span></span> <span data-ttu-id="eaf28-133">I passaggi seguenti per la cancellazione della cache a livello di database si applicano sia ai modelli multidimensionali che ai modelli tabulari.</span><span class="sxs-lookup"><span data-stu-id="eaf28-133">The following steps for clearing the cache at the database level apply to both multidimensional models and tabular models.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="eaf28-134">La rigorosa esecuzione di test delle prestazioni potrebbe richiedere un approccio più completo alla cancellazione della cache.</span><span class="sxs-lookup"><span data-stu-id="eaf28-134">Rigorous performance testing might require a more comprehensive approach to clearing the cache.</span></span> <span data-ttu-id="eaf28-135">Per istruzioni su come scaricare le cache di Analysis Services e del file system, vedere la sezione sulla cancellazione delle cache nella [Guida operativa di SQL Server 2008 R2 Analysis Services](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span><span class="sxs-lookup"><span data-stu-id="eaf28-135">For instructions on how to flush Analysis Services and file system caches, see the section on clearing caches in the [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span></span>  
  
 <span data-ttu-id="eaf28-136">Sia per i modelli multidimensionali che per i modelli tabulari, la cancellazione di alcune di queste cache può essere un processo in due passaggi, costituito dall'invalidazione della cache quando viene eseguito ClearCache, seguita dallo svuotamento della cache alla ricezione della query successiva.</span><span class="sxs-lookup"><span data-stu-id="eaf28-136">For both multidimensional and tabular models, clearing some of these caches can be a two-step process that consists of invalidating the cache when ClearCache executes, followed by emptying the cache when the next query is received.</span></span> <span data-ttu-id="eaf28-137">Una riduzione dell'utilizzo di memoria sarà evidente solo dopo che la cache è stata effettivamente svuotata.</span><span class="sxs-lookup"><span data-stu-id="eaf28-137">A reduction in memory consumption will be evident only after the cache is actually emptied.</span></span>  
  
 <span data-ttu-id="eaf28-138">La cancellazione della cache richiede che si fornisca un identificatore di oggetto all'istruzione `ClearCache` in una query XMLA.</span><span class="sxs-lookup"><span data-stu-id="eaf28-138">Clearing the cache requires that you provide an object identifier to the `ClearCache` statement in an XMLA query.</span></span> <span data-ttu-id="eaf28-139">Nel primo passaggio di questo argomento viene illustrato come ottenere un identificatore di oggetto.</span><span class="sxs-lookup"><span data-stu-id="eaf28-139">The first step in this topic explains how to get an object identifier.</span></span>  
  
#### <a name="step-1-get-the-object-identifier"></a><span data-ttu-id="eaf28-140">Passaggio 1: ottenere l'identificatore di oggetto</span><span class="sxs-lookup"><span data-stu-id="eaf28-140">Step 1: Get the object identifier</span></span>  
  
1.  <span data-ttu-id="eaf28-141">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]fare clic con il pulsante destro del mouse su un oggetto, selezionare **Proprietà**e copiare il valore dell'ID proprietà nel riquadro **Proprietà** .</span><span class="sxs-lookup"><span data-stu-id="eaf28-141">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click an object, select **Properties**, and copy the value from the ID property in the **Properties** pane.</span></span> <span data-ttu-id="eaf28-142">Questo approccio funziona per database, cubi, dimensioni o tabelle.</span><span class="sxs-lookup"><span data-stu-id="eaf28-142">This approach works for the database, cube, dimension, or table.</span></span>  
  
2.  <span data-ttu-id="eaf28-143">Per ottenere l'ID del gruppo di misure, fare clic con il pulsante destro del mouse sul gruppo di misure e selezionare **Crea script per gruppo di misure**.</span><span class="sxs-lookup"><span data-stu-id="eaf28-143">To get the measure group ID, right-click the measure group and select **Script Measure Group As**.</span></span> <span data-ttu-id="eaf28-144">Scegliere **Crea** o **Modifica**e inviare la query a una finestra.</span><span class="sxs-lookup"><span data-stu-id="eaf28-144">Choose either **Create** or **Alter**, and send the query to a window.</span></span> <span data-ttu-id="eaf28-145">L'ID del gruppo di misure sarà visibile nella definizione dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="eaf28-145">The ID of the measure group will be visible in the object definition.</span></span> <span data-ttu-id="eaf28-146">Copiare l'ID della definizione dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="eaf28-146">Copy the ID of the object definition.</span></span>  
  
#### <a name="step-2-run-the-query"></a><span data-ttu-id="eaf28-147">Passaggio 2: eseguire la query</span><span class="sxs-lookup"><span data-stu-id="eaf28-147">Step 2: Run the query</span></span>  
  
1.  <span data-ttu-id="eaf28-148">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]fare clic con il pulsante destro del mouse su un database, scegliere **Nuova query**, quindi **XMLA**.</span><span class="sxs-lookup"><span data-stu-id="eaf28-148">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click a database, point to **New Query**, and select **XMLA**.</span></span>  
  
2.  <span data-ttu-id="eaf28-149">Copiare l'esempio di codice seguente nella finestra di query XMLA.</span><span class="sxs-lookup"><span data-stu-id="eaf28-149">Copy the following code example into the XMLA query window.</span></span> <span data-ttu-id="eaf28-150">Sostituire `DatabaseID` con l'ID del database nella connessione corrente.</span><span class="sxs-lookup"><span data-stu-id="eaf28-150">Change `DatabaseID` to the ID of the database on the current connection.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID> Adventure Works DW Multidimensional</DatabaseID>  
      </Object>  
    </ClearCache>  
  
    ```  
  
     <span data-ttu-id="eaf28-151">In alternativa, è possibile specificare un percorso di un oggetto figlio, quale un gruppo di misure, per cancellare la cache solo per quell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="eaf28-151">Alternatively, you can specify a path of a child object, such as a measure group, to clear the cache for just that object.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID>Adventure Works DW Multidimensional</DatabaseID>  
            <CubeID>Adventure Works</CubeID>  
            <MeasureGroupID>Fact Currency Rate</MeasureGroupID>  
      </Object>  
    </ClearCache>  
    ```  
  
3.  <span data-ttu-id="eaf28-152">Premere F5 per eseguire la query.</span><span class="sxs-lookup"><span data-stu-id="eaf28-152">Press F5 to execute the query.</span></span> <span data-ttu-id="eaf28-153">Verrà visualizzato il risultato seguente:</span><span class="sxs-lookup"><span data-stu-id="eaf28-153">You should see the following result:</span></span>  
  
    ```  
    <return xmlns="urn:schemas-microsoft-com:xml-analysis">  
      <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty" />  
    </return>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="eaf28-154">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="eaf28-154">See Also</span></span>  
 <span data-ttu-id="eaf28-155">[Creazione di script per attività amministrative in Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="eaf28-155">[Script Administrative Tasks in Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span></span>  
 [<span data-ttu-id="eaf28-156">Monitorare un'istanza di Analysis Services</span><span class="sxs-lookup"><span data-stu-id="eaf28-156">Monitor an Analysis Services Instance</span></span>](monitor-an-analysis-services-instance.md)  
  
  
