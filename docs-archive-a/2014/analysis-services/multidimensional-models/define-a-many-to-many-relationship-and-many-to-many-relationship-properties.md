---
title: Definire una relazione molti-a-molti e le proprietà delle relazioni molti-a-molti | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- many-to-many relationships [Analysis Services]
ms.assetid: edb5f61a-a581-467a-a367-134b7f9b849f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 1cd5d46ce07ff8eb6a3893c0dac261797c6ef19e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87636911"
---
# <a name="define-a-many-to-many-relationship-and-many-to-many-relationship-properties"></a><span data-ttu-id="19423-102">Definire una relazione molti-a-molti e le relative proprietà</span><span class="sxs-lookup"><span data-stu-id="19423-102">Define a Many-to-Many Relationship and Many-to-Many Relationship Properties</span></span>
  <span data-ttu-id="19423-103">In questo argomento vengono illustrate le dimensioni molti-a-molti in Analysis Services, quando utilizzarle e come crearle.</span><span class="sxs-lookup"><span data-stu-id="19423-103">This topic explains many-to-many dimensions in Analysis Services, including when to use them and how to create them.</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="19423-104">Introduzione</span><span class="sxs-lookup"><span data-stu-id="19423-104">Introduction</span></span>  
 <span data-ttu-id="19423-105">In Analysis Services sono supportate le dimensioni molti-a-molti ed è possibile ottenere un'analisi più complessa rispetto a quella di uno schema star classico.</span><span class="sxs-lookup"><span data-stu-id="19423-105">Analysis Services supports many-to-many dimensions, allowing for more complex analytics than what can be described in a classic star schema.</span></span> <span data-ttu-id="19423-106">In uno schema star classico tutte le dimensioni hanno una relazione uno-a-molti con la tabella dei fatti.</span><span class="sxs-lookup"><span data-stu-id="19423-106">In a classic star schema, all dimensions have a one-to-many relationship with a fact table.</span></span> <span data-ttu-id="19423-107">Ogni fatto è associato a un solo membro della dimensione e un singolo membro della dimensione è associato a molti fatti.</span><span class="sxs-lookup"><span data-stu-id="19423-107">Each fact joins to one dimension member; a single dimension member is associated with many facts.</span></span>  
  
 <span data-ttu-id="19423-108">Nelle relazioni molti-a-molti viene eliminata questa limitazione di modellazione ed è possibile che un fatto, ad esempio il saldo di un conto, sia associato a più membri della stessa dimensione (il saldo di un conto cointestato può essere attribuito a due o più titolari di un conto cointestato).</span><span class="sxs-lookup"><span data-stu-id="19423-108">Many-to-many removes this modeling restriction by enabling a fact (such as an account balance) to be associated with multiple members of the same dimension (the balance of a joint account can be attributed to two or more owners of a joint account).</span></span>  
  
 <span data-ttu-id="19423-109">A livello concettuale, una relazione dimensionale molti-a-molti in Analysis Services equivale a relazioni molti-a-molti in un modello relazionale che supporta gli stessi tipi di scenario.</span><span class="sxs-lookup"><span data-stu-id="19423-109">Conceptually, a many-to-many dimensional relationship in Analysis Services is equivalent to many-to-many relationships in a relational model, supporting the same kinds of scenarios.</span></span> <span data-ttu-id="19423-110">Esempi comuni di relazioni molti-a-molti:</span><span class="sxs-lookup"><span data-stu-id="19423-110">Common examples of many-to-many include:</span></span>  
  
-   <span data-ttu-id="19423-111">Gli studenti sono iscritti a molti corsi; ciascun corso ha molti studenti.</span><span class="sxs-lookup"><span data-stu-id="19423-111">Students are enrolled in many courses; each course has many students.</span></span>  
  
-   <span data-ttu-id="19423-112">I dottori hanno molti pazienti; i pazienti hanno molti dottori.</span><span class="sxs-lookup"><span data-stu-id="19423-112">Doctors have many patients; patients have many doctors.</span></span>  
  
-   <span data-ttu-id="19423-113">I clienti possono avere molti conti bancari; i conti bancari possono appartenere a più di un cliente.</span><span class="sxs-lookup"><span data-stu-id="19423-113">Customers have many bank accounts; bank accounts might belong to more than one customer.</span></span>  
  
-   <span data-ttu-id="19423-114">In Adventure Works, molti clienti hanno molti motivi per effettuare l'ordine di un prodotto, e un motivo di vendita può essere associato a molti ordini.</span><span class="sxs-lookup"><span data-stu-id="19423-114">In Adventure Works, many customers have many reasons for ordering a product, and a sales reason can be associated with many orders.</span></span>  
  
 <span data-ttu-id="19423-115">A livello analitico, il problema risolto da una relazione molti-a-molti consiste nella rappresentazione accurata di un conteggio o somma relativi alla relazione dimensionale (solitamente attraverso l'eliminazione dei conteggi doppi quando si eseguono calcoli per uno specifico membro di dimensione).</span><span class="sxs-lookup"><span data-stu-id="19423-115">Analytically, the problem that a many-to-many relationship solves is accurate representation of a count or sum relative to the dimensional relationship (usually by eliminating double-counts when performing calculations for a specific dimension member).</span></span> <span data-ttu-id="19423-116">Un esempio aiuterà a chiarire questo concetto.</span><span class="sxs-lookup"><span data-stu-id="19423-116">An example is necessary to clarify this point.</span></span> <span data-ttu-id="19423-117">Si consideri un prodotto o servizio appartenente a più di una categoria.</span><span class="sxs-lookup"><span data-stu-id="19423-117">Consider a product or service that belongs to more than one category.</span></span> <span data-ttu-id="19423-118">Se si conta il numero di servizi per categoria, si desidera che in ciascuna venga incluso un servizio appartenente a entrambe le categorie.</span><span class="sxs-lookup"><span data-stu-id="19423-118">If you were counting the number of services by category, you would want a service belonging to both categories to be included in each one.</span></span> <span data-ttu-id="19423-119">Allo stesso tempo, però, si desidera non esagerare il numero di servizi offerti.</span><span class="sxs-lookup"><span data-stu-id="19423-119">At the same time, you would not want to overstate the number of services that you provide.</span></span> <span data-ttu-id="19423-120">Specificando la relazione dimensionale molti-a-molti si hanno più probabilità di ottenere risultati corretti quando si esegue una query per categoria o servizio.</span><span class="sxs-lookup"><span data-stu-id="19423-120">By specifying the many-to-many dimensional relationship, you are more likely to get the correct results back when querying by category or by service.</span></span> <span data-ttu-id="19423-121">A tal fine, tuttavia, sono sempre necessari test approfonditi.</span><span class="sxs-lookup"><span data-stu-id="19423-121">However, thorough testing is always necessary to ensure that this is the case.</span></span>  
  
 <span data-ttu-id="19423-122">A livello strutturale, la creazione di una relazione dimensionale molti-a-molti è simile alla creazione di relazioni molti-a-molti in un modello di dati relazionale.</span><span class="sxs-lookup"><span data-stu-id="19423-122">Structurally, creating a many-to-many dimensional relationship is similar to how you might create many-to-many in a relational data model.</span></span> <span data-ttu-id="19423-123">Mentre un modello relazionale si serve di una *tabella di collegamento* per archiviare le associazioni di riga, un modello multidimensionale usa di un *gruppo di misure intermedio*.</span><span class="sxs-lookup"><span data-stu-id="19423-123">Whereas a relational model uses a *junction table* to store row associations, a multidimensional model uses an *intermediate measure group*.</span></span> <span data-ttu-id="19423-124">Gruppo di misure intermedio è un termine utilizzato per indicare una tabella che definisce il mapping di membri di diverse dimensioni.</span><span class="sxs-lookup"><span data-stu-id="19423-124">Intermediate measure group is the term we use to refer to a table that maps members from different dimensions.</span></span>  
  
 <span data-ttu-id="19423-125">A livello visivo, una relazione dimensionale molti-a-molti non è indicata in un diagramma del cubo.</span><span class="sxs-lookup"><span data-stu-id="19423-125">Visually, a many-to-many dimensional relationship is not indicated in a cube diagram.</span></span> <span data-ttu-id="19423-126">È invece possibile utilizzare la scheda Utilizzo dimensioni per identificare rapidamente tutte le relazioni molti-a-molti all'interno di un modello.</span><span class="sxs-lookup"><span data-stu-id="19423-126">Instead, use the Dimension Usage tab to quickly identify any many-to-many relationships in a model.</span></span> <span data-ttu-id="19423-127">Una relazione molti-a-molti è indicata dall'icona seguente.</span><span class="sxs-lookup"><span data-stu-id="19423-127">A many-to-many relationship is indicated by the following icon.</span></span>  
  
 <span data-ttu-id="19423-128">![Icona molti-a-molti nell'utilizzo della dimensione](../media/ssas-m2m-icondimusage.png "Icona molti-a-molti nell'utilizzo della dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-128">![Many-to-many icon in dimension usage](../media/ssas-m2m-icondimusage.png "Many-to-many icon in dimension usage")</span></span>  
  
 <span data-ttu-id="19423-129">Fare clic sul pulsante per aprire la finestra di dialogo Definisci relazione per verificare che il tipo di relazione sia molti-a-molti e visualizzare il gruppo di misure intermedio utilizzato nella relazione.</span><span class="sxs-lookup"><span data-stu-id="19423-129">Click the button to open the Define Relationship dialog box to verify the relationship type is many-to-many, and to view which intermediate measure group is used in the relationship.</span></span>  
  
 <span data-ttu-id="19423-130">![Pulsante Definisci relazione nell'utilizzo della dimensione](../media/ssas-m2m-btndimusage.png "Pulsante Definisci relazione nell'utilizzo della dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-130">![Define Relationship button  in dimension usage](../media/ssas-m2m-btndimusage.png "Define Relationship button  in dimension usage")</span></span>  
  
 <span data-ttu-id="19423-131">Nelle sezioni successive è illustrato come configurare una dimensione molti-a-molti e i comportamenti del modello di test.</span><span class="sxs-lookup"><span data-stu-id="19423-131">In subsequent sections, you will learn how to set up a many-to-many dimension and test model behaviors.</span></span> <span data-ttu-id="19423-132">Se si desidera prima consultare informazioni aggiuntive o provare le esercitazioni, vedere **Altre informazioni** alla fine dell'articolo.</span><span class="sxs-lookup"><span data-stu-id="19423-132">If you would rather review additional information or try tutorials first, see **Learn More** at the end of this article.</span></span>  
  
## <a name="create-a-many-to-many-dimension"></a><span data-ttu-id="19423-133">Creare una dimensione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="19423-133">Create a many-to-many dimension</span></span>  
 <span data-ttu-id="19423-134">Una relazione molti-a-molti semplice include due dimensioni con cardinalità molti-a-molti, un gruppo di misure intermedio per l'archiviazione delle associazioni dei membri e un gruppo di misure dei fatti contenente dati misurabili come la somma dei totali di vendita o il saldo di un conto bancario.</span><span class="sxs-lookup"><span data-stu-id="19423-134">A simple many-to-many relationship includes two dimensions having a many-to-many cardinality, an intermediate measure group for storing member associations, and a fact measure group containing measurable data, such as sum of total sales or the balance of a bank account.</span></span>  
  
 <span data-ttu-id="19423-135">Le dimensioni in una relazione molti-a-molti possono avere tabelle corrispondenti nella vista origine dati, in cui ciascuna dimensione nel modello si basa su una tabella esistente in un'origine dati.</span><span class="sxs-lookup"><span data-stu-id="19423-135">Dimensions in a many-to-many relationship might have correspondent tables in the DSV, where each dimension in the model is based on an existing table in a data source.</span></span> <span data-ttu-id="19423-136">Viceversa, le dimensioni nel modello in uso possono derivare da un numero minore di tabelle fisiche o tabelle fisiche differenti nella vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="19423-136">Conversely, the dimensions in your model might derive from fewer or different physical tables in the DSV.</span></span> <span data-ttu-id="19423-137">Utilizzando Sales Reasons e Sales Orders a titolo esemplificativo, il cubo di esempio Adventure Works illustra una relazione molti-a-molti che utilizza dimensioni esistenti come strutture dei dati solo modello, senza controparti fisiche nella vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="19423-137">Using Sales Reasons and Sales Orders as a case in point, the Adventure Works sample cube demonstrates a many-to-many relationship using dimensions that exist as model-only data structures, without physical counterparts in the DSV.</span></span> <span data-ttu-id="19423-138">La dimensione Sales Order è basata su una tabella dei fatti anziché una tabella delle dimensioni nell'origine dei dati sottostante.</span><span class="sxs-lookup"><span data-stu-id="19423-138">The Sales Order dimension is based on a fact table, rather than a dimension table, in the underlying data source.</span></span>  
  
 <span data-ttu-id="19423-139">Nella procedura seguente si presuppone che l'utente conosca già le entità che partecipano alla relazione molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="19423-139">The next procedure assumes that you already know which entities participate in the many-to-many relationship.</span></span> <span data-ttu-id="19423-140">Per approfondire l'argomento, vedere **Altre informazioni** .</span><span class="sxs-lookup"><span data-stu-id="19423-140">See **Learn More** for further study.</span></span>  
  
 <span data-ttu-id="19423-141">Per illustrare i passaggi seguiti nella creazione di una relazione molti-a-molti, in questa procedura viene ricreata una delle relazioni molti-a-molti nel cubo di esempio Adventure Works.</span><span class="sxs-lookup"><span data-stu-id="19423-141">To illustrate the steps used to create a many-to-many relationship, this procedure re-creates one of the many-to-many relationships in the Adventure Works sample cube.</span></span> <span data-ttu-id="19423-142">Se i dati di origine (ovvero, il data warehouse di esempio Adventure Works) sono installati in un'istanza del motore di database relazionale, è possibile attenersi alla procedura seguente.</span><span class="sxs-lookup"><span data-stu-id="19423-142">If you have the source data (that is, the Adventure Works sample data warehouse) installed on a relational database engine instance, you can follow these steps.</span></span>  
  
#### <a name="step-1-verify-dsv-relationships"></a><span data-ttu-id="19423-143">Passaggio 1: verificare le relazioni della vista origine dati</span><span class="sxs-lookup"><span data-stu-id="19423-143">Step 1: Verify DSV relationships</span></span>  
  
1.  <span data-ttu-id="19423-144">In un progetto multidimensionale di SQL Server Data Tools creare un'origine dati nel data warehouse relazionale Adventure Works DW 2012 ospitato in un'istanza del motore di database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="19423-144">In SQL Server Data Tools, in a multidimensional project, create a data source to the Adventure Works DW 2012 relational data warehouse, hosted on a SQL Server Database Engine instance.</span></span>  
  
2.  <span data-ttu-id="19423-145">Creare una vista origine dati utilizzando le tabelle esistenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="19423-145">Create a Data Source View using the following existing tables:</span></span>  
  
    -   <span data-ttu-id="19423-146">FactInternetSales</span><span class="sxs-lookup"><span data-stu-id="19423-146">FactInternetSales</span></span>  
  
    -   <span data-ttu-id="19423-147">FactInternetSalesReason</span><span class="sxs-lookup"><span data-stu-id="19423-147">FactInternetSalesReason</span></span>  
  
    -   <span data-ttu-id="19423-148">DimSalesReason</span><span class="sxs-lookup"><span data-stu-id="19423-148">DimSalesReason</span></span>  
  
3.  <span data-ttu-id="19423-149">Verificare che tutte le tabelle che si intende utilizzare nelle relazioni molti-a-molti siano correlate nella vista origine dati tramite relazioni di chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="19423-149">Verify that all of the tables you plan to use in the many-to-many relationships are related in the DSV through primary key relationships.</span></span> <span data-ttu-id="19423-150">Si tratta di un passaggio necessario per stabilire un collegamento al gruppo di misure intermedio in uno dei passaggi successivi.</span><span class="sxs-lookup"><span data-stu-id="19423-150">This is a requirement for establishing a link to the intermediate measure group in a subsequent step.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="19423-151">Se l'origine dei dati sottostante non fornisce le relazioni di chiave primaria ed esterna, è possibile creare queste relazioni manualmente nella vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="19423-151">If the underlying data source does not provide primary and foreign key relationships, you can create the relationships manually in the DSV.</span></span> <span data-ttu-id="19423-152">Per altre informazioni, vedere [Definire relazioni logiche in una vista origine dati &#40;Analysis Services&#41;](define-logical-relationships-in-a-data-source-view-analysis-services.md).</span><span class="sxs-lookup"><span data-stu-id="19423-152">For more information, see [Define Logical Relationships in a Data Source View &#40;Analysis Services&#41;](define-logical-relationships-in-a-data-source-view-analysis-services.md).</span></span>  
  
     <span data-ttu-id="19423-153">Nell'esempio seguente si verifica che le tabelle utilizzate nella procedura sono collegate attraverso chiavi primarie.</span><span class="sxs-lookup"><span data-stu-id="19423-153">The following example confirms that the tables used in this procedure are linked using primary keys.</span></span>  
  
     <span data-ttu-id="19423-154">![DSV che mostra tabelle correlate](../media/ssas-m2m-dsvpkeys.PNG "DSV che mostra tabelle correlate")</span><span class="sxs-lookup"><span data-stu-id="19423-154">![DSV showing related tables](../media/ssas-m2m-dsvpkeys.PNG "DSV showing related tables")</span></span>  
  
#### <a name="step-2-create-dimensions-and-measure-groups"></a><span data-ttu-id="19423-155">Passaggio 2: creare dimensioni e gruppi di misure</span><span class="sxs-lookup"><span data-stu-id="19423-155">Step 2: Create dimensions and measure groups</span></span>  
  
1.  <span data-ttu-id="19423-156">In un progetto multidimensionale di SQL Server Data Tools, fare clic con il pulsante destro del mouse su **Dimensioni** e selezionare **Nuova dimensione**.</span><span class="sxs-lookup"><span data-stu-id="19423-156">In SQL Server Data Tools, in a multidimensional project, right-click **Dimensions** and select **New Dimension**.</span></span>  
  
2.  <span data-ttu-id="19423-157">Creare una nuova dimensione sulla base della tabella **DimSalesReason**esistente.</span><span class="sxs-lookup"><span data-stu-id="19423-157">Create a new dimension based on existing table, **DimSalesReason**.</span></span> <span data-ttu-id="19423-158">Accettare tutti i valori predefiniti quando si specifica l'origine.</span><span class="sxs-lookup"><span data-stu-id="19423-158">Accept all of the default values when specifying the source.</span></span>  
  
     <span data-ttu-id="19423-159">Selezionare tutti gli attributi.</span><span class="sxs-lookup"><span data-stu-id="19423-159">For attributes, select all.</span></span>  
  
     <span data-ttu-id="19423-160">![Elenco attributi in una nuova dimensione](../media/ssas-m2m-dimsalesreason.PNG "Elenco attributi in una nuova dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-160">![Attributes list in new dimension](../media/ssas-m2m-dimsalesreason.PNG "Attributes list in new dimension")</span></span>  
  
3.  <span data-ttu-id="19423-161">Creare una seconda dimensione sulla base della tabella Fact Internet Sales esistente.</span><span class="sxs-lookup"><span data-stu-id="19423-161">Create a second dimension based on existing table, Fact Internet Sales.</span></span> <span data-ttu-id="19423-162">Sebbene sia una tabella dei fatti, contiene informazioni sugli ordini di vendita (Sales Order).</span><span class="sxs-lookup"><span data-stu-id="19423-162">Although this is a fact table, it contains Sales Order information.</span></span> <span data-ttu-id="19423-163">Verrà utilizzata per creare una dimensione Sales Order.</span><span class="sxs-lookup"><span data-stu-id="19423-163">We'll use it to build a Sales Order dimension.</span></span>  
  
4.  <span data-ttu-id="19423-164">In Impostazione informazioni origine viene visualizzato un messaggio che indica la necessità di specificare una colonna del nome (Name).</span><span class="sxs-lookup"><span data-stu-id="19423-164">In Specify Source Information, you will see a warning that indicates a Name column must be specified.</span></span> <span data-ttu-id="19423-165">Selezionare **SalesOrderNumber** come nome.</span><span class="sxs-lookup"><span data-stu-id="19423-165">Choose **SalesOrderNumber** as the Name.</span></span>  
  
     <span data-ttu-id="19423-166">![Dimensione degli ordini di vendita che mostra la colonna del nome](../media/ssas-m2m-dimsalesordersource.PNG "Dimensione degli ordini di vendita che mostra la colonna del nome")</span><span class="sxs-lookup"><span data-stu-id="19423-166">![Sales Order dimension showing the name column](../media/ssas-m2m-dimsalesordersource.PNG "Sales Order dimension showing the name column")</span></span>  
  
5.  <span data-ttu-id="19423-167">Nella pagina successiva della procedura guidata, selezionare gli attributi.</span><span class="sxs-lookup"><span data-stu-id="19423-167">On the next page of the wizard, choose the attributes.</span></span> <span data-ttu-id="19423-168">In questo esempio è possibile selezionare soltanto **SalesOrderNumber**.</span><span class="sxs-lookup"><span data-stu-id="19423-168">In this example, you can select just **SalesOrderNumber**.</span></span>  
  
     <span data-ttu-id="19423-169">![Dimensione degli ordini di vendita che mostra l'elenco degli attributi](../media/ssas-m2m-dimsalesorderattrib.PNG "Dimensione degli ordini di vendita che mostra l'elenco degli attributi")</span><span class="sxs-lookup"><span data-stu-id="19423-169">![Sales order dimension showing attribute list](../media/ssas-m2m-dimsalesorderattrib.PNG "Sales order dimension showing attribute list")</span></span>  
  
6.  <span data-ttu-id="19423-170">Rinominare la dimensione in **Dim Sales Orders**, in modo da avere una convenzione di denominazione coerente per le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="19423-170">Rename the dimension to **Dim Sales Orders**, so that you have a consistent naming convention for the dimensions.</span></span>  
  
     <span data-ttu-id="19423-171">![Pagina della configurazione guidata che mostra la ridenominazione della dimensione](../media/ssas-m2m-dimsalesorders.PNG "Pagina della configurazione guidata che mostra la ridenominazione della dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-171">![Wizard page showing dimension rename](../media/ssas-m2m-dimsalesorders.PNG "Wizard page showing dimension rename")</span></span>  
  
7.  <span data-ttu-id="19423-172">Fare clic con il pulsante destro del mouse su **Cubi** e scegliere **Nuovo cubo**.</span><span class="sxs-lookup"><span data-stu-id="19423-172">Right-click **Cubes** and select **New Cube**.</span></span>  
  
8.  <span data-ttu-id="19423-173">Nelle tabelle del gruppo di misure selezionare **FactInternetSales** e **FactInternetSalesReason**.</span><span class="sxs-lookup"><span data-stu-id="19423-173">In measure group tables, choose **FactInternetSales** and **FactInternetSalesReason**.</span></span>  
  
     <span data-ttu-id="19423-174">Si seleziona **FactInternetSales** perché contiene le misure da usare nel cubo.</span><span class="sxs-lookup"><span data-stu-id="19423-174">You are choosing **FactInternetSales** because it contains the measures you want to use in the cube.</span></span> <span data-ttu-id="19423-175">Si seleziona **FactInternetSalesReason** perché è il gruppo di misure intermedio che fornisce dati sull'associazione tra membri, che mettono in relazione ordini di vendita e motivi della vendita.</span><span class="sxs-lookup"><span data-stu-id="19423-175">You are choosing **FactInternetSalesReason** because it is the intermediate measure group, providing member association data that relates sales orders to sales reasons.</span></span>  
  
9. <span data-ttu-id="19423-176">Selezionare le misure per ciascuna tabella dei fatti.</span><span class="sxs-lookup"><span data-stu-id="19423-176">Choose measures for each fact table.</span></span>  
  
     <span data-ttu-id="19423-177">Per semplificare il modello, deselezionare tutte le misure e selezionare soltanto **Sales amount** e **Fact Internet Sales Count** in fondo all'elenco.</span><span class="sxs-lookup"><span data-stu-id="19423-177">To simplify your model, clear all the measures, and then select just **Sales Amount** and **Fact Internet Sales Count** at the bottom of the list.</span></span> <span data-ttu-id="19423-178">In **FactInternetSalesReason** è presente una sola misura, che quindi è selezionata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="19423-178">The **FactInternetSalesReason** only has one measure, so it is selected for you automatically.</span></span>  
  
10. <span data-ttu-id="19423-179">Nell'elenco delle dimensioni dovrebbero essere visualizzati **Dim Sales Reason** e **Dim Sales Orders**.</span><span class="sxs-lookup"><span data-stu-id="19423-179">In the dimension list, you should see **Dim Sales Reason** and **Dim Sales Orders**.</span></span>  
  
     <span data-ttu-id="19423-180">Nella pagina Selezione nuove dimensioni, la procedura guidata chiede di creare una nuova dimensione per **Fact Internet Sales Dimension**.</span><span class="sxs-lookup"><span data-stu-id="19423-180">In the Select New Dimensions page, the wizard prompts you to create a new dimension for **Fact Internet Sales Dimension**.</span></span> <span data-ttu-id="19423-181">Questa dimensione non è necessaria, pertanto è possibile eliminarla dall'elenco.</span><span class="sxs-lookup"><span data-stu-id="19423-181">You do not need this dimension, so you can clear it from the list.</span></span>  
  
11. <span data-ttu-id="19423-182">Assegnare un nome al cubo e fare clic su **Fine**.</span><span class="sxs-lookup"><span data-stu-id="19423-182">Name the cube and click **Finish**.</span></span>  
  
#### <a name="step-3-define-many-to-many-relationship"></a><span data-ttu-id="19423-183">Passaggio 3: definire la relazione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="19423-183">Step 3: Define Many-to-Many relationship</span></span>  
  
1.  <span data-ttu-id="19423-184">In Progettazione cubi fare clic sulla scheda Utilizzo dimensioni. si noti che esiste già una relazione molti-a-molti tra **Dim Sales Reason** e **Fact Internet Sales**.</span><span class="sxs-lookup"><span data-stu-id="19423-184">In cube designer, click Dimension Usage tab. Notice that there is already a many-to-many relationship between **Dim Sales Reason** and **Fact Internet Sales**.</span></span> <span data-ttu-id="19423-185">L'icona seguente indica una relazione molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="19423-185">Recall that the following icon indicates a many-to-many relationship.</span></span>  
  
     <span data-ttu-id="19423-186">![Icona molti-a-molti nell'utilizzo della dimensione](../media/ssas-m2m-icondimusage.png "Icona molti-a-molti nell'utilizzo della dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-186">![Many-to-many icon in dimension usage](../media/ssas-m2m-icondimusage.png "Many-to-many icon in dimension usage")</span></span>  
  
2.  <span data-ttu-id="19423-187">Fare clic sulla cella nel punto di intersezione tra **Dim Sales Reason** e **Fact Internet Sales**, quindi fare clic sul pulsante per aprire la finestra di dialogo Definisci relazione.</span><span class="sxs-lookup"><span data-stu-id="19423-187">Click on the intersection cell between **Dim Sales Reason** and **Fact Internet Sales**, and then click the button to open the Define Relationship dialog box.</span></span>  
  
     <span data-ttu-id="19423-188">È possibile utilizzare questa finestra di dialogo per specificare una relazione molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="19423-188">You can see that this dialog box is used to specify a many-to-many relationship.</span></span> <span data-ttu-id="19423-189">Se invece erano state aggiunte dimensioni con una relazione di tipo regolare, è possibile utilizzare questa finestra di dialogo per modificare la relazione in una di tipo molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="19423-189">If you were adding dimensions that had a regular relationship instead, you would use this dialog box to change it to many-to-many.</span></span>  
  
     <span data-ttu-id="19423-190">![Pulsante Definisci relazione nell'utilizzo della dimensione](../media/ssas-m2m-btndimusage.png "Pulsante Definisci relazione nell'utilizzo della dimensione")</span><span class="sxs-lookup"><span data-stu-id="19423-190">![Define Relationship button  in dimension usage](../media/ssas-m2m-btndimusage.png "Define Relationship button  in dimension usage")</span></span>  
  
3.  <span data-ttu-id="19423-191">Distribuire il progetto in un'istanza multidimensionale di Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="19423-191">Deploy the project to an Analysis Services multidimensional instance.</span></span> <span data-ttu-id="19423-192">Nel passaggio successivo il cubo viene esplorato in Excel per verificarne i comportamenti.</span><span class="sxs-lookup"><span data-stu-id="19423-192">In the next step, you will browse the cube in Excel to verify its behaviors.</span></span>  
  
## <a name="testing-many-to-many"></a><span data-ttu-id="19423-193">Test della relazione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="19423-193">Testing Many-to-Many</span></span>  
 <span data-ttu-id="19423-194">Quando si definisce una relazione molti-a-molti in un cubo, è fondamentale eseguire dei test per accertarsi che le query restituiscano i risultati desiderati.</span><span class="sxs-lookup"><span data-stu-id="19423-194">When you define a many-to-many relationship in a cube, testing is imperative to ensure queries return expected results.</span></span> <span data-ttu-id="19423-195">È necessario eseguire test sul cubo che si serve dello strumento di applicazione client che sarà utilizzato dagli utenti finali.</span><span class="sxs-lookup"><span data-stu-id="19423-195">You should test the cube using the client application tool that will be used by end-users.</span></span> <span data-ttu-id="19423-196">Nella procedura successiva viene utilizzato Excel per la connessione al cubo e la verifica dei risultati delle query.</span><span class="sxs-lookup"><span data-stu-id="19423-196">In this next procedure, you will use Excel to connect to the cube and verify query results.</span></span>  
  
#### <a name="browse-the-cube-in-excel"></a><span data-ttu-id="19423-197">Esplorare il cubo in Excel</span><span class="sxs-lookup"><span data-stu-id="19423-197">Browse the cube in Excel</span></span>  
  
1.  <span data-ttu-id="19423-198">Distribuire il progetto ed esplorare il cubo per verificare la validità delle aggregazioni.</span><span class="sxs-lookup"><span data-stu-id="19423-198">Deploy the project and then browse the cube to confirm the aggregations are valid.</span></span>  
  
2.  <span data-ttu-id="19423-199">In Excel fare clic su **dati**  |  **di altre origini**  |  **da Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="19423-199">In Excel, click **Data** | **From Other Sources** | **From Analysis Services**.</span></span> <span data-ttu-id="19423-200">Inserire il nome del server e selezionare database e cubo.</span><span class="sxs-lookup"><span data-stu-id="19423-200">Enter the name of the server, choose the database and cube.</span></span>  
  
3.  <span data-ttu-id="19423-201">Creare una tabella pivot che utilizzi:</span><span class="sxs-lookup"><span data-stu-id="19423-201">Create a PivotTable that uses the following:</span></span>  
  
    -   <span data-ttu-id="19423-202">**Sales amount** come valore</span><span class="sxs-lookup"><span data-stu-id="19423-202">**Sales Amount** as the Value</span></span>  
  
    -   <span data-ttu-id="19423-203">**Sales Reason Name** sulle colonne</span><span class="sxs-lookup"><span data-stu-id="19423-203">**Sales Reason Name** on Columns</span></span>  
  
    -   <span data-ttu-id="19423-204">**Sales Order Number** sulle righe</span><span class="sxs-lookup"><span data-stu-id="19423-204">**Sales Order Number** on Rows</span></span>  
  
4.  <span data-ttu-id="19423-205">Analizzare i risultati.</span><span class="sxs-lookup"><span data-stu-id="19423-205">Analyze the results.</span></span> <span data-ttu-id="19423-206">Poiché si utilizzano dati di esempio, potrà sembrare inizialmente che gli ordini di vendita abbiano tutti valori identici.</span><span class="sxs-lookup"><span data-stu-id="19423-206">Because we are using sample data, the initial impression is that all sales orders have identical values.</span></span> <span data-ttu-id="19423-207">Tuttavia, scorrendo verso il basso, si iniziano a vedere dati diversi.</span><span class="sxs-lookup"><span data-stu-id="19423-207">However, if you scroll down, you begin to see data variation.</span></span>  
  
     <span data-ttu-id="19423-208">Più in basso è possibile trovare l'importo delle vendite e i motivi delle vendite relativi al numero di ordine **SO5382**.</span><span class="sxs-lookup"><span data-stu-id="19423-208">Part way down, you can find the sales amount and sales reasons for order number **SO5382**.</span></span> <span data-ttu-id="19423-209">Il totale complessivo di questo ordine è **539,99**e i motivi di acquisto attribuiti allo stesso includono Promotion, Other e Price.</span><span class="sxs-lookup"><span data-stu-id="19423-209">Grand total of this particular order is **539.99**, and the purchase reasons attributed to this order include Promotion, Other and Price.</span></span>  
  
     <span data-ttu-id="19423-210">![Foglio di lavoro di Excel che mostra aggregazioni molti-a-molti](../media/ssas-m2m-excel.png "Foglio di lavoro di Excel che mostra aggregazioni molti-a-molti")</span><span class="sxs-lookup"><span data-stu-id="19423-210">![Excel worksheet showing many-to-many aggregations](../media/ssas-m2m-excel.png "Excel worksheet showing many-to-many aggregations")</span></span>  
  
     <span data-ttu-id="19423-211">Si noti che l'importo vendite è calcolato correttamente per l'ordine: è pari a **539,99** per l'intero ordine.</span><span class="sxs-lookup"><span data-stu-id="19423-211">Notice that the Sales Amount is correctly calculated for the order; it is **539.99** for the entire order.</span></span> <span data-ttu-id="19423-212">Nonostante **539,99** sia indicato per ciascun motivo, il valore non è sommato per i tre motivi e ciò fa aumentare erroneamente il totale complessivo.</span><span class="sxs-lookup"><span data-stu-id="19423-212">Although **539.99** is indicated for each reason, that value is not summed for all three reasons, erroneously inflating our grand total.</span></span>  
  
     <span data-ttu-id="19423-213">Prima di tutto, perché inserire un importo delle vendite sotto ciascun motivo?</span><span class="sxs-lookup"><span data-stu-id="19423-213">Why put a sales amount under each sales reason in the first place?</span></span> <span data-ttu-id="19423-214">Perché consente di identificare l'importo delle vendite attribuibile a ciascun motivo.</span><span class="sxs-lookup"><span data-stu-id="19423-214">The answer is that it allows us to identify the amount of sales we can attribute to each reason.</span></span>  
  
5.  <span data-ttu-id="19423-215">Scorrere fino all'estremità inferiore del foglio di lavoro.</span><span class="sxs-lookup"><span data-stu-id="19423-215">Scroll to the bottom of the worksheet.</span></span> <span data-ttu-id="19423-216">Ora si nota facilmente che il prezzo è il motivo principale per gli acquisti dei clienti in relazione agli altri motivi e al totale complessivo.</span><span class="sxs-lookup"><span data-stu-id="19423-216">It is now easy to see that Price is the most important reason for customer purchases, relative to other reasons as well as the grand total.</span></span>  
  
     <span data-ttu-id="19423-217">![Cartella di lavoro di Excel che mostra i totali in molti-a-molti](../media/ssas-m2m-excelgrandtotal.png "Cartella di lavoro di Excel che mostra i totali in molti-a-molti")</span><span class="sxs-lookup"><span data-stu-id="19423-217">![Excel workbook showing totals in many-to-many](../media/ssas-m2m-excelgrandtotal.png "Excel workbook showing totals in many-to-many")</span></span>  
  
#### <a name="tips-for-handling-unexpected-query-results"></a><span data-ttu-id="19423-218">Suggerimenti per la gestione di risultati di query imprevisti</span><span class="sxs-lookup"><span data-stu-id="19423-218">Tips for handling unexpected query results</span></span>  
  
1.  <span data-ttu-id="19423-219">Nascondere le misure nel gruppo di misure intermedio, ad esempio il conteggio, che in una query non restituiscono risultati significativi.</span><span class="sxs-lookup"><span data-stu-id="19423-219">Hide measures in the intermediate measure group, such as the count, that do not return meaningful results in a query.</span></span> <span data-ttu-id="19423-220">In tal modo si impedisce agli utenti di utilizzare le aggregazioni e generare dati non significativi.</span><span class="sxs-lookup"><span data-stu-id="19423-220">This prevents people from trying to use aggregations producing meaningless data.</span></span> <span data-ttu-id="19423-221">Per nascondere una misura, impostare **Visibilità** su **False** nell'attributo in Progettazione dimensioni.</span><span class="sxs-lookup"><span data-stu-id="19423-221">To hide a measure, set **Visibility** to **False** on the attribute in dimension designer.</span></span>  
  
2.  <span data-ttu-id="19423-222">Creare prospettive di utilizzo di un subset di misure e dimensioni che supportano l'esperienza di analisi che si desidera offrire.</span><span class="sxs-lookup"><span data-stu-id="19423-222">Create perspectives to use a subset of measures and dimensions that support the analytical experience you want to provide.</span></span> <span data-ttu-id="19423-223">È possibile che un cubo contenente molti gruppi di misure e dimensioni non funzioni sempre correttamente.</span><span class="sxs-lookup"><span data-stu-id="19423-223">Possibly, a cube that contains many measure groups and dimensions do not work well together in all cases.</span></span> <span data-ttu-id="19423-224">È possibile ottenere risultati più prevedibili isolando le dimensioni e i gruppi di misure che si intende utilizzare insieme.</span><span class="sxs-lookup"><span data-stu-id="19423-224">By isolating the dimensions and measure groups that you intend to be used together, you ensure a more predictable outcome.</span></span>  
  
3.  <span data-ttu-id="19423-225">Dopo la modifica di un modello è sempre necessario eseguire la distribuzione e la riconnessione.</span><span class="sxs-lookup"><span data-stu-id="19423-225">Always remember to deploy and reconnect after changing a model.</span></span> <span data-ttu-id="19423-226">In Excel è possibile utilizzare il pulsante Aggiorna della barra multifunzione Analizza - Tabella pivot.</span><span class="sxs-lookup"><span data-stu-id="19423-226">In Excel, use the Refresh button on the PivotTable Analyze ribbon.</span></span>  
  
4.  <span data-ttu-id="19423-227">Evitare di utilizzare gruppi di misure collegati in più relazioni molti-a-molti, soprattutto quando tali relazioni sono in cubi diversi.</span><span class="sxs-lookup"><span data-stu-id="19423-227">Avoid using linked measure groups in multiple many-to-many relationships, especially when those relationships are in different cubes.</span></span> <span data-ttu-id="19423-228">Questa operazione può generare aggregazioni ambigue.</span><span class="sxs-lookup"><span data-stu-id="19423-228">Doing so can result in ambiguous aggregations.</span></span> <span data-ttu-id="19423-229">Per altre informazioni, vedere [Incorrect Amounts for Linked Measures in Cubes containing Many-to-Many Relationships](https://social.technet.microsoft.com/wiki/contents/articles/22911.incorrect-amounts-for-linked-measures-in-cubes-containing-many-to-many-relationships-ssas-troubleshooting.aspx)(Quantità errate per le misure collegate nei cubi che contengono relazioni molti-a-molti).</span><span class="sxs-lookup"><span data-stu-id="19423-229">For more information, see [Incorrect Amounts for Linked Measures in Cubes containing Many-to-Many Relationships](https://social.technet.microsoft.com/wiki/contents/articles/22911.incorrect-amounts-for-linked-measures-in-cubes-containing-many-to-many-relationships-ssas-troubleshooting.aspx).</span></span>  
  
##  <a name="learn-more"></a><a name="bkmk_Learn"></a><span data-ttu-id="19423-230">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="19423-230">Learn more</span></span>  
 <span data-ttu-id="19423-231">Per informazioni aggiuntive su questi concetti, vedere i collegamenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="19423-231">Use the following links to get additional information that helps you master the concepts.</span></span>  
  
 [<span data-ttu-id="19423-232">Definizione della dimensione molti-a-molti in Analysis Services</span><span class="sxs-lookup"><span data-stu-id="19423-232">How do I define a many-to-many dimension in Analysis Services</span></span>](../lesson-5-3-defining-a-many-to-many-relationship.md)  
  
 [<span data-ttu-id="19423-233">La rivoluzione molti-a-molti 2.0</span><span class="sxs-lookup"><span data-stu-id="19423-233">The many-to-many Revolution 2.0</span></span>](https://go.microsoft.com/fwlink/?LinkId=324760)  
  
 [<span data-ttu-id="19423-234">Esercitazione: esempio di dimensione molti-a-molti per SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="19423-234">Tutorial: Many-to-many dimension example for SQL Server Analysis Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=324761)  
  
## <a name="see-also"></a><span data-ttu-id="19423-235">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="19423-235">See Also</span></span>  
 <span data-ttu-id="19423-236">[Relazioni tra dimensioni](../multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) </span><span class="sxs-lookup"><span data-stu-id="19423-236">[Dimension Relationships](../multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) </span></span>  
 <span data-ttu-id="19423-237">[Installare dati di esempio e progetti per l'esercitazione di modellazione multidimensionale Analysis Services](../install-sample-data-and-projects.md) </span><span class="sxs-lookup"><span data-stu-id="19423-237">[Install Sample Data and Projects for the Analysis Services Multidimensional Modeling Tutorial](../install-sample-data-and-projects.md) </span></span>  
 <span data-ttu-id="19423-238">[Distribuzione di progetti Analysis Services &#40;SSDT&#41;](deploy-analysis-services-projects-ssdt.md) </span><span class="sxs-lookup"><span data-stu-id="19423-238">[Deploy Analysis Services Projects &#40;SSDT&#41;](deploy-analysis-services-projects-ssdt.md) </span></span>  
 [<span data-ttu-id="19423-239">Prospettive nei modelli multidimensionali</span><span class="sxs-lookup"><span data-stu-id="19423-239">Perspectives in Multidimensional Models</span></span>](perspectives-in-multidimensional-models.md)  
  
  
