---
title: Archiviazione di stringhe e regole di confronto nei modelli tabulari | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 8516f0ad-32ee-4688-a304-e705143642ca
author: minewiskan
ms.author: owend
ms.openlocfilehash: 3aad4cf16c39897bc0796f4fb161eaf39abdb5fd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87723108"
---
# <a name="string-storage-and-collation-in-tabular-models"></a><span data-ttu-id="b04f2-102">Archivio di stringhe e regole di confronto nei modelli tabulari</span><span class="sxs-lookup"><span data-stu-id="b04f2-102">String Storage and Collation in Tabular Models</span></span>
  <span data-ttu-id="b04f2-103">Le stringhe (valori di testo) vengono archiviate in un formato altamente compresso nei modelli tabulari. A causa di questa compressione, è possibile ottenere risultati imprevisti quando si recuperano stringhe intere o parziali.</span><span class="sxs-lookup"><span data-stu-id="b04f2-103">Strings (text values) are stored in a highly compressed format in tabular models; because of this compression, you can get unexpected results when you retrieve entire or partial strings.</span></span> <span data-ttu-id="b04f2-104">Inoltre, poiché le regole di confronto e le impostazioni locali delle stringhe vengono ereditate in modo gerarchico dall'oggetto padre più prossimo, se la lingua della stringa non viene definita in modo esplicito, le impostazioni locali e le regole di confronto dell'oggetto padre possono influire sulla modalità di archiviazione di ogni stringa e determinare se la stringa è univoca o unita a stringhe simili secondo quanto definito nelle regole di confronto padre.</span><span class="sxs-lookup"><span data-stu-id="b04f2-104">Also, because string locale and collations are inherited hierarchically from the closest parent object, if the string language is not explicitly defined, the locale and collation of the parent can affect how each string is stored and whether the string is unique or conflated with similar strings as defined by the parent collation.</span></span>  
  
 <span data-ttu-id="b04f2-105">In questo argomento viene illustrato il meccanismo in base al quale le stringhe vengono compresse e archiviate. Inoltre vengono forniti esempi su come le regole di confronto e la lingua influiscono sui risultati delle formule di testo nei modelli tabulari.</span><span class="sxs-lookup"><span data-stu-id="b04f2-105">This topic describes the mechanism by which strings are compressed and stored, and provides examples of how collation and language affect the results of text formulas in tabular models.</span></span>  
  
## <a name="storage"></a><span data-ttu-id="b04f2-106">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="b04f2-106">Storage</span></span>  
 <span data-ttu-id="b04f2-107">Nei modelli tabulari tutti i dati sono altamente compressi affinché si adattino alla memoria.</span><span class="sxs-lookup"><span data-stu-id="b04f2-107">In tabular models all data is highly compressed to better fit in memory.</span></span> <span data-ttu-id="b04f2-108">Di conseguenza, tutte le stringhe che possono essere considerate equivalenti dal punto di vista lessicale vengono archiviate una sola volta.</span><span class="sxs-lookup"><span data-stu-id="b04f2-108">As a consequence, all strings that can be considered lexically equivalent are stored only once.</span></span> <span data-ttu-id="b04f2-109">La prima istanza della stringa viene utilizzata come rappresentazione canonica, dopodiché ogni stringa equivalente viene indicizzata allo stesso valore compresso della prima occorrenza.</span><span class="sxs-lookup"><span data-stu-id="b04f2-109">The first instance of the string is used as the canonical representation and thereafter each equivalent string is indexed to the same compressed value as the first occurrence.</span></span>  
  
 <span data-ttu-id="b04f2-110">La domanda cruciale è la seguente: cosa si intende per stringa equivalente dal punto di vista lessicale?</span><span class="sxs-lookup"><span data-stu-id="b04f2-110">The key question is: what constitutes a lexically equivalent string?</span></span> <span data-ttu-id="b04f2-111">Due stringhe sono considerate equivalenti dal punto di vista lessicale se possono essere considerate la stessa parola.</span><span class="sxs-lookup"><span data-stu-id="b04f2-111">Two strings are considered lexically equivalent if they can be considered as the same word.</span></span> <span data-ttu-id="b04f2-112">Ad esempio, in inglese quando si cerca la parola **violin** in un dizionario, è possibile trovare la voce **Violin** o **violin**, a seconda dei criteri editoriali del dizionario, ma in genere le parole possono risultare equivalenti e la differenza nell'utilizzo delle maiuscole può essere ignorata.</span><span class="sxs-lookup"><span data-stu-id="b04f2-112">For example, in English when you search for the word **violin** in a dictionary, you might find the entry **Violin** or **violin**, depending on the editorial policy of the dictionary, but generally you consider both words equivalent, and disregard the difference in capitalization.</span></span> <span data-ttu-id="b04f2-113">In un modello tabulare, il fattore che determina se due stringhe sono equivalenti dal punto di vista lessicale non è un criterio editoriale o una preferenza dell'utente, ma le impostazioni locali e l'ordine delle regole di confronto assegnato alla colonna.</span><span class="sxs-lookup"><span data-stu-id="b04f2-113">In a tabular model, the factor that determines whether two strings are lexically equivalent is not editorial policy or even user preference, but the locale and collation order assigned to the column.</span></span>  
  
 <span data-ttu-id="b04f2-114">Di conseguenza, sono le regole di confronto e le impostazioni locali a determinare la modalità di utilizzo delle lettere maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="b04f2-114">Therefore, the decision of whether uppercase and lowercase letters should be handled as the same or different depends on the collation and locale.</span></span> <span data-ttu-id="b04f2-115">Per una parola qualsiasi all'interno delle impostazioni locali, la prima occorrenza trovata in una particolare colonna verrà quindi utilizzata come rappresentazione canonica di quella parola e la stringa verrà archiviata in un formato non compresso.</span><span class="sxs-lookup"><span data-stu-id="b04f2-115">For any particular word within that locale, the first occurrence of the word that is found within a particular column therefore serves as the canonical representation of that word and that string is stored in uncompressed format.</span></span>  <span data-ttu-id="b04f2-116">Tutte le altre stringhe verranno testate rispetto alla prima occorrenza e se superano il test di equivalenza, verranno assegnate al valore compresso della prima occorrenza.</span><span class="sxs-lookup"><span data-stu-id="b04f2-116">All other strings are tested against the first occurrence, and if they match the equivalence test, they are assigned to the compressed value of the first occurrence.</span></span> <span data-ttu-id="b04f2-117">In seguito, dopo essere stati recuperati i valori compressi verranno rappresentati utilizzando il valore non compresso della prima occorrenza della stringa.</span><span class="sxs-lookup"><span data-stu-id="b04f2-117">Later, when the compressed values are retrieved they are represented using the uncompressed value of the first occurrence of the string.</span></span>  
  
 <span data-ttu-id="b04f2-118">Un esempio aiuterà a capire questo concetto.</span><span class="sxs-lookup"><span data-stu-id="b04f2-118">An example will help to clarify how this works.</span></span> <span data-ttu-id="b04f2-119">La colonna "Classification - English" è stata estratta da una tabella contenente informazioni su piante e alberi.</span><span class="sxs-lookup"><span data-stu-id="b04f2-119">The following column "Classification - English" was extracted from a table that contains information about plants and trees.</span></span> <span data-ttu-id="b04f2-120">Per ogni pianta (i nomi delle piante non sono riportati), la colonna di classificazione mostra la categoria generale di pianta.</span><span class="sxs-lookup"><span data-stu-id="b04f2-120">For each plant (the names of the plants are not shown here) the classification column shows the general category of plant.</span></span>  
  
|<span data-ttu-id="b04f2-121">Classification - English</span><span class="sxs-lookup"><span data-stu-id="b04f2-121">Classification - English</span></span>|  
|-------------------------------|  
|<span data-ttu-id="b04f2-122">trEE</span><span class="sxs-lookup"><span data-stu-id="b04f2-122">trEE</span></span>|  
|<span data-ttu-id="b04f2-123">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-123">PlAnT</span></span>|  
|<span data-ttu-id="b04f2-124">trEE</span><span class="sxs-lookup"><span data-stu-id="b04f2-124">TREE</span></span>|  
|<span data-ttu-id="b04f2-125">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-125">PLANT</span></span>|  
|<span data-ttu-id="b04f2-126">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-126">Plant</span></span>|  
|<span data-ttu-id="b04f2-127">Albero</span><span class="sxs-lookup"><span data-stu-id="b04f2-127">Tree</span></span>|  
|<span data-ttu-id="b04f2-128">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-128">plant</span></span>|  
|<span data-ttu-id="b04f2-129">trEE</span><span class="sxs-lookup"><span data-stu-id="b04f2-129">tReE</span></span>|  
|<span data-ttu-id="b04f2-130">tree</span><span class="sxs-lookup"><span data-stu-id="b04f2-130">tree</span></span>|  
|<span data-ttu-id="b04f2-131">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-131">pLaNt</span></span>|  
|<span data-ttu-id="b04f2-132">trEE</span><span class="sxs-lookup"><span data-stu-id="b04f2-132">tREE</span></span>|  
  
 <span data-ttu-id="b04f2-133">I dati probabilmente provengono da molte origini diverse, pertanto l'utilizzo delle maiuscole e minuscole e degli accenti non è coerente e queste differenze sono state archiviate così come sono nel database relazionale.</span><span class="sxs-lookup"><span data-stu-id="b04f2-133">Perhaps the data came from many different sources, and so the casing and use of accents was inconsistent, and the relational database stored those differences as is.</span></span> <span data-ttu-id="b04f2-134">In generale i valori sono **Plant** o **Tree**, solo con maiuscole e minuscole diverse.</span><span class="sxs-lookup"><span data-stu-id="b04f2-134">But in general the values are either **Plant** or **Tree**, just with different casing.</span></span>  
  
 <span data-ttu-id="b04f2-135">Quando questi valori vengono caricati in un modello tabulare che utilizza le regole di confronto predefinite e l'ordinamento per l'inglese (Stati Uniti), case non è importante, pertanto vengono archiviati solo due valori per l'intera colonna:</span><span class="sxs-lookup"><span data-stu-id="b04f2-135">When these values are loaded into a tabular model that uses the default collation and sorting order for English (United States), case is not important, so only two values would be stored for the entire column:</span></span>  
  
|<span data-ttu-id="b04f2-136">Classification - English</span><span class="sxs-lookup"><span data-stu-id="b04f2-136">Classification - English</span></span>|  
|-------------------------------|  
|<span data-ttu-id="b04f2-137">trEE</span><span class="sxs-lookup"><span data-stu-id="b04f2-137">trEE</span></span>|  
|<span data-ttu-id="b04f2-138">PlAnT</span><span class="sxs-lookup"><span data-stu-id="b04f2-138">PlAnT</span></span>|  
  
 <span data-ttu-id="b04f2-139">Se si utilizza la colonna **Classification-English**nel modello, ogni volta che si visualizza la classificazione Plant, non vengono visualizzati i valori originali, con i vari utilizzi di maiuscole e minuscole, ma solo la prima istanza.</span><span class="sxs-lookup"><span data-stu-id="b04f2-139">If you use the column, **Classification - English**, in your model, wherever you display plant classification you will see not the original values, with their various uses of upper and lower case, but only the first instance.</span></span> <span data-ttu-id="b04f2-140">Il motivo è che tutti i diversi utilizzi delle maiuscole e minuscole della parola **tree** vengono considerati equivalenti da queste regole di confronto e da queste impostazioni locali. Di conseguenza, è stata mantenuta una sola stringa e la prima istanza di tale stringa rilevata dal sistema è quella che è stata salvata.</span><span class="sxs-lookup"><span data-stu-id="b04f2-140">The reason is that all the uppercase and lowercase variants of **tree** are considered equivalent in this collation and locale; therefore, only one string was preserved and the first instance of that string that is encountered by the system is the one that is saved.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="b04f2-141">È possibile decidere quale stringa sarà la prima a essere archiviata, in base a ciò che viene considerato corretto, ma tale operazione potrebbe risultare molto difficile.</span><span class="sxs-lookup"><span data-stu-id="b04f2-141">You might decide that you want to define which string will be the first to store, according to what you consider correct, but this could be very hard to so.</span></span> <span data-ttu-id="b04f2-142">Non esiste un modo semplice per determinare in anticipo quale riga deve essere elaborata per prima dal motore, considerando che tutti i valori vengono considerati equivalenti.</span><span class="sxs-lookup"><span data-stu-id="b04f2-142">There is no simple way to determine in advance which row should be processed first by the engine, given that all values are considered to be the same.</span></span> <span data-ttu-id="b04f2-143">In alternativa, se è necessario impostare il valore standard, è necessario eseguire la pulizia di tutte le stringhe prima di caricare il modello.</span><span class="sxs-lookup"><span data-stu-id="b04f2-143">Instead, if you need to set the standard value, you should cleanse all your strings before loading the model.</span></span>  
  
## <a name="locale-and-collation-order"></a><span data-ttu-id="b04f2-144">Impostazioni locali e ordinamento delle regole di confronto</span><span class="sxs-lookup"><span data-stu-id="b04f2-144">Locale and Collation Order</span></span>  
 <span data-ttu-id="b04f2-145">Quando si confrontano le stringhe (valori di testo), ciò che definisce l'equivalenza è in genere l'aspetto culturale della modalità di interpretazione di tali stringhe.</span><span class="sxs-lookup"><span data-stu-id="b04f2-145">When comparing strings (text values), what defines equivalence is normally the cultural aspect of how such strings are interpreted.</span></span> <span data-ttu-id="b04f2-146">In alcune culture un accento o l'utilizzo delle maiuscole e maiuscole per un carattere può modificare completamente il significato della stringa. Di conseguenza, tali differenze vengono prese in considerazione per determinare l'equivalenza per un'area o una lingua particolare.</span><span class="sxs-lookup"><span data-stu-id="b04f2-146">In some cultures an accent or the capitalization of a character can completely change the meaning of the string; therefore, typically such differences are considered when determining equivalency for any particular language or region.</span></span>  
  
 <span data-ttu-id="b04f2-147">In genere, il computer è già configurato in base alla propria cultura e al proprio comportamento linguistico e le operazioni eseguite sulle stringhe, ad esempio l'ordinamento e il confronto di valori del testo, generano i risultati previsti.</span><span class="sxs-lookup"><span data-stu-id="b04f2-147">Usually, when you use your computer it is already configured to match your own cultural expectations and linguistic behavior, and string operations such as sorting and comparing text values behaves as you would expect.</span></span> <span data-ttu-id="b04f2-148">Le impostazioni che controllano il comportamento specifico della lingua vengono definite tramite le **impostazioni locali e della lingua** di Windows.</span><span class="sxs-lookup"><span data-stu-id="b04f2-148">The settings that control language-specific behavior are defined through the **Locale and Regional** settings in Windows.</span></span> <span data-ttu-id="b04f2-149">Le applicazioni leggono queste impostazioni e modificano di conseguenza il loro comportamento.</span><span class="sxs-lookup"><span data-stu-id="b04f2-149">Applications read those settings and change their behavior accordingly.</span></span> <span data-ttu-id="b04f2-150">In alcuni casi, un'applicazione potrebbe disporre di una caratteristica che consente di modificare il comportamento culturale dell'applicazione o il modo in cui vengono confrontate le stringhe.</span><span class="sxs-lookup"><span data-stu-id="b04f2-150">In some cases, an application might have a feature that allows you to change the cultural behavior of the application or the way in which strings are compared.</span></span>  
  
 <span data-ttu-id="b04f2-151">Quando si crea un database del modello tabulare, per impostazione predefinita il database eredita queste impostazioni culturali e linguistiche sotto forma di un identificatore della lingua e di regole di confronto.</span><span class="sxs-lookup"><span data-stu-id="b04f2-151">When you are creating a tabular model database, by default the database inherits these cultural and linguistic settings in the form of a language identifier and collation.</span></span>  
  
-   <span data-ttu-id="b04f2-152">L'identificatore della lingua definisce il set di caratteri da utilizzare per le stringhe in base alla propria cultura.</span><span class="sxs-lookup"><span data-stu-id="b04f2-152">The language identifier defines the character set you want to use for your strings according to your culture.</span></span>  
  
-   <span data-ttu-id="b04f2-153">Le regole di confronto definiscono l'ordinamento dei caratteri e la relativa equivalenza.</span><span class="sxs-lookup"><span data-stu-id="b04f2-153">The collation defines the ordering of the characters and their equivalence.</span></span>  
  
 <span data-ttu-id="b04f2-154">È importante notare che un identificatore della lingua non identifica soltanto una lingua, ma anche il paese o l'area geografica in cui tale lingua viene utilizzata.</span><span class="sxs-lookup"><span data-stu-id="b04f2-154">It is important to note that a language identifier not only identifies a language but, also the country or region where the language is used.</span></span> <span data-ttu-id="b04f2-155">Ogni identificatore della lingua è associato anche a regole di confronto specificate.</span><span class="sxs-lookup"><span data-stu-id="b04f2-155">Each language identifier also has a default collation specification.</span></span> <span data-ttu-id="b04f2-156">Per ulteriori informazioni sugli identificatori di lingua, vedere la pagina relativa agli [ID delle impostazioni locali assegnati da Microsoft](https://msdn.microsoft.com/goglobal/bb964664.aspx).</span><span class="sxs-lookup"><span data-stu-id="b04f2-156">For more information about language identifiers, see [Locale IDs Assigned by Microsoft](https://msdn.microsoft.com/goglobal/bb964664.aspx).</span></span> <span data-ttu-id="b04f2-157">È possibile utilizzare la colonna LCID Dec per ottenere l'ID corretto quando si inserisce manualmente un valore.</span><span class="sxs-lookup"><span data-stu-id="b04f2-157">You can use the LCID Dec column to get the correct ID when manually inserting a value.</span></span> <span data-ttu-id="b04f2-158">Per altre informazioni sul concetto SQL delle regole di confronto, vedere [COLLATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/collations).</span><span class="sxs-lookup"><span data-stu-id="b04f2-158">For more information about the SQL concept of collations, see [COLLATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/collations).</span></span> <span data-ttu-id="b04f2-159">Per informazioni sulle designazioni delle regole di confronto e sugli stili di confronto per i nomi delle regole di confronto di Windows, vedere [Windows_collation_name &#40;Transact-SQL&#41;](/sql/t-sql/statements/windows-collation-name-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="b04f2-159">For information about the collation designators and the comparison styles for Windows collation names, see [Windows Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/windows-collation-name-transact-sql).</span></span> <span data-ttu-id="b04f2-160">L'argomento [Nome delle regole di confronto di SQL Server &#40;Transact-SQL&#41;](/sql/t-sql/statements/sql-server-collation-name-transact-sql) offre una mappa dei nomi delle regole di confronto di Windows e i nomi usati per SQL.</span><span class="sxs-lookup"><span data-stu-id="b04f2-160">The topic, [SQL Server Collation Name &#40;Transact-SQL&#41;](/sql/t-sql/statements/sql-server-collation-name-transact-sql), maps the Windows collation names to the names used for SQL.</span></span>  
  
 <span data-ttu-id="b04f2-161">Dopo avere creato il database del modello tabulare, tutti i nuovi oggetti del modello erediteranno gli attributi della lingua e delle regole di confronto dagli attributi del database.</span><span class="sxs-lookup"><span data-stu-id="b04f2-161">Once your tabular model database has been created, all new objects in the model will inherit the language and collation attributes from the database attributes.</span></span> <span data-ttu-id="b04f2-162">Questo vale per tutti gli oggetti.</span><span class="sxs-lookup"><span data-stu-id="b04f2-162">This is true for all objects.</span></span> <span data-ttu-id="b04f2-163">Il percorso di ereditarietà ha inizio dall'oggetto. Nell'elemento padre vengono cercati eventuali attributi della lingua e delle regole di confronto da ereditare e se non ne vengono trovati la ricerca di tali attributi viene spostata al livello del database.</span><span class="sxs-lookup"><span data-stu-id="b04f2-163">The inheritance path begins at the object, looks at the parent for any language and collation attributes to inherit, and if none are found, continues to the top and finds the language and collation attributes at the database level.</span></span> <span data-ttu-id="b04f2-164">In altre parole, se non si specificano gli attributi della lingua e delle regole di confronto per un oggetto, per impostazione predefinita l'oggetto eredita gli attributi dall'elemento padre più prossimo.</span><span class="sxs-lookup"><span data-stu-id="b04f2-164">In other words, if you do not specify the language and collation attributes for an object, by default, the object inherits the attributes of its closest parent.</span></span>  
  
 <span data-ttu-id="b04f2-165">Per le colonne, gli attributi della lingua e delle regole di confronto vengono ereditati alla creazione, secondo le regole seguenti:</span><span class="sxs-lookup"><span data-stu-id="b04f2-165">For columns, the language and collation attributes are inherited at creation, according to the following rules:</span></span>  
  
1.  <span data-ttu-id="b04f2-166">Nell'oggetto dimensione padre vengono cercati gli attributi della lingua e delle regole di confronto.</span><span class="sxs-lookup"><span data-stu-id="b04f2-166">The parent dimension object is searched for language and collation attributes.</span></span> <span data-ttu-id="b04f2-167">Se vengono trovati entrambi, i valori vengono copiati negli attributi della colonna, se ne viene trovato solo uno, l'altro viene dedotto da quello esistente ed entrambi vengono assegnati, se nessuno dei due valori viene trovato, è necessario procedere al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="b04f2-167">If both values exist, they are copied to the column attributes; if only one exists, the other is inferred from the existing one and both are assigned; if none exist, move to next step.</span></span>  
  
2.  <span data-ttu-id="b04f2-168">La ricerca nell'oggetto di database viene eseguita seguendo lo stesso processo descritto nel Passaggio 1 per le dimensioni. Se non viene trovato alcun attributo, procedere al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="b04f2-168">The database object is searched using the same process described in Step 1 for dimensions; if no attributes are found, move to the next step.</span></span>  
  
3.  <span data-ttu-id="b04f2-169">La ricerca nell'oggetto server viene eseguita seguendo lo stesso processo descritto nel Passaggio 1 per le dimensioni. Se non viene trovato alcun attributo, viene utilizzato l'identificatore della lingua di Windows e l'attributo delle regole di confronto viene dedotto da questo valore.</span><span class="sxs-lookup"><span data-stu-id="b04f2-169">The server object is searched using the same process described in Step 1 for dimensions; if no attributes are found, the column uses the Windows language identifier and infers the collation attribute from that value.</span></span>  
  
 <span data-ttu-id="b04f2-170">È importante notare che in genere l'identificatore della lingua e l'ordinamento delle regole di confronto nel database di origine non hanno praticamente alcun effetto sulla modalità di archiviazione dei valori nella colonna del modello tabulare.</span><span class="sxs-lookup"><span data-stu-id="b04f2-170">It is important to note that typically the language identifier and collation order in the source database has little to no effect on how values are stored in the tabular model column.</span></span> <span data-ttu-id="b04f2-171">Si verifica un'eccezione se il database di origine trasforma o filtra i valori richiesti.</span><span class="sxs-lookup"><span data-stu-id="b04f2-171">The exception is if the source database transforms or filters the requested values.</span></span>  
  
  
