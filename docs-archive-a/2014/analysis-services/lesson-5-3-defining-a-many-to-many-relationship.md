---
title: Definizione di una relazione molti-a-molti | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 7bebb174-148c-4cbb-a285-2f6d536a16d5
author: minewiskan
ms.author: owend
ms.openlocfilehash: fb4e18831ae23b8cf1f0702b357672f7520478a8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87714751"
---
# <a name="defining-a-many-to-many-relationship"></a><span data-ttu-id="a9c3e-102">Definizione di una relazione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="a9c3e-102">Defining a Many-to-Many Relationship</span></span>
  <span data-ttu-id="a9c3e-103">Quando si definisce una dimensione, generalmente ogni fatto viene unito in join a un solo membro della dimensione, mentre un singolo membro della dimensione può essere associato a molti fatti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-103">When you define a dimension, typically each fact joins to one and only one dimension member, whereas a single dimension member can be associated with many different facts.</span></span> <span data-ttu-id="a9c3e-104">A ogni cliente possono essere ad esempio associati più ordini, ma ogni ordine appartiene a un unico cliente.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-104">For example, each customer can have many orders but each order belongs to a single customer.</span></span> <span data-ttu-id="a9c3e-105">Nella terminologia dei database relazionali, questa viene definita una *relazione uno-a-molti*.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-105">In relational database terminology, this is referred to as a *one-to-many relationship*.</span></span> <span data-ttu-id="a9c3e-106">A volte, tuttavia, è possibile che un singolo fatto venga unito in join a più membri della dimensione.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-106">However, sometimes a single fact can join to multiple dimension members.</span></span> <span data-ttu-id="a9c3e-107">Nella terminologia dei database relazionali, questa viene definita una *relazione molti-a-molti*.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-107">In relational database terminology, this is referred to as a *many-to-many relationship*.</span></span> <span data-ttu-id="a9c3e-108">Ad esempio, i motivi che determinano un acquisto da parte di un cliente possono essere diversi e un motivo per l'acquisto può essere associato a più acquisti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-108">For example, a customer may have multiple reasons for making a purchase, and a purchase reason can be associated with multiple purchases.</span></span> <span data-ttu-id="a9c3e-109">Una tabella di join viene utilizzata per definire i motivi di vendita correlati a ogni acquisto.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-109">A join table is used to define the sales reasons that relate to each purchase.</span></span> <span data-ttu-id="a9c3e-110">Una dimensione Sales Reason creata a partire da relazioni di questo tipo può disporre quindi di più membri che corrispondono a una singola transazione di vendita.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-110">A Sales Reason dimension constructed from such relationships would then have multiple members that relate to a single sales transaction.</span></span> <span data-ttu-id="a9c3e-111">Le dimensioni molti-a-molti consentono di espandere la modellazione dimensionale oltre lo schema star classico e supportano analisi complesse quando le dimensioni non sono direttamente associate a una tabella dei fatti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-111">Many-to-many dimensions expand the dimensional model beyond the classic star schema and support complex analytics when dimensions are not directly related to a fact table.</span></span>

 <span data-ttu-id="a9c3e-112">In [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]è possibile definire una relazione molti-a-molti tra una dimensione e un gruppo di misure specificando una tabella dei fatti intermedia unita in join alla tabella delle dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-112">In [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], you define a many-to-many relationship between a dimension and a measure group by specifying an intermediate fact table that is joined to the dimension table.</span></span> <span data-ttu-id="a9c3e-113">Una tabella dei fatti intermedia viene a sua volta unita in join a una tabella delle dimensioni intermedia alla quale è associata la tabella dei fatti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-113">An intermediate fact table is joined, in turn, to an intermediate dimension table to which the fact table is joined.</span></span> <span data-ttu-id="a9c3e-114">Le relazioni molti-a-molti che intercorrono tra la tabella dei fatti intermedia, le tabelle delle dimensioni nella relazione e la dimensione intermedia determinano la creazione delle relazioni molti-a-molti tra i membri della dimensione primaria e il gruppo di misure specificato dalla relazione.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-114">The many-to-many relationships between the intermediate fact table and both the dimension tables in the relationship and the intermediate dimension creates the many-to-many relationships between members of the primary dimension and measures in the measure group that is specified by the relationship.</span></span> <span data-ttu-id="a9c3e-115">Per definire relazioni molti-a-molti tra una dimensione e un gruppo di misure tramite un gruppo di misure intermedio, quest'ultimo deve condividere una o più dimensioni con il gruppo di misure originale.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-115">In order to define a many-to-many relationship between a dimension and a measure group through an intermediate measure group, the intermediate measure group must share one or more dimensions with the original measure group.</span></span>

 <span data-ttu-id="a9c3e-116">Con una dimensione molti-a-molti, i valori sono di tipo distinct sommati, ovvero non verranno aggregati più di una volta nel membro Totale.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-116">With a many-to-many dimension, values are distinct summed, which means that they do not aggregate more than once to the All member.</span></span>

> [!NOTE]
>  <span data-ttu-id="a9c3e-117">Per supportare una relazione di tipo molti-a-molti, è necessario definire una relazione tra chiave primaria e chiave esterna nella vista origine dati tra tutte le tabelle necessarie.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-117">In order to support a many-to-many dimension relationship, a primary key-foreign key relationship must be defined in the data source view between all the tables that are involved.</span></span> <span data-ttu-id="a9c3e-118">In caso contrario, non sarà possibile selezionare il gruppo di misure intermedio corretto quando la relazione viene stabilita nella scheda **Utilizzo dimensioni** di Progettazione cubi.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-118">Otherwise, you will not be able to select the correct intermediate measure group when you establish the relationship in the **Dimension Usage** tab of Cube Designer.</span></span>

 <span data-ttu-id="a9c3e-119">Per altre informazioni, vedere [Relazioni tra dimensioni](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md)e [Definire una relazione molti-a-molti e le relative proprietà](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a9c3e-119">For more information, see [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md), and [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>

 <span data-ttu-id="a9c3e-120">Nelle attività di questo argomento vengono definiti la dimensione Sales Reasons e il gruppo di misure Sales Reasons nonché una relazione molti-a-molti tra la dimensione Sales Reasons e il gruppo di misure Internet Sales tramite il gruppo di misure Sales Reasons.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-120">In the tasks in this topic, you define the Sales Reasons dimension and the Sales Reasons measure group, and you define a many-to-many relationship between the Sales Reasons dimension and the Internet Sales measure group through the Sales Reasons measure group.</span></span>

## <a name="adding-required-tables-to-the-data-source-view"></a><span data-ttu-id="a9c3e-121">Aggiunta delle tabelle necessarie alla vista origine dati</span><span class="sxs-lookup"><span data-stu-id="a9c3e-121">Adding Required Tables to the Data Source View</span></span>

1.  <span data-ttu-id="a9c3e-122">Aprire Progettazione vista origine dati per la vista origine dati **Adventure Works DW 2012** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-122">Open Data Source View Designer for the **Adventure Works DW 2012** data source view.</span></span>

2.  <span data-ttu-id="a9c3e-123">Fare clic con il pulsante destro del mouse in un punto qualsiasi del riquadro **Libreria diagrammi** , scegliere **nuovo diagramma**e specificare `Internet Sales Order Reasons` come nome per il nuovo diagramma.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-123">Right-click anywhere in the **Diagram Organizer** pane, click **New Diagram**, and specify `Internet Sales Order Reasons` as the name for this new diagram.</span></span>

3.  <span data-ttu-id="a9c3e-124">Trascinare la tabella **InternetSales** dal riquadro **Tabelle** al riquadro **Diagramma** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-124">Drag the **InternetSales** table to the **Diagram** pane from the **Tables** pane.</span></span>

4.  <span data-ttu-id="a9c3e-125">Fare clic con il pulsante destro del mouse su un punto qualsiasi all'interno del riquadro **Diagramma** e quindi scegliere **Aggiungi/Rimuovi tabelle**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-125">Right-click anywhere in the **Diagram** pane, and then click **Add/Remove Tables**.</span></span>

5.  <span data-ttu-id="a9c3e-126">Nella finestra di dialogo **Aggiungi/Rimuovi tabelle** aggiungere le tabelle **DimSalesReason** e **FactInternetSalesReason** all'elenco **Oggetti inclusi** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-126">In the **Add/Remove Tables** dialog box, add the **DimSalesReason** table and the **FactInternetSalesReason** table to the **Included objects** list, and then click **OK**.</span></span>

     <span data-ttu-id="a9c3e-127">Si noti che le relazioni tra chiave primaria e chiave esterna tra le tabelle incluse vengono stabilite automaticamente poiché tali relazioni sono definite nel database relazionale sottostante.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-127">Notice that the primary key-foreign key relationships between the tables that are involved are established automatically because those relationships are defined in the underlying relational database.</span></span> <span data-ttu-id="a9c3e-128">Se le relazioni non fossero definite nel database relazionale sottostante, sarebbe necessario definirle nella vista origine dati.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-128">If these relationships were not defined in the underlying relational database, you would have to define them in the data source view.</span></span>

6.  <span data-ttu-id="a9c3e-129">Scegliere **Layout automatico** dal menu **Formato**e quindi fare clic su **Diagramma**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-129">On the **Format** menu, point to **Auto Layout**, and then click **Diagram**.</span></span>

7.  <span data-ttu-id="a9c3e-130">Nella Finestra Proprietà modificare la proprietà **FriendlyName** della tabella **DimSalesReason** in `SalesReason` , quindi modificare la proprietà **FriendlyName** della tabella **FactInternetSalesReason** in `InternetSalesReason` .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-130">In the Properties window, change the **FriendlyName** property of the **DimSalesReason** table to `SalesReason`, and then change the **FriendlyName** property of the **FactInternetSalesReason** table to `InternetSalesReason`.</span></span>

8.  <span data-ttu-id="a9c3e-131">Nel riquadro **Tabelle** espandere **InternetSalesReason (dbo.FactInternetSalesReason)**, fare clic su **SalesOrderNumber**e quindi controllare la proprietà **DataType** per questa colonna dati nella finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-131">In the **Tables** pane, expand **InternetSalesReason (dbo.FactInternetSalesReason)**, click **SalesOrderNumber**, and then review the **DataType** property for this data column in the Properties window.</span></span>

     <span data-ttu-id="a9c3e-132">Si noti che la colonna **SalesOrderNumber** è di tipo stringa.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-132">Notice that the data type for the **SalesOrderNumber** column is a string data type.</span></span>

9. <span data-ttu-id="a9c3e-133">Esaminare i tipi di dati per le altre colonne della `InternetSalesReason` tabella.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-133">Review the data types for the other columns in the `InternetSalesReason` table.</span></span>

     <span data-ttu-id="a9c3e-134">Si noti che i tipi di dati delle altre due colonne della tabella sono tipi di dati numerici.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-134">Notice that the data types for the other two columns in this table are numeric data types.</span></span>

10. <span data-ttu-id="a9c3e-135">Nel riquadro **Tabelle** fare clic con il pulsante destro del mouse su **InternetSalesReason (dbo.FactInternetSalesReason)** e quindi scegliere **Esplora dati**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-135">In the **Tables** pane, right-click **InternetSalesReason (dbo.FactInternetSalesReason)**, and then click **Explore Data**.</span></span>

     <span data-ttu-id="a9c3e-136">Si noti che per ogni numero di riga all'interno di ogni ordine un valore chiave identifica il motivo della vendita per l'acquisto di quell'elemento di riga, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-136">Notice that, for each line number within each order, a key value identifies the sales reason for the purchase of that line item, as shown in the following image.</span></span>

     <span data-ttu-id="a9c3e-137">![Valore chiave per l'identificazione del motivo di vendita per gli acquisti](../../2014/tutorials/media/l5-many-to-many-1.gif "Valore chiave per l'identificazione del motivo di vendita per gli acquisti")</span><span class="sxs-lookup"><span data-stu-id="a9c3e-137">![Key value to identify sales reason for purchases](../../2014/tutorials/media/l5-many-to-many-1.gif "Key value to identify sales reason for purchases")</span></span>

## <a name="defining-the-intermediate-measure-group"></a><span data-ttu-id="a9c3e-138">Definizione del gruppo di misure intermedio</span><span class="sxs-lookup"><span data-stu-id="a9c3e-138">Defining the Intermediate Measure Group</span></span>

1.  <span data-ttu-id="a9c3e-139">Passare allo strumento Progettazione cubi per il cubo [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial, quindi selezionare la scheda **Struttura del cubo** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-139">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Cube Structure** tab.</span></span>

2.  <span data-ttu-id="a9c3e-140">Fare clic con il pulsante destro del mouse su un punto qualsiasi all'interno del riquadro **Misure** e quindi scegliere **Nuovo gruppo di misure**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-140">Right-click anywhere in the **Measures** pane, and then click **New Measure Group**.</span></span> <span data-ttu-id="a9c3e-141">Per altre informazioni, vedere [Creare misure e gruppi di misure nei modelli multidimensionali](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span><span class="sxs-lookup"><span data-stu-id="a9c3e-141">For more information, see [Create Measures and Measure Groups in Multidimensional Models](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span></span>

3.  <span data-ttu-id="a9c3e-142">Nella finestra di dialogo **nuovo gruppo di misure** , selezionare `InternetSalesReason` nell'elenco **selezionare una tabella dalla vista origine dati** , quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-142">In the **New Measure Group** dialog box, select `InternetSalesReason` in the **Select a table from the data source view** list, and then click **OK**.</span></span>

     <span data-ttu-id="a9c3e-143">Si noti che il gruppo di misure **Internet Sales Reason** viene visualizzato nel riquadro **Misure** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-143">Notice that the **Internet Sales Reason** measure group now appears in the **Measures** pane.</span></span>

4.  <span data-ttu-id="a9c3e-144">Espandere il gruppo di misure **Internet Sales Reason** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-144">Expand the **Internet Sales Reason** measure group.</span></span>

     <span data-ttu-id="a9c3e-145">Si noti che per questo nuovo gruppo di misure è definita una sola misura, ovvero la misura **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-145">Notice that only a single measure is defined for this new measure group, the **Internet Sales Reason Count** measure.</span></span>

5.  <span data-ttu-id="a9c3e-146">Selezionare **Internet Sales Reason Count** e controllare le proprietà della misura della finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-146">Select **Internet Sales Reason Count** and review the properties of this measure in the Properties window.</span></span>

     <span data-ttu-id="a9c3e-147">Si noti che la proprietà **AggregateFunction** per questa misura è definita come **Conteggio** anziché come **Somma**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-147">Notice that the **AggregateFunction** property for this measure is defined as **Count** instead of **Sum**.</span></span> [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]<span data-ttu-id="a9c3e-148">sceglie **count** perché il tipo di dati sottostante è un tipo di dati String.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-148">chose **Count** because the underlying data type is a string data type.</span></span> <span data-ttu-id="a9c3e-149">Le altre due colonne della tabella dei fatti sottostante non sono selezionate come misure poiché [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] le ha rilevate come chiavi numeriche anziché come misure effettive.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-149">The other two columns in the underlying fact table were not selected as measures because [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] detected them as numeric keys instead of as actual measures.</span></span> <span data-ttu-id="a9c3e-150">Per altre informazioni, vedere [Definire una funzione semiadditiva](multidimensional-models/define-semiadditive-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="a9c3e-150">For more information, see [Define Semiadditive Behavior](multidimensional-models/define-semiadditive-behavior.md).</span></span>

6.  <span data-ttu-id="a9c3e-151">Nella finestra Proprietà, impostare la proprietà **Visible** della misura **Internet Sales Reason Count** su **False**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-151">In the Properties window, change the **Visible** property of the **Internet Sales Reason Count** measure to **False**.</span></span>

     <span data-ttu-id="a9c3e-152">Questa misura viene utilizzata solo per unire in join la dimensione Sales Reason che verrà definita successivamente con il gruppo di misure Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-152">This measure will only be used to join the Sales Reason dimension that you will define next to the Internet Sales measure group.</span></span> <span data-ttu-id="a9c3e-153">Non sarà possibile visualizzare direttamente questa misura.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-153">Users will not browse this measure directly.</span></span>

     <span data-ttu-id="a9c3e-154">Nella figura successiva vengono illustrate le proprietà della misura **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-154">The following image shows the properties for the **Internet Sales Reason Count** measure.</span></span>

     <span data-ttu-id="a9c3e-155">![Proprietà della misura Internet Sales Reason Count](../../2014/tutorials/media/l5-many-to-many-2.gif "Proprietà della misura Internet Sales Reason Count")</span><span class="sxs-lookup"><span data-stu-id="a9c3e-155">![Properties for Internet Sales Reason Count measure](../../2014/tutorials/media/l5-many-to-many-2.gif "Properties for Internet Sales Reason Count measure")</span></span>

## <a name="defining-the-many-to-many-dimension"></a><span data-ttu-id="a9c3e-156">Definizione della dimensione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="a9c3e-156">Defining the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="a9c3e-157">In Esplora soluzioni fare clic con il pulsante destro del mouse su **Dimensioni**e quindi scegliere **Nuova dimensione**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-157">In Solution Explorer, right-click **Dimensions**, and then click **New Dimension**.</span></span>

2.  <span data-ttu-id="a9c3e-158">Nella pagina iniziale di **Creazione guidata dimensione** fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-158">On the **Welcome to the Dimension Wizard** page, click **Next**.</span></span>

3.  <span data-ttu-id="a9c3e-159">Nella pagina **Selezione metodo di creazione** verificare che la pagina **Usa una tabella esistente** sia selezionata e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-159">On the **Select Creation Method** page, verify that the **Use an existing table** option is selected, and then click **Next**.</span></span>

4.  <span data-ttu-id="a9c3e-160">Nella pagina **Impostazione informazioni origine** verificare che la vista origine dati [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 sia selezionata.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-160">On the **Specify Source Information** page, verify that the [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 data source view is selected.</span></span>

5.  <span data-ttu-id="a9c3e-161">Nell'elenco **tabella principale** selezionare `SalesReason` .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-161">In the **Main table** list, select `SalesReason`.</span></span>

6.  <span data-ttu-id="a9c3e-162">Verificare che l'elenco **Colonne chiave** contenga **SalesReasonKey** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-162">In the **Key columns** list, verify that **SalesReasonKey** is listed.</span></span>

7.  <span data-ttu-id="a9c3e-163">Nell'elenco **Colonna nome** selezionare **SalesReasonName**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-163">In the **Name column** list, select **SalesReasonName**.</span></span>

8.  <span data-ttu-id="a9c3e-164">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-164">Click **Next**.</span></span>

9. <span data-ttu-id="a9c3e-165">Nella pagina **Selezione attributi dimensione** l'attributo **Sales Reason Key** è selezionato automaticamente perché è l'attributo chiave.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-165">On the **Select Dimension Attributes** page, the **Sales Reason Key** attribute is automatically selected because it is the key attribute.</span></span> <span data-ttu-id="a9c3e-166">Selezionare la casella di controllo accanto all'attributo **Sales Reason Reason Type** , modificare il nome in `Sales Reason Type` , quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-166">Select the check box beside the **Sales Reason Reason Type** attribute, change its name to `Sales Reason Type`, and then click **Next**.</span></span>

10. <span data-ttu-id="a9c3e-167">Nella pagina **Completamento procedura guidata** fare clic su **Fine** per creare la dimensione Sales Reason.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-167">On the **Completing the Wizard** page, click **Finish** to create the Sales Reason dimension.</span></span>

11. <span data-ttu-id="a9c3e-168">Scegliere **Save All** (Salva tutti) dal menu **File**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-168">On the **File** menu, click **Save All**.</span></span>

12. <span data-ttu-id="a9c3e-169">Nel riquadro **attributi** di Progettazione dimensioni per la dimensione **Sales Reason** selezionare **Sales Reason Key**e quindi modificare la proprietà **Name** nel finestra Proprietà`Sales Reason.`</span><span class="sxs-lookup"><span data-stu-id="a9c3e-169">In the **Attributes** pane of the Dimension Designer for the **Sales Reason** dimension, select **Sales Reason Key**, and then change the **Name** property in the Properties window to `Sales Reason.`</span></span>

13. <span data-ttu-id="a9c3e-170">Nel riquadro **gerarchie** di Progettazione dimensioni creare una gerarchia utente **Sales Reasons** che contiene il `Sales Reason Type` livello e il livello **Sales Reason** , in questo ordine.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-170">In the **Hierarchies** pane of the Dimension Designer, create a **Sales Reasons** user hierarchy that contains the `Sales Reason Type` level and the **Sales Reason** level, in that order.</span></span>

14. <span data-ttu-id="a9c3e-171">Nella Finestra Proprietà definire `All Sales Reasons` come valore per la proprietà **AllMemberName** della gerarchia Sales Reasons.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-171">In the Properties window, define `All Sales Reasons` as the value for the **AllMemberName** property of the Sales Reasons hierarchy.</span></span>

15. <span data-ttu-id="a9c3e-172">Definire `All Sales Reasons` come valore per la proprietà **AttributeAllMemberName** della dimensione Sales Reason.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-172">Define `All Sales Reasons` as the value for **AttributeAllMemberName** property of the Sales Reason dimension.</span></span>

16. <span data-ttu-id="a9c3e-173">Per aggiungere la dimensione appena creata al cubo [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial, come una dimensione del cubo, passare a **Progettazione cubi**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-173">To add the newly created dimension to the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube as a cube dimension, switch to **Cube Designer**.</span></span> <span data-ttu-id="a9c3e-174">Fare clic con il pulsante destro del mouse nel riquadro **Dimensioni** della scheda **Struttura cubo** e selezionare **Aggiungi dimensione al cubo**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-174">On the **Cube Structure** tab, right-click in the **Dimensions** pane and select **Add Cube Dimension**.</span></span>

17. <span data-ttu-id="a9c3e-175">Nella finestra di dialogo **Aggiungi dimensione al cubo** selezionare **Sales Reason** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-175">In the **Add Cube Dimension** dialog box, select **Sales Reason** and then click **OK**.</span></span>

18. <span data-ttu-id="a9c3e-176">Scegliere **Save All** (Salva tutti) dal menu **File**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-176">On the **File** menu, click **Save All**.</span></span>

## <a name="defining-the-many-to-many-relationship"></a><span data-ttu-id="a9c3e-177">Definizione della relazione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="a9c3e-177">Defining the Many to Many Relationship</span></span>

1.  <span data-ttu-id="a9c3e-178">Passare allo strumento Progettazione cubi per il cubo [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial, quindi scegliere la scheda **Utilizzo dimensioni** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-178">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Dimension Usage** tab.</span></span>

     <span data-ttu-id="a9c3e-179">Si noti che la dimensione **Sales Reason** ha una relazione di tipo Regolare definita con il gruppo di misure **Internet Sales Reason** ma nessuna relazione definita con i gruppi di misure **Internet Sales** o **Reseller Sales** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-179">Notice that the **Sales Reason** dimension has a regular relationship defined with the **Internet Sales Reason** measure group, but has no relationship defined with the **Internet Sales** or **Reseller Sales** measure groups.</span></span> <span data-ttu-id="a9c3e-180">Si noti inoltre che la dimensione **Internet Sales Order Details** ha una relazione di tipo Regolare definita con la dimensione **Internet Sales Reason** , la quale a sua volta ha una **relazione di tipo Fatti** con il gruppo di misure **Internet Sales** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-180">Notice also that the **Internet Sales Order Details** dimension has a regular relationship defined with the **Internet Sales Reason** dimension, which in turn has a **Fact Relationship** with the **Internet Sales** measure group.</span></span> <span data-ttu-id="a9c3e-181">Se questa dimensione non è presente oppure manca un'altra dimensione con una relazione con entrambi i gruppi di misure **Internet Sales Reason** e **Internet Sales** , non sarà possibile definire la relazione molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-181">If this dimension was not present (or another dimension with a relationship with both the **Internet Sales Reason** and the **Internet Sales** measure group were not present), you would not be able to define the many-to-many relationship.</span></span>

2.  <span data-ttu-id="a9c3e-182">Fare clic sulla cella nel punto di intersezione tra il gruppo di misure **Internet Sales** e la dimensione **Sales Reason** e quindi fare clic sul pulsante con i puntini di sospensione (**...**).</span><span class="sxs-lookup"><span data-stu-id="a9c3e-182">Click the cell at the intersection of the **Internet Sales** measure group and the **Sales Reason** dimension and then click the browse button (**...**).</span></span>

3.  <span data-ttu-id="a9c3e-183">Nella finestra di dialogo **Definisci relazione** selezionare **Molti-a-molti** nell'elenco **Selezionare il tipo di relazione** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-183">In the **Define Relationship** dialog box, select **Many-to-Many** in the **Select relationship type** list.</span></span>

     <span data-ttu-id="a9c3e-184">È necessario definire il gruppo di misure intermedio di collegamento tra la dimensione Sales Reason e il gruppo di misure Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-184">You have to define the intermediate measure group that connects the Sales Reason dimension to the Internet Sales measure group.</span></span>

4.  <span data-ttu-id="a9c3e-185">Nell'elenco **Gruppo di misure intermedio** selezionare **Internet Sales Reason**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-185">In the **Intermediate measure group** list, select **Internet Sales Reason**.</span></span>

     <span data-ttu-id="a9c3e-186">Nella figura seguente vengono illustrate le modifiche apportate alla finestra di dialogo **Definisci relazione** .</span><span class="sxs-lookup"><span data-stu-id="a9c3e-186">The following image shows the changes in the **Define Relationship** dialog box.</span></span>

     <span data-ttu-id="a9c3e-187">![Finestra di dialogo Definisci relazione](../../2014/tutorials/media/l5-many-to-many-3.gif "Finestra di dialogo Definisci relazione")</span><span class="sxs-lookup"><span data-stu-id="a9c3e-187">![Define Relationship dialog box](../../2014/tutorials/media/l5-many-to-many-3.gif "Define Relationship dialog box")</span></span>

5.  <span data-ttu-id="a9c3e-188">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-188">Click **OK**.</span></span>

     <span data-ttu-id="a9c3e-189">Si noti l'icona molti-a-molti che rappresenta la relazione tra la dimensione Sales Reason e il gruppo di misure Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-189">Notice the many-to-many icon that represents the relationship between the Sales Reason dimension and the Internet Sales measure group.</span></span>

## <a name="browsing-the-cube-and-the-many-to-many-dimension"></a><span data-ttu-id="a9c3e-190">Visualizzazione del cubo e della dimensione molti-a-molti</span><span class="sxs-lookup"><span data-stu-id="a9c3e-190">Browsing the Cube and the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="a9c3e-191">Scegliere **Distribuisci Analysis Services Tutorial** dal menu **Compila**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-191">On the **Build** menu, click **Deploy Analysis Services Tutorial**.</span></span>

2.  <span data-ttu-id="a9c3e-192">Al termine delle operazioni di distribuzione, passare alla scheda **Esplorazione** in Progettazione cubi per il cubo [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial e quindi fare clic su **Riconnetti**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-192">When deployment has successfully completed, switch to the **Browser** tab in Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click **Reconnect**.</span></span>

3.  <span data-ttu-id="a9c3e-193">Aggiungere la misura **Internet Sales-Sales Amount** all'area dati del riquadro Dati.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-193">Add the **Internet Sales-Sales Amount** measure to the data area of the data pane.</span></span>

4.  <span data-ttu-id="a9c3e-194">Aggiungere la gerarchia definita dall'utente **Sales Reasons** dalla dimensione **Sales Reason** all'area riga del riquadro Dati.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-194">Add the **Sales Reasons** user-defined hierarchy from the **Sales Reason** dimension to the row area of the data pane.</span></span>

5.  <span data-ttu-id="a9c3e-195">Nel riquadro Metadati espandere **Customer**, **Location**, **Customer Geography**, **Members**, **All Customers**e **Australia**, fare clic con il pulsante destro del mouse su **Queensland**, quindi scegliere **Aggiungi a filtro**.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-195">In the metadata pane, expand **Customer**, expand **Location**, expand **Customer Geography**, expand **Members**, expand **All Customers**, expand **Australia**, right-click **Queensland**, and then click **Add to Filter**.</span></span>

6.  <span data-ttu-id="a9c3e-196">Espandere ogni membro del `Sales Reason Type` livello per esaminare i valori in dollari associati a ogni motivo assegnato da un cliente in Queensland per l'acquisto di un [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] prodotto su Internet.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-196">Expand each member of the `Sales Reason Type` level to review the dollar values that are associated with each reason a customer in Queensland gave for their purchase of an [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] product over the Internet.</span></span>

     <span data-ttu-id="a9c3e-197">Si noti che la somma dei totali associati a ciascun motivo di vendita risulta maggiore delle vendite totali.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-197">Notice that the totals that are associated with each sales reason add up to more than the total sales.</span></span> <span data-ttu-id="a9c3e-198">Ciò si spiega con il fatto che alcuni clienti danno più motivi per i loro acquisti.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-198">This is because some customers cited multiple reasons for their purchase.</span></span>

     <span data-ttu-id="a9c3e-199">Nella figura seguente sono illustrati i riquadri **Filtro** e **Dati** di Progettazione cubi.</span><span class="sxs-lookup"><span data-stu-id="a9c3e-199">The following image shows the **Filter** pane and **Data** pane of Cube Designer.</span></span>

     <span data-ttu-id="a9c3e-200">![Riquadri Filtro e Dati di Progettazione cubi](../../2014/tutorials/media/l5-many-to-many-5.gif "Riquadri Filtro e Dati di Progettazione cubi")</span><span class="sxs-lookup"><span data-stu-id="a9c3e-200">![Filter and Data panes of Cube Designer](../../2014/tutorials/media/l5-many-to-many-5.gif "Filter and Data panes of Cube Designer")</span></span>

## <a name="next-task-in-lesson"></a><span data-ttu-id="a9c3e-201">Attività successiva della lezione</span><span class="sxs-lookup"><span data-stu-id="a9c3e-201">Next Task in Lesson</span></span>
 [<span data-ttu-id="a9c3e-202">Definizione della granularità della dimensione in un gruppo di misure</span><span class="sxs-lookup"><span data-stu-id="a9c3e-202">Defining Dimension Granularity within a Measure Group</span></span>](lesson-5-4-defining-dimension-granularity-within-a-measure-group.md)

## <a name="see-also"></a><span data-ttu-id="a9c3e-203">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="a9c3e-203">See Also</span></span>
 <span data-ttu-id="a9c3e-204">[Utilizzare diagrammi in Progettazione vista origine dati &#40;Analysis Services relazioni&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [dimensione](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [definiscono una relazione molti-a-molti e le proprietà delle relazioni molti-a-molti](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span><span class="sxs-lookup"><span data-stu-id="a9c3e-204">[Work with Diagrams in Data Source View Designer &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span></span>


