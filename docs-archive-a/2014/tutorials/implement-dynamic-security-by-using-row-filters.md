---
title: Implementare la sicurezza dinamica usando filtri di riga | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 8bf03c45-caf5-4eda-9314-e4f8f24a159f
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 09a15f818f57d7a9d808c89ced41b285536a7883
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624478"
---
# <a name="implement-dynamic-security-by-using-row-filters"></a><span data-ttu-id="e8448-102">Implementare la sicurezza dinamica mediante i filtri di riga</span><span class="sxs-lookup"><span data-stu-id="e8448-102">Implement Dynamic Security by Using Row Filters</span></span>
  <span data-ttu-id="e8448-103">In questa lezione supplementare verrà creato un ruolo aggiuntivo che implementa la sicurezza dinamica.</span><span class="sxs-lookup"><span data-stu-id="e8448-103">In this supplemental lesson, you will create an additional role that implements dynamic security.</span></span> <span data-ttu-id="e8448-104">La sicurezza dinamica offre un meccanismo di protezione a livello di riga basato sul nome utente o sull'ID di accesso dell'utente connesso.</span><span class="sxs-lookup"><span data-stu-id="e8448-104">Dynamic security provides row-level security based on the user name or login id of the user currently logged on.</span></span> <span data-ttu-id="e8448-105">Per altre informazioni, vedere [Ruoli &#40;SSAS tabulare&#41;](https://docs.microsoft.com/analysis-services/tabular-models/roles-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="e8448-105">To learn more, see [Roles &#40;SSAS Tabular&#41;](https://docs.microsoft.com/analysis-services/tabular-models/roles-ssas-tabular).</span></span>  
  
 <span data-ttu-id="e8448-106">Per implementare la sicurezza dinamica, è necessario aggiungere una tabella al modello contenente i nomi degli utenti di Windows che possono creare una connessione al modello come origine dati ed esplorare oggetti modello e dati.</span><span class="sxs-lookup"><span data-stu-id="e8448-106">To implement dynamic security, you must add a table to your model containing the Windows user names of those users that can create a connection to the model as a data source and browse model objects and data.</span></span> <span data-ttu-id="e8448-107">Il modello creato in questa esercitazione è nel contesto di Adventure Works Corp. Tuttavia, per completare questa lezione, è necessario aggiungere una tabella contenente gli utenti del proprio dominio.</span><span class="sxs-lookup"><span data-stu-id="e8448-107">The model you create using this tutorial is in the context of Adventure Works Corp.; however, in order to complete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="e8448-108">Non saranno necessarie le password dei nomi utente che verranno aggiunti.</span><span class="sxs-lookup"><span data-stu-id="e8448-108">You will not need the passwords for the user names that will be added.</span></span> <span data-ttu-id="e8448-109">Per creare una tabella Sicurezza dipendenti con una piccola parte degli utenti del proprio dominio, è possibile utilizzare la funzionalità Incolla per incollare i dati dei dipendenti da un foglio di calcolo di Excel.</span><span class="sxs-lookup"><span data-stu-id="e8448-109">To create an Employee Security table, with a small sample of users from your own domain, you will use the Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="e8448-110">In uno scenario realistico la tabella che contiene i nomi utente da aggiungere a un modello utilizza in genere una tabella di un database effettivo come origine dati, ad esempio una tabella dimEmployee reale.</span><span class="sxs-lookup"><span data-stu-id="e8448-110">In a real-world scenario, the table containing user names you add to a model would typically use a table from an actual database as a data source; for example, a real dimEmployee table.</span></span>  
  
 <span data-ttu-id="e8448-111">Per implementare la sicurezza dinamica, si utilizzeranno due nuove funzioni DAX: [username function &#40;dax&#41;](/dax/username-function-dax) e [LOOKUPVALUE function &#40;DAX&#41;](/dax/lookupvalue-function-dax).</span><span class="sxs-lookup"><span data-stu-id="e8448-111">In order to implement dynamic security, you will use two new DAX functions: [USERNAME Function &#40;DAX&#41;](/dax/username-function-dax) and [LOOKUPVALUE Function &#40;DAX&#41;](/dax/lookupvalue-function-dax).</span></span> <span data-ttu-id="e8448-112">Queste funzioni, applicate in una formula di filtro di riga, vengono definite in un nuovo ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-112">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="e8448-113">Utilizzando la funzione LOOKUPVALUE, la formula specifica un valore della tabella Sicurezza dipendenti, quindi passa il valore alla funzione USERNAME che specifica il nome dell'utente connesso appartenente a questo ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-113">Using the LOOKUPVALUE function, the formula specifies a value from the Employee Security table and then passes that value to the USERNAME function, which specifies the user name of the user logged on belongs to this role.</span></span> <span data-ttu-id="e8448-114">L'utente può quindi esplorare solo i dati specificati dai filtri di riga del ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-114">The user can then browse only data specified by the role's row filters.</span></span> <span data-ttu-id="e8448-115">In questo scenario verrà specificato che i dipendenti addetti alle vendite possono esplorare solo i dati relativi alle vendite Internet per i territori di vendita in cui sono membri.</span><span class="sxs-lookup"><span data-stu-id="e8448-115">In this scenario, you will specify that sales employees can only browse internet sales data for the sales territories in which they are a member.</span></span>  
  
 <span data-ttu-id="e8448-116">Per completare questa lezione supplementare, verrà completata una serie di attività.</span><span class="sxs-lookup"><span data-stu-id="e8448-116">In order to complete this supplemental lesson, you will complete a series of tasks.</span></span> <span data-ttu-id="e8448-117">Le attività specifiche per questo scenario di modello tabulare Adventure Works, non necessariamente applicabili a uno scenario reale verranno identificate come tali.</span><span class="sxs-lookup"><span data-stu-id="e8448-117">Those tasks that are unique to this Adventure Works tabular model scenario, but would not necessarily apply to a real-world scenario are identified as such.</span></span> <span data-ttu-id="e8448-118">Ogni attività include informazioni aggiuntive che descrivono lo scopo dell'attività.</span><span class="sxs-lookup"><span data-stu-id="e8448-118">Each task includes additional information describing the purpose of the task.</span></span>  
  
 <span data-ttu-id="e8448-119">Tempo previsto per il completamento della lezione: **30 minuti**</span><span class="sxs-lookup"><span data-stu-id="e8448-119">Estimated time to complete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e8448-120">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="e8448-120">Prerequisites</span></span>  
 <span data-ttu-id="e8448-121">L'argomento di questa lezione supplementare fa parte di un'esercitazione sulla creazione di modelli tabulari, con lezioni che è consigliabile completare nell'ordine indicato.</span><span class="sxs-lookup"><span data-stu-id="e8448-121">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="e8448-122">Prima di eseguire le attività in questa lezione supplementare, è necessario avere completato tutte le lezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-122">Before performing the tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-the-dimsalesterritory-table-to-the-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="e8448-123">Aggiungere la tabella dimSalesTerritory al progetto AW Internet Sales Tabular Model</span><span class="sxs-lookup"><span data-stu-id="e8448-123">Add the dimSalesTerritory table to the AW Internet Sales Tabular Model Project</span></span>  
 <span data-ttu-id="e8448-124">Per implementare la sicurezza dinamica per questo scenario di Adventure Works, è necessario aggiungere due tabelle aggiuntive al modello.</span><span class="sxs-lookup"><span data-stu-id="e8448-124">In order to implement dynamic security for this Adventure Works scenario, you must add two additional tables to your model.</span></span> <span data-ttu-id="e8448-125">La prima tabella da aggiungere è dimSalesTerritory (come Territorio vendita) dallo stesso database AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="e8448-125">The first table you will add is dimSalesTerritory (as Sales Territory) from the same AdventureWorksDW database.</span></span> <span data-ttu-id="e8448-126">Successivamente verrà applicato un filtro di riga alla tabella Territorio vendita per definire i dati specifici che l'utente connesso può esplorare.</span><span class="sxs-lookup"><span data-stu-id="e8448-126">You will later apply a row filter to the Sales Territory table that defines the particular data the logged on user can browse.</span></span>  
  
#### <a name="to-add-the-dimsalesterritory-table"></a><span data-ttu-id="e8448-127">Per aggiungere la tabella dimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="e8448-127">To add the dimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="e8448-128">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]fare clic sul menu **Modello** , quindi scegliere **Connessioni esistenti**.</span><span class="sxs-lookup"><span data-stu-id="e8448-128">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click on the **Model** menu, and then click **Existing Connections**.</span></span>  
  
2.  <span data-ttu-id="e8448-129">Nella finestra di dialogo **Connessioni esistenti** verificare che sia selezionata la connessione origine dati **Adventure Works DB da SQL** , quindi fare clic su **Apri**.</span><span class="sxs-lookup"><span data-stu-id="e8448-129">In the **Existing Connections** dialog box, verify the **Adventure Works DB from SQL** data source connection is selected, and then click **Open**.</span></span>  
  
     <span data-ttu-id="e8448-130">Se viene visualizzata la finestra di dialogo Credenziali rappresentazione digitare le credenziali di rappresentazione usate nella lezione 2: Aggiungere dati.</span><span class="sxs-lookup"><span data-stu-id="e8448-130">If the Impersonation Credentials dialog box appears, type the impersonation credentials you used in Lesson 2: Add Data.</span></span>  
  
3.  <span data-ttu-id="e8448-131">Nella pagina **Scelta della modalità di importazione dei dati** lasciare selezionata l'opzione **Seleziona da un elenco di tabelle e viste per scegliere i dati da importare** , quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="e8448-131">On the **Choose How to Import the Data** page, leave **Select from a list of tables and views to choose the data to import** selected, and then click **Next**.</span></span>  
  
4.  <span data-ttu-id="e8448-132">Nella pagina **Seleziona tabelle e viste** selezionare la tabella **DimSalesTerritory** .</span><span class="sxs-lookup"><span data-stu-id="e8448-132">On the **Select Tables and Views** page, select the **DimSalesTerritory** table.</span></span>  
  
5.  <span data-ttu-id="e8448-133">Nella colonna Nome descrittivo digitare **Territorio vendita**.</span><span class="sxs-lookup"><span data-stu-id="e8448-133">In the Friendly Name column, type **Sales Territory**.</span></span>  
  
6.  <span data-ttu-id="e8448-134">Fare clic su **Anteprima e Filtro**.</span><span class="sxs-lookup"><span data-stu-id="e8448-134">Click **Preview and Filter**.</span></span>  
  
7.  <span data-ttu-id="e8448-135">Deselezionare la colonna **SalesTerritoryAlternateKey** , quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="e8448-135">Deselect the **SalesTerritoryAlternateKey** column, and then click **Ok**.</span></span>  
  
8.  <span data-ttu-id="e8448-136">Nella pagina **Seleziona tabelle e viste** fare clic su **Fine**.</span><span class="sxs-lookup"><span data-stu-id="e8448-136">On the **Select Tables and Views** page, click **Finish**.</span></span>  
  
     <span data-ttu-id="e8448-137">La nuova tabella verrà aggiunta all'area di lavoro del modello.</span><span class="sxs-lookup"><span data-stu-id="e8448-137">The new table will be added to the model workspace.</span></span> <span data-ttu-id="e8448-138">Gli oggetti e i dati della tabella dimSalesTerritory di origine verranno quindi importati nella nuova tabella Territorio vendita in AW Internet Sales Tabular Model.</span><span class="sxs-lookup"><span data-stu-id="e8448-138">Objects and data from the source dimSalesTerritory table are then imported into the new Sales Territory table in your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="e8448-139">Dopo l'importazione della tabella fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="e8448-139">After the table has been imported, click **Close**.</span></span>  
  
## <a name="give-the-columns-friendly-names"></a><span data-ttu-id="e8448-140">Assegnare nomi descrittivi alle colonne</span><span class="sxs-lookup"><span data-stu-id="e8448-140">Give the Columns Friendly Names</span></span>  
 <span data-ttu-id="e8448-141">In questa attività verranno assegnati nomi descrittivi alle colonne della tabella Territorio vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-141">In this task, you will rename the columns in the Sales Territory table, giving them friendly names.</span></span> <span data-ttu-id="e8448-142">Non è sempre necessario specificare nomi descrittivi per tabelle e/o colonne; questa attività, tuttavia, semplifica la navigazione del progetto di modello in Progettazione modelli nonché l'esplorazione degli oggetti e dei dati del modello in un elenco di campi di un'applicazione client da parte degli utenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-142">It is not always necessary to give tables and/or columns friendly names; however, it does make your model project easier to navigate in the model designer as well as for users browsing model objects and data in a client application field list.</span></span>  
  
#### <a name="to-rename-columns-in-the-sales-territory-table"></a><span data-ttu-id="e8448-143">Per rinominare le colonne nella tabella Territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-143">To rename Columns in the Sales Territory Table</span></span>  
  
-   <span data-ttu-id="e8448-144">In Progettazione modelli rinominare le colonne nella tabella **Territorio vendita** :</span><span class="sxs-lookup"><span data-stu-id="e8448-144">In the model designer, rename the columns in the **Sales Territory** table:</span></span>  
  
     <span data-ttu-id="e8448-145">**Sales Territory**</span><span class="sxs-lookup"><span data-stu-id="e8448-145">**Sales Territory**</span></span>  
  
    |<span data-ttu-id="e8448-146">Nome origine</span><span class="sxs-lookup"><span data-stu-id="e8448-146">Source Name</span></span>|<span data-ttu-id="e8448-147">Nome descrittivo</span><span class="sxs-lookup"><span data-stu-id="e8448-147">Friendly Name</span></span>|  
    |-----------------|-------------------|  
    |<span data-ttu-id="e8448-148">SalesTerritoryKey</span><span class="sxs-lookup"><span data-stu-id="e8448-148">SalesTerritoryKey</span></span>|<span data-ttu-id="e8448-149">ID territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-149">Sales Territory Id</span></span>|  
    |<span data-ttu-id="e8448-150">SalesTerritoryRegion</span><span class="sxs-lookup"><span data-stu-id="e8448-150">SalesTerritoryRegion</span></span>|<span data-ttu-id="e8448-151">Area territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-151">Sales Territory Region</span></span>|  
    |<span data-ttu-id="e8448-152">SalesTerritoryCountry</span><span class="sxs-lookup"><span data-stu-id="e8448-152">SalesTerritoryCountry</span></span>|<span data-ttu-id="e8448-153">Paese territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-153">Sales Territory Country</span></span>|  
    |<span data-ttu-id="e8448-154">SalesTerritoryGroup</span><span class="sxs-lookup"><span data-stu-id="e8448-154">SalesTerritoryGroup</span></span>|<span data-ttu-id="e8448-155">Gruppo territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-155">Sales Territory Group</span></span>|  
  
## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="e8448-156">Aggiungere una tabella con i dati dei nomi utente</span><span class="sxs-lookup"><span data-stu-id="e8448-156">Add a table with user name data</span></span>  
 <span data-ttu-id="e8448-157">Poiché nella tabella dimEmployee nel database di esempio AdventureWorksDW sono contenuti utenti del dominio AdventureWorks e i nomi di questi utenti non esistono nel proprio ambiente, è necessario creare una tabella nel modello contenente una piccola parte degli utenti effettivi dell'organizzazione, ad esempio tre utenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-157">Because the dimEmployee table in the AdventureWorksDW sample database contains users from the AdventureWorks domain, and those user names do not exist in your own environment, you must create a table in your model that contains a small sample (three) of actual users from your organization.</span></span> <span data-ttu-id="e8448-158">Tali utenti verranno quindi aggiunti come membri al nuovo ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-158">You will then add these users as members to the new role.</span></span> <span data-ttu-id="e8448-159">Non sono necessarie le password per i nomi utente di esempio, ma saranno necessari nomi utente di Windows effettivi presenti nel proprio dominio.</span><span class="sxs-lookup"><span data-stu-id="e8448-159">You do not need the passwords for the sample user names, but you will need actual Windows user names from your own domain.</span></span>  
  
#### <a name="to-add-an-employee-security-table"></a><span data-ttu-id="e8448-160">Per aggiungere una tabella Sicurezza dipendenti</span><span class="sxs-lookup"><span data-stu-id="e8448-160">To add an Employee Security table</span></span>  
  
1.  <span data-ttu-id="e8448-161">Aprire Microsoft Excel creando così un nuovo foglio di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e8448-161">Open Microsoft Excel, creating a new worksheet.</span></span>  
  
2.  <span data-ttu-id="e8448-162">Copiare la tabella seguente, inclusa la riga di intestazione e quindi incollarla nel foglio di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e8448-162">Copy the following table, including the header row, and then paste it into the worksheet.</span></span>  
  
    |<span data-ttu-id="e8448-163">ID dipendente</span><span class="sxs-lookup"><span data-stu-id="e8448-163">Employee Id</span></span>|<span data-ttu-id="e8448-164">ID territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-164">Sales Territory Id</span></span>|<span data-ttu-id="e8448-165">Nome</span><span class="sxs-lookup"><span data-stu-id="e8448-165">First Name</span></span>|<span data-ttu-id="e8448-166">Cognome</span><span class="sxs-lookup"><span data-stu-id="e8448-166">Last Name</span></span>|<span data-ttu-id="e8448-167">ID di accesso</span><span class="sxs-lookup"><span data-stu-id="e8448-167">Login Id</span></span>|  
    |-----------------|------------------------|----------------|---------------|--------------|  
    |<span data-ttu-id="e8448-168">1</span><span class="sxs-lookup"><span data-stu-id="e8448-168">1</span></span>|<span data-ttu-id="e8448-169">2</span><span class="sxs-lookup"><span data-stu-id="e8448-169">2</span></span>|\<user first name>|\<user last name>|\<domain\username>|  
    |<span data-ttu-id="e8448-170">1</span><span class="sxs-lookup"><span data-stu-id="e8448-170">1</span></span>|<span data-ttu-id="e8448-171">3</span><span class="sxs-lookup"><span data-stu-id="e8448-171">3</span></span>|\<user first name>|\<user last name>|\<domain\username>|  
    |<span data-ttu-id="e8448-172">2</span><span class="sxs-lookup"><span data-stu-id="e8448-172">2</span></span>|<span data-ttu-id="e8448-173">4</span><span class="sxs-lookup"><span data-stu-id="e8448-173">4</span></span>|\<user first name>|\<user last name>|\<domain\username>|  
    |<span data-ttu-id="e8448-174">3</span><span class="sxs-lookup"><span data-stu-id="e8448-174">3</span></span>|<span data-ttu-id="e8448-175">5</span><span class="sxs-lookup"><span data-stu-id="e8448-175">5</span></span>|\<user first name>|\<user last name>|\<domain\username>|  
  
3.  <span data-ttu-id="e8448-176">Nel nuovo foglio di lavoro sostituire il nome, il cognome e il dominio\nomeutente con i nomi e gli ID di accesso dei tre utenti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="e8448-176">In the new worksheet, replace the first name, last name, and domain\username with the names and login ids of three users in your organization.</span></span> <span data-ttu-id="e8448-177">Inserire lo stesso utente nelle prime due righe per ID dipendente 1,</span><span class="sxs-lookup"><span data-stu-id="e8448-177">Put the same user on the first two rows, for Employee Id 1.</span></span> <span data-ttu-id="e8448-178">a indicare che tale utente appartiene a più territori di vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-178">This will show this user belongs to more than one sales territory.</span></span> <span data-ttu-id="e8448-179">Lasciare i campi ID dipendente e ID territorio vendita così come sono.</span><span class="sxs-lookup"><span data-stu-id="e8448-179">Leave the Employee Id and Sales Territory Id fields as they are.</span></span>  
  
4.  <span data-ttu-id="e8448-180">Salvare il foglio di foglio come `Sample Employee` .</span><span class="sxs-lookup"><span data-stu-id="e8448-180">Save the worksheet as `Sample Employee`.</span></span>  
  
5.  <span data-ttu-id="e8448-181">Nel foglio di lavoro, selezionare tutte le celle con i dati dei dipendenti, incluse le intestazioni, fare clic con il pulsante destro del mouse sui dati selezionati, quindi scegliere **Copia**.</span><span class="sxs-lookup"><span data-stu-id="e8448-181">In the worksheet, select all of the cells with employee data, including the headers, then right click the selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="e8448-182">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]scegliere **Incolla** dal menu **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="e8448-182">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click the **Edit** menu, and then click **Paste**.</span></span>  
  
     <span data-ttu-id="e8448-183">Se Incolla è disattivato, ovvero visualizzato in grigio, fare clic su una colonna di qualsiasi tabella nella finestra Progettazione modelli, quindi scegliere **Incolla** dal menu **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="e8448-183">If Paste is greyed out, click any column in any table in the model designer window, and then click the **Edit** menu, and then click **Paste**.</span></span>  
  
7.  <span data-ttu-id="e8448-184">Nella finestra di dialogo **Anteprima Incolla** Digitare nel campo **nome tabella** `Employee Security` .</span><span class="sxs-lookup"><span data-stu-id="e8448-184">In the **Paste Preview** dialog box, in **Table Name**, type `Employee Security`.</span></span>  
  
8.  <span data-ttu-id="e8448-185">In **Dati da incollare**verificare che i dati includano tutti i dati dell'utente e le intestazioni del foglio di lavoro Dipendente di esempio.</span><span class="sxs-lookup"><span data-stu-id="e8448-185">In **Data to be pasted**, verify the data includes all of the user data and headers from the Sample Employee worksheet.</span></span>  
  
9. <span data-ttu-id="e8448-186">Verificare che l'opzione **Usa la prima riga per le intestazioni di colonna** sia selezionata e quindi fare clic su **Ok**.</span><span class="sxs-lookup"><span data-stu-id="e8448-186">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
     <span data-ttu-id="e8448-187">Verrà creata una nuova tabella denominata Sicurezza dipendenti con i dati dei dipendenti copiati dal foglio di lavoro Dipendente di esempio.</span><span class="sxs-lookup"><span data-stu-id="e8448-187">A new table named Employee Security with employee data copied from the Sample Employee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-internet-sales-geography-and-sales-territory-table"></a><span data-ttu-id="e8448-188">Creare relazioni tra le tabelle Vendite Internet, Geografia e Territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-188">Create Relationships Between Internet Sales, Geography, and Sales Territory table</span></span>  
 <span data-ttu-id="e8448-189">La tabella Internet Sales, geography e Sales Territory contiene tutti una colonna comune, ID territorio vendita. La colonna ID territorio vendita nella tabella territorio vendita contiene valori con un ID diverso per ogni territorio di vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-189">The Internet Sales, Geography, and Sales Territory table all contain a common column, Sales Territory Id. The Sales Territory Id column in the Sales Territory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="to-create-relationships-between-the-internet-sales-geography-and-the-sales-territory-table"></a><span data-ttu-id="e8448-190">Per creare relazioni tra le tabelle Vendite Internet, Geografia e Territorio vendita</span><span class="sxs-lookup"><span data-stu-id="e8448-190">To create relationships between the Internet Sales, Geography, and the Sales Territory table</span></span>  
  
1.  <span data-ttu-id="e8448-191">Nella tabella **Geografia** in Vista diagramma di Progettazione modelli fare clic e tenere premuto il pulsante del mouse sulla colonna **ID territorio vendita** , quindi trascinare il cursore nella colonna **ID territorio vendita** della tabella **Territorio vendita** e infine rilasciare il pulsante del mouse.</span><span class="sxs-lookup"><span data-stu-id="e8448-191">In the model designer, in Diagram View, in the **Geography** table, click and hold on the **Sales Territory Id** column, then drag the cursor to the **Sales Territory Id** column in the **Sales Territory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="e8448-192">Nella tabella **Vendite Internet** fare clic e tenere premuto il pulsante del mouse sulla colonna **ID territorio vendita** , quindi trascinare il cursore nella colonna **ID territorio vendita** della tabella **Territorio vendita** e infine rilasciare il pulsante del mouse.</span><span class="sxs-lookup"><span data-stu-id="e8448-192">In the **Internet Sales** table, click and hold on the **Sales Territory Id** column, then drag the cursor to the **Sales Territory Id** column in the **Sales Territory** table, and then release.</span></span>  
  
     <span data-ttu-id="e8448-193">Si noti che la proprietà Active di questa relazione è False, a indicare che non è attiva,</span><span class="sxs-lookup"><span data-stu-id="e8448-193">Notice the Active property for this relationship is False, meaning it is inactive.</span></span> <span data-ttu-id="e8448-194">poiché la tabella Vendite Internet già contiene un'altra relazione attiva utilizzata nelle misure.</span><span class="sxs-lookup"><span data-stu-id="e8448-194">This is because the Internet Sales table already has another active relationship that is used in measures.</span></span>  
  
## <a name="hide-the-employee-security-table-from-client-applications"></a><span data-ttu-id="e8448-195">Nascondere la tabella Sicurezza dipendenti alle applicazioni client</span><span class="sxs-lookup"><span data-stu-id="e8448-195">Hide the Employee Security Table from Client Applications</span></span>  
 <span data-ttu-id="e8448-196">In questa attività verrà nascosta la tabella Sicurezza dipendenti, impedendone la visualizzazione nell'elenco dei campi di un'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="e8448-196">In this task, you will hide the Employee Security table, keeping it from appearing in a client application's field list.</span></span> <span data-ttu-id="e8448-197">Tenere presente che nascondere una tabella non significa proteggerla.</span><span class="sxs-lookup"><span data-stu-id="e8448-197">Keep in-mind that hiding a table does not secure it.</span></span> <span data-ttu-id="e8448-198">Gli utenti possono ancora eseguire una query sui dati della tabella Sicurezza dipendenti se sanno come fare.</span><span class="sxs-lookup"><span data-stu-id="e8448-198">Users can still query Employee Security table data if they know how.</span></span> <span data-ttu-id="e8448-199">Per proteggere i dati della tabella Sicurezza dipendenti, impedendo agli utenti di potervi eseguire una query, verrà applicato un filtro in un'attività successiva.</span><span class="sxs-lookup"><span data-stu-id="e8448-199">In order to secure the Employee Security table data, preventing users from being able to query any of its data, you will apply a filter in a later task.</span></span>  
  
#### <a name="to-hide-the-employee-table-from-client-applications"></a><span data-ttu-id="e8448-200">Per nascondere la tabella Dipendente alle applicazioni client</span><span class="sxs-lookup"><span data-stu-id="e8448-200">To hide the Employee Table from client applications</span></span>  
  
-   <span data-ttu-id="e8448-201">Nella finestra di progettazione dei modelli, in vista diagramma, fare clic con il pulsante destro del mouse sull'intestazione della tabella **Employee** e quindi scegliere **Nascondi a strumenti client**.</span><span class="sxs-lookup"><span data-stu-id="e8448-201">In the model designer, in Diagram View, right-click the **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="e8448-202">Creare un ruolo utente Sales Employees by Territory</span><span class="sxs-lookup"><span data-stu-id="e8448-202">Create a Sales Employees by Territory user role</span></span>  
 <span data-ttu-id="e8448-203">In questa attività verrà creato un nuovo ruolo utente.</span><span class="sxs-lookup"><span data-stu-id="e8448-203">In this task, you will create a new user role.</span></span> <span data-ttu-id="e8448-204">Questo ruolo includerà un filtro di riga che definisce le righe della tabella Territorio vendita visibili agli utenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-204">This role will include a row filter defining which rows of the Sales Territory table are visible to users.</span></span> <span data-ttu-id="e8448-205">Il filtro viene quindi applicato nella direzione della relazione uno-a-molti a tutte le altre tabelle correlate alla tabella Territorio vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-205">The filter is then applied in the one-to many relationship direction to all other tables related to Sales Territory.</span></span> <span data-ttu-id="e8448-206">Verrà inoltre applicato un semplice filtro per proteggere l'intera tabella Sicurezza dipendenti impedendone l'esecuzione di query da parte di tutti gli utenti membri del ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-206">You will also apply a simple filter that secures the entire Employee Security table from being queryable by any user that is a member of the role.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e8448-207">Il ruolo Sales Employees by Territory creato in questa lezione limita i membri consentendo loro di visualizzare solo i dati sulle vendite per il territorio a cui appartengono o di eseguire query su tali dati.</span><span class="sxs-lookup"><span data-stu-id="e8448-207">The Sales Employees by Territory role you create in this lesson restricts members to browse (or query) only sales data for the sales territory to which they belong.</span></span> <span data-ttu-id="e8448-208">Se si aggiunge un utente come membro al ruolo Addetti alle vendite per territorio presente anche come membro in un ruolo creato nella [Lezione 12: Creare ruoli](../analysis-services/lesson-11-create-roles.md), si otterrà una combinazione di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="e8448-208">If you add a user as a member to the Sales Employees by Territory role that also exists as a member in a role created in [Lesson 12: Create Roles](../analysis-services/lesson-11-create-roles.md), you will get a combination of permissions.</span></span> <span data-ttu-id="e8448-209">Quando un utente è membro di più ruoli, le autorizzazioni e i filtri di riga definiti per ogni ruolo sono cumulativi.</span><span class="sxs-lookup"><span data-stu-id="e8448-209">When a user is a member of multiple roles, the permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="e8448-210">ovvero l'utente disporrà di maggiori autorizzazioni determinate dalla combinazione dei ruoli.</span><span class="sxs-lookup"><span data-stu-id="e8448-210">That is, the user will have the greater permissions determined by the combination of roles.</span></span>  
  
#### <a name="to-create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="e8448-211">Per creare un ruolo utente Sales Employees by Territory</span><span class="sxs-lookup"><span data-stu-id="e8448-211">To create a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="e8448-212">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]fare clic sul menu **Modello** e quindi su **Ruoli**.</span><span class="sxs-lookup"><span data-stu-id="e8448-212">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click the **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="e8448-213">Nella finestra di dialogo **Gestione ruoli** fare clic su **Nuovo**.</span><span class="sxs-lookup"><span data-stu-id="e8448-213">In the **Role Manager** dialog box, click **New**.</span></span>  
  
     <span data-ttu-id="e8448-214">Un nuovo ruolo con l'autorizzazione Nessuna verrà aggiunto all'elenco.</span><span class="sxs-lookup"><span data-stu-id="e8448-214">A new role with the None permission is added to the list.</span></span>  
  
3.  <span data-ttu-id="e8448-215">Fare clic sul nuovo ruolo e quindi nella colonna **nome** rinominare il ruolo in `Sales Employees by Territory` .</span><span class="sxs-lookup"><span data-stu-id="e8448-215">Click on the new role, and then in the **Name** column, rename the role to `Sales Employees by Territory`.</span></span>  
  
4.  <span data-ttu-id="e8448-216">Nella colonna **Autorizzazioni** fare clic nell'elenco a discesa e quindi selezionare l'autorizzazione **Lettura**.</span><span class="sxs-lookup"><span data-stu-id="e8448-216">In the **Permissions** column, click the dropdown list, and then select the **Read** permission.</span></span>  
  
5.  <span data-ttu-id="e8448-217">Fare clic sulla scheda **Membri** , quindi su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="e8448-217">Click on the **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="e8448-218">Nella finestra di dialogo **Seleziona utente o gruppo** in **Immettere i nomi degli oggetti da selezionare**digitare il primo nome utente di esempio usato per la creazione della tabella Sicurezza dipendenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-218">In the **Select User or Group** dialog box, in **Enter the object named to select**, type the first sample user name you used when creating the Employee Security table.</span></span> <span data-ttu-id="e8448-219">Fare clic su **Controlla nomi** per verificare se il nome utente è valido e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="e8448-219">Click **Check Names** to verify the user name is valid, and then click **Ok**.</span></span>  
  
     <span data-ttu-id="e8448-220">Ripetere questo passaggio aggiungendo gli altri nomi utente di esempio utilizzati per la creazione della tabella Sicurezza dipendenti.</span><span class="sxs-lookup"><span data-stu-id="e8448-220">Repeat this step, adding the other sample user names you used when creating the Employee Security table.</span></span>  
  
7.  <span data-ttu-id="e8448-221">Fare clic sulla scheda **Filtri di riga** .</span><span class="sxs-lookup"><span data-stu-id="e8448-221">Click on the **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="e8448-222">Per la `Employee Security` tabella, nella colonna **Filtro DAX** digitare la formula seguente.</span><span class="sxs-lookup"><span data-stu-id="e8448-222">For the `Employee Security` table, in the **DAX Filter** column, type the following formula.</span></span>  
  
     `=FALSE()`  
  
     <span data-ttu-id="e8448-223">Dopo avere completato la compilazione della formula, premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="e8448-223">When you have finished building the formula, press ENTER.</span></span>  
  
     <span data-ttu-id="e8448-224">Questa formula specifica che tutte le colonne vengono risolte nella condizione booleana false. Pertanto, non sarà possibile eseguire query in alcuna colonna della tabella Sicurezza dipendenti da parte dei membri del ruolo utente Addetti alle vendite per territorio.</span><span class="sxs-lookup"><span data-stu-id="e8448-224">This formula specifies that all columns resolve to the false Boolean condition; therefore, no columns for the Employee Security table can be queried by a member of the Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="e8448-225">Per la tabella **Territorio vendita** digitare la formula seguente.</span><span class="sxs-lookup"><span data-stu-id="e8448-225">For the **Sales Territory** table, type the following formula.</span></span>  
  
     `='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 'Employee Security'[Login Id], USERNAME(), 'Employee Security'[Sales Territory Id], 'Sales Territory'[Sales Territory Id])`  
  
     <span data-ttu-id="e8448-226">Dopo avere completato la compilazione della formula, premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="e8448-226">When you have finished building the formula, press ENTER.</span></span>  
  
     <span data-ttu-id="e8448-227">In questa formula la funzione LOOKUPVALUE restituisce tutti i valori per la colonna Sicurezza dipendenti[ID territorio vendita], dove Sicurezza dipendenti[ID di accesso] corrisponde al nome utente di Windows attualmente connesso e Sicurezza dipendenti[ID territorio vendita] corrisponde a Territorio vendita[ID territorio vendita].</span><span class="sxs-lookup"><span data-stu-id="e8448-227">In this formula, the LOOKUPVALUE function returns all values for the Employee Security[Sales Territory Id] column, where the Employee Security[Login Id] is the same as the current logged on Windows user name, and Employee Security[Sales Territory Id] is the same as the Sales Territory[Sales Territory Id].</span></span>  
  
     <span data-ttu-id="e8448-228">Il set di ID territorio vendita restituito da LOOKUPVALUE viene quindi utilizzato per limitare le righe visualizzate nella tabella Territorio vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-228">The set of Sales Territory IDs returned by LOOKUPVALUE is then used to restrict the rows shown in the Sales Territory table.</span></span> <span data-ttu-id="e8448-229">Verranno visualizzate solo le righe il cui ID territorio vendita è presente nel set di ID restituito dalla funzione LOOKUPVALUE.</span><span class="sxs-lookup"><span data-stu-id="e8448-229">Only rows where the Sales Territory ID for the row is in the set of IDs returned by the LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="e8448-230">Nella finestra di dialogo Gestione ruoli fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="e8448-230">In the Role Manager dialog box, click **Ok**.</span></span>  
  
## <a name="test-the-sales-employees-by-territory-user-role"></a><span data-ttu-id="e8448-231">Testare il ruolo utente Sales Employees by Territory</span><span class="sxs-lookup"><span data-stu-id="e8448-231">Test the Sales Employees by Territory User Role</span></span>  
 <span data-ttu-id="e8448-232">In questa attività verrà utilizzata la funzionalità Analizza in Excel di [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] per testare l'efficacia del ruolo utente Addetti alle vendite per territorio.</span><span class="sxs-lookup"><span data-stu-id="e8448-232">In this task, you will use the Analyze in Excel feature in [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] to test the efficacy of the Sales Employees by Territory user role.</span></span> <span data-ttu-id="e8448-233">Specificare uno dei nomi utente aggiunti nella tabella Sicurezza dipendenti come membro del ruolo.</span><span class="sxs-lookup"><span data-stu-id="e8448-233">You will specify one of the user names you added to the Employee Security table and as a member of the role.</span></span> <span data-ttu-id="e8448-234">Questo nome utente verrà quindi utilizzato come nome utente effettivo nella connessione creata tra Excel e il modello.</span><span class="sxs-lookup"><span data-stu-id="e8448-234">This user name will then be used as the effective user name in the connection created between Excel and the model.</span></span>  
  
#### <a name="to-test-the-sales-employees-by-territory-user-role"></a><span data-ttu-id="e8448-235">Per testare il ruolo utente Sales Employees by Territory</span><span class="sxs-lookup"><span data-stu-id="e8448-235">To test the Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="e8448-236">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]fare clic sul menu **Modello** e quindi scegliere **Analizza in Excel**.</span><span class="sxs-lookup"><span data-stu-id="e8448-236">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click the **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="e8448-237">Nella finestra di dialogo **Analizza in Excel**, in **Specificare il nome utente o il ruolo da utilizzare per la connessione al modello**, selezionare **Altro utente di Windows** e quindi fare clic su **Sfoglia**.</span><span class="sxs-lookup"><span data-stu-id="e8448-237">In the **Analyze in Excel** dialog box, in **Specify the user name or role to use to connect to the model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="e8448-238">Nella finestra di dialogo **Seleziona utente o gruppo** in **Immettere i nomi degli oggetti da selezionare**digitare uno dei nomi utente inclusi nella tabella Dipendente, quindi fare clic su **Controlla nomi**.</span><span class="sxs-lookup"><span data-stu-id="e8448-238">In the **Select User or Group** dialog box, in **Enter the object name to select**, type one of the user names you included in the Employee table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="e8448-239">Fare clic su **OK** per chiudere la finestra di dialogo **Seleziona utente o gruppo** e quindi fare clic su **OK** per chiudere la finestra di dialogo **Analizza in Excel**.</span><span class="sxs-lookup"><span data-stu-id="e8448-239">Click **Ok** to close the **Select User or Group** dialog box, and then click **Ok** to close the **Analyze in Excel** dialog box.</span></span>  
  
     <span data-ttu-id="e8448-240">Excel verrà aperto con una nuova cartella di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e8448-240">Excel will open with a new workbook.</span></span> <span data-ttu-id="e8448-241">Verrà creata automaticamente una tabella pivot.</span><span class="sxs-lookup"><span data-stu-id="e8448-241">A Pivot table is automatically created.</span></span> <span data-ttu-id="e8448-242">L'elenco di campi tabella pivot include la maggior parte dei campi dati disponibili nel nuovo modello.</span><span class="sxs-lookup"><span data-stu-id="e8448-242">The Pivot Table Field List includes most of the data fields available in your new model.</span></span>  
  
     <span data-ttu-id="e8448-243">Si noti che la tabella Sicurezza dipendenti non è visibile nell'elenco di campi tabella pivot</span><span class="sxs-lookup"><span data-stu-id="e8448-243">Notice the Employee Security table is not visible in the Pivot Table Field List.</span></span> <span data-ttu-id="e8448-244">in quanto in un'attività precedente si è scelto di nascondere questa tabella agli strumenti client.</span><span class="sxs-lookup"><span data-stu-id="e8448-244">This is because you chose to hide this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="e8448-245">Nell'elenco **Campo tabella pivot** in **∑ Internet Sales** (misure) selezionare la misura **Internet Total Sales** .</span><span class="sxs-lookup"><span data-stu-id="e8448-245">In the **Pivot Table Field** list, in **∑ Internet Sales** (measures), select the **Internet Total Sales** measure.</span></span> <span data-ttu-id="e8448-246">La misura verrà immessa nei campi **Valori** .</span><span class="sxs-lookup"><span data-stu-id="e8448-246">The measure will be entered into the **Values** fields.</span></span>  
  
6.  <span data-ttu-id="e8448-247">Nell'elenco **Campo tabella pivot** selezionare la colonna **ID territorio vendita** della tabella **Territorio vendita** .</span><span class="sxs-lookup"><span data-stu-id="e8448-247">In the **Pivot Table Field** list, select the **Sales Territory Id** column from the **Sales Territory** table.</span></span> <span data-ttu-id="e8448-248">La colonna verrà immessa nei campi **Etichette di riga** .</span><span class="sxs-lookup"><span data-stu-id="e8448-248">The column will be entered into the **Row Labels** fields.</span></span>  
  
     <span data-ttu-id="e8448-249">Si noti che i dati relativi alle vendite Internet vengono visualizzati solo per l'unica area a cui appartiene il nome utente effettivo usato.</span><span class="sxs-lookup"><span data-stu-id="e8448-249">Notice Internet sales figures appear only for the one region to which the effective user name you used belongs.</span></span> <span data-ttu-id="e8448-250">Se si seleziona un'altra colonna, ad esempio Città della tabella Geografia, come campo Etichette di riga, verranno visualizzate solo le città del territorio di vendita a cui appartiene l'utente effettivo.</span><span class="sxs-lookup"><span data-stu-id="e8448-250">If you select another column; for example, City, from the Geography table as Row Label field, only cities in the sales territory to which the effective user belongs are displayed.</span></span>  
  
     <span data-ttu-id="e8448-251">Questo utente non può esplorare né eseguire una query sui dati delle vendite Internet per territori diversi da quello a cui appartiene poiché il filtro di riga definito per la tabella Territorio vendita nel ruolo utente Addetti alle vendite per territorio protegge in effetti tutti i dati correlati agli altri territori di vendita.</span><span class="sxs-lookup"><span data-stu-id="e8448-251">This user cannot browse or query any Internet sales data for territories other than the one they belong because the row filter defined for the Sales Territory table in the Sales Employees by Territory user role effectively secures data for all data related to other sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8448-252">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="e8448-252">See Also</span></span>  
 <span data-ttu-id="e8448-253">[Funzione USERNAME &#40;&#41;DAX](/dax/username-function-dax) </span><span class="sxs-lookup"><span data-stu-id="e8448-253">[USERNAME Function &#40;DAX&#41;](/dax/username-function-dax) </span></span>  
 <span data-ttu-id="e8448-254">[Funzione LOOKUPVALUE &#40;&#41;DAX](/dax/lookupvalue-function-dax) </span><span class="sxs-lookup"><span data-stu-id="e8448-254">[LOOKUPVALUE Function &#40;DAX&#41;](/dax/lookupvalue-function-dax) </span></span>  
 [<span data-ttu-id="e8448-255">Funzione CUSTOMDATA &#40;&#41;DAX</span><span class="sxs-lookup"><span data-stu-id="e8448-255">CUSTOMDATA Function &#40;DAX&#41;</span></span>](/dax/customdata-function-dax)  
  
  
