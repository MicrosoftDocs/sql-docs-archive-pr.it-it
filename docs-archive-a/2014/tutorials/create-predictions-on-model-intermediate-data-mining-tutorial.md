---
title: Creazione di stime in un modello Sequence Clustering (Esercitazione intermedia sul data mining) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 94a8d4f9-a76a-49c5-9785-917010359511
author: minewiskan
ms.author: owend
manager: kfilee
ms.openlocfilehash: 2402c28a564502df9ce12c5e3f97b9d19590cfea
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87622973"
---
# <a name="creating-predictions-on-a-sequence-clustering-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="bf5c6-102">Creazione di stime su un modello Sequence Clustering (Esercitazione intermedia sul data mining)</span><span class="sxs-lookup"><span data-stu-id="bf5c6-102">Creating Predictions on a Sequence Clustering Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="bf5c6-103">Dopo aver compreso meglio il modello Sequence Clustering, esplorarlo nel Visualizzatore, è possibile creare query di stima utilizzando la stima Generatore di query nella scheda **Stima modello** di data mining di progettazione modelli di data mining.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-103">After you understand the sequence clustering model better by browsing it in the viewer, you can create prediction queries by using Prediction Query Builder on the **Mining Model Prediction** tab in Data Mining Designer.</span></span> <span data-ttu-id="bf5c6-104">Per creare una stima, occorre selezionare innanzitutto il modello Sequence Clustering, quindi i dati di input.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-104">To create a prediction, you first select the sequence clustering model, and then select the input data.</span></span> <span data-ttu-id="bf5c6-105">Per gli input, è possibile utilizzare un'origine dati esterna o compilare una query singleton e fornire valori in una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-105">For inputs, you can use either an external data source, or you can build a singleton query and provide values in a dialog box.</span></span>  
  
 <span data-ttu-id="bf5c6-106">In questa lezione si presuppone che l'utente abbia già familiarità con l'utilizzo del generatore delle query di stima e desideri apprendere come compilare query specifiche per un modello Sequence Clustering.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-106">This lesson assumes that you are already familiar with how to use the prediction query builder and want to learn how to build queries that are specific to a sequence clustering model.</span></span> <span data-ttu-id="bf5c6-107">Per informazioni generali sull'utilizzo di Generatore di query di stima, vedere [interfacce di query di data mining](../../2014/analysis-services/data-mining/data-mining-query-tools.md) o la sezione dell'esercitazione di base sul data mining, [creazione di stime &#40;esercitazione di base sul data mining&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="bf5c6-107">For general information about how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md) or the section of the Basic Data Mining tutorial, [Creating Predictions &#40;Basic Data Mining Tutorial&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span></span>  
  
## <a name="creating-predictions-on-the-regional-model"></a><span data-ttu-id="bf5c6-108">Creazione di stime sul modello regionale</span><span class="sxs-lookup"><span data-stu-id="bf5c6-108">Creating Predictions on the Regional Model</span></span>  
 <span data-ttu-id="bf5c6-109">Per questo scenario verranno dapprima create alcune query di stima singleton, per avere un'idea di come le stime potrebbero variare a seconda dell'area.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-109">For this scenario, you will first create some singleton prediction queries, to get an idea of how predictions might be different by region.</span></span>  
  
#### <a name="to-create-a-singleton-query-on-a-sequence-clustering-model"></a><span data-ttu-id="bf5c6-110">Per creare una query singleton in un modello Sequence Clustering</span><span class="sxs-lookup"><span data-stu-id="bf5c6-110">To create a singleton query on a sequence clustering model</span></span>  
  
1.  <span data-ttu-id="bf5c6-111">Fare clic sulla scheda **Stima modello** di data mining di progettazione modelli di data mining.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-111">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="bf5c6-112">Scegliere **query singleton**dal menu colonna **modello di data mining** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-112">In the **Mining Model** column menu, select **Singleton Query**.</span></span>  
  
     <span data-ttu-id="bf5c6-113">Verranno visualizzati il riquadro **modello di data mining** e il riquadro **input query singleton** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-113">The **Mining Model** pane and **Singleton Query Input** pane appear.</span></span>  
  
3.  <span data-ttu-id="bf5c6-114">Nel riquadro **modello di data mining** fare clic su **Seleziona modello**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-114">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="bf5c6-115">Se il modello Sequence Clustering è già stato selezionato, ignorare questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-115">(You can skip this step if the sequence clustering mode is already selected.)</span></span>  
  
     <span data-ttu-id="bf5c6-116">Verrà visualizzata la finestra di dialogo **Seleziona modello di data mining** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-116">The **Select Mining Model** dialog box opens.</span></span>  
  
4.  <span data-ttu-id="bf5c6-117">Espandere il nodo che rappresenta la struttura di data mining **Sequence Clustering con Region**e selezionare il modello **Sequence Clustering with Region**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-117">Expand the node that represents the mining structure **Sequence Clustering with Region**, and select the model **Sequence Clustering with Region**.</span></span> <span data-ttu-id="bf5c6-118">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-118">Click **OK**.</span></span> <span data-ttu-id="bf5c6-119">Per il momento, ignorare il riquadro di input. Gli input verranno specificati dopo avere configurato le funzioni di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-119">For now, ignore the input pane; you will specify the inputs after you have set up the prediction functions.</span></span>  
  
5.  <span data-ttu-id="bf5c6-120">Nella griglia fare clic sulla cella vuota sotto **origine** e selezionare **funzione di stima.**</span><span class="sxs-lookup"><span data-stu-id="bf5c6-120">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="bf5c6-121">Nella cella sotto **campo**selezionare **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-121">In the cell under **Field**, select **PredictSequence**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="bf5c6-122">È anche possibile usare la funzione **Predict** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-122">You can also use the **Predict** function.</span></span> <span data-ttu-id="bf5c6-123">In tal caso, assicurarsi di scegliere la versione della funzione **Predict** che accetta una colonna di tabella come argomento.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-123">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument..</span></span>  
  
6.  <span data-ttu-id="bf5c6-124">Nel riquadro **modello di data mining** selezionare la tabella nidificata `v Assoc Seq Line Items` e trascinarla nella griglia nella casella **criteri/argomento** della funzione **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-124">In the **Mining Model** pane, select the nested table `v Assoc Seq Line Items`, and drag it into the grid, to the **Criteria/Argument** box for the **PredictSequence** function.</span></span>  
  
     <span data-ttu-id="bf5c6-125">Il trascinamento dei nomi di tabella e colonna consente di compilare istruzioni complesse senza errori di sintassi.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-125">Dragging and dropping table and column names enables you to build complex statements without syntax errors.</span></span> <span data-ttu-id="bf5c6-126">Tuttavia, sostituisce il contenuto corrente della cella, che include altri argomenti facoltativi per la funzione **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-126">However, it replaces the current contents of the cell, which include other optional arguments for the **PredictSequence** function.</span></span> <span data-ttu-id="bf5c6-127">Per visualizzare gli altri argomenti, è possibile aggiungere temporaneamente una seconda istanza della funzione alla griglia per riferimento.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-127">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
7.  <span data-ttu-id="bf5c6-128">Fare clic sul pulsante **result** nell'angolo superiore del generatore di query di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-128">Click the **Result** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="bf5c6-129">I risultati previsti contengono una singola colonna con l' **espressione**di intestazione.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-129">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="bf5c6-130">La colonna **espressione** contiene una tabella nidificata con tre colonne, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="bf5c6-130">The **Expression** column contains a nested table with three columns as follows:</span></span>  
  
|<span data-ttu-id="bf5c6-131">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="bf5c6-131">$SEQUENCE</span></span>|<span data-ttu-id="bf5c6-132">Line Number</span><span class="sxs-lookup"><span data-stu-id="bf5c6-132">Line Number</span></span>|<span data-ttu-id="bf5c6-133">Modello</span><span class="sxs-lookup"><span data-stu-id="bf5c6-133">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="bf5c6-134">1</span><span class="sxs-lookup"><span data-stu-id="bf5c6-134">1</span></span>||<span data-ttu-id="bf5c6-135">Mountain-200</span><span class="sxs-lookup"><span data-stu-id="bf5c6-135">Mountain-200</span></span>|  
  
 <span data-ttu-id="bf5c6-136">Che cosa indicano questi risultati?</span><span class="sxs-lookup"><span data-stu-id="bf5c6-136">What do these results mean?</span></span> <span data-ttu-id="bf5c6-137">Si tenga presente che non è stato specificato alcun input.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-137">Remember that you did not specify any inputs.</span></span> <span data-ttu-id="bf5c6-138">La stima pertanto viene eseguita rispetto all'intera popolazione dei case e Analysis Services restituisce la stima più probabile a livello complessivo.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-138">Therefore, the prediction is made against the entire population of cases, and Analysis Services returns the most likely prediction overall.</span></span>  
  
### <a name="adding-inputs-to-a-singleton-prediction-query"></a><span data-ttu-id="bf5c6-139">Aggiunta di input a una query di stima singleton</span><span class="sxs-lookup"><span data-stu-id="bf5c6-139">Adding Inputs to a Singleton Prediction Query</span></span>  
 <span data-ttu-id="bf5c6-140">Finora non è stato specificato alcun input.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-140">Until now, you have not specified any inputs.</span></span> <span data-ttu-id="bf5c6-141">Nell'attività successiva verrà utilizzato il riquadro **input query singleton** per specificare alcuni input per la query.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-141">In the next task, you will use the **Singleton Query Input** pane to specify some inputs to the query.</span></span> <span data-ttu-id="bf5c6-142">Innanzitutto, si utilizzerà [Region] come input per il modello Sequence Clustering regionale, per determinare se le sequenze stimate sono le stesse per tutte le aree.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-142">First, you will use [Region] as an input to the regional sequence clustering model, to determine whether the predicted sequences are the same for all regions.</span></span> <span data-ttu-id="bf5c6-143">Verrà quindi descritto come modificare la query per aggiungere la probabilità per ogni stima e convertire i risultati in formato flat per renderne più semplice la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-143">You will then learn how to modify the query to add the probability for each prediction, and flatten the results to make them easier to view.</span></span>  
  
##### <a name="to-generate-predictions-for-a-specific-customer-group"></a><span data-ttu-id="bf5c6-144">Per generare stime per uno specifico gruppo di clienti</span><span class="sxs-lookup"><span data-stu-id="bf5c6-144">To generate predictions for a specific customer group</span></span>  
  
1.  <span data-ttu-id="bf5c6-145">Fare clic sul pulsante **progettazione** nell'angolo superiore sinistro del generatore di query di stima per tornare alla griglia di compilazione della query.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-145">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="bf5c6-146">Nella finestra di dialogo **input query singleton** fare clic sulla casella **valore** per `Region` e selezionare **Europa**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-146">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **Europe**.</span></span>  
  
3.  <span data-ttu-id="bf5c6-147">Fare clic sul pulsante **risultato** per visualizzare le stime per i clienti in Europa.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-147">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
4.  <span data-ttu-id="bf5c6-148">Fare clic sul pulsante **progettazione** nell'angolo superiore sinistro del generatore di query di stima per tornare alla griglia di compilazione della query.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-148">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
5.  <span data-ttu-id="bf5c6-149">Nella finestra di dialogo **input query singleton** fare clic sulla casella **valore** per `Region` e selezionare **America del Nord**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-149">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **North America**.</span></span>  
  
6.  <span data-ttu-id="bf5c6-150">Fare clic sul pulsante **risultato** per visualizzare le stime per i clienti in America del Nord.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-150">Click the **Result** button to view predictions for customers in North America.</span></span>  
  
### <a name="adding-probabilities-by-using-a-custom-expression"></a><span data-ttu-id="bf5c6-151">Aggiunta di probabilità tramite un'espressione personalizzata</span><span class="sxs-lookup"><span data-stu-id="bf5c6-151">Adding Probabilities by Using a Custom Expression</span></span>  
 <span data-ttu-id="bf5c6-152">Restituire la probabilità per ogni stima è leggermente più complicato, perché la probabilità è un attributo della stima e viene restituita come una tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-152">To output the probability for each prediction is slightly more complicated, because the probability is an attribute of the prediction and is output as a nested table.</span></span> <span data-ttu-id="bf5c6-153">Se si ha familiarità con DMX (Data Mining Extensions), è possibile modificare facilmente la query per aggiungere un'istruzione sub-SELECT sulla tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-153">If you are familiar with Data Mining Extensions (DMX), you can easily alter the query to add a sub-select statement on the nested table.</span></span> <span data-ttu-id="bf5c6-154">Tuttavia, è anche possibile creare un'istruzione sub-SELECT nel generatore delle query di stima aggiungendo un'espressione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-154">However, you can also create a sub-select statement in the Prediction Query Builder by adding a custom expression.</span></span>  
  
##### <a name="to-output-probabilities-for-a-predicted-sequence-by-using-a-custom-expression"></a><span data-ttu-id="bf5c6-155">Per restituire le probabilità per una sequenza stimata tramite un'espressione personalizzata</span><span class="sxs-lookup"><span data-stu-id="bf5c6-155">To output probabilities for a predicted sequence by using a custom expression</span></span>  
  
1.  <span data-ttu-id="bf5c6-156">Fare clic sul pulsante **progettazione** nell'angolo superiore sinistro del generatore di query di stima per tornare alla griglia di compilazione della query.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-156">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="bf5c6-157">Nella griglia, in **origine**, fare clic su una nuova riga e selezionare **espressione personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-157">In the grid, under **Source**, click a new row, and select **Custom Expression**.</span></span>  
  
3.  <span data-ttu-id="bf5c6-158">Lasciare vuota la casella sotto **campo** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-158">Leave the box under **Field** blank.</span></span>  
  
4.  <span data-ttu-id="bf5c6-159">Per **alias**Digitare `t` .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-159">For **Alias**, type `t`.</span></span>  
  
5.  <span data-ttu-id="bf5c6-160">Nella casella **criteri/argomento** Digitare l'istruzione sub-SELECT completa, come illustrato nell'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-160">In the **Criteria/Argument** box, type the complete sub-select statement as shown in the following code sample.</span></span> <span data-ttu-id="bf5c6-161">Assicurarsi di includere le parentesi iniziale e finale.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-161">Be sure to include the starting and ending parentheses.</span></span>  
  
    ```  
    (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))  
    ```  
  
6.  <span data-ttu-id="bf5c6-162">Fare clic sul pulsante **risultato** per visualizzare le stime per i clienti in Europa.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-162">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
 <span data-ttu-id="bf5c6-163">I risultati ora contengono due tabelle nidificate, una con la stima e una con la probabilità per la stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-163">The results now contain two nested tables, one with the prediction, and one with the probability for the prediction.</span></span> <span data-ttu-id="bf5c6-164">Se la query non funziona, è possibile passare alla visualizzazione Progettazione query ed esaminare l'istruzione della query completa, che dovrebbe avere l'aspetto seguente:</span><span class="sxs-lookup"><span data-stu-id="bf5c6-164">If the query does not work, you can switch to query design view and review the complete query statement, which should be as follows:</span></span>  
  
```  
SELECT  
  PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
  ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
FROM  
  [Sequence Clustering with Region]  
NATURAL PREDICTION JOIN  
(SELECT 'Europe' AS [Region]) AS t  
```  
  
### <a name="working-with-results"></a><span data-ttu-id="bf5c6-165">Utilizzo dei risultati</span><span class="sxs-lookup"><span data-stu-id="bf5c6-165">Working with Results</span></span>  
 <span data-ttu-id="bf5c6-166">Quando nei risultati sono presenti molte tabelle nidificate, è possibile convertire i risultati in formato flat per semplificarne la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-166">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="bf5c6-167">A tale scopo, è possibile modificare manualmente la query aggiungendovi la parola chiave `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-167">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
##### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="bf5c6-168">Per convertire in formato flat i set di righe nidificati in una query di stima</span><span class="sxs-lookup"><span data-stu-id="bf5c6-168">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="bf5c6-169">Fare clic sul pulsante **query** nell'angolo del generatore di query di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-169">Click the **Query** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="bf5c6-170">La griglia viene sostituita da un riquadro aperto in cui è possibile visualizzare e modificare l'istruzione DMX creata dal generatore delle query di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-170">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="bf5c6-171">Dopo la parola chiave `SELECT` digitare `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-171">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="bf5c6-172">Il testo completo della query dovrebbe risultare analogo al seguente:</span><span class="sxs-lookup"><span data-stu-id="bf5c6-172">The complete text of the query should be similar to the following:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
      ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
    FROM  
      [Sequence Clustering with Region]  
    NATURAL PREDICTION JOIN  
    (SELECT 'Europe' AS [Region]) AS t  
    ```  
  
3.  <span data-ttu-id="bf5c6-173">Fare clic sul pulsante **risultati** nell'angolo superiore del generatore di query di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-173">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="bf5c6-174">Dopo avere modificato manualmente una query, non sarà possibile tornare alla visualizzazione della struttura senza perdere le modifiche apportate.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-174">After you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="bf5c6-175">È tuttavia possibile salvare l'istruzione DMX creata manualmente in un file di testo, quindi tornare alla visualizzazione della struttura.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-175">You can, however, save the DMX statement that you created manually to a text file, and then change back to Design view.</span></span> <span data-ttu-id="bf5c6-176">Eseguendo tale operazione, verrà ripristinata l'ultima versione della query valida nella visualizzazione della struttura.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-176">When you do so, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-predictions-on-the-related-model"></a><span data-ttu-id="bf5c6-177">Creazione di stime sul modello correlato</span><span class="sxs-lookup"><span data-stu-id="bf5c6-177">Creating Predictions on the Related Model</span></span>  
 <span data-ttu-id="bf5c6-178">Negli esempi precedenti è stata utilizzata una colonna della tabella del case, Region, come input per la query di stima singleton perché si era interessati a sapere se il modello aveva individuato eventuali differenze tra le aree.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-178">The previous examples used a case table column, Region, as the input to the singleton prediction query, because you were interested in knowing whether the model had found any differences between regions.</span></span> <span data-ttu-id="bf5c6-179">Tuttavia, dopo avere esplorato il modello, si è deciso che le differenze non sono abbastanza marcate da giustificare una personalizzazione dei consigli sui prodotti in base all'area.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-179">However, after exploring the model, you decided that the differences are not strong enough to justify customizing product recommendations by region.</span></span> <span data-ttu-id="bf5c6-180">Ciò che si è realmente interessati a stimare sono gli articoli che i clienti selezionano.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-180">What you are really interested in predicting is the items that customers select.</span></span> <span data-ttu-id="bf5c6-181">Nelle query che seguono, pertanto, si utilizzerà il modello Sequence Clustering che non include Region per generare consigli per tutti i clienti.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-181">Therefore, in the queries that follow, you will use the sequence clustering model that does not include Region, to generate recommendations for all customers.</span></span>  
  
### <a name="using-nested-table-columns-as-input"></a><span data-ttu-id="bf5c6-182">Utilizzo di colonne di tabelle nidificate come input</span><span class="sxs-lookup"><span data-stu-id="bf5c6-182">Using Nested Table Columns as Input</span></span>  
 <span data-ttu-id="bf5c6-183">Innanzitutto verrà creata una query di stima singleton che accetta un solo articolo come input e restituisce l'articolo successivo più probabile.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-183">First you will create a singleton prediction query that takes a single item as input and returns the next most likely item.</span></span> <span data-ttu-id="bf5c6-184">Per ottenere una stima di questo tipo, è necessario utilizzare una colonna di tabella nidificata come valore di input.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-184">To get a prediction of this kind, you have to use a nested table column as the input value.</span></span> <span data-ttu-id="bf5c6-185">Questo avviene perché l'attributo stimato, Model, fa parte di una tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-185">This is because the attribute that you are predicting, Model, is part of a nested table.</span></span> <span data-ttu-id="bf5c6-186">Analysis Services fornisce la finestra di dialogo **input tabella nidificata** che consente di creare facilmente query di stima sugli attributi di una tabella nidificata utilizzando l'generatore di query di stima.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-186">Analysis Services provides the **Nested Table Input** dialog box to help you easily create prediction queries on nested table attributes, by using the Prediction Query Builder.</span></span>  
  
##### <a name="to-use-a-nested-table-as-input-to-a-prediction"></a><span data-ttu-id="bf5c6-187">Per utilizzare una tabella nidificata come input per una stima</span><span class="sxs-lookup"><span data-stu-id="bf5c6-187">To use a nested table as input to a prediction</span></span>  
  
1.  <span data-ttu-id="bf5c6-188">Fare clic sul pulsante **progettazione** nell'angolo superiore sinistro del generatore di query di stima per tornare alla griglia di compilazione della query.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-188">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="bf5c6-189">Nella finestra di dialogo **input query singleton** fare clic sulla casella **valore** per `Region` e selezionare la riga vuota per cancellare l'input per questo campo.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-189">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select the empty row to clear the input for this field.</span></span>  
  
3.  <span data-ttu-id="bf5c6-190">Nella finestra di dialogo **input query singleton** fare clic sulla casella **valore** per `vAssocSeqLineItems` , quindi fare clic sul pulsante (...).</span><span class="sxs-lookup"><span data-stu-id="bf5c6-190">In the **Singleton Query Input** dialog box, click the **Value** box for `vAssocSeqLineItems`, and then click the (...) button.</span></span>  
  
4.  <span data-ttu-id="bf5c6-191">Nella finestra di dialogo **input tabella nidificata** fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-191">In the **Nested Table Input** dialog box, click **Add**.</span></span>  
  
5.  <span data-ttu-id="bf5c6-192">Nella nuova riga fare clic sulla casella in `Model` e selezionare Touring Tire nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-192">In the new row, click the box under `Model`, and select Touring Tire from the list.</span></span> <span data-ttu-id="bf5c6-193">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-193">Click **OK**.</span></span>  
  
6.  <span data-ttu-id="bf5c6-194">Fare clic sul pulsante **risultato** per visualizzare le stime.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-194">Click the **Result** button to view the predictions.</span></span>  
  
 <span data-ttu-id="bf5c6-195">Il modello consiglia gli articoli successivi per tutti i clienti che scelgono Touring Tire come primo articolo.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-195">The model recommends the following next items for all customers who choose the Touring Tire as the first item.</span></span> <span data-ttu-id="bf5c6-196">Si sa già dall'esplorazione del modello che di frequente i clienti acquistano insieme i prodotti Touring Tire e Touring Tire Tube, pertanto questi consigli sembrano validi.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-196">You already know from exploring the model that customers frequently purchase the products Touring Tire and Touring Tire Tube together, so these recommendations look good.</span></span>  
  
|<span data-ttu-id="bf5c6-197">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="bf5c6-197">$SEQUENCE</span></span>|<span data-ttu-id="bf5c6-198">Line Number</span><span class="sxs-lookup"><span data-stu-id="bf5c6-198">Line Number</span></span>|<span data-ttu-id="bf5c6-199">Modello</span><span class="sxs-lookup"><span data-stu-id="bf5c6-199">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="bf5c6-200">1</span><span class="sxs-lookup"><span data-stu-id="bf5c6-200">1</span></span>||<span data-ttu-id="bf5c6-201">Touring Tire Tube</span><span class="sxs-lookup"><span data-stu-id="bf5c6-201">Touring Tire Tube</span></span>|  
|<span data-ttu-id="bf5c6-202">2</span><span class="sxs-lookup"><span data-stu-id="bf5c6-202">2</span></span>||<span data-ttu-id="bf5c6-203">Sport-100</span><span class="sxs-lookup"><span data-stu-id="bf5c6-203">Sport-100</span></span>|  
|<span data-ttu-id="bf5c6-204">3</span><span class="sxs-lookup"><span data-stu-id="bf5c6-204">3</span></span>||<span data-ttu-id="bf5c6-205">Long-Sleeve Logo Jersey</span><span class="sxs-lookup"><span data-stu-id="bf5c6-205">Long-Sleeve Logo Jersey</span></span>|  
  
### <a name="creating-a-bulk-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="bf5c6-206">Creazione di una query di stima bulk tramite input di tabelle nidificate</span><span class="sxs-lookup"><span data-stu-id="bf5c6-206">Creating a Bulk Prediction Query using Nested Table Inputs</span></span>  
 <span data-ttu-id="bf5c6-207">Una volta verificato che il modello crea il tipo di stime che è possibile utilizzare per la creazione di consigli, verrà creata una query di stima associata a un'origine dati esterna.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-207">Now that you are satisfied that the model creates the kind of predictions that you can use in making recommendations, you will create a prediction query that is mapped to an external data source.</span></span> <span data-ttu-id="bf5c6-208">Tale origine dati fornirà valori che rappresentano i prodotti correnti.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-208">That data source will provide values representing current products.</span></span> <span data-ttu-id="bf5c6-209">Poiché si è interessati alla creazione di una query di stima che fornisca l'ID cliente e un elenco di prodotti come input, si aggiungerà la tabella dei clienti come tabella del case e la tabella degli acquisti come tabella nidificata.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-209">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="bf5c6-210">Si aggiungeranno quindi funzioni di stima per creare consigli, come in precedenza.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-210">Then you will add prediction functions as you did previously to create recommendations.</span></span>  
  
 <span data-ttu-id="bf5c6-211">Si tratta della stessa procedura utilizzata per creare stime per lo scenario di analisi degli acquisti nella lezione 3, tuttavia in un modello Sequence Clustering le stime necessitano anche dell'ordine come input.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-211">This is the same procedure that you use to create predictions for the market basket scenario in Lesson 3; however, in a sequence clustering model predictions also need the order as input.</span></span>  
  
##### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="bf5c6-212">Per creare una query di stima tramite input di tabelle nidificate</span><span class="sxs-lookup"><span data-stu-id="bf5c6-212">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="bf5c6-213">Nel riquadro **modello di data mining** selezionare il modello Sequence Clustering, se non è già selezionato.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-213">In the **Mining Model** pane, select the Sequence Clustering model, if it is not already selected.</span></span>  
  
2.  <span data-ttu-id="bf5c6-214">Nella finestra di dialogo **Seleziona tabella/** e di input fare clic su **Seleziona tabella del case**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-214">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="bf5c6-215">Nella finestra di dialogo **Seleziona tabella** selezionare Orders in origine dati.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-215">In the **Select Table** dialog box, for Data Source, select Orders.</span></span> <span data-ttu-id="bf5c6-216">Nell'elenco **nome tabella/vista** selezionare vAssocSeqOrders e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-216">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="bf5c6-217">Nella finestra di dialogo **Seleziona tabella/** e di input fare clic su **Seleziona tabella nidificata**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-217">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="bf5c6-218">Nella finestra di dialogo **Seleziona tabella** selezionare Orders in **origine dati**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-218">In the **Select Table** dialog box, for **Data Source**, select Orders.</span></span> <span data-ttu-id="bf5c6-219">Nell'elenco **nome tabella/vista** selezionare vAssocSeqLineItems e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-219">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="bf5c6-220">Analysis Services tenterà di rilevare le relazioni e di crearle automaticamente se i tipi di dati corrispondono e i nomi delle colonne sono simili.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-220">Analysis Services will try to detect relationships and create them automatically if the data types match and the column names are similar.</span></span> <span data-ttu-id="bf5c6-221">Se le relazioni create non sono corrette, è possibile fare clic con il pulsante destro del mouse sulla linea di join e scegliere **modifica connessioni** per modificare il mapping delle colonne. in alternativa, è possibile fare clic con il pulsante destro del mouse sulla linea di join e scegliere **Elimina** per rimuovere completamente la relazione.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-221">If the relationships that it creates are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span> <span data-ttu-id="bf5c6-222">In questo caso, poiché le tabelle erano già unite in join nella vista origine dati, tali relazioni vengono aggiunte automaticamente al riquadro di progettazione.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-222">In this case, because the tables were already joined in the data source view, those relationships are automatically added to the design pane.</span></span>  
  
6.  <span data-ttu-id="bf5c6-223">Aggiungere una nuova riga alla griglia.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-223">Add a new row to the grid.</span></span> <span data-ttu-id="bf5c6-224">In **origine**selezionare vAssocSeqOrders e per **campo**selezionare CustomerKey.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-224">For **Source**, select vAssocSeqOrders, and for **Field**, select CustomerKey.</span></span>  
  
7.  <span data-ttu-id="bf5c6-225">Aggiungere una nuova riga alla griglia.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-225">Add a new row to the grid.</span></span> <span data-ttu-id="bf5c6-226">Per **origine**selezionare **funzione di stima**e in **campo**selezionare **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-226">For **Source**, select **Prediction Function**, and for **Field**, select **PredictSequence**.</span></span>  
  
8.  <span data-ttu-id="bf5c6-227">Trascinare vAssocSeqLineItems nella casella **criteri/argomento** .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-227">Drag vAssocSeqLineItems, into the **Criteria/Argument** box.</span></span> <span data-ttu-id="bf5c6-228">Fare clic alla fine della casella **criteri/argomento** , quindi digitare gli argomenti seguenti: `2` .</span><span class="sxs-lookup"><span data-stu-id="bf5c6-228">Click at the end of the **Criteria/Argument** box and then type the following arguments: `2`.</span></span>  
  
     <span data-ttu-id="bf5c6-229">Il testo completo nella casella **criteri/argomento** deve essere:`[Sequence Clustering].[v Assoc Seq Line Items],2`</span><span class="sxs-lookup"><span data-stu-id="bf5c6-229">The complete text in the **Criteria/Argument** box should be: `[Sequence Clustering].[v Assoc Seq Line Items],2`</span></span>  
  
9. <span data-ttu-id="bf5c6-230">Fare clic sul pulsante **risultato** per visualizzare le stime per ogni cliente.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-230">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="bf5c6-231">Questo passaggio conclude l'esercitazione relativa ai modelli Sequence Clustering.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-231">You have completed the tutorial on sequence clustering models.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="bf5c6-232">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="bf5c6-232">Next Steps</span></span>  
 <span data-ttu-id="bf5c6-233">Se sono state completate tutte le sezioni dell' [esercitazione intermedia sul data mining &#40;Analysis Services-Data mining&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), il passaggio successivo potrebbe essere quello di imparare a utilizzare le istruzioni DMX (Data Mining Extensions) per compilare modelli e generare stime.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-233">If you have finished all the sections in the [Intermediate Data Mining Tutorial &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), the next step might be to learn to use Data Mining Extensions (DMX) statements to build models and generate predictions.</span></span> <span data-ttu-id="bf5c6-234">Per ulteriori informazioni, vedere [creazione ed esecuzione di query sui modelli di data mining con DMX: esercitazioni &#40;Analysis Services-&#41;di data mining ](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span><span class="sxs-lookup"><span data-stu-id="bf5c6-234">For more information, see [Creating and Querying Data Mining Models with DMX: Tutorials &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span></span>  
  
 <span data-ttu-id="bf5c6-235">Se si ha familiarità con i concetti relativi alla programmazione, è anche possibile utilizzare AMO (Analysis Management Objects) per gestire a livello di codice gli oggetti di data mining.</span><span class="sxs-lookup"><span data-stu-id="bf5c6-235">If you are familiar with programming concepts, you can also use Analysis Management Objects (AMO) to programmatically work with data mining objects.</span></span> <span data-ttu-id="bf5c6-236">Per altre informazioni, vedere [Classi di data mining AMO](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span><span class="sxs-lookup"><span data-stu-id="bf5c6-236">For more information, see [AMO Data Mining Classes](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bf5c6-237">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="bf5c6-237">See Also</span></span>  
 <span data-ttu-id="bf5c6-238">[Esempi di query sul modello Sequence Clustering](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="bf5c6-238">[Sequence Clustering Model Query Examples](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="bf5c6-239">Contenuto dei modelli di data mining per i modelli Sequence Clustering &#40;Analysis Services - Data Mining&#41;</span><span class="sxs-lookup"><span data-stu-id="bf5c6-239">Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)  
  
  
