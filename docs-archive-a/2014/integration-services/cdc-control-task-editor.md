---
title: Editor attività controllo CDC | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.ssis.designer.cdccontroltask.config.f1
ms.assetid: 4f09d040-9ec8-4aaa-b684-f632d571f0a8
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 6b60f2a9126dbbda934124b39f36ccd90b4e6cc6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87636842"
---
# <a name="cdc-control-task-editor"></a><span data-ttu-id="11729-102">Editor attività Controllo CDC</span><span class="sxs-lookup"><span data-stu-id="11729-102">CDC Control Task Editor</span></span>
  <span data-ttu-id="11729-103">Utilizzare la finestra di dialogo **CDC Control Task Editor** per configurare l'attività di controllo CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-103">Use the **CDC Control Task Editor** dialog box to configure the CDC Control task.</span></span> <span data-ttu-id="11729-104">La configurazione dell'attività di controllo CDC include la definizione di una connessione al database CDC, l'operazione dell'attività CDC e le informazioni sulla gestione dello stato.</span><span class="sxs-lookup"><span data-stu-id="11729-104">The CDC Control task configuration includes defining a connection to the CDC database, the CDC task operation and the state management information.</span></span>  
  
 <span data-ttu-id="11729-105">Per ulteriori informazioni sull'attività di controllo CDC, vedere [CDC Control Task](control-flow/cdc-control-task.md).</span><span class="sxs-lookup"><span data-stu-id="11729-105">To learn more about the CDC Control task, see [CDC Control Task](control-flow/cdc-control-task.md).</span></span>  
  
 <span data-ttu-id="11729-106">**Per aprire CDC Control Task Editor**</span><span class="sxs-lookup"><span data-stu-id="11729-106">**To open the CDC Control Task Editor**</span></span>  
  
1.  <span data-ttu-id="11729-107">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]aprire il pacchetto [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] contenente l'attività di controllo CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-107">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], open the [!INCLUDE[ssISCurrent](../includes/ssiscurrent-md.md)] package that has the CDC Control task.</span></span>  
  
2.  <span data-ttu-id="11729-108">Nella scheda **Flusso di controllo** fare doppio clic sull'attività di controllo CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-108">On the **Control Flow** tab, double-click the CDC Control task.</span></span>  
  
## <a name="options"></a><span data-ttu-id="11729-109">Opzioni</span><span class="sxs-lookup"><span data-stu-id="11729-109">Options</span></span>  
 <span data-ttu-id="11729-110">**Gestione connessione ADO.NET per database CDC di SQL Server**</span><span class="sxs-lookup"><span data-stu-id="11729-110">**SQL Server CDC database ADO.NET connection manager**</span></span>  
 <span data-ttu-id="11729-111">Selezionare una gestione connessione esistente nell'elenco o creare una nuova connessione facendo clic su **Nuova** .</span><span class="sxs-lookup"><span data-stu-id="11729-111">Select an existing connection manager from the list, or click **New** to create a new connection.</span></span> <span data-ttu-id="11729-112">La connessione deve essere stabilita a un database di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] abilitato per CDC e in cui si trova la tabella delle modifiche selezionata.</span><span class="sxs-lookup"><span data-stu-id="11729-112">The connection must be to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that is enabled for CDC and where the selected change table is located.</span></span>  
  
 <span data-ttu-id="11729-113">**Operazione di controllo CDC**</span><span class="sxs-lookup"><span data-stu-id="11729-113">**CDC Control Operation**</span></span>  
 <span data-ttu-id="11729-114">Selezionare l'operazione da eseguire per questa attività.</span><span class="sxs-lookup"><span data-stu-id="11729-114">Select the operation to run for this task.</span></span> <span data-ttu-id="11729-115">Per tutte le operazioni viene utilizzata la variabile di stato archiviata in una variabile del pacchetto SSIS utilizzata per archiviare lo stato e passarlo tra i diversi componenti nel pacchetto.</span><span class="sxs-lookup"><span data-stu-id="11729-115">All operations use the state variable that is stored in an SSIS package variable that stores the state and passes it between the different components in the package.</span></span>  
  
-   <span data-ttu-id="11729-116">**Contrassegna avvio caricamento iniziale**: questa operazione viene utilizzata durante l'esecuzione di un caricamento iniziale da un database attivo senza uno snapshot.</span><span class="sxs-lookup"><span data-stu-id="11729-116">**Mark initial load start**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="11729-117">Viene richiamata all'inizio di un pacchetto di caricamento iniziale per registrare il valore LSN corrente nel database di origine prima che venga avviata la lettura delle tabelle di origine.</span><span class="sxs-lookup"><span data-stu-id="11729-117">It is invoked at the beginning of an initial-load package to record the current LSN in the source database before the initial-load package starts reading the source tables.</span></span> <span data-ttu-id="11729-118">Questa operazione richiede una connessione al database di origine.</span><span class="sxs-lookup"><span data-stu-id="11729-118">This requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="11729-119">Se si seleziona **Contrassegna avvio caricamento iniziale** quando si usa CDC di [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] (ovvero, non Oracle), l'utente specificato nella gestione connessione deve essere  **db_owner** o **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="11729-119">If you select **Mark Initial Load Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="11729-120">**Contrassegna fine caricamento iniziale**: questa operazione viene utilizzata durante l'esecuzione di un caricamento iniziale da un database attivo senza uno snapshot.</span><span class="sxs-lookup"><span data-stu-id="11729-120">**Mark initial load end**: This operation is used when executing an initial load from an active database without a snapshot.</span></span> <span data-ttu-id="11729-121">Viene richiamata alla fine di un pacchetto di caricamento iniziale per registrare l'LSN corrente nel database di origine al termine della lettura delle tabelle di origine.</span><span class="sxs-lookup"><span data-stu-id="11729-121">It is invoked at the end of an initial-load package to record the current LSN in the source database after the initial-load package finished reading the source tables.</span></span> <span data-ttu-id="11729-122">Questo LSN viene determinato registrando l'ora corrente in cui l'operazione si è verificata ed eseguendo quindi una query sulla tabella `cdc.lsn_time_`mapping nel database CDC per ricercare una modifica successiva a tale ora</span><span class="sxs-lookup"><span data-stu-id="11729-122">This LSN is determined by recording nthe current time when this operation occurred and then querying the `cdc.lsn_time_`mapping table in the CDC database looking for a change that occurred after that time</span></span>  
  
     <span data-ttu-id="11729-123">Se si seleziona **Contrassegna fine caricamento iniziale** quando si usa CDC di [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] (ovvero, non Oracle), l'utente specificato nella gestione connessione deve essere  **db_owner** o **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="11729-123">If you select **Mark Initial Load End** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="11729-124">**Contrassegna avvio CDC**: questa operazione viene usata quando il caricamento iniziale è costituito da un database snapshot o da un database disattivato.</span><span class="sxs-lookup"><span data-stu-id="11729-124">**Mark CDC start**: This operation is used when then the initial load is made from a snapshot database or from a quiescence database.</span></span> <span data-ttu-id="11729-125">Viene richiamata in qualsiasi punto all'interno del pacchetto di caricamento iniziale.</span><span class="sxs-lookup"><span data-stu-id="11729-125">It is invoked at any point within the initial load package.</span></span> <span data-ttu-id="11729-126">L'operazione accetta un parametro che può essere un LSN snapshot, un nome di un database snapshot (da cui l'LSN snapshot viene automaticamente derivato) o può essere lasciato vuoto, nel qual caso l'LSN del database corrente viene utilizzato come LSN iniziale per il pacchetto di elaborazione delle modifiche.</span><span class="sxs-lookup"><span data-stu-id="11729-126">The operation accepts a parameter that can be a snapshot LSN, a name of a snapshot database (from which the snapshot LSN will be derived automatically) or it can be left empty, in which case the current database LSN is used as the start LSN for the change processing package.</span></span>  
  
     <span data-ttu-id="11729-127">Questa operazione viene utilizzata al posto delle operazioni Contrassegna avvio caricamento iniziale/Contrassegna fine caricamento iniziale.</span><span class="sxs-lookup"><span data-stu-id="11729-127">This operation is used instead of the Mark Initial Load Start/End operations.</span></span>  
  
     <span data-ttu-id="11729-128">Se si seleziona **Contrassegna avvio CDC** quando si usa CDC di [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] (ovvero, non Oracle), l'utente specificato nella gestione connessione deve essere  **db_owner** o **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="11729-128">If you select **Mark CDC Start** when working on [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] CDC (that is, not Oracle) the user specified in the connection manager must be either  **db_owner** or **sysadmin**.</span></span>  
  
-   <span data-ttu-id="11729-129">**Ottieni intervallo di elaborazione**: questa operazione viene utilizzata in un pacchetto di elaborazione delle modifiche prima di richiamare il flusso di dati che utilizza il flusso di dati dell'origine CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-129">**Get processing range**: This operation is used in a change processing package before invoking the data flow that uses the CDC Source data flow.</span></span> <span data-ttu-id="11729-130">L'operazione consente di stabilire un intervallo di LSN letti dal flusso di dati dell'origine CDC quando il flusso di dati viene richiamato.</span><span class="sxs-lookup"><span data-stu-id="11729-130">It establishes a range of LSNs that the CDC Source data flow reads when invoked.</span></span> <span data-ttu-id="11729-131">L'intervallo viene archiviato in una variabile del pacchetto SSIS utilizzata dall'origine CDC durante l'elaborazione del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="11729-131">The range is stored in an SSIS package variable that is used by the CDC Source during data-flow processing.</span></span>  
  
     <span data-ttu-id="11729-132">Per altre informazioni sui possibili stati CDC che vengono archiviati, vedere [Definire una variabile di stato](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="11729-132">For more information about the possible CDC states that are stored, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
-   <span data-ttu-id="11729-133">**Contrassegna intervallo elaborato**: questa operazione viene usata in un pacchetto di elaborazione delle modifiche alla fine di un'esecuzione CDC (dopo il corretto completamento del flusso di dati CDC) per registrare l'ultimo LSN elaborato completamente nell'esecuzione CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-133">**Mark processed range**: This operation is used in a change processing package at the end of a  CDC run (after the CDC data flow is completed successfully) to record the last LSN that was fully processed in the CDC run.</span></span> <span data-ttu-id="11729-134">Alla prossima esecuzione di `GetProcessingRange` , questa posizione determina l'inizio dell'intervallo di elaborazione successivo.</span><span class="sxs-lookup"><span data-stu-id="11729-134">The next time `GetProcessingRange` is executed, this position determines the start of the next processing range.</span></span>  
  
-   <span data-ttu-id="11729-135">**Reimposta stato CDC**: questa operazione viene utilizzata per reimpostare lo stato CDC persistente associato al contesto CDC corrente.</span><span class="sxs-lookup"><span data-stu-id="11729-135">**Reset CDC state**: This operation is used to reset the persistent CDC state associated with the current CDC context.</span></span> <span data-ttu-id="11729-136">Dopo l'esecuzione di questa operazione, l'LSN massimo corrente della tabella LSN-timestamp `sys.fn_cdc_get_max_lsn` diventa l'inizio dell'intervallo di elaborazione successivo.</span><span class="sxs-lookup"><span data-stu-id="11729-136">After this operation is run, the current maximum LSN from the LSN-timestamp `sys.fn_cdc_get_max_lsn` table becomes the start of the range for the next processing range.</span></span> <span data-ttu-id="11729-137">Per questa operazione è necessaria una connessione al database di origine.</span><span class="sxs-lookup"><span data-stu-id="11729-137">This operation requires a connection to the source database.</span></span>  
  
     <span data-ttu-id="11729-138">Questa operazione viene ad esempio utilizzata quando si desidera elaborare solo i record di modifica appena creati e ignorare tutti i record di modifica obsoleti.</span><span class="sxs-lookup"><span data-stu-id="11729-138">An example of when this operation is used is when you want to process only the newly created change records and ignore all old change records.</span></span>  
  
 <span data-ttu-id="11729-139">**Variabile contenente lo stato CDC**</span><span class="sxs-lookup"><span data-stu-id="11729-139">**Variable containing the CDC state**</span></span>  
 <span data-ttu-id="11729-140">Selezionare la variabile del pacchetto SSIS utilizzata per archiviare le informazioni di stato relative all'operazione dell'attività.</span><span class="sxs-lookup"><span data-stu-id="11729-140">Select the SSIS package variable that stores the state information for the task operation.</span></span> <span data-ttu-id="11729-141">Prima di iniziare, è necessario definire una variabile.</span><span class="sxs-lookup"><span data-stu-id="11729-141">You should define a variable before you begin.</span></span> <span data-ttu-id="11729-142">Se si seleziona **AutomaticStatePersistence**, la variabile di stato viene caricata e salvata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="11729-142">If you select **Automatic state persistence**, the state variable is loaded and saved automatically.</span></span>  
  
 <span data-ttu-id="11729-143">Per altre informazioni sulla definizione della variabile di stato, vedere [Definire una variabile di stato](data-flow/define-a-state-variable.md).</span><span class="sxs-lookup"><span data-stu-id="11729-143">For more information about defining the state variable, see [Define a State Variable](data-flow/define-a-state-variable.md).</span></span>  
  
 <span data-ttu-id="11729-144">**LSN SQL Server per avviare il nome snapshot/CDC:**</span><span class="sxs-lookup"><span data-stu-id="11729-144">**SQL Server LSN to start the CDC/Snapshot name:**</span></span>  
 <span data-ttu-id="11729-145">Digitare l'LSN del database di origine corrente o il nome del database snapshot da cui viene eseguito il caricamento iniziale per determinare l'inizio di CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-145">Type the current source database LSN or the name of the snapshot database from which the initial load is performed to determine where the CDC starts.</span></span> <span data-ttu-id="11729-146">Questa opzione è disponibile solo se si imposta **Operazione di controllo CDC** su **Contrassegna avvio CDC**.</span><span class="sxs-lookup"><span data-stu-id="11729-146">This is available only if the **CDC Control Operation** is set to **Mark CDC Start**.</span></span>  
  
 <span data-ttu-id="11729-147">Per ulteriori informazioni su queste operazioni, vedere [CDC Control Task](control-flow/cdc-control-task.md)</span><span class="sxs-lookup"><span data-stu-id="11729-147">For more information about these operations, see [CDC Control Task](control-flow/cdc-control-task.md)</span></span>  
  
 <span data-ttu-id="11729-148">**Archivia automaticamente lo stato in una tabella di database**</span><span class="sxs-lookup"><span data-stu-id="11729-148">**Automatically store state in a database table**</span></span>  
 <span data-ttu-id="11729-149">Selezionare questa casella di controllo se si desidera che tramite l'attività di controllo CDC vengano gestiti automaticamente il caricamento e l'archiviazione dello stato CDC in una tabella di stato contenuta nel database specificato.</span><span class="sxs-lookup"><span data-stu-id="11729-149">Select this check box for the CDC Control task to automatically handle loading and storing the CDC state in a state table contained in the specified database.</span></span> <span data-ttu-id="11729-150">Se la casella di controllo è deselezionata, lo sviluppatore deve caricare lo stato CDC quando il pacchetto viene avviato e salvarlo ogni volta che lo stato CDC cambia.</span><span class="sxs-lookup"><span data-stu-id="11729-150">When not selected, the developer must load the CDC State when the package starts and save it whenever the CDC State changes.</span></span>  
  
 <span data-ttu-id="11729-151">**Gestione connessione per il database in cui è archiviato lo stato**</span><span class="sxs-lookup"><span data-stu-id="11729-151">**Connection manager for the database where the state is stored**</span></span>  
 <span data-ttu-id="11729-152">Selezionare una gestione connessione ADO.NET esistente dall'elenco o creare una nuova connessione facendo clic su Nuova.</span><span class="sxs-lookup"><span data-stu-id="11729-152">Select an existing ADO.NET connection manager from the list, or click New to create a new connection.</span></span> <span data-ttu-id="11729-153">Questa connessione è a un database di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] che contiene la tabella Stato.</span><span class="sxs-lookup"><span data-stu-id="11729-153">This connection is to a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database that contains the State table.</span></span> <span data-ttu-id="11729-154">La tabella Stato contiene le informazioni sullo stato.</span><span class="sxs-lookup"><span data-stu-id="11729-154">The State table contains the State information.</span></span>  
  
 <span data-ttu-id="11729-155">È disponibile solo se si seleziona **AutomaticStatePersistence** ed è un parametro obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="11729-155">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="11729-156">**Tabella da utilizzare per l'archiviazione dello stato**</span><span class="sxs-lookup"><span data-stu-id="11729-156">**Table to use for storing state**</span></span>  
 <span data-ttu-id="11729-157">Digitare il nome della tabella di stato da utilizzare per l'archiviazione dello stato CDC.</span><span class="sxs-lookup"><span data-stu-id="11729-157">Type the name of the state table to be used for storing the CDC state.</span></span> <span data-ttu-id="11729-158">La tabella specificata deve disporre di due colonne denominate **name** e **state** , entrambe dello stesso tipo di dati **varchar (256)**.</span><span class="sxs-lookup"><span data-stu-id="11729-158">The table specified must have two columns called **name** and **state** and both columns must be of the data type **varchar (256)**.</span></span>  
  
 <span data-ttu-id="11729-159">Facoltativamente, è possibile selezionare **Nuova** per ottenere uno script SQL che compila una nuova tabella Stato con le colonne obbligatorie.</span><span class="sxs-lookup"><span data-stu-id="11729-159">You can optionally select **New** to get an SQL script that builds a new State table with the required columns.</span></span> <span data-ttu-id="11729-160">Se **AutomaticStatePersistence** è selezionato, lo sviluppatore deve creare una tabella di stato in base ai requisiti elencati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="11729-160">When **Automatic state persistence** is selected, the developer must create a state table according to the requirements listed above.</span></span>  
  
 <span data-ttu-id="11729-161">È disponibile solo se si seleziona **AutomaticStatePersistence** ed è un parametro obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="11729-161">This is available only if **Automatic state persistence** is selected and it is a required parameter.</span></span>  
  
 <span data-ttu-id="11729-162">**Nome dello stato**</span><span class="sxs-lookup"><span data-stu-id="11729-162">**State name**</span></span>  
 <span data-ttu-id="11729-163">Digitare un nome da associare allo stato CDC persistente.</span><span class="sxs-lookup"><span data-stu-id="11729-163">Type a name to associate with the persistent CDC state.</span></span> <span data-ttu-id="11729-164">Un nome dello stato comune verrà specificato dal caricamento completo e dai pacchetti CDC che utilizzano lo stesso contesto.</span><span class="sxs-lookup"><span data-stu-id="11729-164">The full load and CDC packages that work with the same CDC context will specify a common state name.</span></span> <span data-ttu-id="11729-165">Questo nome viene utilizzato per cercare la riga di stato nella tabella di stato</span><span class="sxs-lookup"><span data-stu-id="11729-165">This name is used for looking up the state row in the state table</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="11729-166">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="11729-166">See Also</span></span>  
 [<span data-ttu-id="11729-167">Proprietà personalizzate dell'attività di controllo CDC</span><span class="sxs-lookup"><span data-stu-id="11729-167">CDC Control Task Custom Properties</span></span>](control-flow/cdc-control-task-custom-properties.md)  
  
  
