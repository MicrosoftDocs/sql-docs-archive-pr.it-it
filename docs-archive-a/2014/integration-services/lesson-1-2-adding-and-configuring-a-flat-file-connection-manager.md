---
title: 'Passaggio 2: Aggiunta e configurazione di una gestione connessione file flat | Microsoft Docs'
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 9a77dd32-d8c2-4961-ad37-2a971f9d6043
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 3ba3adee2422af8b2df027f55ec84366b90ddd7b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87628851"
---
# <a name="step-2-adding-and-configuring-a-flat-file-connection-manager"></a><span data-ttu-id="0de22-102">Passaggio 2: Aggiunta e configurazione di una gestione connessione file flat</span><span class="sxs-lookup"><span data-stu-id="0de22-102">Step 2: Adding and Configuring a Flat File Connection Manager</span></span>
  <span data-ttu-id="0de22-103">In questa attività si aggiungerà una gestione connessione file flat al pacchetto appena creato.</span><span class="sxs-lookup"><span data-stu-id="0de22-103">In this task, you add a Flat File connection manager to the package that you just created.</span></span> <span data-ttu-id="0de22-104">Una gestione connessione file flat abilita un pacchetto all'estrazione di dati da un file flat.</span><span class="sxs-lookup"><span data-stu-id="0de22-104">A Flat File connection manager enables a package to extract data from a flat file.</span></span> <span data-ttu-id="0de22-105">Utilizzando tale gestione connessione è possibile specificare il nome file e la posizione, le impostazioni locali e la tabella codici e il formato del file, inclusi i delimitatori di colonna, da applicare quando il pacchetto estrae i dati dal file flat.</span><span class="sxs-lookup"><span data-stu-id="0de22-105">Using the Flat File connection manager, you can specify the file name and location, the locale and code page, and the file format, including column delimiters, to apply when the package extracts data from the flat file.</span></span> <span data-ttu-id="0de22-106">È anche possibile specificare manualmente il tipo di dati per le singole colonne o usare la finestra di dialogo **Suggerisci tipo di colonne** per eseguire automaticamente il mapping delle colonne di dati estratti ai tipi di dati di [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0de22-106">In addition, you can manually specify the data type for the individual columns, or use the **Suggest Column Types** dialog box to automatically map the columns of extracted data to [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] data types.</span></span>  
  
 <span data-ttu-id="0de22-107">È necessario creare una nuova gestione connessione file flat per ogni formato di file da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="0de22-107">You must create a new Flat File connection manager for each file format that you work with.</span></span> <span data-ttu-id="0de22-108">Dal momento che in questa esercitazione viene eseguita l'estrazione di dati da più file flat con lo stesso formato di dati, è necessario aggiungere e configurare una sola gestione connessione file flat al pacchetto.</span><span class="sxs-lookup"><span data-stu-id="0de22-108">Because this tutorial extracts data from multiple flat files that have exactly the same data format, you will need to add and configure only one Flat File connection manager for your package.</span></span>  
  
 <span data-ttu-id="0de22-109">Per questa esercitazione si configureranno le seguenti proprietà nella gestione connessione file flat:</span><span class="sxs-lookup"><span data-stu-id="0de22-109">For this tutorial, you will configure the following properties in your Flat File connection manager:</span></span>  
  
-   <span data-ttu-id="0de22-110">**Nomi di colonne:** dal momento che il file flat non presenta nomi di colonne, con la gestione connessione file flat vengono creati nomi di colonna predefiniti.</span><span class="sxs-lookup"><span data-stu-id="0de22-110">**Column names:** Because the flat file does not have column names, the Flat File connection manager creates default column names.</span></span> <span data-ttu-id="0de22-111">Questi nomi predefiniti non sono utili per identificare i dati rappresentati da ogni colonna.</span><span class="sxs-lookup"><span data-stu-id="0de22-111">These default names are not useful for identifying what each column represents.</span></span> <span data-ttu-id="0de22-112">Per rendere questi nomi predefiniti più utili, è necessario modificarli in nomi che corrispondano alla tabella dei fatti in cui i dati dei file flat devono essere caricati.</span><span class="sxs-lookup"><span data-stu-id="0de22-112">To make these default names more useful, you need to change the default names to names that match the fact table into which the flat file data is to be loaded.</span></span>  
  
-   <span data-ttu-id="0de22-113">**Mapping dei dati:** i mapping dei tipi di dati specificati per la gestione connessione file flat verranno usati da tutti i componenti di origine dati dei file flat che fanno riferimento alla gestione connessione.</span><span class="sxs-lookup"><span data-stu-id="0de22-113">**Data mappings:** The data type mappings that you specify for the Flat File connection manager will be used by all flat file data source components that reference the connection manager.</span></span> <span data-ttu-id="0de22-114">È possibile eseguire manualmente il mapping dei tipi di dati usando la gestione connessione file flat oppure usare la finestra di dialogo **Suggerisci tipi di colonne** .</span><span class="sxs-lookup"><span data-stu-id="0de22-114">You can either manually map the data types by using the Flat File connection manager, or you can use the **Suggest Column Types** dialog box.</span></span> <span data-ttu-id="0de22-115">In questa esercitazione verranno visualizzati i mapping suggeriti nella finestra di dialogo **Suggerisci tipi di colonne** e quindi verranno effettuati manualmente i mapping necessari nella finestra di dialogo **Editor gestione connessione file flat** .</span><span class="sxs-lookup"><span data-stu-id="0de22-115">In this tutorial, you will view the mappings suggested in the **Suggest Column Types** dialog box and then manually make the necessary mappings in the **Flat File Connection Manager Editor** dialog box.</span></span>  
  
 <span data-ttu-id="0de22-116">Gestione connessione file flat fornisce informazioni sulle impostazioni locali per il file di dati.</span><span class="sxs-lookup"><span data-stu-id="0de22-116">The Flat File connection manager provides locale information about the data file.</span></span> <span data-ttu-id="0de22-117">Se il computer non è configurato per l'utilizzo dell'opzione Regional (lingua inglese) (Stati Uniti), è necessario impostare proprietà aggiuntive nella finestra di dialogo **Editor gestione connessione file flat** .</span><span class="sxs-lookup"><span data-stu-id="0de22-117">If your computer is not configured to use the regional option English (United States), you must set additional properties in the **Flat File Connection Manager Editor** dialog box.</span></span>  
  
### <a name="to-add-a-flat-file-connection-manager-to-the-ssis-package"></a><span data-ttu-id="0de22-118">Per aggiungere una gestione connessione file flat al pacchetto SSIS.</span><span class="sxs-lookup"><span data-stu-id="0de22-118">To add a Flat File connection manager to the SSIS package</span></span>  
  
1.  <span data-ttu-id="0de22-119">Fare clic con il pulsante destro del mouse in un punto qualsiasi dell'area **Gestioni connessioni** e quindi fare clic su **Nuova connessione file flat**.</span><span class="sxs-lookup"><span data-stu-id="0de22-119">Right-click anywhere in the **Connection Managers** area, and then click **New Flat File Connection**.</span></span>  
  
2.  <span data-ttu-id="0de22-120">Nella finestra di dialogo **Editor gestione connessione file flat** , per **Nome gestione connessione**, digitare **Sample Flat File Source Data**.</span><span class="sxs-lookup"><span data-stu-id="0de22-120">In the **Flat File Connection Manager Editor** dialog box, for **Connection manager name**, type **Sample Flat File Source Data**.</span></span>  
  
3.  <span data-ttu-id="0de22-121">Fare clic su **Sfoglia**.</span><span class="sxs-lookup"><span data-stu-id="0de22-121">Click **Browse**.</span></span>  
  
4.  <span data-ttu-id="0de22-122">Nella finestra di dialogo **Apri** individuare il file SampleCurrencyData.txt nel computer.</span><span class="sxs-lookup"><span data-stu-id="0de22-122">In the **Open** dialog box, locate the SampleCurrencyData.txt file on your machine.</span></span>  
  
     <span data-ttu-id="0de22-123">I dati di esempio sono inclusi nei pacchetti di lezioni di [!INCLUDE[ssIS](../includes/ssis-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="0de22-123">The sample data is included with the [!INCLUDE[ssIS](../includes/ssis-md.md)] lesson packages.</span></span> <span data-ttu-id="0de22-124">Per scaricare i dati di esempio e i pacchetti di lezioni, effettuare le operazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="0de22-124">To download the sample data and the lesson packages, do the following.</span></span>  
  
    1.  <span data-ttu-id="0de22-125">Passare alla pagina relativa agli [esempi di prodotti di Integration Services](https://go.microsoft.com/fwlink/?LinkId=275027)</span><span class="sxs-lookup"><span data-stu-id="0de22-125">Navigate to [Integration Services Product Samples](https://go.microsoft.com/fwlink/?LinkId=275027)</span></span>  
  
    2.  <span data-ttu-id="0de22-126">Fare clic sulla scheda **Downloads** .</span><span class="sxs-lookup"><span data-stu-id="0de22-126">Click the **DOWNLOADS** tab.</span></span>  
  
    3.  <span data-ttu-id="0de22-127">Fare clic sul file SQL2012.Integration_Services.Create_Simple_ETL_Tutorial.Sample.zip.</span><span class="sxs-lookup"><span data-stu-id="0de22-127">Click the  SQL2012.Integration_Services.Create_Simple_ETL_Tutorial.Sample.zip file.</span></span>  
  
5.  <span data-ttu-id="0de22-128">Deselezionare i nomi di colonna nella prima casella di controllo della riga di dati.</span><span class="sxs-lookup"><span data-stu-id="0de22-128">Clear the Column names in the first data row checkbox.</span></span>  
  
### <a name="to-set-locale-sensitive-properties"></a><span data-ttu-id="0de22-129">Per impostare le proprietà dipendenti dalle impostazioni locali</span><span class="sxs-lookup"><span data-stu-id="0de22-129">To set locale sensitive properties</span></span>  
  
1.  <span data-ttu-id="0de22-130">Nella finestra di dialogo **Editor gestione connessione file flat** fare clic su **Generale**.</span><span class="sxs-lookup"><span data-stu-id="0de22-130">In the **Flat File Connection Manager Editor** dialog box, click **General**.</span></span>  
  
2.  <span data-ttu-id="0de22-131">Impostare **impostazioni locali** su inglese (Stati Uniti) e **tabella codici** su 1252.</span><span class="sxs-lookup"><span data-stu-id="0de22-131">Set **Locale** to English (United States) and **Code page** to 1252.</span></span>  
  
### <a name="to-rename-columns-in-the-flat-file-connection-manager"></a><span data-ttu-id="0de22-132">Per rinominare le colonne nella gestione connessione file flat</span><span class="sxs-lookup"><span data-stu-id="0de22-132">To rename columns in the Flat File connection manager</span></span>  
  
1.  <span data-ttu-id="0de22-133">Nella finestra di dialogo **Editor gestione connessione file flat** fare clic su **Avanzate**.</span><span class="sxs-lookup"><span data-stu-id="0de22-133">In the **Flat File Connection Manager Editor** dialog box, click **Advanced**.</span></span>  
  
2.  <span data-ttu-id="0de22-134">Nel riquadro delle proprietà apportare le seguenti modifiche:</span><span class="sxs-lookup"><span data-stu-id="0de22-134">In the property pane, make the following changes:</span></span>  
  
    -   <span data-ttu-id="0de22-135">Modificare la proprietà nome **colonna 0** in `AverageRate` .</span><span class="sxs-lookup"><span data-stu-id="0de22-135">Change the **Column 0** name property to `AverageRate`.</span></span>  
  
    -   <span data-ttu-id="0de22-136">Modificare la proprietà nome **colonna 1** in `CurrencyID` .</span><span class="sxs-lookup"><span data-stu-id="0de22-136">Change the **Column 1** name property to `CurrencyID`.</span></span>  
  
    -   <span data-ttu-id="0de22-137">Modificare la proprietà nome **colonna 2** in `CurrencyDate` .</span><span class="sxs-lookup"><span data-stu-id="0de22-137">Change the **Column 2** name property to `CurrencyDate`.</span></span>  
  
    -   <span data-ttu-id="0de22-138">Modificare la proprietà nome **colonna 3** in `EndOfDayRate` .</span><span class="sxs-lookup"><span data-stu-id="0de22-138">Change the **Column 3** name property to `EndOfDayRate`.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="0de22-139">Per impostazione predefinita, le quattro colonne sono inizialmente impostate su un tipo di dati stringa [DT_STR] con un valore `OutputColumnWidth` di 50.</span><span class="sxs-lookup"><span data-stu-id="0de22-139">By default, all four of the columns are initially set to a string data type [DT_STR] with an `OutputColumnWidth` of 50.</span></span>  
  
### <a name="to-remap-column-data-types"></a><span data-ttu-id="0de22-140">Per modificare il mapping dei tipi di dati di colonna</span><span class="sxs-lookup"><span data-stu-id="0de22-140">To remap column data types</span></span>  
  
1.  <span data-ttu-id="0de22-141">Nella finestra di dialogo **Editor gestione connessione file flat** fare clic su **Suggerisci tipi**.</span><span class="sxs-lookup"><span data-stu-id="0de22-141">In the **Flat File Connection Manager Editor** dialog box, click **Suggest Types**.</span></span>  
  
     [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] <span data-ttu-id="0de22-142">indica automaticamente i tipi di dati più appropriati in base alle prime 200 righe di dati.</span><span class="sxs-lookup"><span data-stu-id="0de22-142">automatically suggests the most appropriate data types based on the first 200 rows of data.</span></span> <span data-ttu-id="0de22-143">È inoltre possibile modificare le opzioni suggerite in modo da campionare più o meno dati, specificare il tipo di dati predefinito per numeri interi o dati booleani oppure aggiungere spazi come spaziatura interna nelle colonne stringa.</span><span class="sxs-lookup"><span data-stu-id="0de22-143">You can also change these suggestion options to sample more or less data, to specify the default data type for integer or Boolean data, or to add spaces as padding to string columns.</span></span>  
  
     <span data-ttu-id="0de22-144">Per il momento non apportare modifiche alle opzioni nella finestra di dialogo **Suggerisci tipi di colonne** e fare clic su **OK** in modo che [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] suggerisca i tipi di dati per le colonne.</span><span class="sxs-lookup"><span data-stu-id="0de22-144">For now, make no changes to the options in the **Suggest Column Types** dialog box, and click **OK** to have [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] suggest data types for columns.</span></span> <span data-ttu-id="0de22-145">In questo modo verrà nuovamente visualizzato il riquadro **Avanzate** della finestra di dialogo **Editor gestione connessione file flat** in cui è possibile visualizzare i tipi di dati delle colonne suggeriti da [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0de22-145">This returns you to the **Advanced** pane of the **Flat File Connection Manager Editor** dialog box, where you can view the column data types suggested by [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)].</span></span> <span data-ttu-id="0de22-146">Se si fa clic su **Annulla**non verranno indicati suggerimenti relativi ai metadati delle colonne e verrà usato il tipo di dati string predefinito, ovvero DT_STR.</span><span class="sxs-lookup"><span data-stu-id="0de22-146">(If you click **Cancel**, no suggestions are made to column metadata and the default string (DT_STR) data type is used.)</span></span>  
  
     <span data-ttu-id="0de22-147">In questa esercitazione, [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] suggerisce i tipi di dati mostrati nella seconda colonna della tabella seguente per i dati ricavati dal file SampleCurrencyData.txt.</span><span class="sxs-lookup"><span data-stu-id="0de22-147">In this tutorial, [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] suggests the data types shown in the second column of the following table for the data from the SampleCurrencyData.txt file.</span></span> <span data-ttu-id="0de22-148">Tuttavia, i tipi di dati necessari per le colonne nella destinazione, che verranno definiti in una fase successiva, sono mostrati nell'ultima colonna della tabella che segue.</span><span class="sxs-lookup"><span data-stu-id="0de22-148">However, the data types that are required for the columns in the destination, which will be defined in a later step, are shown in the last column of the following table.</span></span>  
  
    |<span data-ttu-id="0de22-149">Colonna file flat</span><span class="sxs-lookup"><span data-stu-id="0de22-149">Flat File Column</span></span>|<span data-ttu-id="0de22-150">Tipo suggerito</span><span class="sxs-lookup"><span data-stu-id="0de22-150">Suggested Type</span></span>|<span data-ttu-id="0de22-151">Colonna di destinazione</span><span class="sxs-lookup"><span data-stu-id="0de22-151">Destination Column</span></span>|<span data-ttu-id="0de22-152">Tipo destinazione</span><span class="sxs-lookup"><span data-stu-id="0de22-152">Destination Type</span></span>|  
    |----------------------|--------------------|------------------------|----------------------|  
    |<span data-ttu-id="0de22-153">AverageRate</span><span class="sxs-lookup"><span data-stu-id="0de22-153">AverageRate</span></span>|<span data-ttu-id="0de22-154">float [DT_R4]</span><span class="sxs-lookup"><span data-stu-id="0de22-154">float [DT_R4]</span></span>|<span data-ttu-id="0de22-155">FactCurrency.AverageRate</span><span class="sxs-lookup"><span data-stu-id="0de22-155">FactCurrency.AverageRate</span></span>|<span data-ttu-id="0de22-156">float</span><span class="sxs-lookup"><span data-stu-id="0de22-156">float</span></span>|  
    |<span data-ttu-id="0de22-157">CurrencyID</span><span class="sxs-lookup"><span data-stu-id="0de22-157">CurrencyID</span></span>|<span data-ttu-id="0de22-158">string [DT_STR]</span><span class="sxs-lookup"><span data-stu-id="0de22-158">string [DT_STR]</span></span>|<span data-ttu-id="0de22-159">DimCurrency.CurrencyAlternateKey</span><span class="sxs-lookup"><span data-stu-id="0de22-159">DimCurrency.CurrencyAlternateKey</span></span>|<span data-ttu-id="0de22-160">nchar(3)</span><span class="sxs-lookup"><span data-stu-id="0de22-160">nchar(3)</span></span>|  
    |<span data-ttu-id="0de22-161">CurrencyDate</span><span class="sxs-lookup"><span data-stu-id="0de22-161">CurrencyDate</span></span>|<span data-ttu-id="0de22-162">date [DT_DATE]</span><span class="sxs-lookup"><span data-stu-id="0de22-162">date [DT_DATE]</span></span>|<span data-ttu-id="0de22-163">DimDate.FullDateAlternateKey</span><span class="sxs-lookup"><span data-stu-id="0de22-163">DimDate.FullDateAlternateKey</span></span>|<span data-ttu-id="0de22-164">date</span><span class="sxs-lookup"><span data-stu-id="0de22-164">date</span></span>|  
    |<span data-ttu-id="0de22-165">EndOfDayRate</span><span class="sxs-lookup"><span data-stu-id="0de22-165">EndOfDayRate</span></span>|<span data-ttu-id="0de22-166">float [DT_R4]</span><span class="sxs-lookup"><span data-stu-id="0de22-166">float [DT_R4]</span></span>|<span data-ttu-id="0de22-167">FactCurrency.EndOfDayRate</span><span class="sxs-lookup"><span data-stu-id="0de22-167">FactCurrency.EndOfDayRate</span></span>|<span data-ttu-id="0de22-168">float</span><span class="sxs-lookup"><span data-stu-id="0de22-168">float</span></span>|  
  
     <span data-ttu-id="0de22-169">Il tipo di dati suggerito per la `CurrencyID` colonna non è compatibile con il tipo di dati del campo nella tabella di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0de22-169">The data type suggested for the `CurrencyID` column is incompatible with the data type of the field in the destination table.</span></span> <span data-ttu-id="0de22-170">Poiché il tipo di dati di `DimCurrency.CurrencyAlternateKey` è nchar (3), `CurrencyID` deve essere modificato da string [DT_STR] a string [DT_WSTR].</span><span class="sxs-lookup"><span data-stu-id="0de22-170">Because the data type of `DimCurrency.CurrencyAlternateKey` is nchar (3), `CurrencyID` must be changed from string [DT_STR] to string [DT_WSTR].</span></span> <span data-ttu-id="0de22-171">Inoltre, il campo `DimDate.FullDateAlternateKey` viene definito come tipo di dati date; pertanto, `CurrencyDate` deve essere modificato da date [DT_DATE] a database date [DT_DBDATE].</span><span class="sxs-lookup"><span data-stu-id="0de22-171">Additionally, the field `DimDate.FullDateAlternateKey` is defined as a date data type; therefore, `CurrencyDate` needs to be changed from date [DT_Date] to database date [DT_DBDATE].</span></span>  
  
2.  <span data-ttu-id="0de22-172">Nell'elenco selezionare la colonna CurrencyID e nel riquadro delle proprietà modificare il tipo di dati della colonna `CurrencyID` da String [DT_STR] alla stringa Unicode [DT_WSTR].</span><span class="sxs-lookup"><span data-stu-id="0de22-172">In the list, select the CurrencyID column and in the property pane, change the Data Type of column `CurrencyID` from string [DT_STR] to Unicode string [DT_WSTR].</span></span>  
  
3.  <span data-ttu-id="0de22-173">Nel riquadro delle proprietà modificare il tipo di dati della colonna `CurrencyDate` da date [DT_DATE] a database date [DT_DBDATE].</span><span class="sxs-lookup"><span data-stu-id="0de22-173">In the property pane, change the data type of column `CurrencyDate` from date [DT_DATE] to database date [DT_DBDATE].</span></span>  
  
4.  <span data-ttu-id="0de22-174">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="0de22-174">Click **OK**.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="0de22-175">Attività successiva della lezione</span><span class="sxs-lookup"><span data-stu-id="0de22-175">Next Task in Lesson</span></span>  
 [<span data-ttu-id="0de22-176">Passaggio 3: Aggiunta e configurazione di una gestione connessione OLE DB</span><span class="sxs-lookup"><span data-stu-id="0de22-176">Step 3: Adding and Configuring an OLE DB Connection Manager</span></span>](lesson-1-3-adding-and-configuring-an-ole-db-connection-manager.md)  
  
## <a name="see-also"></a><span data-ttu-id="0de22-177">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="0de22-177">See Also</span></span>  
 <span data-ttu-id="0de22-178">[Gestione connessione file flat](connection-manager/file-connection-manager.md) </span><span class="sxs-lookup"><span data-stu-id="0de22-178">[Flat File Connection Manager](connection-manager/file-connection-manager.md) </span></span>  
 [<span data-ttu-id="0de22-179">Tipi di dati di Integration Services</span><span class="sxs-lookup"><span data-stu-id="0de22-179">Integration Services Data Types</span></span>](data-flow/integration-services-data-types.md)  
  
  
