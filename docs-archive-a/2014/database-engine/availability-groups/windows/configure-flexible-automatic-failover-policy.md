---
title: Configurare i criteri di failover flessibili per controllare le condizioni per il failover automatico (gruppi di disponibilità Always On) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], flexible failover policy
- Availability Groups [SQL Server], failover
- failover [SQL Server], AlwaysOn Availability Groups
ms.assetid: 1ed564b4-9835-4245-ae35-9ba67419a4ce
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c938624a3ed39fe2d41f21a21af5231aa76a8c17
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724232"
---
# <a name="configure-the-flexible-failover-policy-to-control-conditions-for-automatic-failover-always-on-availability-groups"></a><span data-ttu-id="2c8f6-102">Configurare i criteri di failover flessibili per controllare le condizioni per il failover automatico (Gruppi di disponibilità AlwaysOn)</span><span class="sxs-lookup"><span data-stu-id="2c8f6-102">Configure the Flexible Failover Policy to Control Conditions for Automatic Failover (Always On Availability Groups)</span></span>
  <span data-ttu-id="2c8f6-103">In questo argomento verrà descritto come configurare i criteri di failover flessibili per un gruppo di disponibilità AlwaysOn tramite [!INCLUDE[tsql](../../../includes/tsql-md.md)] o PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2c8f6-103">This topic describes how to configure the flexible failover policy for an AlwaysOn availability group by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="2c8f6-104">Con i criteri di failover flessibili viene garantito un controllo granulare delle condizioni che causano un failover automatico per un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-104">A flexible failover policy provides granular control over the conditions that cause automatic failover for an availability group.</span></span> <span data-ttu-id="2c8f6-105">Modificando le condizioni di errore che attivano un failover automatico e la frequenza di controlli di integrità, è possibile aumentare o diminuire la probabilità di un failover automatico per supportare il Contratto di servizio per la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-105">By changing the failure conditions that trigger an automatic failover and the frequency of health checks, you can increase or decrease the likelihood of an automatic failover to support your SLA for high availability.</span></span>  
  
  
  
    > [!NOTE]  
    >  The flexible failover policy of an availability group cannot be configured by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="2c8f6-106">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="2c8f6-106">Before You Begin</span></span>  
  
###  <a name="limitations-on-automatic-failovers"></a><a name="Limitations"></a><span data-ttu-id="2c8f6-107">Limitazioni sui failover automatici</span><span class="sxs-lookup"><span data-stu-id="2c8f6-107">Limitations on Automatic Failovers</span></span>  
  
-   <span data-ttu-id="2c8f6-108">Affinché si verifichi un failover automatico, la replica primaria corrente e una replica secondaria devono essere configurate per la modalità di disponibilità con commit sincrono e failover automatico e la replica secondaria deve essere sincronizzata con quella primaria.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-108">For an automatic failover to occur, the current primary replica and one secondary replica must be configured for synchronous-commit availability mode with automatic failover and the secondary replica must be synchronized with the primary replica.</span></span>  
  
-   <span data-ttu-id="2c8f6-109">Se un gruppo di disponibilità supera la relativa soglia di errore WSFC, non verrà effettuato il tentativo di failover automatico per il gruppo di disponibilità da parte del cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-109">If an availability group exceeds its WSFC failure threshold, the WSFC cluster will not attempt an automatic failover for the availability group.</span></span> <span data-ttu-id="2c8f6-110">Inoltre, il gruppo di risorse WSFC del gruppo di disponibilità rimarrà in uno stato di errore finché l'amministratore del cluster non porterà manualmente online il gruppo di risorse con errori o l'amministratore del database non eseguirà un failover manuale del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-110">Furthermore, the WSFC resource group of the availability group remains in a failed state until either the cluster administrator manually brings the failed resource group online or the database administrator performs a manual failover of the availability group.</span></span> <span data-ttu-id="2c8f6-111">La *soglia di errore WSFC* è definita come il numero massimo di errori supportati per il gruppo di disponibilità durante un determinato periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-111">The *WSFC failure threshold* is defined as the maximum number of failures supported for the availability group during a given time period.</span></span> <span data-ttu-id="2c8f6-112">Il periodo di tempo predefinito è sei ore e il valore predefinito per il numero massimo di errori durante questo periodo è *n*-1, dove *n* è il numero di nodi WSFC.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-112">The default time period is six hours, and the default value for the maximum number of failures during this period is *n*-1, where *n* is the number of WSFC nodes.</span></span> <span data-ttu-id="2c8f6-113">Per modificare i valori soglia dell'errore per un determinato gruppo di disponibilità, utilizzare la console di Gestione cluster di failover WSFC.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-113">To change the failure-threshold values for a given availability group, use the WSFC Failover Manager Console.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="2c8f6-114">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="2c8f6-114">Prerequisites</span></span>  
  
-   <span data-ttu-id="2c8f6-115">È necessario essere connessi all'istanza del server che ospita la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-115">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="2c8f6-116">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="2c8f6-116">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="2c8f6-117">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="2c8f6-117">Permissions</span></span>  
  
|<span data-ttu-id="2c8f6-118">Attività</span><span class="sxs-lookup"><span data-stu-id="2c8f6-118">Task</span></span>|<span data-ttu-id="2c8f6-119">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="2c8f6-119">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="2c8f6-120">Per configurare i criteri di failover flessibili per un nuovo gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="2c8f6-120">To configure the flexible failover policy for a new availability group</span></span>|<span data-ttu-id="2c8f6-121">Sono necessarie l'appartenenza al ruolo predefinito del server **sysadmin** e l'autorizzazione server CREATE AVAILABILITY GROUP oppure l'autorizzazione ALTER ANY AVAILABILITY GROUP o CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-121">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="2c8f6-122">Per modificare i criteri di un gruppo di disponibilità esistente</span><span class="sxs-lookup"><span data-stu-id="2c8f6-122">To modify the policy of an existing availability group</span></span>|<span data-ttu-id="2c8f6-123">È necessaria l'autorizzazione ALTER AVAILABILITY GROUP nel gruppo di disponibilità, l'autorizzazione CONTROL AVAILABILITY GROUP, l'autorizzazione ALTER ANY AVAILABILITY GROUP o l'autorizzazione CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-123">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="2c8f6-124">Uso di Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2c8f6-124">Using Transact-SQL</span></span>  
 <span data-ttu-id="2c8f6-125">**Per configurare i criteri di failover flessibili**</span><span class="sxs-lookup"><span data-stu-id="2c8f6-125">**To configure the flexible failover policy**</span></span>  
  
1.  <span data-ttu-id="2c8f6-126">Connettersi all'istanza del server che ospita la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-126">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="2c8f6-127">Per un nuovo gruppo di disponibilità, usare l'istruzione [create Availability Group](/sql/t-sql/statements/create-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2c8f6-127">For a new availability group, use the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="2c8f6-128">Se si modifica un gruppo di disponibilità esistente, utilizzare l'istruzione [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2c8f6-128">If you are modifying an existing availability group, use the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
    -   <span data-ttu-id="2c8f6-129">Per impostare il livello di condizione del failover, usare l'opzione FAILURE_CONDITION_LEVEL = *n* dove *n* è un numero intero da 1 a 5.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-129">To set the failover condition level, use the FAILURE_CONDITION_LEVEL = *n* option, where, *n* is an integer from 1 to 5.</span></span>  
  
         <span data-ttu-id="2c8f6-130">Ad esempio, l'istruzione [!INCLUDE[tsql](../../../includes/tsql-md.md)] seguente modifica il livello di condizione di errore di un gruppo di disponibilità esistente, `AG1`, nel livello uno:</span><span class="sxs-lookup"><span data-stu-id="2c8f6-130">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the failure-condition level of an existing availability group, `AG1`, to level one:</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (FAILURE_CONDITION_LEVEL = 1);  
        ```  
  
         <span data-ttu-id="2c8f6-131">La relazione di questi valori interi con i livelli di condizione di errore è la seguente:</span><span class="sxs-lookup"><span data-stu-id="2c8f6-131">The relationship of these integer values to the failure condition levels is as follows:</span></span>  
  
        |[!INCLUDE[tsql](../../../includes/tsql-md.md)] <span data-ttu-id="2c8f6-132">Valore</span><span class="sxs-lookup"><span data-stu-id="2c8f6-132">Value</span></span>|<span data-ttu-id="2c8f6-133">Level</span><span class="sxs-lookup"><span data-stu-id="2c8f6-133">Level</span></span>|<span data-ttu-id="2c8f6-134">Il failover automatico viene avviato...</span><span class="sxs-lookup"><span data-stu-id="2c8f6-134">Automatic Is Failover Initiated When...</span></span>|  
        |------------------------------|-----------|-------------------------------------------|  
        |<span data-ttu-id="2c8f6-135">1</span><span class="sxs-lookup"><span data-stu-id="2c8f6-135">1</span></span>|<span data-ttu-id="2c8f6-136">Uno</span><span class="sxs-lookup"><span data-stu-id="2c8f6-136">One</span></span>|<span data-ttu-id="2c8f6-137">In caso di server inaccessibile.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-137">On server down.</span></span> <span data-ttu-id="2c8f6-138">Il servizio SQL Server viene arrestato a causa di un failover o un riavvio.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-138">The SQL Server service stops because of a failover or restart.</span></span>|  
        |<span data-ttu-id="2c8f6-139">2</span><span class="sxs-lookup"><span data-stu-id="2c8f6-139">2</span></span>|<span data-ttu-id="2c8f6-140">Due</span><span class="sxs-lookup"><span data-stu-id="2c8f6-140">Two</span></span>|<span data-ttu-id="2c8f6-141">In caso di mancata risposta del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-141">On server unresponsive.</span></span> <span data-ttu-id="2c8f6-142">Viene soddisfatta qualsiasi condizione di valore inferiore, il servizio SQL Server è connesso al cluster e viene superata la soglia di Timeout controllo integrità o la replica primaria corrente si trova in uno stato di errore.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-142">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |<span data-ttu-id="2c8f6-143">3</span><span class="sxs-lookup"><span data-stu-id="2c8f6-143">3</span></span>|<span data-ttu-id="2c8f6-144">Tre</span><span class="sxs-lookup"><span data-stu-id="2c8f6-144">Three</span></span>|<span data-ttu-id="2c8f6-145">In caso di errori critici del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-145">On critical server error.</span></span> <span data-ttu-id="2c8f6-146">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica un errore critico interno del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-146">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="2c8f6-147">Si tratta del livello predefinito.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-147">This is the default level.</span></span>|  
        |<span data-ttu-id="2c8f6-148">4</span><span class="sxs-lookup"><span data-stu-id="2c8f6-148">4</span></span>|<span data-ttu-id="2c8f6-149">Quattro</span><span class="sxs-lookup"><span data-stu-id="2c8f6-149">Four</span></span>|<span data-ttu-id="2c8f6-150">In caso di errori con gravità moderata del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-150">On moderate server error.</span></span> <span data-ttu-id="2c8f6-151">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica un errore non critico del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-151">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |<span data-ttu-id="2c8f6-152">5</span><span class="sxs-lookup"><span data-stu-id="2c8f6-152">5</span></span>|<span data-ttu-id="2c8f6-153">Cinque</span><span class="sxs-lookup"><span data-stu-id="2c8f6-153">Five</span></span>|<span data-ttu-id="2c8f6-154">In qualsiasi condizione di errore qualificata.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-154">On any qualified failure conditions.</span></span> <span data-ttu-id="2c8f6-155">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica una condizione di errore appropriata.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-155">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="2c8f6-156">Per altre informazioni sui livelli di condizione del failover, vedere [Criteri di failover flessibili per failover automatico di un gruppo di disponibilità &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-156">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
    -   <span data-ttu-id="2c8f6-157">Per configurare la soglia di Timeout controllo integrità, usare l'opzione HEALTH_CHECK_TIMEOUT = *n* dove *n* è un numero intero compreso tra 15000 millisecondi (15 secondi) e 4294967295 millisecondi.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-157">To configure the health check timeout threshold, use the HEALTH_CHECK_TIMEOUT = *n* option, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="2c8f6-158">Il valore predefinito è 30000 millisecondi (30 secondi)</span><span class="sxs-lookup"><span data-stu-id="2c8f6-158">The default value is 30000 milliseconds (30 seconds)</span></span>  
  
         <span data-ttu-id="2c8f6-159">Ad esempio, l'istruzione [!INCLUDE[tsql](../../../includes/tsql-md.md)] seguente modificata la soglia di Timeout controllo integrità di un gruppo di disponibilità esistente, `AG1`, in 60.000 millisecondi (un minuto).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-159">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the health-check timeout threshold of an existing availability group, `AG1`, to 60,000 milliseconds (one minute).</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (HEALTH_CHECK_TIMEOUT = 60000);  
        ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="2c8f6-160">Uso di PowerShell</span><span class="sxs-lookup"><span data-stu-id="2c8f6-160">Using PowerShell</span></span>  

### <a name="to-configure-the-flexible-failover-policy"></a><span data-ttu-id="2c8f6-161">Per configurare i criteri di failover flessibili \* \*</span><span class="sxs-lookup"><span data-stu-id="2c8f6-161">To configure the flexible failover policy\*\*</span></span>  
  
1.  <span data-ttu-id="2c8f6-162">Impostare il valore predefinito (`cd`) sull'istanza del server che ospita la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-162">Set default (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="2c8f6-163">Quando si aggiunge una replica di disponibilità a un gruppo di disponibilità, utilizzare il cmdlet `New-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-163">When adding an availability replica to an availability group, use the `New-SqlAvailabilityGroup` cmdlet.</span></span> <span data-ttu-id="2c8f6-164">Quando si modifica una replica di disponibilità esistente, utilizzare il cmdlet `Set-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-164">When modifying an existing availability replica, use the `Set-SqlAvailabilityGroup` cmdlet.</span></span>  
  
    -   <span data-ttu-id="2c8f6-165">Per impostare il livello di condizione del failover, usare il `FailureConditionLevel` parametro *Level* , dove *Level* è uno dei valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="2c8f6-165">To set the failover condition level, use the `FailureConditionLevel`*level* parameter, where, *level* is one of the following values:</span></span>  
  
        |<span data-ttu-id="2c8f6-166">Valore</span><span class="sxs-lookup"><span data-stu-id="2c8f6-166">Value</span></span>|<span data-ttu-id="2c8f6-167">Level</span><span class="sxs-lookup"><span data-stu-id="2c8f6-167">Level</span></span>|<span data-ttu-id="2c8f6-168">Il failover automatico viene avviato...</span><span class="sxs-lookup"><span data-stu-id="2c8f6-168">Automatic Is Failover Initiated When...</span></span>|  
        |-----------|-----------|-------------------------------------------|  
        |`OnServerDown`|<span data-ttu-id="2c8f6-169">Uno</span><span class="sxs-lookup"><span data-stu-id="2c8f6-169">One</span></span>|<span data-ttu-id="2c8f6-170">In caso di server inaccessibile.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-170">On server down.</span></span> <span data-ttu-id="2c8f6-171">Il servizio SQL Server viene arrestato a causa di un failover o un riavvio.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-171">The SQL Server service stops because of a failover or restart.</span></span>|  
        |`OnServerUnresponsive`|<span data-ttu-id="2c8f6-172">Due</span><span class="sxs-lookup"><span data-stu-id="2c8f6-172">Two</span></span>|<span data-ttu-id="2c8f6-173">In caso di mancata risposta del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-173">On server unresponsive.</span></span> <span data-ttu-id="2c8f6-174">Viene soddisfatta qualsiasi condizione di valore inferiore, il servizio SQL Server è connesso al cluster e viene superata la soglia di Timeout controllo integrità o la replica primaria corrente si trova in uno stato di errore.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-174">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |`OnCriticalServerError`|<span data-ttu-id="2c8f6-175">Tre</span><span class="sxs-lookup"><span data-stu-id="2c8f6-175">Three</span></span>|<span data-ttu-id="2c8f6-176">In caso di errori critici del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-176">On critical server error.</span></span> <span data-ttu-id="2c8f6-177">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica un errore critico interno del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-177">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="2c8f6-178">Si tratta del livello predefinito.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-178">This is the default level.</span></span>|  
        |`OnModerateServerError`|<span data-ttu-id="2c8f6-179">Quattro</span><span class="sxs-lookup"><span data-stu-id="2c8f6-179">Four</span></span>|<span data-ttu-id="2c8f6-180">In caso di errori con gravità moderata del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-180">On moderate server error.</span></span> <span data-ttu-id="2c8f6-181">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica un errore non critico del server.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-181">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |`OnAnyQualifiedFailureConditions`|<span data-ttu-id="2c8f6-182">Cinque</span><span class="sxs-lookup"><span data-stu-id="2c8f6-182">Five</span></span>|<span data-ttu-id="2c8f6-183">In qualsiasi condizione di errore qualificata.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-183">On any qualified failure conditions.</span></span> <span data-ttu-id="2c8f6-184">Viene soddisfatta qualsiasi condizione di valore inferiore o si verifica una condizione di errore appropriata.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-184">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="2c8f6-185">Per altre informazioni sui livelli di condizione del failover, vedere [Criteri di failover flessibili per failover automatico di un gruppo di disponibilità &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-185">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
         <span data-ttu-id="2c8f6-186">Ad esempio, il comando seguente modifica il livello di condizione di errore di un gruppo di disponibilità esistente, `AG1`, nel livello uno:</span><span class="sxs-lookup"><span data-stu-id="2c8f6-186">For example, the following command changes the failure-condition level of an existing availability group, `AG1`, to level one.</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg `
         -FailureConditionLevel OnServerDown  
        ```  
  
    -   <span data-ttu-id="2c8f6-187">Per impostare la soglia di timeout controllo integrità, usare il `HealthCheckTimeout` parametro *n* , dove *n* è un numero intero compreso tra 15000 millisecondi (15 secondi) e 4294967295 millisecondi.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-187">To set the health check timeout threshold, use the `HealthCheckTimeout`*n* parameter, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="2c8f6-188">Il valore predefinito è 30000 millisecondi (30 secondi).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-188">The default value is 30000 milliseconds (30 seconds).</span></span>  
  
         <span data-ttu-id="2c8f6-189">Ad esempio, il comando seguente modifica la soglia di Timeout controllo integrità di un gruppo di disponibilità esistente, `AG1`, in 120.000 millisecondi (due minuti).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-189">For example, the following command changes the health-check timeout threshold of an existing availability group, `AG1`, to 120,000 milliseconds (two minutes).</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAG `
         -HealthCheckTimeout 120000  
        ```  
  
> [!NOTE]  
>  <span data-ttu-id="2c8f6-190">Per visualizzare la sintassi di un cmdlet, utilizzare il cmdlet `Get-Help` nell'ambiente [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2c8f6-190">To view the syntax of a cmdlet, use the `Get-Help` cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="2c8f6-191">Per altre informazioni, vedere [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="2c8f6-191">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
 <span data-ttu-id="2c8f6-192">**Per impostare e utilizzare il provider PowerShell per SQL Server**</span><span class="sxs-lookup"><span data-stu-id="2c8f6-192">**To set up and use the SQL Server PowerShell provider**</span></span>  
  
-   [<span data-ttu-id="2c8f6-193">Provider PowerShell per SQL Server</span><span class="sxs-lookup"><span data-stu-id="2c8f6-193">SQL Server PowerShell Provider</span></span>](../../../powershell/sql-server-powershell-provider.md)  
  
-   [<span data-ttu-id="2c8f6-194">Get Help SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="2c8f6-194">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
## <a name="see-also"></a><span data-ttu-id="2c8f6-195">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2c8f6-195">See Also</span></span>  
 <span data-ttu-id="2c8f6-196">[Panoramica di Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2c8f6-196">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="2c8f6-197">[Modalità di disponibilità (Gruppi di disponibilità AlwaysOn)](availability-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="2c8f6-197">[Availability Modes (AlwaysOn Availability Groups)](availability-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="2c8f6-198">[Failover e modalità di failover &#40;Gruppi di disponibilità AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="2c8f6-198">[Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="2c8f6-199">[Windows Server Failover Clustering &#40;WSFC&#41; con SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="2c8f6-199">[Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span></span>  
 <span data-ttu-id="2c8f6-200">[Criteri di failover per istanze del cluster di failover](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span><span class="sxs-lookup"><span data-stu-id="2c8f6-200">[Failover Policy for Failover Cluster Instances](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span></span>  
 [<span data-ttu-id="2c8f6-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c8f6-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)  
