---
title: Panoramica di Gruppi di disponibilità AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- secondary databases [SQL Server], in availability group
- primary databases [SQL Server], in availability group
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], data movement
- Availability Groups [SQL Server]
ms.assetid: 04fd9d95-4624-420f-a3be-1794309b3a47
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: bc49a841daaeb0f7bda6f793890433f26c6b5c1f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87625552"
---
# <a name="overview-of-alwayson-availability-groups-sql-server"></a><span data-ttu-id="3845f-102">Panoramica di Gruppi di disponibilità AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="3845f-102">Overview of AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="3845f-103">In questo argomento sono introdotti i concetti di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] fondamentali per la configurazione e la gestione di uno o più gruppi di disponibilità in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3845f-103">This topic introduces the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] concepts that are central for configuring and managing one or more availability groups in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="3845f-104">Per un riepilogo dei vantaggi offerti dai gruppi di disponibilità e per una panoramica della terminologia relativa a [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], vedere [Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-104">For a summary of the benefits offered by availability groups and an overview of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] terminology, see [AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="3845f-105">Un *gruppo di disponibilità* supporta un ambiente di failover per un set discreto di database utente, noti come *database di disponibilità*, il cui failover viene eseguito contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="3845f-105">An *availability group* supports a failover environment for a discrete set of user databases, known as *availability databases*, that fail over together.</span></span> <span data-ttu-id="3845f-106">Un gruppo di disponibilità supporta un set di database primari e da uno a otto set di database secondari corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="3845f-106">An availability group supports a set of primary databases and one to eight sets of corresponding secondary databases.</span></span> <span data-ttu-id="3845f-107">I database secondari *non* sono backup.</span><span class="sxs-lookup"><span data-stu-id="3845f-107">Secondary databases are *not* backups.</span></span> <span data-ttu-id="3845f-108">Continuare a eseguire il backup dei database e dei log delle transazioni regolarmente.</span><span class="sxs-lookup"><span data-stu-id="3845f-108">Continue to back up your databases and their transaction logs on a regular basis.</span></span>

> [!TIP]
>  <span data-ttu-id="3845f-109">È possibile creare qualsiasi tipo di backup di un database primario.</span><span class="sxs-lookup"><span data-stu-id="3845f-109">You can create any type of backup of a primary database.</span></span> <span data-ttu-id="3845f-110">In alternativa, è possibile creare backup del log e backup completi di sola copia dei database secondari.</span><span class="sxs-lookup"><span data-stu-id="3845f-110">Alternatively, you can create log backups and copy-only full backups of secondary databases.</span></span> <span data-ttu-id="3845f-111">Per altre informazioni, vedere [Repliche secondarie attive: Backup in repliche secondarie &#40;Gruppi di disponibilità AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-111">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

 <span data-ttu-id="3845f-112">Ogni set di database di disponibilità è ospitato da una *replica di disponibilità*.</span><span class="sxs-lookup"><span data-stu-id="3845f-112">Each set of availability database is hosted by an *availability replica*.</span></span> <span data-ttu-id="3845f-113">Sono disponibili due tipi di replica di disponibilità: una *replica primaria*</span><span class="sxs-lookup"><span data-stu-id="3845f-113">Two types of availability replicas exist: a single *primary replica*.</span></span> <span data-ttu-id="3845f-114">in cui sono ospitati i database primari e da una a otto *repliche secondarie*, ognuna ospitante un set di database secondari, che sono usate come destinazione del failover potenziale per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-114">which hosts the primary databases, and one to eight *secondary replicas*, each of which hosts a set of secondary databases and serves as a potential failover targets for the availability group.</span></span> <span data-ttu-id="3845f-115">Per un gruppo di disponibilità il failover si verifica al livello di una replica di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-115">An availability group fails over at the level of an availability replica.</span></span> <span data-ttu-id="3845f-116">Una replica di disponibilità fornisce la ridondanza solo a livello di database, ovvero per il set di database in un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-116">An availability replica provides redundancy only at the database level-for the set of databases in one availability group.</span></span> <span data-ttu-id="3845f-117">I failover non sono dovuti a database ritenuti sospetti in seguito a una perdita di un file di dati o al danneggiamento di un log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="3845f-117">Failovers are not caused by database issues such as a database becoming suspect due to a loss of a data file or corruption of a transaction log.</span></span>

 <span data-ttu-id="3845f-118">La replica primaria rende disponibili i database primari per le connessioni in lettura e scrittura dei client</span><span class="sxs-lookup"><span data-stu-id="3845f-118">The primary replica makes the primary databases available for read-write connections from clients.</span></span> <span data-ttu-id="3845f-119">e nel processo noto come *sincronizzazione dei dati*che si verifica a livello di database.</span><span class="sxs-lookup"><span data-stu-id="3845f-119">Also, in a process known as *data synchronization*, which occurs at the database level.</span></span> <span data-ttu-id="3845f-120">La replica primaria invia i record di log delle transazioni di ogni database primario a ogni database secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-120">The primary replica sends transaction log records of each primary database to every secondary database.</span></span> <span data-ttu-id="3845f-121">Ogni replica secondaria memorizza nella cache i record del log delle transazioni (*finalizza* il log), quindi li applica al database secondario corrispondente.</span><span class="sxs-lookup"><span data-stu-id="3845f-121">Every secondary replica caches the transaction log records (*hardens* the log) and then applies them to its corresponding secondary database.</span></span> <span data-ttu-id="3845f-122">La sincronizzazione dei dati si verifica tra il database primario e ogni database secondario collegato, indipendentemente dagli altri database.</span><span class="sxs-lookup"><span data-stu-id="3845f-122">Data synchronization occurs between the primary database and each connected secondary database, independently of the other databases.</span></span> <span data-ttu-id="3845f-123">Pertanto, un database secondario può essere sospeso o non riuscire senza influire su altri database secondari e un database primario può essere sospeso o non riuscire senza influire su altri database primari.</span><span class="sxs-lookup"><span data-stu-id="3845f-123">Therefore, a secondary database can be suspended or fail without affecting other secondary databases, and a primary database can be suspended or fail without affecting other primary databases.</span></span>

 <span data-ttu-id="3845f-124">Facoltativamente, è possibile configurare una o più repliche secondarie per supportare l'accesso in sola lettura ai database secondari e una qualsiasi replica secondaria per consentire l'esecuzione di backup sui database secondari.</span><span class="sxs-lookup"><span data-stu-id="3845f-124">Optionally, you can configure one or more secondary replicas to support read-only access to secondary databases, and you can configure any secondary replica to permit backups on secondary databases.</span></span>

 <span data-ttu-id="3845f-125">La distribuzione dei [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] richiede un cluster WSCF (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="3845f-125">Deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requires a Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="3845f-126">Ogni replica di disponibilità di un determinato gruppo di disponibilità deve risiedere su un nodo diverso dello stesso cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="3845f-126">Each availability replica of a given availability group must reside on a different node of the same WSFC cluster.</span></span> <span data-ttu-id="3845f-127">L'unica eccezione è che quando viene eseguita la migrazione a un altro cluster WSFC, un gruppo di disponibilità può risiedere temporaneamente in due cluster.</span><span class="sxs-lookup"><span data-stu-id="3845f-127">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>

 <span data-ttu-id="3845f-128">Il gruppo di risorse WSFC viene creato per ogni gruppo di disponibilità che viene creato.</span><span class="sxs-lookup"><span data-stu-id="3845f-128">A WSFC resource group is created for every availability group that you create.</span></span> <span data-ttu-id="3845f-129">Con il cluster WSFC è possibile eseguire il monitoraggio del gruppo di risorse per valutare lo stato di integrità della replica primaria.</span><span class="sxs-lookup"><span data-stu-id="3845f-129">The WSFC cluster monitors this resource group to evaluate the health of the primary replica.</span></span> <span data-ttu-id="3845f-130">Il quorum di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] si basa su tutti i nodi del cluster WSFC, indipendentemente dal fatto che un nodo del cluster ospiti una replica di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-130">The quorum for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is based on all nodes in the WSFC cluster regardless of whether a given cluster node hosts any availability replicas.</span></span> <span data-ttu-id="3845f-131">A differenza del mirroring del database, non esiste alcun ruolo del server di controllo in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3845f-131">In contrast to database mirroring, there is no witness role in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>

> [!NOTE]
>  <span data-ttu-id="3845f-132">Per informazioni sulla relazione dei componenti di SQL Server AlwaysOn con il cluster WSFC, vedere [WSFC &#40;Windows Server Failover Clustering&#41; con SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-132">For information about the relationship of SQL Server AlwaysOn components to the WSFC cluster, see [Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span></span>

 <span data-ttu-id="3845f-133">Di seguito viene illustrato un gruppo di disponibilità contenente una replica primaria e quattro repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="3845f-133">The following illustration shows an availability group that contains one primary replica and four secondary replicas.</span></span> <span data-ttu-id="3845f-134">Sono supportate fino a otto repliche secondarie, incluse una replica primaria e due repliche secondarie con commit sincrono.</span><span class="sxs-lookup"><span data-stu-id="3845f-134">Up to eight secondary replicas are supported, including one primary replica and two synchronous-commit secondary replicas.</span></span>

 <span data-ttu-id="3845f-135">![Gruppo di disponibilità con cinque repliche](../../media/aoag-agintrofigure.gif "Gruppo di disponibilità con cinque repliche")</span><span class="sxs-lookup"><span data-stu-id="3845f-135">![Availability group with five replicas](../../media/aoag-agintrofigure.gif "Availability group with five replicas")</span></span>


##  <a name="availability-databases"></a><a name="AvDbs"></a><span data-ttu-id="3845f-136">Database di disponibilità</span><span class="sxs-lookup"><span data-stu-id="3845f-136">Availability Databases</span></span>
 <span data-ttu-id="3845f-137">Per poter essere aggiunto a un gruppo di disponibilità, il database deve essere online, di lettura e scrittura ed esistere sull'istanza del server che ospita la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="3845f-137">To add a database to an availability group, the database must be an online, read-write database that exists on the server instance that hosts the primary replica.</span></span> <span data-ttu-id="3845f-138">Il database viene aggiunto al gruppo di disponibilità come database primario, pur rimanendo disponibile ai client.</span><span class="sxs-lookup"><span data-stu-id="3845f-138">When you add a database, it joins the availability group as a primary database, while remaining available to clients.</span></span> <span data-ttu-id="3845f-139">Non esiste alcun database secondario corrispondente finché i backup del nuovo database primario non sono ripristinati sull'istanza del server che ospita la replica secondaria (tramite RESTORE WITH NORECOVERY).</span><span class="sxs-lookup"><span data-stu-id="3845f-139">No corresponding secondary database exists until backups of the new primary database are restored to the server instance that hosts the secondary replica (using RESTORE WITH NORECOVERY).</span></span> <span data-ttu-id="3845f-140">Il nuovo database secondario rimane nello stato RESTORING finché non ne viene creato un join al gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-140">The new secondary database is in the RESTORING state until it is joined to the availability group.</span></span> <span data-ttu-id="3845f-141">Per altre informazioni, vedere [Avviare lo spostamento dati su un database secondario AlwaysOn &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-141">For more information, see [Start Data Movement on an AlwaysOn Secondary Database &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span></span>

 <span data-ttu-id="3845f-142">Dopo la creazione di un join, il database secondario passa allo stato ONLINE e avvia la sincronizzazione dati con il database primario corrispondente.</span><span class="sxs-lookup"><span data-stu-id="3845f-142">Joining places the secondary database into the ONLINE state and initiates data synchronization with the corresponding primary database.</span></span> <span data-ttu-id="3845f-143">La*sincronizzazione dati* è il processo tramite cui le modifiche apportate a un database primario sono riprodotte in un database secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-143">*Data synchronization* is the process by which changes to a primary database are reproduced on a secondary database.</span></span> <span data-ttu-id="3845f-144">La sincronizzazione dei dati comporta che il database primario invia i record del log delle transazioni al database secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-144">Data synchronization involves the primary database sending transaction log records to the secondary database.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="3845f-145">Un database di disponibilità viene a volte definito *replica di database* in [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell e nei nomi di oggetti SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="3845f-145">An availability database is sometimes called a *database replica* in [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell, and SQL Server Management Objects (SMO) names.</span></span> <span data-ttu-id="3845f-146">Il termine "replica di database" viene utilizzato ad esempio nei nomi delle DMV AlwaysOn che restituiscono informazioni sui database di disponibilità,  **sys.dm_hadr_database_replica_states** e **sys.dm_hadr_database_replica_cluster_states**.</span><span class="sxs-lookup"><span data-stu-id="3845f-146">For example, the term "database replica" is used in the names of the AlwaysOn dynamic management views that return information about availability databases:  **sys.dm_hadr_database_replica_states** and **sys.dm_hadr_database_replica_cluster_states**.</span></span> <span data-ttu-id="3845f-147">Tuttavia, nella documentazione online di SQL Server il termine "replica" si riferisce solitamente alle repliche di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-147">However, in SQL Server Books Online, the term "replica" typically refers to availability replicas.</span></span> <span data-ttu-id="3845f-148">Ad esempio, "replica primaria" e "replica secondaria" si riferiscono sempre a repliche di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-148">For example, "primary replica" and "secondary replica" always refer to availability replicas.</span></span>

##  <a name="availability-replicas"></a><a name="AGsARsADBs"></a><span data-ttu-id="3845f-149">Repliche di disponibilità</span><span class="sxs-lookup"><span data-stu-id="3845f-149">Availability Replicas</span></span>
 <span data-ttu-id="3845f-150">Ogni gruppo di disponibilità definisce un set di due o più partner di failover noti come repliche di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-150">Each availability group defines a set of two or more failover partners known as availability replicas.</span></span> <span data-ttu-id="3845f-151">Le*repliche di disponibilità* sono componenti del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-151">*Availability replicas* are components of the availability group.</span></span> <span data-ttu-id="3845f-152">Ogni replica di disponibilità ospita una copia dei database di disponibilità del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-152">Each availability replica hosts a copy of the availability databases in the availability group.</span></span> <span data-ttu-id="3845f-153">Per un determinato gruppo di disponibilità, le repliche di disponibilità devono essere ospitate da istanze separate di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] che risiedono in nodi diversi di un cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="3845f-153">For a given availability group, the availability replicas must be hosted by separate instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] residing on different nodes of a WSFC cluster.</span></span> <span data-ttu-id="3845f-154">Ognuna di queste istanze del server deve essere abilitata per AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="3845f-154">Each of these server instances must be enabled for AlwaysOn.</span></span>

 <span data-ttu-id="3845f-155">In una determinata istanza può essere ospitata solo una replica di disponibilità per gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-155">A given instance can host only one availability replica per availability group.</span></span> <span data-ttu-id="3845f-156">Tuttavia, ogni istanza può essere usata per numerosi gruppi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-156">However, each instance can be used for many availability groups.</span></span> <span data-ttu-id="3845f-157">Un'istanza specificata può essere un'istanza autonoma o un'istanza del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3845f-157">A given instance can be either a stand-alone instance or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI).</span></span> <span data-ttu-id="3845f-158">Se è necessaria la ridondanza a livello di server, usare le istanze del cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="3845f-158">If you require server-level redundancy, use Failover Cluster Instances.</span></span>

 <span data-ttu-id="3845f-159">A ogni replica di disponibilità viene assegnato un ruolo iniziale, ovvero il *ruolo primario* o il *ruolo secondario*, ereditato dai database di disponibilità della replica in questione.</span><span class="sxs-lookup"><span data-stu-id="3845f-159">Every availability replica is assigned an initial role-either the *primary role* or the *secondary role*, which is inherited by the availability databases of that replica.</span></span> <span data-ttu-id="3845f-160">È il ruolo a determinare se la replica a cui è stato assegnato ospiterà database di lettura e scrittura o database di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="3845f-160">The role of a given replica determines whether it hosts read-write databases or read-only databases.</span></span> <span data-ttu-id="3845f-161">La *replica primaria*, a cui viene assegnato il ruolo primario, ospiterà i database di lettura e scrittura, noti come *database primari*.</span><span class="sxs-lookup"><span data-stu-id="3845f-161">One replica, known as the *primary replica*, is assigned the primary role and hosts read-write databases, which are known as *primary databases*.</span></span> <span data-ttu-id="3845f-162">Ad almeno un'altra replica, nota come *replica secondaria*viene assegnato il ruolo secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-162">At least one other replica, known as a *secondary replica*, is assigned the secondary role.</span></span> <span data-ttu-id="3845f-163">Una replica secondaria ospita i database di sola lettura, noti come database secondari.</span><span class="sxs-lookup"><span data-stu-id="3845f-163">A secondary replica hosts read-only databases, known as secondary databases.</span></span>

> [!NOTE]
>  <span data-ttu-id="3845f-164">Quando il ruolo di una replica di disponibilità è indeterminato, ad esempio durante un failover, i relativi database si trovano temporaneamente nello stato NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="3845f-164">When the role of an availability replica is indeterminate, such as during a failover, its databases are temporarily in a NOT SYNCHRONIZING state.</span></span> <span data-ttu-id="3845f-165">Il loro ruolo rimane impostato su RESOLVING finché il ruolo della replica di disponibilità non viene risolto.</span><span class="sxs-lookup"><span data-stu-id="3845f-165">Their role is set to RESOLVING until the role of the availability replica has resolved.</span></span> <span data-ttu-id="3845f-166">Se una replica di disponibilità viene risolta nel ruolo primario, i relativi database diventano i database primari.</span><span class="sxs-lookup"><span data-stu-id="3845f-166">If an availability replica resolves to the primary role, its databases become the primary databases.</span></span> <span data-ttu-id="3845f-167">Se una replica di disponibilità viene risolta nel ruolo secondario, i relativi database diventano i database secondari.</span><span class="sxs-lookup"><span data-stu-id="3845f-167">If an availability replica resolves to the secondary role, its databases become secondary databases.</span></span>

##  <a name="availability-modes"></a><a name="AvailabilityModes"></a><span data-ttu-id="3845f-168">Modalità di disponibilità</span><span class="sxs-lookup"><span data-stu-id="3845f-168">Availability Modes</span></span>
 <span data-ttu-id="3845f-169">La modalità di disponibilità è una proprietà di ogni replica di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-169">The availability mode is a property of each availability replica.</span></span> <span data-ttu-id="3845f-170">La modalità di disponibilità determina se la replica primaria eseguirà il commit delle transazioni su un database solo dopo che una determinata replica secondaria avrà scritto su disco i record del log delle transazioni (consolidamento del log).</span><span class="sxs-lookup"><span data-stu-id="3845f-170">The availability mode determines whether the primary replica waits to commit transactions on a database until a given secondary replica has written the transaction log records to disk (hardened the log).</span></span> <span data-ttu-id="3845f-171">I [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] supportano due modalità di disponibilità: *modalità commit asincrono* e *modalità commit sincrono*.</span><span class="sxs-lookup"><span data-stu-id="3845f-171">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] supports two availability modes-*asynchronous-commit mode* and *synchronous-commit mode*.</span></span>

-   <span data-ttu-id="3845f-172">**Asynchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="3845f-172">**Asynchronous-commit mode**</span></span>

     <span data-ttu-id="3845f-173">Una replica di disponibilità che usa questa modalità di disponibilità è nota come*replica con commit asincrono*.</span><span class="sxs-lookup"><span data-stu-id="3845f-173">An availability replica that uses this availability mode is known as an*asynchronous-commit replica*.</span></span> <span data-ttu-id="3845f-174">Nella modalità commit asincrono, la replica primaria esegue il commit delle transazioni senza attendere l'acknowledgement della finalizzazione del log da parte di una replica con commit asincrono.</span><span class="sxs-lookup"><span data-stu-id="3845f-174">Under asynchronous-commit mode, the primary replica commits transactions without waiting for acknowledgement that an asynchronous-commit secondary replica has hardened the log.</span></span> <span data-ttu-id="3845f-175">La modalità commit asincrono riduce la latenza delle transazioni sui database secondari, ma consente un certo ritardo rispetto ai database primari, rendendo possibile la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="3845f-175">Asynchronous-commit mode minimizes transaction latency on the secondary databases but allows them to lag behind the primary databases, making some data loss possible.</span></span>

-   <span data-ttu-id="3845f-176">**Synchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="3845f-176">**Synchronous-commit mode**</span></span>

     <span data-ttu-id="3845f-177">Una replica di disponibilità che usa questa modalità di disponibilità è nota come *replica con commit sincrono*.</span><span class="sxs-lookup"><span data-stu-id="3845f-177">An availability replica that uses this availability mode is known as a *synchronous-commit replica*.</span></span> <span data-ttu-id="3845f-178">Nella modalità commit sincrono, prima di eseguire il commit delle transazioni, una replica primaria con commit sincrono attende l'acknowledgement della finalizzazione del log da parte della replica secondaria con commit sincrono.</span><span class="sxs-lookup"><span data-stu-id="3845f-178">Under synchronous-commit mode, before committing transactions, a synchronous-commit primary replica waits for a synchronous-commit secondary replica to acknowledge that it has finished hardening the log.</span></span> <span data-ttu-id="3845f-179">Nella modalità commit sincrono si può essere sicuri che al termine della sincronizzazione di un determinato database secondario con il database primario, le transazioni di cui è stato eseguito il commit sono completamente protette.</span><span class="sxs-lookup"><span data-stu-id="3845f-179">Synchronous-commit mode ensures that once a given secondary database is synchronized with the primary database, committed transactions are fully protected.</span></span> <span data-ttu-id="3845f-180">Questa protezione comporta un aumento della latenza delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="3845f-180">This protection comes at the cost of increased transaction latency.</span></span>

 <span data-ttu-id="3845f-181">Per altre informazioni, vedere [Modalità di disponibilità &#40;gruppi di disponibilità AlwaysOn&#41;](availability-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-181">For more information, see [Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md).</span></span>

##  <a name="types-of-failover"></a><a name="FormsOfFailover"></a><span data-ttu-id="3845f-182">Tipi di failover</span><span class="sxs-lookup"><span data-stu-id="3845f-182">Types of Failover</span></span>
 <span data-ttu-id="3845f-183">Nel contesto di una sessione tra la replica primaria e una replica secondaria, i ruoli primari e secondari sono potenzialmente intercambiabili in un processo noto come *failover*.</span><span class="sxs-lookup"><span data-stu-id="3845f-183">Within the context of a session between the primary replica and a secondary replica, the primary and secondary roles are potentially interchangeable in a process known as *failover*.</span></span> <span data-ttu-id="3845f-184">Durante un failover la replica secondaria di destinazione assume il ruolo primario, diventando la nuova replica primaria.</span><span class="sxs-lookup"><span data-stu-id="3845f-184">During a failover the target secondary replica transitions to the primary role, becoming the new primary replica.</span></span> <span data-ttu-id="3845f-185">La nuova replica primaria porta i relativi database online come database primari, consentendo alle applicazioni client di connettersi ad essi.</span><span class="sxs-lookup"><span data-stu-id="3845f-185">The new primary replica brings its databases online as the primary databases, and client applications can connect to them.</span></span> <span data-ttu-id="3845f-186">Se la replica primaria precedente è disponibile, assume il ruolo secondario, diventando una replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="3845f-186">When the former primary replica is available, it transitions to the secondary role, becoming a secondary replica.</span></span> <span data-ttu-id="3845f-187">I database primari precedenti diventano database secondari e la sincronizzazione dati viene ripresa.</span><span class="sxs-lookup"><span data-stu-id="3845f-187">The former primary databases become secondary databases and data synchronization resumes.</span></span>

 <span data-ttu-id="3845f-188">Sono disponibili tre tipi di failover: automatico, manuale e forzato (con possibile perdita di dati).</span><span class="sxs-lookup"><span data-stu-id="3845f-188">Three forms of failover exist-automatic, manual, and forced (with possible data loss).</span></span> <span data-ttu-id="3845f-189">La forma o le forme di failover supportate da una determinata replica secondaria dipendono dalla relativa modalità di disponibilità e, per la modalità commit sincrono, dalla modalità di failover sulla replica primaria e sulla replica secondaria di destinazione.</span><span class="sxs-lookup"><span data-stu-id="3845f-189">The form or forms of failover supported by a given secondary replica depends on its availability mode, and, for synchronous-commit mode, on the failover mode on the primary replica and target secondary replica, as follows.</span></span>

-   <span data-ttu-id="3845f-190">La modalità commit sincrono supporta due forme di failover*manuale pianificato* del failover e *failover automatico*, se la replica secondaria di destinazione è attualmente sincronizzata con avt1.</span><span class="sxs-lookup"><span data-stu-id="3845f-190">Synchronous-commit mode supports two forms of failover-*planned manual failover* and *automatic failover*, if the target secondary replica is currently synchronized with the avt1.</span></span> <span data-ttu-id="3845f-191">Il supporto per queste forme di failover dipende dall'impostazione della *proprietà della modalità di failover* sui partner di failover.</span><span class="sxs-lookup"><span data-stu-id="3845f-191">The support for these forms of failover depends on the setting of the *failover mode property* on the failover partners.</span></span> <span data-ttu-id="3845f-192">Se la modalità di failover è impostata su "manuale" sulla replica primaria o su quella secondaria, per la replica secondaria è supportato solo il failover manuale.</span><span class="sxs-lookup"><span data-stu-id="3845f-192">If failover mode is set to "manual" on either the primary or secondary replica, only manual failover is supported for that secondary replica.</span></span> <span data-ttu-id="3845f-193">Se la modalità di failover è impostata su "automatico" sia sulla replica primaria sia sulle repliche secondarie, sulla replica secondaria sono supportate entrambe le forme di failover, manuale e automatico.</span><span class="sxs-lookup"><span data-stu-id="3845f-193">If failover mode is set to "automatic" on both the primary and secondary replicas, both automatic and manual failover are supported on that secondary replica.</span></span>

    -   <span data-ttu-id="3845f-194">**Failover manuale pianificato** (senza perdita di dati)</span><span class="sxs-lookup"><span data-stu-id="3845f-194">**Planned manual failover** (without data loss)</span></span>

         <span data-ttu-id="3845f-195">Si verifica un failover manuale quando un amministratore di database esegue un comando di failover causando il passaggio di una replica secondaria sincronizzata al ruolo primario (con protezione dei dati garantita) e della replica primaria al ruolo secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-195">A manual failover occurs after a database administrator issues a failover command and causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection) and the primary replica to transition to the secondary role.</span></span> <span data-ttu-id="3845f-196">Un failover manuale richiede che sia la replica primaria sia la replica secondaria di destinazione siano eseguite nella modalità commit sincrono e che la replica secondaria sia già sincronizzata.</span><span class="sxs-lookup"><span data-stu-id="3845f-196">A manual failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode, and the secondary replica must already be synchronized.</span></span>

    -   <span data-ttu-id="3845f-197">**Failover automatico** (senza perdita di dati)</span><span class="sxs-lookup"><span data-stu-id="3845f-197">**Automatic failover** (without data loss)</span></span>

         <span data-ttu-id="3845f-198">Un failover automatico si verifica in risposta a un errore che causa il passaggio di una replica secondaria sincronizzata al ruolo primario (con protezione dei dati garantita).</span><span class="sxs-lookup"><span data-stu-id="3845f-198">An automatic failover occurs in response to a failure that causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection).</span></span> <span data-ttu-id="3845f-199">Quando la replica primaria precedente diventa disponibile, assume il ruolo secondario.</span><span class="sxs-lookup"><span data-stu-id="3845f-199">When the former primary replica becomes available, it transitions to the secondary role.</span></span> <span data-ttu-id="3845f-200">Il failover automatico richiede che sia la replica primaria sia la replica secondaria di destinazione siano eseguite nella modalità commit sincrono con la modalità di failover impostata su "Automatico".</span><span class="sxs-lookup"><span data-stu-id="3845f-200">Automatic failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode with the failover mode set to "Automatic".</span></span> <span data-ttu-id="3845f-201">Inoltre, la replica secondaria deve essere già sincronizzata, deve disporre del quorum WSFC e deve soddisfare le condizioni specificate dai [criteri di failover flessibili](flexible-automatic-failover-policy-availability-group.md)del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-201">In addition, the secondary replica must already be synchronized, have WSFC quorum, and meet the conditions specified by the [flexible failover policy](flexible-automatic-failover-policy-availability-group.md)of the availability group.</span></span>

        > [!IMPORTANT]
        >  <span data-ttu-id="3845f-202">Le istanze del cluster di failover di SQL Server non supportano il failover automatico da gruppi di disponibilità, pertanto le replica di disponibilità ospitate da un'istanza del cluster di failover possono essere configurate solo per il failover manuale.</span><span class="sxs-lookup"><span data-stu-id="3845f-202">SQL Server Failover Cluster Instances (FCIs) do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can only be configured for manual failover.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="3845f-203">Se si esegue un comando di failover forzato su una replica secondaria sincronizzata, la replica secondaria si comporta come con un failover manuale pianificato.</span><span class="sxs-lookup"><span data-stu-id="3845f-203">Note that if you issue a forced failover command on a synchronized secondary replica, the secondary replica behaves the same as for a planned manual failover.</span></span>

-   <span data-ttu-id="3845f-204">Nella modalità commit asincrono, l'unica forma di failover supportata è il failover manuale forzato (con possibile perdita di dati), in genere denominato *failover forzato*.</span><span class="sxs-lookup"><span data-stu-id="3845f-204">Under asynchronous-commit mode, the only form of failover is forced manual failover (with possible data loss), typically called *forced failover*.</span></span> <span data-ttu-id="3845f-205">Il failover forzato è considerato una forma di failover manuale, in quanto può essere avviato solo manualmente.</span><span class="sxs-lookup"><span data-stu-id="3845f-205">Forced failover is considered a form of manual failover because it can only be initiated manually.</span></span> <span data-ttu-id="3845f-206">Il failover forzato rappresenta un'opzione di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="3845f-206">Forced failover is a disaster recovery option.</span></span> <span data-ttu-id="3845f-207">Si tratta dell'unica forma di failover possibile quando la replica secondaria di destinazione non è sincronizzata con la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="3845f-207">It is the only form of failover that is possible when the target secondary replica is not synchronized with the primary replica.</span></span>

 <span data-ttu-id="3845f-208">Per altre informazioni, vedere [Failover e modalità di failover&#40;gruppi di disponibilità AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-208">For more information, see [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span></span>

##  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="3845f-209">Connessioni client</span><span class="sxs-lookup"><span data-stu-id="3845f-209">Client Connections</span></span>
 <span data-ttu-id="3845f-210">È possibile fornire la connettività client alla replica primaria di un determinato gruppo di disponibilità creando un listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-210">You can provide client connectivity to the primary replica of a given availability group by creating an availability group listener.</span></span> <span data-ttu-id="3845f-211">Un *listener del gruppo di disponibilità* fornisce un set di risorse collegate a un determinato gruppo di disponibilità per l'indirizzamento delle connessioni client alla replica di disponibilità appropriata.</span><span class="sxs-lookup"><span data-stu-id="3845f-211">An *availability group listener* provides a set of resources that is attached to a given availability group to direct client connections to the appropriate availability replica.</span></span>

 <span data-ttu-id="3845f-212">Un listener del gruppo di disponibilità è associato a un nome DNS univoco che funge da nome di rete virtuale (VNN), a uno o più indirizzi IP virtuali (VIP) e a un numero di porta TCP.</span><span class="sxs-lookup"><span data-stu-id="3845f-212">An availability group listener is associated with a unique DNS name that serves as a virtual network name (VNN), one or more virtual IP addresses (VIPs), and a TCP port number.</span></span> <span data-ttu-id="3845f-213">Per altre informazioni, vedere [Listener del gruppo di disponibilità, connettività client e failover dell'applicazione &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-213">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

> [!TIP]
>  <span data-ttu-id="3845f-214">Se un gruppo di disponibilità dispone unicamente di due repliche di disponibilità e non è configurato per consentire l'accesso in lettura alla replica secondaria, i client possono connettersi alla replica primaria tramite una [stringa di connessione per il mirroring del database](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-214">If an availability group possesses only two availability replicas and is not configured to allow read-access to the secondary replica, clients can connect to the primary replica by using a [database mirroring connection string](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span> <span data-ttu-id="3845f-215">Questo approccio può essere utile temporaneamente dopo la migrazione di un database dal mirroring del database ai [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3845f-215">This approach can be useful temporarily after you migrate a database from database mirroring to [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="3845f-216">Prima di aggiungere ulteriori repliche di disponibilità, è necessario creare un listener del gruppo di disponibilità e aggiornare le applicazioni affinché utilizzino il nome di rete del listener.</span><span class="sxs-lookup"><span data-stu-id="3845f-216">Before you add additional secondary replicas, you will need to create an availability group listener the availability group and update your applications to use the network name of the listener.</span></span>

##  <a name="active-secondary-replicas"></a><a name="ActiveSecondaries"></a><span data-ttu-id="3845f-217">Repliche secondarie attive</span><span class="sxs-lookup"><span data-stu-id="3845f-217">Active Secondary Replicas</span></span>
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="3845f-218">supporta le repliche secondarie attive.</span><span class="sxs-lookup"><span data-stu-id="3845f-218">supports active secondary replicas.</span></span> <span data-ttu-id="3845f-219">Le funzionalità delle repliche secondarie attive includono il supporto per:</span><span class="sxs-lookup"><span data-stu-id="3845f-219">Active secondary capabilities include support for:</span></span>

-   <span data-ttu-id="3845f-220">**Esecuzione di operazioni di backup sulle repliche secondarie**</span><span class="sxs-lookup"><span data-stu-id="3845f-220">**Performing backup operations on secondary replicas**</span></span>

     <span data-ttu-id="3845f-221">Le repliche secondarie supportano l'esecuzione di backup del log e backup di [sola copia](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) di un database completo, di file o di un filegroup.</span><span class="sxs-lookup"><span data-stu-id="3845f-221">The secondary replicas support performing log backups and [copy-only](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) backups of a full database, file, or filegroup.</span></span> <span data-ttu-id="3845f-222">È possibile configurare il gruppo di disponibilità per specificare una preferenza per la destinazione dei backup.</span><span class="sxs-lookup"><span data-stu-id="3845f-222">You can configure the availability group to specify a preference for where backups should be performed.</span></span> <span data-ttu-id="3845f-223">È importante comprendere che la preferenza non viene applicata da SQL Server, pertanto non incide sui backup ad hoc.</span><span class="sxs-lookup"><span data-stu-id="3845f-223">It is important to understand that the preference is not enforced by SQL Server, so it has no impact on ad-hoc backups.</span></span> <span data-ttu-id="3845f-224">L'interpretazione di questa preferenza dipende dalla logica, se presente, di cui viene generato lo script nei processi di backup per ogni database di un determinato gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-224">The interpretation of this preference depends on the logic, if any, that you script into your back jobs for each of the databases in a given availability group.</span></span> <span data-ttu-id="3845f-225">Per una replica di disponibilità singola, è possibile specificare la priorità di esecuzione dei backup in questa replica rispetto alle altre repliche dello stesso gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="3845f-225">For an individual availability replica, you can specify your priority for performing backups on this replica relative to the other replicas in the same availability group.</span></span> <span data-ttu-id="3845f-226">Per altre informazioni, vedere [Repliche secondarie attive: Backup in repliche secondarie &#40;Gruppi di disponibilità AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-226">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

-   <span data-ttu-id="3845f-227">**Accesso in sola lettura a una o più repliche secondarie (repliche secondarie leggibili)**</span><span class="sxs-lookup"><span data-stu-id="3845f-227">**Read-only access to one or more secondary replicas (readable secondary replicas)**</span></span>

     <span data-ttu-id="3845f-228">Una replica di disponibilità può essere configurata in modo da consentire l'accesso in sola lettura ai relativi database locali quando svolge il ruolo secondario, sebbene alcune operazioni non siano pienamente supportate.</span><span class="sxs-lookup"><span data-stu-id="3845f-228">Any availability replica can be configured to allow read-only access to its local databases when performing the secondary role, though some operations are not fully supported.</span></span> <span data-ttu-id="3845f-229">Se inoltre si desidera impedire l'esecuzione dei carichi di lavoro in sola lettura sulla replica primaria, è possibile configurare le repliche in modo da consentire l'accesso in lettura/scrittura solo quando l'esecuzione avviene nel ruolo primario.</span><span class="sxs-lookup"><span data-stu-id="3845f-229">Also, if you would like to prevent read-only workloads from running on the primary replica, you can configure the replicas to allow only read-write access when running under the primary role.</span></span> <span data-ttu-id="3845f-230">Per altre informazioni, vedere [Repliche secondarie attive: Repliche secondarie leggibili &#40;Gruppi di disponibilità AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-230">For more information, see [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>

     <span data-ttu-id="3845f-231">Se un listener del gruppo di disponibilità e una o più repliche secondarie leggibili vengono elaborate da un gruppo di disponibilità, tramite [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] è possibile instradare le richieste di connessione con finalità di lettura a una di tali repliche (*routing di sola lettura*).</span><span class="sxs-lookup"><span data-stu-id="3845f-231">If an availability group currently possesses an availability group listener and one or more readable secondary replicas, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can route read-intent connection requests to one of them (*read-only routing*).</span></span> <span data-ttu-id="3845f-232">Per altre informazioni, vedere [Listener del gruppo di disponibilità, connettività client e failover dell'applicazione &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-232">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

##  <a name="session-timeout-period"></a><a name="SessionTimeoutPerios"></a><span data-ttu-id="3845f-233">Periodo di timeout della sessione</span><span class="sxs-lookup"><span data-stu-id="3845f-233">Session-Timeout Period</span></span>
 <span data-ttu-id="3845f-234">Il periodo di timeout della sessione è una proprietà della replica di disponibilità che determina quanto tempo la connessione con un'altra replica di disponibilità può rimanere inattiva prima che la connessione venga chiusa.</span><span class="sxs-lookup"><span data-stu-id="3845f-234">The session-timeout period is an availability-replica property that determines how long connection with another availability replica can remain inactive before the connection is closed.</span></span> <span data-ttu-id="3845f-235">Le repliche primarie e secondarie effettuano vicendevolmente il ping per segnalare che ancora sono attive.</span><span class="sxs-lookup"><span data-stu-id="3845f-235">The primary and secondary replicas ping each other to signal that they are still active.</span></span> <span data-ttu-id="3845f-236">La ricezione di un ping dall'altra replica durante il periodo di timeout indica che la connessione è ancora aperta e che le istanze del server sono in comunicazione.</span><span class="sxs-lookup"><span data-stu-id="3845f-236">Receiving a ping from the other replica during the timeout period indicates that the connection is still open and that the server instances are communicating.</span></span> <span data-ttu-id="3845f-237">Alla ricezione di un ping, la replica di disponibilità reimposta il contatore del timeout della sessione per quella connessione.</span><span class="sxs-lookup"><span data-stu-id="3845f-237">On receiving a ping, an availability replica resets its session-timeout counter on that connection.</span></span>

 <span data-ttu-id="3845f-238">Il periodo di timeout della sessione impedisce alla replica di attendere indefinitamente la ricezione di un ping dall'altra replica.</span><span class="sxs-lookup"><span data-stu-id="3845f-238">The session-timeout period prevents either replica from waiting indefinitely to receive a ping from the other replica.</span></span> <span data-ttu-id="3845f-239">Se non viene ricevuto alcun ping dall'altra replica entro il periodo di timeout della sessione, si verifica il timeout della replica. La connessione viene chiusa e per la replica scaduta viene impostato lo stato DISCONNECTED.</span><span class="sxs-lookup"><span data-stu-id="3845f-239">If no ping is received from the other replica within the session-timeout period, the replica times out. Its connection is closed, and the timed-out replica enters the DISCONNECTED state.</span></span> <span data-ttu-id="3845f-240">Anche se la replica disconnessa è configurata per la modalità con commit sincrono, le transazioni non attenderanno che quella replica venga riconnessa e risincronizzata.</span><span class="sxs-lookup"><span data-stu-id="3845f-240">Even if a disconnected replica is configured for synchronous-commit mode, transactions will not wait for that replica to reconnect and resynchronize.</span></span>

 <span data-ttu-id="3845f-241">Il periodo di timeout della sessione predefinito per ogni replica di disponibilità è di 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="3845f-241">The default session-timeout period for each availability replica is 10 seconds.</span></span> <span data-ttu-id="3845f-242">Questo valore è configurabile dall'utente (minimo 5 secondi).</span><span class="sxs-lookup"><span data-stu-id="3845f-242">This value is user-configurable, with a minimum of 5 seconds.</span></span> <span data-ttu-id="3845f-243">È consigliabile usare generalmente un periodo di timeout di almeno 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="3845f-243">Generally, we recommend that you keep the time-out period at 10 seconds or greater.</span></span> <span data-ttu-id="3845f-244">Con un valore inferiore a 10 secondi, può verificarsi un sovraccarico del sistema, con generazione di falsi errori.</span><span class="sxs-lookup"><span data-stu-id="3845f-244">Setting the value to less than 10 seconds creates the possibility of a heavily loaded system declaring a false failure.</span></span>

> [!NOTE]
>  <span data-ttu-id="3845f-245">Nel ruolo di risoluzione, il periodo di timeout della sessione non si applica perché il ping non viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="3845f-245">In the resolving role, the session-timeout period does not apply because pinging does not occur.</span></span>

##  <a name="automatic-page-repair"></a><a name="APR"></a><span data-ttu-id="3845f-246">Correzione automatica della pagina</span><span class="sxs-lookup"><span data-stu-id="3845f-246">Automatic Page Repair</span></span>
 <span data-ttu-id="3845f-247">Ogni replica di disponibilità tenta di recuperare automaticamente delle pagine danneggiate su un database locale risolvendo determinati tipi di errore che impediscono la lettura di una pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="3845f-247">Each availability replica tries to automatically recover from corrupted pages on a local database by resolving certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="3845f-248">Se una replica secondaria non legge una pagina, la replica richiede alla replica primaria una copia aggiornata della pagina.</span><span class="sxs-lookup"><span data-stu-id="3845f-248">If a secondary replica cannot read a page, the replica requests a fresh copy of the page from the primary replica.</span></span> <span data-ttu-id="3845f-249">Se la replica primaria non legge una pagina, la replica trasmette una richiesta per una copia aggiornata a tutte le repliche secondarie e ottiene la pagina dalla prima replica secondaria che risponderà.</span><span class="sxs-lookup"><span data-stu-id="3845f-249">If the primary replica cannot read a page, the replica broadcasts a request for a fresh copy to all the secondary replicas and gets the page from the first to respond.</span></span> <span data-ttu-id="3845f-250">Se la richiesta viene soddisfatta, la pagina illeggibile viene sostituita dalla copia e l'errore viene risolto.</span><span class="sxs-lookup"><span data-stu-id="3845f-250">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span>

 <span data-ttu-id="3845f-251">Per altre informazioni, vedere [Correzione automatica della pagina &#40;Gruppi di disponibilità/Mirroring del database&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="3845f-251">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="3845f-252">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="3845f-252">Related Tasks</span></span>

-   [<span data-ttu-id="3845f-253">Introduzione con Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="3845f-253">Getting Started with AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](getting-started-with-always-on-availability-groups-sql-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="3845f-254">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="3845f-254">Related Content</span></span>

-   <span data-ttu-id="3845f-255">**Blog:**</span><span class="sxs-lookup"><span data-stu-id="3845f-255">**Blogs:**</span></span>

     [<span data-ttu-id="3845f-256">Serie di informazioni su AlwaysON - HADRON: Utilizzo del pool di lavoro per database abilitati HADRON</span><span class="sxs-lookup"><span data-stu-id="3845f-256">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)

     [<span data-ttu-id="3845f-257">Blog del team di SQL Server AlwaysOn: Blog ufficiale del team di SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3845f-257">SQL Server AlwaysOn Team Blogs: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

     [<span data-ttu-id="3845f-258">Pagina relativa ai blog del Servizio Supporto Tecnico Clienti per gli ingegneri di SQL Server</span><span class="sxs-lookup"><span data-stu-id="3845f-258">CSS SQL Server Engineers Blogs</span></span>](https://blogs.msdn.com/b/psssql/)

-   <span data-ttu-id="3845f-259">**Video:**</span><span class="sxs-lookup"><span data-stu-id="3845f-259">**Videos:**</span></span>

     [<span data-ttu-id="3845f-260">Pagina relativa alla prima parte riguardante l'introduzione della soluzione a disponibilità elevata di prossima generazione della serie AlwaysOn di Microsoft SQL Server nome in codice "Denali"</span><span class="sxs-lookup"><span data-stu-id="3845f-260">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 1: Introducing the Next Generation High Availability Solution</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI302)

     [<span data-ttu-id="3845f-261">Pagina relativa alla seconda parte riguardante la compilazione di una soluzione a disponibilità elevata critica tramite AlwasyOn della serie AlwaysOn di Microsoft SQL Server nome in codice "Denali"</span><span class="sxs-lookup"><span data-stu-id="3845f-261">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 2: Building a Mission-Critical High Availability Solution Using AlwaysOn</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI404)

-   <span data-ttu-id="3845f-262">**White paper:**</span><span class="sxs-lookup"><span data-stu-id="3845f-262">**Whitepapers:**</span></span>

     [<span data-ttu-id="3845f-263">Pagina relativa alla guida alle soluzioni AlwaysOn di Microsoft SQL Server per la disponibilità elevata e il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="3845f-263">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)

     [<span data-ttu-id="3845f-264">Pagina relativa ai white paper Microsoft per SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="3845f-264">Microsoft White Papers for SQL Server 2012</span></span>](https://msdn.microsoft.com/library/hh403491.aspx)

     [<span data-ttu-id="3845f-265">Pagina relativa ai white paper del team di consulenza clienti di SQL Server</span><span class="sxs-lookup"><span data-stu-id="3845f-265">SQL Server Customer Advisory Team Whitepapers</span></span>](http://sqlcat.com/)

## <a name="see-also"></a><span data-ttu-id="3845f-266">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3845f-266">See Also</span></span>
 <span data-ttu-id="3845f-267">[Modalità di disponibilità &#40;Gruppi di disponibilità AlwaysOn&#41;](availability-modes-always-on-availability-groups.md) [failover e modalità di failover &#40;gruppi di disponibilità AlwaysOn](failover-and-failover-modes-always-on-availability-groups.md) [&#41;Panoramica delle istruzioni Transact-SQL per](transact-sql-statements-for-always-on-availability-groups.md) gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;[Panoramica dei cmdlet di PowerShell per](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;[supporto della disponibilità elevata per i prerequisiti dei database OLTP In memoria](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [, restrizioni e indicazioni per gruppi di disponibilità AlwaysOn &#40;SQL Server la](prereqs-restrictions-recommendations-always-on-availability.md) [creazione e la configurazione di gruppi di disponibilità &#40;](creation-and-configuration-of-availability-groups-sql-server.md) SQL Server repliche [secondarie attive: repliche secondarie leggibili&#41;&#40;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) gruppi di disponibilità AlwaysOn repliche secondarie attive [: backup in repliche secondarie](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md)&#41;&#40;gruppi di disponibilità AlwaysOn listener [del gruppo di disponibilità, connettività&#41;client e failover dell'applicazione](../../listeners-client-connectivity-application-failover.md)&#41;&#40;SQL Server</span><span class="sxs-lookup"><span data-stu-id="3845f-267">[Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md) [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) [Overview of Transact-SQL Statements for AlwaysOn Availability Groups &#40;SQL Server&#41;](transact-sql-statements-for-always-on-availability-groups.md) [Overview of PowerShell Cmdlets for AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) [High Availability Support for In-Memory OLTP databases](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](creation-and-configuration-of-availability-groups-sql-server.md) [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)</span></span>

