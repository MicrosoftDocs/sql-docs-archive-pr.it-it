---
title: Analysis Services con i gruppi di disponibilità AlwaysOn | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
ms.assetid: 14d16bfd-228c-4870-b463-a283facda965
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 9ea0c7f30fd8f431f70284122df7e2a036658f4e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624382"
---
# <a name="analysis-services-with-always-on-availability-groups"></a><span data-ttu-id="ce50c-102">Analysis Services con i gruppi di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="ce50c-102">Analysis Services with Always On Availability Groups</span></span>
  <span data-ttu-id="ce50c-103">Un gruppo di disponibilità AlwaysOn è una raccolta predefinita di database relazionali di SQL Server per cui è previsto un failover reciproco quando le condizioni attivano un failover in uno dei database, reindirizzando le richieste a un database con mirroring su un'altra istanza nello stesso gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ce50c-103">An AlwaysOn availability group is a predefined collection of SQL Server relational databases that failover together when conditions trigger a failover in any one database, redirecting requests to a mirrored database on another instance in the same availability group.</span></span> <span data-ttu-id="ce50c-104">Se i gruppi di disponibilità vengono utilizzati come soluzione di disponibilità elevata, è possibile utilizzare un database di questo gruppo come origine dati in una soluzione multidimensionale o tabulare di Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ce50c-104">If you are using availability groups as your high availability solution, you can use a database in that group as a data source in an Analysis Services tabular or multidimensional solution.</span></span> <span data-ttu-id="ce50c-105">Tutte le operazioni di Analysis Services elencate di seguito funzionano nel modo previsto quando si utilizza un database di disponibilità: elaborazione o importazione di dati, query dirette su dati relazionali (utilizzando la modalità DirectQuery o l'archiviazione ROLAP) e writeback.</span><span class="sxs-lookup"><span data-stu-id="ce50c-105">All of the following Analysis Services operations work as expected when using an availability database: processing or importing data, querying relational data directly (using ROLAP storage or DirectQuery mode), and writeback.</span></span>  
  
 <span data-ttu-id="ce50c-106">Le attività di elaborazione e query sono carichi di lavoro di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ce50c-106">Processing and querying are read-only workloads.</span></span> <span data-ttu-id="ce50c-107">È possibile migliorare le prestazioni ripartendo questi carichi di lavoro su una replica secondaria leggibile.</span><span class="sxs-lookup"><span data-stu-id="ce50c-107">You can improve performance by offloading these workloads to a readable secondary replica.</span></span> <span data-ttu-id="ce50c-108">Per questo scenario sono necessarie operazioni di configurazione aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="ce50c-108">Additional configuration is required for this scenario.</span></span> <span data-ttu-id="ce50c-109">Utilizzare l'elenco di controllo contenuto in questo argomento per assicurarsi di eseguire tutti i passaggi.</span><span class="sxs-lookup"><span data-stu-id="ce50c-109">Use the checklist in this topic to ensure you follow all the steps.</span></span>  
  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="ce50c-110">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ce50c-110">Prerequisites</span></span>  
 <span data-ttu-id="ce50c-111">È necessario disporre dell'accesso di SQL Server su tutte le repliche.</span><span class="sxs-lookup"><span data-stu-id="ce50c-111">You must have a SQL Server login on all replicas.</span></span> <span data-ttu-id="ce50c-112">È necessario disporre dei privilegi di **sysadmin** per configurare i gruppi, i listener e i database di disponibilità, ma per gli utenti sono sufficienti le autorizzazioni di **db_datareader** per accedere al database da un client Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ce50c-112">You must be a **sysadmin** to configure availability groups, listeners, and databases, but users only need **db_datareader** permissions to access the database from an Analysis Services client.</span></span>  
  
 <span data-ttu-id="ce50c-113">Utilizzare un provider di dati che supporti il protocollo TDS (Tabular Data Stream) versione 7.4 o successive, ad esempio SQL Server Native Client 11.0 o il provider di dati per SQL Server in .NET Framework 4.02.</span><span class="sxs-lookup"><span data-stu-id="ce50c-113">Use a data provider that supports the tabular data stream (TDS) protocol version 7.4 or newer, such as the SQL Server Native Client 11.0 or the Data Provider for SQL Server in .NET Framework 4.02.</span></span>  
  
 <span data-ttu-id="ce50c-114">**(Per i carichi di lavoro di sola lettura)**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-114">**(For read-only workloads)**.</span></span> <span data-ttu-id="ce50c-115">Il ruolo della replica secondaria deve essere configurato per le connessioni di sola lettura, il gruppo di disponibilità deve presentare un elenco di routing e la connessione nell'origine dati di Analysis Services deve specificare il listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ce50c-115">The secondary replica role must be configured for read-only connections, the availability group must have a routing list, and the connection in the Analysis Services data source must specify the availability group listener.</span></span> <span data-ttu-id="ce50c-116">In questo argomento sono incluse le indicazioni necessarie per eseguire l'attivazione.</span><span class="sxs-lookup"><span data-stu-id="ce50c-116">Instructions are provided in this topic.</span></span>  
  
##  <a name="checklist-use-a-secondary-replica-for-read-only-operations"></a><a name="bkmk_UseSecondary"></a> <span data-ttu-id="ce50c-117">Elenco di controllo: utilizzare una replica secondaria per le operazioni di sola lettura</span><span class="sxs-lookup"><span data-stu-id="ce50c-117">Checklist: Use a secondary replica for read-only operations</span></span>  
 <span data-ttu-id="ce50c-118">È possibile configurare una connessione all'origine dati per l'utilizzo di una replica secondaria leggibile se la soluzione di Analysis Services include il writeback.</span><span class="sxs-lookup"><span data-stu-id="ce50c-118">Unless your Analysis Services solution includes writeback, you can configure a data source connection to use a readable secondary replica.</span></span> <span data-ttu-id="ce50c-119">Se si dispone di una connessione di rete veloce, la replica secondaria genera una latenza dati molto bassa, fornendo dati pressoché identici a quelli della replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-119">If you have a fast network connection, the secondary replica has very low data latency, providing nearly identical data as the primary replica.</span></span> <span data-ttu-id="ce50c-120">Utilizzando la replica secondaria per le operazioni di Analysis Services, è possibile ridurre le contese di lettura-scrittura sulla replica primaria e utilizzare in modo migliore le repliche secondarie nel gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ce50c-120">By using the secondary replica for Analysis Services operations, you can reduce read-write contention on the primary replica and get better utilization of secondary replicas in your availability group.</span></span>  
  
 <span data-ttu-id="ce50c-121">Per impostazione predefinita, gli accessi in lettura e scrittura e l'accesso con finalità di lettura sono entrambi consentiti alla replica primaria, ma alle repliche secondarie non sono consentite connessioni.</span><span class="sxs-lookup"><span data-stu-id="ce50c-121">By default, both read-write and read-intent access are allowed to the primary replica and no connections are allowed to secondary replicas.</span></span> <span data-ttu-id="ce50c-122">Per impostare una connessione client di sola lettura a una replica secondaria, è necessaria una configurazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="ce50c-122">Additional configuration is required to set up a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="ce50c-123">La configurazione richiede l'impostazione di proprietà sulla replica secondaria e l'esecuzione di uno script T-SQL per la definizione di un elenco di routing di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ce50c-123">Configuration requires setting properties on the secondary replica and running a T-SQL script that defines a read-only routing list.</span></span> <span data-ttu-id="ce50c-124">Effettuare le procedure seguenti per assicurarsi di avere eseguito entrambi i passaggi.</span><span class="sxs-lookup"><span data-stu-id="ce50c-124">Use the following procedures to ensure you have performed both steps.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ce50c-125">I passaggi seguenti presumono l'esistenza di un gruppo di disponibilità AlwaysOn e dei relativi database.</span><span class="sxs-lookup"><span data-stu-id="ce50c-125">The following steps assume an existing AlwaysOn availability group and databases.</span></span> <span data-ttu-id="ce50c-126">Se si configura un nuovo gruppo, utilizzare la Creazione guidata Gruppo di disponibilità per creare il gruppo e creare un join dei database.</span><span class="sxs-lookup"><span data-stu-id="ce50c-126">If you are configuring a new group, use the New Availability Group Wizard to create the group and join the databases.</span></span> <span data-ttu-id="ce50c-127">Tramite la procedura guidata vengono controllati i prerequisiti, vengono fornite istruzioni per ogni passaggio e viene eseguita la sincronizzazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="ce50c-127">The wizard checks for prerequisites, provides guidance for each step, and performs the initial synchronization.</span></span> <span data-ttu-id="ce50c-128">Per altre informazioni, vedere [Utilizzare la Creazione guidata Gruppo di disponibilità &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ce50c-128">For more information, see [Use the Availability Group Wizard &#40;SQL Server Management Studio&#41;](use-the-availability-group-wizard-sql-server-management-studio.md).</span></span>  
  
#### <a name="step-1-configure-access-on-an-availability-replica"></a><span data-ttu-id="ce50c-129">Passaggio 1: Configurare l'accesso su una replica di disponibilità</span><span class="sxs-lookup"><span data-stu-id="ce50c-129">Step 1: Configure access on an availability replica</span></span>  
  
1.  <span data-ttu-id="ce50c-130">In Esplora oggetti connettersi all'istanza del server che ospita la replica primaria ed espandere l'albero del server.</span><span class="sxs-lookup"><span data-stu-id="ce50c-130">In Object Explorer, connect to the server instance that hosts the primary replica, and expand the server tree.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ce50c-131">Questi passaggi sono descritti in [Configurare l'accesso in sola lettura in una replica di disponibilità &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md) che include informazioni aggiuntive e istruzioni alternative per l'esecuzione di questa attività.</span><span class="sxs-lookup"><span data-stu-id="ce50c-131">These steps are taken from [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="ce50c-132">Espandere il nodo **Disponibilità elevata AlwaysOn** e il nodo **Gruppi di disponibilità** .</span><span class="sxs-lookup"><span data-stu-id="ce50c-132">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
3.  <span data-ttu-id="ce50c-133">Fare clic sul gruppo di disponibilità di cui si desidera modificare la replica.</span><span class="sxs-lookup"><span data-stu-id="ce50c-133">Click the availability group whose replica you want to change.</span></span> <span data-ttu-id="ce50c-134">Espandere **Repliche di disponibilità**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-134">Expand **Availability Replicas**.</span></span>  
  
4.  <span data-ttu-id="ce50c-135">Fare clic con il pulsante destro del mouse sulla replica secondaria e scegliere **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-135">Right-click the secondary replica, and click **Properties**.</span></span>  
  
5.  <span data-ttu-id="ce50c-136">Nella finestra di dialogo **Proprietà replica di disponibilità** modificare l'accesso alla connessione per il ruolo secondario, come segue:</span><span class="sxs-lookup"><span data-stu-id="ce50c-136">In the **Availability Replica Properties** dialog box, change the connection access for the secondary role, as follows:</span></span>  
  
    -   <span data-ttu-id="ce50c-137">Nell'elenco a discesa **Secondario leggibile** selezionare **Solo finalità di lettura**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-137">In the **Readable secondary** drop list, select **Read-intent only**.</span></span>  
  
    -   <span data-ttu-id="ce50c-138">Nell'elenco a discesa **Connessioni nel ruolo primario** selezionare **Consenti tutte le connessioni**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-138">In the **Connections in primary role** drop list, select **Allow all connections**.</span></span> <span data-ttu-id="ce50c-139">Questa è l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="ce50c-139">This is the default.</span></span>  
  
    -   <span data-ttu-id="ce50c-140">Facoltativamente, nell'elenco a discesa **Modalità di disponibilità** selezionare **Commit sincrono**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-140">Optionally, in **Availability mode** drop list, select **Synchronous commit**.</span></span> <span data-ttu-id="ce50c-141">Questo passaggio non è obbligatorio, ma assicura la parità dei dati tra la replica primaria e quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-141">This step is not required, but setting it ensures that there is data parity between the primary and secondary replica.</span></span>  
  
         <span data-ttu-id="ce50c-142">Questa proprietà è anche un requisito per il failover pianificato.</span><span class="sxs-lookup"><span data-stu-id="ce50c-142">This property is also a requirement for planned failover.</span></span> <span data-ttu-id="ce50c-143">Per eseguire un failover manuale pianificato a scopo di testing, impostare **Modalità di disponibilità** su **Commit sincrono** per le repliche primaria e secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-143">If you want to perform a planned manual failover for testing purposes, set **Availability mode** to **Synchronous commit** for both the primary and secondary replica.</span></span>  
  
#### <a name="step-2-configure-read-only-routing"></a><span data-ttu-id="ce50c-144">Passaggio 2: Configurare il routing di sola lettura</span><span class="sxs-lookup"><span data-stu-id="ce50c-144">Step 2: Configure read-only routing</span></span>  
  
1.  <span data-ttu-id="ce50c-145">Connettersi alla replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-145">Connect to the primary replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ce50c-146">Questi passaggi sono descritti in [Configurare il routing di sola lettura per un gruppo di disponibilità &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md) che include informazioni aggiuntive e istruzioni alternative per l'esecuzione di questa attività.</span><span class="sxs-lookup"><span data-stu-id="ce50c-146">These steps are taken from [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="ce50c-147">Aprire una finestra Query e incollare lo script seguente.</span><span class="sxs-lookup"><span data-stu-id="ce50c-147">Open a query window and paste in the following script.</span></span> <span data-ttu-id="ce50c-148">Tramite questo script è possibile abilitare le connessioni leggibili a una replica secondaria (disabilitata per impostazione predefinita), impostare l'URL del routing di sola lettura e creare l'elenco di routing in cui viene stabilita la priorità di indirizzamento delle richieste di connessione.</span><span class="sxs-lookup"><span data-stu-id="ce50c-148">This script does three things: enables readable connections to a secondary replica (which is off by default), sets the read-only routing URL, and creates the routing list that prioritizes how connection requests are directed.</span></span>  <span data-ttu-id="ce50c-149">La prima istruzione, ovvero quella che consente le connessioni leggibili, è ridondante se le proprietà sono già state impostate in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], ma è stata inclusa per motivi di completezza.</span><span class="sxs-lookup"><span data-stu-id="ce50c-149">The first statement, allowing readable connections, is redundant if you already set the properties in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], but are included for completeness.</span></span>  
  
    ```  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER01.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));  
  
    ALTER AVAILABILITY GROUP [AG1]  
     MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://COMPUTER02.contoso.com:1433'));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER01' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER02','COMPUTER01')));  
  
    ALTER AVAILABILITY GROUP [AG1]   
    MODIFY REPLICA ON  
    N'COMPUTER02' WITH   
    (PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('COMPUTER01','COMPUTER02')));  
    GO  
    ```  
  
3.  <span data-ttu-id="ce50c-150">Modificare lo script sostituendo i segnaposto con valori validi per la distribuzione:</span><span class="sxs-lookup"><span data-stu-id="ce50c-150">Modify the script, replacing placeholders with values that are valid for your deployment:</span></span>  
  
    -   <span data-ttu-id="ce50c-151">Sostituire "Computer01" con il nome dell'istanza del server in cui è ospitata la replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-151">Replace 'Computer01' with the name of the server instance that hosts the primary replica.</span></span>  
  
    -   <span data-ttu-id="ce50c-152">Sostituire "Computer02" con il nome dell'istanza del server in cui è ospitata la replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-152">Replace 'Computer02' with the name of the server instance that hosts the secondary replica.</span></span>  
  
    -   <span data-ttu-id="ce50c-153">Sostituire "contoso.com" con il nome del dominio oppure ometterlo dallo script se tutti i computer si trovano nello stesso dominio.</span><span class="sxs-lookup"><span data-stu-id="ce50c-153">Replace 'contoso.com' with the name of your domain, or omit it from the script if all computers are in the same domain.</span></span> <span data-ttu-id="ce50c-154">Mantenere il numero di porta se il listener utilizza la porta predefinita.</span><span class="sxs-lookup"><span data-stu-id="ce50c-154">Keep the port number if the listener is using the default port.</span></span> <span data-ttu-id="ce50c-155">La porta effettivamente utilizzata dal listener è elencata nella pagina delle proprietà di [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ce50c-155">The port that is actually used by the listener is listed in the properties page in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)].</span></span>  
  
4.  <span data-ttu-id="ce50c-156">Eseguire lo script.</span><span class="sxs-lookup"><span data-stu-id="ce50c-156">Execute the script.</span></span>  
  
     <span data-ttu-id="ce50c-157">A questo punto, creare un'origine dati in un modello di Analysis Services che utilizza un database dal gruppo appena configurato.</span><span class="sxs-lookup"><span data-stu-id="ce50c-157">Next, create a data source in an Analysis Services model that uses a database from the group you just configured.</span></span>  
  
##  <a name="create-an-analysis-services-data-source-using-an-alwayson-availability-database"></a><a name="bkmk_ssasAODB"></a><span data-ttu-id="ce50c-158">Creare un'origine dati Analysis Services usando un database di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="ce50c-158">Create an Analysis Services data source using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="ce50c-159">In questa sezione viene illustrato come creare un'origine dati di Analysis Services connessa a un database in un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ce50c-159">This section explains how to create an Analysis Services data source that connects to a database in an availability group.</span></span> <span data-ttu-id="ce50c-160">È possibile utilizzare queste istruzioni per configurare una connessione a una replica primaria (impostazione predefinita) o a una replica secondaria leggibile configurata in base ai passaggi della sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="ce50c-160">You can use these instructions to configure a connection to either a primary replica (default) or a readable secondary replica that you configured based on steps in a previous section.</span></span> <span data-ttu-id="ce50c-161">Le impostazioni di configurazione AlwaysOn e le proprietà di connessione impostate nel client determineranno se verrà utilizzata la replica primaria o quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-161">AlwaysOn configuration settings, plus the connection properties set in the client, will determine whether a primary or secondary replica is used.</span></span>  
  
1.  <span data-ttu-id="ce50c-162">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], in un progetto di modello di data mining e multidimensionale di Analysis Services, fare clic con il pulsante destro del mouse su **Origini dati** e selezionare **Nuova origine dati**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-162">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], in an Analysis Services Multidimensional and Data Mining Model project, right-click **Data Sources** and select **New Data Source**.</span></span> <span data-ttu-id="ce50c-163">Per creare una nuova origine dati, fare clic su **Nuova** .</span><span class="sxs-lookup"><span data-stu-id="ce50c-163">Click **New** to create a new data source.</span></span>  
  
     <span data-ttu-id="ce50c-164">In alternativa, per un progetto di modello tabulare scegliere **Importa da origine dati**dal menu Modello.</span><span class="sxs-lookup"><span data-stu-id="ce50c-164">Alternatively, for a tabular model project, click the Model menu, and then click **Import from Data Source**.</span></span>  
  
2.  <span data-ttu-id="ce50c-165">In Gestione connessione, in Provider, scegliere un provider che supporti il protocollo TDS (Tabular Data Stream ).</span><span class="sxs-lookup"><span data-stu-id="ce50c-165">In Connection Manager, in Provider, choose a provider that supports the Tabular Data Stream (TDS) protocol.</span></span> <span data-ttu-id="ce50c-166">Questo protocollo è supportato da SQL Server Native Client 11.0.</span><span class="sxs-lookup"><span data-stu-id="ce50c-166">The SQL Server Native Client 11.0 supports this protocol.</span></span>  
  
3.  <span data-ttu-id="ce50c-167">In Gestione connessione, in Nome server, immettere il nome del *listener del gruppo di disponibilità*, quindi scegliere un database disponibile nel gruppo.</span><span class="sxs-lookup"><span data-stu-id="ce50c-167">In Connection Manager, in Server Name, enter the name of the *availability group listener*, and then choose a database that is available in the group.</span></span>  
  
     <span data-ttu-id="ce50c-168">Il listener del gruppo di disponibilità reindirizza una connessione client a una replica primaria per le richieste di lettura-scrittura o a una replica secondaria se si specifica la finalità di lettura nella stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="ce50c-168">The availability group listener redirects a client connection to a primary replica for read-write requests or to a secondary replica if you specify read-intent in the connection string.</span></span> <span data-ttu-id="ce50c-169">Poiché i ruoli delle repliche cambiano durante un failover (la replica primaria diventa secondaria e una secondaria diventa primaria), è sempre necessario specificare il listener in modo che la connessione client venga reindirizzata di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="ce50c-169">Because replica roles will change during a failover (where the primary becomes the secondary and a secondary becomes a primary), you should always specify the listener so that the client connection is redirected accordingly.</span></span>  
  
     <span data-ttu-id="ce50c-170">Per determinare il nome del listener del gruppo di disponibilità, è possibile rivolgersi a un amministratore di database o connettersi a un'istanza del gruppo di disponibilità e visualizzare la relativa configurazione della disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="ce50c-170">To determine the name of the availability group listener, you can either ask a database administrator or connect to an instance in the availability group and view its AlwaysOn availability configuration.</span></span> <span data-ttu-id="ce50c-171">Nella schermata seguente il listener del gruppo di disponibilità è **AdventureWorks2**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-171">In the screenshot below, the availability group listener is **AdventureWorks2**.</span></span>  
  
     <span data-ttu-id="ce50c-172">![Cartella della disponibilità AlwaysOn in Management Studio](../../media/ssas-alwaysoninfoinssms.png "Cartella della disponibilità AlwaysOn in Management Studio")</span><span class="sxs-lookup"><span data-stu-id="ce50c-172">![AlwaysOn Availability folder in Management Studio](../../media/ssas-alwaysoninfoinssms.png "AlwaysOn Availability folder in Management Studio")</span></span>  
  
4.  <span data-ttu-id="ce50c-173">In Gestione connessione scegliere **Tutto** nel riquadro di navigazione sinistro per visualizzare la griglia delle proprietà del provider di dati.</span><span class="sxs-lookup"><span data-stu-id="ce50c-173">Still in Connection Manager, click **All** in the left navigation pane to view the property grid of data provider.</span></span>  
  
     <span data-ttu-id="ce50c-174">Impostare **Finalità dell'applicazione** su **READONLY** per configurare una connessione client di sola lettura su una replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-174">Set **Application Intent** to **READONLY** if you are configuring a read-only client connection to a secondary replica.</span></span> <span data-ttu-id="ce50c-175">In caso contrario, mantenere l'impostazione predefinita **READWRITE** per indirizzare la connessione alla replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-175">Otherwise, keep the **READWRITE** default to redirect the connection to the primary replica.</span></span>  
  
5.  <span data-ttu-id="ce50c-176">In Impostazioni di rappresentazione selezionare **Usa nome utente e password specifici di Windows**, quindi immettere un account utente di dominio di Windows che disponga di un numero minimo di autorizzazioni **db_datareader** per il database.</span><span class="sxs-lookup"><span data-stu-id="ce50c-176">In Impersonation Information, select **Use a specific Windows user name and password**, and then enter a Windows domain user account that has a minimum of **db_datareader** permissions on the database.</span></span>  
  
     <span data-ttu-id="ce50c-177">Non scegliere **Usa credenziali dell'utente corrente** o **Eredita**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-177">Do not choose **Use the credentials of the current user** or **Inherit**.</span></span> <span data-ttu-id="ce50c-178">È possibile scegliere **Usa account del servizio**, ma solo se tale account dispone delle autorizzazioni di lettura per il database.</span><span class="sxs-lookup"><span data-stu-id="ce50c-178">You can choose **Use the service account**, but only if that account has read permissions on the database.</span></span>  
  
     <span data-ttu-id="ce50c-179">Terminare l'origine dati e chiudere la Creazione guidata origine dati.</span><span class="sxs-lookup"><span data-stu-id="ce50c-179">Finish the data source and close the Data Source Wizard.</span></span>  
  
6.  <span data-ttu-id="ce50c-180">Aggiungere **MultiSubnetFailover=Yes** alla stringa di connessione per offrire un rilevamento e una connessione più rapidi al server attivo.</span><span class="sxs-lookup"><span data-stu-id="ce50c-180">Add **MultiSubnetFailover=Yes** to the connection string to provide faster detection and connection to the active server.</span></span> <span data-ttu-id="ce50c-181">Per informazioni su questa proprietà di connessione, vedere [Supporto di SQL Server Native Client per il ripristino di emergenza a disponibilità elevata](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="ce50c-181">For more information about this property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
     <span data-ttu-id="ce50c-182">Questa proprietà non è visibile nella griglia delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="ce50c-182">This property is not visible in the property grid.</span></span> <span data-ttu-id="ce50c-183">Per aggiungere la proprietà, fare clic con il pulsante destro del mouse sull'origine dati e scegliere **Visualizza codice**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-183">To add the property, right-click the data source and choose **View Code**.</span></span> <span data-ttu-id="ce50c-184">Aggiungere `MultiSubnetFailover=Yes` alla stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="ce50c-184">Add `MultiSubnetFailover=Yes` to the connection string.</span></span>  
  
 <span data-ttu-id="ce50c-185">L'origine dati è ora definita.</span><span class="sxs-lookup"><span data-stu-id="ce50c-185">The data source is now defined.</span></span> <span data-ttu-id="ce50c-186">È ora possibile procedere alla compilazione di un modello, partendo dalla vista origine dati o, nel caso di modelli tabulari, dalla creazione di relazioni.</span><span class="sxs-lookup"><span data-stu-id="ce50c-186">You can now proceed to build a model, starting with the data source view, or in the case of tabular models, creating relationships.</span></span> <span data-ttu-id="ce50c-187">Quando è il momento di recuperare dati dal database di disponibilità, ad esempio quando si è pronti a elaborare o distribuire la soluzione, è possibile testare la configurazione per verificare che i dati siano accessibili dalla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-187">When you are at a point where data must be retrieved from the availability database (for example when you are ready to process or deploy the solution), you can test the configuration to verify data is accessed from the secondary replica.</span></span>  
  
##  <a name="test-the-configuration"></a><a name="bkmk_test"></a><span data-ttu-id="ce50c-188">Testare la configurazione</span><span class="sxs-lookup"><span data-stu-id="ce50c-188">Test the configuration</span></span>  
 <span data-ttu-id="ce50c-189">Dopo avere configurato la replica secondaria e creato una connessione all'origine dati in Analysis Services, è possibile confermare che i comandi di query ed elaborazione vengano reindirizzati alla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-189">After you configure the secondary replica and create a data source connection in Analysis Services, you can confirm that processing and query commands are redirected to the secondary replica.</span></span> <span data-ttu-id="ce50c-190">È anche possibile eseguire un failover manuale pianificato per verificare il piano di recupero per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="ce50c-190">You can also perform a planned manual failover to verify your recovery plan for this scenario.</span></span>  
  
#### <a name="step-1-confirm-the-data-source-connection-is-redirected-to-the-secondary-replica"></a><span data-ttu-id="ce50c-191">Passaggio 1: Confermare che la connessione all'origine dati venga reindirizzata alla replica secondaria</span><span class="sxs-lookup"><span data-stu-id="ce50c-191">Step 1: Confirm the data source connection is redirected to the secondary replica</span></span>  
  
1.  <span data-ttu-id="ce50c-192">Avviare SQL Server Profiler e connettersi all'istanza di SQL Server che ospita la replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-192">Start SQL Server Profiler and connect to the SQL Server instance hosting the secondary replica.</span></span>  
  
     <span data-ttu-id="ce50c-193">Durante l'esecuzione della traccia, tramite gli eventi `SQL:BatchStarting`e `SQL:BatchCompleting` verranno mostrate le query emesse da Analysis Services eseguite sull'istanza del motore di database.</span><span class="sxs-lookup"><span data-stu-id="ce50c-193">As the trace runs, the `SQL:BatchStarting` and `SQL:BatchCompleting` events will show the queries issued from Analysis Services that are executing on the database engine instance.</span></span> <span data-ttu-id="ce50c-194">Questi eventi sono selezionati per impostazione predefinita, pertanto è sufficiente avviare la traccia.</span><span class="sxs-lookup"><span data-stu-id="ce50c-194">These events are selected by default so all you need to do is start the trace.</span></span>  
  
2.  <span data-ttu-id="ce50c-195">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)]aprire il progetto o la soluzione di Analysis Services contenente la connessione all'origine dati che si desidera testare.</span><span class="sxs-lookup"><span data-stu-id="ce50c-195">In [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)], open the Analysis Services project or solution containing a data source connection you want to test.</span></span> <span data-ttu-id="ce50c-196">Assicurarsi che l'origine dati specifichi il listener del gruppo di disponibilità e non un'istanza nel gruppo.</span><span class="sxs-lookup"><span data-stu-id="ce50c-196">Be sure that the data source specifies the availability group listener and not an instance in the group.</span></span>  
  
     <span data-ttu-id="ce50c-197">Questo passaggio è importante.</span><span class="sxs-lookup"><span data-stu-id="ce50c-197">This step is important.</span></span> <span data-ttu-id="ce50c-198">Il routing alla replica secondaria non avviene se si specifica un nome di istanza del server.</span><span class="sxs-lookup"><span data-stu-id="ce50c-198">Routing to the secondary replica will not occur if you specify a server instance name.</span></span>  
  
3.  <span data-ttu-id="ce50c-199">Disporre le finestre dell'applicazione per una visualizzazione side-by-side di SQL Server Profiler e [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ce50c-199">Arrange the application windows so that you can view SQL Server Profiler and [!INCLUDE[ssBIDevStudio](../../../includes/ssbidevstudio-md.md)] side by side.</span></span>  
  
4.  <span data-ttu-id="ce50c-200">Distribuire la soluzione, e al termine, arrestare la traccia.</span><span class="sxs-lookup"><span data-stu-id="ce50c-200">Deploy the solution, and when it completes, stop the trace.</span></span>  
  
     <span data-ttu-id="ce50c-201">Nella finestra di traccia vengono visualizzati gli eventi correlati all'applicazione **Microsoft SQL Server Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-201">In the trace window, you should see events from the application **Microsoft SQL Server Analysis Services**.</span></span> <span data-ttu-id="ce50c-202">Vengono anche visualizzate le istruzioni `SELECT` che consentono di recuperare dati da un database sull'istanza del server che ospita la replica secondaria, a prova che la connessione è stata effettuata attraverso il listener alla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-202">You should see `SELECT` statements that retrieve data from a database on the server instance that hosts the secondary replica, proving that the connection was made via the listener to the secondary replica.</span></span>  
  
#### <a name="step-2-perform-a-planned-failover-to-test-the-configuration"></a><span data-ttu-id="ce50c-203">Passaggio 2: Eseguire un failover pianificato per testare la configurazione</span><span class="sxs-lookup"><span data-stu-id="ce50c-203">Step 2: Perform a planned failover to test the configuration</span></span>  
  
1.  <span data-ttu-id="ce50c-204">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] verificare le repliche primaria e secondaria per assicurarsi che entrambe siano configurate per la modalità commit sincrono e siano attualmente sincronizzate.</span><span class="sxs-lookup"><span data-stu-id="ce50c-204">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] check the primary and secondary replicas to ensure that both are configured for synchronous-commit mode and are currently synchronized.</span></span>  
  
     <span data-ttu-id="ce50c-205">I passaggi seguenti presumono che una replica secondaria sia configurata per il commit sincrono.</span><span class="sxs-lookup"><span data-stu-id="ce50c-205">The following steps assume a secondary replica is configured for synchronous commit.</span></span>  
  
     <span data-ttu-id="ce50c-206">Per verificare la sincronizzazione, aprire una connessione a ogni istanza che ospita le repliche primaria e secondaria, espandere la cartella Database e assicurarsi che al nome del database sia stato aggiunto **(Sincronizzato)** e **(Sincronizzazione in corso)** in ogni replica.</span><span class="sxs-lookup"><span data-stu-id="ce50c-206">To verify synchronization, open a connection to each instance that hosts the primary and secondary replicas, expand the Databases folder, and ensure that the database has **(Synchronized)** and **(Synchronizing)** appended to its name in each replica.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ce50c-207">Questi passaggi sono descritti in [Eseguire un failover manuale pianificato di un gruppo di disponibilità &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md) che include informazioni aggiuntive e istruzioni alternative per l'esecuzione di questa attività.</span><span class="sxs-lookup"><span data-stu-id="ce50c-207">These steps are taken from [Perform a Planned Manual Failover of an Availability Group &#40;SQL Server&#41;](perform-a-planned-manual-failover-of-an-availability-group-sql-server.md), which provides additional information and alternative instructions for performing this task.</span></span>  
  
2.  <span data-ttu-id="ce50c-208">In SQL Server Profiler avviare le tracce per ogni replica e visualizzarle side-by-side.</span><span class="sxs-lookup"><span data-stu-id="ce50c-208">In SQL Server Profiler, start traces for each replica and view the traces side-by-side.</span></span> <span data-ttu-id="ce50c-209">Nei passaggi seguenti verranno confrontate le tracce per confermare che le query SQL utilizzate per l'elaborazione e le query da Analysis Services vegano passate da una replica all'altra.</span><span class="sxs-lookup"><span data-stu-id="ce50c-209">In the following steps, you will compare traces, confirming that the SQL queries used for processing or querying from Analysis Services switch from one replica to the other.</span></span>  
  
3.  <span data-ttu-id="ce50c-210">Eseguire un comando di elaborazione o query da Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ce50c-210">Execute a processing or query command from within Analysis Services.</span></span> <span data-ttu-id="ce50c-211">Poiché l'origine dati è stata configurata per una connessione di sola lettura, il comando viene eseguito sulla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-211">Because you configured the data source for a read-only connection, you should see the command execute on the secondary replica.</span></span>  
  
4.  <span data-ttu-id="ce50c-212">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]connettersi alla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-212">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], connect to the secondary replica.</span></span>  
  
5.  <span data-ttu-id="ce50c-213">Espandere il nodo **Disponibilità elevata AlwaysOn** e il nodo **Gruppi di disponibilità** .</span><span class="sxs-lookup"><span data-stu-id="ce50c-213">Expand the **AlwaysOn High Availability** node and the **Availability Groups** node.</span></span>  
  
6.  <span data-ttu-id="ce50c-214">Fare clic con il pulsante destro del mouse sul gruppo di disponibilità di cui eseguire il failover e selezionare il comando **Failover** .</span><span class="sxs-lookup"><span data-stu-id="ce50c-214">Right-click the availability group to be failed over, and select the **Failover** command.</span></span> <span data-ttu-id="ce50c-215">Verrà avviata la Creazione guidata Gruppo di disponibilità di failover.</span><span class="sxs-lookup"><span data-stu-id="ce50c-215">This starts the Fail Over Availability Group Wizard.</span></span> <span data-ttu-id="ce50c-216">Utilizzare la procedura guidata per scegliere la replica da impostare come nuova replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-216">Use the wizard to choose which replica to make the new primary replica.</span></span>  
  
7.  <span data-ttu-id="ce50c-217">Confermare che il failover sia stato eseguito correttamente:</span><span class="sxs-lookup"><span data-stu-id="ce50c-217">Confirm that failover succeeded:</span></span>  
  
    -   <span data-ttu-id="ce50c-218">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]espandere i gruppi di disponibilità per visualizzare le designazioni (primaria) e (secondaria).</span><span class="sxs-lookup"><span data-stu-id="ce50c-218">In [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], expand the availability groups to view the (primary) and (secondary) designations.</span></span> <span data-ttu-id="ce50c-219">L'istanza che in precedenza era una replica primaria dovrebbe ora essere una replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-219">The instance that was previously a primary replica should now be a secondary replica.</span></span>  
  
    -   <span data-ttu-id="ce50c-220">Visualizzare il dashboard per determinare se sono stati rilevati problemi di integrità.</span><span class="sxs-lookup"><span data-stu-id="ce50c-220">View the dashboard to determine if any health issues were detected.</span></span> <span data-ttu-id="ce50c-221">Fare clic con il pulsante destro del mouse sul gruppo di disponibilità e scegliere **Mostra dashboard**.</span><span class="sxs-lookup"><span data-stu-id="ce50c-221">Right-click the availability group and select **Show Dashboard**.</span></span>  
  
8.  <span data-ttu-id="ce50c-222">Attendere uno o due minuti che il failover venga completato sul back-end.</span><span class="sxs-lookup"><span data-stu-id="ce50c-222">Wait one or two minutes for the failover to complete on the backend.</span></span>  
  
9. <span data-ttu-id="ce50c-223">Ripetere il comando di query o elaborazione nella soluzione di Analysis Services, quindi osservare le tracce side-by-side in SQL Server Profiler.</span><span class="sxs-lookup"><span data-stu-id="ce50c-223">Repeat the processing or query command in the Analysis Services solution, and then watch the traces side by side in SQL Server Profiler.</span></span> <span data-ttu-id="ce50c-224">Le prove dell'elaborazione saranno visibili sull'altra istanza, che è ora la nuova replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-224">You should see evidence of processing on the other instance, which is now the new secondary replica.</span></span>  
  
##  <a name="what-happens-after-a-failover-occurs"></a><a name="bkmk_whathappens"></a><span data-ttu-id="ce50c-225">Cosa accade dopo un failover</span><span class="sxs-lookup"><span data-stu-id="ce50c-225">What happens after a failover occurs</span></span>  
 <span data-ttu-id="ce50c-226">Durante un failover, una replica secondaria assume il ruolo primario e la replica primaria precedente passa al ruolo secondario.</span><span class="sxs-lookup"><span data-stu-id="ce50c-226">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="ce50c-227">Tutte le connessioni client vengono terminate, la proprietà del listener del gruppo di disponibilità viene trasferita insieme al ruolo di replica primaria alla nuova istanza di SQL Server e l'endpoint del listener viene associato alle porte TCP e agli indirizzi IP virtuali della nuova istanza.</span><span class="sxs-lookup"><span data-stu-id="ce50c-227">All client connections are terminated, ownership of the availability group listener moves with the primary replica role to a new SQL Server instance, and the listener endpoint is bound to the new instance's virtual IP addresses and TCP ports.</span></span> <span data-ttu-id="ce50c-228">Per altre informazioni, vedere [Informazioni sull'accesso alla connessione client per le repliche di disponibilità &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="ce50c-228">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
 <span data-ttu-id="ce50c-229">Se si verifica un failover durante l'elaborazione, si verifica l'errore seguente nel file di log o nella finestra di output di Analysis Services: "Errore OLE DB: errore OLE DB o ODBC: Errore di collegamento durante la comunicazione; 08S01; Provider TPC: Connessione in corso interrotta forzatamente dall'host remoto.</span><span class="sxs-lookup"><span data-stu-id="ce50c-229">If failover occurs during processing, the following error occurs in Analysis Services in the log file or output window: "OLE DB error: OLE DB or ODBC error: Communication link failure; 08S01; TPC Provider: An existing connection was forcibly closed by the remote host.</span></span> <span data-ttu-id="ce50c-230">; 08S01."</span><span class="sxs-lookup"><span data-stu-id="ce50c-230">; 08S01."</span></span>  
  
 <span data-ttu-id="ce50c-231">Questo errore viene risolto se si attende un minuto e si riprova.</span><span class="sxs-lookup"><span data-stu-id="ce50c-231">This error should resolve if you wait a minute and try again.</span></span> <span data-ttu-id="ce50c-232">Se il gruppo di disponibilità viene configurato correttamente per la replica secondaria leggibile, l'elaborazione verrà ripresa sulla nuova replica secondaria al successivo tentativo.</span><span class="sxs-lookup"><span data-stu-id="ce50c-232">If the availability group is configured correctly for readable secondary replica, processing will resume on the new secondary replica when you retry processing.</span></span>  
  
 <span data-ttu-id="ce50c-233">Gli errori persistenti sono con tutta probabilità dovuti a un problema di configurazione.</span><span class="sxs-lookup"><span data-stu-id="ce50c-233">Persistent errors are most likely due to a configuration problem.</span></span> <span data-ttu-id="ce50c-234">È possibile provare a eseguire nuovamente lo script T-SQL per risolvere i problemi con l'elenco di routing, gli URL del routing di sola lettura e la finalità di lettura sulla replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-234">You can try re-running the T-SQL script to resolve problems with the routing list, read-only routing URLs, and read-intent on the secondary replica.</span></span> <span data-ttu-id="ce50c-235">È inoltre necessario verificare che la replica primaria consenta tutte le connessioni.</span><span class="sxs-lookup"><span data-stu-id="ce50c-235">You should also verify that the primary replica allows all connections.</span></span>  
  
##  <a name="writeback-when-using-an-alwayson-availability-database"></a><a name="bkmk_writeback"></a><span data-ttu-id="ce50c-236">Writeback quando si utilizza un database di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="ce50c-236">Writeback when using an AlwaysOn availability database</span></span>  
 <span data-ttu-id="ce50c-237">Il writeback è una funzionalità di Analysis Services che supporta l'analisi di simulazione in Excel.</span><span class="sxs-lookup"><span data-stu-id="ce50c-237">Writeback is an Analysis Services feature that supports What If analysis in Excel.</span></span> <span data-ttu-id="ce50c-238">È comunemente utilizzato per attività di elaborazione budget e previsioni nelle applicazioni personalizzate.</span><span class="sxs-lookup"><span data-stu-id="ce50c-238">It is also commonly used for budgeting and forecasting tasks in custom applications.</span></span>  
  
 <span data-ttu-id="ce50c-239">Il supporto per il writeback richiede una connessione client READWRITE.</span><span class="sxs-lookup"><span data-stu-id="ce50c-239">Support for writeback requires a READWRITE client connection.</span></span> <span data-ttu-id="ce50c-240">In Excel se si prova a eseguire il writeback in una connessione di sola lettura, si verifica l'errore seguente: "Impossibile recuperare i dati dall'origine dati esterna."</span><span class="sxs-lookup"><span data-stu-id="ce50c-240">In Excel, if you attempt to write back on a read-only connection, the following error will occur: "Data could not be retrieved from the external data source."</span></span> <span data-ttu-id="ce50c-241">"Impossibile recuperare i dati dall'origine dati esterna."</span><span class="sxs-lookup"><span data-stu-id="ce50c-241">"Data could not be retrieved from the external data source."</span></span>  
  
 <span data-ttu-id="ce50c-242">Se una connessione è stata configurata per l'accesso continuo a una replica secondaria leggibile, è ora necessario configurare una nuova connessione che utilizzi una connessione READWRITE alla replica primaria.</span><span class="sxs-lookup"><span data-stu-id="ce50c-242">If you configured a connection to always access a readable secondary replica, you must now configure a new connection that uses a READWRITE connection to the primary replica.</span></span>  
  
 <span data-ttu-id="ce50c-243">A tale scopo, creare un'origine dati aggiuntiva in un modello di Analysis Services per supportare la connessione di lettura-scrittura.</span><span class="sxs-lookup"><span data-stu-id="ce50c-243">To do this, create an additional data source in an Analysis Services model to support the read-write connection.</span></span> <span data-ttu-id="ce50c-244">Quando si crea l'origine dati aggiuntiva, usare lo stesso nome di listener e lo stesso database specificati nella connessione di sola lettura, ma anziché modificare **Finalità dell'applicazione**, mantenere l'impostazione predefinita che supporta le connessioni READWRITE.</span><span class="sxs-lookup"><span data-stu-id="ce50c-244">When creating the additional data source, use the same listener name and database that you specified in the read-only connection, but instead of modifying **Application Intent**, keep the default that supports READWRITE connections.</span></span> <span data-ttu-id="ce50c-245">È ora possibile aggiungere le nuove tabelle delle dimensioni e dei fatti alla vista origine dati basate sull'origine dati di lettura-scrittura, quindi abilitare il writeback sulle nuove tabelle.</span><span class="sxs-lookup"><span data-stu-id="ce50c-245">You can now add new fact or dimension tables to your data source view that are based on the read-write data source, and then enable writeback on the new tables.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ce50c-246">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ce50c-246">See Also</span></span>  
 <span data-ttu-id="ce50c-247">[Listener del gruppo di disponibilità, connettività client e failover dell'applicazione &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="ce50c-247">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 <span data-ttu-id="ce50c-248">[Repliche secondarie attive: repliche secondarie leggibili &#40;Gruppi di disponibilità AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="ce50c-248">[Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="ce50c-249">[Criteri AlwaysOn per problemi operativi con Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span><span class="sxs-lookup"><span data-stu-id="ce50c-249">[AlwaysOn Policies for Operational Issues with AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-policies-for-operational-issues-always-on-availability.md) </span></span>  
 <span data-ttu-id="ce50c-250">[Creare un'origine dati &#40;SSAS multidimensionale&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span><span class="sxs-lookup"><span data-stu-id="ce50c-250">[Create a Data Source &#40;SSAS Multidimensional&#41;](https://docs.microsoft.com/analysis-services/multidimensional-models/create-a-data-source-ssas-multidimensional) </span></span>  
 [<span data-ttu-id="ce50c-251">Attivazione writeback della dimensione</span><span class="sxs-lookup"><span data-stu-id="ce50c-251">Enable Dimension Writeback</span></span>](https://docs.microsoft.com/analysis-services/multidimensional-models/bi-wizard-enable-dimension-writeback)  
  
  
