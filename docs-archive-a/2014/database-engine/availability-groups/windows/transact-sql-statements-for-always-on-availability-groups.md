---
title: Panoramica delle istruzioni Transact-SQL per Gruppi di disponibilità AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], Transact-SQL statements
ms.assetid: 184d0a81-2259-4db9-9d0d-01aac0b502c8
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ff25fecf54cfdd1d9c03d1586f0272896542bfa7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724967"
---
# <a name="overview-of-transact-sql-statements-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="5cf97-102">Panoramica delle istruzioni Transact-SQL per i gruppi di disponibilità AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="5cf97-102">Overview of Transact-SQL Statements for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="5cf97-103">In questo argomento si introducono le istruzioni [!INCLUDE[tsql](../../../includes/tsql-md.md)] che supportano la distribuzione di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , nonché la creazione e la gestione di qualsiasi gruppo, replica e database di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="5cf97-103">This topic introduces the [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements that support deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and creating and managing an given availability group, availability replica and availability database.</span></span>  
  
  
##  <a name="create-endpoint"></a><a name="CreateEndpoint"></a><span data-ttu-id="5cf97-104">CREA ENDPOINT</span><span class="sxs-lookup"><span data-stu-id="5cf97-104">CREATE ENDPOINT</span></span>  
 <span data-ttu-id="5cf97-105">[Crea endpoint... PER DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) crea un endpoint del mirroring del database, se non ne esiste alcuno nell'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="5cf97-105">[CREATE ENDPOINT ... FOR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) creates a database mirroring endpoint, if none exists on the server instance.</span></span> <span data-ttu-id="5cf97-106">Per ogni istanza del server in cui si intende distribuire [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] o il mirroring del database è necessario un endpoint di mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="5cf97-106">Every server instance on which you intend to deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring requires a database mirroring endpoint.</span></span>  
  
 <span data-ttu-id="5cf97-107">Eseguire questa istruzione sull'istanza del server nella quale si crea l'endpoint.</span><span class="sxs-lookup"><span data-stu-id="5cf97-107">Execute this statement on the server instance on which you are creating the endpoint.</span></span> <span data-ttu-id="5cf97-108">È possibile creare solo un endpoint del mirroring del database in una determinata istanza del server.</span><span class="sxs-lookup"><span data-stu-id="5cf97-108">You can create only one database mirroring endpoint on a given server instance.</span></span> <span data-ttu-id="5cf97-109">Per altre informazioni, vedere [Endpoint del mirroring del database &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="5cf97-109">For more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span></span>  
  
##  <a name="create-availability-group"></a><a name="CreateAG"></a><span data-ttu-id="5cf97-110">CREA GRUPPO DI DISPONIBILITÀ</span><span class="sxs-lookup"><span data-stu-id="5cf97-110">CREATE AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="5cf97-111">Con[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) è possibile creare un nuovo gruppo di disponibilità e, facoltativamente, un listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="5cf97-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) creates a new availability group and optionally an availability group listener.</span></span> <span data-ttu-id="5cf97-112">È necessario specificare almeno l'istanza del server locale, che diventerà la replica primaria iniziale.</span><span class="sxs-lookup"><span data-stu-id="5cf97-112">Minimally, you must specify your local server instance, which will become the initial primary replica.</span></span> <span data-ttu-id="5cf97-113">È eventualmente possibile specificare anche un massimo di quattro repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="5cf97-113">Optionally, you can also specify up to four secondary replicas.</span></span>  
  
 <span data-ttu-id="5cf97-114">Eseguire CREATE AVAILABILITY GROUP nell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in cui si desidera ospitare la replica primaria iniziale del nuovo gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="5cf97-114">Execute CREATE AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that you want to host the initial primary replica of your new availability group.</span></span> <span data-ttu-id="5cf97-115">Questa istanza del server deve risiedere in un nodo di un cluster WSFC (Windows Server failover cluster). per altre informazioni, vedere [prerequisiti, restrizioni e consigli per Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="5cf97-115">This server instance must reside on a node of a Windows Server Failover Cluster (WSFC) (for more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
##  <a name="alter-availability-group"></a><a name="AlterAG"></a><span data-ttu-id="5cf97-116">ALTER AVAILABILITY GROUP</span><span class="sxs-lookup"><span data-stu-id="5cf97-116">ALTER AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="5cf97-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) supporta la modifica di un gruppo di disponibilità o di un listener del gruppo di disponibilità esistente, nonché l'esecuzione del failover di un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="5cf97-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) supports changing an existing availability group or availability group listener and for failing over an availability group.</span></span>  
  
 <span data-ttu-id="5cf97-118">Eseguire ALTER AVAILABILITY GROUP nell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in cui è ospitata la replica primaria iniziale.</span><span class="sxs-lookup"><span data-stu-id="5cf97-118">Execute ALTER AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the current primary replica.</span></span>  
  
##  <a name="alter-database--set-hadr-"></a><a name="AlterDb"></a><span data-ttu-id="5cf97-119">ALTER DATABASE... IMPOSTA HADR...</span><span class="sxs-lookup"><span data-stu-id="5cf97-119">ALTER DATABASE ... SET HADR ...</span></span>  
 <span data-ttu-id="5cf97-120">Le opzioni della clausola [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) dell'istruzione ALTER DATABASE consentono di creare un join di un database secondario al gruppo di disponibilità del database primario corrispondente, di rimuovere un database unito in join, di sospendere la sincronizzazione dei dati in un database unito in join, nonché di riprendere la sincronizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="5cf97-120">The options of the [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) clause of the ALTER DATABASE statement enables you to join a secondary database to the availability group of the corresponding primary database, remove a joined database, and suspend data synchronization on a joined database, and resume data synchronization.</span></span>  
  
##  <a name="drop-availability-group"></a><a name="DropAG"></a><span data-ttu-id="5cf97-121">ELIMINA GRUPPO DI DISPONIBILITÀ</span><span class="sxs-lookup"><span data-stu-id="5cf97-121">DROP AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="5cf97-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) consente di rimuovere un gruppo di disponibilità specificato e tutte le relative repliche.</span><span class="sxs-lookup"><span data-stu-id="5cf97-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) removes a specified availability group and all of its replicas.</span></span> <span data-ttu-id="5cf97-123">DROP AVAILABILITY GROUP può essere eseguito da qualsiasi nodo [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] nel cluster di failover WSFC.</span><span class="sxs-lookup"><span data-stu-id="5cf97-123">DROP AVAILABILITY GROUP can be run from any [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] node in the WSFC failover cluster.</span></span>  
  
##  <a name="restrictions-on-the-availability-group-transact-sql-statements"></a><a name="Restrictions"></a><span data-ttu-id="5cf97-124">Restrizioni sulle istruzioni Transact-SQL del gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="5cf97-124">Restrictions on the AVAILABILITY GROUP Transact-SQL Statements</span></span>  
 <span data-ttu-id="5cf97-125">Le istruzioni di [!INCLUDE[tsql](../../../includes/tsql-md.md)] CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP e DROP AVAILABILITY GROUP presentano le limitazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5cf97-125">The CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP, and DROP AVAILABILITY GROUP [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements have the following limitations:</span></span>  
  
-   <span data-ttu-id="5cf97-126">Fatta eccezione per DROP AVAILABILITY GROUP, l'esecuzione di queste istruzioni richiede che il servizio HADR sia abilitato nell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5cf97-126">With the exception of DROP AVAILABILITY GROUP, executing these statements requires that the HADR service is enabled on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5cf97-127">Per altre informazioni, vedere [Abilitare e disabilitare la funzionalità Gruppi di disponibilità Always On &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="5cf97-127">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="5cf97-128">Non è possibile eseguire queste istruzioni all'interno di transazioni o batch.</span><span class="sxs-lookup"><span data-stu-id="5cf97-128">These statements cannot be executed within transactions or batches.</span></span>  
  
-   <span data-ttu-id="5cf97-129">Sebbene vengano fatti tentativi di ripulitura in seguito a un errore, queste istruzioni non garantiscono che sia possibile eseguire il rollback di tutte le modifiche in seguito a tale errore.</span><span class="sxs-lookup"><span data-stu-id="5cf97-129">Though they make a best effort to clean up after a failure, these statements do not guarantee that they will roll back all changes on failure.</span></span> <span data-ttu-id="5cf97-130">Tuttavia, i sistemi dovrebbero essere in grado di gestire correttamente, e quindi ignorare, gli errori parziali.</span><span class="sxs-lookup"><span data-stu-id="5cf97-130">However, systems should be able cleanly handle and then ignore partial failures.</span></span>  
  
-   <span data-ttu-id="5cf97-131">Queste istruzioni non supportano espressioni o variabili.</span><span class="sxs-lookup"><span data-stu-id="5cf97-131">These statements do not support expressions or variables.</span></span>  
  
-   <span data-ttu-id="5cf97-132">Se viene eseguita un'istruzione [!INCLUDE[tsql](../../../includes/tsql-md.md)] mentre è in corso un'altra azione o recupero del gruppo di disponibilità, verrà restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="5cf97-132">If a [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement is executed while another availability group action or recovery is in process, the statement returns an error.</span></span> <span data-ttu-id="5cf97-133">Attendere che l'azione o il recupero siano stati completati e ritentare l'istruzione, se necessario.</span><span class="sxs-lookup"><span data-stu-id="5cf97-133">Wait for the action or recovery to complete, and retry the statement, if necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5cf97-134">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5cf97-134">See Also</span></span>  
 [<span data-ttu-id="5cf97-135">Panoramica di Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5cf97-135">Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](overview-of-always-on-availability-groups-sql-server.md)  
  
  
