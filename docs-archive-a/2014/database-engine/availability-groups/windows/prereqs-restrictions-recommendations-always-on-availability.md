---
title: Prerequisiti, restrizioni e consigli per Gruppi di disponibilità AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], server instance
- Availability Groups [SQL Server], deploying
- Availability Groups [SQL Server], WSFC clusters
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], prerequisites and restrictions
- Availability Groups [SQL Server], Failover Cluster Instances
- Availability Groups [SQL Server], databases
- Availability Groups [SQL Server]
ms.assetid: edbab896-42bb-4d17-8d75-e92ca11f7abb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 078f38058c612037a8013f7955349e94d6db610e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724231"
---
# <a name="prerequisites-restrictions-and-recommendations-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="090a9-102">Prerequisiti, restrizioni e consigli per i gruppi di disponibilità AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="090a9-102">Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="090a9-103">In questo argomento si illustrano le considerazioni sulla distribuzione di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], inclusi prerequisiti, restrizioni e indicazioni su computer host, cluster WSCF (Windows Server Failover Clustering), istanze del server e gruppi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-103">This topic describes considerations for deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], including prerequisites, restrictions, and recommendations for host computers, Windows Server Failover Clustering (WSFC) clusters, server instances, and availability groups.</span></span> <span data-ttu-id="090a9-104">Per ognuno di questi componenti sono indicate le eventuali considerazioni sulla sicurezza e le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="090a9-104">For each of these components security considerations and required permissions, if any, are indicated.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="090a9-105">Prima di distribuire [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], si consiglia di leggere tutte le sezioni presenti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="090a9-105">Before you deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], we strongly recommend that you read every section of this topic.</span></span>  
  
 
  
##  <a name="net-hotfixes-that-support-alwayson-availability-groups"></a><a name="DotNetHotfixes"></a><span data-ttu-id="090a9-106">Hotfix di .NET che supportano Gruppi di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="090a9-106">.NET Hotfixes that Support AlwaysOn Availability Groups</span></span>  
 <span data-ttu-id="090a9-107">A seconda dei [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] componenti e delle funzionalità che si utilizzeranno con [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , potrebbe essere necessario installare aggiornamenti rapidi di .NET aggiuntivi identificati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="090a9-107">Depending on the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] components and features you will use with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], you may need to install additional .NET hotfixes identified in the following table.</span></span> <span data-ttu-id="090a9-108">Gli hotfix possono essere installati in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="090a9-108">The hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="090a9-109">Funzionalità dipendente</span><span class="sxs-lookup"><span data-stu-id="090a9-109">Dependent Feature</span></span>|<span data-ttu-id="090a9-110">Hotfix</span><span class="sxs-lookup"><span data-stu-id="090a9-110">Hotfix</span></span>|<span data-ttu-id="090a9-111">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-111">Link</span></span>|  
|------|-----------------------|------------|----------|  
|<span data-ttu-id="090a9-112">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-112">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]|<span data-ttu-id="090a9-113">Hotfix per .NET 3,5 SP1 aggiunge il supporto a SQL client per le funzionalità AlwaysOn di Read-intent, ReadOnly e MultiSubnetFailover.</span><span class="sxs-lookup"><span data-stu-id="090a9-113">Hotfix for .NET 3.5 SP1 adds support to SQL Client for AlwaysOn features of Read-intent, readonly, and multisubnetfailover.</span></span> <span data-ttu-id="090a9-114">L'hotfix deve essere installato in ogni server di report di [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-114">The hotfix needs to be installed on each [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] report server.</span></span>|<span data-ttu-id="090a9-115">KB 2654347: [hotfix per .net 3,5 SP1 per aggiungere supporto per le funzionalità AlwaysOn](https://go.microsoft.com/fwlink/?LinkId=242896)</span><span class="sxs-lookup"><span data-stu-id="090a9-115">KB 2654347: [Hotfix for .NET 3.5 SP1 to add support for AlwaysOn features](https://go.microsoft.com/fwlink/?LinkId=242896)</span></span>|  
  
##  <a name="windows-system-requirements-and-recommendations"></a><a name="SystemReqsForAOAG"></a><span data-ttu-id="090a9-116">Suggerimenti e requisiti di sistema di Windows</span><span class="sxs-lookup"><span data-stu-id="090a9-116">Windows System Requirements and Recommendations</span></span>  
  
  
###  <a name="checklist-requirements-windows-system"></a><a name="SystemRequirements"></a> <span data-ttu-id="090a9-117">Elenco di controllo: requisiti (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-117">Checklist: Requirements (Windows System)</span></span>  
 <span data-ttu-id="090a9-118">Per supportare la funzionalità [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , assicurarsi che ogni computer che fa parte di uno o più gruppi di disponibilità soddisfi i requisiti essenziali seguenti:</span><span class="sxs-lookup"><span data-stu-id="090a9-118">To support the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature, ensure that every computer that is to participate in one or more availability groups meets the following fundamental requirements:</span></span>  
  
||<span data-ttu-id="090a9-119">Requisito</span><span class="sxs-lookup"><span data-stu-id="090a9-119">Requirement</span></span>|<span data-ttu-id="090a9-120">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-120">Link</span></span>|  
|------|-----------------|----------|  
|<span data-ttu-id="090a9-121">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-121">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-122">Assicurarsi che il sistema non sia un controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="090a9-122">Ensure that the system is not a domain controller.</span></span>|<span data-ttu-id="090a9-123">I gruppi di disponibilità non sono supportati nei controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="090a9-123">Availability groups are not supported on domain controllers.</span></span>|  
|<span data-ttu-id="090a9-124">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-124">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-125">Assicurarsi che in ogni computer sia eseguita la versione x86 (non WOW64) o x64 di Windows Server 2008 o successive.</span><span class="sxs-lookup"><span data-stu-id="090a9-125">Ensure that each computer is running either x86 (non-WOW64) or x64 Windows Server 2008 or later versions.</span></span>|<span data-ttu-id="090a9-126">WOW64 (Windows a 32 bit in Windows a 64 bit) non supporta [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-126">WOW64 (Windows 32-bit on Windows 64-bit) does not support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|<span data-ttu-id="090a9-127">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-127">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-128">Assicurarsi che ogni computer sia un nodo in un cluster WSCF (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="090a9-128">Ensure that each computer is a node in a Windows Server Failover Clustering (WSFC) cluster.</span></span>|[<span data-ttu-id="090a9-129">Windows Server Failover Clustering &#40;WSFC&#41; con SQL Server</span><span class="sxs-lookup"><span data-stu-id="090a9-129">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)|  
|<span data-ttu-id="090a9-130">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-130">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-131">Assicurarsi che nel cluster WSFC siano contenuti nodi sufficienti per supportare le configurazioni dei gruppi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-131">Ensure that the WSFC cluster contains sufficient nodes to support your availability group configurations.</span></span>|<span data-ttu-id="090a9-132">Un nodo WSFC può ospitare solo una replica di disponibilità per un gruppo di disponibilità specifico.</span><span class="sxs-lookup"><span data-stu-id="090a9-132">A WSFC node can host only one availability replica for a given availability group.</span></span> <span data-ttu-id="090a9-133">In un nodo WSFC specificato possono essere ospitate repliche di disponibilità per numerosi gruppi di disponibilità da parte di una o più istanze di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-133">On a given WSFC node, one or more instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can host availability replicas for many availability groups.</span></span><br /><br /> <span data-ttu-id="090a9-134">Chiedere agli amministratori del database il numero di nodi WSFC necessario per supportare le repliche di disponibilità dei gruppi di disponibilità pianificati.</span><span class="sxs-lookup"><span data-stu-id="090a9-134">Ask your database administrators how many WSFC nodes are required for to support the availability replicas of the planned availability groups.</span></span><br /><br /> <span data-ttu-id="090a9-135">[Panoramica di Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="090a9-135">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>|  
|<span data-ttu-id="090a9-136">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-136">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-137">Assicurarsi che tutti gli hotfix di Windows applicabili siano stati installati in ogni nodo nel cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-137">Ensure that all applicable Window hotfixes have been installed on every node in the WSFC cluster.</span></span>|<span data-ttu-id="090a9-138">Importante un numero di hotfix è obbligatorio o consigliato per i nodi di un cluster WSFC in cui viene distribuito. \*\* \* \* \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="090a9-138">**\*\* Important \*\*** A number of hotfixes are required or recommended for the nodes of a WSFC cluster on which [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is being deployed.</span></span> <span data-ttu-id="090a9-139">Per altre informazioni, vedere [Hotfix di Windows che supportano i gruppi di disponibilità AlwaysOn (sistema Windows)](#WinHotfixes), più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="090a9-139">For more information, see [Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)](#WinHotfixes), later in this section.</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="090a9-140">Inoltre, assicurarsi che l'ambiente sia configurato correttamente per la connessione a un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-140">Also ensure that your environment is correctly configured for connecting to an availability group.</span></span> <span data-ttu-id="090a9-141">Per ulteriori informazioni, vedere [connettività client AlwaysOn (SQL Server)](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="090a9-141">For more information, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
####  <a name="windows-hotfixes-that-support-alwayson-availability-groups-windows-system"></a><a name="WinHotfixes"></a><span data-ttu-id="090a9-142">Hotfix di Windows che supportano Gruppi di disponibilità AlwaysOn (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-142">Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)</span></span>  
 <span data-ttu-id="090a9-143">A seconda della topologia cluster, è possibile che siano applicabili per il supporto di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] diversi hotfix di Windows Server 2008 Service Pack 2 (SP2) o Windows Server 2008 R2 aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="090a9-143">Depending on your cluster topology, several additional Windows Server 2008 Service Pack 2 (SP2) or Windows Server 2008 R2 hotfixes might be applicable for supporting [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="090a9-144">Nella tabella seguente vengono identificati questi hotfix.</span><span class="sxs-lookup"><span data-stu-id="090a9-144">The following table identifies these hotfixes.</span></span> <span data-ttu-id="090a9-145">Gli hotfix possono essere installati in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="090a9-145">They hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="090a9-146">Si applica a Windows 2008 SP2</span><span class="sxs-lookup"><span data-stu-id="090a9-146">Applies to Windows 2008 SP2</span></span>|<span data-ttu-id="090a9-147">Si applica a Windows 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="090a9-147">Applies to Windows 2008 R2 SP1</span></span>|<span data-ttu-id="090a9-148">Incluso in Windows 2012</span><span class="sxs-lookup"><span data-stu-id="090a9-148">Included in Windows 2012</span></span>|<span data-ttu-id="090a9-149">Per supportare...</span><span class="sxs-lookup"><span data-stu-id="090a9-149">To Support...</span></span>|<span data-ttu-id="090a9-150">Hotfix</span><span class="sxs-lookup"><span data-stu-id="090a9-150">Hotfix</span></span>|<span data-ttu-id="090a9-151">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-151">Link</span></span>|  
|------|---------------------------------|------------------------------------|------------------------------|-----------------|------------|----------|  
|<span data-ttu-id="090a9-152">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-152">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-153">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-153">Yes</span></span>|<span data-ttu-id="090a9-154">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-154">Yes</span></span>|<span data-ttu-id="090a9-155">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-155">Yes</span></span>|<span data-ttu-id="090a9-156">**Configurazione del quorum WSFC ottimale**</span><span class="sxs-lookup"><span data-stu-id="090a9-156">**Configuring optimal WSFC quorum**</span></span>|<span data-ttu-id="090a9-157">In ogni nodo WSFC assicurarsi che sia installato l'hotfix descritto nell'articolo della Knowledge Base 2494036.</span><span class="sxs-lookup"><span data-stu-id="090a9-157">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2494036 is installed.</span></span><br /><br /> <span data-ttu-id="090a9-158">Questo hotfix supporta la configurazione del quorum ottimale con le destinazioni di failover non automatico.</span><span class="sxs-lookup"><span data-stu-id="090a9-158">This hotfix supports configuring optimal quorum with non-automatic failover targets.</span></span> <span data-ttu-id="090a9-159">Questa funzionalità consente di migliorare i cluster multisito permettendo di selezionare a quali nodi è associata la possibilità di votare.</span><span class="sxs-lookup"><span data-stu-id="090a9-159">This functionality improves multi-site clusters by enabling you to select which nodes vote.</span></span>|<span data-ttu-id="090a9-160">KB 2494036: articolo relativo alla  [disponibilità di un hotfix per configurare un nodo del cluster che non presenta voti quorum in Windows Server 2008 e Windows Server 2008 R2](https://support.microsoft.com/kb/2494036)</span><span class="sxs-lookup"><span data-stu-id="090a9-160">KB 2494036:  [A hotfix is available to let you configure a cluster node that does not have quorum votes in Windows Server 2008 and in Windows Server 2008 R2](https://support.microsoft.com/kb/2494036)</span></span><br /><br /> <span data-ttu-id="090a9-161">Per informazioni sui voti del quorum, vedere [Modalità quorum WSFC e configurazione del voto &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="090a9-161">For information about quorum voting, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span></span>|  
|<span data-ttu-id="090a9-162">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-162">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-163">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-163">Yes</span></span>|<span data-ttu-id="090a9-164">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-164">Yes</span></span>|<span data-ttu-id="090a9-165">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-165">Yes</span></span>|<span data-ttu-id="090a9-166">**Utilizzo più efficiente della larghezza di banda della rete**</span><span class="sxs-lookup"><span data-stu-id="090a9-166">**More efficient use of network bandwidth**</span></span>|<span data-ttu-id="090a9-167">In ogni nodo WSFC assicurarsi che sia installato l'hotfix descritto nell'articolo della Knowledge Base 2616514.</span><span class="sxs-lookup"><span data-stu-id="090a9-167">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2616514 is installed.</span></span><br /><br /> <span data-ttu-id="090a9-168">Senza questo hotfix, il servizio Cluster invia notifiche del Registro di sistema non necessarie tra nodi del cluster.</span><span class="sxs-lookup"><span data-stu-id="090a9-168">Without this hotfix, the Cluster service sends unnecessary registry notifications among cluster nodes.</span></span> <span data-ttu-id="090a9-169">Questo comportamento limita la larghezza di banda della rete, causando seri problemi ad [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-169">This behavior limits network bandwidth, which is a serious issue for [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)].</span></span>|<span data-ttu-id="090a9-170">KB 2616514: articolo della Knowledge Base relativo al  [servizio cluster tramite cui si inviano notifiche di modifiche alla chiave del Registro di sistema non necessarie tra nodi del cluster in Windows Server 2008 o in Windows Server 2008 R2](https://support.microsoft.com/kb/2616514)</span><span class="sxs-lookup"><span data-stu-id="090a9-170">KB 2616514:  [Cluster service sends unnecessary registry key change notifications among cluster nodes in Windows Server 2008 or in Windows Server 2008 R2](https://support.microsoft.com/kb/2616514)</span></span>|  
|<span data-ttu-id="090a9-171">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-171">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="090a9-172">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-172">Yes</span></span>|<span data-ttu-id="090a9-173">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="090a9-173">Not applicable</span></span>|<span data-ttu-id="090a9-174">**Test di archiviazione VPD su dischi non disponibili per tutti i nodi WSFC**</span><span class="sxs-lookup"><span data-stu-id="090a9-174">**VPD storage testing on disks that are not available to all WSFC nodes**</span></span>|<span data-ttu-id="090a9-175">Se in un nodo WSFC è in esecuzione Windows Server 2008 R2 Service Pack 1 (SP1) e si verifica un errore del test di archiviazione Convalida VPD (Vital Product Data) dispositivi SCSI dopo un'esecuzione non corretta nei dischi che sono online e non disponibili a tutti i nodi nel cluster WSFC, installare l'hotfix descritto nell'articolo della Knowledge Base 2531907.</span><span class="sxs-lookup"><span data-stu-id="090a9-175">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1) and the Validate SCSI Device Vital Product Data (VPD) storage test fails after incorrectly running on disks that are online and not available to all nodes in the WSFC cluster, install the hotfix described in Knowledge Base article 2531907.</span></span><br /><br /> <span data-ttu-id="090a9-176">Con questo hotfix è possibile evitare avvisi o errori non corretti nel report di convalida quando i dischi sono online.</span><span class="sxs-lookup"><span data-stu-id="090a9-176">This hotfix eliminates incorrect warnings or errors in the validation report when disks are online.</span></span>|<span data-ttu-id="090a9-177">KB 2531907: articolo relativo all'[errore del test Convalida VPD (Vital Product Data) dispositivi SCSI dopo l'installazione di Windows Server 2008 R2 SP1](https://support.microsoft.com/kb/2531907)</span><span class="sxs-lookup"><span data-stu-id="090a9-177">KB 2531907:  [Validate SCSI Device Vital Product Data (VPD) test fails after you install Windows Server 2008 R2 SP1](https://support.microsoft.com/kb/2531907)</span></span>|  
|<span data-ttu-id="090a9-178">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-178">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="090a9-179">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-179">Yes</span></span>|<span data-ttu-id="090a9-180">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-180">Yes</span></span>|<span data-ttu-id="090a9-181">**Failover più veloce nelle repliche locali**</span><span class="sxs-lookup"><span data-stu-id="090a9-181">**Faster failover to local replicas**</span></span>|<span data-ttu-id="090a9-182">Se in un nodo WSFC è in esecuzione Windows Server 2008 R2 Service Pack 1 (SP1), assicurarsi che sia installato l'hotfix descritto nell'articolo della Knowledge Base 2687741.</span><span class="sxs-lookup"><span data-stu-id="090a9-182">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1), ensure that the hotfix described in Knowledge Base article 2687741 is installed.</span></span><br /><br /> <span data-ttu-id="090a9-183">Con questo hotfix è possibile migliorare le prestazioni del failover di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] nelle repliche locali.</span><span class="sxs-lookup"><span data-stu-id="090a9-183">This hotfix improves the performance of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] failover to local replicas.</span></span>|<span data-ttu-id="090a9-184">KB 2687741: articolo relativo alla  [disponibilità di un hotfix che consente di migliorare le prestazioni della funzionalità "Gruppo di disponibilità AlwaysOn" in SQL Server 2012 per Windows Server 2008 R2](https://support.microsoft.com/KB/2687741)</span><span class="sxs-lookup"><span data-stu-id="090a9-184">KB 2687741:  [A hotfix that improves the performance of the "AlwaysOn Availability Group" feature in SQL Server 2012 is available for Windows Server 2008 R2](https://support.microsoft.com/KB/2687741)</span></span>|  
|<span data-ttu-id="090a9-185">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-185">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-186">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-186">Yes</span></span>|<span data-ttu-id="090a9-187">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-187">Yes</span></span>|<span data-ttu-id="090a9-188">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-188">Yes</span></span>|<span data-ttu-id="090a9-189">**Archiviazione asimmetrica per le istanze del cluster di failover (failover)**</span><span class="sxs-lookup"><span data-stu-id="090a9-189">**Asymmetric storage-for Failover Cluster Instances (FCIs)**</span></span>|<span data-ttu-id="090a9-190">Se una qualsiasi istanza del cluster di failover sarà abilitata per [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], installare l'hotfix 976097 di Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="090a9-190">If any Failover Cluster Instance (FCI) will be enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], install the Windows Server 2008 hotfix 976097.</span></span><br /><br /> <span data-ttu-id="090a9-191">Questo hotfix consente allo snap-in Gestione cluster di failover di Microsoft Management Console (MMC) di supportare i dischi condivisi di archiviazione asimmetrica disponibili solo in alcuni dei nodi WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-191">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="090a9-192">KB 976097: articolo relativo all'[hotfix per aggiungere supporto per archiviazioni asimmetriche allo snap-in MMC di Gestione del cluster di failover per un cluster di failover in cui è in esecuzione Windows Server 2008 o Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="090a9-192">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span><br /><br /> [<span data-ttu-id="090a9-193">Pagina relativa alla guida all'architettura di AlwaysOn in cui viene illustrata la compilazione di una soluzione a disponibilità elevata e di ripristino di emergenza utilizzando istanze del cluster di failover e gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-193">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)|  
|<span data-ttu-id="090a9-194">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-194">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-195">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-195">Yes</span></span>|<span data-ttu-id="090a9-196">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-196">Yes</span></span>|<span data-ttu-id="090a9-197">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="090a9-197">Not applicable</span></span>|<span data-ttu-id="090a9-198">**IPsec (Internet Protocol Security)**</span><span class="sxs-lookup"><span data-stu-id="090a9-198">**Internet Protocol Security (IPsec)**</span></span>|<span data-ttu-id="090a9-199">Se nell'ambiente si utilizzano connessioni IPSec, è possibile che si verifichi un ritardo prolungato (circa due o tre minuti) quando viene ristabilita la connessione IPSec da un computer client a un nome di rete virtuale (in questo contesto, per connettersi al listener del gruppo di disponibilità).</span><span class="sxs-lookup"><span data-stu-id="090a9-199">If your environment uses IPsec connections, you could experience a long time delay (about two or three minutes) when a client computer reestablishes the IPsec connection to a virtual network name (in this context, to connect to the availability group listener).</span></span> <span data-ttu-id="090a9-200">Se si utilizzano le connessioni IPSec, è consigliabile rivedere gli scenari specifici descritti in dettaglio nell'articolo della Knowledge Base 980915:</span><span class="sxs-lookup"><span data-stu-id="090a9-200">If you use IPsec connections, we recommend that you review the specific scenarios detailed in Knowledge Base article (KB 980915).</span></span>|<span data-ttu-id="090a9-201">KB 980915: articolo della Knowledge Base relativo al  [ritardo prolungato quando si riconnette una connessione IPSec da un computer in cui è in esecuzione Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7 o Windows Server 2008 R2](https://support.microsoft.com/kb/980915)</span><span class="sxs-lookup"><span data-stu-id="090a9-201">KB 980915:  [A long time delay occurs when you reconnect an IPSec connection from a computer that is running Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7, or Windows Server 2008 R2](https://support.microsoft.com/kb/980915)</span></span>|  
|<span data-ttu-id="090a9-202">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-202">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-203">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-203">Yes</span></span>|<span data-ttu-id="090a9-204">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-204">Yes</span></span>|<span data-ttu-id="090a9-205">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-205">Yes</span></span>|<span data-ttu-id="090a9-206">**IPv6**</span><span class="sxs-lookup"><span data-stu-id="090a9-206">**IPv6**</span></span>|<span data-ttu-id="090a9-207">Se si utilizza IPv6, è consigliabile rivedere gli scenari specifici descritti in dettaglio nell'articolo della Knowledge Base 2578103 o 2578113, a seconda del sistema operativo Windows Server:</span><span class="sxs-lookup"><span data-stu-id="090a9-207">If you use IPv6, we recommend that you review the specific scenarios detailed in Knowledge Base article 2578103 or 2578113, depending on your Windows Server operating system.</span></span><br /><br /> <span data-ttu-id="090a9-208">Se nella topologia Windows Server si utilizza IP versione 6 (IPv6), per il servizio cluster WSFC sono necessari circa 30 secondi per l'esecuzione del failover dell'indirizzo IP IPv6.</span><span class="sxs-lookup"><span data-stu-id="090a9-208">If your Windows Server topology uses IP version 6 (IPv6), the WSFC Cluster service requires about 30 seconds to fail over the IPv6 IP address.</span></span> <span data-ttu-id="090a9-209">Di conseguenza i client attenderanno circa 30 secondi per la riconnessione all'indirizzo IP IPv6.</span><span class="sxs-lookup"><span data-stu-id="090a9-209">This causes clients to wait for about 30 seconds to reconnect to the IPv6 IP address.</span></span>|<span data-ttu-id="090a9-210">KB 2578103 (Windows Server 2008): articolo relativo al [servizio cluster che richiede circa 30 secondi per eseguire il failover degli indirizzi IP IPv6 in Windows Server 2008](https://support.microsoft.com/kb/2578103)</span><span class="sxs-lookup"><span data-stu-id="090a9-210">KB 2578103 (Windows Server 2008):  [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008](https://support.microsoft.com/kb/2578103)</span></span><br /><br /> <span data-ttu-id="090a9-211">KB 2578113 (Windows Server 2008 R2): articolo relativo a **Windows Server 2008 R2 sul ** [servizio cluster che richiede circa 30 secondi per eseguire il failover degli indirizzi IP IPv6 in Windows Server 2008 R2](https://support.microsoft.com/kb/2578113)</span><span class="sxs-lookup"><span data-stu-id="090a9-211">KB 2578113 (Windows Server 2008 R2):  **Windows Server 2008 R2:** [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008 R2](https://support.microsoft.com/kb/2578113)</span></span>|  
|<span data-ttu-id="090a9-212">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-212">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-213">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-213">Yes</span></span>|<span data-ttu-id="090a9-214">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-214">Yes</span></span>|<span data-ttu-id="090a9-215">Sì</span><span class="sxs-lookup"><span data-stu-id="090a9-215">Yes</span></span>|<span data-ttu-id="090a9-216">**Nessun router tra il cluster e il server applicazioni**</span><span class="sxs-lookup"><span data-stu-id="090a9-216">**No Router Between cluster and application server**</span></span>|<span data-ttu-id="090a9-217">Se non esiste alcun router tra il cluster di failover e il server applicazioni, il failover del servizio cluster sulle risorse correlate alla rete avviene lentamente.</span><span class="sxs-lookup"><span data-stu-id="090a9-217">If no router exists between the failover cluster and the application server, the Cluster service fails over network-related resources slowly.</span></span> <span data-ttu-id="090a9-218">In questo modo, le connessioni client vengono ritardate dopo il failover di un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-218">This delays client reconnections after an availability group fails over.</span></span> <span data-ttu-id="090a9-219">In assenza di un router, è consigliabile rivedere gli scenari specifici descritti in dettaglio nell'articolo della Knowledge Base 2582281 e installare l'hotfix, se applicabile per l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="090a9-219">In the absence of a router, we recommend that you review the specific scenarios detailed in Knowledge Base article 2582281 and install the hotfix, if applicable to your environment.</span></span>|<span data-ttu-id="090a9-220">KB 2582281: articolo della Knowledge Base relativo al  [failover lento se non esiste alcun router tra il cluster e un server applicazioni](https://support.microsoft.com/kb/2582281)</span><span class="sxs-lookup"><span data-stu-id="090a9-220">KB 2582281:  [Slow failover operation if no router exists between the cluster and an application server](https://support.microsoft.com/kb/2582281)</span></span>|  
  
###  <a name="recommendations-for-computers-that-host-availability-replicas-windows-system"></a><a name="ComputerRecommendations"></a> <span data-ttu-id="090a9-221">Indicazioni per computer in cui sono ospitate repliche di disponibilità (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-221">Recommendations for Computers That Host Availability Replicas (Windows System)</span></span>  
  
-   <span data-ttu-id="090a9-222">**Sistemi simili:**  Per un determinato gruppo di disponibilità, tutte le repliche di disponibilità devono essere in sistemi simili, in grado di gestire carichi di lavoro identici.</span><span class="sxs-lookup"><span data-stu-id="090a9-222">**Comparable systems:**  For a given availability group, all the availability replicas should run on comparable systems that can handle identical workloads.</span></span>  
  
-   <span data-ttu-id="090a9-223">**Schede di rete dedicate:**  Per ottenere prestazioni ottimali, usare una scheda di rete dedicata (scheda di interfaccia di rete) per [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-223">**Dedicated network adapters:**  For best performance, use a dedicated network adapter (network interface card) for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>  
  
-   <span data-ttu-id="090a9-224">**Spazio su disco sufficiente:**  Ogni computer in cui un'istanza del server ospita una replica di disponibilità deve disporre di spazio su disco sufficiente per tutti i database nel gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-224">**Sufficient disk space:**  Every computer on which a server instance hosts an availability replica must possess sufficient disk space for all the databases in the availability group.</span></span> <span data-ttu-id="090a9-225">Tenere presente che, con l'aumentare delle dimensioni dei database primari, i database secondari corrispondenti aumentano di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="090a9-225">Keep in mind that as primary databases grow, their corresponding secondary databases grow the same amount.</span></span>  
  
###  <a name="permissions-windows-system"></a><a name="PermissionsWindows"></a> <span data-ttu-id="090a9-226">Autorizzazioni (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-226">Permissions (Windows System)</span></span>  
 <span data-ttu-id="090a9-227">Per amministrare un cluster WSFC, l'utente deve essere un amministratore di sistema in ogni nodo del cluster.</span><span class="sxs-lookup"><span data-stu-id="090a9-227">To administer a WSFC cluster, the user must be a system administrator on every cluster node.</span></span>  
  
 <span data-ttu-id="090a9-228">Per altre informazioni sull'account per l'amministrazione del cluster, vedere [Appendice A: Requisiti di un cluster di failover](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx).</span><span class="sxs-lookup"><span data-stu-id="090a9-228">For more information about the account for administering the cluster, see [Appendix A: Failover Cluster Requirements](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx).</span></span>  
  
###  <a name="related-tasks-windows-system"></a><a name="RelatedTasksWindows"></a> <span data-ttu-id="090a9-229">Attività correlate (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-229">Related Tasks (Windows System)</span></span>  
  
|<span data-ttu-id="090a9-230">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-230">Task</span></span>|<span data-ttu-id="090a9-231">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-231">Link</span></span>|  
|----------|----------|  
|<span data-ttu-id="090a9-232">Impostare il valore HostRecordTTL.</span><span class="sxs-lookup"><span data-stu-id="090a9-232">Set the HostRecordTTL value.</span></span>|[<span data-ttu-id="090a9-233">Modificare HostRecordTTL (tramite Windows PowerShell)</span><span class="sxs-lookup"><span data-stu-id="090a9-233">Change the HostRecordTTL (Using Windows PowerShell)</span></span>](#ChangeHostRecordTTLps)|  
  
####  <a name="change-the-hostrecordttl-using-windows-powershell"></a><a name="ChangeHostRecordTTLps"></a> <span data-ttu-id="090a9-234">Modificare HostRecordTTL (tramite Windows PowerShell)</span><span class="sxs-lookup"><span data-stu-id="090a9-234">Change the HostRecordTTL (Using Windows PowerShell)</span></span>  
  
1.  <span data-ttu-id="090a9-235">Aprire la finestra di PowerShell con **Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="090a9-235">Open PowerShell window via **Run as Administrator**.</span></span>  
  
2.  <span data-ttu-id="090a9-236">Importare il modulo FailoverClusters.</span><span class="sxs-lookup"><span data-stu-id="090a9-236">Import the FailoverClusters module.</span></span>  
  
3.  <span data-ttu-id="090a9-237">Utilizzare li cmdlet `Get-ClusterResource` per cercare la risorsa nome di rete, quindi utilizzare il cmdlet `Set-ClusterParameter` per impostare il valore `HostRecordTTL`, come segue:</span><span class="sxs-lookup"><span data-stu-id="090a9-237">Use the `Get-ClusterResource` cmdlet to find the Network Name resource, then use `Set-ClusterParameter` cmdlet to set the `HostRecordTTL` value, as follows:</span></span>  
  
     <span data-ttu-id="090a9-238">Get-ClusterResource " *\<NetworkResourceName>* " | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span><span class="sxs-lookup"><span data-stu-id="090a9-238">Get-ClusterResource "*\<NetworkResourceName>*" | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span></span>  
  
     <span data-ttu-id="090a9-239">Nell'esempio di PowerShell seguente impostare HostRecordTTL su 300 secondi per una risorsa nome di rete denominata "`SQL Network Name (SQL35)`".</span><span class="sxs-lookup"><span data-stu-id="090a9-239">The following PowerShell example sets the HostRecordTTL to 300 seconds for a Network Name resource named "`SQL Network Name (SQL35)`".</span></span>  
  
    ```powershell
    Import-Module FailoverClusters  
  
    $nameResource = "SQL Network Name (SQL35)"  
    Get-ClusterResource $nameResource | Set-ClusterParameter ClusterParameter HostRecordTTL 300  
    ```  
  
    > [!TIP]  
    >  <span data-ttu-id="090a9-240">Ogni volta che viene aperta una nuova finestra di PowerShell, è necessario importare il modulo `FailoverClusters`.</span><span class="sxs-lookup"><span data-stu-id="090a9-240">Every time you open a new PowerShell window, you need to import the `FailoverClusters` module.</span></span>  
  
##### <a name="related-content-powershell"></a><span data-ttu-id="090a9-241">Contenuto correlato (PowerShell)</span><span class="sxs-lookup"><span data-stu-id="090a9-241">Related Content (PowerShell)</span></span>  
  
-   <span data-ttu-id="090a9-242">[Clustering and High-Availability](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (Failover Clustering and Network Load Balancing Team Blog) (Clustering e disponibilità elevata - Blog del team di clustering di failover e bilanciamento del carico di rete)</span><span class="sxs-lookup"><span data-stu-id="090a9-242">[Clustering and High-Availability](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (Failover Clustering and Network Load Balancing Team Blog)</span></span>  
  
-   <span data-ttu-id="090a9-243">[Introduzione a Windows PowerShell in un cluster di failover](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="090a9-243">[Getting Started with Windows PowerShell on a Failover Cluster](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="090a9-244">Comandi di risorse cluster e cmdlet di Windows PowerShell equivalenti</span><span class="sxs-lookup"><span data-stu-id="090a9-244">Cluster resource commands and equivalent Windows PowerShell cmdlets</span></span>](https://msdn.microsoft.com/library/ee619744.aspx#BKMK_resource)  
  
###  <a name="related-content-windows-system"></a><a name="RelatedContentWS"></a> <span data-ttu-id="090a9-245">Contenuto correlato (sistema Windows)</span><span class="sxs-lookup"><span data-stu-id="090a9-245">Related Content (Windows System)</span></span>  
  
-   <span data-ttu-id="090a9-246">[Pagina relativa alla configurazione delle impostazioni DNS in un cluster di failover multisito](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="090a9-246">[Configure DNS settings in a Multi-Site Failover Cluster](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="090a9-247">Post sulla registrazione DNS con la risorsa del nome di rete</span><span class="sxs-lookup"><span data-stu-id="090a9-247">DNS Registration with Network Name Resource</span></span>](https://techcommunity.microsoft.com/t5/failover-clustering/dns-registration-with-the-network-name-resource/ba-p/371482)  
  
-   [<span data-ttu-id="090a9-248">Clustering di failover multisito di Windows 2008 R2</span><span class="sxs-lookup"><span data-stu-id="090a9-248">Windows 2008 R2 Failover Multi-Site Clustering</span></span>](https://kiruba4u.blogspot.com/2012/03/failover-clustering-in-windows-server.html)  
  
##  <a name="sql-server-instance-prerequisites-and-restrictions"></a><a name="ServerInstance"></a> <span data-ttu-id="090a9-249">Prerequisiti e restrizioni dell'istanza di SQL Server</span><span class="sxs-lookup"><span data-stu-id="090a9-249">SQL Server Instance Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="090a9-250">Per ogni gruppo di disponibilità è richiesto un set di partner di failover, noti come *repliche di disponibilità*, ospitati da istanze di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-250">Each availability group requires a set of failover partners, known as *availability replicas*, which are hosted by instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="090a9-251">Un'istanza del server specifica può essere un'*istanza autonoma* o un'*istanza del cluster di failover* (FCI) di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-251">A given server instance can be a *stand-alone instance* or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]*failover cluster instance* (FCI).</span></span>  
  
 
  
###  <a name="checklist-prerequisites-server-instance"></a><a name="PrerequisitesSI"></a> <span data-ttu-id="090a9-252">Elenco di controllo: prerequisiti (istanza del server)</span><span class="sxs-lookup"><span data-stu-id="090a9-252">Checklist: Prerequisites (Server Instance)</span></span>  
  
||<span data-ttu-id="090a9-253">Prerequisito</span><span class="sxs-lookup"><span data-stu-id="090a9-253">Prerequisite</span></span>|<span data-ttu-id="090a9-254">Collegamenti</span><span class="sxs-lookup"><span data-stu-id="090a9-254">Links</span></span>|  
|-|------------------|-----------|  
|<span data-ttu-id="090a9-255">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-255">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-256">Il computer host deve essere un nodo WSFC (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="090a9-256">The host computer must be a Windows Server Failover Clustering (WSFC) node.</span></span> <span data-ttu-id="090a9-257">Le istanze di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in cui sono ospitate le repliche di disponibilità di uno specifico gruppo di disponibilità devono risiedere in nodi diversi di un singolo cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-257">The instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that host availability replicas for a given availability group must reside on separate nodes of a single WSFC cluster.</span></span> <span data-ttu-id="090a9-258">L'unica eccezione è che quando viene eseguita la migrazione a un altro cluster WSFC, un gruppo di disponibilità può risiedere temporaneamente in due cluster.</span><span class="sxs-lookup"><span data-stu-id="090a9-258">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>|[<span data-ttu-id="090a9-259">Windows Server Failover Clustering &#40;WSFC&#41; con SQL Server</span><span class="sxs-lookup"><span data-stu-id="090a9-259">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)<br /><br /> [<span data-ttu-id="090a9-260">Clustering di failover e Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-260">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)|  
|<span data-ttu-id="090a9-261">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-261">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-262">Se si desidera che in un gruppo di disponibilità venga utilizzato Kerberos:</span><span class="sxs-lookup"><span data-stu-id="090a9-262">If you want an availability group to work with Kerberos:</span></span><br /><br /> <span data-ttu-id="090a9-263">In tutte le istanze del server in cui è ospitata una replica di disponibilità per il gruppo di disponibilità deve essere utilizzato lo stesso account del servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="090a9-263">All server instances that host an availability replica for the availability group must use the same SQL Server service account.</span></span><br /><br /> <span data-ttu-id="090a9-264">L'amministratore di dominio deve registrare manualmente un nome dell'entità servizio (SPN, Service Principal Name) con Active Directory nell'account del servizio SQL Server per il nome di rete virtuale del listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-264">The domain administrator needs to manually register a Service Principal Name (SPN) with Active Directory on the SQL Server service account for the virtual network name (VNN) of the availability group listener.</span></span> <span data-ttu-id="090a9-265">Se il nome SPN è registrato in un account diverso da quello del servizio SQL Server, l'autenticazione non verrà completata.</span><span class="sxs-lookup"><span data-stu-id="090a9-265">If the SPN is registered on an account other than the SQL Server service account, authentication will fail.</span></span><br /><br /> <span data-ttu-id="090a9-266">**\*\* Importante \*\*** Se si modifica l'account del servizio SQL Server, l'amministratore di dominio dovrà registrare di nuovo manualmente il nome SPN.</span><span class="sxs-lookup"><span data-stu-id="090a9-266">**\*\* Important \*\*** If you change the SQL Server service account, the domain administrator will need to manually re-register the SPN.</span></span>|[<span data-ttu-id="090a9-267">Registrazione di un nome dell'entità servizio per le connessioni Kerberos</span><span class="sxs-lookup"><span data-stu-id="090a9-267">Register a Service Principal Name for Kerberos Connections</span></span>](../../configure-windows/register-a-service-principal-name-for-kerberos-connections.md)<br /><br /> <span data-ttu-id="090a9-268">**Breve spiegazione:**</span><span class="sxs-lookup"><span data-stu-id="090a9-268">**Brief explanation:**</span></span><br /><br /> <span data-ttu-id="090a9-269">A Kerberos e ai nomi SPN viene applicata l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="090a9-269">Kerberos and SPNs enforce mutual authentication.</span></span> <span data-ttu-id="090a9-270">Tramite il nome SPN viene eseguito il mapping all'account di Windows mediante il quale vengono avviati i servizi SQL Server.</span><span class="sxs-lookup"><span data-stu-id="090a9-270">The SPN maps to the Windows account that starts the SQL Server services.</span></span> <span data-ttu-id="090a9-271">Se la registrazione del nome SPN non viene eseguita correttamente o presenta un errore, tramite il livello di sicurezza di Windows non è possibile determinare l'account associato al nome SPN e l'autenticazione Kerberos non può essere utilizzata.</span><span class="sxs-lookup"><span data-stu-id="090a9-271">If the SPN is not registered correctly or if it fails, the Windows security layer cannot determine the account associated with the SPN, and Kerberos authentication cannot be used.</span></span><br /><br /> <span data-ttu-id="090a9-272">Nota: NTLM non presenta questo requisito.</span><span class="sxs-lookup"><span data-stu-id="090a9-272">Note: NTLM does not have this requirement.</span></span>|  
|<span data-ttu-id="090a9-273">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-273">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-274">Se si intende utilizzare un'istanza del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per ospitare una replica di disponibilità, assicurarsi di aver compreso le restrizioni su questo tipo di istanza e che vengano soddisfatti i relativi requisiti.</span><span class="sxs-lookup"><span data-stu-id="090a9-274">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="090a9-275">[Prerequisiti e requisiti sull'utilizzo di un'istanza del cluster di failover di SQL Server per ospitare una replica di disponibilità](#FciArLimitations) , più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="090a9-275">[Prerequisites and Requirements on Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (later in this topic)</span></span>|  
|<span data-ttu-id="090a9-276">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-276">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-277">In ogni istanza del server deve essere in esecuzione la versione Enterprise Edition di [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-277">Each server instance must be running the Enterprise Edition of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>|[<span data-ttu-id="090a9-278">Funzionalità supportate dalle edizioni di SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="090a9-278">Features Supported by the Editions of SQL Server 2014</span></span>](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)|  
|<span data-ttu-id="090a9-279">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-279">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-280">In tutte le istanze del server in cui sono ospitate repliche di disponibilità per un gruppo di disponibilità devono essere utilizzate le stesse regole di confronto di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-280">All the server instances that host availability replicas for an availability group must use the same [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] collation.</span></span>|[<span data-ttu-id="090a9-281">Impostazione o modifica di regole di confronto del server</span><span class="sxs-lookup"><span data-stu-id="090a9-281">Set or Change the Server Collation</span></span>](../../../relational-databases/collations/set-or-change-the-server-collation.md)|  
|<span data-ttu-id="090a9-282">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-282">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-283">Abilitare la funzionalità [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in ogni istanza del server in cui sarà ospitata una replica di disponibilità per qualsiasi gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-283">Enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that will host an availability replica for any availability group.</span></span> <span data-ttu-id="090a9-284">In un computer specificato è possibile abilitare tante istanze del server per [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] quante sono quelle supportate dall'installazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-284">On a given computer, you can enable as many server instances for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] as your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation supports.</span></span>|[<span data-ttu-id="090a9-285">Abilitare e disabilitare la funzionalità Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-285">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)<br /><br /> <span data-ttu-id="090a9-286">Importante se si elimina e si ricrea un cluster WSFC, è necessario disabilitare e riabilitare la funzionalità in ogni istanza del server abilitata per nel \*\* \* cluster WSFC originale. \* \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="090a9-286">**\*\* Important \*\*** If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that was enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on the original WSFC cluster.</span></span>|  
|<span data-ttu-id="090a9-287">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-287">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-288">Per ogni istanza del server è necessario un endpoint del mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="090a9-288">Each server instance requires a database mirroring endpoint.</span></span> <span data-ttu-id="090a9-289">Si noti che questo endpoint è condiviso da tutte le repliche di disponibilità, dai partner di mirroring di database, nonché dai server di controllo nell'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="090a9-289">Note that this endpoint is shared by all the availability replicas and database mirroring partners and witnesses on the server instance.</span></span><br /><br /> <span data-ttu-id="090a9-290">Se un'istanza del server selezionata come host per una replica di disponibilità è in esecuzione in un account utente di dominio e non dispone ancora di un endpoint del mirroring del database, tramite la [Creazione guidata Gruppo di disponibilità](use-the-availability-group-wizard-sql-server-management-studio.md) (o [Procedura guidata Aggiungi replica a gruppo di disponibilità](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) è possibile creare l'endpoint e concedere l'autorizzazione CONNECT all'account del servizio dell'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="090a9-290">If a server instance that you select to host an availability replica is running under a domain user account and does not yet have a database mirroring endpoint, the [New Availability Group Wizard](use-the-availability-group-wizard-sql-server-management-studio.md) (or [Add Replica to Availability Group Wizard](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) can create the endpoint and grant CONNECT permission to the server instance service account.</span></span> <span data-ttu-id="090a9-291">Se, tuttavia, il servizio [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] viene eseguito come account predefinito, ad esempio Sistema locale, Servizio locale o Servizio di rete, oppure come account non di dominio, è necessario usare certificati per l'autenticazione dell'endpoint e non sarà possibile creare un endpoint del mirroring del database nell'istanza del server tramite la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="090a9-291">However, if the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running as a built-in account, such as Local System, Local Service, or Network Service, or a nondomain account, you must use certificates for endpoint authentication, and the wizard will be unable to create a database mirroring endpoint on the server instance.</span></span> <span data-ttu-id="090a9-292">In tal caso, è consigliabile creare manualmente gli endpoint del mirroring del database prima di avviare la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="090a9-292">In this case, we recommend that you create the database mirroring endpoints manually before you launch the wizard.</span></span><br /><br /> <span data-ttu-id="090a9-293">**\*\* Nota di sicurezza \*\*** La sicurezza del trasporto per [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] corrisponde a quella per il mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="090a9-293">**\*\* Security Note \*\*** Transport security for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is the same as for database mirroring.</span></span>|[<span data-ttu-id="090a9-294">Endpoint del mirroring del database &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-294">The Database Mirroring Endpoint &#40;SQL Server&#41;</span></span>](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md)<br /><br /> [<span data-ttu-id="090a9-295">Sicurezza del trasporto per il mirroring del database e Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-295">Transport Security for Database Mirroring and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md)|  
|<span data-ttu-id="090a9-296">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-296">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-297">Se tutti i database in cui è utilizzato FILESTREAM saranno aggiunti a un gruppo di disponibilità, verificare che FILESTREAM sia abilitato in ogni istanza del server in cui sarà ospitata una replica di disponibilità per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-297">If any databases that use FILESTREAM will be added to an availability group, ensure that FILESTREAM is enabled on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="090a9-298">Abilitare e configurare FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="090a9-298">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="090a9-299">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-299">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-300">Se tutti i database indipendenti saranno aggiunti a un gruppo di disponibilità, verificare che l'opzione del server `contained database authentication` sia impostata su `1` in ogni istanza del server in cui sarà ospitata una replica di disponibilità per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-300">If any contained databases will be added to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="090a9-301">Opzione di configurazione del server contained database authentication</span><span class="sxs-lookup"><span data-stu-id="090a9-301">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="090a9-302">Opzioni di configurazione del server &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-302">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
###  <a name="thread-usage-by-availability-groups"></a><a name="ThreadUsage"></a> <span data-ttu-id="090a9-303">Utilizzo del thread da parte dei gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-303">Thread Usage by Availability Groups</span></span>  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="090a9-304">devono essere soddisfatti i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="090a9-304">has the following requirements for worker threads:</span></span>  
  
-   <span data-ttu-id="090a9-305">In caso di istanza inattiva di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] non viene utilizzato alcun thread.</span><span class="sxs-lookup"><span data-stu-id="090a9-305">On an idle instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] uses 0 threads.</span></span>  
  
-   <span data-ttu-id="090a9-306">Il numero massimo di thread utilizzato dai gruppi di disponibilità è dato dall'impostazione configurata per il numero massimo di thread del server ("`max worker threads`") meno 40.</span><span class="sxs-lookup"><span data-stu-id="090a9-306">The maximum number of threads used by availability groups is the configured setting for the maximum number of server threads ('`max worker threads`') minus 40.</span></span>  
  
-   <span data-ttu-id="090a9-307">Nelle repliche di disponibilità ospitate in un'istanza del server specificata viene condiviso un singolo pool di thread.</span><span class="sxs-lookup"><span data-stu-id="090a9-307">The availability replicas hosted on a given server instance share a single thread pool.</span></span>  
  
     <span data-ttu-id="090a9-308">I thread vengono condivisi su richiesta, come riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="090a9-308">Threads are shared on an on-demand basis, as follows:</span></span>  
  
    -   <span data-ttu-id="090a9-309">In genere, sono presenti 3-10 thread condivisi, tuttavia questo numero può aumentare a seconda del carico di lavoro della replica primaria.</span><span class="sxs-lookup"><span data-stu-id="090a9-309">Typically, there are 3-10 shared threads, but this number can increase depending on the primary replica workload.</span></span>  
  
    -   <span data-ttu-id="090a9-310">Se un thread specificato è inattivo per un certo periodo di tempo, viene rilasciato nuovamente nel pool di thread generale di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-310">If a given thread is idle for a while, it is released back into the general [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] thread pool.</span></span> <span data-ttu-id="090a9-311">In genere, un thread inattivo viene rilasciato dopo ~15 secondi di inattività.</span><span class="sxs-lookup"><span data-stu-id="090a9-311">Normally, an inactive thread is released after ~15 seconds of inactivity.</span></span> <span data-ttu-id="090a9-312">Tuttavia, a seconda dell'ultima attività, un thread inattivo potrebbe essere mantenuto più a lungo.</span><span class="sxs-lookup"><span data-stu-id="090a9-312">However, depending on the last activity, an idle thread might be retained longer.</span></span>  
  
-   <span data-ttu-id="090a9-313">Inoltre, nei gruppi di disponibilità vengono utilizzati thread non condivisi, come riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="090a9-313">In addition, availability groups use unshared threads, as follows:</span></span>  
  
    -   <span data-ttu-id="090a9-314">In ogni replica primaria viene utilizzato 1 thread di acquisizione del log per ogni database primario.</span><span class="sxs-lookup"><span data-stu-id="090a9-314">Each primary replica uses 1 Log Capture thread for each primary database.</span></span> <span data-ttu-id="090a9-315">Inoltre, viene utilizzato 1 thread di invio del log per ogni database secondario.</span><span class="sxs-lookup"><span data-stu-id="090a9-315">In addition, it uses 1 Log Send thread for each secondary database.</span></span> <span data-ttu-id="090a9-316">I thread di invio del log vengono rilasciati dopo ~15 secondi di inattività.</span><span class="sxs-lookup"><span data-stu-id="090a9-316">Log send threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="090a9-317">In ogni replica secondaria viene utilizzato 1 thread della fase di rollforward per ogni database secondario.</span><span class="sxs-lookup"><span data-stu-id="090a9-317">Each secondary replica uses 1 redo thread for each secondary database.</span></span> <span data-ttu-id="090a9-318">I thread della fase di rollforward vengono rilasciati dopo ~15 secondi di inattività.</span><span class="sxs-lookup"><span data-stu-id="090a9-318">Redo threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="090a9-319">Tramite un backup di una replica secondaria un thread viene mantenuto nella replica primaria per la durata dell'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="090a9-319">A backup on a secondary replica holds a thread on the primary replica for the duration of the backup operation.</span></span>  
  
 <span data-ttu-id="090a9-320">Per altre informazioni, vedere la pagina relativa alla [serie di informazioni su HADRON riguardanti l'uso del pool di lavoro per database abilitati HADRON in AlwaysOn](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx) (blog del Servizio Supporto Tecnico Clienti per gli ingegneri di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="090a9-320">For more information, see [AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx) (a CSS [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Engineers Blog).</span></span>  
  
###  <a name="permissions-server-instance"></a><a name="PermissionsSI"></a> <span data-ttu-id="090a9-321">Autorizzazioni (istanza del server)</span><span class="sxs-lookup"><span data-stu-id="090a9-321">Permissions (Server Instance)</span></span>  
  
|<span data-ttu-id="090a9-322">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-322">Task</span></span>|<span data-ttu-id="090a9-323">Autorizzazioni necessarie</span><span class="sxs-lookup"><span data-stu-id="090a9-323">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="090a9-324">Creazione dell'endpoint del mirroring del database</span><span class="sxs-lookup"><span data-stu-id="090a9-324">Creating the database mirroring endpoint</span></span>|<span data-ttu-id="090a9-325">È richiesta l'autorizzazione CREATE ENDPOINT o l'appartenenza al ruolo predefinito del server **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="090a9-325">Requires CREATE ENDPOINT permission, or membership in the **sysadmin** fixed server role.</span></span>  <span data-ttu-id="090a9-326">È richiesta inoltre l'autorizzazione CONTROL ON ENDPOINT.</span><span class="sxs-lookup"><span data-stu-id="090a9-326">Also requires CONTROL ON ENDPOINT permission.</span></span> <span data-ttu-id="090a9-327">Per altre informazioni, vedere [GRANT - autorizzazioni per endpoint &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="090a9-327">For more information, see [GRANT Endpoint Permissions &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql).</span></span>|  
|<span data-ttu-id="090a9-328">Abilitazione di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="090a9-328">Enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span></span>|<span data-ttu-id="090a9-329">È richiesta l'appartenenza al gruppo degli **amministratori** nel computer locale, nonché il controllo totale nel cluster WSCF.</span><span class="sxs-lookup"><span data-stu-id="090a9-329">Requires membership in the **Administrator** group on the local computer and full control on the WSFC cluster.</span></span>|  
  
###  <a name="related-tasks-server-instance"></a><a name="RelatedTasksSI"></a> <span data-ttu-id="090a9-330">Attività correlate (istanza del server)</span><span class="sxs-lookup"><span data-stu-id="090a9-330">Related Tasks (Server Instance)</span></span>  
  
|<span data-ttu-id="090a9-331">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-331">Task</span></span>|<span data-ttu-id="090a9-332">Argomento</span><span class="sxs-lookup"><span data-stu-id="090a9-332">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="090a9-333">Determinazione della presenza di un endpoint del mirroring del database</span><span class="sxs-lookup"><span data-stu-id="090a9-333">Determining whether database mirroring endpoint exists</span></span>|[<span data-ttu-id="090a9-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql)|  
|<span data-ttu-id="090a9-335">Creazione dell'endpoint del mirroring del database (se non ancora disponibile)</span><span class="sxs-lookup"><span data-stu-id="090a9-335">Creating the database mirroring endpoint (if it does not yet exist)</span></span>|[<span data-ttu-id="090a9-336">Creare un endpoint del mirroring del database per l'autenticazione Windows &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-336">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)<br /><br /> [<span data-ttu-id="090a9-337">Utilizzare certificati per un endpoint del mirroring del database &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-337">Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)<br /><br /> [<span data-ttu-id="090a9-338">Creazione di un endpoint del mirroring del database per Gruppi di disponibilità AlwaysOn &#40;SQL Server PowerShell&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-338">Create a Database Mirroring Endpoint for AlwaysOn Availability Groups &#40;SQL Server PowerShell&#41;</span></span>](database-mirroring-always-on-availability-groups-powershell.md)|  
|<span data-ttu-id="090a9-339">Abilitazione di Gruppi di disponibilità AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="090a9-339">Enabling AlwaysOn Availability Groups</span></span>|[<span data-ttu-id="090a9-340">Abilitare e disabilitare la funzionalità Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-340">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)|  
  
###  <a name="related-content-server-instance"></a><a name="RelatedContentSI"></a> <span data-ttu-id="090a9-341">Contenuto correlato (istanza del server)</span><span class="sxs-lookup"><span data-stu-id="090a9-341">Related Content (Server Instance)</span></span>  
  
-   [<span data-ttu-id="090a9-342">Serie di informazioni su AlwaysON - HADRON: Utilizzo del pool di lavoro per database abilitati HADRON</span><span class="sxs-lookup"><span data-stu-id="090a9-342">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
##  <a name="network-connectivity-recommendations"></a><a name="NetworkConnect"></a> <span data-ttu-id="090a9-343">Consigli sulla connettività di rete</span><span class="sxs-lookup"><span data-stu-id="090a9-343">Network Connectivity Recommendations</span></span>  
 <span data-ttu-id="090a9-344">Si consiglia di utilizzare gli stessi collegamenti di rete per le comunicazioni tra membri del cluster WSFC e le comunicazioni tra repliche di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-344">We strongly recommend that you use the same network links for communications between WSFC cluster members and communications between availability replicas.</span></span>  <span data-ttu-id="090a9-345">L'utilizzo di collegamenti di rete separati può provocare comportamenti imprevisti in caso di errore di alcuni collegamenti (anche in modo intermittente).</span><span class="sxs-lookup"><span data-stu-id="090a9-345">Using separate network links can cause unexpected behaviors if some of links fail (even intermittently).</span></span>  
  
 <span data-ttu-id="090a9-346">Ad esempio, affinché un gruppo di disponibilità supporti il failover automatico, lo stato della replica secondaria che è partner di failover automatico deve essere SYNCHRONIZED.</span><span class="sxs-lookup"><span data-stu-id="090a9-346">For example, for an availability group to support automatic failover, the secondary replica that is the automatic-failover partner must be in the SYNCHRONIZED state.</span></span> <span data-ttu-id="090a9-347">In caso di errore di collegamento di rete a questa replica secondaria (anche in modo intermittente), lo stato della replica diventa UNSYNCHRONIZED e non sarà possibile cominciare la risincronizzazione fino a quando non viene ripristinato il collegamento.</span><span class="sxs-lookup"><span data-stu-id="090a9-347">If the network link to this secondary replica fails (even intermittently), the replica enters the UNSYNCHRONIZED state and cannot begin to resynchronize until the link is restored.</span></span> <span data-ttu-id="090a9-348">Se per il cluster WSFC è richiesto un failover automatico mentre la replica secondaria non è sincronizzata, il failover automatico non si verificherà.</span><span class="sxs-lookup"><span data-stu-id="090a9-348">If the WSFC cluster requests an automatic failover while the secondary replica is unsynchronized, automatic failover will not occur.</span></span>  
  
##  <a name="client-connectivity-support"></a><a name="ClientConnSupport"></a> <span data-ttu-id="090a9-349">Supporto della connettività client</span><span class="sxs-lookup"><span data-stu-id="090a9-349">Client Connectivity Support</span></span>  
 <span data-ttu-id="090a9-350">Per informazioni sul [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] supporto per la connettività client, vedere [connettività client AlwaysOn (SQL Server)](always-on-client-connectivity-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="090a9-350">For information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] support for client connectivity, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
##  <a name="prerequisites-and-restrictions-for-using-a-sql-server-failover-cluster-instance-fci-to-host-an-availability-replica"></a><a name="FciArLimitations"></a> <span data-ttu-id="090a9-351">Prerequisiti e restrizioni per l'utilizzo di un'istanza del cluster di failover di SQL Server per ospitare una replica di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-351">Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica</span></span>  
 
  
###  <a name="restrictions-fcis"></a><a name="RestrictionsFCI"></a> <span data-ttu-id="090a9-352">Restrizioni (istanze del cluster di failover)</span><span class="sxs-lookup"><span data-stu-id="090a9-352">Restrictions (FCIs)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="090a9-353">A partire da [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], le istanze del cluster di failover AlwaysOn supportano i volumi condivisi cluster sia in [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] sia in [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-353">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], AlwaysOn Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="090a9-354">Per ulteriori informazioni sui volumi condivisi cluster, vedere [Informazioni sui volumi condivisi del cluster in un cluster di failover](https://technet.microsoft.com/library/dd759255.aspx).</span><span class="sxs-lookup"><span data-stu-id="090a9-354">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
-   <span data-ttu-id="090a9-355">**I nodi del cluster di un'istanza del cluster di failover possono ospitare solo una replica per un gruppo di disponibilità specificato:**  se si aggiunge una replica di disponibilità in un'istanza del cluster di failover, i nodi del cluster WSFC che sono i possibili proprietari dell'istanza del cluster di failover non possono ospitare un'altra replica per lo stesso gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-355">**The cluster nodes of an FCI can host only one replica for a given availability group:**  If you add an availability replica on an FCI, the WSFC cluster nodes that are possible FCI owners cannot host another replica for the same availability group.</span></span>  
  
     <span data-ttu-id="090a9-356">Inoltre, tutte le altre repliche devono essere ospitate da un'istanza di SQL Server 2012 che risiede in un nodo WSFC diverso nello stesso cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-356">Furthermore, every other replica must be hosted by an instance of SQL Server 2012 that resides on a different WSFC node in the same WSFC cluster.</span></span> <span data-ttu-id="090a9-357">L'unica eccezione è che quando viene eseguita la migrazione a un altro cluster WSFC, un gruppo di disponibilità può risiedere temporaneamente in due cluster.</span><span class="sxs-lookup"><span data-stu-id="090a9-357">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
-   <span data-ttu-id="090a9-358">**Le istanze del cluster di failover non supportano il failover automatico da parte di gruppi di disponibilità:**  le istanze del cluster di failover non supportano il failover automatico da gruppi di disponibilità, quindi le repliche di disponibilità ospitate da un'istanza del cluster di failover possono essere configurate solo per il failover manuale.</span><span class="sxs-lookup"><span data-stu-id="090a9-358">**FCIs do not support automatic failover by availability groups:**  FCIs do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can be configured for manual failover only.</span></span>  
  
-   <span data-ttu-id="090a9-359">**Modifica del nome di rete di un'istanza del cluster di failover:**  se è necessario modificare il nome di rete di un'istanza del cluster di failover che ospita una replica di disponibilità, è necessario rimuovere la replica dal relativo gruppo di disponibilità e riaggiungerla successivamente a questo gruppo.</span><span class="sxs-lookup"><span data-stu-id="090a9-359">**Changing FCI network name:**  If you need to change the network name of an FCI that hosts an availability replica, you will need to remove the replica from its availability group and then add the replica back into the availability group.</span></span> <span data-ttu-id="090a9-360">Non è possibile rimuovere la replica primaria, pertanto se si rinomina un'istanza del cluster di failover in cui è ospitata la replica primaria, è consigliabile eseguire il failover in una replica secondaria e successivamente rimuovere e poi riaggiungere la prima replica primaria.</span><span class="sxs-lookup"><span data-stu-id="090a9-360">You cannot remove the primary replica, so if you are renaming an FCI that is hosting the primary replica, you should fail over to a secondary replica and then remove the former primary replica and add it back.</span></span> <span data-ttu-id="090a9-361">Si noti che la ridenominazione di un'istanza del cluster di failover può comportare la modifica dell'URL del relativo endpoint del mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="090a9-361">Note that renaming an FCI might alter the URL of its database mirroring endpoint.</span></span> <span data-ttu-id="090a9-362">Quando si aggiunge la replica assicurarsi di specificare l'URL dell'endpoint corrente.</span><span class="sxs-lookup"><span data-stu-id="090a9-362">When you add the replica ensure that you specify the current endpoint URL.</span></span>  
  
###  <a name="checklist-prerequisites-fcis"></a><a name="PrerequisitesFCI"></a> <span data-ttu-id="090a9-363">Elenco di controllo: prerequisiti (istanze del cluster di failover)</span><span class="sxs-lookup"><span data-stu-id="090a9-363">Checklist: Prerequisites (FCIs)</span></span>  
  
||<span data-ttu-id="090a9-364">Prerequisito</span><span class="sxs-lookup"><span data-stu-id="090a9-364">Prerequisite</span></span>|<span data-ttu-id="090a9-365">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-365">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="090a9-366">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-366">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-367">Prima di utilizzare un'istanza del cluster di failover per ospitare una replica di disponibilità, assicurarsi che l'amministratore di sistema abbia installato l'hotfix per Windows Server 2008 descritto nell'articolo della Knowledge Base KB 976097.</span><span class="sxs-lookup"><span data-stu-id="090a9-367">Before you use an FCI to host an availability replica, ensure that your system administrator has installed the Windows Server 2008 hotfix described in Knowledge Base article KB 976097.</span></span> <span data-ttu-id="090a9-368">Questo hotfix consente allo snap-in Gestione cluster di failover di Microsoft Management Console (MMC) di supportare i dischi condivisi di archiviazione asimmetrica disponibili solo in alcuni dei nodi WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-368">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="090a9-369">KB 976097: articolo relativo all'[hotfix per aggiungere supporto per archiviazioni asimmetriche allo snap-in MMC di Gestione del cluster di failover per un cluster di failover in cui è in esecuzione Windows Server 2008 o Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="090a9-369">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span>|  
|<span data-ttu-id="090a9-370">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-370">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-371">Assicurarsi che in ogni istanza del cluster di failover di SQL Server sia disponibile l'archiviazione condivisa necessaria in base all'installazione dell'istanza del cluster di failover di SQL Server standard.</span><span class="sxs-lookup"><span data-stu-id="090a9-371">Ensure that each SQL Server failover cluster instance (FCI) possesses the required shared storage as per standard SQL Server failover cluster instance installation.</span></span>||  
  
###  <a name="related-tasks-fcis"></a><a name="RelatedTasksFCIs"></a> <span data-ttu-id="090a9-372">Attività correlate (istanze del cluster di failover)</span><span class="sxs-lookup"><span data-stu-id="090a9-372">Related Tasks (FCIs)</span></span>  
  
|<span data-ttu-id="090a9-373">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-373">Task</span></span>|<span data-ttu-id="090a9-374">Argomento</span><span class="sxs-lookup"><span data-stu-id="090a9-374">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="090a9-375">Installazione di un cluster di failover di SQL Server</span><span class="sxs-lookup"><span data-stu-id="090a9-375">Installing a SQL Server Failover Cluster</span></span>|[<span data-ttu-id="090a9-376">Creare un nuovo cluster di failover di SQL Server &#40;programma di installazione&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-376">Create a New SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="090a9-377">Aggiornamento sul posto del cluster di failover di SQL Server esistente</span><span class="sxs-lookup"><span data-stu-id="090a9-377">In-place upgrade of your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="090a9-378">Eseguire l'aggiornamento di un'istanza del cluster di failover di SQL Server &#40;installazione&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-378">Upgrade a SQL Server Failover Cluster Instance &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/windows/upgrade-a-sql-server-failover-cluster-instance-setup.md)|  
|<span data-ttu-id="090a9-379">Gestione del cluster di failover di SQL Server esistente</span><span class="sxs-lookup"><span data-stu-id="090a9-379">Maintaining your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="090a9-380">Aggiungere o rimuovere nodi in un cluster di failover di SQL Server &#40;programma di installazione&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-380">Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)|  
  
###  <a name="related-content-fcis"></a><a name="RelatedContentFCIs"></a> <span data-ttu-id="090a9-381">Contenuto correlato (istanze del cluster di failover)</span><span class="sxs-lookup"><span data-stu-id="090a9-381">Related Content (FCIs)</span></span>  
  
-   [<span data-ttu-id="090a9-382">Clustering di failover e Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-382">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)  
  
-   [<span data-ttu-id="090a9-383">Pagina relativa alla guida all'architettura di AlwaysOn in cui viene illustrata la compilazione di una soluzione a disponibilità elevata e di ripristino di emergenza utilizzando istanze del cluster di failover e gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-383">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)  
  
##  <a name="availability-group-prerequisites-and-restrictions"></a><a name="PrerequisitesForAGs"></a> <span data-ttu-id="090a9-384">Prerequisiti e restrizioni dei gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-384">Availability Group Prerequisites and Restrictions</span></span>  

  
###  <a name="restrictions-availability-groups"></a><a name="RestrictionsAG"></a> <span data-ttu-id="090a9-385">Restrizioni (gruppi di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-385">Restrictions (Availability Groups)</span></span>  
  
-   <span data-ttu-id="090a9-386">**Le repliche di disponibilità devono essere ospitate da nodi diversi di un cluster WSFC:**  per un gruppo di disponibilità specificato, le repliche di disponibilità devono essere ospitate da istanze del server in esecuzione in nodi diversi dello stesso cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-386">**Availability replicas must be hosted by different nodes of one WSFC cluster:**  For a given availability group, availability replicas must be hosted by server instances running on different nodes of the same WSFC cluster.</span></span> <span data-ttu-id="090a9-387">L'unica eccezione è che quando viene eseguita la migrazione a un altro cluster WSFC, un gruppo di disponibilità può risiedere temporaneamente in due cluster.</span><span class="sxs-lookup"><span data-stu-id="090a9-387">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="090a9-388">In ogni macchina virtuale presente nello stesso computer fisico può essere ospitata una replica di disponibilità per lo stesso gruppo di disponibilità, in quanto ogni macchina virtuale costituisce un computer distinto.</span><span class="sxs-lookup"><span data-stu-id="090a9-388">Virtual machines on the same physical computer can each host an availability replica for the same availability group because each virtual machine acts as a separate computer.</span></span>  
  
-   <span data-ttu-id="090a9-389">**Nome univoco del gruppo di disponibilità:**  ogni nome di gruppo di disponibilità deve essere univoco nel cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-389">**Unique availability group name:**  Each availability group name must be unique on the WSFC cluster.</span></span> <span data-ttu-id="090a9-390">La lunghezza massima consentita per il nome del gruppo di disponibilità è 128 caratteri.</span><span class="sxs-lookup"><span data-stu-id="090a9-390">The maximum length for an availability group name is 128 characters.</span></span>  
  
-   <span data-ttu-id="090a9-391">**Repliche di disponibilità:**  Ogni gruppo di disponibilità supporta una replica primaria e fino a otto repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="090a9-391">**Availability replicas:**  Each availability group supports one primary replica and up to eight secondary replicas.</span></span> <span data-ttu-id="090a9-392">È possibile eseguire tutte le repliche in modalità con commit asincrono oppure fino a un massimo di tre in modalità con commit sincrono (una replica primaria con due repliche secondarie sincrone).</span><span class="sxs-lookup"><span data-stu-id="090a9-392">All of the replicas can run under asynchronous-commit mode, or up to three of them can run under synchronous-commit mode (one primary replica with two synchronous secondary replicas).</span></span>  
  
-   <span data-ttu-id="090a9-393">**Numero massimo di gruppi di disponibilità e database di disponibilità per computer:** il numero effettivo di database e gruppi di disponibilità che è possibile creare in un computer (macchina virtuale o computer fisico) dipende dall'hardware e dal carico di lavoro, tuttavia non esiste un limite imposto.</span><span class="sxs-lookup"><span data-stu-id="090a9-393">**Maximum number of availability groups and availability databases per computer:** The actual number of databases and availability groups you can put on a computer (VM or physical) depends on the hardware and workload, but there is no enforced limit.</span></span> <span data-ttu-id="090a9-394">Microsoft ha eseguito test estensivi con 10 gruppi di disponibilità e 100 database per computer fisico.</span><span class="sxs-lookup"><span data-stu-id="090a9-394">Microsoft has extensively tested with 10 AGs and 100 DBs per physical machine.</span></span> <span data-ttu-id="090a9-395">I segnali di sistemi di overload possono includere, a titolo esemplificativo, l'esaurimento del thread di lavoro, tempi di risposta lenti per visualizzazioni di sistema AlwaysOn e DMV e/o dump del sistema dispatcher bloccati.</span><span class="sxs-lookup"><span data-stu-id="090a9-395">Signs of overloaded systems can include, but are not limited to, worker thread exhaustion, slow response times for AlwaysOn system views and DMVs, and/or stalled dispatcher system dumps.</span></span> <span data-ttu-id="090a9-396">Assicurarsi di testare completamente l'ambiente con un carico di lavoro simile a quello di produzione per assicurare che possa gestire capacità di carico di lavoro di picco all'interno del contratto sul livello di servizio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="090a9-396">Please make sure to thoroughly test your environment with a production-like workload to ensure it can handle peak workload capacity within your application SLAs.</span></span> <span data-ttu-id="090a9-397">Per i contratti sul livello di servizio occorre considerare il carico in condizioni di errore e i tempi di risposta previsti.</span><span class="sxs-lookup"><span data-stu-id="090a9-397">When considering SLAs be sure to consider load under failure conditions as well as expected response times.</span></span>  
  
-   <span data-ttu-id="090a9-398">**Non usare il Gestione cluster di failover per modificare i gruppi di disponibilità:**</span><span class="sxs-lookup"><span data-stu-id="090a9-398">**Do not use the Failover Cluster Manager to manipulate availability groups:**</span></span>  
  
     <span data-ttu-id="090a9-399">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="090a9-399">For example:</span></span>  
  
    -   <span data-ttu-id="090a9-400">Non modificare le proprietà del gruppo di disponibilità, ad esempio i possibili proprietari.</span><span class="sxs-lookup"><span data-stu-id="090a9-400">Do not change any availability group properties, such as the possible owners.</span></span>  
  
    -   <span data-ttu-id="090a9-401">Non utilizzare Gestione cluster di failover per eseguire il failover dei gruppi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-401">Do not use the Failover Cluster Manager to fail over availability groups.</span></span> <span data-ttu-id="090a9-402">È necessario utilizzare [!INCLUDE[tsql](../../../includes/tsql-md.md)] o [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-402">You must use [!INCLUDE[tsql](../../../includes/tsql-md.md)] or [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
  
###  <a name="prerequisites-availability-groups"></a><a name="RequirementsAG"></a> <span data-ttu-id="090a9-403">Prerequisiti (gruppi di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-403">Prerequisites (Availability Groups)</span></span>  
 <span data-ttu-id="090a9-404">Quando si crea o riconfigura una configurazione del gruppo di disponibilità, assicurarsi che si soddisfino i requisiti seguenti.</span><span class="sxs-lookup"><span data-stu-id="090a9-404">When creating or reconfiguring an availability group configuration, ensure that you adhere to the following requirements.</span></span>  
  
||<span data-ttu-id="090a9-405">Prerequisito</span><span class="sxs-lookup"><span data-stu-id="090a9-405">Prerequisite</span></span>|<span data-ttu-id="090a9-406">Descrizione</span><span class="sxs-lookup"><span data-stu-id="090a9-406">Description</span></span>|  
|-|------------------|-----------------|  
|<span data-ttu-id="090a9-407">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-407">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-408">Se si intende utilizzare un'istanza del cluster di failover di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per ospitare una replica di disponibilità, assicurarsi di aver compreso le restrizioni su questo tipo di istanza e che vengano soddisfatti i relativi requisiti.</span><span class="sxs-lookup"><span data-stu-id="090a9-408">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="090a9-409">[Prerequisiti e restrizioni per l'uso di un'istanza del cluster di failover di SQL Server per ospitare una replica di disponibilità](#FciArLimitations) , precedentemente in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="090a9-409">[Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (earlier in this topic)</span></span>|  
  
###  <a name="security-availability-groups"></a><a name="SecurityAG"></a> <span data-ttu-id="090a9-410">Sicurezza (gruppi di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-410">Security (Availability Groups)</span></span>  
  
-   <span data-ttu-id="090a9-411">La sicurezza viene ereditata dal cluster WSCF (Windows Server Failover Clustering).</span><span class="sxs-lookup"><span data-stu-id="090a9-411">Security is inherited from the Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="090a9-412">WSFC fornisce due livelli di sicurezza utente con granularità di API del cluster WSFC intere:</span><span class="sxs-lookup"><span data-stu-id="090a9-412">WSFC provides two levels of user security at granularity of entire WSFC cluster APIs:</span></span>  
  
    -   <span data-ttu-id="090a9-413">Accesso di sola lettura</span><span class="sxs-lookup"><span data-stu-id="090a9-413">Read-only access</span></span>  
  
    -   <span data-ttu-id="090a9-414">Controllo completo</span><span class="sxs-lookup"><span data-stu-id="090a9-414">Full control</span></span>  
  
         [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="090a9-415">necessita di un controllo completo. Se si abilita [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] viene fornito a quest'ultima il controllo completo del cluster WSFC, tramite il SID del servizio.</span><span class="sxs-lookup"><span data-stu-id="090a9-415">needs full control, and enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] gives it full control of the WSFC cluster (through Service SID).</span></span>  
  
         <span data-ttu-id="090a9-416">Non è possibile aggiungere o rimuovere direttamente la sicurezza per un'istanza del server in Gestione cluster di failover di WSFC.</span><span class="sxs-lookup"><span data-stu-id="090a9-416">You cannot directly add or remove security for a server instance in the WSFC Failover Cluster Manager.</span></span> <span data-ttu-id="090a9-417">Per gestire sessioni di sicurezza di WSFC, utilizzare Gestione configurazione [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] o l'equivalente WMI da [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="090a9-417">To manage WSFC security sessions, use the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager or the WMI equivalent from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="090a9-418">Ogni istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] deve disporre delle autorizzazioni per l'accesso al Registro di sistema, al cluster e così via.</span><span class="sxs-lookup"><span data-stu-id="090a9-418">Each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] must have permissions to access the registry, cluster, and soforth.</span></span>  
  
-   <span data-ttu-id="090a9-419">È consigliabile utilizzare la crittografia per le connessioni tra istanze del server in cui si ospitano repliche di disponibilità di [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="090a9-419">We recommend that you use encryption for connections between server instances that host [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] availability replicas.</span></span>  
  
#### <a name="permissions-availability-groups"></a><span data-ttu-id="090a9-420">Autorizzazioni (gruppi di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-420">Permissions (Availability Groups)</span></span>  
  
|<span data-ttu-id="090a9-421">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-421">Task</span></span>|<span data-ttu-id="090a9-422">Autorizzazioni necessarie</span><span class="sxs-lookup"><span data-stu-id="090a9-422">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="090a9-423">Creazione di un gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-423">Creating an availability group</span></span>|<span data-ttu-id="090a9-424">Sono necessarie l'appartenenza al ruolo predefinito del server **sysadmin** e l'autorizzazione server CREATE AVAILABILITY GROUP oppure l'autorizzazione ALTER ANY AVAILABILITY GROUP o CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="090a9-424">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="090a9-425">Modifica di un gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-425">Altering an  availability group</span></span>|<span data-ttu-id="090a9-426">È necessaria l'autorizzazione ALTER AVAILABILITY GROUP nel gruppo di disponibilità, l'autorizzazione CONTROL AVAILABILITY GROUP, l'autorizzazione ALTER ANY AVAILABILITY GROUP o l'autorizzazione CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="090a9-426">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span><br /><br /> <span data-ttu-id="090a9-427">Inoltre, per la creazione di un join di un database a un gruppo di disponibilità è richiesta l'appartenenza al ruolo predefinito del database **db_owner** .</span><span class="sxs-lookup"><span data-stu-id="090a9-427">In addition, joining a database to an availability group requires membership in the **db_owner** fixed database role.</span></span>|  
|<span data-ttu-id="090a9-428">Rimozione/eliminazione di un gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-428">Dropping/deleting an availability group</span></span>|<span data-ttu-id="090a9-429">È necessaria l'autorizzazione ALTER AVAILABILITY GROUP nel gruppo di disponibilità, l'autorizzazione CONTROL AVAILABILITY GROUP, l'autorizzazione ALTER ANY AVAILABILITY GROUP o l'autorizzazione CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="090a9-429">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span> <span data-ttu-id="090a9-430">Per rimuovere un gruppo di disponibilità non ospitato nel percorso della replica locale, è necessaria l'autorizzazione CONTROL SERVER o CONTROL per questo gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-430">To drop an availability group that is not hosted on the local replica location you need CONTROL SERVER permission or CONTROL permission on that Availability Group.</span></span>|  
  
###  <a name="related-tasks-availability-groups"></a><a name="RelatedTasksAGs"></a> <span data-ttu-id="090a9-431">Attività correlate (gruppi di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-431">Related Tasks (Availability Groups)</span></span>  
  
|<span data-ttu-id="090a9-432">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-432">Task</span></span>|<span data-ttu-id="090a9-433">Argomento</span><span class="sxs-lookup"><span data-stu-id="090a9-433">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="090a9-434">Creazione di un gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-434">Creating an availability group</span></span>|[<span data-ttu-id="090a9-435">Utilizzare il gruppo di disponibilità (Creazione guidata Gruppo di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-435">Use the Availability Group (New Availability Group Wizard)</span></span>](use-the-availability-group-wizard-sql-server-management-studio.md)<br /><br /> [<span data-ttu-id="090a9-436">Creare un gruppo di disponibilità (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="090a9-436">Create an Availability Group (Transact-SQL)</span></span>](create-an-availability-group-transact-sql.md)<br /><br /> [<span data-ttu-id="090a9-437">Creare un gruppo di disponibilità (SQL Server PowerShell)</span><span class="sxs-lookup"><span data-stu-id="090a9-437">Create an Availability Group (SQL Server PowerShell)</span></span>](../../../powershell/sql-server-powershell.md)<br /><br /> [<span data-ttu-id="090a9-438">Specifica dell'URL dell'endpoint quando si aggiunge o si modifica una replica di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-438">Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;</span></span>](specify-endpoint-url-adding-or-modifying-availability-replica.md)|  
|<span data-ttu-id="090a9-439">Modifica del numero di repliche di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-439">Modifying the number of availability replicas</span></span>|[<span data-ttu-id="090a9-440">Aggiungere una replica secondaria a un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-440">Add a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](add-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="090a9-441">Creare un join di una replica secondaria a un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-441">Join a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="090a9-442">Rimuovere una replica secondaria da un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-442">Remove a Secondary Replica from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-replica-from-an-availability-group-sql-server.md)|  
|<span data-ttu-id="090a9-443">Creazione di un listener del gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-443">Creating an  availability group listener</span></span>|[<span data-ttu-id="090a9-444">Creare o configurare un listener del gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-444">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](create-or-configure-an-availability-group-listener-sql-server.md)|  
|<span data-ttu-id="090a9-445">Rimozione di un gruppo di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-445">Dropping an  availability group</span></span>|[<span data-ttu-id="090a9-446">Rimuovere un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-446">Remove an Availability Group &#40;SQL Server&#41;</span></span>](remove-an-availability-group-sql-server.md)|  
  
##  <a name="availability-database-prerequisites-and-restrictions"></a><a name="PrerequisitesForDbs"></a> <span data-ttu-id="090a9-447">Prerequisiti e restrizioni dei database di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-447">Availability Database Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="090a9-448">Per essere idoneo a essere aggiunto a un gruppo di disponibilità, un database deve soddisfare i prerequisiti e le restrizioni riportate di seguito.</span><span class="sxs-lookup"><span data-stu-id="090a9-448">To be eligible to be added to an availability group, a database must meet the following prerequisites and restrictions.</span></span>  
  
 
  
###  <a name="checklist-requirements-availability-databases"></a><a name="RequirementsDb"></a> <span data-ttu-id="090a9-449">Elenco di controllo: requisiti (database di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-449">Checklist: Requirements (Availability Databases)</span></span>  
 <span data-ttu-id="090a9-450">Per essere idoneo a essere aggiunto a un gruppo di disponibilità, un database deve soddisfare i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="090a9-450">To be eligible to be added to an availability group, a database must:</span></span>  
  
||<span data-ttu-id="090a9-451">Requisiti</span><span class="sxs-lookup"><span data-stu-id="090a9-451">Requirements</span></span>|<span data-ttu-id="090a9-452">Collegamento</span><span class="sxs-lookup"><span data-stu-id="090a9-452">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="090a9-453">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-453">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-454">Deve trattarsi di un database utente.</span><span class="sxs-lookup"><span data-stu-id="090a9-454">Be a user database.</span></span> <span data-ttu-id="090a9-455">I database di sistema non possono appartenere a un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-455">System databases cannot belong to an availability group.</span></span>||  
|<span data-ttu-id="090a9-456">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-456">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-457">Deve trovarsi nell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in cui si crea il gruppo di disponibilità e deve essere accessibile all'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="090a9-457">Reside on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where you create the availability group and be accessible to the server instance.</span></span>||  
|<span data-ttu-id="090a9-458">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-458">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-459">Deve trattarsi di un database di lettura/scrittura.</span><span class="sxs-lookup"><span data-stu-id="090a9-459">Be a read-write database.</span></span> <span data-ttu-id="090a9-460">I database di sola lettura non possono essere aggiunti a un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-460">Read-only databases cannot be added to an availability group.</span></span>|<span data-ttu-id="090a9-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span><span class="sxs-lookup"><span data-stu-id="090a9-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span></span>|  
|<span data-ttu-id="090a9-462">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-462">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-463">Deve trattarsi di un database multiutente.</span><span class="sxs-lookup"><span data-stu-id="090a9-463">Be a multi-user database.</span></span>|<span data-ttu-id="090a9-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span><span class="sxs-lookup"><span data-stu-id="090a9-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span></span>|  
|<span data-ttu-id="090a9-465">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-465">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-466">Non deve essere utilizzato AUTO_CLOSE.</span><span class="sxs-lookup"><span data-stu-id="090a9-466">Not use AUTO_CLOSE.</span></span>|<span data-ttu-id="090a9-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span><span class="sxs-lookup"><span data-stu-id="090a9-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span></span>|  
|<span data-ttu-id="090a9-468">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-468">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-469">Utilizzare il modello di recupero con registrazione completa (noto anche come modalità di recupero con registrazione completa).</span><span class="sxs-lookup"><span data-stu-id="090a9-469">Use the full recovery model (also known as, full recovery mode).</span></span>|<span data-ttu-id="090a9-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span><span class="sxs-lookup"><span data-stu-id="090a9-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span></span>|  
|<span data-ttu-id="090a9-471">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-471">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-472">Deve disporre di almeno un backup completo del database.</span><span class="sxs-lookup"><span data-stu-id="090a9-472">Possess at least one full database backup.</span></span><br /><br /> <span data-ttu-id="090a9-473">Nota: Dopo aver impostato un database sulla modalità di recupero con registrazione completa, è necessario un backup completo per iniziare la catena di log del recupero con registrazione completa.</span><span class="sxs-lookup"><span data-stu-id="090a9-473">Note: After setting a database to full recovery mode, a full backup is required to initiate the full-recovery log chain.</span></span>|[<span data-ttu-id="090a9-474">Creazione di un backup completo del database &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-474">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](../../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md)|  
|<span data-ttu-id="090a9-475">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-475">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-476">Non deve appartenere ad alcun gruppo di disponibilità esistente.</span><span class="sxs-lookup"><span data-stu-id="090a9-476">Not belong to any existing availability group.</span></span>|<span data-ttu-id="090a9-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span><span class="sxs-lookup"><span data-stu-id="090a9-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span></span>|  
|<span data-ttu-id="090a9-478">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-478">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-479">Non deve essere configurato per il mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="090a9-479">Not be configured for database mirroring.</span></span>|<span data-ttu-id="090a9-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) Se il database non fa parte del mirroring, tutte le colonne con prefisso "mirroring_" sono NULL.</span><span class="sxs-lookup"><span data-stu-id="090a9-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) (If the database does not participate in mirroring, all columns prefixed with "mirroring_" are NULL.)</span></span>|  
|<span data-ttu-id="090a9-481">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-481">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-482">Prima di aggiungere un database in cui è utilizzato FILESTREAM a un gruppo di disponibilità, verificare che FILESTREAM sia abilitato in ogni istanza del server in cui è o sarà ospitata una replica di disponibilità per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-482">Before adding a database that uses FILESTREAM to an availability group, ensure that FILESTREAM is enabled on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="090a9-483">Abilitare e configurare FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="090a9-483">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="090a9-484">![Casella di controllo](../../media/checkboxemptycenterxtraspacetopandright.gif "Casella di controllo")</span><span class="sxs-lookup"><span data-stu-id="090a9-484">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="090a9-485">Prima di aggiungere un database indipendente a un gruppo di disponibilità, verificare che l'opzione del server `contained database authentication` sia impostata su `1` in ogni istanza del server in cui è o sarà ospitata una replica di disponibilità per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-485">Before adding a contained database to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="090a9-486">Opzione di configurazione del server contained database authentication</span><span class="sxs-lookup"><span data-stu-id="090a9-486">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="090a9-487">Opzioni di configurazione del server &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-487">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
> [!NOTE]  
>  [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="090a9-488">funziona con qualsiasi livello di compatibilità del database supportato.</span><span class="sxs-lookup"><span data-stu-id="090a9-488">works with any supported database compatibility level.</span></span>  
  
###  <a name="restrictions-availability-databases"></a><a name="RestrictionsDb"></a> <span data-ttu-id="090a9-489">Restrizioni (database di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-489">Restrictions (Availability Databases)</span></span>  
  
-   <span data-ttu-id="090a9-490">Se il percorso del file, inclusa la lettera di unità, di un database secondario differisce da quello del database primario corrispondente, si applicano le restrizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="090a9-490">If the file path (including the drive letter) of a secondary database differs from the path of the corresponding primary database, the following restrictions apply:</span></span>  
  
    -   <span data-ttu-id="090a9-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:**  l'opzione **Completo** nella pagina [Seleziona sincronizzazione dati iniziale](select-initial-data-synchronization-page-always-on-availability-group-wizards.md) non è supportata.</span><span class="sxs-lookup"><span data-stu-id="090a9-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:**  The **Full** option is not supported (on the[Select Initial Data Synchronization Page](select-initial-data-synchronization-page-always-on-availability-group-wizards.md) page),</span></span>  
  
    -   <span data-ttu-id="090a9-492">**RESTORE WITH MOVE:**  per creare i database secondari, i file di database devono essere sottoposti a RESTORE WITH MOVE in ogni istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in cui è ospitata una replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="090a9-492">**RESTORE WITH MOVE:**  To create the secondary databases, the database files must be RESTORED WITH MOVE on each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts a secondary replica.</span></span>  
  
    -   <span data-ttu-id="090a9-493">**Impatto sulle operazioni di aggiunta di file:**  un'operazione di aggiunta file successiva nella replica primaria potrebbe non riuscire nei database secondari.</span><span class="sxs-lookup"><span data-stu-id="090a9-493">**Impact on add-file operations:**  A later add-file operation on the primary replica might fail on the secondary databases.</span></span> <span data-ttu-id="090a9-494">Questo errore può causare la sospensione dei database secondari.</span><span class="sxs-lookup"><span data-stu-id="090a9-494">This failure could cause the secondary databases to be suspended.</span></span> <span data-ttu-id="090a9-495">Questa situazione, a sua volta, può causare l'attivazione dello stato NON IN SINCRONIZZAZIONE delle repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="090a9-495">This, in turn, causes the secondary replicas to enter the NOT SYNCHRONIZING state.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="090a9-496">Per informazioni sulla risposta a un'operazione di aggiunta di file non riuscita, vedere [Risolvere i problemi relativi a una operazione di aggiunta file non riuscita &#40;Gruppi di disponibilità AlwaysOn&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="090a9-496">For information about responding to a failed ad-file operation, see [Troubleshoot a Failed Add-File Operation &#40;AlwaysOn Availability Groups&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md).</span></span>  
  
-   <span data-ttu-id="090a9-497">Non è possibile eliminare un database che attualmente appartiene a un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-497">You cannot drop a database that currently belongs to an availability group.</span></span>  
  
###  <a name="follow-up-for-tde-protected-databases"></a><a name="TDEdbs"></a> <span data-ttu-id="090a9-498">Completamento per database protetti tramite crittografia TDE</span><span class="sxs-lookup"><span data-stu-id="090a9-498">Follow Up for TDE Protected Databases</span></span>  
 <span data-ttu-id="090a9-499">Se si utilizza TDE (Transparent Data Encryption), la chiave asimmetrica o il certificato per la creazione e la decrittografia di altre chiavi deve essere identico in ogni istanza del server in cui viene ospitata una replica di disponibilità per il gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="090a9-499">If you use transparent data encryption (TDE), the certificate or asymmetric key for creating and decrypting other keys must be the same on every server instance that hosts an availability replica for the availability group.</span></span> <span data-ttu-id="090a9-500">Per altre informazioni, vedere [Spostare un database protetto da TDE in un'altra istanza di SQL Server](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="090a9-500">For more information, see [Move a TDE Protected Database to Another SQL Server](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md).</span></span>  
  
###  <a name="permissions-availability-databases"></a><a name="PermissionsDbs"></a> <span data-ttu-id="090a9-501">Autorizzazioni (database di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-501">Permissions (Availability Databases)</span></span>  
 <span data-ttu-id="090a9-502">È richiesta l'autorizzazione ALTER per il database.</span><span class="sxs-lookup"><span data-stu-id="090a9-502">Requires ALTER permission on the database.</span></span>  
  
###  <a name="related-tasks-availability-databases"></a><a name="RelatedTasksADb"></a> <span data-ttu-id="090a9-503">Attività correlate (database di disponibilità)</span><span class="sxs-lookup"><span data-stu-id="090a9-503">Related Tasks (Availability Databases)</span></span>  
  
|<span data-ttu-id="090a9-504">Attività</span><span class="sxs-lookup"><span data-stu-id="090a9-504">Task</span></span>|<span data-ttu-id="090a9-505">Argomento</span><span class="sxs-lookup"><span data-stu-id="090a9-505">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="090a9-506">Preparazione di un database secondario (manuale)</span><span class="sxs-lookup"><span data-stu-id="090a9-506">Preparing a secondary database (manually)</span></span>|[<span data-ttu-id="090a9-507">Preparare manualmente un database secondario per un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-507">Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;</span></span>](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)|  
|<span data-ttu-id="090a9-508">Creazione di un join di un database secondario a un gruppo di disponibilità (manuale)</span><span class="sxs-lookup"><span data-stu-id="090a9-508">Joining a secondary database to availability group (manually)</span></span>|[<span data-ttu-id="090a9-509">Creare un join di un database secondario a un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-509">Join a Secondary Database to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-database-to-an-availability-group-sql-server.md)|  
|<span data-ttu-id="090a9-510">Modifica del numero di database di disponibilità</span><span class="sxs-lookup"><span data-stu-id="090a9-510">Modifying the number of availability databases</span></span>|[<span data-ttu-id="090a9-511">Aggiungere un database a un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-511">Add a Database to an Availability Group &#40;SQL Server&#41;</span></span>](availability-group-add-a-database.md)<br /><br /> [<span data-ttu-id="090a9-512">Rimuovere un database secondario da un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-512">Remove a Secondary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-database-from-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="090a9-513">Rimuovere un database primario da un gruppo di disponibilità &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="090a9-513">Remove a Primary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-primary-database-from-an-availability-group-sql-server.md)|  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="090a9-514">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="090a9-514">Related Content</span></span>  
  
-   [<span data-ttu-id="090a9-515">Pagina relativa alla guida alle soluzioni AlwaysOn di Microsoft SQL Server per la disponibilità elevata e il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="090a9-515">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="090a9-516">Blog del team di SQL Server AlwaysOn: Blog del team ufficiale di SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="090a9-516">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
-   [<span data-ttu-id="090a9-517">Serie di informazioni su AlwaysON - HADRON: Utilizzo del pool di lavoro per database abilitati HADRON</span><span class="sxs-lookup"><span data-stu-id="090a9-517">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
## <a name="see-also"></a><span data-ttu-id="090a9-518">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="090a9-518">See Also</span></span>  
 <span data-ttu-id="090a9-519">[Panoramica di Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="090a9-519">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="090a9-520">[Clustering di failover e Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="090a9-520">[Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="090a9-521">Connettività client AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="090a9-521">AlwaysOn Client Connectivity (SQL Server)</span></span>](always-on-client-connectivity-sql-server.md)  
  
  
