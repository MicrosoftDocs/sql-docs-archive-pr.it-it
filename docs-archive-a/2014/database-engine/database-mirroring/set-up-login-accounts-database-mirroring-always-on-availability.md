---
title: Configurare gli account di accesso per il mirroring del database o la Gruppi di disponibilità AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- database mirroring [SQL Server], deployment
- logins [SQL Server], database mirroring
ms.assetid: e9f5287b-1325-4cda-88a6-19eaaa52a652
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d149016dabd0239bd76eadc8655b6752afd916d9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87716732"
---
# <a name="set-up-login-accounts-for-database-mirroring-or-alwayson-availability-groups-sql-server"></a><span data-ttu-id="19584-102">Configurare gli account di accesso per il mirroring del database o i gruppi di disponibilità AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="19584-102">Set Up Login Accounts for Database Mirroring or AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="19584-103">Affinché due istanze del server possano connettersi tra loro al punto dell' [endpoint del mirroring di database](the-database-mirroring-endpoint-sql-server.md) , è necessario che l'account di accesso di ognuna delle istanze possa accedere all'altra.</span><span class="sxs-lookup"><span data-stu-id="19584-103">For two server instances to connect to each other's [database mirroring endpoint](the-database-mirroring-endpoint-sql-server.md) point, the login account of each instance requires access to the other instance.</span></span> <span data-ttu-id="19584-104">e inoltre che disponga dell'autorizzazione per la connessione all'endpoint del mirroring del database dell'altra istanza.</span><span class="sxs-lookup"><span data-stu-id="19584-104">Also, each login account requires connect permission to the Database Mirroring endpoint of the other instance.</span></span>  
  
 <span data-ttu-id="19584-105">L'impatto di questo requisito dipende dall'eventuale esecuzione delle istanze del server tramite lo stesso account utente di dominio:</span><span class="sxs-lookup"><span data-stu-id="19584-105">The impact of this requirement depends on whether the server instances run as the same domain user account:</span></span>  
  
-   <span data-ttu-id="19584-106">Se le istanze del server vengono eseguite con lo stesso account utente di dominio, gli account di accesso dell'utente corretti saranno disponibili automaticamente in entrambi i database **master** .</span><span class="sxs-lookup"><span data-stu-id="19584-106">If the server instances run as the same domain user account, the correct user logins exist automatically in both **master** databases.</span></span> <span data-ttu-id="19584-107">Questa scelta semplifica la configurazione della sicurezza per il mirroring del database e i gruppi di disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="19584-107">This simplifies the security configuration for Database Mirroring and AlwaysOn Availability Groups.</span></span>  
  
-   <span data-ttu-id="19584-108">Se le istanze del server vengono eseguite con account utente diversi, gli account di accesso dell'utente nell'istanza del server in cui viene ospitato il server principale o la replica primaria devono essere riprodotti manualmente nell'istanza del server in cui viene ospitato il server mirror o in ogni istanza del server in cui viene ospitata una replica secondaria.</span><span class="sxs-lookup"><span data-stu-id="19584-108">If the server instances run as different user accounts, user logins on the server instance that hosts the principal server or primary replica must be manually reproduced on the server instance that hosts the mirror server or on every server instance that hosts a secondary replica.</span></span> <span data-ttu-id="19584-109">Per ulteriori informazioni, vedere [Creare un account di accesso per un account diverso](#CreateLogin) e [Concedere l'autorizzazione di connessione](#GrantConnect)più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="19584-109">For more information, see [Create a Login for a Different Account](#CreateLogin) and [Grant Connect Permission](#GrantConnect), later in this topic.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="19584-110">Per creare un ambiente più sicuro, provare a utilizzare account del dominio distinti per ogni istanza del server.</span><span class="sxs-lookup"><span data-stu-id="19584-110">To create a more secure environment, consider using separate domain accounts for each server instance.</span></span>  
  
##  <a name="create-a-login-for-a-different-account"></a><a name="CreateLogin"></a> <span data-ttu-id="19584-111">Creare un account di accesso per un account diverso</span><span class="sxs-lookup"><span data-stu-id="19584-111">Create a Login for a Different Account</span></span>  
 <span data-ttu-id="19584-112">Se due istanze del server vengono eseguite con account diversi, l'amministratore di sistema deve usare l'istruzione [!INCLUDE[tsql](../../includes/tsql-md.md)] CREATE LOGIN per creare un accesso per l'account del servizio di avvio dell'istanza remota di ogni istanza del server.</span><span class="sxs-lookup"><span data-stu-id="19584-112">If two server instances run as different accounts, the system administrator must use the CREATE LOGIN [!INCLUDE[tsql](../../includes/tsql-md.md)] statement to create a login for the startup service account of the remote instance for each server instance.</span></span> <span data-ttu-id="19584-113">Per altre informazioni, vedere [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="19584-113">For more information, see [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="19584-114">Se si esegue [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] con un account non di dominio, è necessario utilizzare i certificati.</span><span class="sxs-lookup"><span data-stu-id="19584-114">If you run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] under a non-domain account, you must use certificates.</span></span> <span data-ttu-id="19584-115">Per ulteriori informazioni, vedere [Utilizzare certificati per un endpoint del mirroring del database &#40;Transact-SQL&#41;](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="19584-115">For more information, see [Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span></span>  
  
 <span data-ttu-id="19584-116">Ad esempio, affinché l'istanza del server sqlA, eseguita con loginA, si connetta all'istanza del server sqlB, eseguita con loginB, è necessario che loginA sia presente in sqlB e che loginB sia presente in sqlA.</span><span class="sxs-lookup"><span data-stu-id="19584-116">For example, for the server instance sqlA, which runs under loginA, to connect to the server instance sqlB, which runs under loginB, loginA must exist on sqlB, and loginB must exist on sqlA.</span></span> <span data-ttu-id="19584-117">In una sessione di mirroring del database che include un'istanza del server di controllo del mirroring (sqlC) e nella quale le tre istanze del server vengono eseguite con account di dominio diversi, è inoltre necessario creare gli account di accesso seguenti:</span><span class="sxs-lookup"><span data-stu-id="19584-117">In addition, for a database mirroring session that includes a witness server instance (sqlC) and in which the three server instances run under different domain accounts, the following logins must be created:</span></span>  
  
|<span data-ttu-id="19584-118">Istanza</span><span class="sxs-lookup"><span data-stu-id="19584-118">On instance...</span></span>|<span data-ttu-id="19584-119">Account di accesso da creare e ai quali concedere l'autorizzazione di connessione</span><span class="sxs-lookup"><span data-stu-id="19584-119">Create logins for and grant connection permission to ...</span></span>|  
|--------------------|--------------------------------------------------------------|  
|<span data-ttu-id="19584-120">sqlA</span><span class="sxs-lookup"><span data-stu-id="19584-120">sqlA</span></span>|<span data-ttu-id="19584-121">sqlB e sqlC</span><span class="sxs-lookup"><span data-stu-id="19584-121">sqlB and sqlC</span></span>|  
|<span data-ttu-id="19584-122">sqlB</span><span class="sxs-lookup"><span data-stu-id="19584-122">sqlB</span></span>|<span data-ttu-id="19584-123">sqlA e sqlC</span><span class="sxs-lookup"><span data-stu-id="19584-123">sqlA and sqlC</span></span>|  
|<span data-ttu-id="19584-124">sqlC</span><span class="sxs-lookup"><span data-stu-id="19584-124">sqlC</span></span>|<span data-ttu-id="19584-125">sqlA e sqlB</span><span class="sxs-lookup"><span data-stu-id="19584-125">sqlA and sqlB</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="19584-126">Per connettersi all'account del servizio di rete, è possibile utilizzare l'account del computer anziché di un utente del dominio.</span><span class="sxs-lookup"><span data-stu-id="19584-126">It is possible to connect with the network service account by using the machine account instead of a domain user.</span></span> <span data-ttu-id="19584-127">Se si utilizza l'account del computer, è necessario aggiungerlo come utente nell'altra istanza del server.</span><span class="sxs-lookup"><span data-stu-id="19584-127">If the machine account is used, it must be added as a user on the other server instance.</span></span>  
  
##  <a name="grant-connect-permission"></a><a name="GrantConnect"></a><span data-ttu-id="19584-128">Concedere l'autorizzazione Connect</span><span class="sxs-lookup"><span data-stu-id="19584-128">Grant Connect Permission</span></span>  
 <span data-ttu-id="19584-129">Dopo avere creato un account di accesso in un'istanza del server, è necessario concedere a tale account l'autorizzazione a connettersi all'endpoint del mirroring del database dell'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="19584-129">Once a login has been created on a server instance, the login must be granted permission to connect to the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="19584-130">L'autorizzazione di connessione viene concessa dall'amministratore di sistema tramite un'istruzione [!INCLUDE[tsql](../../includes/tsql-md.md)] GRANT.</span><span class="sxs-lookup"><span data-stu-id="19584-130">The system administrator grants the connect permission using a GRANT [!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="19584-131">Per altre informazioni, vedere [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="19584-131">For more information, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="19584-132">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="19584-132">Related Tasks</span></span>  
  
-   [<span data-ttu-id="19584-133">Creare un account di accesso</span><span class="sxs-lookup"><span data-stu-id="19584-133">Create a Login</span></span>](../../relational-databases/security/authentication-access/create-a-login.md)  
  
-   <span data-ttu-id="19584-134">[Consentire l'accesso alla rete a un endpoint del mirroring del database utilizzando l'autenticazione di Windows &#40;SQL Server&#41;](../database-mirroring-allow-network-access-windows-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="19584-134">[Allow Network Access to a Database Mirroring Endpoint Using Windows Authentication &#40;SQL Server&#41;](../database-mirroring-allow-network-access-windows-authentication.md).</span></span>  
  
-   [<span data-ttu-id="19584-135">Utilizzare certificati per un endpoint del mirroring del database &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="19584-135">Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;</span></span>](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="19584-136">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="19584-136">See Also</span></span>  
 <span data-ttu-id="19584-137">[Endpoint del mirroring del database &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="19584-137">[The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span></span>  
 <span data-ttu-id="19584-138">[Risolvere i problemi relativi alla configurazione del mirroring del database &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="19584-138">[Troubleshoot Database Mirroring Configuration &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span></span>  
 [<span data-ttu-id="19584-139">Risolvere i problemi di Gruppi di disponibilità AlwaysOn &#40;di configurazione SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="19584-139">Troubleshoot AlwaysOn Availability Groups Configuration &#40;SQL Server&#41;</span></span>](../availability-groups/windows/troubleshoot-always-on-availability-groups-configuration-sql-server.md)  
  
  
