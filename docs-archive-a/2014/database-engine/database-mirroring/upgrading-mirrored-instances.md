---
title: Ridurre i tempi di inattività per i database con mirroring durante l'aggiornamento delle istanze del server Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- upgrading SQL Server, rolling upgrade of mirrored databases
- database mirroring [SQL Server], upgrading system
- rolling upgrades [SQL Server]
ms.assetid: 0e73bd23-497d-42f1-9e81-8d5314bcd597
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 0a343e6b9e93aa1910c82f436f3a50daf00d57bc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87627392"
---
# <a name="minimize-downtime-for-mirrored-databases-when-upgrading-server-instances"></a><span data-ttu-id="6d7ec-102">Riduzione al minimo del tempo di inattività per i database con mirroring quando si aggiornano le istanze del server</span><span class="sxs-lookup"><span data-stu-id="6d7ec-102">Minimize Downtime for Mirrored Databases When Upgrading Server Instances</span></span>
  <span data-ttu-id="6d7ec-103">Quando si aggiornano istanze [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] del server a, è possibile ridurre i tempi di inattività per ogni database con mirroring a un singolo failover manuale eseguendo un aggiornamento sequenziale, noto come *aggiornamento in sequenza*.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-103">When upgrading server instances to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you can reduce downtime for each mirrored database to only a single manual failover by performing a sequential upgrade, known as a *rolling upgrade*.</span></span> <span data-ttu-id="6d7ec-104">L'aggiornamento in sequenza è un processo in più fasi che, nella forma più semplice, implica l'aggiornamento dell'istanza del server che attualmente funge da server mirror in una sessione di mirroring, seguito dal failover manuale del database con mirroring, dall'aggiornamento del primo server principale e dalla ripresa del mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-104">A rolling upgrade is a multi-stage process that in its simplest form involves upgrading the server instance that is currently acting as the mirror server in a mirroring session, then manually failing over the mirrored database, upgrading the former principal server, and resuming mirroring.</span></span> <span data-ttu-id="6d7ec-105">Nella pratica, il processo esatto dipende dalla modalità operativa e dal numero/layout della sessione di mirroring in esecuzione nelle istanze del server da aggiornare.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-105">In practice, the exact process will depend on the operating mode and the number and layout of mirroring session running on the server instances that you are upgrading.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6d7ec-106">Per informazioni sull'esecuzione di un aggiornamento in sequenza per installare un Service Pack o un hotfix, vedere [installare un Service Pack in un sistema con tempi di inattività minimi per i database con mirroring](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-106">For information about performing a rolling upgrade to install a service pack or hotfix, see [Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md).</span></span>  
  
 <span data-ttu-id="6d7ec-107">**Preparazione consigliata (procedure consigliate)**</span><span class="sxs-lookup"><span data-stu-id="6d7ec-107">**Recommended Preparation (Best Practices)**</span></span>  
  
 <span data-ttu-id="6d7ec-108">Prima di avviare un aggiornamento in sequenza, si consiglia di effettuare le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-108">Before starting a rolling upgrade, we recommend that you:</span></span>  
  
1.  <span data-ttu-id="6d7ec-109">Eseguire un failover manuale di prova su almeno una delle sessioni di mirroring:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-109">Perform a practice manual failover on at least one of your mirroring sessions:</span></span>  
  
    -   [<span data-ttu-id="6d7ec-110">Failover manuale di una sessione di mirroring del database &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6d7ec-110">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
    -   <span data-ttu-id="6d7ec-111">[Failover manuale in una sessione di mirroring del database &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-111">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6d7ec-112">Per informazioni sul funzionamento del failover manuale, vedere [Cambio di ruolo durante una sessione di mirroring del database &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-112">For information about how manual failover works, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
2.  <span data-ttu-id="6d7ec-113">Proteggere i dati:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-113">Protect your data:</span></span>  
  
    1.  <span data-ttu-id="6d7ec-114">Eseguire un backup completo di ogni database principale:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-114">Perform a full database backup on every principal database:</span></span>  
  
         <span data-ttu-id="6d7ec-115">[Creazione di un backup completo del database &#40;SQL Server&#41;](../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-115">[Create a Full Database Backup &#40;SQL Server&#41;](../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md).</span></span>  
  
    2.  <span data-ttu-id="6d7ec-116">Eseguire il comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) in ogni database principale.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-116">Run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on every principal database.</span></span>  
  
 <span data-ttu-id="6d7ec-117">**Fasi di un aggiornamento in sequenza**</span><span class="sxs-lookup"><span data-stu-id="6d7ec-117">**Stages of a Rolling Upgrade**</span></span>  
  
 <span data-ttu-id="6d7ec-118">I passaggi specifici di un aggiornamento in sequenza dipendono dalla modalità operativa della configurazione del mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-118">The specific steps of a rolling upgrade depend on the operating mode of the mirroring configuration.</span></span> <span data-ttu-id="6d7ec-119">Tuttavia, le fasi di base sono identiche.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-119">However, the basic stages are the same.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6d7ec-120">Per altre informazioni sulle modalità di funzionamento, vedere [Modalità di funzionamento del mirroring del database](database-mirroring-operating-modes.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-120">For information about the operating modes, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="6d7ec-121">Nel diagramma di flusso della figura seguente vengono illustrate le fasi di base di un aggiornamento in sequenza per ogni modalità operativa.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-121">The following illustration is a flowchart that shows the basic stages of a rolling upgrade for each operating mode.</span></span> <span data-ttu-id="6d7ec-122">Le procedure corrispondenti vengono descritte dopo l'illustrazione.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-122">The corresponding procedures are described after the illustration.</span></span>  
  
 <span data-ttu-id="6d7ec-123">![Diagramma di flusso che illustra la procedura di un aggiornamento in sequenza](../media/dbm-rolling-upgrade.gif "Diagramma di flusso che illustra la procedura di un aggiornamento in sequenza")</span><span class="sxs-lookup"><span data-stu-id="6d7ec-123">![Flowchart showing steps of a rolling upgrade](../media/dbm-rolling-upgrade.gif "Flowchart showing steps of a rolling upgrade")</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="6d7ec-124">Un'istanza del server potrebbe ricoprire ruoli di mirroring diversi (server principale, server mirror o server di controllo del mirroring) in sessioni di mirroring simultanee.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-124">A server instance might be performing different mirroring roles (principal server, mirror server, or witness) in concurrent mirroring sessions.</span></span> <span data-ttu-id="6d7ec-125">In questo caso, è necessario adattare di conseguenza il processo di aggiornamento in sequenza di base.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-125">In this case, you will have to adapt the basic rolling upgrade process accordingly.</span></span> <span data-ttu-id="6d7ec-126">Per altre informazioni, vedere [Cambio di ruolo durante una sessione di mirroring del database &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)(Mirroring del database e log shipping).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-126">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
### <a name="to-change-a-session-from-high-performance-mode-to-high-safety-mode"></a><span data-ttu-id="6d7ec-127">Per modificare la modalità di una sessione dalla modalità a elevate prestazioni alla modalità a protezione elevata</span><span class="sxs-lookup"><span data-stu-id="6d7ec-127">To change a session from high-performance mode to high-safety mode</span></span>  
  
1.  <span data-ttu-id="6d7ec-128">Se una sessione di mirroring viene eseguita in modalità a elevate prestazioni, prima di eseguire un aggiornamento in sequenza impostare la modalità operativa su protezione elevata senza failover automatico.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-128">If a mirroring session is running in high-performance mode, before you perform a rolling upgrade, change the operating mode to high safety without automatic failover.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6d7ec-129">Se il server mirror è geograficamente distante dal server principale, un aggiornamento in sequenza potrebbe non essere appropriato.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-129">If the mirror server is geographically distant from the principal server, a rolling upgrade might be inappropriate.</span></span>  
  
    -   <span data-ttu-id="6d7ec-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: modificare l'opzione **Modalità operativa** e impostarla su **Protezione elevata senza failover automatico (sincrona)** usando la [pagina Mirroring](../../relational-databases/databases/database-properties-mirroring-page.md) della finestra di dialogo **Proprietà database**.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High safety without automatic failover (synchronous)** by using the [Mirroring Page](../../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span> <span data-ttu-id="6d7ec-131">Per informazioni su come accedere a questa pagina, vedere [Avvio della Configurazione guidata sicurezza mirroring del database &#40;SQL Server Management Studio&#41;](start-the-configuring-database-mirroring-security-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-131">For information about how to access this page, see [Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;](start-the-configuring-database-mirroring-security-wizard.md).</span></span>  
  
    -   <span data-ttu-id="6d7ec-132">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: impostare la sicurezza della transazione su FULL.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-132">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: Set transaction safety to FULL.</span></span> <span data-ttu-id="6d7ec-133">Per altre informazioni, vedere [Modifica della protezione delle transazioni in una sessione di mirroring del database &#40;SQL Server&#41;](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-133">For more information, see [Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)</span></span>  
  
### <a name="to-remove-a-witness-from-a-session"></a><span data-ttu-id="6d7ec-134">Per rimuovere un server di controllo del mirroring da una sessione</span><span class="sxs-lookup"><span data-stu-id="6d7ec-134">To remove a witness from a session</span></span>  
  
1.  <span data-ttu-id="6d7ec-135">Se una sessione di mirroring prevede un server di controllo del mirroring, si consiglia di rimuoverlo prima di eseguire un aggiornamento in sequenza.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-135">If a mirroring session involves a witness, we recommend that you remove the witness before you perform a rolling upgrade.</span></span> <span data-ttu-id="6d7ec-136">In caso contrario, quando l'istanza del server mirror viene aggiornata, la disponibilità del database dipende dal server di controllo del mirroring che rimane connesso all'istanza del server principale.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-136">Otherwise, when the mirror server instance is being upgraded, database availability depends on the witness that remains connected to the principal server instance.</span></span> <span data-ttu-id="6d7ec-137">Dopo avere rimosso un server di controllo del mirroring, è possibile aggiornarlo in qualsiasi momento durante il processo di aggiornamento in sequenza senza rischiare alcun tempo di inattività del database.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-137">After you remove a witness, you can upgrade it at any time during the rolling upgrade process without risking database downtime.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6d7ec-138">Per altre informazioni, vedere [Quorum: Impatto di un server di controllo del mirroring sulla disponibilità del database &#40;mirroring del database&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="6d7ec-138">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
    -   [<span data-ttu-id="6d7ec-139">Rimuovere il server di controllo del mirroring da una sessione di mirroring del database &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6d7ec-139">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
### <a name="to-perform-the-rolling-upgrade"></a><span data-ttu-id="6d7ec-140">Per eseguire l'aggiornamento in sequenza</span><span class="sxs-lookup"><span data-stu-id="6d7ec-140">To perform the rolling upgrade</span></span>  
  
1.  <span data-ttu-id="6d7ec-141">Per ridurre al minimo i tempi di inattività, si consiglia di: Avviare l'aggiornamento in sequenza aggiornando qualsiasi server partner di mirroring che è attualmente il server mirror in tutte le relative sessioni di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-141">To minimize downtime, we recommend the following: Start the rolling upgrade by updating any mirroring partner that is currently the mirror server in all its mirroring sessions.</span></span> <span data-ttu-id="6d7ec-142">In questa fase potrebbe essere necessario aggiornare più istanze del server.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-142">You might have to update multiple server instances at this point.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6d7ec-143">Un server di controllo del mirroring può essere aggiornato in qualsiasi punto nel processo di aggiornamento in sequenza.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-143">A witness can be upgraded at any point in the rolling upgrade process.</span></span> <span data-ttu-id="6d7ec-144">Ad esempio, se un'istanza del server è un server mirror nella sessione 1 e un server di controllo del mirroring nella sessione 2, è possibile aggiornare l'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-144">For example, if a server instance is a mirror server in Session 1 and is a witness in Session 2, you can upgrade the server instance now.</span></span>  
  
     <span data-ttu-id="6d7ec-145">L'istanza del server da aggiornare per prima dipende dalla configurazione corrente delle sessioni di mirroring, ovvero:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-145">The server instance to upgrade first depends on the current configuration of your mirroring sessions, as follows:</span></span>  
  
    -   <span data-ttu-id="6d7ec-146">Se un'istanza server è già il server mirror in tutte le sue sessioni di mirroring, aggiornare l'istanza server alla nuova versione.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-146">If any server instance is already the mirror server in all its mirroring sessions, upgrade the server instance to the new version.</span></span>  
  
    -   <span data-ttu-id="6d7ec-147">Se tutte le istanze server sono attualmente il server principale in tutte le sessioni di mirroring, selezionare un'istanza server da aggiornare per prima.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-147">If all your server instances are currently the principal server in any mirroring sessions, select one server instance to upgrade first.</span></span> <span data-ttu-id="6d7ec-148">Quindi, eseguire manualmente il failover su ciascuno dei database principali e aggiornare tale istanza server.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-148">Then, manually fail over each of its principal databases and upgrade that server instance.</span></span>  
  
     <span data-ttu-id="6d7ec-149">Dopo aver eseguito l'aggiornamento, un'istanza del server reintegra automaticamente ciascuna delle sue sessioni di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-149">After being upgraded, a server instance automatically rejoins each of its mirroring sessions.</span></span>  
  
2.  <span data-ttu-id="6d7ec-150">Attendere la sincronizzazione di ciascuna sessione di mirroring la cui istanza del server mirror è stata appena aggiornata.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-150">For each mirroring session whose mirror server instance has just been upgraded, wait for the session to synchronize.</span></span> <span data-ttu-id="6d7ec-151">Quindi, connettersi all'istanza del server principale ed eseguire manualmente il failover della sessione.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-151">Then, connect to the principal server instance, and manually fail over the session.</span></span> <span data-ttu-id="6d7ec-152">Con il failover, l'istanza del server aggiornata diventa il server principale per la sessione e il server principale precedente diventa il server mirror.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-152">On failover, the upgraded server instance becomes the principal server for that session, and the former principal server becomes the mirror server.</span></span>  
  
     <span data-ttu-id="6d7ec-153">L'obiettivo di questo passaggio è consentire a un'altra istanza del server di diventare il server mirror in tutte le sessione di mirroring in cui è un server partner.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-153">The goal of this step is for another server instance to become the mirror server in every mirroring session in which it is a partner.</span></span>  
  
     <span data-ttu-id="6d7ec-154">**Restrizioni dopo l'esecuzione del failover in un'istanza server aggiornata.**</span><span class="sxs-lookup"><span data-stu-id="6d7ec-154">**Restrictions after you failover to an upgraded server instance.**</span></span>  
  
     <span data-ttu-id="6d7ec-155">Dopo il failover da un'istanza del server precedente a un'istanza del server [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , la sessione del database viene sospesa.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-155">After failing over from an earlier server instance to a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, the database session is suspended.</span></span> <span data-ttu-id="6d7ec-156">Non può essere ripristinata finché l'altro server partner non sarà stato aggiornato.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-156">It cannot be resumed until the other partner has been upgraded.</span></span> <span data-ttu-id="6d7ec-157">Tuttavia, il server principale continua ad accettare connessioni e a consentire l'accesso ai dati e le modifiche sul database principale.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-157">However, the principal server is still accepting connections and allowing data access and modifications on the principal database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6d7ec-158">L'avvio di una nuova sessione di mirroring richiede che tutte le istanze server eseguano la stessa versione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6d7ec-158">Establishing a new mirroring session requires that the server instances all be running the same version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
3.  <span data-ttu-id="6d7ec-159">Dopo il failover, è consigliabile eseguire il comando [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) nel database theprincipal.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-159">After you fail over, we recommend that you run the [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) command on theprincipal database.</span></span>  
  
4.  <span data-ttu-id="6d7ec-160">Aggiornare ciascuna istanza server che ora è il server mirror in tutte le sessioni di mirroring nelle quali è un server partner.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-160">Upgrade each server instance that is now the mirror server in all mirroring sessions in which it is a partner.</span></span> <span data-ttu-id="6d7ec-161">In questa fase potrebbe essere necessario aggiornare più server.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-161">You might have to update multiple servers at this point.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6d7ec-162">In una configurazione di mirroring complessa, alcune istanze del server potrebbero essere ancora il server principale originale in una o più sessioni di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-162">In a complex mirroring configuration, some server instance might still be the original principal server in one or more mirroring sessions.</span></span> <span data-ttu-id="6d7ec-163">Ripetere i passaggi da 2 a 4 per tali istanze del server finché tutte le istanze coinvolte non sono state aggiornate.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-163">Repeat steps 2-4 for those server instances until all instances involved are upgraded.</span></span>  
  
5.  <span data-ttu-id="6d7ec-164">Riprendere la sessione di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-164">Resume the mirroring session.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6d7ec-165">Il failover automatico funziona solo dopo che il server di controllo è stato aggiornato e aggiunto nuovamente nella sessione di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-165">Automatic failover will not work until the witness has been upgraded and added back into the mirroring session.</span></span>  
  
6.  <span data-ttu-id="6d7ec-166">Aggiornare le istanze server rimanenti che sono il server di controllo del mirroring in tutte le sue sessioni di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-166">Upgrade any remaining server instance that is the witness in all its mirroring sessions.</span></span> <span data-ttu-id="6d7ec-167">Dopo che un server di controllo del mirroring aggiornato integra una sessione di mirroring, il failover automatico diventa nuovamente possibile.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-167">After an upgraded witness rejoins a mirroring session, automatic failover becomes possible again.</span></span> <span data-ttu-id="6d7ec-168">In questa fase potrebbe essere necessario aggiornare più server.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-168">You might have to update multiple servers at this point.</span></span>  
  
### <a name="to-return-a-session-to-high-performance-mode"></a><span data-ttu-id="6d7ec-169">Per ripristinare una sessione alla modalità a elevate prestazioni</span><span class="sxs-lookup"><span data-stu-id="6d7ec-169">To return a session to high-performance mode</span></span>  
  
1.  <span data-ttu-id="6d7ec-170">Facoltativamente, tornare alla modalità a elevate prestazioni utilizzando uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6d7ec-170">Optionally, return to high-performance mode by using one of the following methods:</span></span>  
  
    -   <span data-ttu-id="6d7ec-171">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: modificare l'opzione **Modalità operativa** e impostarla su **Prestazioni elevate (asincrona)** usando la [pagina Mirroring](../../relational-databases/databases/database-properties-mirroring-page.md) della finestra di dialogo **Proprietà database**.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-171">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]: Change the **Operating mode** option to **High performance (asynchronous)** by using the [Mirroring Page](../../relational-databases/databases/database-properties-mirroring-page.md) of the **Database Properties** dialog box.</span></span>  
  
    -   <span data-ttu-id="6d7ec-172">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: usare [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) per impostare la protezione della transazione su OFF.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-172">In [!INCLUDE[tsql](../../includes/tsql-md.md)]: Use [ALTER DATABASE](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring)to set transaction safety to OFF.</span></span>  
  
### <a name="to-add-a-witness-back-into-a-mirroring-session"></a><span data-ttu-id="6d7ec-173">Per aggiungere un server di controllo nuovamente in una sessione di mirroring</span><span class="sxs-lookup"><span data-stu-id="6d7ec-173">To add a witness back into a mirroring session</span></span>  
  
1.  <span data-ttu-id="6d7ec-174">Facoltativamente, nella modalità a protezione elevata, ristabilire il server di controllo del mirroring su ciascuna sessione di mirroring.</span><span class="sxs-lookup"><span data-stu-id="6d7ec-174">Optionally, in high-safety mode, reestablish the witness to each mirroring session.</span></span>  
  
     <span data-ttu-id="6d7ec-175">**Per integrare un server di controllo del mirroring**</span><span class="sxs-lookup"><span data-stu-id="6d7ec-175">**To return a witness**</span></span>  
  
    -   [<span data-ttu-id="6d7ec-176">Aggiunta o sostituzione di un server di controllo del mirroring del database &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6d7ec-176">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
    -   [<span data-ttu-id="6d7ec-177">Aggiungere un server di controllo del mirroring del database tramite l'autenticazione di Windows &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6d7ec-177">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="6d7ec-178">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="6d7ec-178">See Also</span></span>  
 <span data-ttu-id="6d7ec-179">[Mirroring del database di ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-179">[ALTER DATABASE Database Mirroring &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-database-mirroring) </span></span>  
 <span data-ttu-id="6d7ec-180">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-180">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="6d7ec-181">[Visualizzazione dello stato di un database con mirroring &#40;SQL Server Management Studio&#41;](view-the-state-of-a-mirrored-database-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-181">[View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;](view-the-state-of-a-mirrored-database-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="6d7ec-182">[Mirroring del database &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-182">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="6d7ec-183">[Installare un Service Pack in un sistema con tempi di inattività minimi per i database con mirroring](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-183">[Install a Service Pack on a System with Minimal Downtime for Mirrored Databases](../install-a-service-pack-on-a-system-with-minimal-downtime-for-mirrored-databases.md) </span></span>  
 <span data-ttu-id="6d7ec-184">[Cambio di ruolo durante una sessione di mirroring del database &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-184">[Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="6d7ec-185">[Utilizzo forzato del servizio in una sessione di mirroring del database &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-185">[Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md) </span></span>  
 <span data-ttu-id="6d7ec-186">[Avviare il monitoraggio mirroring del database &#40;SQL Server Management Studio&#41;](start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="6d7ec-186">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 [<span data-ttu-id="6d7ec-187">Database Mirroring Operating Modes</span><span class="sxs-lookup"><span data-stu-id="6d7ec-187">Database Mirroring Operating Modes</span></span>](database-mirroring-operating-modes.md)  
  
  
