---
title: Configurare il backup gestito (SQL Server Management Studio) | Microsoft Docs
description: Usare la finestra di dialogo backup gestito per configurare il backup gestito SQL Server impostazione predefinita di Azure. Informazioni sulle opzioni che è necessario prendere in considerazione.
ms.custom: ''
ms.date: 08/23/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.managedbackup.configure.f1
ms.assetid: 79397cf6-0611-450a-b0d8-e784a76e3091
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: e952ef1102ac67bd0ed9f72d0c201d54b320b5ca
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87623496"
---
# <a name="configure-managed-backup-sql-server-management-studio"></a><span data-ttu-id="ca22b-104">Configurare il backup gestito (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="ca22b-104">Configure Managed Backup (SQL Server Management Studio)</span></span>
  <span data-ttu-id="ca22b-105">La finestra di dialogo **backup gestito** consente di configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] le impostazioni predefinite per l'istanza.</span><span class="sxs-lookup"><span data-stu-id="ca22b-105">The **Managed Backup** dialog allows you to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] defaults for the instance.</span></span> <span data-ttu-id="ca22b-106">In questo argomento viene descritto come usare questa finestra di dialogo per configurare le impostazioni predefinite di [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] per l'istanza e le opzioni che è necessario considerare quando si esegue questa operazione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-106">This topic describes how to use this dialog to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] default settings for the instance and options you must consider when doing so.</span></span> <span data-ttu-id="ca22b-107">Quando [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] è configurato per l'istanza, le impostazioni vengono applicate a qualsiasi nuovo database creato successivamente.</span><span class="sxs-lookup"><span data-stu-id="ca22b-107">When [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is configured for the instance, the settings are applied to any new database created thereafter.</span></span>  
  
 <span data-ttu-id="ca22b-108">Se si vuole configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] per un database specifico, vedere [abilitare e configurare SQL Server backup gestito in Azure per un database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span><span class="sxs-lookup"><span data-stu-id="ca22b-108">If you want to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a specific database, see [Enable and Configure SQL Server Managed Backup to Azure for a Database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span></span>  
 
> [!NOTE] 
> <span data-ttu-id="ca22b-109">Il backup gestito di SQL Server non è supportato con i server proxy.</span><span class="sxs-lookup"><span data-stu-id="ca22b-109">SQL Server Managed Backup is not supported with proxy servers.</span></span> 
  
## <a name="task-list"></a><span data-ttu-id="ca22b-110">Elenco attività</span><span class="sxs-lookup"><span data-stu-id="ca22b-110">Task List</span></span>  
  
## <a name="ss_smartbackup-functions-using-managed-backup-interface-in-sql-server-management-studio"></a><span data-ttu-id="ca22b-111">Funzioni di [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] mediante l'interfaccia di backup gestita in SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="ca22b-111">[!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] Functions Using Managed Backup Interface in SQL Server Management Studio</span></span>  
 <span data-ttu-id="ca22b-112">In questa versione è possibile configurare solo le impostazioni predefinite a livello di istanza usando l'interfaccia di **backup di gestione** .</span><span class="sxs-lookup"><span data-stu-id="ca22b-112">In this release, you can only configure instance level default settings using the **Management Backup** interface.</span></span> <span data-ttu-id="ca22b-113">Non è possibile configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] per un database, sospendere o riprendere operazioni [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] o impostare notifiche email.</span><span class="sxs-lookup"><span data-stu-id="ca22b-113">You cannot configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a database, pause or resume [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations, or setup email notifications.</span></span> <span data-ttu-id="ca22b-114">Per informazioni su come eseguire operazioni attualmente non supportate tramite l'interfaccia di **backup gestita** , vedere [SQL Server backup gestito in Azure-impostazioni di conservazione e archiviazione](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="ca22b-114">For information on how to perform operations not currently supported through the **Managed Backup** interface, see [SQL Server Managed Backup to Azure - Retention and Storage Settings](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md).</span></span>  
  
## <a name="permissions"></a><span data-ttu-id="ca22b-115">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="ca22b-115">Permissions</span></span>  
 <span data-ttu-id="ca22b-116">Il **nodo Visualizza backup gestito è SQL Server Management Studio:** Per visualizzare il nodo **backup gestito** in **Esplora oggetti**, è necessario essere un amministratore di sistema o disporre delle seguenti autorizzazioni concesse in modo specifico al proprio account utente:</span><span class="sxs-lookup"><span data-stu-id="ca22b-116">**View Managed Backup Node is SQL Server Management Studio:** To view  **Managed Backup** node in **Object Explorer**, you must either be a System Admin or have the following permissions specifically granted to your user account:</span></span>  
  
-   `db_backupoperator`  
  
-   `VIEW SERVER STATE`  
  
-   `ALTER ANY CREDENTIAL`  
  
-   `VIEW ANY DEFINITION`  
  
-   <span data-ttu-id="ca22b-117">`EXECUTE` su `smart_admin.fn_is_master_switch_on`.</span><span class="sxs-lookup"><span data-stu-id="ca22b-117">`EXECUTE` on `smart_admin.fn_is_master_switch_on`.</span></span>  
  
-   <span data-ttu-id="ca22b-118">`SELECT` su `smart_admin.fn_backup_instance_config`.</span><span class="sxs-lookup"><span data-stu-id="ca22b-118">`SELECT` on `smart_admin.fn_backup_instance_config`.</span></span>  
  
 <span data-ttu-id="ca22b-119">**Per configurare il backup gestito:** per configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] in SQL Server Management Studio, è necessario essere un amministratore di sistema o disporre delle autorizzazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ca22b-119">**To Configure Managed Backup:** to configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] in SQL Server Management Studio, you must be a System Administrator or have the following permissions:</span></span>  
  
 <span data-ttu-id="ca22b-120">L'appartenenza al ruolo del database `db_backupoperator`, con le autorizzazioni `ALTER ANY CREDENTIAL` e `EXECUTE` sulla stored procedure `sp_delete_backuphistory`.</span><span class="sxs-lookup"><span data-stu-id="ca22b-120">Membership in `db_backupoperator` database role, with `ALTER ANY CREDENTIAL` permissions, and `EXECUTE` permissions on `sp_delete_backuphistory` stored procedure.</span></span>  
  
 <span data-ttu-id="ca22b-121">`SELECT`autorizzazioni sulla `smart_admin.fn_get_current_xevent_settings` funzione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-121">`SELECT` permissions on the `smart_admin.fn_get_current_xevent_settings` function.</span></span>  
  
 <span data-ttu-id="ca22b-122">`EXECUTE`autorizzazioni per l' `smart_admin.sp_get_backup_diagnostics` stored procedure.</span><span class="sxs-lookup"><span data-stu-id="ca22b-122">`EXECUTE` permissions on the `smart_admin.sp_get_backup_diagnostics` stored procedure.</span></span> <span data-ttu-id="ca22b-123">È inoltre richiesta l'autorizzazione `VIEW SERVER STATE` poiché vengono chiamati internamente altri oggetti di sistema che richiedono tale autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-123">In addition, it requires `VIEW SERVER STATE` permissions as it internally calls other system objects that require this permission.</span></span>  
  
 <span data-ttu-id="ca22b-124">Le autorizzazioni `EXECUTE` per `smart_admin.sp_set_instance_backup` e `smart_admin.sp_backup_master_switch`.</span><span class="sxs-lookup"><span data-stu-id="ca22b-124">`EXECUTE` permissions on `smart_admin.sp_set_instance_backup`, and `smart_admin.sp_backup_master_switch`.</span></span>  
  
## <a name="configure-ss_smartbackup-using-sql-server-management-studio"></a><span data-ttu-id="ca22b-125">Configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] tramite SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="ca22b-125">Configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] using SQL Server Management Studio</span></span>  
 <span data-ttu-id="ca22b-126">In **Esplora oggetti**espandere il nodo **gestione** e fare clic con il pulsante destro del mouse su **backup gestito**.</span><span class="sxs-lookup"><span data-stu-id="ca22b-126">From the **object explorer**, expand the **Management** node, and right click on **Managed Backup**.</span></span> <span data-ttu-id="ca22b-127">Selezionare **Configura**.</span><span class="sxs-lookup"><span data-stu-id="ca22b-127">Select **Configure**.</span></span> <span data-ttu-id="ca22b-128">Viene aperta la finestra di dialogo **Backup gestito** .</span><span class="sxs-lookup"><span data-stu-id="ca22b-128">This opens the **Managed Backup** dialog.</span></span>  
  
 <span data-ttu-id="ca22b-129">Selezionare l'opzione **Abilita backup gestito** e specificare i valori di configurazione:</span><span class="sxs-lookup"><span data-stu-id="ca22b-129">Check **Enable Managed Backup** option and specify the configuration values:</span></span>  
  
 <span data-ttu-id="ca22b-130">Il periodo di **memorizzazione dei file** è specificato in giorni e deve essere compreso tra 1 e 30.</span><span class="sxs-lookup"><span data-stu-id="ca22b-130">The **File retention** period is specified in days and should be between 1 and 30.</span></span>  
  
 <span data-ttu-id="ca22b-131">Le **credenziali SQL** selezionate devono corrispondere all'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-131">The **SQL Credential** you select should match the storage account.</span></span> <span data-ttu-id="ca22b-132">Se al momento non si dispone di credenziali SQL che archiviano le informazioni di autenticazione, è possibile crearne una facendo clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ca22b-132">If you currently do not have a SQL Credential that stores the authentication information, you can create one by clicking **Create**.</span></span> <span data-ttu-id="ca22b-133">È anche possibile creare le credenziali usando l'istruzione Transact-SQL CREATE CREDENTIAL e fornire il nome account di archiviazione per l'identità e la chiave di accesso per i parametri chiave privati.</span><span class="sxs-lookup"><span data-stu-id="ca22b-133">You can also create credential by using the CREATE CREDENTIAL Transact-SQL statement, and provide the storage account name for Identity and the access key for the SECRET parameters.</span></span> <span data-ttu-id="ca22b-134">Per altre informazioni, vedere [creare una credenziale](../relational-databases/backup-restore/sql-server-backup-to-url.md#credential).</span><span class="sxs-lookup"><span data-stu-id="ca22b-134">For more information, see [Create a Credential](../relational-databases/backup-restore/sql-server-backup-to-url.md#credential).</span></span>  
  
 <span data-ttu-id="ca22b-135">Specificare l' **URL di archiviazione** per l'account di archiviazione di Azure, le credenziali SQL che archiviano le informazioni di autenticazione per l'account di archiviazione e il periodo di memorizzazione per i file di backup.</span><span class="sxs-lookup"><span data-stu-id="ca22b-135">Specify the **Storage URL** for the Azure storage account, the SQL Credential that stores the authentication information for the storage account, and the retention period for the backup files.</span></span>  
  
 <span data-ttu-id="ca22b-136">Il formato dell'URL di archiviazione è: https:// \<StorageAccount> . blob.Core.Windows.NET/</span><span class="sxs-lookup"><span data-stu-id="ca22b-136">The storage URL format is: https://\<StorageAccount>.blob.core.windows.net/</span></span>  
  
 <span data-ttu-id="ca22b-137">Per impostare le impostazioni di crittografia a livello di istanza, selezionare l'opzione **Crittografa backup** e specificare l'algoritmo e un certificato o una chiave asimmetrica da utilizzare per la crittografia.</span><span class="sxs-lookup"><span data-stu-id="ca22b-137">To set the encryption settings at the instance level, check **Encrypt Backup** option, and specify the algorithm and a Certificate or Asymmetric Key to use for the encryption.</span></span>  <span data-ttu-id="ca22b-138">Questa proprietà è impostata a livello di istanza e viene usata per tutti i nuovi database creati dopo l'applicazione di questa configurazione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-138">This is set at the instance level is used for all the new databases created once this configuration has been applied.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="ca22b-139">Non è possibile usare questa finestra di dialogo per specificare le opzioni di crittografia senza configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ca22b-139">This dialog cannot be used to specify the encryption options without configuring [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="ca22b-140">Queste opzioni di crittografia si applicano solo a operazioni [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ca22b-140">These encryption options only apply to [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations.</span></span> <span data-ttu-id="ca22b-141">Per usare la crittografia per altre procedure di backup, vedere [crittografia dei backup](../relational-databases/backup-restore/backup-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="ca22b-141">To use encryption for other backup procedures, see [Backup Encryption](../relational-databases/backup-restore/backup-encryption.md).</span></span>  
  
### <a name="considerations"></a><span data-ttu-id="ca22b-142">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="ca22b-142">Considerations</span></span>  
 <span data-ttu-id="ca22b-143">Se si configura [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] a livello di istanza, le impostazioni vengono applicate a qualsiasi nuovo database creato successivamente.</span><span class="sxs-lookup"><span data-stu-id="ca22b-143">If you configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] at the instance level, the settings are applied to any new database created thereafter.</span></span>  <span data-ttu-id="ca22b-144">Tuttavia, i database esistenti non ereditano automaticamente queste impostazioni.</span><span class="sxs-lookup"><span data-stu-id="ca22b-144">However, existing database will not automatically inherit these settings.</span></span> <span data-ttu-id="ca22b-145">Per configurare [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] su database già esistenti, è necessario configurare ogni database in modo specifico.</span><span class="sxs-lookup"><span data-stu-id="ca22b-145">To configure [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] on previously existing databases, you must configure each database specifically.</span></span> <span data-ttu-id="ca22b-146">Per altre informazioni, vedere [abilitare e configurare SQL Server backup gestito in Azure per un database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span><span class="sxs-lookup"><span data-stu-id="ca22b-146">For more information, see [Enable and Configure SQL Server Managed Backup to Azure for a Database](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md#DatabaseConfigure).</span></span>  
  
 <span data-ttu-id="ca22b-147">Se [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] è stato sospeso utilizzando `smart_admin.sp_backup_master_switch` , verrà visualizzato un messaggio di avviso che indica che il backup gestito è disabilitato e che le configurazioni correnti non diverranno effettive. Quando si tenta di completare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="ca22b-147">If [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] has been paused using the `smart_admin.sp_backup_master_switch`, you will see a warning message " Managed Backup is disabled and the current configurations will not take effect..." when you try to complete the configuration.</span></span> <span data-ttu-id="ca22b-148">Usare l'oggetto `smart_admin.sp_backup_master_switch` archiviato e impostare @new_state = 1.</span><span class="sxs-lookup"><span data-stu-id="ca22b-148">Use the `smart_admin.sp_backup_master_switch` stored and set the @new_state=1.</span></span> <span data-ttu-id="ca22b-149">Questa attività riprenderà i servizi [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] e le impostazioni di configurazione diventeranno attive.</span><span class="sxs-lookup"><span data-stu-id="ca22b-149">This will resume [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] services and the configuration settings will take into effect.</span></span> <span data-ttu-id="ca22b-150">Per ulteriori informazioni sulla stored procedure, vedere [smart_admin. sp_ backup_master_switch &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="ca22b-150">For more information on the stored procedure, see [smart_admin.sp_ backup_master_switch &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ca22b-151">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ca22b-151">See Also</span></span>  
 [<span data-ttu-id="ca22b-152">Backup gestito di SQL Server in Azure: Interoperabilità e coesistenza</span><span class="sxs-lookup"><span data-stu-id="ca22b-152">SQL Server Managed Backup to Azure: Interoperability and Coexistence</span></span>](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)  
  
  
