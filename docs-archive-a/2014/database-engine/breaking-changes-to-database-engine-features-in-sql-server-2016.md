---
title: Modifiche di rilievo alle funzionalità di motore di database in SQL Server 2014 | Microsoft Docs
ms.custom: ''
ms.date: 01/19/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: release-landing
ms.topic: conceptual
helpviewer_keywords:
- Database Engine [SQL Server], what's new
- breaking changes [SQL Server]
ms.assetid: 47edefbd-a09b-4087-937a-453cd5c6e061
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: bf1a25aabde1e684407218da7365ae7a2b4265a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87726264"
---
# <a name="breaking-changes-to-database-engine-features-in-sql-server-2014"></a><span data-ttu-id="95589-102">Modifiche che possono causare problemi di funzionamento apportate alle funzionalità del Motore di database in SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="95589-102">Breaking Changes to Database Engine Features in SQL Server 2014</span></span>
  <span data-ttu-id="95589-103">In questo argomento vengono descritte le modifiche di rilievo apportate in [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] e nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="95589-103">This topic describes breaking changes in the [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] and earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95589-104">Tali modifiche potrebbero interrompere il funzionamento di applicazioni, funzionalità o script basati su versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-104">These changes might break applications, scripts, or functionalities that are based on earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95589-105">È possibile che questi problemi si verifichino quando viene effettuato un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="95589-105">You might encounter these issues when you upgrade.</span></span> <span data-ttu-id="95589-106">Per altre informazioni, vedere [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="95589-106">For more information, see [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
##  <a name="breaking-changes-in-sssql14"></a><a name="SQL14"></a> <span data-ttu-id="95589-107">Modifiche di rilievo in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="95589-107">Breaking Changes in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span></span>  
 <span data-ttu-id="95589-108">Nessun nuovo problema.</span><span class="sxs-lookup"><span data-stu-id="95589-108">No new issues.</span></span>  
  
##  <a name="breaking-changes-in-sssql11"></a><a name="Denali"></a><span data-ttu-id="95589-109">Modifiche di rilievo in[!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span><span class="sxs-lookup"><span data-stu-id="95589-109">Breaking Changes in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span></span>  
  
### <a name="transact-sql"></a><span data-ttu-id="95589-110">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="95589-110">Transact-SQL</span></span>  
  
|<span data-ttu-id="95589-111">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-111">Feature</span></span>|<span data-ttu-id="95589-112">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-112">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-113">Selezione dalle colonne o tabelle denominate NEXT.</span><span class="sxs-lookup"><span data-stu-id="95589-113">Selecting from columns or tables named NEXT</span></span>|<span data-ttu-id="95589-114">Nelle sequenze viene usata la funzione NEXT VALUE FOR dello standard ANSI.</span><span class="sxs-lookup"><span data-stu-id="95589-114">Sequences use the ANSI standard NEXT VALUE FOR function.</span></span> <span data-ttu-id="95589-115">Se una tabella o una colonna viene denominata NEXT e la tabella o la colonna è con alias come valore e se lo standard ANSI viene omesso, l'istruzione risultante può causare un errore.</span><span class="sxs-lookup"><span data-stu-id="95589-115">If a table or a column is named NEXT and the table or column is aliased as VALUE, and if the ANSI standard AS is omitted, the resultant statement can cause an error.</span></span> <span data-ttu-id="95589-116">Per risolvere il problema, includere la parola chiave AS dello standard ANSI.</span><span class="sxs-lookup"><span data-stu-id="95589-116">To work around, include the ANSI standard AS keyword.</span></span> <span data-ttu-id="95589-117">Ad esempio, `SELECT NEXT VALUE FROM Table` deve essere riscritto come `SELECT NEXT AS VALUE FROM Table` e `SELECT Col1 FROM NEXT VALUE` deve essere riscritto come `SELECT Col1 FROM NEXT AS VALUE`.</span><span class="sxs-lookup"><span data-stu-id="95589-117">For example, `SELECT NEXT VALUE FROM Table` should be rewritten as `SELECT NEXT AS VALUE FROM Table` and `SELECT Col1 FROM NEXT VALUE` should be rewritten as `SELECT Col1 FROM NEXT AS VALUE`.</span></span>|  
|<span data-ttu-id="95589-118">Operatore PIVOT</span><span class="sxs-lookup"><span data-stu-id="95589-118">PIVOT operator</span></span>|<span data-ttu-id="95589-119">L'operatore PIVOT non è consentito in una query ricorsiva dell'espressione di tabella comune quando il livello di compatibilità del database è impostato su 110.</span><span class="sxs-lookup"><span data-stu-id="95589-119">The PIVOT operator is not allowed in a recursive common table expression (CTE) query when the database compatibility level is set to 110.</span></span> <span data-ttu-id="95589-120">Riscrivere la query o impostare il livello di compatibilità su 100 o un valore inferiore.</span><span class="sxs-lookup"><span data-stu-id="95589-120">Rewrite the query, or change the compatibility level to 100 or lower.</span></span> <span data-ttu-id="95589-121">L'uso di PIVOT in una query ricorsiva dell'espressione di tabella comune genera risultati non corretti quando sono presenti più righe per raggruppamento.</span><span class="sxs-lookup"><span data-stu-id="95589-121">Using PIVOT in a recursive CTE query produces incorrect results when there is more than a single row per grouping.</span></span>|  
|<span data-ttu-id="95589-122">sp_setapprole e sp_unsetapprole</span><span class="sxs-lookup"><span data-stu-id="95589-122">sp_setapprole and sp_unsetapprole</span></span>|<span data-ttu-id="95589-123">Il parametro `OUTPUT` del cookie per `sp_setapprole` è disponibile attualmente come `varbinary(8000)` che è la lunghezza massima corretta.</span><span class="sxs-lookup"><span data-stu-id="95589-123">The cookie `OUTPUT` parameter for `sp_setapprole` is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="95589-124">Tuttavia, dall'implementazione corrente viene restituito `varbinary(50)`.</span><span class="sxs-lookup"><span data-stu-id="95589-124">However the current implementation returns `varbinary(50)`.</span></span> <span data-ttu-id="95589-125">Le applicazioni devono continuare a riservare `varbinary(8000)` in modo siano in grado di funzionare correttamente se le dimensioni restituite del cookie aumentano in una versione successiva.</span><span class="sxs-lookup"><span data-stu-id="95589-125">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="95589-126">Per altre informazioni, vedere [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="95589-126">For more information, see [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span></span>|  
|<span data-ttu-id="95589-127">EXECUTE AS</span><span class="sxs-lookup"><span data-stu-id="95589-127">EXECUTE AS</span></span>|<span data-ttu-id="95589-128">Il parametro OUTPUT del cookie per EXECUTE AS è attualmente disponibile come `varbinary(8000)` che rappresenta la lunghezza massima corretta.</span><span class="sxs-lookup"><span data-stu-id="95589-128">The cookie OUTPUT parameter for EXECUTE AS is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="95589-129">Tuttavia, dall'implementazione corrente viene restituito `varbinary(100)`.</span><span class="sxs-lookup"><span data-stu-id="95589-129">However the current implementation returns `varbinary(100)`.</span></span> <span data-ttu-id="95589-130">Le applicazioni devono continuare a riservare `varbinary(8000)` in modo siano in grado di funzionare correttamente se le dimensioni restituite del cookie aumentano in una versione successiva.</span><span class="sxs-lookup"><span data-stu-id="95589-130">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="95589-131">Per altre informazioni, vedere [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="95589-131">For more information, see [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span></span>|  
|<span data-ttu-id="95589-132">Funzione sys.fn_get_audit_file</span><span class="sxs-lookup"><span data-stu-id="95589-132">sys.fn_get_audit_file function</span></span>|<span data-ttu-id="95589-133">Sono state aggiunte due colonne aggiuntive (**user_defined_event_id** e **user_defined_information**) per supportare gli eventi di controllo definiti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="95589-133">Two additional columns (**user_defined_event_id** and **user_defined_information**) have been added to support user-defined audit events.</span></span> <span data-ttu-id="95589-134">Nelle applicazioni in cui le colonne non vengono selezionate in base al nome è possibile che venga restituito un numero di colonne maggiore del previsto.</span><span class="sxs-lookup"><span data-stu-id="95589-134">Applications that do not select columns by name might return more columns than expected.</span></span> <span data-ttu-id="95589-135">Selezionare le colonne in base al nome oppure modificare l'applicazione in modo che vengano accettate queste colonne aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="95589-135">Either select columns by name, or adjust the application to accept these additional columns.</span></span>|  
|<span data-ttu-id="95589-136">Parola chiave riservata WITHIN</span><span class="sxs-lookup"><span data-stu-id="95589-136">WITHIN reserved keyword</span></span>|<span data-ttu-id="95589-137">WITHIN è ora una parola chiave riservata.</span><span class="sxs-lookup"><span data-stu-id="95589-137">WITHIN is now a reserved keyword.</span></span> <span data-ttu-id="95589-138">I riferimenti a oggetti o colonne denominate 'within' avranno esito negativo.</span><span class="sxs-lookup"><span data-stu-id="95589-138">References to objects or columns named 'within' will fail.</span></span> <span data-ttu-id="95589-139">Rinominare l'oggetto o la colonna oppure delimitare il nome tramite parentesi quadre o virgolette,</span><span class="sxs-lookup"><span data-stu-id="95589-139">Rename the object or column name or delimit the name by using brackets or quotes.</span></span>  <span data-ttu-id="95589-140">Ad esempio: `SELECT * FROM [within]`.</span><span class="sxs-lookup"><span data-stu-id="95589-140">For example, `SELECT * FROM [within]`.</span></span>|  
|<span data-ttu-id="95589-141">Operazioni CAST e CONVERT su colonne calcolate di tipo `time` o `datetime2`</span><span class="sxs-lookup"><span data-stu-id="95589-141">CAST and CONVERT operations on computed columns of type `time` or `datetime2`</span></span>|<span data-ttu-id="95589-142">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] lo stile predefinito per le operazioni CAST e CONVERT sui tipi di dati `time` e `datetime2` è 121, tranne quando uno dei due tipi viene usato in un'espressione di colonna calcolata.</span><span class="sxs-lookup"><span data-stu-id="95589-142">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the default style for CAST and CONVERT operations on `time` and `datetime2` data types is 121 except when either type is used in a computed column expression.</span></span> <span data-ttu-id="95589-143">Per le colonne calcolate, lo stile predefinito è 0.</span><span class="sxs-lookup"><span data-stu-id="95589-143">For computed columns, the default style is 0.</span></span> <span data-ttu-id="95589-144">Questo comportamento influisce sulle colonne calcolate quando vengono create o usate nelle query con parametrizzazione automatica o nelle definizioni dei vincoli.</span><span class="sxs-lookup"><span data-stu-id="95589-144">This behavior impacts computed columns when they are created, used in queries involving auto-parameterization, or used in constraint definitions.</span></span><br /><br /> <span data-ttu-id="95589-145">Con il livello di compatibilità 110, lo stile predefinito per le operazioni CAST e CONVERT sui tipi di dati `time` e `datetime2` è sempre 121.</span><span class="sxs-lookup"><span data-stu-id="95589-145">Under compatibility level 110, the default style for CAST and CONVERT operations on `time` and `datetime2` data types is always 121.</span></span> <span data-ttu-id="95589-146">Se la query si basa sul comportamento obsoleto, usare un livello di compatibilità inferiore a 110 oppure specificare in modo esplicito lo stile 0 nella query interessata.</span><span class="sxs-lookup"><span data-stu-id="95589-146">If your query relies on the old behavior, use a compatibility level less than 110, or explicitly specify the 0 style in the affected query.</span></span><br /><br /> <span data-ttu-id="95589-147">L'aggiornamento del database al livello di compatibilità 110 non comporta la modifica dei dati utente archiviati su disco.</span><span class="sxs-lookup"><span data-stu-id="95589-147">Upgrading the database to compatibility level 110 will not change user data that has been stored to disk.</span></span> <span data-ttu-id="95589-148">È necessario correggere manualmente questi dati nel modo opportuno.</span><span class="sxs-lookup"><span data-stu-id="95589-148">You must manually correct this data as appropriate.</span></span> <span data-ttu-id="95589-149">Se ad esempio si usa SELECT INTO per creare una tabella da un'origine che contiene un'espressione di colonna calcolata descritta in precedenza, vengono archiviati i dati (con stile 0), non la definizione della colonna calcolata.</span><span class="sxs-lookup"><span data-stu-id="95589-149">For example, if you used SELECT INTO to create a table from a source that contained a computed column expression described above, the data (using style 0) would be stored rather than the computed column definition itself.</span></span> <span data-ttu-id="95589-150">Sarà necessario aggiornare manualmente questi dati in base allo stile 121.</span><span class="sxs-lookup"><span data-stu-id="95589-150">You would need to manually update this data to match style 121.</span></span>|  
|<span data-ttu-id="95589-151">MODIFICA TABELLA</span><span class="sxs-lookup"><span data-stu-id="95589-151">ALTER TABLE</span></span>|<span data-ttu-id="95589-152">L'istruzione ALTER TABLE supporta unicamente nomi di tabella in due parti (schema.oggetto).</span><span class="sxs-lookup"><span data-stu-id="95589-152">The ALTER TABLE statement allows only two-part (schema.object) table names.</span></span> <span data-ttu-id="95589-153">La specifica di un nome di tabella con i formati seguenti ha ora esito negativo in fase di compilazione con errore 117:</span><span class="sxs-lookup"><span data-stu-id="95589-153">Specifying a table name using the following formats now fails at compile time with error 117:</span></span><br /><br /> <span data-ttu-id="95589-154">server.database.schema.tabella</span><span class="sxs-lookup"><span data-stu-id="95589-154">server.database.schema.table</span></span><br /><br /> <span data-ttu-id="95589-155">.database.schema.tabella</span><span class="sxs-lookup"><span data-stu-id="95589-155">.database.schema.table</span></span><br /><br /> <span data-ttu-id="95589-156">..schema.tabella</span><span class="sxs-lookup"><span data-stu-id="95589-156">..schema.table</span></span><br /><br /> <span data-ttu-id="95589-157">Nelle versioni precedenti l'uso del formato server.database.schema.tabella genera l'errore 4902.</span><span class="sxs-lookup"><span data-stu-id="95589-157">In earlier versions specifying the format server.database.schema.table returned error 4902.</span></span> <span data-ttu-id="95589-158">L'uso del formato .database.schema.tabella o ..schema.tabella è supportato.</span><span class="sxs-lookup"><span data-stu-id="95589-158">Specifying the format .database.schema.table or the format ..schema.table succeeded.</span></span> <span data-ttu-id="95589-159">Per risolvere il problema, rimuovere l'uso di un prefisso in quattro parti.</span><span class="sxs-lookup"><span data-stu-id="95589-159">To resolve the problem, remove the use of a 4-part prefix.</span></span>|  
|<span data-ttu-id="95589-160">Esplorazione dei metadati</span><span class="sxs-lookup"><span data-stu-id="95589-160">Browsing metadata</span></span>|<span data-ttu-id="95589-161">L'esecuzione di una query su una vista tramite FOR BROWSE o SET NO_BROWSETABLE ON comporta la restituzione dei metadati della vista, non dell'oggetto sottostante.</span><span class="sxs-lookup"><span data-stu-id="95589-161">Querying a view using FOR BROWSE or SET NO_BROWSETABLE ON now returns the metadata of the view, not the metadata of the underlying object.</span></span> <span data-ttu-id="95589-162">Questo comportamento corrisponde ad altri metodi di esplorazione dei metadati.</span><span class="sxs-lookup"><span data-stu-id="95589-162">This behavior now matches other methods of browsing metadata.</span></span>|  
|<span data-ttu-id="95589-163">SOUNDEX</span><span class="sxs-lookup"><span data-stu-id="95589-163">SOUNDEX</span></span>|<span data-ttu-id="95589-164">Con il livello di compatibilità del database 110, la funzione SOUNDEX consente di implementare nuove regole che potrebbero generare una differenza tra i valori calcolati dalla funzione e quelli calcolati con livelli di compatibilità precedenti.</span><span class="sxs-lookup"><span data-stu-id="95589-164">Under database compatibility level 110, the SOUNDEX function implements new rules that may cause the values computed by the function to be different than the values computed under earlier compatibility levels.</span></span> <span data-ttu-id="95589-165">Dopo aver effettuato l'aggiornamento al livello di compatibilità 110, potrebbe essere necessario ricompilare gli indici, gli heap o i vincoli CHECK in cui viene usata la funzione SOUNDEX.</span><span class="sxs-lookup"><span data-stu-id="95589-165">After upgrading to compatibility level 110, you may need to rebuild the indexes, heaps, or CHECK constraints that use the SOUNDEX function.</span></span> <span data-ttu-id="95589-166">Per altre informazioni, vedere [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="95589-166">For more information, see [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql)</span></span>
|<span data-ttu-id="95589-167">Messaggio sul numero di righe per le istruzioni DML che hanno esito negativo</span><span class="sxs-lookup"><span data-stu-id="95589-167">Row count message for failed DML statements</span></span>|<span data-ttu-id="95589-168">In [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] il [!INCLUDE[ssDE](../includes/ssde-md.md)] invierà regolarmente il token TDS DONE con RowCount: 0 ai client quando un'istruzione DML ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="95589-168">In [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], the [!INCLUDE[ssDE](../includes/ssde-md.md)] will consistently send the TDS DONE token with RowCount: 0 to clients when a DML statement fails.</span></span> <span data-ttu-id="95589-169">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] un valore errato -1 viene inviato al client quando l'istruzione DML non riuscita si trova all'interno di un blocco TRY-CATCH e il [!INCLUDE[ssDE](../includes/ssde-md.md)] attiva la parametrizzazione automatica oppure il blocco TRY-CATCH non si trova sullo stesso livello dell'istruzione non riuscita.</span><span class="sxs-lookup"><span data-stu-id="95589-169">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], an incorrect value of -1 is sent to the client when the DML statement that fails is contained in a TRY-CATCH block and is either autoparameterized by the [!INCLUDE[ssDE](../includes/ssde-md.md)] or the TRY-CATCH block is not on the same level as the failed statement.</span></span> <span data-ttu-id="95589-170">Ad esempio, se un blocco TRY-CATCH chiama una stored procedure e un'istruzione DML nella procedura ha esito negativo, il client riceverà erroneamente un valore -1.</span><span class="sxs-lookup"><span data-stu-id="95589-170">For example, if a TRY-CATCH block calls a stored procedure and a DML statement in the procedure fails, the client will incorrectly receive a -1 value.</span></span><br /><br /> <span data-ttu-id="95589-171">Le applicazioni basate su questo comportamento errato avranno esito negativo.</span><span class="sxs-lookup"><span data-stu-id="95589-171">Applications that rely on this incorrect behavior will fail.</span></span>|  
|<span data-ttu-id="95589-172">SERVERPROPERTY ("edizione")</span><span class="sxs-lookup"><span data-stu-id="95589-172">SERVERPROPERTY ('Edition')</span></span>|<span data-ttu-id="95589-173">Edizione del prodotto installata per l'istanza di [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-173">Installed product edition of the instance of [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span></span> <span data-ttu-id="95589-174">Usare il valore di questa proprietà per determinare le funzionalità e i limiti, come il numero massimo di CPU, supportati dal prodotto installato.</span><span class="sxs-lookup"><span data-stu-id="95589-174">Use the value of this property to determine the features and the limits, such as maximum number of CPUs that are supported by the installed product.</span></span><br /><br /> <span data-ttu-id="95589-175">In base all'edizione Enterprise installata, può restituire ' Enterprise Edition ' o ' Enterprise Edition: licenze basate su Core '.</span><span class="sxs-lookup"><span data-stu-id="95589-175">Based on the installed Enterprise edition, this can return 'Enterprise Edition' or 'Enterprise Edition: Core-based Licensing'.</span></span> <span data-ttu-id="95589-176">Le edizioni Enterprise sono differenziate in base alla capacità di calcolo massima per una sola istanza di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-176">The Enterprise editions are differentiated based on the maximum compute capacity by a single instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95589-177">Per ulteriori informazioni sui limiti della capacità di calcolo in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] , vedere [limiti di capacità di calcolo per edizione di SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="95589-177">For more information on Compute capacity limits in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], see [Compute Capacity Limits by Edition of SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span></span>|  
|<span data-ttu-id="95589-178">CREATE LOGIN</span><span class="sxs-lookup"><span data-stu-id="95589-178">CREATE LOGIN</span></span>|<span data-ttu-id="95589-179">`CREATE LOGIN WITH PASSWORD = '` *password* `' HASHED` Non è possibile usare l'opzione password con hash creati da [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 o versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="95589-179">The `CREATE LOGIN WITH PASSWORD = '`*password*`' HASHED` option cannot be used with hashes created by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 or earlier.</span></span>|  
|<span data-ttu-id="95589-180">Operazioni CAST e CONVERT per `datetimeoffset`</span><span class="sxs-lookup"><span data-stu-id="95589-180">CAST and CONVERT operations for `datetimeoffset`</span></span>|<span data-ttu-id="95589-181">Gli unici stili supportati nella conversione di tipi date e time in `datetimeoffset` sono 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="95589-181">The only styles that are supported when converting from date and time types to `datetimeoffset` are 0 or 1.</span></span> <span data-ttu-id="95589-182">Tutti gli altri stili di conversione restituiscono l'errore 9809.</span><span class="sxs-lookup"><span data-stu-id="95589-182">All other conversion styles return error 9809.</span></span> <span data-ttu-id="95589-183">Il codice seguente, ad esempio, restituisce un errore 9809.</span><span class="sxs-lookup"><span data-stu-id="95589-183">For example, the following code returns error 9809.</span></span><br /><br /> `SELECT CONVERT(date, CAST('7070-11-25 16:25:01.00986 -02:07' as datetimeoffset(5)), 107);`|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="95589-184">DMV (Dynamic Management View)</span><span class="sxs-lookup"><span data-stu-id="95589-184">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="95589-185">Visualizza</span><span class="sxs-lookup"><span data-stu-id="95589-185">View</span></span>|<span data-ttu-id="95589-186">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-186">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="95589-187">sys.dm_exec_requests</span><span class="sxs-lookup"><span data-stu-id="95589-187">sys.dm_exec_requests</span></span>|<span data-ttu-id="95589-188">La colonna del comando viene modificata da `nvarchar(16)` a `nvarchar(32)`.</span><span class="sxs-lookup"><span data-stu-id="95589-188">The command column changes from `nvarchar(16)` to `nvarchar(32)`.</span></span>|  
|<span data-ttu-id="95589-189">sys.dm_os_memory_cache_counters</span><span class="sxs-lookup"><span data-stu-id="95589-189">sys.dm_os_memory_cache_counters</span></span>|<span data-ttu-id="95589-190">Le colonne seguenti sono state rinominate:</span><span class="sxs-lookup"><span data-stu-id="95589-190">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="95589-191">single_pages_kb è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-191">single_pages_kb is now:</span></span> <br />                          <span data-ttu-id="95589-192">pages_kb</span><span class="sxs-lookup"><span data-stu-id="95589-192">pages_kb</span></span><br /><br /> <span data-ttu-id="95589-193">multi_pages_kb</span><span class="sxs-lookup"><span data-stu-id="95589-193">multi_pages_kb</span></span><br />                           <span data-ttu-id="95589-194">è ora: pages_in_use_kb</span><span class="sxs-lookup"><span data-stu-id="95589-194">is now: pages_in_use_kb</span></span>|  
|<span data-ttu-id="95589-195">sys.dm_os_memory_cache_entries</span><span class="sxs-lookup"><span data-stu-id="95589-195">sys.dm_os_memory_cache_entries</span></span>|<span data-ttu-id="95589-196">La colonna pages_allocated_count colonna è stata rinominata pages_kb.</span><span class="sxs-lookup"><span data-stu-id="95589-196">The column pages_allocated_count column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="95589-197">sys.dm_os_memory_clerks</span><span class="sxs-lookup"><span data-stu-id="95589-197">sys.dm_os_memory_clerks</span></span>|<span data-ttu-id="95589-198">La colonna multi_pages_kb è stata rimossa.</span><span class="sxs-lookup"><span data-stu-id="95589-198">The column multi_pages_kb has been removed.</span></span><br /><br /> <span data-ttu-id="95589-199">La colonna single_pages_kb colonna è stata rinominata pages_kb.</span><span class="sxs-lookup"><span data-stu-id="95589-199">The column single_pages_kb column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="95589-200">sys.dm_os_memory_nodes</span><span class="sxs-lookup"><span data-stu-id="95589-200">sys.dm_os_memory_nodes</span></span>|<span data-ttu-id="95589-201">Le colonne seguenti sono state rinominate:</span><span class="sxs-lookup"><span data-stu-id="95589-201">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="95589-202">single_pages_kb è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-202">single_pages_kb is now:</span></span> <br />                            <span data-ttu-id="95589-203">pages_kb</span><span class="sxs-lookup"><span data-stu-id="95589-203">pages_kb</span></span><br /><br /> <span data-ttu-id="95589-204">multi_pages_kb è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-204">multi_pages_kb is now:</span></span> <br />                            <span data-ttu-id="95589-205">foreign_committed_kb</span><span class="sxs-lookup"><span data-stu-id="95589-205">foreign_committed_kb</span></span>|  
|<span data-ttu-id="95589-206">sys.dm_os_memory_objects</span><span class="sxs-lookup"><span data-stu-id="95589-206">sys.dm_os_memory_objects</span></span>|<span data-ttu-id="95589-207">Le colonne seguenti sono state rinominate.</span><span class="sxs-lookup"><span data-stu-id="95589-207">The following columns have been renamed.</span></span><br /><br /> <span data-ttu-id="95589-208">pages_allocated_count è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-208">pages_allocated_count is now:</span></span><br />                            <span data-ttu-id="95589-209">pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="95589-209">pages_in_bytes</span></span><br /><br /> <span data-ttu-id="95589-210">max_pages_allocated_count è ora: max_pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="95589-210">max_pages_allocated_count is now: max_pages_in_bytes</span></span>|  
|<span data-ttu-id="95589-211">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="95589-211">sys.dm_os_sys_info</span></span>|<span data-ttu-id="95589-212">Le colonne seguenti sono state rinominate:</span><span class="sxs-lookup"><span data-stu-id="95589-212">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="95589-213">physical_memory_in_bytes è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-213">physical_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="95589-214">physical_memory_kb</span><span class="sxs-lookup"><span data-stu-id="95589-214">physical_memory_kb</span></span><br /><br /> <span data-ttu-id="95589-215">bpool_commit_target è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-215">bpool_commit_target is now:</span></span> <br />                            <span data-ttu-id="95589-216">committed_target_kb</span><span class="sxs-lookup"><span data-stu-id="95589-216">committed_target_kb</span></span><br /><br /> <span data-ttu-id="95589-217">bpool_visible è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-217">bpool_visible is now:</span></span> <br />                            <span data-ttu-id="95589-218">visible_target_kb</span><span class="sxs-lookup"><span data-stu-id="95589-218">visible_target_kb</span></span><br /><br /> <span data-ttu-id="95589-219">virtual_memory_in_bytes è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-219">virtual_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="95589-220">virtual_memory_kb</span><span class="sxs-lookup"><span data-stu-id="95589-220">virtual_memory_kb</span></span><br /><br /> <span data-ttu-id="95589-221">bpool_commited è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-221">bpool_commited is now:</span></span><br />                            <span data-ttu-id="95589-222">committed_kb</span><span class="sxs-lookup"><span data-stu-id="95589-222">committed_kb</span></span>|  
|<span data-ttu-id="95589-223">sys.dm_os_workers</span><span class="sxs-lookup"><span data-stu-id="95589-223">sys.dm_os_workers</span></span>|<span data-ttu-id="95589-224">La colonna delle impostazioni locali è stata rimossa.</span><span class="sxs-lookup"><span data-stu-id="95589-224">The locale column has been removed.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="95589-225">Viste del catalogo</span><span class="sxs-lookup"><span data-stu-id="95589-225">Catalog Views</span></span>  
  
|<span data-ttu-id="95589-226">Visualizza</span><span class="sxs-lookup"><span data-stu-id="95589-226">View</span></span>|<span data-ttu-id="95589-227">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-227">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="95589-228">sys.data_spaces</span><span class="sxs-lookup"><span data-stu-id="95589-228">sys.data_spaces</span></span><br /><br /> <span data-ttu-id="95589-229">sys.partition_schemes</span><span class="sxs-lookup"><span data-stu-id="95589-229">sys.partition_schemes</span></span><br /><br /> <span data-ttu-id="95589-230">sys.filegroups</span><span class="sxs-lookup"><span data-stu-id="95589-230">sys.filegroups</span></span><br /><br /> <span data-ttu-id="95589-231">sys.partition_functions</span><span class="sxs-lookup"><span data-stu-id="95589-231">sys.partition_functions</span></span>|<span data-ttu-id="95589-232">Una colonna nuova, is_system, è stata aggiunta a sys.data_spaces e a sys.partition_functions.</span><span class="sxs-lookup"><span data-stu-id="95589-232">A new column, is_system, has been added to sys.data_spaces and sys.partition_functions.</span></span> <span data-ttu-id="95589-233">sys.partition_schemes e sys.filegroups ereditano le colonne di sys.data_spaces.</span><span class="sxs-lookup"><span data-stu-id="95589-233">(sys.partition_schemes and sys.filegroups inherit the columns of sys.data_spaces.)</span></span><br /><br /> <span data-ttu-id="95589-234">Un valore 1 in questa colonna indica che l'oggetto viene usato per i frammenti dell'indice full-text.</span><span class="sxs-lookup"><span data-stu-id="95589-234">A value of 1 in this column indicates that the object is used for full-text index fragments.</span></span><br /><br /> <span data-ttu-id="95589-235">In sys.partition_functions, sys.partition_schemes e sys.filegroups, la nuova colonna non è l'ultima.</span><span class="sxs-lookup"><span data-stu-id="95589-235">In sys.partition_functions, sys.partition_schemes, and sys.filegroups, the new column is not the last column.</span></span> <span data-ttu-id="95589-236">Rivedere le query esistenti basate sull'ordine delle colonne restituito da queste viste del catalogo.</span><span class="sxs-lookup"><span data-stu-id="95589-236">Revise existing queries that rely on the order of columns returned from these catalog views.</span></span>|  
  
### <a name="sql-clr-data-types-geometry-geography-and-hierarchyid"></a><span data-ttu-id="95589-237">Tipi di dati CLR SQL (hierarchyid, geometry e geography)</span><span class="sxs-lookup"><span data-stu-id="95589-237">SQL CLR Data Types (geometry, geography, and hierarchyid)</span></span>  
 <span data-ttu-id="95589-238">L'assembly **Microsoft.SqlServer.Types.dll**, che contiene i tipi di dati spaziali e il tipo hierarchyid, è stato aggiornato dalla versione 10,0 alla versione 11,0.</span><span class="sxs-lookup"><span data-stu-id="95589-238">The assembly **Microsoft.SqlServer.Types.dll**, which contains the spatial data types and the hierarchyid type, has been upgraded from version 10.0 to version 11.0.</span></span> <span data-ttu-id="95589-239">È possibile che le applicazioni personalizzate che fanno riferimento a questo assembly abbiano esito negativo quando sussistono le condizioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="95589-239">Custom applications that reference this assembly may fail when the following conditions are true.</span></span>  
  
-   <span data-ttu-id="95589-240">Quando si sposta un'applicazione personalizzata da un computer in cui è [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] stato installato in un computer in cui [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] è installato solo, l'applicazione avrà esito negativo perché la versione 10,0 dell'assembly **SqlTypes** a cui viene fatto riferimento non è presente.</span><span class="sxs-lookup"><span data-stu-id="95589-240">When you move a custom application from a computer on which [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] was installed to a computer on which only [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] is installed, the application will fail because the referenced version 10.0 of the **SqlTypes** assembly is not present.</span></span> <span data-ttu-id="95589-241">È possibile che venga visualizzato questo messaggio di errore: `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span><span class="sxs-lookup"><span data-stu-id="95589-241">You may see this error message: `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span></span>  
  
-   <span data-ttu-id="95589-242">Quando si fa riferimento all'assembly **SqlTypes** versione 11,0 e viene installata anche la versione 10,0, è possibile che venga visualizzato questo messaggio di errore:`"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span><span class="sxs-lookup"><span data-stu-id="95589-242">When you reference the **SqlTypes** assembly version 11.0, and version 10.0 is also installed, you may see this error message: `"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span></span>  
  
-   <span data-ttu-id="95589-243">Quando si fa riferimento all'assembly **SqlTypes** versione 11,0 da un'applicazione personalizzata destinata a .NET 3,5, 4 o 4,5, l'applicazione avrà esito negativo perché SqlClient per progettazione carica la versione 10,0 dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="95589-243">When you reference the **SqlTypes** assembly version 11.0 from a custom application that targets .NET 3.5, 4, or 4.5, the application will fail because SqlClient by design loads version 10.0 of the assembly.</span></span> <span data-ttu-id="95589-244">Questo errore si verifica quando l'applicazione chiama uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-244">This failure occurs when the application calls one of the following methods:</span></span>  
  
    -   <span data-ttu-id="95589-245">Metodo `GetValue` della classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="95589-245">`GetValue` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="95589-246">Metodo `GetValues` della classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="95589-246">`GetValues` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="95589-247">Operatore di indice parentesi quadre [] della classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="95589-247">bracket index operator [] of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="95589-248">Metodo `ExecuteScalar` della classe `SqlCommand`</span><span class="sxs-lookup"><span data-stu-id="95589-248">`ExecuteScalar` method of the `SqlCommand` class</span></span>  
  
 <span data-ttu-id="95589-249">È possibile risolvere questo problema usando uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-249">You can work around this issue by using one of the following methods:</span></span>  
  
-   <span data-ttu-id="95589-250">È possibile risolvere questo problema nel codice chiamando il metodo `GetSqlBytes`, anziché i metodi Get elencati in precedenza, per recuperare i tipi di sistema CLR di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="95589-250">You can work around this issue in your code by calling the `GetSqlBytes` method, instead of the Get methods listed above, to retrieve CLR [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] system types, as shown in the following example:</span></span>  
  
    ```csharp  
    string query = "SELECT [SpatialColumn] FROM [SpatialTable]";  
          using (SqlConnection conn = new SqlConnection("..."))  
          {  
                SqlCommand cmd = new SqlCommand(query, conn);  
  
                conn.Open();  
                SqlDataReader reader = cmd.ExecuteReader();  
  
                while (reader.Read())  
                {  
                      // In version 11.0 only  
                      SqlGeometry g =   
    SqlGeometry.Deserialize(reader.GetSqlBytes(0));  
  
                      // In version 10.0 or 11.0  
                      SqlGeometry g2 = new SqlGeometry();  
                      g.Read(new BinaryReader(reader.GetSqlBytes(0).Stream));  
                }  
          }  
    ```  
  
-   <span data-ttu-id="95589-251">È possibile risolvere questo problema usando il reindirizzamento degli assembly nel file di configurazione dell'applicazione, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="95589-251">You can work around this issue by using assembly redirection in the application configuration file, as shown in the following example:</span></span>  
  
    ```xml  
    <runtime>  
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
        ...  
        <dependentAssembly>  
            <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />  
            <bindingRedirect oldVersion="10.0.0.0" newVersion="11.0.0.0" />  
        </dependentAssembly>  
        ...  
    </assemblyBinding>  
    <runtime>  
    ```  
  
-   <span data-ttu-id="95589-252">È possibile risolvere questo problema nella stringa di connessione specificando il valore "SQL Server 2012" per l'attributo "Type System Version" per forzare il caricamento della versione 11.0 dell'assembly da parte di SqlClient.</span><span class="sxs-lookup"><span data-stu-id="95589-252">You can work around this issue in your connection string by specifying a value of "SQL Server 2012" for the "Type System Version" attribute to force SqlClient to load version 11.0 of the assembly.</span></span> <span data-ttu-id="95589-253">Questo attributo della stringa di connessione è disponibile unicamente in .NET 4.5 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="95589-253">This connection string attribute is available only in .NET 4.5 and above.</span></span>  
  
-   <span data-ttu-id="95589-254">È consigliabile includere il tag `assemblyBinding` nel tag `runtime`.</span><span class="sxs-lookup"><span data-stu-id="95589-254">The `assemblyBinding` tag should be wrapped under the `runtime` tag.</span></span>  
  
### <a name="support-for-awe"></a><span data-ttu-id="95589-255">Supporto per AWE</span><span class="sxs-lookup"><span data-stu-id="95589-255">Support for AWE</span></span>  
 <span data-ttu-id="95589-256">Address Windowing Extensions (AWE) a 32 bit non è più supportato.</span><span class="sxs-lookup"><span data-stu-id="95589-256">32-bit Address Windowing Extensions (AWE) support is discontinued.</span></span> <span data-ttu-id="95589-257">Ciò potrebbe comportare un calo delle prestazioni nei sistemi operativi a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="95589-257">This might result in slower performance on 32-bit operating systems.</span></span> <span data-ttu-id="95589-258">Per installazioni che richiedono grandi quantità di memoria, eseguire la migrazione a un sistema operativo a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="95589-258">For installations using large amounts of memory, migrate to a 64-bit operating system.</span></span>  
  
### <a name="xquery-functions-are-surrogate-aware"></a><span data-ttu-id="95589-259">Le funzioni XQuery riconoscono i surrogati</span><span class="sxs-lookup"><span data-stu-id="95589-259">XQuery Functions Are Surrogate-Aware</span></span>  
 <span data-ttu-id="95589-260">L'indicazione W3C per gli operatori e le funzioni XQuery richiede il riconoscimento di una coppia di surrogati che rappresenti un carattere Unicode surrogato alto come un singolo glifo nella codifica UTF-16.</span><span class="sxs-lookup"><span data-stu-id="95589-260">The W3C recommendation for XQuery functions and operators requires them to count a surrogate pair that represents a high-range Unicode character as a single glyph in UTF-16 encoding.</span></span> <span data-ttu-id="95589-261">Tuttavia, nelle versioni di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] precedenti a [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], le funzioni stringa non riconoscono le coppie di surrogati come singolo carattere.</span><span class="sxs-lookup"><span data-stu-id="95589-261">However, in versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], string functions did not recognize surrogate pairs as a single character.</span></span> <span data-ttu-id="95589-262">Alcune operazioni di stringa, ad esempio i calcoli di lunghezza delle stringhe e le estrazioni di sottostringhe, restituiscono risultati non corretti.</span><span class="sxs-lookup"><span data-stu-id="95589-262">Some string operations - such as string length calculations and substring extractions - returned incorrect results.</span></span> [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] <span data-ttu-id="95589-263">supporta ora il formato UTF-16 e la gestione corretta di coppie di surrogati.</span><span class="sxs-lookup"><span data-stu-id="95589-263">now fully supports UTF-16 and the correct handling of surrogate pairs.</span></span>  
  
 <span data-ttu-id="95589-264">Il tipo di dati XML in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] consente unicamente coppie di surrogati con formati corretti.</span><span class="sxs-lookup"><span data-stu-id="95589-264">The XML data type in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] only allows well-formed surrogate pairs.</span></span> <span data-ttu-id="95589-265">In alcune circostanze alcune funzioni possono tuttavia restituire ancora risultati non definiti o non previsti, poiché è possibile passare coppie di surrogati parziali o non valide alle funzioni XQuery come valori stringa.</span><span class="sxs-lookup"><span data-stu-id="95589-265">However, some functions can still return undefined or unexpected results in certain circumstances, since it is possible to pass invalid or partial surrogate pairs to XQuery functions as string values.</span></span> <span data-ttu-id="95589-266">Si considerino i metodi seguenti per la generazione di valori stringa quando si usa XQuery in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="95589-266">Consider the following methods for generating string values when using XQuery in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="95589-267">Fornire un valore stringa costante come valore binario.</span><span class="sxs-lookup"><span data-stu-id="95589-267">Provide a constant string value as a binary value.</span></span> <span data-ttu-id="95589-268">Quando si usa questo metodo, è ancora possibile passare coppie di surrogati non valide o parziali.</span><span class="sxs-lookup"><span data-stu-id="95589-268">When using this method, it remains possible to pass invalid or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="95589-269">Fornire un valore stringa costante fornendo entità carattere.</span><span class="sxs-lookup"><span data-stu-id="95589-269">Provide a constant string value by providing character entities.</span></span> <span data-ttu-id="95589-270">Quando si usa questo metodo, non è possibile passare coppie di surrogati non valide.</span><span class="sxs-lookup"><span data-stu-id="95589-270">When using this method, it is not possible to pass invalid surrogate pairs.</span></span> <span data-ttu-id="95589-271">Le funzioni XQuery richiedono un'entità a singolo carattere per il carattere di alto livello.</span><span class="sxs-lookup"><span data-stu-id="95589-271">The XQuery functions require a single character entity for the high-level character.</span></span> <span data-ttu-id="95589-272">Viene generato un errore se vengono fornite le entità carattere per i caratteri della coppia di surrogati.</span><span class="sxs-lookup"><span data-stu-id="95589-272">These functions raise an error if the character entities for the surrogate pair characters are provided.</span></span>  
  
-   <span data-ttu-id="95589-273">Importare valori esterni tramite **SQL: column** o **SQL: Variable**.</span><span class="sxs-lookup"><span data-stu-id="95589-273">Import external values by using **sql:column** or **sql:variable**.</span></span> <span data-ttu-id="95589-274">Quando si usano questi metodi, è ancora possibile introdurre coppie di surrogati non valide o parziali.</span><span class="sxs-lookup"><span data-stu-id="95589-274">When using these methods, it remains possible to introduce invalid or partial surrogate pairs.</span></span>  
  
#### <a name="affected-xquery-functions-and-operators"></a><span data-ttu-id="95589-275">Funzioni e operatori XQuery interessati</span><span class="sxs-lookup"><span data-stu-id="95589-275">Affected XQuery Functions and Operators</span></span>  
 <span data-ttu-id="95589-276">Gli operatori e le funzioni XQuery seguenti gestiscono correttamente le coppie di surrogati UTF-16 in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="95589-276">The following XQuery functions and operators now handle UTF-16 surrogate pairs correctly in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]:</span></span>  
  
-   <span data-ttu-id="95589-277">**FN: String-length**.</span><span class="sxs-lookup"><span data-stu-id="95589-277">**fn:string-length**.</span></span> <span data-ttu-id="95589-278">Tuttavia, se una coppia di surrogati non valida o parziale viene passata come argomento, il comportamento della **lunghezza della stringa** non è definito.</span><span class="sxs-lookup"><span data-stu-id="95589-278">However, if an invalid or partial surrogate pair is passed as an argument, the behavior of **string-length** is undefined.</span></span>  
  
-   <span data-ttu-id="95589-279">**FN: substring**.</span><span class="sxs-lookup"><span data-stu-id="95589-279">**fn:substring**.</span></span>  
  
-   <span data-ttu-id="95589-280">**FN: Contains**.</span><span class="sxs-lookup"><span data-stu-id="95589-280">**fn:contains**.</span></span> <span data-ttu-id="95589-281">Tuttavia, se una coppia di surrogati parziale viene passata come valore, **Contains** può restituire risultati imprevisti, perché potrebbe trovare la coppia di surrogati parziale contenuta in una coppia di surrogati ben formata.</span><span class="sxs-lookup"><span data-stu-id="95589-281">However, if a partial surrogate pair is passed as a value, **contains** may return unexpected results, since it may find the partial surrogate pair contained in well-formed surrogate pair.</span></span>  
  
-   <span data-ttu-id="95589-282">**FN: Concat**.</span><span class="sxs-lookup"><span data-stu-id="95589-282">**fn:concat**.</span></span> <span data-ttu-id="95589-283">Tuttavia, se una coppia di surrogati parziale viene passata come valore, **Concat** può produrre coppie di surrogati non corrette o coppie di surrogati parziali.</span><span class="sxs-lookup"><span data-stu-id="95589-283">However, if a partial surrogate pair is passed as a value, **concat** can produce incorrect surrogate pairs or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="95589-284">Operatori di confronto e clausola **Order by** .</span><span class="sxs-lookup"><span data-stu-id="95589-284">Comparison operators and the **order by** clause.</span></span> <span data-ttu-id="95589-285">Gli operatori di confronto includono +, \<, > , \<=, > =, `eq` , `lt` , `gt` , `le` e `ge` .</span><span class="sxs-lookup"><span data-stu-id="95589-285">Comparison operators include +, \<, >, \<=, >=, `eq`, `lt`, `gt`, `le`, and `ge`.</span></span>  
  
#### <a name="distributed-query-calls-to-a-system-procedure"></a><span data-ttu-id="95589-286">Chiamate di query distribuite a una procedura di sistema</span><span class="sxs-lookup"><span data-stu-id="95589-286">Distributed Query Calls to a System Procedure</span></span>  
 <span data-ttu-id="95589-287">Le chiamate di query distribuite tramite `OPENQUERY` ad alcune procedure di sistema avranno esito negativo se chiamate da un server [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] a un altro.</span><span class="sxs-lookup"><span data-stu-id="95589-287">Distributed query calls through `OPENQUERY` to some system procedures will fail when called from one [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] server to another.</span></span> <span data-ttu-id="95589-288">Si verifica se il [!INCLUDE[ssDE](../includes/ssde-md.md)] non è in grado di individuare i metadati per una procedura,</span><span class="sxs-lookup"><span data-stu-id="95589-288">This occurs when the [!INCLUDE[ssDE](../includes/ssde-md.md)] cannot discovery metadata for a procedure.</span></span> <span data-ttu-id="95589-289">Ad esempio: `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span><span class="sxs-lookup"><span data-stu-id="95589-289">For example, `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span></span>  
  
#### <a name="isolation-level-and-sp_reset_connection"></a><span data-ttu-id="95589-290">Livello di isolamento e sp_reset_connection</span><span class="sxs-lookup"><span data-stu-id="95589-290">Isolation Level and sp_reset_connection</span></span>  
 <span data-ttu-id="95589-291">Il livello di isolamento per le connessioni viene gestito nel modo seguente dai driver client:</span><span class="sxs-lookup"><span data-stu-id="95589-291">The isolation level for connections is handled in the following way by client drivers:</span></span>  
  
-   <span data-ttu-id="95589-292">Tutti i driver nativi (ODBC SNAC, MDAC) impostano il livello di isolamento (in base all'impostazione dell'app) su sp_reset_connection.</span><span class="sxs-lookup"><span data-stu-id="95589-292">All of the native drivers (SNAC, MDAC, ODBC) set the isolation level (based on app setting) upon sp_reset_connection.</span></span>  
  
-   <span data-ttu-id="95589-293">Per ADO.NET essenzialmente si otterrà un livello di isolamento casuale a seconda della connessione che si ottiene dal pool (e se l'applicazione usa un livello di isolamento diverso).</span><span class="sxs-lookup"><span data-stu-id="95589-293">For ADO.NET you will essentially get a random isolation level depending on which connection you get from the pool (and if the application uses different isolation level).</span></span> <span data-ttu-id="95589-294">Poiché il pool ADO.NET può riciclare connessioni internamente e in modo trasparente, non è possibile prevedere cosa proverrà dal pool.</span><span class="sxs-lookup"><span data-stu-id="95589-294">Since ADO.NET pool can recycle connections internally and transparently, you cannot predict what will come out of the pool.</span></span>  
  
-   <span data-ttu-id="95589-295">Per il driver JDBC si ottiene lo stesso comportamento osservato per ADO.NET</span><span class="sxs-lookup"><span data-stu-id="95589-295">For the JDBC driver you get same behavior as ADO.NET</span></span>  
  
     <span data-ttu-id="95589-296">Per ottenere quanto previsto, l'applicazione deve impostare sempre in modo esplicito il livello di isolamento dopo l'apertura della connessione.</span><span class="sxs-lookup"><span data-stu-id="95589-296">The application must always explicitly set isolation level after opening the connection to get what it wants.</span></span>  
  
     <span data-ttu-id="95589-297">La connessione JDBC può essere inserita in pool, pertanto l'applicazione potrebbe ricevere un livello di isolamento casuale senza esserne al corrente.</span><span class="sxs-lookup"><span data-stu-id="95589-297">The JDBC connection can be pooled, so the application may get a random isolation level and not know about it.</span></span>  
  
 <span data-ttu-id="95589-298">Per mantenere la compatibilità con le versioni precedenti, questo nuovo comportamento si applica solo ai client recenti a partire da TDS 7.4.</span><span class="sxs-lookup"><span data-stu-id="95589-298">To preserve backward compatibility this new behavior only applies for recent clients beginning with TDS 7.4.</span></span>  
  
#### <a name="backward-compatibility"></a><span data-ttu-id="95589-299">Backward Compatibility</span><span class="sxs-lookup"><span data-stu-id="95589-299">Backward Compatibility</span></span>  
 <span data-ttu-id="95589-300">**Il nuovo comportamento dipende dal livello di compatibilità**</span><span class="sxs-lookup"><span data-stu-id="95589-300">**New behavior depends on compatibility level**</span></span>  
  
 <span data-ttu-id="95589-301">Le funzioni e gli operatori seguenti dimostrano il nuovo comportamento descritto in precedenza solo quando il livello di compatibilità è 110 o superiore:</span><span class="sxs-lookup"><span data-stu-id="95589-301">The following functions and operators demonstrate the new behavior described above only when the compatibility level is 110 or higher:</span></span>  
  
-   <span data-ttu-id="95589-302">**FN: Contains**.</span><span class="sxs-lookup"><span data-stu-id="95589-302">**fn:contains**.</span></span>  
  
-   <span data-ttu-id="95589-303">**FN: Concat**.</span><span class="sxs-lookup"><span data-stu-id="95589-303">**fn:concat**.</span></span>  
  
-   <span data-ttu-id="95589-304">operatori di confronto e clausola **Order by**</span><span class="sxs-lookup"><span data-stu-id="95589-304">comparison operators and **order by** clause</span></span>  
  
 <span data-ttu-id="95589-305">**Il nuovo comportamento dipende dall'URI dello spazio dei nomi predefinito per le funzioni**</span><span class="sxs-lookup"><span data-stu-id="95589-305">**New behavior depends on default namespace URI for functions**</span></span>  
  
 <span data-ttu-id="95589-306">Le funzioni seguenti illustrano il nuovo comportamento descritto sopra solo quando l'URI dello spazio dei nomi predefinito corrisponde allo spazio dei nomi nell'indicazione finale, ovvero [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions) .</span><span class="sxs-lookup"><span data-stu-id="95589-306">The following functions demonstrate the new behavior described above only when the default namespace URI corresponds to the namespace in the final recommendation, that is, [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions).</span></span> <span data-ttu-id="95589-307">Quando il livello di compatibilità è impostato su 110 o su un valore superiore, per impostazione predefinita [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] associa lo spazio dei nomi della funzione predefinita a questo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="95589-307">When the compatibility level is 110 or higher, then by default [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] binds the default function namespace to this namespace.</span></span> <span data-ttu-id="95589-308">Tuttavia, queste funzioni dimostrano il nuovo comportamento quando questo spazio dei nomi viene usato indipendentemente dal livello di compatibilità.</span><span class="sxs-lookup"><span data-stu-id="95589-308">However these functions demonstrate the new behavior when this namespace is used regardless of the compatibility level.</span></span>  
  
-   <span data-ttu-id="95589-309">**fn:string-length**</span><span class="sxs-lookup"><span data-stu-id="95589-309">**fn:string-length**</span></span>  
  
-   <span data-ttu-id="95589-310">**FN: substring**</span><span class="sxs-lookup"><span data-stu-id="95589-310">**fn:substring**</span></span>  
  
##  <a name="breaking-changes-in-sql-server-2008sql-server-2008r2"></a><a name="KJKatmai"></a><span data-ttu-id="95589-311">Modifiche di rilievo in SQL Server 2008/SQL Server 2008R2</span><span class="sxs-lookup"><span data-stu-id="95589-311">Breaking Changes in SQL Server 2008/SQL Server 2008R2</span></span>  
 <span data-ttu-id="95589-312">In questa sezione si illustrano le modifiche di rilievo introdotte in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-312">This section contains the breaking changes introduced in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-313">Nessuna modifica è stata introdotta in [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-313">No changes were introduced in [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)].</span></span>  
  
### <a name="collations"></a><span data-ttu-id="95589-314">Regole di confronto</span><span class="sxs-lookup"><span data-stu-id="95589-314">Collations</span></span>  
  
|<span data-ttu-id="95589-315">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-315">Feature</span></span>|<span data-ttu-id="95589-316">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-316">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-317">Nuove regole di confronto</span><span class="sxs-lookup"><span data-stu-id="95589-317">New collations</span></span>|<span data-ttu-id="95589-318">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] sono state introdotte nuove regole di confronto completamente allineate a quelle disponibili in Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="95589-318">[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] introduces new collations that are in full alignment with the collations provided by Windows Server 2008.</span></span> <span data-ttu-id="95589-319">Queste 80 nuove regole di confronto presentano miglioramenti nell'aspetto linguistico e sono state segnalate con i riferimenti di versione \*_100.</span><span class="sxs-lookup"><span data-stu-id="95589-319">These 80 new collations have improved linguistic accuracy and are denoted by \*_100 version references.</span></span> <span data-ttu-id="95589-320">Se si scelgono nuove regole di confronto per il server o il database, è necessario tenere presente che esiste la possibilità che non vengano riconosciute dai client con versioni di driver client precedenti.</span><span class="sxs-lookup"><span data-stu-id="95589-320">If you choose a new collation for your server or database, be aware that the collation may not be recognized by clients with older client drivers.</span></span> <span data-ttu-id="95589-321">Le regole di confronto non riconosciute possono determinare la restituzione di errori da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="95589-321">Unrecognized collations can cause the application to return errors and fail.</span></span> <span data-ttu-id="95589-322">Prendere in considerazione le soluzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-322">Consider the following solutions:</span></span><br /><br /> <span data-ttu-id="95589-323">Aggiornare il sistema operativo client affinché vengano aggiornate le regole di confronto del sistema sottostanti.</span><span class="sxs-lookup"><span data-stu-id="95589-323">Upgrade the client operating system so that the underlying system collations are updated.</span></span><br /><br /> <span data-ttu-id="95589-324">Se nel client è installato software client del database, è possibile applicare un aggiornamento dei servizi a tale software.</span><span class="sxs-lookup"><span data-stu-id="95589-324">If your client has database client software installed, consider applying a service update to the database client software.</span></span><br /><br /> <span data-ttu-id="95589-325">Scegliere regole di confronto esistenti di cui viene eseguito il mapping a una tabella codici nel client.</span><span class="sxs-lookup"><span data-stu-id="95589-325">Choose an existing collation that maps to a code page on the client.</span></span>|  
  
### <a name="common-language-runtime-clr"></a><span data-ttu-id="95589-326">Common Language Runtime (CLR)</span><span class="sxs-lookup"><span data-stu-id="95589-326">Common Language Runtime (CLR)</span></span>  
  
|<span data-ttu-id="95589-327">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-327">Feature</span></span>|<span data-ttu-id="95589-328">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-328">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-329">Assembly CLR</span><span class="sxs-lookup"><span data-stu-id="95589-329">CLR Assemblies</span></span>|<span data-ttu-id="95589-330">Quando un database viene aggiornato a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], viene automaticamente installato l'assembly `Microsoft.SqlServer.Types` per il supporto dei nuovi tipi di dati.</span><span class="sxs-lookup"><span data-stu-id="95589-330">When a database is upgraded to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the `Microsoft.SqlServer.Types` assembly to support new data types is automatically installed.</span></span> <span data-ttu-id="95589-331">Le regole di Preparazione aggiornamento rilevano qualsiasi tipo di utente o assembly con nomi in conflitto.</span><span class="sxs-lookup"><span data-stu-id="95589-331">Upgrade Advisor rules detect any user type or assemblies with conflicting names.</span></span> <span data-ttu-id="95589-332">Viene quindi indicato di rinominare gli assembly in conflitto, nonché di rinominare qualsiasi tipo in conflitto o di usare nomi in due parti nel codice per fare riferimento al tipo di utente preesistente.</span><span class="sxs-lookup"><span data-stu-id="95589-332">The Upgrade Advisor will advise renaming of any conflicting assembly, and either renaming any conflicting type, or using two-part names in the code to refer to that preexisting user type.</span></span><br /><br /> <span data-ttu-id="95589-333">Se un aggiornamento del database rileva un assembly utente con nome in conflitto, rinominerà automaticamente l'assembly e metterà il database in modalità sospetta.</span><span class="sxs-lookup"><span data-stu-id="95589-333">If a database upgrade detects a user assembly with a conflicting name, it will automatically rename that assembly and put the database into suspect mode.</span></span><br /><br /> <span data-ttu-id="95589-334">Se durante l'aggiornamento esiste un utente con nome in conflitto, non viene eseguita alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="95589-334">If a user type with conflicting name exists during the upgrade, no special steps are taken.</span></span> <span data-ttu-id="95589-335">Dopo l'aggiornamento, esisteranno sia il tipo di utente obsoleto che il nuovo tipo di sistema.</span><span class="sxs-lookup"><span data-stu-id="95589-335">After the upgrade, both the old user type, and the new system type, will exist.</span></span> <span data-ttu-id="95589-336">Il tipo di utente sarà disponibile solo tramite nomi in due parti.</span><span class="sxs-lookup"><span data-stu-id="95589-336">The user type will be available only through two-part names.</span></span>|  
|<span data-ttu-id="95589-337">Assembly CLR</span><span class="sxs-lookup"><span data-stu-id="95589-337">CLR Assemblies</span></span>|<span data-ttu-id="95589-338">Con [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] viene installato .NET Framework 3.5 SP1, che consente di aggiornare le librerie nella Global Assembly Cache (GAC).</span><span class="sxs-lookup"><span data-stu-id="95589-338">[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] installs .NET Framework 3.5 SP1, which updates libraries in the Global Assembly Cache (GAC).</span></span> <span data-ttu-id="95589-339">Se in un database di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] sono registrate librerie non supportate, è possibile che venga arrestato il funzionamento dell'applicazione [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] dopo l'aggiornamento a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-339">If you have unsupported libraries registered in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] application may stop working after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-340">Ciò si verifica in quanto le operazioni di gestione o aggiornamento delle librerie presenti nella GAC non determinano l'aggiornamento degli assembly che si trovano in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-340">This is because servicing or upgrading libraries in the GAC does not update assemblies inside [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="95589-341">Se un assembly è presente sia in un database di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] sia nella GAC, le due copie relative devono corrispondere esattamente.</span><span class="sxs-lookup"><span data-stu-id="95589-341">If an assembly exists both in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database and in the GAC, the two copies of the assembly must exactly match.</span></span> <span data-ttu-id="95589-342">Se non corrispondono, si verificherà un errore quando l'assembly verrà usato dalla funzionalità di integrazione con CLR di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-342">If they do not match, an error will occur when the assembly is used by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] CLR integration.</span></span> <span data-ttu-id="95589-343">Per ulteriori informazioni, vedere [supported .NET Framework libraries](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="95589-343">For more information, see [Supported .NET Framework Libraries](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span></span><br /><br /> <span data-ttu-id="95589-344">Dopo aver aggiornato il database, gestire o aggiornare la copia dell'assembly nei database di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] con l'istruzione ALTER ASSEMBLY.</span><span class="sxs-lookup"><span data-stu-id="95589-344">After upgrading your database, service or upgrade the copy of the assembly inside your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] databases with the ALTER ASSEMBLY statement.</span></span> <span data-ttu-id="95589-345">Per ulteriori informazioni, vedere l' [articolo della Knowledge Base 949080](https://go.microsoft.com/fwlink/?LinkId=154563).</span><span class="sxs-lookup"><span data-stu-id="95589-345">For more information, see [Knowledge Base article 949080](https://go.microsoft.com/fwlink/?LinkId=154563).</span></span><br /><br /> <span data-ttu-id="95589-346">Per rilevare l'eventuale uso di librerie .NET Framework non supportate nell'applicazione, eseguire la query seguente nel database:</span><span class="sxs-lookup"><span data-stu-id="95589-346">To detect whether you are using any unsupported .NET framework library in your application, run the following query in your database.</span></span><br /><br /> `SELECT name FROM sys.assemblies WHERE clr_name LIKE '%publickeytoken=b03f5f7f11d50a3a,%';`|  
|<span data-ttu-id="95589-347">Routine CLR</span><span class="sxs-lookup"><span data-stu-id="95589-347">CLR Routines</span></span>|<span data-ttu-id="95589-348">Se si usa la rappresentazione in funzioni CLR definite dall'utente, aggregazioni definite dall'utente o tipi definiti dall'utente (UDT), è possibile che nell'applicazione si verifichi l'errore 6522 dopo l'aggiornamento a [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-348">Using impersonation inside CLR user-defined functions, user-defined aggregates, or user-defined types (UDTs) may cause your application to fail with error 6522 after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-349">Gli scenari seguenti hanno esito positivo in [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] e negativo in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-349">The following scenarios succeed in [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] but fail in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-350">Per ogni scenario vengono fornite le soluzioni.</span><span class="sxs-lookup"><span data-stu-id="95589-350">Resolutions are provided for each scenario.</span></span><br /><br /> <span data-ttu-id="95589-351">Una funzione CLR definita dall'utente, un'aggregazione definita dall'utente o un metodo UDT che utilizza la rappresentazione ha un parametro di tipo `nvarchar(max)` , `varchar(max)` ,, `varbinary(max)` `ntext` ,, o un tipo definito dall'utente di `text` `image` grandi dimensioni e non dispone dell'attributo **DataAccessKind. Read** sul metodo.</span><span class="sxs-lookup"><span data-stu-id="95589-351">A CLR user-defined function, user-defined aggregate, or UDT method that uses impersonation has a parameter of type `nvarchar(max)`, `varchar(max)`, `varbinary(max)`, `ntext`, `text`, `image`, or a large UDT, and does not have the **DataAccessKind.Read** attribute on the method.</span></span> <span data-ttu-id="95589-352">Per risolvere questo problema, aggiungere l'attributo **DataAccessKind. Read** sul metodo, ricompilare l'assembly e ridistribuire la routine e l'assembly.</span><span class="sxs-lookup"><span data-stu-id="95589-352">To resolve this issue, add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="95589-353">Funzione CLR con valori di tabella con un metodo **init** che esegue la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="95589-353">A CLR table-valued function that has an **Init** method that performs impersonation.</span></span> <span data-ttu-id="95589-354">Per risolvere questo problema, aggiungere l'attributo **DataAccessKind. Read** sul metodo, ricompilare l'assembly e ridistribuire la routine e l'assembly.</span><span class="sxs-lookup"><span data-stu-id="95589-354">To resolve this issue add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="95589-355">Funzione CLR con valori di tabella con un metodo **FillRow** che esegue la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="95589-355">A CLR table-valued function that has a **FillRow** method that performs impersonation.</span></span> <span data-ttu-id="95589-356">Per risolvere questo problema, rimuovere la rappresentazione dal metodo **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="95589-356">To resolve this issue, remove impersonation from the **FillRow** method.</span></span> <span data-ttu-id="95589-357">Non accedere alle risorse esterne tramite il metodo **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="95589-357">Do not access external resources by using the **FillRow** method.</span></span> <span data-ttu-id="95589-358">Al contrario, accedere alle risorse esterne dal metodo **init** .</span><span class="sxs-lookup"><span data-stu-id="95589-358">Instead, access external resources from the **Init** method.</span></span>|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="95589-359">DMV (Dynamic Management View)</span><span class="sxs-lookup"><span data-stu-id="95589-359">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="95589-360">Visualizza</span><span class="sxs-lookup"><span data-stu-id="95589-360">View</span></span>|<span data-ttu-id="95589-361">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-361">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="95589-362">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="95589-362">sys.dm_os_sys_info</span></span>|<span data-ttu-id="95589-363">Sono state rimosse le colonne cpu_ticks_in_ms e sqlserver_start_time_cpu_ticks.</span><span class="sxs-lookup"><span data-stu-id="95589-363">Removed the cpu_ticks_in_ms and sqlserver_start_time_cpu_ticks columns.</span></span>|  
|<span data-ttu-id="95589-364">sys. dm_exec_query_resource_semaphoressys. dm_exec_query_memory_grants</span><span class="sxs-lookup"><span data-stu-id="95589-364">sys.dm_exec_query_resource_semaphoressys.dm_exec_query_memory_grants</span></span>|<span data-ttu-id="95589-365">La colonna resource_semaphore_id non è un ID univoco in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-365">The resource_semaphore_id column is not a unique ID in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-366">La modifica può influire sulla risoluzione dei problemi relativi all'esecuzione di query.</span><span class="sxs-lookup"><span data-stu-id="95589-366">This change can affect troubleshooting query execution.</span></span> <span data-ttu-id="95589-367">Per ulteriori informazioni, vedere [sys. dm_exec_query_resource_semaphores &#40;&#41;Transact-SQL ](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="95589-367">For more information, see [sys.dm_exec_query_resource_semaphores &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span></span>|  
  
### <a name="errors-and-events"></a><span data-ttu-id="95589-368">Errori ed eventi</span><span class="sxs-lookup"><span data-stu-id="95589-368">Errors and Events</span></span>  
  
|<span data-ttu-id="95589-369">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-369">Feature</span></span>|<span data-ttu-id="95589-370">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-370">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-371">Errori di accesso</span><span class="sxs-lookup"><span data-stu-id="95589-371">Login errors</span></span>|<span data-ttu-id="95589-372">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] viene restituito l'errore 18452 quando viene usato un account di accesso SQL per connettersi a un server configurato per il solo uso dell'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="95589-372">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], error 18452 is returned when a SQL login is used to connect to a server configured to use only Windows Authentication.</span></span> <span data-ttu-id="95589-373">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] viene invece restituito l'errore 18456.</span><span class="sxs-lookup"><span data-stu-id="95589-373">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 18456 is returned instead.</span></span>|  
  
### <a name="showplan"></a><span data-ttu-id="95589-374">Showplan</span><span class="sxs-lookup"><span data-stu-id="95589-374">Showplan</span></span>  
  
|<span data-ttu-id="95589-375">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-375">Feature</span></span>|<span data-ttu-id="95589-376">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-376">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-377">Showplan XML Schema</span><span class="sxs-lookup"><span data-stu-id="95589-377">Showplan XML schema</span></span>|<span data-ttu-id="95589-378">Un nuovo elemento **SeekPredicateNew** viene aggiunto al XML Schema Showplan e la sequenza XSD che lo contiene (**SqlPredicatesType**) viene convertita in un **\<xsd:choice>** elemento.</span><span class="sxs-lookup"><span data-stu-id="95589-378">A new **SeekPredicateNew** element is added to the Showplan XML schema, and the enclosing xsd sequence (**SqlPredicatesType**) is converted into an **\<xsd:choice>** item.</span></span> <span data-ttu-id="95589-379">Al posto di uno o più elementi **SeekPredicate** , uno o più elementi **SeekPredicateNew** possono essere visualizzati in Showplan XML.</span><span class="sxs-lookup"><span data-stu-id="95589-379">Instead of one or more **SeekPredicate** elements, one or more **SeekPredicateNew** elements may now appear in the Showplan XML.</span></span> <span data-ttu-id="95589-380">I due elementi si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="95589-380">The two elements are mutually exclusive.</span></span> <span data-ttu-id="95589-381">**SeekPredicate** viene mantenuta nel XML Schema Showplan per la compatibilità con le versioni precedenti. Tuttavia, i piani di query creati in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] possono contenere l'elemento **SeekPredicateNew** .</span><span class="sxs-lookup"><span data-stu-id="95589-381">**SeekPredicate** is maintained in the Showplan XML schema for backwards compatibility; however, query plans created in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] may contain the **SeekPredicateNew** element.</span></span> <span data-ttu-id="95589-382">Le applicazioni che prevedono di recuperare solo l'elemento figlio **SeekPredicate** dal nodo ShowplanXml/BatchSequence/batch/statements/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates possono avere esito negativo se l'elemento **SeekPredicate** non esiste.</span><span class="sxs-lookup"><span data-stu-id="95589-382">Applications that expect to retrieve only the **SeekPredicate** child from the node ShowPlanXML/BatchSequence/Batch/Statements/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates may fail if the **SeekPredicate** element does not exist.</span></span> <span data-ttu-id="95589-383">Riscrivere l'applicazione in modo che sia previsto l'elemento **SeekPredicate** o **SeekPredicateNew** in questo nodo.</span><span class="sxs-lookup"><span data-stu-id="95589-383">Rewrite the application to expect either the **SeekPredicate** or **SeekPredicateNew** element in this node.</span></span> <span data-ttu-id="95589-384">Per ulteriori informazioni, vedere .</span><span class="sxs-lookup"><span data-stu-id="95589-384">For more information, see .</span></span>|  
|<span data-ttu-id="95589-385">Showplan XML Schema</span><span class="sxs-lookup"><span data-stu-id="95589-385">Showplan XML schema</span></span>|<span data-ttu-id="95589-386">Un nuovo attributo **nuovo IndexKind** viene aggiunto al tipo complesso **ObjectType** nel XML Schema Showplan.</span><span class="sxs-lookup"><span data-stu-id="95589-386">A new **IndexKind** attribute is added to the **ObjectType** complex type in the Showplan XML schema.</span></span> <span data-ttu-id="95589-387">Le applicazioni che convalidano in modo esplicito i piani di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] in base allo schema [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] non riusciranno.</span><span class="sxs-lookup"><span data-stu-id="95589-387">Applications that strictly validate [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] plans against the [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] schema will fail.</span></span>|  
  
### <a name="transact-sql"></a><span data-ttu-id="95589-388">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="95589-388">Transact-SQL</span></span>  
  
|<span data-ttu-id="95589-389">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-389">Feature</span></span>|<span data-ttu-id="95589-390">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-390">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-391">Evento ALTER_AUTHORIZATION_DATABASE DDL</span><span class="sxs-lookup"><span data-stu-id="95589-391">ALTER_AUTHORIZATION_DATABASE DDL event</span></span>|<span data-ttu-id="95589-392">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , quando viene generato l'evento DDL ALTER_AUTHORIZATION_DATABASE, il valore ' Object ' viene restituito nell'elemento **ObjectType** del codice XML EventData per questo evento quando il tipo di entità dell'entità a protezione diretta nell'operazione Data Definition Language (DDL) è un oggetto.</span><span class="sxs-lookup"><span data-stu-id="95589-392">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], when the DDL event ALTER_AUTHORIZATION_DATABASE fires, the value 'object' is returned in the **ObjectType** element of the EVENTDATA xml for this event when the entity type of the securable in the data definition language (DDL) operation is an object.</span></span> <span data-ttu-id="95589-393">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] viene restituito il tipo effettivo, quale "table" o "function".</span><span class="sxs-lookup"><span data-stu-id="95589-393">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the actual type (for example, 'table', or 'function') is returned.</span></span>|  
|<span data-ttu-id="95589-394">CONVERT</span><span class="sxs-lookup"><span data-stu-id="95589-394">CONVERT</span></span>|<span data-ttu-id="95589-395">Se uno stile non valido viene passato alla funzione CONVERT, viene restituito un errore quando il tipo di conversione è da binario a carattere o da carattere a binario.</span><span class="sxs-lookup"><span data-stu-id="95589-395">If an invalid style is passed to the CONVERT function, an error is returned when the type of conversion is binary to character or character to binary.</span></span> <span data-ttu-id="95589-396">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] lo stile non valido è impostato sullo stile predefinito per conversioni da binario a carattere e da carattere a binario.</span><span class="sxs-lookup"><span data-stu-id="95589-396">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the invalid style is set to the default style for binary-to-character and character-to-binary conversions.</span></span>|  
|<span data-ttu-id="95589-397">Autorizzazioni GRANT/DENY/REVOKE EXECUTE per gli assembly</span><span class="sxs-lookup"><span data-stu-id="95589-397">GRANT/DENY/REVOKE EXECUTE on assemblies</span></span>|<span data-ttu-id="95589-398">L'autorizzazione EXECUTE non può essere concessa, negata o revocata agli assembly.</span><span class="sxs-lookup"><span data-stu-id="95589-398">EXECUTE permission cannot be granted, denied, or revoked to assemblies.</span></span> <span data-ttu-id="95589-399">Tale autorizzazione non ha alcun effetto e ora causa un errore.</span><span class="sxs-lookup"><span data-stu-id="95589-399">This permission has no affect and now causes an error.</span></span> <span data-ttu-id="95589-400">È invece possibile concederla, negarla o revocarla a stored procedure o funzioni che fanno riferimento al metodo dell'assembly.</span><span class="sxs-lookup"><span data-stu-id="95589-400">Grant, deny, or revoke EXECUTE permission on the stored procedures or functions that reference the assembly method instead.</span></span>|  
|<span data-ttu-id="95589-401">Autorizzazioni GRANT/DENY/REVOKE per i tipi di sistema</span><span class="sxs-lookup"><span data-stu-id="95589-401">GRANT/DENY/REVOKE permissions on system types</span></span>|<span data-ttu-id="95589-402">Tali autorizzazioni non possono essere concesse, negate o revocate ai tipi di sistema.</span><span class="sxs-lookup"><span data-stu-id="95589-402">Permissions cannot be granted, denied, or revoked to system types.</span></span> <span data-ttu-id="95589-403">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] l'esecuzione di queste istruzioni ha esito positivo, ma senza alcun effetto.</span><span class="sxs-lookup"><span data-stu-id="95589-403">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], these statements succeed but have no effect.</span></span> <span data-ttu-id="95589-404">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] viene restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="95589-404">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], an error is returned.</span></span>|  
|<span data-ttu-id="95589-405">GROUP BY</span><span class="sxs-lookup"><span data-stu-id="95589-405">GROUP BY</span></span>|<span data-ttu-id="95589-406">La clausola GROUP BY non può contenere una sottoquery in un'espressione usata per l'elenco GROUP BY.</span><span class="sxs-lookup"><span data-stu-id="95589-406">The GROUP BY clause cannot contain a subquery in an expression that is used for the group by list.</span></span> <span data-ttu-id="95589-407">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] questo era consentito.</span><span class="sxs-lookup"><span data-stu-id="95589-407">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], this was allowed.</span></span> <span data-ttu-id="95589-408">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] viene restituito l'errore 144.</span><span class="sxs-lookup"><span data-stu-id="95589-408">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 144 is returned.</span></span><br /><br /> <span data-ttu-id="95589-409">Ad esempio, il codice seguente avrà esito positivo in SQL Server 2005, ma esito negativo in SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="95589-409">For example, the following code will succeed in SQL Server 2005 and fail in SQL Server 2008.</span></span><br /><br /> `DECLARE @Test TABLE(a int NOT NULL);` <br /> `INSERT INTO @Test SELECT 1 union ALL SELECT 2;` <br /> `SELECT COUNT(*)` <br /> `FROM @Test` <br /> `GROUP BY CASE WHEN a IN (SELECT t.a FROM @Test AS t)` <br /> `THEN 1 ELSE 0` <br /> `END;`|  
|<span data-ttu-id="95589-410">Clausola OUTPUT</span><span class="sxs-lookup"><span data-stu-id="95589-410">OUTPUT clause</span></span>|<span data-ttu-id="95589-411">Per impedire un comportamento non deterministico, la clausola OUTPUT non può fare riferimento a una colonna di una vista o di una funzione inline con valori di tabella se la colonna in questione viene definita mediante uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-411">To prevent nondeterministic behavior, the OUTPUT clause cannot reference a column from a view or inline table-valued function when that column is defined by one of the following methods:</span></span><br /><br /> <span data-ttu-id="95589-412">Sottoquery.</span><span class="sxs-lookup"><span data-stu-id="95589-412">A subquery.</span></span><br /><br /> <span data-ttu-id="95589-413">Funzione definita dall'utente che esegue, o si presume esegua, l'accesso ai dati dell'utente o di sistema.</span><span class="sxs-lookup"><span data-stu-id="95589-413">A user-defined function that performs user- or system-data access, or is assumed to perform such access.</span></span><br /><br /> <span data-ttu-id="95589-414">Colonna calcolata che contiene, nella relativa definizione, una funzione definita dall'utente che esegue l'accesso ai dati dell'utente o di sistema.</span><span class="sxs-lookup"><span data-stu-id="95589-414">A computed column that contains in its definition a user-defined function that performs user- or system-data access.</span></span><br /><br /> <br /><br /> <span data-ttu-id="95589-415">Quando [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] rileva una colonna di questo tipo nella clausola OUTPUT, viene generato l'errore 4186.</span><span class="sxs-lookup"><span data-stu-id="95589-415">When [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] detects such a column in the OUTPUT clause, error 4186 is raised.</span></span> <span data-ttu-id="95589-416">Per ulteriori informazioni, vedere [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span><span class="sxs-lookup"><span data-stu-id="95589-416">For more information, see [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span></span>|  
|<span data-ttu-id="95589-417">Clausola OUTPUT INTO</span><span class="sxs-lookup"><span data-stu-id="95589-417">OUTPUT INTO clause</span></span>|<span data-ttu-id="95589-418">La tabella di destinazione della clausola OUTPUT INTO non può includere trigger abilitati.</span><span class="sxs-lookup"><span data-stu-id="95589-418">The target table of the OUTPUT INTO clause cannot have any enabled triggers.</span></span>|  
|<span data-ttu-id="95589-419">Opzione a livello di server precompute rank</span><span class="sxs-lookup"><span data-stu-id="95589-419">precompute rank server-level option</span></span>|<span data-ttu-id="95589-420">Questa opzione non è supportata in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-420">This option is not supported in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="95589-421">Modificare il prima possibile le applicazioni che usano questa caratteristica.</span><span class="sxs-lookup"><span data-stu-id="95589-421">Modify applications that currently use this feature as soon as possible.</span></span>|  
|<span data-ttu-id="95589-422">READPAST - hint di tabella</span><span class="sxs-lookup"><span data-stu-id="95589-422">READPAST table hint</span></span>|<span data-ttu-id="95589-423">Non è possibile specificare l'hint READPAST in Isolamento dello snapshot.</span><span class="sxs-lookup"><span data-stu-id="95589-423">You cannot specify the READPAST hint under Snapshot Isolation.</span></span><br /><br /> <span data-ttu-id="95589-424">L'hint READPAST viene ignorato se l'opzione di database READ_COMMITED_SNAPSHOT o ALLOW_SNAPSHOT_ISOLATION è impostata su ON.</span><span class="sxs-lookup"><span data-stu-id="95589-424">The READPAST hint is ignored when either the READ_COMMITED_SNAPSHOT or ALLOW_SNAPSHOT_ISOLATION database option is set to ON.</span></span> <span data-ttu-id="95589-425">Tuttavia, se si combina l'hint READPAST con READCOMMITTEDLOCK, il comportamento di READPAST è uguale a quello con l'hint di blocco READCOMMITTED.</span><span class="sxs-lookup"><span data-stu-id="95589-425">However, if you combine the READPAST hint with READCOMMITTEDLOCK, the READPAST behavior is same as with the blocking READCOMMITTED hint.</span></span>|  
|<span data-ttu-id="95589-426">sp_helpuser</span><span class="sxs-lookup"><span data-stu-id="95589-426">sp_helpuser</span></span>|<span data-ttu-id="95589-427">I nomi di colonna seguenti restituiti nel set di risultati della sp_helpuser stored procedure sono stati modificati:</span><span class="sxs-lookup"><span data-stu-id="95589-427">The following column names that are returned in the result set of the sp_helpuser stored procedure have changed:</span></span><br /><br /> <span data-ttu-id="95589-428">Il GroupName è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-428">GroupName is now:</span></span><br />                            <span data-ttu-id="95589-429">RoleName</span><span class="sxs-lookup"><span data-stu-id="95589-429">RoleName</span></span><br /><br /> <span data-ttu-id="95589-430">Group_name è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-430">Group_name is now:</span></span><br />                            <span data-ttu-id="95589-431">Role_name</span><span class="sxs-lookup"><span data-stu-id="95589-431">Role_name</span></span><br /><br /> <span data-ttu-id="95589-432">Group_id è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-432">Group_id is now:</span></span><br />                            <span data-ttu-id="95589-433">Role_id</span><span class="sxs-lookup"><span data-stu-id="95589-433">Role_id</span></span><br /><br /> <span data-ttu-id="95589-434">Users_in_group è ora:</span><span class="sxs-lookup"><span data-stu-id="95589-434">Users_in_group is now:</span></span><br />                            <span data-ttu-id="95589-435">Users_in_role</span><span class="sxs-lookup"><span data-stu-id="95589-435">Users_in_role</span></span>|  
|<span data-ttu-id="95589-436">Transparent Data Encryption</span><span class="sxs-lookup"><span data-stu-id="95589-436">Transparent Data Encryption</span></span>|<span data-ttu-id="95589-437">Transparent Data Encryption (TDE) viene eseguito al livello di I/O: la struttura della pagina non presenta crittografia in memoria e viene crittografata solo al momento della scrittura su disco della pagina.</span><span class="sxs-lookup"><span data-stu-id="95589-437">Transparent data encryption (TDE) is performed at the I/O level: the page structure is unencrypted in memory and is encrypted only when the page is written to disk.</span></span> <span data-ttu-id="95589-438">La crittografia viene applicata sia ai file di database sia ai file di log.</span><span class="sxs-lookup"><span data-stu-id="95589-438">Both the database files and log files are encrypted.</span></span> <span data-ttu-id="95589-439">Le applicazioni di terze parti, che non tengono conto del normale meccanismo di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] per l'accesso alle pagine e che prevedono ad esempio l'analisi diretta dei file di dati e di log, non riusciranno se in un database viene usato TDE perché i dati contenuti in tali file sono crittografati.</span><span class="sxs-lookup"><span data-stu-id="95589-439">Third-party applications that bypass the regular [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] mechanism for accessing pages (for example, by scanning the data or log files directly), will fail when a database uses TDE because the data is encrypted in the files.</span></span> <span data-ttu-id="95589-440">Applicazioni di questo tipo possono usare l'API di crittografia di Windows per sviluppare una soluzione per la decrittografia dei dati all'esterno di [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="95589-440">Such applications can leverage the Window Cryptographic API to develop a solution for decrypting the data outside of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>|  
  
### <a name="xquery"></a><span data-ttu-id="95589-441">XQuery</span><span class="sxs-lookup"><span data-stu-id="95589-441">XQuery</span></span>  
  
|<span data-ttu-id="95589-442">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-442">Feature</span></span>|<span data-ttu-id="95589-443">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-443">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-444">Supporto di dati datetime</span><span class="sxs-lookup"><span data-stu-id="95589-444">Datetime support</span></span>|<span data-ttu-id="95589-445">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] i tipi di dati `xs:time` , `xs:date` e `xs:dateTime` non dispongono del supporto del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="95589-445">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], the data types `xs:time`, `xs:date`, and `xs:dateTime` do not have timezone support.</span></span> <span data-ttu-id="95589-446">Viene eseguito il mapping dei dati del fuso orario al fuso orario UTC.</span><span class="sxs-lookup"><span data-stu-id="95589-446">Timezone data is mapped to the UTC timezone.</span></span> <span data-ttu-id="95589-447">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] presenta un comportamento conforme agli standard che determina le modifiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-447">[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], provides standard conformant behavior, resulting in the following changes:</span></span><br /><br /> <span data-ttu-id="95589-448">Vengono convalidati i valori senza fuso orario.</span><span class="sxs-lookup"><span data-stu-id="95589-448">Values without timezone are validated.</span></span><br /><br /> <span data-ttu-id="95589-449">Viene mantenuto il fuso orario fornito o viene preservata l'assenza di un fuso orario.</span><span class="sxs-lookup"><span data-stu-id="95589-449">The provided timezone or the absence of a timezone is preserved.</span></span><br /><br /> <span data-ttu-id="95589-450">Viene modificata la rappresentazione di archiviazione interna.</span><span class="sxs-lookup"><span data-stu-id="95589-450">The internal storage representation is modified.</span></span><br /><br /> <span data-ttu-id="95589-451">Viene aumentata la risoluzione dei valori archiviati.</span><span class="sxs-lookup"><span data-stu-id="95589-451">Resolution of stored values is increased.</span></span><br /><br /> <span data-ttu-id="95589-452">Non sono consentiti anni negativi.</span><span class="sxs-lookup"><span data-stu-id="95589-452">Negative years are disallowed.</span></span><br /><br /> <br /><br /> <span data-ttu-id="95589-453">Nota: modificare le applicazioni e le espressioni XQuery per tenere conto dei nuovi valori di tipo.</span><span class="sxs-lookup"><span data-stu-id="95589-453">Note: Modify applications and XQuery expressions to account for the new type values.</span></span>|  
|<span data-ttu-id="95589-454">Espressioni XQuery e Xpath</span><span class="sxs-lookup"><span data-stu-id="95589-454">XQuery and Xpath expressions</span></span>|<span data-ttu-id="95589-455">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] i passaggi in un'espressione XQuery o XPath che iniziano con i due punti (':') sono consentiti.</span><span class="sxs-lookup"><span data-stu-id="95589-455">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], steps in an XQuery or XPath expression that begin with a colon (':') are allowed.</span></span> <span data-ttu-id="95589-456">L'istruzione seguente, ad esempio, contiene un test di nome (`CTR02)` all'interno dell'espressione di percorso che inizia con due punti.</span><span class="sxs-lookup"><span data-stu-id="95589-456">For example, the following statement contains a name test (`CTR02)` within the path expression that begins with a colon.</span></span><br /><br /> `SELECT FileContext.query('for n$ in //CTR return <C>{data )(n$/:CTR02)} </C>) AS Files FROM dbo.MyTable;`<br /><br /> <span data-ttu-id="95589-457">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] questo utilizzo non è consentito, in quanto non è conforme agli standard XML.</span><span class="sxs-lookup"><span data-stu-id="95589-457">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], this usage is disallowed because it does not conform to XML standards.</span></span> <span data-ttu-id="95589-458">Viene restituito l'errore 9341.</span><span class="sxs-lookup"><span data-stu-id="95589-458">Error 9341 is returned.</span></span> <span data-ttu-id="95589-459">Rimuovere i due punti iniziali o specificare un prefisso per il test del nome, ad esempio (n$/CTR02) o (n$/p1:CTR02).</span><span class="sxs-lookup"><span data-stu-id="95589-459">Remove the leading colon or specify a prefix for the name test--for example, (n$/CTR02) or (n$/p1:CTR02).</span></span>|  
  
### <a name="connecting"></a><span data-ttu-id="95589-460">Connecting</span><span class="sxs-lookup"><span data-stu-id="95589-460">Connecting</span></span>  
  
|<span data-ttu-id="95589-461">Feature</span><span class="sxs-lookup"><span data-stu-id="95589-461">Feature</span></span>|<span data-ttu-id="95589-462">Descrizione</span><span class="sxs-lookup"><span data-stu-id="95589-462">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="95589-463">Connessione da [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client usando SSL</span><span class="sxs-lookup"><span data-stu-id="95589-463">Connecting from [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client using SSL</span></span>|<span data-ttu-id="95589-464">Per connettersi a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, le applicazioni che usano "SERVER=shortname; FORCE ENCRYPTION=true" con un certificato il cui Subjects specifichi nomi di dominio completi in passato hanno eseguito la connessione grazie a una convalida flessibile.</span><span class="sxs-lookup"><span data-stu-id="95589-464">When connecting with [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, applications that use "SERVER=shortname; FORCE ENCRYPTION=true" with certificate whose Subjects specify Fully Qualified Domain Names (FQDN's) have connected in the past due to relaxed validation.</span></span> <span data-ttu-id="95589-465">SQL Server 2008 R2 migliora la sicurezza grazie all'applicazione di oggetti FQDN per i certificati.</span><span class="sxs-lookup"><span data-stu-id="95589-465">SQL Server 2008 R2 enhances security by enforcing FQDN subjects for certificates.</span></span> <span data-ttu-id="95589-466">Per le applicazioni che si basano su una convalida flessibile è necessario eseguire una delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="95589-466">Applications that rely upon relaxed validation must take one of the following actions:</span></span><br /><br /> <span data-ttu-id="95589-467">Usare il nome di dominio completo nella stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="95589-467">Use the FQDN in the connection string.</span></span><br /><br /> <span data-ttu-id="95589-468">-Questa opzione non richiede la ricompilazione dell'applicazione se la parola chiave SERVER della stringa di connessione è configurata all'esterno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="95589-468">-This option does not require recompiling the application if the SERVER keyword of the connection string is configured outside the application.</span></span><br /><br /> <span data-ttu-id="95589-469">-Questa opzione non funziona per le applicazioni che dispongono di stringhe di connessione hardcoded.</span><span class="sxs-lookup"><span data-stu-id="95589-469">-This option does not work for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="95589-470">-Questa opzione non funziona per le applicazioni che utilizzano il mirroring del database poiché il server con mirroring risponde con un nome semplice.</span><span class="sxs-lookup"><span data-stu-id="95589-470">-This option does not work for applications that use Database Mirroring since the mirrored server replies with a simple name.</span></span>|  
||<span data-ttu-id="95589-471">Aggiungere un alias in modo da eseguire il mapping di shortname al nome di dominio completo.</span><span class="sxs-lookup"><span data-stu-id="95589-471">Add an alias for the shortname to map to the FQDN.</span></span><br /><br /> <span data-ttu-id="95589-472">-Questa opzione funziona anche per le applicazioni che dispongono di stringhe di connessione hardcoded.</span><span class="sxs-lookup"><span data-stu-id="95589-472">-This option works even for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="95589-473">-Questa opzione non funziona per le applicazioni che utilizzano il mirroring del database perché i provider non cercano gli alias per i nomi dei partner di failover ricevuti.</span><span class="sxs-lookup"><span data-stu-id="95589-473">-This option does not work for applications that use Database Mirroring since the providers don't look up aliases for received failover partner names.</span></span>|  
||<span data-ttu-id="95589-474">Ottenere un certificato emesso per shortname.</span><span class="sxs-lookup"><span data-stu-id="95589-474">Have a certificate issued for shortname.</span></span><br /><br /> <span data-ttu-id="95589-475">-Questa opzione funziona per tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="95589-475">-This option works for all applications.</span></span>|  

## <a name="breaking-changes-in-sql-server-2005"></a><a name="Yukon"></a><span data-ttu-id="95589-476">Modifiche di rilievo nella SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="95589-476">Breaking Changes in SQL Server 2005</span></span>  

[!INCLUDE[Archived documentation for very old versions of SQL Server](../includes/paragraph-content/previous-versions-archive-documentation-sql-server.md)]

## <a name="see-also"></a><span data-ttu-id="95589-477">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="95589-477">See Also</span></span>  
 <span data-ttu-id="95589-478">[Funzionalità di motore di database deprecate SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="95589-478">[Deprecated Database Engine Features in SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="95589-479">[Modifiche del comportamento delle funzionalità di motore di database in SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="95589-479">[Behavior Changes to Database Engine Features in SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="95589-480">[Funzionalità di motore di database sospese in SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="95589-480">[Discontinued Database Engine Functionality in SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="95589-481">[Compatibilità con le versioni precedenti del motore di database di SQL Server](sql-server-database-engine-backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="95589-481">[SQL Server Database Engine Backward Compatibility](sql-server-database-engine-backward-compatibility.md) </span></span>  
 [<span data-ttu-id="95589-482">Livello di compatibilità ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="95589-482">ALTER DATABASE Compatibility Level &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql-compatibility-level)  
 [<span data-ttu-id="95589-483">Modifiche di rilievo nelle funzionalità degli strumenti di gestione in SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="95589-483">Breaking Changes to Management Tools Features in SQL Server 2014</span></span>](breaking-changes-to-management-tools-features-in-sql-server-2014.md?view=sql-server-2014)  
  
