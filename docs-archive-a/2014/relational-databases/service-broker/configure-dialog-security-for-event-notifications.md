---
title: Configurare la sicurezza del dialogo per le notifiche degli eventi | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- event notifications [SQL Server], security
ms.assetid: 12afbc84-2d2a-4452-935e-e1c70e8c53c1
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d83bfe63c3a9b24c2be8d08916dd2384c59edc93
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87635986"
---
# <a name="configure-dialog-security-for-event-notifications"></a><span data-ttu-id="d938f-102">Configurazione della sicurezza del dialogo per le notifiche degli eventi</span><span class="sxs-lookup"><span data-stu-id="d938f-102">Configure Dialog Security for Event Notifications</span></span>
  [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="d938f-103">per le notifiche degli eventi che prevedono l'invio di messaggi a Service Broker su un server remoto.</span><span class="sxs-lookup"><span data-stu-id="d938f-103">dialog security should be configured for event notifications that send messages to a service broker on a remote server.</span></span> <span data-ttu-id="d938f-104">È necessario configurare manualmente la sicurezza del dialogo in base al modello di sicurezza avanzata del dialogo di [!INCLUDE[ssSB](../../includes/sssb-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d938f-104">Dialog security must be manually configured according to the [!INCLUDE[ssSB](../../includes/sssb-md.md)] dialog full-security model.</span></span> <span data-ttu-id="d938f-105">Il modello di sicurezza avanzata attiva la crittografia e la decrittografia di messaggi inviati da e a server remoti.</span><span class="sxs-lookup"><span data-stu-id="d938f-105">The full-security model enables encryption and decryption of messages that are sent to and from remote servers.</span></span> <span data-ttu-id="d938f-106">Sebbene le notifiche degli eventi vengano inviate in una sola direzione, gli altri messaggi, ad esempio gli errori, vengono anche restituiti nella direzione opposta.</span><span class="sxs-lookup"><span data-stu-id="d938f-106">Although event notifications are sent in one direction, other messages, such as errors, are also returned in the opposite direction.</span></span>  
  
## <a name="configuring-dialog-security-for-event-notifications"></a><span data-ttu-id="d938f-107">Configurazione della sicurezza del dialogo per le notifiche degli eventi</span><span class="sxs-lookup"><span data-stu-id="d938f-107">Configuring Dialog Security for Event Notifications</span></span>  
 <span data-ttu-id="d938f-108">Nella procedura seguente viene descritto il processo necessario per l'implementazione della sicurezza del dialogo per la notifica degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d938f-108">The process required to implement dialog security for event notification is described in the following steps.</span></span> <span data-ttu-id="d938f-109">La procedura include azioni da eseguire sia sul server di origine sia sul server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-109">These steps include actions to take on both the source server and the target server.</span></span> <span data-ttu-id="d938f-110">Nel server di origine viene creata la notifica degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d938f-110">The source server is the server on which the event notification is being created.</span></span> <span data-ttu-id="d938f-111">Il server di destinazione riceve il messaggio di notifica degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d938f-111">The target server is the server that receives the event notification message.</span></span> <span data-ttu-id="d938f-112">È necessario completare le azioni di ogni passaggio sia per il server di origine sia per il server di destinazione prima di andare al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="d938f-112">You must complete the actions in each step for both the source server and the target server before you continue to the next step.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d938f-113">È necessario creare tutti i certificati con date di inizio e di scadenza valide.</span><span class="sxs-lookup"><span data-stu-id="d938f-113">All certificates must be created with valid start and expiration dates.</span></span>  
  
 <span data-ttu-id="d938f-114">**Passaggio 1: impostare un numero di porta TCP e un nome del servizio di destinazione.**</span><span class="sxs-lookup"><span data-stu-id="d938f-114">**Step 1: Establish a TCP port number and target service name.**</span></span>  
  
 <span data-ttu-id="d938f-115">Impostare la porta TCP in cui il server di origine e il server di destinazione riceveranno i messaggi.</span><span class="sxs-lookup"><span data-stu-id="d938f-115">Establish the TCP port on which both the source server and the target server will receive messages.</span></span> <span data-ttu-id="d938f-116">È inoltre necessario determinare il nome del servizio di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-116">You must also determine the name of the target service.</span></span>  
  
 <span data-ttu-id="d938f-117">**Passaggio 2: configurare la crittografia e la condivisione dei certificati per l'autenticazione a livello di database.**</span><span class="sxs-lookup"><span data-stu-id="d938f-117">**Step 2: Configure encryption and certificate sharing for database-level authentication.**</span></span>  
  
 <span data-ttu-id="d938f-118">Completare le azioni seguenti nel server di origine e in quello di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-118">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="d938f-119">Server di origine</span><span class="sxs-lookup"><span data-stu-id="d938f-119">Source server</span></span>|<span data-ttu-id="d938f-120">Server di destinazione</span><span class="sxs-lookup"><span data-stu-id="d938f-120">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="d938f-121">Scegliere o creare un database per contenere la notifica degli eventi e la chiave master.</span><span class="sxs-lookup"><span data-stu-id="d938f-121">Choose or create a database to hold the event notification and master key.</span></span>|<span data-ttu-id="d938f-122">Scegliere o creare un database per contenere la chiave master.</span><span class="sxs-lookup"><span data-stu-id="d938f-122">Choose or create a database to hold the master key.</span></span>|  
|<span data-ttu-id="d938f-123">[Creare una chiave master](/sql/t-sql/statements/create-master-key-transact-sql)se non ne è presente una per il database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-123">If no master key exists for the source database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span> <span data-ttu-id="d938f-124">È necessaria una chiave master sia nel database di origine sia in quello di destinazione per consentire la protezione dei rispettivi certificati.</span><span class="sxs-lookup"><span data-stu-id="d938f-124">A master key is required on both the source and target databases to help secure their respective certificates.</span></span>|<span data-ttu-id="d938f-125">Se non è presente alcuna chiave master per il database di destinazione, crearne una.</span><span class="sxs-lookup"><span data-stu-id="d938f-125">If no master key exists for the target database, create a master key.</span></span>|  
|<span data-ttu-id="d938f-126">[Creare un account di accesso](/sql/t-sql/statements/create-login-transact-sql) e un [utente](/sql/t-sql/statements/create-user-transact-sql) corrispondente per il database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-126">[Create a login](/sql/t-sql/statements/create-login-transact-sql) and a corresponding [user](/sql/t-sql/statements/create-user-transact-sql) for the source database.</span></span>|<span data-ttu-id="d938f-127">Creare un account di accesso e un utente corrispondente per il database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-127">Create a login and a corresponding user for the target database.</span></span>|  
|<span data-ttu-id="d938f-128">[Creare un certificato](/sql/t-sql/statements/create-certificate-transact-sql) di proprietà dell'utente del database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-128">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that is owned by the user of the source database.</span></span>|<span data-ttu-id="d938f-129">Creare un certificato di proprietà dell'utente del database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-129">Create a certificate that is owned by the user of the target database.</span></span>|  
|<span data-ttu-id="d938f-130">[Eseguire il backup del certificato](/sql/t-sql/statements/backup-certificate-transact-sql) in un file accessibile al server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-130">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="d938f-131">Eseguire il backup del certificato in un file accessibile al server di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-131">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="d938f-132">[Creare un utente](/sql/t-sql/statements/create-user-transact-sql), specificando l'utente del database di destinazione e WITHOUT LOGIN.</span><span class="sxs-lookup"><span data-stu-id="d938f-132">[Create a user](/sql/t-sql/statements/create-user-transact-sql), specifying the user of the target database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="d938f-133">Questo utente sarà proprietario del certificato del database di destinazione da creare dal file di backup.</span><span class="sxs-lookup"><span data-stu-id="d938f-133">This user will own the target database certificate to be created from the backup file.</span></span> <span data-ttu-id="d938f-134">Non è necessario eseguire il mapping dell'utente a un account di accesso, poiché l'unico scopo di questo utente è essere proprietario del certificato del database di destinazione creato al passaggio 3 seguente.</span><span class="sxs-lookup"><span data-stu-id="d938f-134">The user does not have to be mapped to a login, because the only purpose of this user is to own the target database certificate created in step 3 that follows.</span></span>|<span data-ttu-id="d938f-135">Creare un utente, specificando l'utente del database di origine e WITHOUT LOGIN.</span><span class="sxs-lookup"><span data-stu-id="d938f-135">Create a user, specifying the user of the source database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="d938f-136">Questo utente sarà proprietario del certificato del database di origine da creare dal file di backup.</span><span class="sxs-lookup"><span data-stu-id="d938f-136">This user will own the source database certificate to be created from the backup file.</span></span> <span data-ttu-id="d938f-137">Non è necessario eseguire il mapping dell'utente a un account di accesso, poiché l'unico scopo di questo utente è essere proprietario del certificato del database di origine creato al passaggio 3 seguente.</span><span class="sxs-lookup"><span data-stu-id="d938f-137">The user does not have to be mapped to a login, because the only purpose of this user is to own the source database certificate created in step 3 that follows.</span></span>|  
  
 <span data-ttu-id="d938f-138">**Passaggio 3: condividere i certificati e concedere le autorizzazioni per l'autenticazione a livello di database.**</span><span class="sxs-lookup"><span data-stu-id="d938f-138">**Step 3: Share certificates and grant permissions for database-level authentication.**</span></span>  
  
 <span data-ttu-id="d938f-139">Completare le azioni seguenti nel server di origine e in quello di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-139">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="d938f-140">Server di origine</span><span class="sxs-lookup"><span data-stu-id="d938f-140">Source server</span></span>|<span data-ttu-id="d938f-141">Server di destinazione</span><span class="sxs-lookup"><span data-stu-id="d938f-141">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="d938f-142">[Creare un certificato](/sql/t-sql/statements/create-certificate-transact-sql) dal file di backup del certificato di destinazione, specificando l'utente del database di destinazione come proprietario.</span><span class="sxs-lookup"><span data-stu-id="d938f-142">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target database user as the owner.</span></span>|<span data-ttu-id="d938f-143">Creare un certificato dal file di backup del certificato di origine, specificando l'utente del database di origine come proprietario.</span><span class="sxs-lookup"><span data-stu-id="d938f-143">Create a certificate from the backup file of the source certificate, specifying the source database user as the owner.</span></span>|  
|<span data-ttu-id="d938f-144">[Concedere l'autorizzazione](/sql/t-sql/statements/grant-transact-sql) per la creazione della notifica degli eventi all'utente del database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-144">[Grant permission](/sql/t-sql/statements/grant-transact-sql) to create the event notification to the source database user.</span></span> <span data-ttu-id="d938f-145">Per altre informazioni su questa autorizzazione, vedere [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql)se non ne è presente una per il database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-145">For more information about this permission, see [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span></span>|<span data-ttu-id="d938f-146">Concedere l'autorizzazione REFERENCES all'utente del database di destinazione sul contratto [!INCLUDE[ssSB](../../includes/sssb-md.md)] per le notifiche degli eventi esistente: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span><span class="sxs-lookup"><span data-stu-id="d938f-146">Grant REFERENCES permission to the target database user on the existing event notifications [!INCLUDE[ssSB](../../includes/sssb-md.md)] contract: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span></span>|  
|<span data-ttu-id="d938f-147">[Creare un'associazione al servizio remoto](/sql/t-sql/statements/create-remote-service-binding-transact-sql) al servizio di destinazione e specificare le credenziali dell'utente del database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-147">[Create a remote service binding](/sql/t-sql/statements/create-remote-service-binding-transact-sql) to the target service and specify the credentials of the target database user.</span></span> <span data-ttu-id="d938f-148">L'associazione al servizio remoto garantisce che la chiave pubblica nel certificato di proprietà dell'utente del database di origine autentichi i messaggi inviati al server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-148">The remote service binding guarantees that the public key in the certificate owned by the source database user will authenticate messages that are sent to the target server.</span></span>|<span data-ttu-id="d938f-149">[Concedere](/sql/t-sql/statements/grant-transact-sql) le autorizzazioni CREATE QUEUE, CREATE SERVICE e CREATE SCHEMA all'utente del database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-149">[Grant](/sql/t-sql/statements/grant-transact-sql) CREATE QUEUE, CREATE SERVICE, and CREATE SCHEMA permissions to the target database user.</span></span>|  
||<span data-ttu-id="d938f-150">Connettersi al database come utente del database di destinazione, se non è ancora stata eseguita questa operazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-150">If not already connected to the database as the target database user, do so now.</span></span>|  
||<span data-ttu-id="d938f-151">[Creare una coda](/sql/t-sql/statements/create-queue-transact-sql) in cui ricevere i messaggi di notifica degli eventi e [creare un servizio](/sql/t-sql/statements/create-service-transact-sql) per il recapito dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="d938f-151">[Create a queue](/sql/t-sql/statements/create-queue-transact-sql) to receive the event notification messages and [create a service](/sql/t-sql/statements/create-service-transact-sql) to deliver the messages.</span></span>|  
||<span data-ttu-id="d938f-152">[Concedere l'autorizzazione SEND](/sql/t-sql/statements/grant-transact-sql) per il servizio di destinazione all'utente del database di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-152">[Grant SEND permission](/sql/t-sql/statements/grant-transact-sql) on the target service to the source database user.</span></span>|  
|<span data-ttu-id="d938f-153">Fornire l'identificatore di Service Broker del database di origine al server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-153">Provide the service broker identifier of the source database to the target server.</span></span> <span data-ttu-id="d938f-154">È possibile ottenere questo identificatore eseguendo una query sulla colonna **service_broker_guid** della vista del catalogo [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="d938f-154">This identifier can be obtained by querying the **service_broker_guid** column of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="d938f-155">Per una notifica degli eventi a livello di server, usare l'identificatore di Service Broker di **msdb**.</span><span class="sxs-lookup"><span data-stu-id="d938f-155">For a server-level event notification, use the service broker identifier of **msdb**.</span></span>|<span data-ttu-id="d938f-156">Fornire l'identificatore di Service Broker del database di destinazione al server di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-156">Provide the service broker identifier of the target database to the source server.</span></span>|  
  
 <span data-ttu-id="d938f-157">**Passaggio 4: creare route e impostare l'autenticazione a livello di server.**</span><span class="sxs-lookup"><span data-stu-id="d938f-157">**Step 4: Create routes and set up server-level authentication.**</span></span>  
  
 <span data-ttu-id="d938f-158">Completare le azioni seguenti nel server di origine e in quello di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-158">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="d938f-159">Server di origine</span><span class="sxs-lookup"><span data-stu-id="d938f-159">Source server</span></span>|<span data-ttu-id="d938f-160">Server di destinazione</span><span class="sxs-lookup"><span data-stu-id="d938f-160">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="d938f-161">[Creare una route](/sql/t-sql/statements/create-route-transact-sql) al servizio di destinazione e specificare l'identificatore di Service Broker del database di destinazione e il numero di porta TCP precedentemente concordato.</span><span class="sxs-lookup"><span data-stu-id="d938f-161">[Create a route](/sql/t-sql/statements/create-route-transact-sql) to the target service, and specify the service broker identifier of the target database and the agreed-upon TCP port number.</span></span>|<span data-ttu-id="d938f-162">Creare una route al servizio di origine e specificare l'identificatore di Service Broker del database di origine e il numero di porta TCP precedentemente definito.</span><span class="sxs-lookup"><span data-stu-id="d938f-162">Create a route to the source service, and specify the service broker identifier of the source database and the agreed-upon TCP port number.</span></span> <span data-ttu-id="d938f-163">Per specificare il servizio di origine, utilizzare il servizio fornito seguente: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span><span class="sxs-lookup"><span data-stu-id="d938f-163">To specify the source service, use the following supplied service: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span></span>|  
|<span data-ttu-id="d938f-164">Passare al database **master** per configurare l'autenticazione a livello di server.</span><span class="sxs-lookup"><span data-stu-id="d938f-164">Switch to the **master** database to configure server-level authentication.</span></span>|<span data-ttu-id="d938f-165">Passare al database **master** per configurare l'autenticazione a livello di server.</span><span class="sxs-lookup"><span data-stu-id="d938f-165">Switch to the **master** database to configure server-level authentication.</span></span>|  
|<span data-ttu-id="d938f-166">**Creare una chiave master** se non ne è presente una per il database [master](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d938f-166">If no master key exists for the **master** database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>|<span data-ttu-id="d938f-167">Creare una chiave master se non ne è presente una per il database **master** .</span><span class="sxs-lookup"><span data-stu-id="d938f-167">If no master key exists for the **master** database, create a master key.</span></span>|  
|<span data-ttu-id="d938f-168">[Creare un certificato](/sql/t-sql/statements/create-certificate-transact-sql) per l'autenticazione del database.</span><span class="sxs-lookup"><span data-stu-id="d938f-168">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that authenticates the database.</span></span>|<span data-ttu-id="d938f-169">Creare un certificato per l'autenticazione del database.</span><span class="sxs-lookup"><span data-stu-id="d938f-169">Create a certificate that authenticates the database.</span></span>|  
|<span data-ttu-id="d938f-170">[Eseguire il backup del certificato](/sql/t-sql/statements/backup-certificate-transact-sql) in un file accessibile al server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-170">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="d938f-171">Eseguire il backup del certificato in un file accessibile al server di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-171">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="d938f-172">[Creare un endpoint](/sql/t-sql/statements/create-endpoint-transact-sql)e specificare il numero di porta TCP precedentemente concordato, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *nome_certificato*) e il nome del certificato di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-172">[Create an endpoint](/sql/t-sql/statements/create-endpoint-transact-sql), and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|<span data-ttu-id="d938f-173">Creare un endpoint e specificare il numero di porta TCP precedentemente concordato, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *nome_certificato*) e il nome del certificato di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-173">Create an endpoint, and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|  
|<span data-ttu-id="d938f-174">[Creare un account di accesso](/sql/t-sql/statements/create-login-transact-sql)e specificare l'account di accesso del server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-174">[Create a login](/sql/t-sql/statements/create-login-transact-sql), and specify the login of the target server.</span></span>|<span data-ttu-id="d938f-175">Creare un account di accesso e specificare l'account di accesso del server di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-175">Create a login, and specify the login of the source server.</span></span>|  
|<span data-ttu-id="d938f-176">[Concedere l'autorizzazione CONNECT](/sql/t-sql/statements/grant-transact-sql) per l'endpoint all'account di accesso dell'autenticatore di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-176">[Grant CONNECT permission](/sql/t-sql/statements/grant-transact-sql) on the endpoint to the target authenticator login.</span></span>|<span data-ttu-id="d938f-177">Concedere l'autorizzazione CONNECT per l'endpoint all'account di accesso dell'autenticatore di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-177">Grant CONNECT permission on the endpoint to the source authenticator login.</span></span>|  
|<span data-ttu-id="d938f-178">[Creare un utente](/sql/t-sql/statements/create-user-transact-sql)e specificare l'account di accesso dell'autenticatore di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-178">[Create a user](/sql/t-sql/statements/create-user-transact-sql), and specify the target authenticator login.</span></span>|<span data-ttu-id="d938f-179">Creare un utente e specificare l'account di accesso dell'autenticatore di origine.</span><span class="sxs-lookup"><span data-stu-id="d938f-179">Create a user, and specify the source authenticator login.</span></span>|  
  
 <span data-ttu-id="d938f-180">**Passaggio 5: condividere i certificati per l'autenticazione a livello di server e creare la notifica degli eventi.**</span><span class="sxs-lookup"><span data-stu-id="d938f-180">**Step 5: Share certificates for server-level authentication and create the event notification.**</span></span>  
  
 <span data-ttu-id="d938f-181">Completare le azioni seguenti nel server di origine e in quello di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-181">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="d938f-182">Server di origine</span><span class="sxs-lookup"><span data-stu-id="d938f-182">Source server</span></span>|<span data-ttu-id="d938f-183">Server di destinazione</span><span class="sxs-lookup"><span data-stu-id="d938f-183">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="d938f-184">[Creare un certificato](/sql/t-sql/statements/create-certificate-transact-sql) dal file di backup del certificato di destinazione, specificando l'utente dell'autenticatore di destinazione come proprietario.</span><span class="sxs-lookup"><span data-stu-id="d938f-184">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target authenticator user as the owner.</span></span>|<span data-ttu-id="d938f-185">Creare un certificato dal file di backup del certificato di origine, specificando l'utente dell'autenticatore di origine come proprietario.</span><span class="sxs-lookup"><span data-stu-id="d938f-185">Create a certificate from the backup file of the source certificate, specifying the source authenticator user as the owner.</span></span>|  
|<span data-ttu-id="d938f-186">Passare al database di origine in cui creare la notifica degli eventi e connettersi come utente del database di origine, se non è ancora stata eseguita questa operazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-186">Switch to the source database on which to create the event notification, and if you are not already connected as the source database user, do so now.</span></span>|<span data-ttu-id="d938f-187">Passare al database di destinazione per ricevere i messaggi di notifica degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d938f-187">Switch to the target database to receive event notification messages.</span></span>|  
|<span data-ttu-id="d938f-188">[Creare la notifica degli eventi](/sql/t-sql/statements/create-event-notification-transact-sql)e specificare il servizio di Service Broker e l'identificatore del database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d938f-188">[Create the event notification](/sql/t-sql/statements/create-event-notification-transact-sql), and specify the broker service and identifier of the target database.</span></span>||  
  
## <a name="see-also"></a><span data-ttu-id="d938f-189">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="d938f-189">See Also</span></span>  
 <span data-ttu-id="d938f-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="d938f-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span></span>  
 <span data-ttu-id="d938f-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span></span>  
 <span data-ttu-id="d938f-193">[Gerarchia di crittografia](../security/encryption/encryption-hierarchy.md) </span><span class="sxs-lookup"><span data-stu-id="d938f-193">[Encryption Hierarchy](../security/encryption/encryption-hierarchy.md) </span></span>  
 <span data-ttu-id="d938f-194">[Implementazione di notifiche degli eventi](event-notifications.md) </span><span class="sxs-lookup"><span data-stu-id="d938f-194">[Implement Event Notifications](event-notifications.md) </span></span>  
 <span data-ttu-id="d938f-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span></span>  
 <span data-ttu-id="d938f-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span></span>  
 <span data-ttu-id="d938f-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span></span>  
 <span data-ttu-id="d938f-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span></span>  
 <span data-ttu-id="d938f-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span></span>  
 <span data-ttu-id="d938f-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="d938f-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span></span>  
 <span data-ttu-id="d938f-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span></span>  
 <span data-ttu-id="d938f-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span></span>  
 <span data-ttu-id="d938f-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d938f-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span></span>  
 [<span data-ttu-id="d938f-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d938f-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-event-notification-transact-sql)  
  
  
