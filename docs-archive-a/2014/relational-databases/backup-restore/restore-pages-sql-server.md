---
title: Ripristinare pagine (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.restorepage.general.f1
helpviewer_keywords:
- restoring pages [SQL Server]
- pages [SQL Server], restoring
- databases [SQL Server], damaged
- page restores [SQL Server]
- pages [SQL Server], damaged
- restoring [SQL Server], pages
ms.assetid: 07e40950-384e-4d84-9ac5-84da6dd27a91
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 6fb008314b9cb156f1cc575bda71b6364eca6e3a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87714435"
---
# <a name="restore-pages-sql-server"></a><span data-ttu-id="6a991-102">Ripristino di pagine (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="6a991-102">Restore Pages (SQL Server)</span></span>
  <span data-ttu-id="6a991-103">In questo argomento viene descritto come ripristinare le pagine in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] usando [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] o [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6a991-103">This topic describes how to restore pages in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="6a991-104">L'obiettivo di un ripristino della pagina è ripristinare una o più pagine danneggiate senza ripristinare l'intero database.</span><span class="sxs-lookup"><span data-stu-id="6a991-104">The goal of a page restore is to restore one or more damaged pages without restoring the whole database.</span></span> <span data-ttu-id="6a991-105">In genere, le pagine candidate al ripristino sono state contrassegnate come "sospette" a causa di un errore verificatosi all'accesso alla pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-105">Typically, pages that are candidates for restore have been marked as "suspect" because of an error that is encountered when accessing the page.</span></span> <span data-ttu-id="6a991-106">Le pagine sospette vengono identificate nella tabella [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) del database **msdb** .</span><span class="sxs-lookup"><span data-stu-id="6a991-106">Suspect pages are identified in the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) table in the **msdb** database.</span></span>  
  
 <span data-ttu-id="6a991-107">**Contenuto dell'articolo**</span><span class="sxs-lookup"><span data-stu-id="6a991-107">**In This Topic**</span></span>  
  
-   <span data-ttu-id="6a991-108">**Prima di iniziare:**</span><span class="sxs-lookup"><span data-stu-id="6a991-108">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="6a991-109">Casi in cui è utile il ripristino della pagina</span><span class="sxs-lookup"><span data-stu-id="6a991-109">When is a Page Restore Useful?</span></span>](#WhenUseful)  
  
     [<span data-ttu-id="6a991-110">Limitazioni e restrizioni</span><span class="sxs-lookup"><span data-stu-id="6a991-110">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="6a991-111">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="6a991-111">Recommendations</span></span>](#Recommendations)  
  
     [<span data-ttu-id="6a991-112">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="6a991-112">Security</span></span>](#Security)  
  
-   <span data-ttu-id="6a991-113">**Per ripristinare le pagine usando:**</span><span class="sxs-lookup"><span data-stu-id="6a991-113">**To restore pages, using:**</span></span>  
  
     [<span data-ttu-id="6a991-114">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="6a991-114">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="6a991-115">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="6a991-115">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="6a991-116">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="6a991-116">Before You Begin</span></span>  
  
###  <a name="when-is-a-page-restore-useful"></a><a name="WhenUseful"></a> <span data-ttu-id="6a991-117">Casi in cui è utile il ripristino della pagina</span><span class="sxs-lookup"><span data-stu-id="6a991-117">When is a Page Restore Useful?</span></span>  
 <span data-ttu-id="6a991-118">Il ripristino di una pagina è destinato alla correzione di pagine danneggiate isolate.</span><span class="sxs-lookup"><span data-stu-id="6a991-118">A page restore is intended for repairing isolated damaged pages.</span></span> <span data-ttu-id="6a991-119">Il ripristino e il recupero di poche pagine singole possono essere eseguiti in modo più rapido rispetto al ripristino di un file, riducendo la quantità di dati offline durante l'operazione di ripristino.</span><span class="sxs-lookup"><span data-stu-id="6a991-119">Restoring and recovering a few individual pages might be faster than a file restore, reducing the amount of data that is offline during a restore operation.</span></span> <span data-ttu-id="6a991-120">Tuttavia, se è necessario ripristinare un certo numero di pagine in un file, in genere è più efficiente ripristinare l'intero file.</span><span class="sxs-lookup"><span data-stu-id="6a991-120">However, if you have to restore more than a few pages in a file, it is generally more efficient to restore the whole file.</span></span> <span data-ttu-id="6a991-121">Se, ad esempio, numerose pagine in un dispositivo indicano la possibilità di un guasto imminente del dispositivo, prendere in considerazione il ripristino del file, se possibile in un percorso diverso, e la riparazione del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6a991-121">For example, if lots of pages on a device indicate a pending device failure, consider restoring the file, possibly to another location, and repairing the device.</span></span>  
  
 <span data-ttu-id="6a991-122">Non tutti gli errori di pagina richiedono inoltre un ripristino.</span><span class="sxs-lookup"><span data-stu-id="6a991-122">Furthermore, not all page errors require a restore.</span></span> <span data-ttu-id="6a991-123">Nei dati della cache, ad esempio in un indice secondario, può verificarsi un problema risolvibile ricalcolando i dati.</span><span class="sxs-lookup"><span data-stu-id="6a991-123">A problem can occur in cached data, such as a secondary index, that can be resolved by recalculating the data.</span></span> <span data-ttu-id="6a991-124">Se, ad esempio, l'amministratore del database elimina un indice secondario e lo ricompila, i dati danneggiati, sebbene corretti, non sono indicati come tali nella tabella [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="6a991-124">For example, if the database administrator drops a secondary index and rebuilds it, the corrupted data, although fixed, is not indicated as such in the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) table.</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="6a991-125">Limitazioni e restrizioni</span><span class="sxs-lookup"><span data-stu-id="6a991-125">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="6a991-126">Il ripristino delle pagine si applica ai database di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] che utilizzano i modelli di recupero con registrazione completa o con registrazione minima delle operazioni bulk.</span><span class="sxs-lookup"><span data-stu-id="6a991-126">Page restore applies to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that are using the full or bulk-logged recovery models.</span></span> <span data-ttu-id="6a991-127">Il ripristino della pagina è supportato solo per i filegroup di lettura/scrittura.</span><span class="sxs-lookup"><span data-stu-id="6a991-127">Page restore is supported only for read/write filegroups.</span></span>  
  
-   <span data-ttu-id="6a991-128">È possibile ripristinare solo le pagine di database.</span><span class="sxs-lookup"><span data-stu-id="6a991-128">Only database pages can be restored.</span></span> <span data-ttu-id="6a991-129">Non è possibile usare il ripristino della pagina per gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6a991-129">Page restore cannot be used to restore the following:</span></span>  
  
    -   <span data-ttu-id="6a991-130">Log delle transazioni</span><span class="sxs-lookup"><span data-stu-id="6a991-130">Transaction log</span></span>  
  
    -   <span data-ttu-id="6a991-131">Pagine di allocazione: pagine GAM (Global Allocation Map), pagine SGAM ( Shared Global Allocation Map) e pagine PFS (Page Free Space).</span><span class="sxs-lookup"><span data-stu-id="6a991-131">Allocation pages: Global Allocation Map (GAM) pages, Shared Global Allocation Map (SGAM) pages, and Page Free Space (PFS) pages.</span></span>  
  
    -   <span data-ttu-id="6a991-132">Pagina 0 di tutti i file di dati (pagina di avvio del file)</span><span class="sxs-lookup"><span data-stu-id="6a991-132">Page 0 of all data files (the file boot page)</span></span>  
  
    -   <span data-ttu-id="6a991-133">Pagina 1:9 (pagina di avvio del database)</span><span class="sxs-lookup"><span data-stu-id="6a991-133">Page 1:9 (the database boot page)</span></span>  
  
    -   <span data-ttu-id="6a991-134">Catalogo full-text</span><span class="sxs-lookup"><span data-stu-id="6a991-134">Full-text catalog</span></span>  
  
-   <span data-ttu-id="6a991-135">Nel caso di un database che usa il modello di recupero con registrazione minima delle operazioni bulk, per il ripristino della pagina sono previste le condizioni aggiuntive seguenti:</span><span class="sxs-lookup"><span data-stu-id="6a991-135">For a database that uses the bulk-logged recovery model, page restore has the following additional conditions:</span></span>  
  
    -   <span data-ttu-id="6a991-136">Il backup dei dati con registrazione minima delle operazioni bulk risulta problematico se il filegroup o i dati della pagina sono offline, poiché i dati offline non vengono registrati nel log.</span><span class="sxs-lookup"><span data-stu-id="6a991-136">Backing up while filegroup or page data is offline is problematic for bulk-logged data, because the offline data is not recorded in the log.</span></span> <span data-ttu-id="6a991-137">Una pagina offline può impedire il backup del log.</span><span class="sxs-lookup"><span data-stu-id="6a991-137">Any offline page can prevent backing up the log.</span></span> <span data-ttu-id="6a991-138">In questo caso, prendere in considerazione l'utilizzo di DBCC REPAIR, che può consentire una minore perdita di dati rispetto al ripristino del backup più recente.</span><span class="sxs-lookup"><span data-stu-id="6a991-138">In this cases, consider using DBCC REPAIR, because this might cause less data loss than restoring to the most recent backup.</span></span>  
  
    -   <span data-ttu-id="6a991-139">Se un backup del log di un database con registrazione minima delle operazioni bulk rileva una pagina contenente errori, non sarà possibile completarlo, a meno che non sia specificata la clausola WITH CONTINUE_AFTER_ERROR.</span><span class="sxs-lookup"><span data-stu-id="6a991-139">If a log backup of a bulk-logged database encounters a bad page, it fails unless WITH CONTINUE_AFTER_ERROR is specified.</span></span>  
  
    -   <span data-ttu-id="6a991-140">Il ripristino della pagina in genere non funziona con il recupero con registrazione minima delle operazioni bulk.</span><span class="sxs-lookup"><span data-stu-id="6a991-140">Page restore generally does not work with bulk-logged recovery.</span></span>  
  
         <span data-ttu-id="6a991-141">Una procedura consigliata per l'esecuzione del ripristino della pagina consiste nell'impostare il database sul modello di recupero con registrazione completa e tentare un backup del log.</span><span class="sxs-lookup"><span data-stu-id="6a991-141">A best practice for performing page restore is to set the database to the full recovery model, and try a log backup.</span></span> <span data-ttu-id="6a991-142">Se il backup del log funziona, è possibile procedere con il ripristino della pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-142">If the log backup works, you can continue with the page restore.</span></span> <span data-ttu-id="6a991-143">Se l'esecuzione del backup del log ha invece esito negativo, le modifiche eseguite dopo il backup del log precedente verranno perse oppure sarà necessario tentare di eseguire DBCC con l'opzione REPAIR_ALLOW_DATA_LOSS.</span><span class="sxs-lookup"><span data-stu-id="6a991-143">If the log backup fails, you either have to lose work since the previous log backup or you have to try running DBCC must be run with the REPAIR_ALLOW_DATA_LOSS option.</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="6a991-144">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="6a991-144">Recommendations</span></span>  
  
-   <span data-ttu-id="6a991-145">Scenari di ripristino della pagina:</span><span class="sxs-lookup"><span data-stu-id="6a991-145">Page restore scenarios:</span></span>  
  
     <span data-ttu-id="6a991-146">Ripristino della pagina offline</span><span class="sxs-lookup"><span data-stu-id="6a991-146">Offline page restore</span></span>  
     <span data-ttu-id="6a991-147">Tutte le edizioni di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] supportano il ripristino delle pagine quando il database è offline.</span><span class="sxs-lookup"><span data-stu-id="6a991-147">All editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] support restoring pages when the database is offline.</span></span> <span data-ttu-id="6a991-148">Durante un ripristino della pagina offline, il database è offline mentre le pagine danneggiate vengono ripristinate.</span><span class="sxs-lookup"><span data-stu-id="6a991-148">In an offline page restore, the database is offline while damaged pages are restored.</span></span> <span data-ttu-id="6a991-149">Al termine della sequenza di ripristino, il database torna online.</span><span class="sxs-lookup"><span data-stu-id="6a991-149">At the end of the restore sequence, the database comes online.</span></span>  
  
     <span data-ttu-id="6a991-150">Ripristino della pagina online</span><span class="sxs-lookup"><span data-stu-id="6a991-150">Online page restore</span></span>  
     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="6a991-151">Enterprise Edition supporta il ripristino della pagina online, anche se nei casi in cui il database è offline viene usato il ripristino non in linea.</span><span class="sxs-lookup"><span data-stu-id="6a991-151">Enterprise edition supports online page restores, though they use offline restore if the database is currently offline.</span></span> <span data-ttu-id="6a991-152">Nella maggior parte dei casi, una pagina danneggiata può essere ripristinata mentre il database, incluso il filegroup in cui una pagina viene ripristinata, rimane online.</span><span class="sxs-lookup"><span data-stu-id="6a991-152">In most cases, a damaged page can be restored while the database remains online, including the filegroup to which a page is being restored.</span></span> <span data-ttu-id="6a991-153">Quando il filegroup primario è online, anche se uno o più filegroup secondari sono offline, il ripristino della pagina viene in genere eseguito online.</span><span class="sxs-lookup"><span data-stu-id="6a991-153">When the primary filegroup is online, even if one or more of its secondary filegroups are offline, page restores are usually performed online.</span></span> <span data-ttu-id="6a991-154">Talvolta, tuttavia, una pagina danneggiata può richiedere un ripristino offline.</span><span class="sxs-lookup"><span data-stu-id="6a991-154">Occasionally, however, a damaged page can require an offline restore.</span></span> <span data-ttu-id="6a991-155">Un danno a determinate pagine di importanza critica può ad esempio impedire l'avvio del database.</span><span class="sxs-lookup"><span data-stu-id="6a991-155">For example, damage to certain critical pages might prevent the database from starting.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="6a991-156">Se nelle pagine danneggiate sono archiviati metadati del database di importanza critica, gli aggiornamenti necessari ai metadati potrebbero non riuscire durante un tentativo di ripristino della pagina online.</span><span class="sxs-lookup"><span data-stu-id="6a991-156">If damaged pages are storing critical database metadata, required updates to metadata might fail during an online page restore attempt.</span></span> <span data-ttu-id="6a991-157">In questo caso è possibile eseguire un ripristino della pagina non in linea, ma è prima necessario creare un [backup della parte finale del log](tail-log-backups-sql-server.md) eseguendo il backup del log delle transazioni tramite RESTORE WITH NORECOVERY.</span><span class="sxs-lookup"><span data-stu-id="6a991-157">In this case, you can perform an offline page restore, but first you must create a [tail log backup](tail-log-backups-sql-server.md) (by backing up the transaction log using RESTORE WITH NORECOVERY).</span></span>  
  
-   <span data-ttu-id="6a991-158">Il ripristino della pagina sfrutta le funzionalità ottimizzate di segnalazione e rilevamento degli errori a livello di pagina, inclusi i checksum di pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-158">Page restore takes advantage of the improved page-level error reporting (including page checksums) and tracking.</span></span> <span data-ttu-id="6a991-159">Le pagine rilevate come *danneggiate*da un errore di checksum o di scrittura incompleta possono essere ripristinate tramite un'operazione di ripristino della pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-159">Pages that are detected as corrupted by check-summing or a torn write, *damaged pages*, can be restored by a page restore operation.</span></span> <span data-ttu-id="6a991-160">Vengono ripristinate solo le pagine specificate in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="6a991-160">Only explicitly specified pages are restored.</span></span> <span data-ttu-id="6a991-161">Ogni pagina specificata viene sostituita dalla copia di tale pagina dal backup dei dati specificato.</span><span class="sxs-lookup"><span data-stu-id="6a991-161">Each specified page is replaced by the copy of that page from the specified data backup.</span></span>  
  
     <span data-ttu-id="6a991-162">Quando si ripristinano i backup del log successivi, questi vengono applicati solo ai file di database che contengono almeno una pagina recuperata.</span><span class="sxs-lookup"><span data-stu-id="6a991-162">When you restore the subsequent log backups, they are applied only to database files that contain at least one page that is being recovered.</span></span> <span data-ttu-id="6a991-163">È inoltre necessario che una catena non interrotta di backup del log venga applicata all'ultimo ripristino completo o differenziale per aggiornare il filegroup che include la pagina rispetto al file di log attuale.</span><span class="sxs-lookup"><span data-stu-id="6a991-163">An unbroken chain of log backups must be applied to the last full or differential restore to bring the filegroup that contains the page forward to the current log file.</span></span> <span data-ttu-id="6a991-164">Analogamente al ripristino del file, il set di rollforward viene avanzato con un unico passaggio di rollforward del log.</span><span class="sxs-lookup"><span data-stu-id="6a991-164">As in a file restore, the roll forward set is advanced with a single log redo pass.</span></span> <span data-ttu-id="6a991-165">Affinché il ripristino delle pagine avvenga correttamente, è necessario che le pagine ripristinate vengano recuperate fino a uno stato consistente con il database.</span><span class="sxs-lookup"><span data-stu-id="6a991-165">For a page restore to succeed, the restored pages must be recovered to a state consistent with the database.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="6a991-166">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="6a991-166">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="6a991-167">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="6a991-167">Permissions</span></span>  
 <span data-ttu-id="6a991-168">Se il database da ripristinare non esiste, per eseguire un'operazione RESTORE l'utente deve disporre delle autorizzazioni CREATE DATABASE.</span><span class="sxs-lookup"><span data-stu-id="6a991-168">If the database being restored does not exist, the user must have CREATE DATABASE permissions to be able to execute RESTORE.</span></span> <span data-ttu-id="6a991-169">Se il database esiste, le autorizzazioni per l'istruzione RESTORE vengono assegnate per impostazione predefinita ai membri dei ruoli predefiniti del server **sysadmin** e **dbcreator** e al proprietario (**dbo**) del database. Per l'opzione FROM DATABASE_SNAPSHOT, il database esiste sempre.</span><span class="sxs-lookup"><span data-stu-id="6a991-169">If the database exists, RESTORE permissions default to members of the **sysadmin** and **dbcreator** fixed server roles and the owner (**dbo**) of the database (for the FROM DATABASE_SNAPSHOT option, the database always exists).</span></span>  
  
 <span data-ttu-id="6a991-170">Le autorizzazioni per l'istruzione RESTORE vengono assegnate ai ruoli in cui le informazioni sull'appartenenza sono sempre disponibili per il server.</span><span class="sxs-lookup"><span data-stu-id="6a991-170">RESTORE permissions are given to roles in which membership information is always readily available to the server.</span></span> <span data-ttu-id="6a991-171">Poiché è possibile controllare l'appartenenza ai ruoli predefiniti del database solo quando il database è accessibile e non è danneggiato, condizioni che non risultano sempre vere quando si esegue un'operazione RESTORE, i membri del ruolo predefinito del database **db_owner** non dispongono delle autorizzazioni per l'istruzione RESTORE.</span><span class="sxs-lookup"><span data-stu-id="6a991-171">Because fixed database role membership can be checked only when the database is accessible and undamaged, which is not always the case when RESTORE is executed, members of the **db_owner** fixed database role do not have RESTORE permissions.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="6a991-172">Utilizzo di SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="6a991-172">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="6a991-173">A partire da [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] supporta il ripristino della pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-173">Starting in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] supports page restores.</span></span>  
  
#### <a name="to-restore-pages"></a><span data-ttu-id="6a991-174">Per ripristinare le pagine</span><span class="sxs-lookup"><span data-stu-id="6a991-174">To restore pages</span></span>  
  
1.  <span data-ttu-id="6a991-175">Stabilire una connessione all'istanza appropriata di [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], quindi fare clic sul nome del server in Esplora oggetti per espandere l'albero di server.</span><span class="sxs-lookup"><span data-stu-id="6a991-175">Connect to the appropriate instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="6a991-176">Espandere **Database**.</span><span class="sxs-lookup"><span data-stu-id="6a991-176">Expand **Databases**.</span></span> <span data-ttu-id="6a991-177">A seconda del database, selezionare un database utente oppure espandere **Database di sistema**e selezionare un database di sistema.</span><span class="sxs-lookup"><span data-stu-id="6a991-177">Depending on the database, either select a user database or expand **System Databases**, and then select a system database.</span></span>  
  
3.  <span data-ttu-id="6a991-178">Fare clic con il pulsante destro del mouse sul database, scegliere **Attività**, **Ripristina**, quindi fare clic su **Pagina**. Verrà aperta la finestra di dialogo **Ripristina pagina** .</span><span class="sxs-lookup"><span data-stu-id="6a991-178">Right-click the database, point to **Tasks**, point to **Restore**, and then click **Page**, which opens the **Restore Page** dialog box.</span></span>  
  
     <span data-ttu-id="6a991-179">**Restore**</span><span class="sxs-lookup"><span data-stu-id="6a991-179">**Restore**</span></span>  
     <span data-ttu-id="6a991-180">Questa sezione ha la stessa funzione di **Ripristina fino a** in [Ripristina database (pagina Generale)](../../integration-services/general-page-of-integration-services-designers-options.md).</span><span class="sxs-lookup"><span data-stu-id="6a991-180">This section performs the same function as that of **Restore to** on the [Restore Database (General Page)](../../integration-services/general-page-of-integration-services-designers-options.md).</span></span>  
  
     <span data-ttu-id="6a991-181">**Database**</span><span class="sxs-lookup"><span data-stu-id="6a991-181">**Database**</span></span>  
     <span data-ttu-id="6a991-182">Consente di specificare il database da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="6a991-182">Specifies the database to restore.</span></span> <span data-ttu-id="6a991-183">È possibile immettere un nuovo database oppure selezionarne uno esistente nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="6a991-183">You can enter a new database or select an existing database from the drop-down list.</span></span> <span data-ttu-id="6a991-184">Nell'elenco sono inclusi tutti i database disponibili nel server, ad eccezione dei database di sistema **master** e **tempdb**.</span><span class="sxs-lookup"><span data-stu-id="6a991-184">The list includes all databases on the server, except the system databases **master** and **tempdb**.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="6a991-185">Per ripristinare un backup protetto da password, è necessario usare l'istruzione [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="6a991-185">To restore a password-protected backup, you must use the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement.</span></span>  
  
     <span data-ttu-id="6a991-186">**Backup della parte finale del log**</span><span class="sxs-lookup"><span data-stu-id="6a991-186">**Tail-Log backup**</span></span>  
     <span data-ttu-id="6a991-187">Immettere o selezionare un nome di file in **Dispositivo di backup** per indicare dove verrà archiviato il backup della parte finale del log per il database.</span><span class="sxs-lookup"><span data-stu-id="6a991-187">Enter or select a file name in **Backup device** where there tail-log backup will be stored for the database.</span></span>  
  
     <span data-ttu-id="6a991-188">**Set di backup**</span><span class="sxs-lookup"><span data-stu-id="6a991-188">**Backup Sets**</span></span>  
     <span data-ttu-id="6a991-189">In questa sezione vengono visualizzati i set di backup coinvolti nel ripristino.</span><span class="sxs-lookup"><span data-stu-id="6a991-189">This section displays the backup sets involved in the restoration.</span></span>  
  
    |<span data-ttu-id="6a991-190">Intestazione</span><span class="sxs-lookup"><span data-stu-id="6a991-190">Header</span></span>|<span data-ttu-id="6a991-191">Valori</span><span class="sxs-lookup"><span data-stu-id="6a991-191">Values</span></span>|  
    |------------|------------|  
    |<span data-ttu-id="6a991-192">**Nome**</span><span class="sxs-lookup"><span data-stu-id="6a991-192">**Name**</span></span>|<span data-ttu-id="6a991-193">Nome del set di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-193">The name of the backup set.</span></span>|  
    |<span data-ttu-id="6a991-194">**Componente**</span><span class="sxs-lookup"><span data-stu-id="6a991-194">**Component**</span></span>|<span data-ttu-id="6a991-195">Componente di cui è stato eseguito il backup: **database**, **file** o **\<blank>** , nel caso dei log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="6a991-195">The backed-up component: **Database**, **File**, or **\<blank>** (for transaction logs).</span></span>|  
    |<span data-ttu-id="6a991-196">**Tipo**</span><span class="sxs-lookup"><span data-stu-id="6a991-196">**Type**</span></span>|<span data-ttu-id="6a991-197">Tipo di operazione di backup eseguita: **Completo**, **Differenziale** o **Log delle transazioni**.</span><span class="sxs-lookup"><span data-stu-id="6a991-197">The type of backup performed: **Full**, **Differential**, or **Transaction Log**.</span></span>|  
    |<span data-ttu-id="6a991-198">**Server**</span><span class="sxs-lookup"><span data-stu-id="6a991-198">**Server**</span></span>|<span data-ttu-id="6a991-199">Nome dell'istanza del [!INCLUDE[ssDE](../../includes/ssde-md.md)] che ha eseguito l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-199">The name of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] instance that performed the backup operation.</span></span>|  
    |<span data-ttu-id="6a991-200">**Database**</span><span class="sxs-lookup"><span data-stu-id="6a991-200">**Database**</span></span>|<span data-ttu-id="6a991-201">Nome del database interessato dall'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-201">The name of the database involved in the backup operation.</span></span>|  
    |<span data-ttu-id="6a991-202">**Posizione**</span><span class="sxs-lookup"><span data-stu-id="6a991-202">**Position**</span></span>|<span data-ttu-id="6a991-203">Posizione del set di backup nel volume.</span><span class="sxs-lookup"><span data-stu-id="6a991-203">The position of the backup set in the volume.</span></span>|  
    |<span data-ttu-id="6a991-204">**Primo LSN**</span><span class="sxs-lookup"><span data-stu-id="6a991-204">**First LSN**</span></span>|<span data-ttu-id="6a991-205">Numero di sequenza del file di log (LSN) della prima transazione nel set di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-205">The log sequence number (LSN) of the first transaction in the backup set.</span></span> <span data-ttu-id="6a991-206">Vuoto per i backup dei file.</span><span class="sxs-lookup"><span data-stu-id="6a991-206">Blank for file backups.</span></span>|  
    |<span data-ttu-id="6a991-207">**Ultimo LSN**</span><span class="sxs-lookup"><span data-stu-id="6a991-207">**Last LSN**</span></span>|<span data-ttu-id="6a991-208">Numero di sequenza del file di log (LSN) dell'ultima transazione nel set di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-208">The log sequence number (LSN) of the last transaction in the backup set.</span></span> <span data-ttu-id="6a991-209">Vuoto per i backup dei file.</span><span class="sxs-lookup"><span data-stu-id="6a991-209">Blank for file backups.</span></span>|  
    |<span data-ttu-id="6a991-210">**LSN checkpoint**</span><span class="sxs-lookup"><span data-stu-id="6a991-210">**Checkpoint LSN**</span></span>|<span data-ttu-id="6a991-211">Numero di sequenza del file di log (LSN) del checkpoint più recente al momento della creazione del backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-211">The log sequence number (LSN) of the most recent checkpoint at the time the backup was created.</span></span>|  
    |<span data-ttu-id="6a991-212">**LSN completo**</span><span class="sxs-lookup"><span data-stu-id="6a991-212">**Full LSN**</span></span>|<span data-ttu-id="6a991-213">Numero di sequenza del file di log (LSN) dell'operazione di backup completo del database più recente.</span><span class="sxs-lookup"><span data-stu-id="6a991-213">The log sequence number (LSN) of the most recent full database backup.</span></span>|  
    |<span data-ttu-id="6a991-214">**Data inizio**</span><span class="sxs-lookup"><span data-stu-id="6a991-214">**Start Date**</span></span>|<span data-ttu-id="6a991-215">Data e ora di inizio dell'operazione di backup, visualizzate in base alle impostazioni internazionali del client.</span><span class="sxs-lookup"><span data-stu-id="6a991-215">The date and time when the backup operation began, presented in the regional setting of the client.</span></span>|  
    |<span data-ttu-id="6a991-216">**Data fine**</span><span class="sxs-lookup"><span data-stu-id="6a991-216">**Finish Date**</span></span>|<span data-ttu-id="6a991-217">Data e ora di fine dell'operazione di backup, visualizzate in base alle impostazioni internazionali del client.</span><span class="sxs-lookup"><span data-stu-id="6a991-217">The date and time when the backup operation finished, presented in the regional setting of the client.</span></span>|  
    |<span data-ttu-id="6a991-218">**Dimensione**</span><span class="sxs-lookup"><span data-stu-id="6a991-218">**Size**</span></span>|<span data-ttu-id="6a991-219">Dimensioni in byte del set di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-219">The size of the backup set in bytes.</span></span>|  
    |<span data-ttu-id="6a991-220">**Nome utente**</span><span class="sxs-lookup"><span data-stu-id="6a991-220">**User Name**</span></span>|<span data-ttu-id="6a991-221">Nome dell'utente che ha eseguito l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-221">The name of the user who performed the backup operation.</span></span>|  
    |<span data-ttu-id="6a991-222">**Scadenza**</span><span class="sxs-lookup"><span data-stu-id="6a991-222">**Expiration**</span></span>|<span data-ttu-id="6a991-223">Data e ora di scadenza del set di backup.</span><span class="sxs-lookup"><span data-stu-id="6a991-223">The date and time the backup set expires.</span></span>|  
  
     <span data-ttu-id="6a991-224">Fare clic su **Verifica** per controllare l'integrità dei file di backup necessaria per eseguire l'operazione di ripristino della pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-224">Click **Verify** to check the integrity of the backup files needed to perform the page restore operation.</span></span>  
  
4.  <span data-ttu-id="6a991-225">Per identificare pagine danneggiate, con il database corretto selezionato nella casella **Database** , fare clic su **Controlla pagine di database**.</span><span class="sxs-lookup"><span data-stu-id="6a991-225">To identify corrupted pages, with the correct database selected in the **Database** box, click **Check Database Pages**.</span></span> <span data-ttu-id="6a991-226">L'operazione può richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="6a991-226">This is a long running operation.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="6a991-227">Per ripristinare pagine specifiche non danneggiate, fare clic su **Aggiungi** e immettere l' **ID file** e l' **ID pagina** delle pagine da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="6a991-227">To restore specific pages that are not corrupted, click **Add** and enter the **File ID** and **Page ID** of the pages to be restored.</span></span>  
  
5.  <span data-ttu-id="6a991-228">La griglia di pagine viene usata per identificare le pagine da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="6a991-228">The pages grid is used to identify the pages to be restored.</span></span> <span data-ttu-id="6a991-229">All'inizio questa griglia viene popolata dalla tabella di sistema [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="6a991-229">Initially, this grid is populated from the [suspect_pages](/sql/relational-databases/system-tables/suspect-pages-transact-sql) system table.</span></span> <span data-ttu-id="6a991-230">Per aggiungere o rimuovere pagine dalla griglia, fare clic su **Aggiungi** o su **Rimuovi**.</span><span class="sxs-lookup"><span data-stu-id="6a991-230">To add or remove pages from the grid, click **Add** or **Remove**.</span></span> <span data-ttu-id="6a991-231">Per altre informazioni, vedere [Gestione della tabella suspect_pages &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="6a991-231">For more information, see [Manage the suspect_pages Table &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md).</span></span>  
  
6.  <span data-ttu-id="6a991-232">Nella griglia **Set di backup** sono elencati i set di backup inclusi nel piano di ripristino predefinito.</span><span class="sxs-lookup"><span data-stu-id="6a991-232">The **Backup sets** grid lists the backup sets in the default restore plan.</span></span> <span data-ttu-id="6a991-233">Facoltativamente, fare clic su **Verifica** per verificare che i backup siano leggibili e che i set di backup siano completi, senza ripristinarli.</span><span class="sxs-lookup"><span data-stu-id="6a991-233">Optionally, click **Verify** to verify that the backups are readable and that the backup sets are complete, without restoring them.</span></span> <span data-ttu-id="6a991-234">Per altre informazioni, vedere [RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6a991-234">For more information, see [RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql).</span></span>  
  
     <span data-ttu-id="6a991-235">**Pagine**</span><span class="sxs-lookup"><span data-stu-id="6a991-235">**Pages**</span></span>  
  
7.  <span data-ttu-id="6a991-236">Per ripristinare le pagine elencate nella griglia, fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="6a991-236">To restore the pages listed in the pages grid, click **OK**.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="6a991-237">Uso di Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="6a991-237">Using Transact-SQL</span></span>  
 <span data-ttu-id="6a991-238">Per specificare una pagina in un'istruzione RESTORE DATABASE, sono necessari l'ID del file contenente la pagina e l'ID della pagina.</span><span class="sxs-lookup"><span data-stu-id="6a991-238">To specify a page in a RESTORE DATABASE statement, you need the file ID of the file containing the page and the page ID of the page.</span></span> <span data-ttu-id="6a991-239">La sintassi necessaria è la seguente:</span><span class="sxs-lookup"><span data-stu-id="6a991-239">The required syntax is as follows:</span></span>  
  
 `RESTORE DATABASE <database_name>`  
  
 `PAGE = '<file: page> [ ,... n ] ' [ ,... n ]`  
  
 `FROM <backup_device> [ ,... n ]`  
  
 `WITH NORECOVERY`  
  
 <span data-ttu-id="6a991-240">Per altre informazioni sui parametri dell'opzione PAGE, vedere [Argomenti dell'istruzione RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-arguments-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6a991-240">For more information about the parameters of the PAGE option, see [RESTORE Arguments &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-arguments-transact-sql).</span></span> <span data-ttu-id="6a991-241">Per altre informazioni sulla sintassi di RESTORE DATABASE, vedere [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6a991-241">For more information about the RESTORE DATABASE syntax, see [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql).</span></span>  
  
#### <a name="to-restore-pages"></a><span data-ttu-id="6a991-242">Per ripristinare le pagine</span><span class="sxs-lookup"><span data-stu-id="6a991-242">To restore pages</span></span>  
  
1.  <span data-ttu-id="6a991-243">Ottenere gli ID di pagina delle pagine danneggiate da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="6a991-243">Obtain the page IDs of the damaged pages to be restored.</span></span> <span data-ttu-id="6a991-244">Un errore di checksum o di scrittura incompleta restituisce l'ID della pagina, con le informazioni necessarie per specificare le pagine.</span><span class="sxs-lookup"><span data-stu-id="6a991-244">A checksum or torn write error returns page ID, providing the information required for specifying the pages.</span></span> <span data-ttu-id="6a991-245">Per cercare l'ID di una pagina danneggiata, usare una delle origini seguenti:</span><span class="sxs-lookup"><span data-stu-id="6a991-245">To look up page ID of a damaged page, use any of the following sources.</span></span>  
  
    |<span data-ttu-id="6a991-246">Origine dell'ID di pagina</span><span class="sxs-lookup"><span data-stu-id="6a991-246">Source of page ID</span></span>|<span data-ttu-id="6a991-247">Argomento</span><span class="sxs-lookup"><span data-stu-id="6a991-247">Topic</span></span>|  
    |-----------------------|-----------|  
    |<span data-ttu-id="6a991-248">**msdb..suspect_pages**</span><span class="sxs-lookup"><span data-stu-id="6a991-248">**msdb..suspect_pages**</span></span>|[<span data-ttu-id="6a991-249">Gestione della tabella suspect_pages &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="6a991-249">Manage the suspect_pages Table &#40;SQL Server&#41;</span></span>](manage-the-suspect-pages-table-sql-server.md)|  
    |<span data-ttu-id="6a991-250">Log degli errori</span><span class="sxs-lookup"><span data-stu-id="6a991-250">Error log</span></span>|[<span data-ttu-id="6a991-251">Visualizzazione del log degli errori di SQL Server &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="6a991-251">View the SQL Server Error Log &#40;SQL Server Management Studio&#41;</span></span>](../../ssms/sql-server-management-studio-ssms.md)|  
    |<span data-ttu-id="6a991-252">Tracce degli eventi</span><span class="sxs-lookup"><span data-stu-id="6a991-252">Event traces</span></span>|[<span data-ttu-id="6a991-253">Monitoraggio e risposta agli eventi</span><span class="sxs-lookup"><span data-stu-id="6a991-253">Monitor and Respond to Events</span></span>](../../ssms/agent/monitor-and-respond-to-events.md)|  
    |<span data-ttu-id="6a991-254">DBCC</span><span class="sxs-lookup"><span data-stu-id="6a991-254">DBCC</span></span>|[<span data-ttu-id="6a991-255">DBCC &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6a991-255">DBCC &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/database-console-commands/dbcc-transact-sql)|  
    |<span data-ttu-id="6a991-256">Provider WMI</span><span class="sxs-lookup"><span data-stu-id="6a991-256">WMI provider</span></span>|[<span data-ttu-id="6a991-257">Concetti relativi al provider WMI per eventi del server</span><span class="sxs-lookup"><span data-stu-id="6a991-257">WMI Provider for Server Events Concepts</span></span>](../wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)|  
  
2.  <span data-ttu-id="6a991-258">Avviare un ripristino della pagina con un backup completo del database, del file o del filegroup contenente la pagina desiderata.</span><span class="sxs-lookup"><span data-stu-id="6a991-258">Start a page restore with a full database, file, or filegroup backup that contains the page.</span></span> <span data-ttu-id="6a991-259">Nell'istruzione RESTORE DATABASE usare la clausola PAGE per elencare gli ID di tutte le pagine da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="6a991-259">In the RESTORE DATABASE statement, use the PAGE clause to list the page IDs of all of the pages to be restored.</span></span>  
  
3.  <span data-ttu-id="6a991-260">Applicare i backup differenziali più recenti.</span><span class="sxs-lookup"><span data-stu-id="6a991-260">Apply the most recent differentials .</span></span>  
  
4.  <span data-ttu-id="6a991-261">Applicare i backup del log successivi.</span><span class="sxs-lookup"><span data-stu-id="6a991-261">Apply the subsequent log backups.</span></span>  
  
5.  <span data-ttu-id="6a991-262">Creare un nuovo backup del log del database che include l'LSN finale delle pagine ripristinate, ovvero il punto in corrispondenza del quale viene portata offline l'ultima pagina ripristinata.</span><span class="sxs-lookup"><span data-stu-id="6a991-262">Create a new log backup of the database that includes the final LSN of the restored pages, that is, the point at which the last restored page is taken offline.</span></span> <span data-ttu-id="6a991-263">L'LSN finale, impostato come parte del primo ripristino nella sequenza, è l'LSN di destinazione di rollforward.</span><span class="sxs-lookup"><span data-stu-id="6a991-263">The final LSN, which is set as part of the first restore in the sequence, is the redo target LSN.</span></span> <span data-ttu-id="6a991-264">Il rollforward online del file che include la pagina è in grado di arrestarsi in corrispondenza dell'LSN di destinazione di rollforward.</span><span class="sxs-lookup"><span data-stu-id="6a991-264">Online roll forward of the file containing the page is able to stop at the redo target LSN.</span></span> <span data-ttu-id="6a991-265">Per conoscere l'LSN di destinazione della fase di rollforward corrente di un file, vedere la colonna **redo_target_lsn** di **sys.master_files**.</span><span class="sxs-lookup"><span data-stu-id="6a991-265">To learn the current redo target LSN of a file, see the **redo_target_lsn** column of **sys.master_files**.</span></span> <span data-ttu-id="6a991-266">Per altre informazioni, vedere [sys.master_files &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-master-files-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="6a991-266">For more information, see [sys.master_files &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-master-files-transact-sql).</span></span>  
  
6.  <span data-ttu-id="6a991-267">Ripristinare il nuovo backup del log.</span><span class="sxs-lookup"><span data-stu-id="6a991-267">Restore the new log backup.</span></span> <span data-ttu-id="6a991-268">Una volta applicato il nuovo backup del log, il ripristino della pagina è completo e le pagine sono utilizzabili.</span><span class="sxs-lookup"><span data-stu-id="6a991-268">After this new log backup is applied, the page restore is completed and the pages are now usable.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6a991-269">Questa sequenza è analoga a una sequenza di ripristino del file.</span><span class="sxs-lookup"><span data-stu-id="6a991-269">This sequence is analogous to a file restore sequence.</span></span> <span data-ttu-id="6a991-270">In effetti, il ripristino della pagina e i ripristini dei file possono essere eseguiti entrambi come parte della stessa sequenza.</span><span class="sxs-lookup"><span data-stu-id="6a991-270">In fact, page restore and file restores can both be performed as part of the same sequence.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="6a991-271">Esempio (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="6a991-271">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="6a991-272">Nell'esempio seguente vengono ripristinate quattro pagine danneggiate del file `B` con `NORECOVERY`.</span><span class="sxs-lookup"><span data-stu-id="6a991-272">The following example restores four damaged pages of file `B` with `NORECOVERY`.</span></span> <span data-ttu-id="6a991-273">Successivamente, vengono applicati due backup del log con `NORECOVERY`, seguiti dal backup della parte finale del log, ripristinato con `RECOVERY`.</span><span class="sxs-lookup"><span data-stu-id="6a991-273">Next, two log backups are applied with `NORECOVERY`, followed with the tail-log backup, which is restored with `RECOVERY`.</span></span> <span data-ttu-id="6a991-274">Nell'esempio seguente viene eseguito un ripristino in linea.</span><span class="sxs-lookup"><span data-stu-id="6a991-274">This example performs an online restore.</span></span> <span data-ttu-id="6a991-275">Nell'esempio l'ID del file `B` è `1`e gli ID delle pagine danneggiate sono `57`, `202`, `916`e `1016`.</span><span class="sxs-lookup"><span data-stu-id="6a991-275">In the example, the file ID of file `B` is `1`, and the page IDs of the damaged pages are `57`, `202`, `916`, and `1016`.</span></span>  
  
```sql  
RESTORE DATABASE <database> PAGE='1:57, 1:202, 1:916, 1:1016'  
   FROM <file_backup_of_file_B>   
   WITH NORECOVERY;  
RESTORE LOG <database> FROM <log_backup>   
   WITH NORECOVERY;  
RESTORE LOG <database> FROM <log_backup>   
   WITH NORECOVERY;   
BACKUP LOG <database> TO <new_log_backup>;   
RESTORE LOG <database> FROM <new_log_backup> WITH RECOVERY;  
GO  
```  
  
## <a name="see-also"></a><span data-ttu-id="6a991-276">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="6a991-276">See Also</span></span>  
 <span data-ttu-id="6a991-277">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="6a991-277">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="6a991-278">[Applicare backup del log delle transazioni &#40;SQL Server&#41;](transaction-log-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6a991-278">[Apply Transaction Log Backups &#40;SQL Server&#41;](transaction-log-backups-sql-server.md) </span></span>  
 <span data-ttu-id="6a991-279">[Gestione della tabella suspect_pages &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="6a991-279">[Manage the suspect_pages Table &#40;SQL Server&#41;](manage-the-suspect-pages-table-sql-server.md) </span></span>  
 [<span data-ttu-id="6a991-280">Backup e ripristino di database SQL Server</span><span class="sxs-lookup"><span data-stu-id="6a991-280">Back Up and Restore of SQL Server Databases</span></span>](back-up-and-restore-of-sql-server-databases.md)  
  
  
