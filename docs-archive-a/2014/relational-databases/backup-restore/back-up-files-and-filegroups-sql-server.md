---
title: Backup di file e filegroup (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- backing up filegroups [SQL Server]
- file backups [SQL Server], how-to topics
- backing up files [SQL Server]
- backups [SQL Server], creating
- filegroups [SQL Server], backing up
ms.assetid: a0d3a567-7d8b-4cfe-a505-d197b9a51f70
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 7affc90b064febaa70e0a67108074f412b4bbf00
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624255"
---
# <a name="back-up-files-and-filegroups-sql-server"></a><span data-ttu-id="71463-102">Backup di file e filegroup (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="71463-102">Back Up Files and Filegroups (SQL Server)</span></span>
  <span data-ttu-id="71463-103">In questo argomento viene descritto come eseguire il backup di file e filegroup in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] utilizzando [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="71463-103">This topic describes how to back up files and filegroups in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or PowerShell.</span></span> <span data-ttu-id="71463-104">Quando a causa delle dimensioni del database e dei requisiti relativi alle prestazioni non è consigliabile eseguire un backup completo del database, è possibile creare invece un backup del file.</span><span class="sxs-lookup"><span data-stu-id="71463-104">When the database size and performance requirements make a full database backup impractical, you can create a file backup instead.</span></span> <span data-ttu-id="71463-105">Un *backup del file* contiene tutti i dati inclusi in uno o più file o filegroup.</span><span class="sxs-lookup"><span data-stu-id="71463-105">A *file backup* contains all the data in one or more files (or filegroups).</span></span> <span data-ttu-id="71463-106">Per altre informazioni sul backup dei file, vedere [Backup completi del file &#40;SQL Server&#41;](full-file-backups-sql-server.md) e [Backup differenziali &#40;SQL Server&#41;](differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-106">For more information about file backups, see [Full File Backups &#40;SQL Server&#41;](full-file-backups-sql-server.md) and [Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="71463-107">**Contenuto dell'articolo**</span><span class="sxs-lookup"><span data-stu-id="71463-107">**In This Topic**</span></span>  
  
-   <span data-ttu-id="71463-108">**Prima di iniziare:**</span><span class="sxs-lookup"><span data-stu-id="71463-108">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="71463-109">Limitazioni e restrizioni</span><span class="sxs-lookup"><span data-stu-id="71463-109">Limitations and Restrictions</span></span>](#Restrictions)  
  
     [<span data-ttu-id="71463-110">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="71463-110">Recommendations</span></span>](#Recommendations)  
  
     [<span data-ttu-id="71463-111">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="71463-111">Security</span></span>](#Security)  
  
-   <span data-ttu-id="71463-112">**Per eseguire il backup di file e filegroup utilizzando:**</span><span class="sxs-lookup"><span data-stu-id="71463-112">**To back up files and filegroups, using:**</span></span>  
  
     [<span data-ttu-id="71463-113">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="71463-113">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="71463-114">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="71463-114">Transact-SQL</span></span>](#TsqlProcedure)  
  
     [<span data-ttu-id="71463-115">PowerShell</span><span class="sxs-lookup"><span data-stu-id="71463-115">PowerShell</span></span>](#PowerShellProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="71463-116">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="71463-116">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="71463-117">Limitazioni e restrizioni</span><span class="sxs-lookup"><span data-stu-id="71463-117">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="71463-118">Non è possibile utilizzare l'istruzione BACKUP in una transazione esplicita o implicita.</span><span class="sxs-lookup"><span data-stu-id="71463-118">The BACKUP statement is not allowed in an explicit or implicit transaction.</span></span>  
  
-   <span data-ttu-id="71463-119">In base al modello di recupero con registrazione minima, è necessario creare una copia di backup contenente tutti i file di lettura/scrittura,</span><span class="sxs-lookup"><span data-stu-id="71463-119">Under the simple recovery model, read/write files must all be backed up together.</span></span> <span data-ttu-id="71463-120">al fine di garantire che il database possa essere ripristinato fino a un punto nel tempo coerente.</span><span class="sxs-lookup"><span data-stu-id="71463-120">This helps make sure that the database can be restored to a consistent point in time.</span></span> <span data-ttu-id="71463-121">Anziché specificare singolarmente ogni file o filegroup di lettura/scrittura, utilizzare l'opzione READ_WRITE_FILEGROUPS.</span><span class="sxs-lookup"><span data-stu-id="71463-121">Instead of individually specifying each read/write file or filegroup, use the READ_WRITE_FILEGROUPS option.</span></span> <span data-ttu-id="71463-122">Questa opzione consente di eseguire il backup di tutti i filegroup di lettura/scrittura del database.</span><span class="sxs-lookup"><span data-stu-id="71463-122">This option backs up all the read/write filegroups in the database.</span></span> <span data-ttu-id="71463-123">Un backup creato specificando READ_WRITE_FILEGROUPS è noto come *backup parziale*.</span><span class="sxs-lookup"><span data-stu-id="71463-123">A backup that is created by specifying READ_WRITE_FILEGROUPS is known as a *partial backup*.</span></span> <span data-ttu-id="71463-124">Per altre informazioni, vedere [Backup parziali &#40;SQL Server&#41;](partial-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-124">For more information, see [Partial Backups &#40;SQL Server&#41;](partial-backups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="71463-125">Per altre informazioni sulle limitazioni e restrizioni, vedere [Panoramica del backup &#40;SQL Server&#41;](backup-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-125">For more information about limitations and restrictions, see [Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md).</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="71463-126">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="71463-126">Recommendations</span></span>  
  
-   <span data-ttu-id="71463-127">Per impostazione predefinita, per ogni operazione di backup eseguita in modo corretto viene aggiunta una voce al log degli errori di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e al registro eventi di sistema.</span><span class="sxs-lookup"><span data-stu-id="71463-127">By default, every successful backup operation adds an entry in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error log and in the system event log.</span></span> <span data-ttu-id="71463-128">Se il backup del log viene eseguito di frequente, questi messaggi possono aumentare rapidamente, provocando la creazione di log degli errori di dimensioni elevate e rendendo difficile l'individuazione di altri messaggi.</span><span class="sxs-lookup"><span data-stu-id="71463-128">If you back up the log very frequently, these success messages accumulate quickly, resulting in huge error logs that can make finding other messages difficult.</span></span> <span data-ttu-id="71463-129">In questi casi è possibile eliminare tali voci di log utilizzando il flag di traccia 3226 se nessuno degli script dipende da esse.</span><span class="sxs-lookup"><span data-stu-id="71463-129">In such cases you can suppress these log entries by using trace flag 3226 if none of your scripts depend on those entries.</span></span> <span data-ttu-id="71463-130">Per altre informazioni, vedere [Flag di traccia &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="71463-130">For more information, see [Trace Flags &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql).</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="71463-131">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="71463-131">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="71463-132">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="71463-132">Permissions</span></span>  
 <span data-ttu-id="71463-133">Le autorizzazioni BACKUP DATABASE e BACKUP LOG vengono assegnate per impostazione predefinita ai membri del ruolo predefinito del server **sysadmin** e dei ruoli predefiniti del database **db_owner** e **db_backupoperator** .</span><span class="sxs-lookup"><span data-stu-id="71463-133">BACKUP DATABASE and BACKUP LOG permissions default to members of the **sysadmin** fixed server role and the **db_owner** and **db_backupoperator** fixed database roles.</span></span>  
  
 <span data-ttu-id="71463-134">Eventuali problemi correlati alla proprietà e alle autorizzazioni sul file fisico del dispositivo di backup possono interferire con l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="71463-134">Ownership and permission problems on the backup device's physical file can interfere with a backup operation.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="71463-135">sia possibile leggere e scrivere sul dispositivo e che l'account utilizzato per eseguire il servizio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disponga delle autorizzazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="71463-135">must be able to read and write to the device; the account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service runs must have write permissions.</span></span> <span data-ttu-id="71463-136">Le autorizzazioni di accesso ai file, tuttavia, non vengono controllate dalla stored procedure [sp_addumpdevice](/sql/relational-databases/system-stored-procedures/sp-addumpdevice-transact-sql)che aggiunge una voce per un dispositivo di backup nelle tabelle di sistema.</span><span class="sxs-lookup"><span data-stu-id="71463-136">However, [sp_addumpdevice](/sql/relational-databases/system-stored-procedures/sp-addumpdevice-transact-sql), which adds an entry for a backup device in the system tables, does not check file access permissions.</span></span> <span data-ttu-id="71463-137">Di conseguenza, i problemi relativi all'accesso e alla proprietà del file fisico del dispositivo di backup potrebbero emergere solo in fase di accesso alla risorsa fisica durante un tentativo di backup o ripristino.</span><span class="sxs-lookup"><span data-stu-id="71463-137">Such problems on the backup device's physical file may not appear until the physical resource is accessed when the backup or restore is attempted.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="71463-138">Utilizzo di SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="71463-138">Using SQL Server Management Studio</span></span>  
  
#### <a name="to-back-up-database-files-and-filegroups"></a><span data-ttu-id="71463-139">Per eseguire il backup di file e filegroup del database</span><span class="sxs-lookup"><span data-stu-id="71463-139">To back up database files and filegroups</span></span>  
  
1.  <span data-ttu-id="71463-140">Dopo aver effettuato la connessione all'istanza appropriata del [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Esplora oggetti fare clic sul nome del server per espanderne l'albero.</span><span class="sxs-lookup"><span data-stu-id="71463-140">After connecting to the appropriate instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="71463-141">Espandere **Database**e, a seconda del database, selezionare un database utente o espandere **Database di sistema** e selezionare un database di sistema.</span><span class="sxs-lookup"><span data-stu-id="71463-141">Expand **Databases**, and, depending on the database, either select a user database or expand **System Databases** and select a system database.</span></span>  
  
3.  <span data-ttu-id="71463-142">Fare clic con il pulsante destro del mouse sul database, scegliere **Attività**e quindi fare clic su **Backup**.</span><span class="sxs-lookup"><span data-stu-id="71463-142">Right-click the database, point to **Tasks**, and then click **Back Up**.</span></span> <span data-ttu-id="71463-143">Verrà visualizzata la finestra di dialogo **Backup database** .</span><span class="sxs-lookup"><span data-stu-id="71463-143">The **Back Up Database** dialog box appears.</span></span>  
  
4.  <span data-ttu-id="71463-144">Verificare il nome del database nell'elenco **Database** .</span><span class="sxs-lookup"><span data-stu-id="71463-144">In the **Database** list, verify the database name.</span></span> <span data-ttu-id="71463-145">È possibile selezionare facoltativamente un database diverso nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="71463-145">You can optionally select a different database from the list.</span></span>  
  
5.  <span data-ttu-id="71463-146">Nell'elenco **Tipo di backup** selezionare **Completo** o **Differenziale**.</span><span class="sxs-lookup"><span data-stu-id="71463-146">In the **Backup type** list, select **Full** or **Differential**.</span></span>  
  
6.  <span data-ttu-id="71463-147">Selezionare l'opzione **File e filegroup** in **Componente di cui eseguire il backup**.</span><span class="sxs-lookup"><span data-stu-id="71463-147">For the **Backup component** option, click **File and Filegroups**.</span></span>  
  
7.  <span data-ttu-id="71463-148">Selezionare i file e i filegroup dei quali si desidera eseguire il backup nella finestra di dialogo **Seleziona file e filegroup** .</span><span class="sxs-lookup"><span data-stu-id="71463-148">In the **Select Files and Filegroups** dialog box, select the files and filegroups you want to back up.</span></span> <span data-ttu-id="71463-149">È possibile selezionare uno o più file singoli oppure selezionare la casella di controllo relativa a un filegroup per selezionare automaticamente tutti i file appartenenti al filegroup.</span><span class="sxs-lookup"><span data-stu-id="71463-149">You can select one or more individual files or check the box for a filegroup to automatically select all the files in that filegroup.</span></span>  
  
8.  <span data-ttu-id="71463-150">Accettare il nome predefinito del set di backup indicato nella casella di testo **Nome** oppure immettere un nome diverso per il set di backup.</span><span class="sxs-lookup"><span data-stu-id="71463-150">Either accept the default backup set name suggested in the **Name** text box, or enter a different name for the backup set.</span></span>  
  
9. <span data-ttu-id="71463-151">Facoltativamente, immettere una descrizione del set di backup nella casella di testo **Descrizione** .</span><span class="sxs-lookup"><span data-stu-id="71463-151">Optionally, in the **Description** text box, enter a description of the backup set.</span></span>  
  
10. <span data-ttu-id="71463-152">Specificare la scadenza del set di backup:</span><span class="sxs-lookup"><span data-stu-id="71463-152">Specify when the backup set will expire:</span></span>  
  
    -   <span data-ttu-id="71463-153">Per far scadere il set di backup dopo un numero specifico di giorni, fare clic su **Dopo** (opzione predefinita),</span><span class="sxs-lookup"><span data-stu-id="71463-153">To have the backup set expire after a specific number of days, click **After** (the default option).</span></span> <span data-ttu-id="71463-154">quindi immettere il numero di giorni che devono trascorrere prima della scadenza del set.</span><span class="sxs-lookup"><span data-stu-id="71463-154">Then, enter the number of days after set creation that the set will expire.</span></span> <span data-ttu-id="71463-155">È possibile impostare un valore compreso nell'intervallo da 0 a 99999 giorni. L'impostazione del valore 0 giorni indica che il set di backup non ha scadenza.</span><span class="sxs-lookup"><span data-stu-id="71463-155">This value can be from 0 to 99999 days; a value of 0 days means that the backup set will never expire.</span></span>  
  
         <span data-ttu-id="71463-156">Il valore predefinito viene impostato nell'opzione **Periodo di memorizzazione predefinito supporti di backup (giorni)** della finestra di dialogo **Proprietà server** (pagina**Impostazioni database** ).</span><span class="sxs-lookup"><span data-stu-id="71463-156">The default value is set in the **Default backup media retention (in days)** option of the **Server Properties** dialog box (**Database Settings** page).</span></span> <span data-ttu-id="71463-157">Per accedere a questa opzione, fare clic con il pulsante destro del mouse sul nome del server in Esplora oggetti, scegliere Proprietà e quindi selezionare la pagina **Impostazioni database** .</span><span class="sxs-lookup"><span data-stu-id="71463-157">To access this option, right-click the server name in Object Explorer and select properties; then select the **Database Settings** page.</span></span>  
  
    -   <span data-ttu-id="71463-158">Per impostare una data di scadenza specifica per il set di backup, fare clic su **Il**e immettere la data di scadenza del set.</span><span class="sxs-lookup"><span data-stu-id="71463-158">To have the backup set expire on a specific date, click **On**, and enter the date on which the set will expire.</span></span>  
  
11. <span data-ttu-id="71463-159">Fare clic su **Disco** o su **Nastro**per selezionare il tipo di destinazione del backup.</span><span class="sxs-lookup"><span data-stu-id="71463-159">Choose the type of backup destination by clicking **Disk** or **Tape**.</span></span> <span data-ttu-id="71463-160">Per selezionare i percorsi per un massimo di 64 unità disco o nastro contenenti un singolo set di supporti, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="71463-160">To select the paths of up to 64 disk or tape drives that contain a single media set, click **Add**.</span></span> <span data-ttu-id="71463-161">I percorsi selezionati vengono visualizzati nell'elenco **Backup su** .</span><span class="sxs-lookup"><span data-stu-id="71463-161">The selected paths are displayed in the **Backup to** list.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="71463-162">Per rimuovere una destinazione di backup, selezionarla e fare clic su **Rimuovi**.</span><span class="sxs-lookup"><span data-stu-id="71463-162">To remove a backup destination, select it and click **Remove**.</span></span> <span data-ttu-id="71463-163">Per visualizzare il contenuto di una destinazione di backup, selezionarla e fare clic su **Contenuto**.</span><span class="sxs-lookup"><span data-stu-id="71463-163">To view the contents of a backup destination, select it and click **Contents**.</span></span>  
  
12. <span data-ttu-id="71463-164">Per visualizzare o selezionare le opzioni avanzate, fare clic su **Opzioni** nel riquadro **Selezione pagina** .</span><span class="sxs-lookup"><span data-stu-id="71463-164">To view or select the advanced options, click **Options** in the **Select a page** pane.</span></span>  
  
13. <span data-ttu-id="71463-165">Selezionare un'opzione **Sovrascrivi supporti** facendo clic su una delle opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="71463-165">Select an **Overwrite Media** option, by clicking one of the following:</span></span>  
  
    -   <span data-ttu-id="71463-166">**Esegui backup nel set di supporti esistente**</span><span class="sxs-lookup"><span data-stu-id="71463-166">**Back up to the existing media set**</span></span>  
  
         <span data-ttu-id="71463-167">Per questa opzione, fare clic su **Accoda al set di backup esistente** o **Sovrascrivi tutti i set di backup esistenti**.</span><span class="sxs-lookup"><span data-stu-id="71463-167">For this option, click either **Append to the existing backup set** or **Overwrite all existing backup sets**.</span></span> <span data-ttu-id="71463-168">Per informazioni sul backup in un set di supporti esistente, vedere [Set di supporti, gruppi di supporti e set di backup &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-168">For information about backing up to an existing media set, see [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
         <span data-ttu-id="71463-169">Selezionare facoltativamente l'opzione **Controlla nome set di supporti e scadenza set di backup** per impostare la verifica della data e dell'ora di scadenza del set di supporti e del set di backup durante l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="71463-169">Optionally, select **Check media set name and backup set expiration** to cause the backup operation to verify the date and time at which the media set and backup set expire.</span></span>  
  
         <span data-ttu-id="71463-170">Immettere facoltativamente un nome nella casella di testo **Nome set di supporti** .</span><span class="sxs-lookup"><span data-stu-id="71463-170">Optionally, enter a name in the **Media set name** text box.</span></span> <span data-ttu-id="71463-171">Se non si specifica un nome, verrà creato un set di supporti con nome vuoto.</span><span class="sxs-lookup"><span data-stu-id="71463-171">If no name is specified, a media set with a blank name is created.</span></span> <span data-ttu-id="71463-172">Se si specifica il nome di un set di supporti, viene eseguito un controllo sul supporto (nastro o disco) per verificare che il nome effettivo corrisponda al nome qui immesso.</span><span class="sxs-lookup"><span data-stu-id="71463-172">If you specify a media set name, the media (tape or disk) is checked to see whether the actual name matches the name that you enter here.</span></span>  
  
         <span data-ttu-id="71463-173">Se non si specifica il nome del set di supporti e si seleziona la casella di controllo per il controllo del nome, in caso di esito positivo anche il nome dei supporti nei supporti risulterà vuoto.</span><span class="sxs-lookup"><span data-stu-id="71463-173">If you leave the media name blank and check the box to check it against the media, success will equal the media name on the media also being blank.</span></span>  
  
    -   <span data-ttu-id="71463-174">**Esegui backup in un nuovo set di supporti e cancella tutti i set di backup esistenti**</span><span class="sxs-lookup"><span data-stu-id="71463-174">**Back up to a new media set, and erase all existing backup sets**</span></span>  
  
         <span data-ttu-id="71463-175">Per questa opzione, immettere un nome nella casella di testo **Nome nuovo set di supporti** e, facoltativamente, aggiungere una descrizione per il set di supporti nella casella di testo **Descrizione nuovo set di supporti** .</span><span class="sxs-lookup"><span data-stu-id="71463-175">For this option, enter a name in the **New media set name** text box, and, optionally, describe the media set in the **New media set description** text box.</span></span> <span data-ttu-id="71463-176">Per altre informazioni sulla creazione di un nuovo set di supporti, vedere [Set di supporti, gruppi di supporti e set di backup &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-176">For more information about creating a new media set, see [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
14. <span data-ttu-id="71463-177">Nella sezione **affidabilità** selezionare facoltativamente:</span><span class="sxs-lookup"><span data-stu-id="71463-177">In the **Reliability** section, optionally check:</span></span>  
  
    -   <span data-ttu-id="71463-178">**Verifica backup al termine**.</span><span class="sxs-lookup"><span data-stu-id="71463-178">**Verify backup when finished**.</span></span>  
  
    -   <span data-ttu-id="71463-179">**Esegui checksum prima della scrittura nei supporti**e, facoltativamente, **Continua in caso di errori checksum**.</span><span class="sxs-lookup"><span data-stu-id="71463-179">**Perform checksum before writing to media**, and, optionally, **Continue on checksum error**.</span></span> <span data-ttu-id="71463-180">Per altre informazioni sui checksum, vedere [Possibili errori relativi ai supporti durante il backup e il ripristino &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-180">For more information about checksums, see [Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md).</span></span>  
  
15. <span data-ttu-id="71463-181">Se si esegue il backup su un'unità nastro, come specificato nella sezione **Destinazione** della pagina **Generale** , l'opzione **Scarica nastro al termine del backup** sarà attiva.</span><span class="sxs-lookup"><span data-stu-id="71463-181">If you are backing up to a tape drive (as specified in the **Destination** section of the **General** page), the **Unload the tape after backup** option is active.</span></span> <span data-ttu-id="71463-182">Selezionando questa opzione viene abilitata anche l'opzione **Riavvolgi il nastro prima di scaricarlo** .</span><span class="sxs-lookup"><span data-stu-id="71463-182">Clicking this option enables the **Rewind the tape before unloading** option.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="71463-183">Le opzioni presenti nella sezione **Log delle transazioni** sono attive solo in caso di backup di un log delle transazioni, come specificato nella sezione **Tipo backup** nella pagina **Generale** .</span><span class="sxs-lookup"><span data-stu-id="71463-183">The options in the **Transaction log** section are inactive unless you are backing up a transaction log (as specified in the **Backup type** section of the **General** page).</span></span>  
  
16. [!INCLUDE[ssEnterpriseEd10](../../includes/ssenterpriseed10-md.md)] <span data-ttu-id="71463-184">e nelle versioni più recenti è supportata la [compressione dei backup](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-184">and later versions support [backup compression](backup-compression-sql-server.md).</span></span> <span data-ttu-id="71463-185">Per impostazione predefinita, la compressione di un backup dipende dal valore dell'opzione di configurazione del server **Valore predefinito di compressione backup**.</span><span class="sxs-lookup"><span data-stu-id="71463-185">By default, whether a backup is compressed depends on the value of the **backup-compression default** server configuration option.</span></span> <span data-ttu-id="71463-186">Tuttavia, indipendentemente dall'impostazione predefinita a livello di server corrente, è possibile comprimere un backup selezionando **Comprimi backup**ed è possibile impedire la compressione selezionando **Non comprimere il backup**.</span><span class="sxs-lookup"><span data-stu-id="71463-186">However, regardless of the current server-level default, you can compress a backup by checking **Compress backup**, and you can prevent compression by checking **Do not compress backup**.</span></span>  
  
     <span data-ttu-id="71463-187">**Per visualizzare l'impostazione predefinita corrente della compressione dei backup**</span><span class="sxs-lookup"><span data-stu-id="71463-187">**To view the current backup compression default**</span></span>  
  
    -   [<span data-ttu-id="71463-188">Visualizzare o configurare l'opzione di configurazione del server backup compression default</span><span class="sxs-lookup"><span data-stu-id="71463-188">View or Configure the backup compression default Server Configuration Option</span></span>](../../database-engine/configure-windows/view-or-configure-the-backup-compression-default-server-configuration-option.md)  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="71463-189">Uso di Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="71463-189">Using Transact-SQL</span></span>  
  
#### <a name="to-back-up-files-and-filegroups"></a><span data-ttu-id="71463-190">Per eseguire il backup di file e filegroup</span><span class="sxs-lookup"><span data-stu-id="71463-190">To back up files and filegroups</span></span>  
  
1.  <span data-ttu-id="71463-191">Per creare un backup del file o del filegroup, usare un'istruzione [BACKUP DATABASE <file_or_filegroup>](/sql/t-sql/statements/backup-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="71463-191">To create a file or filegroup backup, use a [BACKUP DATABASE <file_or_filegroup>](/sql/t-sql/statements/backup-transact-sql) statement.</span></span> <span data-ttu-id="71463-192">In questa istruzione è necessario specificare almeno gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="71463-192">Minimally, this statement must specify the following:</span></span>  
  
    -   <span data-ttu-id="71463-193">Nome del database.</span><span class="sxs-lookup"><span data-stu-id="71463-193">The database name.</span></span>  
  
    -   <span data-ttu-id="71463-194">Una clausola FILE o FILEGROUP per ogni file o filegroup, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="71463-194">A FILE or FILEGROUP clause for each file or filegroup, respectively.</span></span>  
  
    -   <span data-ttu-id="71463-195">Il dispositivo di backup in cui verrà scritto il backup completo.</span><span class="sxs-lookup"><span data-stu-id="71463-195">The backup device on which the full backup will be written.</span></span>  
  
     <span data-ttu-id="71463-196">La sintassi [!INCLUDE[tsql](../../includes/tsql-md.md)] di base per un backup del file è la seguente:</span><span class="sxs-lookup"><span data-stu-id="71463-196">The basic [!INCLUDE[tsql](../../includes/tsql-md.md)] syntax for a file backup is:</span></span>  
  
     <span data-ttu-id="71463-197">BACKUP DATABASE *database*</span><span class="sxs-lookup"><span data-stu-id="71463-197">BACKUP DATABASE *database*</span></span>  
  
     <span data-ttu-id="71463-198">{ FILE **=** _nome_file_logico_ | FILEGROUP **=** _nome_filegroup_logico_ } [ **,** ...*f* ]</span><span class="sxs-lookup"><span data-stu-id="71463-198">{ FILE **=**_logical_file_name_ | FILEGROUP **=**_logical_filegroup_name_ } [ **,**...*f* ]</span></span>  
  
     <span data-ttu-id="71463-199">TO *dispositivo_backup* [ **,** ...*n* ]</span><span class="sxs-lookup"><span data-stu-id="71463-199">TO *backup_device* [ **,**...*n* ]</span></span>  
  
     <span data-ttu-id="71463-200">[ WITH *con_opzioni* [ **,** ...*o* ] ];</span><span class="sxs-lookup"><span data-stu-id="71463-200">[ WITH *with_options* [ **,**...*o* ] ] ;</span></span>  
  
    |<span data-ttu-id="71463-201">Opzione</span><span class="sxs-lookup"><span data-stu-id="71463-201">Option</span></span>|<span data-ttu-id="71463-202">Descrizione</span><span class="sxs-lookup"><span data-stu-id="71463-202">Description</span></span>|  
    |------------|-----------------|  
    |<span data-ttu-id="71463-203">*database*</span><span class="sxs-lookup"><span data-stu-id="71463-203">*database*</span></span>|<span data-ttu-id="71463-204">Nome del database di cui viene eseguito il backup del log delle transazioni oppure il backup parziale o completo del database.</span><span class="sxs-lookup"><span data-stu-id="71463-204">Is the database from which the transaction log, partial database, or complete database is backed up.</span></span>|  
    |<span data-ttu-id="71463-205">FILE **=** _nome_file_logico_</span><span class="sxs-lookup"><span data-stu-id="71463-205">FILE **=**_logical_file_name_</span></span>|<span data-ttu-id="71463-206">Specifica il nome logico di un file da includere nel backup del file.</span><span class="sxs-lookup"><span data-stu-id="71463-206">Specifies the logical name of a file to include in the file backup.</span></span>|  
    |<span data-ttu-id="71463-207">FILEGROUP **=** _nome_filegroup_logico_</span><span class="sxs-lookup"><span data-stu-id="71463-207">FILEGROUP **=**_logical_filegroup_name_</span></span>|<span data-ttu-id="71463-208">Specifica il nome logico di un filegroup da includere nel backup del file.</span><span class="sxs-lookup"><span data-stu-id="71463-208">Specifies the logical name of a filegroup to include in the file backup.</span></span> <span data-ttu-id="71463-209">Con il modello di recupero con registrazione minima, il backup dei filegroup è consentito solo per i filegroup di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="71463-209">Under the simple recovery model, a filegroup backup is allowed only for a read-only filegroup.</span></span>|  
    |<span data-ttu-id="71463-210">[ **,** ...*f* ]</span><span class="sxs-lookup"><span data-stu-id="71463-210">[ **,**...*f* ]</span></span>|<span data-ttu-id="71463-211">Segnaposto che indica che è possibile specificare più file e filegroup.</span><span class="sxs-lookup"><span data-stu-id="71463-211">Is a placeholder that indicates that multiple files and filegroups may be specified.</span></span> <span data-ttu-id="71463-212">Il numero di file o filegroup che possono essere specificati è illimitato.</span><span class="sxs-lookup"><span data-stu-id="71463-212">The number of files or filegroups is unlimited.</span></span>|  
    |<span data-ttu-id="71463-213">*backup_device* [ **,** ...*n* ]</span><span class="sxs-lookup"><span data-stu-id="71463-213">*backup_device* [ **,**...*n* ]</span></span>|<span data-ttu-id="71463-214">Specifica un elenco di dispositivi di backup da 1 a 64 da utilizzare per l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="71463-214">Specifies a list of from 1 to 64 backup devices to use for the backup operation.</span></span> <span data-ttu-id="71463-215">È possibile specificare un dispositivo di backup fisico oppure un dispositivo di backup logico corrispondente se è già stata definito.</span><span class="sxs-lookup"><span data-stu-id="71463-215">You can specify a physical backup device, or you can specify a corresponding logical backup device, if already defined.</span></span> <span data-ttu-id="71463-216">Per specificare un dispositivo di backup fisico, utilizzare l'opzione DISK o TAPE:</span><span class="sxs-lookup"><span data-stu-id="71463-216">To specify a physical backup device, use the DISK or TAPE option:</span></span><br /><br /> <span data-ttu-id="71463-217">{ DISK &#124; TAPE } **=** _nome_dispositivo_backup_fisico_</span><span class="sxs-lookup"><span data-stu-id="71463-217">{ DISK &#124; TAPE } **=**_physical_backup_device_name_</span></span><br /><br /> <span data-ttu-id="71463-218">Per altre informazioni, vedere [Dispositivi di backup &#40;SQL Server&#41;](backup-devices-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-218">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md).</span></span>|  
    |<span data-ttu-id="71463-219">WITH *con_opzioni* [ **,** ...*o* ]</span><span class="sxs-lookup"><span data-stu-id="71463-219">WITH *with_options* [ **,**...*o* ]</span></span>|<span data-ttu-id="71463-220">Facoltativamente, specifica una o più opzioni aggiuntive, ad esempio DIFFERENTIAL.</span><span class="sxs-lookup"><span data-stu-id="71463-220">Optionally, specifies one or more additional options, such as DIFFERENTIAL.</span></span><br /><br /> <span data-ttu-id="71463-221">Nota: il backup differenziale del file richiede come base un backup completo del file.</span><span class="sxs-lookup"><span data-stu-id="71463-221">Note: A differential file backup requires a full file backup as a base.</span></span> <span data-ttu-id="71463-222">Per altre informazioni, vedere [Creare un backup differenziale del database &#40;SQL Server&#41;](create-a-differential-database-backup-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-222">For more information, see [Create a Differential Database Backup &#40;SQL Server&#41;](create-a-differential-database-backup-sql-server.md).</span></span>|  
  
2.  <span data-ttu-id="71463-223">Se si utilizza il modello di recupero con registrazione completa, è inoltre necessario eseguire un backup del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="71463-223">Under the full recovery model, you must also back up the transaction log.</span></span> <span data-ttu-id="71463-224">Per utilizzare un set completo di backup del file completi per il ripristino di un database, è inoltre necessario disporre di backup dei log relativi a tutti i backup del file, dall'inizio del primo backup del file.</span><span class="sxs-lookup"><span data-stu-id="71463-224">To use a complete set of full file backups to restore a database, you must also have enough log backups to span all the file backups, from the start of the first file backup.</span></span> <span data-ttu-id="71463-225">Per altre informazioni, vedere [Backup di un log delle transazioni &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="71463-225">For more information, see [Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md).</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="71463-226">Esempi (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="71463-226">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="71463-227">Negli esempi seguenti viene eseguito il backup di uno o più file dei filegroup secondari del database `Sales` .</span><span class="sxs-lookup"><span data-stu-id="71463-227">The following examples back up one or more files of the secondary filegroups of the `Sales` database.</span></span> <span data-ttu-id="71463-228">Questo database utilizza il modello di recupero con registrazione completa e contiene i filegroup secondari seguenti:</span><span class="sxs-lookup"><span data-stu-id="71463-228">This database uses the full recovery model and contains the following secondary filegroups:</span></span>  
  
-   <span data-ttu-id="71463-229">Un filegroup denominato `SalesGroup1` che include i file `SGrp1Fi1` e `SGrp1Fi2`.</span><span class="sxs-lookup"><span data-stu-id="71463-229">A filegroup named `SalesGroup1` that has the files `SGrp1Fi1` and `SGrp1Fi2`.</span></span>  
  
-   <span data-ttu-id="71463-230">Un filegroup denominato `SalesGroup2` che include i file `SGrp2Fi1` e `SGrp2Fi2`.</span><span class="sxs-lookup"><span data-stu-id="71463-230">A filegroup named `SalesGroup2` that has the files `SGrp2Fi1` and `SGrp2Fi2`.</span></span>  
  
#### <a name="a-creating-a-file-backup-of-two-files"></a><span data-ttu-id="71463-231">R.</span><span class="sxs-lookup"><span data-stu-id="71463-231">A.</span></span> <span data-ttu-id="71463-232">Creazione di un backup del file per due file</span><span class="sxs-lookup"><span data-stu-id="71463-232">Creating a file backup of two files</span></span>  
 <span data-ttu-id="71463-233">Nell'esempio seguente viene creato un backup differenziale del file solo per il file `SGrp1Fi2` del filegroup `SalesGroup1` e per il file `SGrp2Fi2` del filegroup `SalesGroup2` .</span><span class="sxs-lookup"><span data-stu-id="71463-233">The following example creates a differential file backup of only the `SGrp1Fi2` file of the `SalesGroup1` and the `SGrp2Fi2` file of the `SalesGroup2` filegroup.</span></span>  
  
```sql  
--Backup the files in the SalesGroup1 secondary filegroup.  
BACKUP DATABASE Sales  
   FILE = 'SGrp1Fi2',   
   FILE = 'SGrp2Fi2'   
   TO DISK = 'G:\SQL Server Backups\Sales\SalesGroup1.bck';  
GO  
```  
  
#### <a name="b-creating-a-full-file-backup-of-the-secondary-filegroups"></a><span data-ttu-id="71463-234">B.</span><span class="sxs-lookup"><span data-stu-id="71463-234">B.</span></span> <span data-ttu-id="71463-235">Creazione di un backup completo dei filegroup secondari</span><span class="sxs-lookup"><span data-stu-id="71463-235">Creating a full file backup of the secondary filegroups</span></span>  
 <span data-ttu-id="71463-236">Nell'esempio seguente viene creato un backup completo di ogni file presente in entrambi i filegroup secondari.</span><span class="sxs-lookup"><span data-stu-id="71463-236">The following example creates a full file backup of every file in both of the secondary filegroups.</span></span>  
  
```sql  
--Back up the files in SalesGroup1.  
BACKUP DATABASE Sales  
   FILEGROUP = 'SalesGroup1',  
   FILEGROUP = 'SalesGroup2'  
   TO DISK = 'C:\MySQLServer\Backups\Sales\SalesFiles.bck';  
GO  
```  
  
#### <a name="c-creating-a-differential-file-backup-of-the-secondary-filegroups"></a><span data-ttu-id="71463-237">C.</span><span class="sxs-lookup"><span data-stu-id="71463-237">C.</span></span> <span data-ttu-id="71463-238">Creazione di un backup differenziale dei filegroup secondari</span><span class="sxs-lookup"><span data-stu-id="71463-238">Creating a differential file backup of the secondary filegroups</span></span>  
 <span data-ttu-id="71463-239">Nell'esempio seguente viene creato un backup differenziale di ogni file presente in entrambi i filegroup secondari.</span><span class="sxs-lookup"><span data-stu-id="71463-239">The following example creates a differential file backup of every file in both of the secondary filegroups.</span></span>  
  
```sql  
--Back up the files in SalesGroup1.  
BACKUP DATABASE Sales  
   FILEGROUP = 'SalesGroup1',  
   FILEGROUP = 'SalesGroup2'  
   TO DISK = 'C:\MySQLServer\Backups\Sales\SalesFiles.bck'  
   WITH   
      DIFFERENTIAL;  
GO  
```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="71463-240">Utilizzo di PowerShell</span><span class="sxs-lookup"><span data-stu-id="71463-240">Using PowerShell</span></span>  
  
<span data-ttu-id="71463-241">Utilizzare il cmdlet `Backup-SqlDatabase` e specificare `Files` per il valore del parametro `-BackupAction`.</span><span class="sxs-lookup"><span data-stu-id="71463-241">Use the `Backup-SqlDatabase` cmdlet and specify `Files` for the value of the `-BackupAction` parameter.</span></span> <span data-ttu-id="71463-242">Inoltre, specificare uno dei parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="71463-242">Also, specify one of the following parameters:</span></span>  
  
    -   <span data-ttu-id="71463-243">Per eseguire il backup di un file specifico, specificare il `-DatabaseFile` parametro *String* , dove *String* è uno o più file di database di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="71463-243">To back up a specific file, specify the `-DatabaseFile`*String* parameter, where *String* is one or more database files to be backed up.</span></span>  
  
    -   <span data-ttu-id="71463-244">Per eseguire il backup di tutti i file di un determinato filegroup, specificare il `-DatabaseFileGroup` parametro *String* , dove *String* è uno o più filegroup di database di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="71463-244">To back up all the files in a given filegroup, specify the `-DatabaseFileGroup`*String* parameter, where *String* is one or more database filegroups to be backed up.</span></span>  
  
     <span data-ttu-id="71463-245">Nell'esempio seguente viene creato un backup completo di ogni file presente nei filegroup secondari 'FileGroup1' e 'FileGroup2' nel database `MyDB` .</span><span class="sxs-lookup"><span data-stu-id="71463-245">The following example creates a full file backup of every file in the secondary filegroups 'FileGroup1' and 'FileGroup2' in the `MyDB` database.</span></span> <span data-ttu-id="71463-246">I backup vengono creati nel percorso di backup predefinito dell'istanza del server `Computer\Instance`.</span><span class="sxs-lookup"><span data-stu-id="71463-246">The backups are created on the default backup location of the server instance `Computer\Instance`.</span></span>  
  
    ```powershell
    Backup-SqlDatabase -ServerInstance Computer\Instance -Database MyDB -BackupAction Files -DatabaseFileGroup "FileGroup1","FileGroup2"  
    ```  
  
<span data-ttu-id="71463-247">Per configurare e usare il provider di SQL Server PowerShell, vedere [provider di SQL Server PowerShell](../../powershell/sql-server-powershell-provider.md).</span><span class="sxs-lookup"><span data-stu-id="71463-247">To set up and use the SQL Server PowerShell provider, see [SQL Server PowerShell Provider](../../powershell/sql-server-powershell-provider.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="71463-248">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="71463-248">See Also</span></span>  
 <span data-ttu-id="71463-249">[Panoramica del backup &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="71463-249">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="71463-250">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="71463-250">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="71463-251">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="71463-251">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="71463-252">[Informazioni sulla cronologia e sull'intestazione del backup &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="71463-252">[Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md) </span></span>  
 <span data-ttu-id="71463-253">[Eseguire il backup di database &#40;pagina Generale&#41;](../../integration-services/general-page-of-integration-services-designers-options.md) </span><span class="sxs-lookup"><span data-stu-id="71463-253">[Back Up Database &#40;General Page&#41;](../../integration-services/general-page-of-integration-services-designers-options.md) </span></span>  
 <span data-ttu-id="71463-254">[Eseguire il backup di database &#40;pagina Opzioni di backup&#41;](back-up-database-backup-options-page.md) </span><span class="sxs-lookup"><span data-stu-id="71463-254">[Back Up Database &#40;Backup Options Page&#41;](back-up-database-backup-options-page.md) </span></span>  
 <span data-ttu-id="71463-255">[Backup completi del file &#40;SQL Server&#41;](full-file-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="71463-255">[Full File Backups &#40;SQL Server&#41;](full-file-backups-sql-server.md) </span></span>  
 <span data-ttu-id="71463-256">[Backup differenziali &#40;SQL Server&#41;](differential-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="71463-256">[Differential Backups &#40;SQL Server&#41;](differential-backups-sql-server.md) </span></span>  
 <span data-ttu-id="71463-257">[Ripristini di file &#40;modello di recupero con registrazione completa&#41;](file-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="71463-257">[File Restores &#40;Full Recovery Model&#41;](file-restores-full-recovery-model.md) </span></span>  
 [<span data-ttu-id="71463-258">Ripristini di file &#40;modello di recupero con registrazione minima&#41;</span><span class="sxs-lookup"><span data-stu-id="71463-258">File Restores &#40;Simple Recovery Model&#41;</span></span>](file-restores-simple-recovery-model.md)  
  
  
