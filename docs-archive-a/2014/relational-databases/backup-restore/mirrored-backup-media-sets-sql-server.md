---
title: Set di supporti di backup con mirroring (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- recovery [SQL Server], mirrored backups
- mirrored media sets [SQL Server]
- backup mirrors [SQL Server]
- duplicate backup copies
- interchangeable backup copies [SQL Server]
- media sets [SQL Server], mirrored backup media sets
- backup media [SQL Server], mirrored media
ms.assetid: 05a0b8d1-3585-4f77-972f-69d1c0d4aa9b
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: ce3513c67a0087dd00021de75f360b19819b46db
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87637381"
---
# <a name="mirrored-backup-media-sets-sql-server"></a><span data-ttu-id="40955-102">Set di supporti di backup con mirroring (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="40955-102">Mirrored Backup Media Sets (SQL Server)</span></span>
    
> [!NOTE]  
>  <span data-ttu-id="40955-103">I set di supporti di backup con mirroring sono supportati solo in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="40955-103">Mirrored backup media sets are supported only in the Enterprise edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="40955-104">L'esecuzione del mirroring di un set di supporti consente di incrementare l'affidabilità del backup, riducendo l'impatto di problemi relativi al dispositivo di backup.</span><span class="sxs-lookup"><span data-stu-id="40955-104">Mirroring a media set increases backup reliability by reducing the impact of backup-device malfunctions.</span></span> <span data-ttu-id="40955-105">Tali problemi possono risultare estremamente gravi, poiché i backup rappresentano l'ultima difesa contro la perdita dei dati.</span><span class="sxs-lookup"><span data-stu-id="40955-105">These malfunctions are very serious because backups are the last line of defense against data loss.</span></span> <span data-ttu-id="40955-106">Con l'aumento delle dimensioni dei database, cresce il rischio che un errore di un dispositivo o di un supporto di backup impedisca il ripristino di un backup.</span><span class="sxs-lookup"><span data-stu-id="40955-106">As databases grow, the probability increases that a failure of a backup device or media will make a backup nonrestorable.</span></span> <span data-ttu-id="40955-107">Il mirroring dei supporti di backup consente di incrementare l'affidabilità dei backup tramite la ridondanza.</span><span class="sxs-lookup"><span data-stu-id="40955-107">Mirroring backup media increases the reliability of backups by providing redundancy.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="40955-108">Per informazioni sui set di supporti in genere, vedere [Set di supporti, gruppi di supporti e set di backup &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md)Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="40955-108">For information about media sets in general, see [Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md).</span></span>  
  
 <span data-ttu-id="40955-109">**Contenuto dell'argomento**</span><span class="sxs-lookup"><span data-stu-id="40955-109">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="40955-110">Panoramica dei set di supporti con mirroring</span><span class="sxs-lookup"><span data-stu-id="40955-110">Overview of Mirrored Media Sets</span></span>](#OverviewofMirroredMediaSets)  
  
-   [<span data-ttu-id="40955-111">Requisiti hardware per i mirror di backup</span><span class="sxs-lookup"><span data-stu-id="40955-111">Hardware Requirements for Backup Mirrors</span></span>](#HardwareReqs)  
  
-   [<span data-ttu-id="40955-112">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="40955-112">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="overview-of-mirrored-media-sets"></a><a name="OverviewofMirroredMediaSets"></a> <span data-ttu-id="40955-113">Panoramica dei set di supporti con mirroring</span><span class="sxs-lookup"><span data-stu-id="40955-113">Overview of Mirrored Media Sets</span></span>  
 <span data-ttu-id="40955-114">Il mirroring dei supporti è una proprietà del set di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-114">Media mirroring is a property of the media set.</span></span> <span data-ttu-id="40955-115">Un *set di supporti con mirroring* è costituito da più copie (*mirror*) del set di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-115">A *mirrored media set* consists of multiple copies (*mirrors*) of the media set.</span></span> <span data-ttu-id="40955-116">Un set di supporti contiene uno o più set di supporti, ognuno dei quali corrisponde a un dispositivo di backup.</span><span class="sxs-lookup"><span data-stu-id="40955-116">A media set contains one or more media families, each of which corresponds to a backup device.</span></span> <span data-ttu-id="40955-117">Ad esempio, se la clausola TO di un'istruzione BACKUP DATABASE include tre dispositivi, BACKUP distribuisce i dati tra tre gruppi di supporti, uno per dispositivo.</span><span class="sxs-lookup"><span data-stu-id="40955-117">For example, if the TO clause of a BACKUP DATABASE statement lists three devices, BACKUP spreads the data among three media families, one per device.</span></span> <span data-ttu-id="40955-118">Il numero di gruppi di supporti e di mirror è definito quando viene creato il set di supporti (tramite un'istruzione BACKUP DATABASE che specifica WITH FORMAT).</span><span class="sxs-lookup"><span data-stu-id="40955-118">The number of media families and mirrors is defined when the media set is created (by a BACKUP DATABASE statement that specifies WITH FORMAT).</span></span>  
  
 <span data-ttu-id="40955-119">Un set di supporti con mirroring include da due a quattro mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-119">A mirrored media set possesses from two to four mirrors.</span></span> <span data-ttu-id="40955-120">Ogni mirror include tutti i gruppi di supporti del set di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-120">Each mirror contains all the media families in the media set.</span></span> <span data-ttu-id="40955-121">Per i mirror è necessario lo stesso numero di dispositivi, uno per gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-121">The mirrors require the same number of devices, one per media family.</span></span> <span data-ttu-id="40955-122">Per ogni mirror è necessario un dispositivo di backup separato per ogni gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-122">Each mirror requires a separate backup device for each media family.</span></span> <span data-ttu-id="40955-123">Ad esempio, per un set di supporti con mirroring costituito da quattro gruppi di supporti con tre mirror sono necessari dodici dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="40955-123">For example, a mirrored media set that consists of four media families with three mirrors requires twelve backup devices.</span></span> <span data-ttu-id="40955-124">È necessario che tutti questi dispositivi siano equivalenti,</span><span class="sxs-lookup"><span data-stu-id="40955-124">All of these devices must be equivalent.</span></span> <span data-ttu-id="40955-125">ad esempio unità nastro dello stesso produttore e con lo stesso numero di modello.</span><span class="sxs-lookup"><span data-stu-id="40955-125">For example, tape drives that have the same model number from the same manufacturer.</span></span>  
  
 <span data-ttu-id="40955-126">Nella figura seguente viene illustrato un esempio di un set di supporti con mirroring costituito da due gruppi di supporti con due mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-126">The following illustration shows an example of a mirrored media set that consists of two media families with two mirrors.</span></span> <span data-ttu-id="40955-127">Ogni gruppo di supporti include tre volumi di supporti, il cui backup viene eseguito una volta per ogni mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-127">Each media family contains three media volumes, which are backed up one time per mirror.</span></span>  
  
 <span data-ttu-id="40955-128">![Set di supporti con mirroring: due gruppi con due mirror](../../database-engine/media/bnr-backup-media-mirror.gif "Set di supporti con mirroring: due gruppi con due mirror")</span><span class="sxs-lookup"><span data-stu-id="40955-128">![Mirrored media set: two families with two mirrors](../../database-engine/media/bnr-backup-media-mirror.gif "Mirrored media set: two families with two mirrors")</span></span>  
  
 <span data-ttu-id="40955-129">I volumi corrispondenti sui mirror hanno contenuti identici.</span><span class="sxs-lookup"><span data-stu-id="40955-129">Corresponding volumes on the mirrors have identical contents.</span></span> <span data-ttu-id="40955-130">Questo li rende intercambiabili al momento del ripristino.</span><span class="sxs-lookup"><span data-stu-id="40955-130">This makes them interchangeable at restore time.</span></span> <span data-ttu-id="40955-131">Ad esempio, nella figura precedente il terzo volume di nastro2 è intercambiabile con il terzo volume di nastro0.</span><span class="sxs-lookup"><span data-stu-id="40955-131">For example, in the previous illustration, the third volume of tape2 is interchangeable with the third volume of tape0.</span></span>  
  
 <span data-ttu-id="40955-132">[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] assicura che il contenuto dei supporti con mirroring sia identico tramite la sincronizzazione delle scritture nei dispositivi.</span><span class="sxs-lookup"><span data-stu-id="40955-132">The [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] guarantees that the mirrored media have identical contents by synchronizing writes to the devices.</span></span> <span data-ttu-id="40955-133">Quando uno dei mirror si riempie, viene eseguito lo spanning di tutti i mirror contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="40955-133">When any one of the mirrors fills, all the mirrors are spanned at one time.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="40955-134">Non è possibile spezzare implicitamente, ovvero dividere, un set di supporti con mirroring tramite la rimozione di un mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-134">A mirrored media set cannot be implicitly broken (split) by removing a mirror.</span></span> <span data-ttu-id="40955-135">Se un nastro o un disco in un mirror viene danneggiato o riformattato, non sarà più possibile utilizzare tale mirror per ulteriori backup.</span><span class="sxs-lookup"><span data-stu-id="40955-135">If any tape or disk in a mirror is damaged or reformatted, the mirror is no longer usable for additional backups.</span></span> <span data-ttu-id="40955-136">Se rimane intatto almeno un mirror completo, sarà possibile leggere il set di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-136">If at least one full mirror remains intact, the media set can be read.</span></span> <span data-ttu-id="40955-137">Se ogni mirror perde un determinato gruppo di supporti, il set di supporti risulterà inutile.</span><span class="sxs-lookup"><span data-stu-id="40955-137">If every mirror loses a given media family, the media set is useless.</span></span>  
  
 <span data-ttu-id="40955-138">I requisiti relativi alla presenza di tutti i mirror sono diversi in caso di operazioni di backup e di ripristino.</span><span class="sxs-lookup"><span data-stu-id="40955-138">Backup and restore operations impose different requirements on whether all the mirrors must be present.</span></span> <span data-ttu-id="40955-139">Per la scrittura, ovvero la creazione o estensione, di un set di supporti con mirroring da parte di un'operazione di backup, è necessario che siano presenti tutti i mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-139">For a backup operation to write (that is, to create or extend) a mirrored media set, all the mirrors must be present.</span></span> <span data-ttu-id="40955-140">Quando al contrario si esegue il ripristino di un backup da un set di supporti con mirroring, è possibile specificare un solo mirror per ogni gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="40955-140">In contrast, when you are restoring a backup from a mirrored media set, you can specify only a single mirror for each media family.</span></span> <span data-ttu-id="40955-141">È possibile eseguire il ripristino da un numero di dispositivi inferiore a quello dei gruppi, ma ogni gruppo di supporti viene elaborato solo una volta.</span><span class="sxs-lookup"><span data-stu-id="40955-141">You can restore from fewer devices than families, but each media family is processed only one time.</span></span> <span data-ttu-id="40955-142">In presenza di errori, tuttavia, la disponibilità degli altri mirror può consentire una risoluzione rapida di alcuni problemi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="40955-142">In the presence of errors, however, having the other mirrors enables some restore problems to be resolved quickly.</span></span> <span data-ttu-id="40955-143">È possibile sostituire un volume di un supporto danneggiato con il volume corrispondente da un altro mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-143">You can substitute a damaged media volume with the corresponding volume from another mirror.</span></span> <span data-ttu-id="40955-144">RESTORE e RESTORE VERIFYONLY supportano infatti la sostituzione di supporti danneggiati con il volume di supporti di backup corrispondente disponibile in un altro mirror.</span><span class="sxs-lookup"><span data-stu-id="40955-144">This is because RESTORE and RESTORE VERIFYONLY support substitution of damaged media with the corresponding backup-media volume from another mirror.</span></span>  
  
##  <a name="hardware-requirements-for-backup-mirrors"></a><a name="HardwareReqs"></a> <span data-ttu-id="40955-145">Requisiti hardware per i mirror di backup</span><span class="sxs-lookup"><span data-stu-id="40955-145">Hardware Requirements for Backup Mirrors</span></span>  
 <span data-ttu-id="40955-146">È possibile eseguire il mirroring sia su disco che su nastro. I dischi tuttavia non supportano i nastri di continuità.</span><span class="sxs-lookup"><span data-stu-id="40955-146">Mirroring applies both to disk and tape (disks do not support continuation tapes).</span></span> <span data-ttu-id="40955-147">Tutti i dispositivi di backup per una singola operazione di backup o di ripristino devono essere dello stesso tipo, vale a dire disco o nastro.</span><span class="sxs-lookup"><span data-stu-id="40955-147">All backup devices for a single backup or restore operation must be of the same type, disk or tape.</span></span>  
  
 <span data-ttu-id="40955-148">È inoltre necessario utilizzare dispositivi simili, con le stesse proprietà.</span><span class="sxs-lookup"><span data-stu-id="40955-148">Within these broader classes, you must use similar devices that have the same properties.</span></span> <span data-ttu-id="40955-149">Se i dispositivi non sono sufficientemente simili, verrà generato un messaggio di errore (3212).</span><span class="sxs-lookup"><span data-stu-id="40955-149">Insufficiently similar devices generate an error message (3212).</span></span> <span data-ttu-id="40955-150">Per evitare il rischio di mancata corrispondenza di un dispositivo, utilizzare dispositivi equivalenti, ad esempio unità dello stesso produttore e con lo stesso numero di modello.</span><span class="sxs-lookup"><span data-stu-id="40955-150">To avoid the risk of a device mismatch, use devices that are equivalent, such as, only drives with the same model number from the same manufacturer.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="40955-151">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="40955-151">Related Tasks</span></span>  
 <span data-ttu-id="40955-152">**Per eseguire il backup su dispositivi di backup con mirroring**</span><span class="sxs-lookup"><span data-stu-id="40955-152">**To back up to mirrored backup devices**</span></span>  
  
-   [<span data-ttu-id="40955-153">Backup in un set di supporti con mirroring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="40955-153">Back Up to a Mirrored Media Set &#40;Transact-SQL&#41;</span></span>](back-up-to-a-mirrored-media-set-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="40955-154">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="40955-154">See Also</span></span>  
 <span data-ttu-id="40955-155">[Possibili errori relativi ai supporti durante il backup e il ripristino &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="40955-155">[Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) </span></span>  
 <span data-ttu-id="40955-156">[RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="40955-156">[RESTORE VERIFYONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql) </span></span>  
 <span data-ttu-id="40955-157">[Dispositivi di backup &#40;SQL Server&#41;](backup-devices-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="40955-157">[Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) </span></span>  
 [<span data-ttu-id="40955-158">Set di supporti, gruppi di supporti e set di backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="40955-158">Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;</span></span>](media-sets-media-families-and-backup-sets-sql-server.md)  
  
  
