---
title: Set di supporti, gruppi di supporti e set di backup (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- media sets [SQL Server], about media sets
- backup media [SQL Server], about backup media
- backups [SQL Server], media sets
- media sets [SQL Server]
- media headers [SQL Server]
- backup sets [SQL Server], about backup sets
- backup media [SQL Server], media sets
- backups [SQL Server], media families
- backup media [SQL Server], media families
- media families [SQL Server]
- backups [SQL Server], backup sets
- backup sets [SQL Server]
ms.assetid: 2b8f19a2-ee9d-4120-b194-fbcd2076a489
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 853451ea5a7c43cd073fdf75703b3c4651b442d0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87635695"
---
# <a name="media-sets-media-families-and-backup-sets-sql-server"></a><span data-ttu-id="9a509-102">Set di supporti, gruppi di supporti e set di backup (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="9a509-102">Media Sets, Media Families, and Backup Sets (SQL Server)</span></span>
  <span data-ttu-id="9a509-103">In questo argomento viene presentata la terminologia di base relativa ai supporti per le procedure di backup e ripristino di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ed è rivolto ai nuovi utenti di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9a509-103">This topic introduces the basic backup-media terminology of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore and is intended for readers who are new to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9a509-104">Vengono descritti il formato usato da [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] per i supporti di backup, la corrispondenza tra supporti e dispositivi di backup, l'organizzazione dei backup nei relativi supporti e vengono elencate alcune considerazioni relative ai set e ai gruppi di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-104">This topic describes the format that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses for backup media, the correspondence between backup media and backup devices, the organization of backups on backup media, and several considerations for media sets and media families.</span></span> <span data-ttu-id="9a509-105">In questo argomento vengono inoltre illustrati i passaggi per inizializzare e formattare i supporti di backup in occasione del primo utilizzo o della sostituzione di un set di supporti precedente con uno nuovo e vengono elencate le operazioni necessarie per sovrascrivere set di backup precedenti in un set di supporti e per aggiungere nuovi set di backup a set di supporti esistenti.</span><span class="sxs-lookup"><span data-stu-id="9a509-105">The topic also describes the steps initializing or formatting backup media before you use it for the first time or replace an old media set with a new media set, how to overwrite old backup sets in a media set, and how to append new backup sets to a media set.</span></span>

> [!NOTE]
>  <span data-ttu-id="9a509-106">Per altre informazioni sul backup di SQL Server nel servizio di archiviazione BLOB di Azure, vedere [SQL Server backup e ripristino con il servizio di archiviazione BLOB di Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-106">For more information on SQL Server backup to the Azure Blob storage service,, see, [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span></span>


##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="9a509-107">Termini e definizioni</span><span class="sxs-lookup"><span data-stu-id="9a509-107">Terms and Definitions</span></span>
 <span data-ttu-id="9a509-108">set di supporti Raccolta ordinata di supporti di backup, nastri o file su disco, su cui una o più operazioni di backup hanno eseguito la scrittura usando un tipo e un numero fisso di dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-108">media set An ordered collection of backup media, tapes or disk files, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span>

 <span data-ttu-id="9a509-109">gruppo di supporti Backup creati su un singolo dispositivo senza mirroring o su un set di dispositivi con mirroring in un set di supporti</span><span class="sxs-lookup"><span data-stu-id="9a509-109">media family Backups created on a single nonmirrored device or a set of mirrored devices in a media set</span></span>

 <span data-ttu-id="9a509-110">set di backup Contenuto di backup aggiunto a un set di supporti da un'operazione di backup completata.</span><span class="sxs-lookup"><span data-stu-id="9a509-110">backup set The backup content that is added to a media set by a successful backup operation.</span></span>


##  <a name="overview-of-media-sets-media-families-and-backup-sets"></a><a name="OvMediaSetsFamiliesBackupSets"></a><span data-ttu-id="9a509-111">Panoramica di set di supporti, gruppi di supporti e set di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-111">Overview of Media Sets, Media Families, and Backup Sets</span></span>
 <span data-ttu-id="9a509-112">I backup disponibili in un set di uno o più supporti di backup costituiscono un singolo set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-112">The backups on a set of one or more backup media compose a single media set.</span></span> <span data-ttu-id="9a509-113">Un *set di supporti* è una raccolta ordinata di *supporti di backup*, nastri o file su disco, o oggetti BLOB di Azure, su cui una o più operazioni di backup hanno eseguito la scrittura usando un tipo e un numero fissi di dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-113">A *media set* is an ordered collection of *backup media*, tapes or disk files, or Azure Blobs, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span> <span data-ttu-id="9a509-114">Un set di supporti specificati usano unità nastro, unità disco o oggetti BLOB di Azure, ma non una combinazione di due o più.</span><span class="sxs-lookup"><span data-stu-id="9a509-114">A given media set uses tape drives, or disk drives or Azure blobs, but not a combination of two or more.</span></span> <span data-ttu-id="9a509-115">Ad esempio, è possibile che i dispositivi di backup associati a un set di supporti siano tre unità nastro denominate `\\.\TAPE0`, `\\.\TAPE1`e `\\.\TAPE2`.</span><span class="sxs-lookup"><span data-stu-id="9a509-115">For example, the backup devices associated with a media set might be three tape drives named `\\.\TAPE0`, `\\.\TAPE1`, and `\\.\TAPE2`.</span></span> <span data-ttu-id="9a509-116">Il set di supporti include solo nastri, a partire da almeno tre nastri, ovvero uno per unità.</span><span class="sxs-lookup"><span data-stu-id="9a509-116">That media set contains only tapes, starting with a minimum of three tapes (one per drive).</span></span> <span data-ttu-id="9a509-117">Il tipo e il numero di dispositivi di backup vengono definiti in fase di creazione di un set di supporti e non è possibile modificarli.</span><span class="sxs-lookup"><span data-stu-id="9a509-117">The type and number of backup devices are established when a media set is created, and they cannot be changed.</span></span> <span data-ttu-id="9a509-118">Se necessario, tra le operazioni di backup e ripristino è tuttavia possibile sostituire un determinato dispositivo con un dispositivo dello stesso tipo.</span><span class="sxs-lookup"><span data-stu-id="9a509-118">However, if necessary, between backup and restore operations a given device can be replaced with a device of the same type.</span></span>

 <span data-ttu-id="9a509-119">Per creare un set di supporti nei supporti di backup durante un'operazione di backup, formattare i supporti di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-119">A media set is created on the backup media during a backup operation by formatting the backup media.</span></span> <span data-ttu-id="9a509-120">Per altre informazioni, vedere [Creazione di un nuovo set di supporti](#CreatingMediaSet)più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="9a509-120">For more information, see [Creating a New Media Set](#CreatingMediaSet), later in this topic.</span></span> <span data-ttu-id="9a509-121">Dopo la formattazione, ogni file o nastro include un'intestazione supporto per il set di supporti ed è pronto per la ricezione di contenuto di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-121">After formatting, each file or tape contains a media header for the media set and is ready to receive backup content.</span></span> <span data-ttu-id="9a509-122">Dopo la creazione dell'intestazione, l'operazione di backup continua e in tutti i dispositivi di backup specificati per l'operazione viene eseguito il backup dei dati specificati nel supporto di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-122">With the header in place, the backup operation proceeds to back up the specified data to the backup media on all of the backup devices specified for the operation.</span></span>

> [!NOTE]
>  <span data-ttu-id="9a509-123">È possibile eseguire il mirroring dei set di supporti, per proteggersi dal rischio di un volume di supporti, ovvero un nastro o file su disco, danneggiato.</span><span class="sxs-lookup"><span data-stu-id="9a509-123">Media sets can be mirrored to protect against a damaged media volume (a tape or disk file).</span></span> <span data-ttu-id="9a509-124">Per altre informazioni, vedere [Set di supporti di backup con mirroring &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-124">For more information, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="9a509-125">o versioni successive è in grado di leggere i backup compressi.</span><span class="sxs-lookup"><span data-stu-id="9a509-125">or later can read compressed backups.</span></span> <span data-ttu-id="9a509-126">Per altre informazioni, vedere [Compressione backup &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-126">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


### <a name="media-families"></a><span data-ttu-id="9a509-127">Gruppi di supporti</span><span class="sxs-lookup"><span data-stu-id="9a509-127">Media Families</span></span>
 <span data-ttu-id="9a509-128">I backup creati su un singolo dispositivo senza mirroring o su un set di dispositivi con mirroring in un set di supporti costituiscono un *gruppo di supporti*.</span><span class="sxs-lookup"><span data-stu-id="9a509-128">Backups created on a single nonmirrored device or a set of mirrored devices in a media set constitute a *media family*.</span></span> <span data-ttu-id="9a509-129">Il numero di gruppi di supporti disponibili in un set di supporti dipende dal numero di dispositivi di backup usati per il set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-129">The number of backup devices used for the media set determines the number of media families in a media set.</span></span> <span data-ttu-id="9a509-130">Ad esempio, se in un set di supporti vengono usati due dispositivi di backup di cui non è stato eseguito il mirroring, il set di supporti contiene due gruppi di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-130">For example, if a media set uses two nonmirrored backup devices, the media set contains two media families.</span></span>

> [!NOTE]
>  <span data-ttu-id="9a509-131">In un set di supporti viene eseguito il mirroring di ogni gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-131">In a mirrored media set, each media family is mirrored.</span></span> <span data-ttu-id="9a509-132">Ad esempio, se si usano sei dispositivi di backup per formattare un set di supporti in cui vengono usati due mirror, sono disponibili tre gruppi di supporti, ognuno dei quali include due copie equivalenti dei dati di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-132">For example, if six backup devices are used to format a media set, where two mirrors are used, there are three media families, each containing two equivalent copies of backup data.</span></span> <span data-ttu-id="9a509-133">Per altre informazioni sui set di supporti con mirroring, vedere [Set di supporti di backup con mirroring &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-133">For more information about mirrored media sets, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 <span data-ttu-id="9a509-134">A ogni nastro o disco in un gruppo di supporti viene assegnato un *numero di sequenza dei supporti*.</span><span class="sxs-lookup"><span data-stu-id="9a509-134">Each tape or disk in a media family is assigned a *media sequence number*.</span></span> <span data-ttu-id="9a509-135">Il numero di sequenza dei supporti per un disco è sempre 1.</span><span class="sxs-lookup"><span data-stu-id="9a509-135">The media sequence number of a disk is always 1.</span></span> <span data-ttu-id="9a509-136">In un gruppo di supporti a nastro il numero di sequenza del nastro iniziale è 1, quello del secondo nastro è 2 e così via.</span><span class="sxs-lookup"><span data-stu-id="9a509-136">In a tape media family, the sequence number of the initial tape is 1, the sequence number of the second tape is 2, and so forth.</span></span> <span data-ttu-id="9a509-137">Per altre informazioni, vedere [Utilizzo dei set e dei gruppi di supporti](#ConsiderationsForMediaSetFamilies).</span><span class="sxs-lookup"><span data-stu-id="9a509-137">For more information, see [Using Media Sets and Families](#ConsiderationsForMediaSetFamilies).</span></span>

#### <a name="the-media-header"></a><span data-ttu-id="9a509-138">intestazione supporto</span><span class="sxs-lookup"><span data-stu-id="9a509-138">The Media Header</span></span>
 <span data-ttu-id="9a509-139">Ogni volume di supporti di backup, ovvero file su disco o nastro, contiene un'intestazione supporto, creata dalla prima operazione di backup che usano il nastro o il disco.</span><span class="sxs-lookup"><span data-stu-id="9a509-139">Every volume of backup media (disk file or tape) contains a media header that is created when by the first backup operation that uses the tape (or disk).</span></span> <span data-ttu-id="9a509-140">L'intestazione non subisce alcuna modifica, fino a quando il supporto non viene riformattato.</span><span class="sxs-lookup"><span data-stu-id="9a509-140">That header remains intact until the media is reformatted.</span></span>

 <span data-ttu-id="9a509-141">L'intestazione supporto include tutte le informazioni necessarie per identificare il supporto, ovvero file su disco o nastro, e la relativa posizione nel gruppo di supporti a cui appartiene.</span><span class="sxs-lookup"><span data-stu-id="9a509-141">The media header contains all of the information required to identify the media (disk file or tape) and its place within the media family to which it belongs.</span></span> <span data-ttu-id="9a509-142">Sono incluse le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a509-142">This information includes:</span></span>

-   <span data-ttu-id="9a509-143">Nome del supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-143">The name of the media.</span></span>

     <span data-ttu-id="9a509-144">Il nome del supporto è facoltativo, ma è consigliabile usare sempre nomi di supporti che consentano di identificare chiaramente il supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-144">The media name is optionally, but we recommend consistently using media names that clearly identify your media.</span></span> <span data-ttu-id="9a509-145">Il nome del supporto viene assegnato dall'utente che formatta il supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-145">A media name is assigned by whoever formats the media.</span></span>

-   <span data-ttu-id="9a509-146">Numero di identificazione univoco del set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-146">The unique identification number of the media set.</span></span>

-   <span data-ttu-id="9a509-147">Numero di gruppi di supporti nel set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-147">The number of media families in the media set.</span></span>

-   <span data-ttu-id="9a509-148">Numero di sequenza del gruppo di supporti contenente il supporto specificato.</span><span class="sxs-lookup"><span data-stu-id="9a509-148">The sequence number of the media family containing this media.</span></span>

-   <span data-ttu-id="9a509-149">Numero di identificazione univoco del gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-149">The unique identification number for the media family.</span></span>

-   <span data-ttu-id="9a509-150">Numero di sequenza del supporto nel gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-150">The sequence number of this media in the media family.</span></span> <span data-ttu-id="9a509-151">Nel caso di un file su disco, tale valore è sempre 1.</span><span class="sxs-lookup"><span data-stu-id="9a509-151">For a disk file, this value is always 1.</span></span>

-   <span data-ttu-id="9a509-152">Indicazione della presenza o meno di un'etichetta del supporto MTF o di una descrizione dei supporti nella descrizione del supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-152">Whether the media description contains an MTF media label or a media description.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="9a509-153">Tutti i supporti usati per un'operazione di backup o ripristino usano un formato di backup standard denominato [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] conserva qualsiasi etichetta del supporto MTF scritta da un'altra applicazione ma non scrive le etichette dei supporti MTF.</span><span class="sxs-lookup"><span data-stu-id="9a509-153">All media that is used for a backup or restore operation use a standard backup format called [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] preserves any MTF media label written by another application but does not write MTF media labels.</span></span>

-   <span data-ttu-id="9a509-154">Etichetta del supporto MTF ( [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Tape Format) o descrizione del supporto (testo in formato libero).</span><span class="sxs-lookup"><span data-stu-id="9a509-154">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Tape Format media label or the media description (in free-form text).</span></span>

-   <span data-ttu-id="9a509-155">Nome del software di backup con cui è stata scritta l'etichetta.</span><span class="sxs-lookup"><span data-stu-id="9a509-155">The name of the backup software that wrote the label.</span></span>

-   <span data-ttu-id="9a509-156">Numero di identificazione univoco del fornitore del software che ha formattato il supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-156">The unique vendor identification number of the software vendor that formatted the media.</span></span>

-   <span data-ttu-id="9a509-157">Data e ora in cui è stata scritta l'etichetta.</span><span class="sxs-lookup"><span data-stu-id="9a509-157">The date and time the label was written.</span></span>

-   <span data-ttu-id="9a509-158">Numero di mirror nel set (1-4). Il valore 1 indica che non è stato eseguito il mirroring di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a509-158">The number of mirrors in the set (1-4); 1 indicates an unmirrored device.</span></span>

 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="9a509-159">è in grado di elaborare supporti formattati da versioni precedenti di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9a509-159">can process media formatted by earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>

### <a name="backup-sets"></a><span data-ttu-id="9a509-160">Set di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-160">Backup Sets</span></span>
 <span data-ttu-id="9a509-161">Un'operazione di backup aggiunge un singolo *set di backup* al set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-161">A successful backup operation adds a single *backup set* to the media set.</span></span> <span data-ttu-id="9a509-162">Il set di backup viene descritto in termini di set di supporti a cui appartiene il backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-162">The backup set is described in terms of the media set to which the backup belongs.</span></span> <span data-ttu-id="9a509-163">Se i supporti di backup sono costituiti da un solo gruppo di supporti, tale gruppo include l'intero set di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-163">If the backup media consists of only one media family, that family contains the entire backup set.</span></span> <span data-ttu-id="9a509-164">Se i supporti di backup sono costituiti da più gruppi di supporti, il set di backup viene distribuito tra i diversi gruppi.</span><span class="sxs-lookup"><span data-stu-id="9a509-164">If the backup media consists of multiple media families, the backup set is distributed among them.</span></span> <span data-ttu-id="9a509-165">In ogni supporto il set di backup include un'intestazione che lo descrive.</span><span class="sxs-lookup"><span data-stu-id="9a509-165">On each medium, the backup set contains a header that describes the backup set.</span></span>

 <span data-ttu-id="9a509-166">Nell'esempio seguente viene riportata un'istruzione [!INCLUDE[tsql](../../includes/tsql-md.md)] che consente di creare un set di supporti denominato `MyAdvWorks_MediaSet_1` per il database [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] usando tre unità nastro come dispositivi di backup:</span><span class="sxs-lookup"><span data-stu-id="9a509-166">The following example shows a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement that creates a media set called `MyAdvWorks_MediaSet_1` for the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database using three tape drives as backup devices:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   FORMAT,
   MEDIANAME = 'MyAdvWorks_MediaSet_1'
```

 <span data-ttu-id="9a509-167">Se completata correttamente, questa operazione di backup consente di ottenere un nuovo set di supporti contenente una nuova intestazione supporto e un set di backup distribuito nei tre nastri.</span><span class="sxs-lookup"><span data-stu-id="9a509-167">If successful, this backup operation results in a new media set containing a new media header and one backup set spread across three tapes.</span></span> <span data-ttu-id="9a509-168">Tali risultati vengono illustrati nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="9a509-168">The following figure illustrates these results:</span></span>

 <span data-ttu-id="9a509-169">![Intestazione supporto e primo set di backup su 3 nastri](../../database-engine/media/bnr-mediaset-new.gif "Intestazione supporto e primo set di backup su 3 nastri")</span><span class="sxs-lookup"><span data-stu-id="9a509-169">![Media header and first backup set on 3 tapes](../../database-engine/media/bnr-mediaset-new.gif "Media header and first backup set on 3 tapes")</span></span>

 <span data-ttu-id="9a509-170">In genere, dopo la creazione di un set di supporti, i set di backup vengono aggiunti al set di supporti da operazioni di backup successive.</span><span class="sxs-lookup"><span data-stu-id="9a509-170">Typically, after a media set is created, subsequent backup operations, one after another, append their backup sets to the media set.</span></span> <span data-ttu-id="9a509-171">Tutti i supporti usati da un set di backup compongono il set di supporti, indipendentemente dal numero di supporti o di dispositivi di backup coinvolti.</span><span class="sxs-lookup"><span data-stu-id="9a509-171">All of the media used by a backup set make up the media set, regardless of the number of media or backup devices involved.</span></span> <span data-ttu-id="9a509-172">Ai set di backup vengono assegnati numeri sequenziali in base alla rispettiva posizione nel set di supporti. Tali numeri consentono di specificare il set di backup da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="9a509-172">Backup sets are sequentially numbered by their position in the media set, allowing you to specify which backup set to restore.</span></span>

 <span data-ttu-id="9a509-173">È necessario che ogni operazione di backup in un set di supporti scriva nello stesso numero e tipo di dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-173">Every backup operation to a media set must write to the same number and type of backup devices.</span></span> <span data-ttu-id="9a509-174">Nel caso di più dispositivi, ad esempio nel primo set di backup, il contenuto di ogni set di backup successivo viene distribuito tra i supporti di backup in tutti i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="9a509-174">With multiple devices, as with the first backup set, the content of every subsequent backup set is distributed among the backup media on all of the devices.</span></span> <span data-ttu-id="9a509-175">Per continuare l'esempio precedente, una seconda operazione di backup, ovvero un backup differenziale, aggiunge informazioni allo stesso set di supporti:</span><span class="sxs-lookup"><span data-stu-id="9a509-175">To continue the above example, a second backup operation (a differential backup) appends information to the same media set:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   NOINIT,
   MEDIANAME = 'AdventureWorksMediaSet1',
   DIFFERENTIAL
```

> [!NOTE]
>  <span data-ttu-id="9a509-176">L'opzione NOINIT è l'impostazione predefinita, ma è stata inclusa per maggiore chiarezza.</span><span class="sxs-lookup"><span data-stu-id="9a509-176">The NOINIT option is the default, but is included for clarity.</span></span>

 <span data-ttu-id="9a509-177">Se la seconda operazione di backup viene completata correttamente, un secondo set di backup viene scritto nel set di supporti, con la seguente distribuzione del contenuto del backup:</span><span class="sxs-lookup"><span data-stu-id="9a509-177">If the second backup operation succeeds, it writes a second backup set to the media set, with the following distribution of backup content:</span></span>

 <span data-ttu-id="9a509-178">![Secondo set di backup distribuito su 3 nastri del set di supporti](../../database-engine/media/bnr-mediaset-appendedto.gif "Secondo set di backup distribuito su 3 nastri del set di supporti")</span><span class="sxs-lookup"><span data-stu-id="9a509-178">![Second backup set spread across 3 media-set tapes](../../database-engine/media/bnr-mediaset-appendedto.gif "Second backup set spread across 3 media-set tapes")</span></span>

 <span data-ttu-id="9a509-179">Quando si ripristinano i backup, è possibile usare l'opzione FILE per specificare quali backup si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="9a509-179">When you are restoring backups, you can use you the FILE option to specify which backups you want to use.</span></span> <span data-ttu-id="9a509-180">L'esempio seguente illustra l'uso delle clausole FILE **=** _numero_file_set_backup_ quando si ripristina un backup completo del database [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] seguito da un backup differenziale del database sullo stesso set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-180">The following example shows the use of FILE **=**_backup_set_file_number_ clauses when restoring a full database backup of the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database followed by a differential database backup on the same media set.</span></span> <span data-ttu-id="9a509-181">Il set di supporti usano tre nastri di backup, che si trovano sulle unità nastro `\\.\tape0`, `tape1`e `tape2`.</span><span class="sxs-lookup"><span data-stu-id="9a509-181">The media set uses three backup tapes, which are on tape drives `\\.\tape0`, `tape1`, and `tape2`.</span></span>

```
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=1, 
   NORECOVERY;
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2' 
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=2, 
   RECOVERY;
GO
```

 <span data-ttu-id="9a509-182">Per informazioni sulle tabelle della cronologia nelle quali sono archiviate le informazioni sui set di supporti e i relativi gruppi di supporti e set di backup, vedere [Informazioni sulla cronologia e sull'intestazione del backup &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-182">For information about the history tables that store information about media sets and their media families and backup sets, see [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span></span>

 <span data-ttu-id="9a509-183">Il numero di supporti di backup in un set di supporti dipende da numerosi fattori:</span><span class="sxs-lookup"><span data-stu-id="9a509-183">The number of backup media in a media set depends on several factors:</span></span>

-   <span data-ttu-id="9a509-184">Numero di dispositivi di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-184">Number of backup devices</span></span>

-   <span data-ttu-id="9a509-185">Tipo di dispositivi di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-185">Type of backup devices</span></span>

-   <span data-ttu-id="9a509-186">Numero di set di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-186">Number of backup sets</span></span>

##  <a name="using-media-sets-and-families"></a><a name="ConsiderationsForMediaSetFamilies"></a><span data-ttu-id="9a509-187">Uso di set di supporti e famiglie</span><span class="sxs-lookup"><span data-stu-id="9a509-187">Using Media Sets and Families</span></span>
 <span data-ttu-id="9a509-188">In questa sezione vengono illustrate alcune considerazioni sull'utilizzo dei set e dei gruppi di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-188">This section discusses several considerations for using media sets and media families.</span></span>



###  <a name="creating-a-new-media-set"></a><a name="CreatingMediaSet"></a><span data-ttu-id="9a509-189">Creazione di un nuovo set di supporti</span><span class="sxs-lookup"><span data-stu-id="9a509-189">Creating a New Media Set</span></span>
 <span data-ttu-id="9a509-190">Per creare un nuovo set di supporti, è necessario formattare i supporti di backup, ovvero uno o più nastri o file su disco.</span><span class="sxs-lookup"><span data-stu-id="9a509-190">To create a new media set, you must format the backup media (one or more tapes or disk files).</span></span> <span data-ttu-id="9a509-191">Durante il processo di formattazione i supporti di backup vengono modificati come descritto di seguito:</span><span class="sxs-lookup"><span data-stu-id="9a509-191">The formatting process changes the backup media as follows:</span></span>

1.  <span data-ttu-id="9a509-192">L'eventuale vecchia intestazione viene eliminata, così come il contenuto precedente dei supporti di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-192">Deletes the old header (if any), effectively deleting the previous contents of the backup media.</span></span>

     <span data-ttu-id="9a509-193">La formattazione di un dispositivo nastro implica l'eliminazione del contenuto precedente del nastro attualmente montato.</span><span class="sxs-lookup"><span data-stu-id="9a509-193">Formatting a tape device deletes all previous contents of the currently mounted tape.</span></span> <span data-ttu-id="9a509-194">La formattazione di un disco interessa solo il file specificato per l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-194">Formatting a disk affects only the file that you specify for the backup operation</span></span>

2.  <span data-ttu-id="9a509-195">Sul supporto di backup (nastro o file su disco) di ciascun dispositivo di backup viene scritta una nuova intestazione supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-195">Writes a new media header on the backup media (tape or disk file) on each of the backup devices.</span></span>


###  <a name="backing-up-to-an-existing-media-set"></a><a name="UseExistingMediaSet"></a><span data-ttu-id="9a509-196">Esecuzione del backup in un set di supporti esistente</span><span class="sxs-lookup"><span data-stu-id="9a509-196">Backing Up to an Existing Media Set</span></span>
 <span data-ttu-id="9a509-197">Quando si esegue il backup su un set di supporti esistente, è possibile scegliere tra le due opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a509-197">When you are backing up to an existing media set, you have the following two options:</span></span>

-   <span data-ttu-id="9a509-198">Accodare i dati al set di backup esistente.</span><span class="sxs-lookup"><span data-stu-id="9a509-198">Append to the existing backup set.</span></span>

     <span data-ttu-id="9a509-199">Per sfruttare al meglio lo spazio disponibile, i nuovi set di backup vengono in genere accodati al set di supporti esistenti.</span><span class="sxs-lookup"><span data-stu-id="9a509-199">To make the best possible use of the available space, new backup sets typically are appended to existing media set.</span></span> <span data-ttu-id="9a509-200">In tal modo vengono mantenuti anche tutti i backup precedenti.</span><span class="sxs-lookup"><span data-stu-id="9a509-200">Appending to the backup preserves any prior backups.</span></span> <span data-ttu-id="9a509-201">Per altre informazioni, vedere [Accodamento a set di backup esistenti](#Appending), più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="9a509-201">For more information, see [Appending to Existing Backup Sets](#Appending), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="9a509-202">L'accodamento, che corrisponde al comportamento predefinito dell'istruzione BACKUP, può essere specificato in modo esplicito tramite l'opzione NOINIT.</span><span class="sxs-lookup"><span data-stu-id="9a509-202">Appending, which is the default behavior of the BACKUP, can be explicitly specified by using the NOINIT option.</span></span>

-   <span data-ttu-id="9a509-203">Sovrascrivere tutti i set di backup esistenti con il backup corrente senza eliminare l'intestazione supporto corrente.</span><span class="sxs-lookup"><span data-stu-id="9a509-203">Overwrite all existing backup sets with the current backup, leaving the current media header in place.</span></span>

     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="9a509-204">prevede funzionalità che impediscono la sovrascrittura accidentale dei supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-204">backup has safeguards to prevent you from accidentally overwriting media.</span></span> <span data-ttu-id="9a509-205">È tuttavia possibile sovrascrivere automaticamente set di backup che hanno raggiunto la data di scadenza prevista.</span><span class="sxs-lookup"><span data-stu-id="9a509-205">However, backup can automatically overwrite backup sets that have reached a predefined expiration date.</span></span>

     <span data-ttu-id="9a509-206">Per quanto riguarda le intestazioni del nastro, può risultare opportuno mantenerle.</span><span class="sxs-lookup"><span data-stu-id="9a509-206">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="9a509-207">Per altre informazioni, vedere [Sovrascrittura di set di backup](#Overwriting), più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="9a509-207">For more information, see [Overwriting Backup Sets](#Overwriting), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="9a509-208">La sovrascrittura dei set di backup esistenti viene specificata tramite l'opzione INIT dell'istruzione BACKUP.</span><span class="sxs-lookup"><span data-stu-id="9a509-208">Overwriting existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span>

####  <a name="appending-to-existing-backup-sets"></a><a name="Appending"></a><span data-ttu-id="9a509-209">Aggiunta a set di backup esistenti</span><span class="sxs-lookup"><span data-stu-id="9a509-209">Appending to Existing Backup Sets</span></span>
 <span data-ttu-id="9a509-210">È possibile archiviare nello stesso supporto i backup dello stesso database o di database differenti eseguiti in momenti diversi.</span><span class="sxs-lookup"><span data-stu-id="9a509-210">Backups performed at different times from the same or different databases can be stored on the same media.</span></span> <span data-ttu-id="9a509-211">Se si accoda un altro set di backup a un supporto esistente, il contenuto precedente del supporto rimane invariato e il nuovo backup viene registrato dopo la fine dell'ultimo backup presente nel supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-211">By appending another backup set to existing media, the previous contents of the media remain intact, and the new backup is written after the end of the last backup on the media.</span></span>

 <span data-ttu-id="9a509-212">Per impostazione predefinita, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] accoda sempre i nuovi backup al supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-212">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] always appends new backups to media.</span></span> <span data-ttu-id="9a509-213">È possibile accodare i backup solo alla fine del supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-213">Appending can occur only at the end of the media.</span></span> <span data-ttu-id="9a509-214">Se ad esempio un volume del supporto include cinque set di backup, non è possibile ignorare i primi tre set e sovrascrivere il quarto con un nuovo set di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-214">For example, if a media volume contains five backup sets, it is not possible to skip the first three backup sets to overwrite the fourth backup set with a new backup set.</span></span>

 <span data-ttu-id="9a509-215">Se si usano l'istruzione BACKUP WITH NOREWIND per un backup su nastro, il nastro rimarrà aperto alla fine dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="9a509-215">If you use BACKUP WITH NOREWIND for a tape backup, the tape will be left open at the end of the operation.</span></span> <span data-ttu-id="9a509-216">In questo modo sarà possibile accodare altri backup al nastro senza riavvolgerlo e scorrerlo in avanti per individuare l'ultimo set di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-216">This allows you to append further backups to the tape without rewinding the tape and then scanning forward again to find the last backup set.</span></span> <span data-ttu-id="9a509-217">L'elenco delle unità nastro aperte è disponibile nella vista a gestione dinamica **sys.dm_io_backup_tapes**. Per altre informazioni, vedere [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="9a509-217">You can find the list of open tape drives in the **sys.dm_io_backup_tapes** dynamic management view; for more information, see [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span></span>

 <span data-ttu-id="9a509-218">I backup di Microsoft Windows e di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] possono condividere lo stesso supporto ma non sono interoperativi.</span><span class="sxs-lookup"><span data-stu-id="9a509-218">Microsoft Windows backups and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups can share the same media, but they are not interoperable.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="9a509-219">.</span><span class="sxs-lookup"><span data-stu-id="9a509-219">backup cannot back up Windows data.</span></span>

> [!IMPORTANT]
>  [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="9a509-220">o versioni successive è in grado di leggere i backup compressi.</span><span class="sxs-lookup"><span data-stu-id="9a509-220">or later versions can read compressed backups.</span></span> <span data-ttu-id="9a509-221">Per altre informazioni, vedere [Compressione backup &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="9a509-221">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


####  <a name="overwriting-backup-sets"></a><a name="Overwriting"></a><span data-ttu-id="9a509-222">Sovrascrittura di set di backup</span><span class="sxs-lookup"><span data-stu-id="9a509-222">Overwriting Backup Sets</span></span>
 <span data-ttu-id="9a509-223">La sovrascrittura dei set di backup esistenti viene specificata tramite l'opzione INIT dell'istruzione BACKUP.</span><span class="sxs-lookup"><span data-stu-id="9a509-223">Overwriting of existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span> <span data-ttu-id="9a509-224">Se le verifiche hanno esito positivo, questa opzione sovrascrive gli eventuali set di backup presenti nei supporti, mantenendo solo l'intestazione supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-224">This option overwrites all the backup sets on the media and preserve the media header, if any.</span></span> <span data-ttu-id="9a509-225">Se non esiste alcuna intestazione supporto ne viene creata una.</span><span class="sxs-lookup"><span data-stu-id="9a509-225">If no media header exists, one is created.</span></span>

 <span data-ttu-id="9a509-226">Per quanto riguarda le intestazioni del nastro, può risultare opportuno mantenerle.</span><span class="sxs-lookup"><span data-stu-id="9a509-226">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="9a509-227">Nel caso di backup su disco vengono sovrascritti soltanto i file usati dai dispositivi di backup specificati per l'operazione. Gli altri file presenti nel disco rimangono inalterati.</span><span class="sxs-lookup"><span data-stu-id="9a509-227">For disk backup media, only the files used by the backup devices specified in the backup operation are overwritten; other files on the disk are unaffected.</span></span> <span data-ttu-id="9a509-228">Durante la sovrascrittura di backup è possibile mantenere l'intestazione supporto esistente. Il nuovo backup verrà creato come primo backup del dispositivo di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-228">When overwriting backups, any existing media header is preserved, and the new backup is created as the first backup on the backup device.</span></span> <span data-ttu-id="9a509-229">Se l'intestazione supporto non è presente, viene creata automaticamente una nuova intestazione con un nome e una descrizione del supporto.</span><span class="sxs-lookup"><span data-stu-id="9a509-229">If there is no existing media header, a valid media header with an associated media name and media description is written automatically.</span></span> <span data-ttu-id="9a509-230">Se l'intestazione supporto esistente non è valida, l'operazione di backup viene interrotta.</span><span class="sxs-lookup"><span data-stu-id="9a509-230">If the existing media header is invalid, the backup operation terminates.</span></span> <span data-ttu-id="9a509-231">Se il supporto è vuoto, viene generata una nuova intestazione supporto con gli eventuali valori MEDIANAME, MEDIAPASSWORD e MEDIADESCRIPTION specificati.</span><span class="sxs-lookup"><span data-stu-id="9a509-231">If the media is empty, the new media header is generated with the given MEDIANAME, MEDIAPASSWORD, and MEDIADESCRIPTION, if any.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="9a509-232">A partire da [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], l'opzione MEDIAPASSWORD non è più disponibile per la creazione di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-232">Beginning with [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], the MEDIAPASSWORD option is discontinued for creating backups.</span></span> <span data-ttu-id="9a509-233">È tuttavia possibile ripristinare backup creati con password.</span><span class="sxs-lookup"><span data-stu-id="9a509-233">However, you can still restore backups created with passwords.</span></span>

 <span data-ttu-id="9a509-234">I supporti di backup non vengono sovrascritti in presenza di una qualunque delle due condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a509-234">Backup media is not overwritten if either of the following conditions exists:</span></span>

-   <span data-ttu-id="9a509-235">I backup esistenti nei supporti non sono scaduti.</span><span class="sxs-lookup"><span data-stu-id="9a509-235">The existing backups on the media have not expired.</span></span> <span data-ttu-id="9a509-236">Se è stato specificato SKIP, la data di scadenza non viene verificata.</span><span class="sxs-lookup"><span data-stu-id="9a509-236">(If SKIP is specified, expiration is not checked.)</span></span>

     <span data-ttu-id="9a509-237">La data di scadenza indica la data in cui il backup risulta scaduto e può essere sovrascritto con un altro backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-237">The expiration date specifies the date that the backup expires and can be overwritten by another backup.</span></span> <span data-ttu-id="9a509-238">Questa data può essere specificata al momento della creazione del backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-238">You can specify the expiration date when a backup is created.</span></span> <span data-ttu-id="9a509-239">Per impostazione predefinita, la data di scadenza è determinata dall'opzione **media retention** impostata con **sp_configure**.</span><span class="sxs-lookup"><span data-stu-id="9a509-239">By default, the expiration date is determined by the **media retention** option set with **sp_configure**.</span></span> <span data-ttu-id="9a509-240">Per altre informazioni, vedere [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="9a509-240">For more information, see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>

-   <span data-ttu-id="9a509-241">Il nome dei supporti, se specificato, non corrisponde al nome esistente nei supporti di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-241">The media name, if provided, does not match the name on the backup media.</span></span>

     <span data-ttu-id="9a509-242">Il nome dei supporti è un nome descrittivo che consente l'identificazione immediata dei supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-242">The media name is a descriptive name used for easy identification of the media.</span></span>

 <span data-ttu-id="9a509-243">È possibile ignorare esplicitamente queste verifiche se si desidera effettivamente sovrascrivere i supporti esistenti, ad esempio se si è certi che i backup presenti nel nastro non sono più necessari.</span><span class="sxs-lookup"><span data-stu-id="9a509-243">If you are sure you want to overwrite the existing media (for example, if you know that the backups on the tape are no longer needed), you can explicitly skip these checks.</span></span>

 <span data-ttu-id="9a509-244">I supporti di backup non vengono sovrascritti se sono protetti con una password di Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="9a509-244">If the backup media is password protected by Microsoft Windows, Microsoft SQL Server does not write to the media.</span></span> <span data-ttu-id="9a509-245">Per poterli sovrascrivere, è necessario reinizializzarli.</span><span class="sxs-lookup"><span data-stu-id="9a509-245">To overwrite media that is password protected, you must reinitialize the media.</span></span>


###  <a name="sequence-numbers"></a><a name="SequenceNumbers"></a><span data-ttu-id="9a509-246">Numeri di sequenza</span><span class="sxs-lookup"><span data-stu-id="9a509-246">Sequence Numbers</span></span>
 <span data-ttu-id="9a509-247">L'ordine corretto è importante per più gruppi di supporti in un set di supporti o per più supporti di backup in un gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-247">The correct order is important for multiple media families within a media set or multiple backup media within a media family.</span></span> <span data-ttu-id="9a509-248">Il backup assegna pertanto i numeri di sequenza nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a509-248">Therefore, backup assigns sequence numbers in the following ways:</span></span>

-   <span data-ttu-id="9a509-249">Gruppi di supporti sequenziali in un set di supporti</span><span class="sxs-lookup"><span data-stu-id="9a509-249">Sequential media families within a media set</span></span>

     <span data-ttu-id="9a509-250">All'interno di un set di supporti viene assegnata una numerazione sequenziale ai gruppi di supporti, in base alla rispettiva posizione nel set di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-250">Within a media set, the media families are numbered sequentially according to their position in the media set.</span></span> <span data-ttu-id="9a509-251">Il numero del gruppo di supporti viene registrato nella colonna **family_sequence_number** della tabella **backupmediafamily** .</span><span class="sxs-lookup"><span data-stu-id="9a509-251">The media-family number is recorded in the **family_sequence_number** column of the **backupmediafamily** table.</span></span>

-   <span data-ttu-id="9a509-252">Supporti fisici in un gruppo di supporti</span><span class="sxs-lookup"><span data-stu-id="9a509-252">Physical media within a media family</span></span>

     <span data-ttu-id="9a509-253">Un numero di sequenza di supporti indica l'ordine applicato ai supporti fisici in un gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-253">A media sequence number indicates the order of the physical media within a media family.</span></span> <span data-ttu-id="9a509-254">Il numero di sequenza è 1 per il supporto di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="9a509-254">The sequence number is 1 for the initial backup media.</span></span> <span data-ttu-id="9a509-255">A esso è associato il tag 1, al secondo (il primo nastro di continuità) il tag 2 e così via.</span><span class="sxs-lookup"><span data-stu-id="9a509-255">This is tagged with 1; the second (the first continuation tape) is tagged with 2; and so on.</span></span> <span data-ttu-id="9a509-256">Quando il set di backup viene ripristinato, i numeri di sequenza dei supporti assicurano che l'operatore che ripristina i backup monti i supporti corretti nell'ordine corretto.</span><span class="sxs-lookup"><span data-stu-id="9a509-256">When the backup set is restored, the media sequence numbers make sure that the operator restoring the backup mounts the correct media in the correct order.</span></span>

###  <a name="multiple-devices"></a><a name="MultipleDevices"></a> <span data-ttu-id="9a509-257">Utilizzo di più dispositivi</span><span class="sxs-lookup"><span data-stu-id="9a509-257">Multiple Devices</span></span>
 <span data-ttu-id="9a509-258">Quando si usano più unità nastro o file su disco, si applicano le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a509-258">When you use multiple tape drives or disk files, the following considerations apply:</span></span>

-   <span data-ttu-id="9a509-259">Per il backup:</span><span class="sxs-lookup"><span data-stu-id="9a509-259">For backup:</span></span>

     <span data-ttu-id="9a509-260">Il set di supporti completo creato da un'operazione di backup deve essere usato da tutte le operazioni di backup successive.</span><span class="sxs-lookup"><span data-stu-id="9a509-260">The complete media set that is created by a backup operation must be used by all subsequent backup operations.</span></span> <span data-ttu-id="9a509-261">Se ad esempio un set di supporti è stato creato usando due dispositivi di backup su nastro, tutte le operazioni di backup successive relative a tale set di supporti devono usare due dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-261">For example, if a media set was created by using two tape backup devices, all subsequent backup operations that involve the same media set must use two backup devices.</span></span>

-   <span data-ttu-id="9a509-262">Per il ripristino:</span><span class="sxs-lookup"><span data-stu-id="9a509-262">For restore:</span></span>

     <span data-ttu-id="9a509-263">Per qualsiasi ripristino da backup su disco e per qualsiasi ripristino online, tutti i gruppi di supporti devono essere montati simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="9a509-263">For any restore from disk backups and for any online restore, all the all media families must be concurrently mounted.</span></span> <span data-ttu-id="9a509-264">Per un ripristino offline da backup su nastro, è possibile elaborare i gruppi di supporti da un minor numero di dispositivi di backup.</span><span class="sxs-lookup"><span data-stu-id="9a509-264">For an offline restore from tape backups, you can process the media families from fewer backup devices.</span></span> <span data-ttu-id="9a509-265">Ogni gruppo di supporti deve essere elaborato completamente prima di avviare l'elaborazione di un altro gruppo di supporti.</span><span class="sxs-lookup"><span data-stu-id="9a509-265">Each media family must be processed completely before starting to process another media family.</span></span> <span data-ttu-id="9a509-266">I gruppi di supporti vengono sempre elaborati in parallelo, a meno che siano ripristinati con un dispositivo singolo.</span><span class="sxs-lookup"><span data-stu-id="9a509-266">Media families are always processed in parallel, unless they are being restored with a single device.</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="9a509-267">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="9a509-267">Related Tasks</span></span>
 <span data-ttu-id="9a509-268">**Per creare un nuovo set di supporti**</span><span class="sxs-lookup"><span data-stu-id="9a509-268">**To create a new media set**</span></span>

-   <span data-ttu-id="9a509-269">[Creazione di un backup completo del database &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opzione **Esegui backup in un nuovo set di supporti e cancella tutti i set di backup esistenti**)</span><span class="sxs-lookup"><span data-stu-id="9a509-269">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Back up to a new media set, and erase all existing backup sets** option)</span></span>

-   <span data-ttu-id="9a509-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opzione FORMAT)</span><span class="sxs-lookup"><span data-stu-id="9a509-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (FORMAT option)</span></span>

-   <xref:Microsoft.SqlServer.Management.Smo.Backup.FormatMedia%2A>

 <span data-ttu-id="9a509-271">**Per accodare un nuovo backup a un supporto esistente**</span><span class="sxs-lookup"><span data-stu-id="9a509-271">**To append a new backup to existing media**</span></span>

-   <span data-ttu-id="9a509-272">[Creazione di un backup completo del database &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opzione **Accoda al set di backup esistente**)</span><span class="sxs-lookup"><span data-stu-id="9a509-272">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Append to the existing backup set** option)</span></span>

-   <span data-ttu-id="9a509-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opzione NOINIT)</span><span class="sxs-lookup"><span data-stu-id="9a509-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (NOINIT option)</span></span>

 <span data-ttu-id="9a509-274">**Per sovrascrivere tutti i set di backup esistenti**</span><span class="sxs-lookup"><span data-stu-id="9a509-274">**To overwrite existing backup sets**</span></span>

-   <span data-ttu-id="9a509-275">[Creazione di un backup completo del database &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (opzione **Sovrascrivi tutti i set di backup esistenti**)</span><span class="sxs-lookup"><span data-stu-id="9a509-275">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Overwrite all existing backup sets** option)</span></span>

-   <span data-ttu-id="9a509-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (opzione INIT)</span><span class="sxs-lookup"><span data-stu-id="9a509-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (INIT option)</span></span>

 <span data-ttu-id="9a509-277">**Per impostare la data di scadenza**</span><span class="sxs-lookup"><span data-stu-id="9a509-277">**To set the expiration date**</span></span>

-   [<span data-ttu-id="9a509-278">Impostazione della data di scadenza di un backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-278">Set the Expiration Date on a Backup &#40;SQL Server&#41;</span></span>](set-the-expiration-date-on-a-backup-sql-server.md)

 <span data-ttu-id="9a509-279">**Per visualizzare i numeri di sequenza dei supporti e dei gruppi**</span><span class="sxs-lookup"><span data-stu-id="9a509-279">**To view the media sequence and family sequence numbers**</span></span>

-   [<span data-ttu-id="9a509-280">Visualizzare le proprietà e il contenuto di un dispositivo di backup logico &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-280">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   <span data-ttu-id="9a509-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (colonna **family_sequence_number**)</span><span class="sxs-lookup"><span data-stu-id="9a509-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (**family_sequence_number** column)</span></span>

 <span data-ttu-id="9a509-282">**Per visualizzare i set di backup in un determinato dispositivo di backup**</span><span class="sxs-lookup"><span data-stu-id="9a509-282">**To view the backup sets on a particular backup device**</span></span>

-   [<span data-ttu-id="9a509-283">Visualizzare i file di dati e i file di log in un set di backup &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-283">View the Data and Log Files in a Backup Set &#40;SQL Server&#41;</span></span>](view-the-data-and-log-files-in-a-backup-set-sql-server.md)

-   [<span data-ttu-id="9a509-284">Visualizzare le proprietà e il contenuto di un dispositivo di backup logico &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-284">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   [<span data-ttu-id="9a509-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)

 <span data-ttu-id="9a509-286">**Per leggere l'intestazione supporto specificata in un dispositivo di backup**</span><span class="sxs-lookup"><span data-stu-id="9a509-286">**To read the media header of the media on a backup device**</span></span>

-   [<span data-ttu-id="9a509-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9a509-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)


## <a name="see-also"></a><span data-ttu-id="9a509-288">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="9a509-288">See Also</span></span>
 <span data-ttu-id="9a509-289">[Eseguire il backup e il ripristino dei database di SQL Server](back-up-and-restore-of-sql-server-databases.md) [possibili errori relativi ai supporti durante il backup e il ripristino &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [cronologia di backup e le informazioni di intestazione &#40;](backup-history-and-header-information-sql-server.md) SQL Server&#41;&#40;[di](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [backup con mirroring](mirrored-backup-media-sets-sql-server.md) SQL Server&#41;&#40;[backup](/sql/t-sql/statements/backup-transact-sql)&#41;Transact-SQL &#40;[Restore&#41;](/sql/t-sql/statements/restore-statements-transact-sql) Transact [-SQL &#40;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="9a509-289">[Back Up and Restore of SQL Server Databases](back-up-and-restore-of-sql-server-databases.md) [Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md) [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) [BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) [RESTORE REWINDONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)</span></span>


