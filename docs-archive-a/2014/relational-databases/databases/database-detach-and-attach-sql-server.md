---
title: Collegamento e scollegamento di un database (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- upgrading databases
- databases [SQL Server], detaching
- detach database [SQL Server]
- databases [SQL Server], attaching
- removing databases
- transaction logs [SQL Server], detaching
- databases [SQL Server], removing
- restoring [SQL Server], attached databases
- transaction logs [SQL Server], attaching
- differential backups, after detaching
- moving databases
- attach database [SQL Server]
- detaching databases [SQL Server]
- differential base [SQL Server]
- attaching databases [SQL Server]
- databases [SQL Server], moving
ms.assetid: d0de0639-bc54-464e-98b1-6af22a27eb86
author: stevestein
ms.author: sstein
ms.openlocfilehash: 54eeeec995e390b71ce8871b680c26138fc88783
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87627822"
---
# <a name="database-detach-and-attach-sql-server"></a><span data-ttu-id="d8bfd-102">Collegamento e scollegamento di un database (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="d8bfd-102">Database Detach and Attach (SQL Server)</span></span>
  <span data-ttu-id="d8bfd-103">È possibile scollegare i file di dati e di log delle transazioni di un database e, successivamente, ricollegarli alla stessa istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]o a un'istanza diversa.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-103">The data and transaction log files of a database can be detached and then reattached to the same or another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d8bfd-104">Scollegare e collegare un database risulta utile se si desidera assegnare il database a un'istanza diversa di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] nello stesso computer oppure spostarlo.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-104">Detaching and attaching a database is useful if you want to change the database to a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the same computer or to move the database.</span></span>  
  
 <span data-ttu-id="d8bfd-105">Il formato di archiviazione su disco di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] è lo stesso sia negli ambienti a 64 bit sia negli ambienti a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-105">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on-disk storage format is the same in the 64-bit and 32-bit environments.</span></span> <span data-ttu-id="d8bfd-106">È pertanto possibile eseguire il collegamento tra ambienti a 32 bit e ambienti a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-106">Therefore, attach works across 32-bit and 64-bit environments.</span></span>  <span data-ttu-id="d8bfd-107">Un database scollegato da un'istanza del server in esecuzione in un ambiente può essere collegato a un'istanza del server in esecuzione in un altro ambiente.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-107">A database detached from a server instance running in one environment can be attached on a server instance that runs in another environment.</span></span>  
  
  
  
##  <a name="security"></a><a name="Security"></a> <span data-ttu-id="d8bfd-108">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="d8bfd-108">Security</span></span>  
 <span data-ttu-id="d8bfd-109">Le autorizzazioni di accesso ai file vengono impostate durante l'esecuzione di alcune operazioni del database, inclusi il collegamento e lo scollegamento.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-109">File access permissions are set during a number of database operations, including detaching or attaching a database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d8bfd-110">È consigliabile evitare di collegare o ripristinare database provenienti da origini sconosciute o non attendibili.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-110">We recommend that you do not attach or restore databases from unknown or untrusted sources.</span></span> <span data-ttu-id="d8bfd-111">Tali database possono contenere codice dannoso che potrebbe eseguire codice [!INCLUDE[tsql](../../includes/tsql-md.md)] indesiderato o causare errori modificando lo schema o la struttura fisica di database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-111">Such databases could contain malicious code that might execute unintended [!INCLUDE[tsql](../../includes/tsql-md.md)] code or cause errors by modifying the schema or the physical database structure.</span></span> <span data-ttu-id="d8bfd-112">Prima di utilizzare un database da un'origine sconosciuta o non attendibile, eseguire [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) sul database in un server non di produzione ed esaminare il codice contenuto nel database, ad esempio le stored procedure o altro codice definito dall'utente.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-112">Before you use a database from an unknown or untrusted source, run [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) on the database on a nonproduction server and also examine the code, such as stored procedures or other user-defined code, in the database.</span></span>  
  
##  <a name="detaching-a-database"></a><a name="DetachDb"></a> <span data-ttu-id="d8bfd-113">Scollegamento di un database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-113">Detaching a Database</span></span>  
 <span data-ttu-id="d8bfd-114">Lo scollegamento di un database determina la rimozione del database dall'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , mentre i file di dati e i file del log delle transazioni inclusi nel database non vengono modificati.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-114">Detaching a database removes it from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] but leaves the database intact within its data files and transaction log files.</span></span> <span data-ttu-id="d8bfd-115">È quindi possibile utilizzare questi file per collegare il database a qualsiasi istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], incluso il server dal quale è stato scollegato il database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-115">These files can then be used to attach the database to any instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], including the server from which the database was detached.</span></span>  
  
 <span data-ttu-id="d8bfd-116">Non è possibile scollegare un database quando si verifica una delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d8bfd-116">You cannot detach a database if any of the following are true:</span></span>  
  
-   <span data-ttu-id="d8bfd-117">Il database è replicato e pubblicato.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-117">The database is replicated and published.</span></span> <span data-ttu-id="d8bfd-118">Se replicato, il database deve essere non pubblicato.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-118">If replicated, the database must be unpublished.</span></span> <span data-ttu-id="d8bfd-119">Prima dello scollegamento, è necessario disabilitare la pubblicazione eseguendo [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-119">Before you can detach it, you must disable publishing by running [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d8bfd-120">Se non è possibile usare **sp_replicationdboption**, rimuovere la replica eseguendo [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-120">If you cannot use **sp_replicationdboption**, you can remove replication by running [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql).</span></span>  
  
-   <span data-ttu-id="d8bfd-121">Uno snapshot del database esiste nel database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-121">A database snapshot exists on the database.</span></span>  
  
     <span data-ttu-id="d8bfd-122">Prima di scollegare il database, è necessari eliminare tutti i relativi snapshot.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-122">Before you can detach the database, you must drop all of its snapshots.</span></span> <span data-ttu-id="d8bfd-123">Per altre informazioni, vedere [Eliminare uno snapshot del database &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md)o a un'istanza diversa.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-123">For more information, see [Drop a Database Snapshot &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d8bfd-124">Non è possibile scollegare o collegare uno snapshot del database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-124">A database snapshot cannot be detached or attached.</span></span>  
  
-   <span data-ttu-id="d8bfd-125">È in corso il mirroring del database in una sessione di mirroring.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-125">The database is being mirrored in a database mirroring session.</span></span>  
  
     <span data-ttu-id="d8bfd-126">Non è possibile scollegare il database fino al termine della sessione.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-126">The database cannot be detached unless the session is terminated.</span></span> <span data-ttu-id="d8bfd-127">Per altre informazioni, vedere [Rimozione del mirroring del database &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-127">For more information, see [Removing Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>  
  
-   <span data-ttu-id="d8bfd-128">Il database è sospetto.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-128">The database is suspect.</span></span> <span data-ttu-id="d8bfd-129">Non è possibile scollegare un database sospetto. Per poter eseguire lo scollegamento, è prima necessario attivare la modalità di emergenza.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-129">A suspect database cannot be detached; before you can detach it, you must put it into emergency mode.</span></span> <span data-ttu-id="d8bfd-130">Per ulteriori informazioni sull'attivazione della modalità di emergenza per un database, vedere [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-130">For more information about how to put a database into emergency mode, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="d8bfd-131">Il database è un database di sistema.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-131">The database is a system database.</span></span>  
  
### <a name="backup-and-restore-and-detach"></a><span data-ttu-id="d8bfd-132">Backup e ripristino e scollegamento</span><span class="sxs-lookup"><span data-stu-id="d8bfd-132">Backup and Restore and Detach</span></span>  
 <span data-ttu-id="d8bfd-133">Lo scollegamento di un database di sola lettura comporta la perdita di informazioni sulle basi differenziali dei backup differenziali.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-133">Detaching a read-only database loses information about the differential bases of differential backups.</span></span> <span data-ttu-id="d8bfd-134">Per altre informazioni, vedere [Backup differenziali &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-134">For more information, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
### <a name="responding-to-detach-errors"></a><span data-ttu-id="d8bfd-135">Risposta agli errori di scollegamento</span><span class="sxs-lookup"><span data-stu-id="d8bfd-135">Responding to Detach Errors</span></span>  
 <span data-ttu-id="d8bfd-136">Gli errori generati durante lo scollegamento di un database possono impedire la chiusura corretta del database e la ricompilazione del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-136">Errors produced while detaching a database can prevent the database from closing cleanly and the transaction log from being rebuilt.</span></span> <span data-ttu-id="d8bfd-137">Se viene visualizzato un messaggio di errore, eseguire gli interventi di correzione seguenti:</span><span class="sxs-lookup"><span data-stu-id="d8bfd-137">If you receive an error message, perform the following corrective actions:</span></span>  
  
1.  <span data-ttu-id="d8bfd-138">Ricollegare tutti file associati al database, non solo il file primario.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-138">Reattach all files associated with the database, not just the primary file.</span></span>  
  
2.  <span data-ttu-id="d8bfd-139">Risolvere il problema che ha causato l'errore.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-139">Resolve the problem that caused the error message.</span></span>  
  
3.  <span data-ttu-id="d8bfd-140">Scollegare di nuovo il database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-140">Detach the database again.</span></span>  
  
##  <a name="attaching-a-database"></a><a name="AttachDb"></a> <span data-ttu-id="d8bfd-141">Collegamento di un database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-141">Attaching a Database</span></span>  
 <span data-ttu-id="d8bfd-142">È possibile collegare un database di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] copiato o scollegato.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-142">You can attach a copied or detached [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="d8bfd-143">Quando si collega un' [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] istanza del server, i file di catalogo vengono collegati dal percorso precedente insieme agli altri file del database, come in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d8bfd-143">When you attach a [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="d8bfd-144">Per altre informazioni, vedere [Aggiornamento della ricerca full-text](../search/upgrade-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-144">For more information, see [Upgrade Full-Text Search](../search/upgrade-full-text-search.md).</span></span>  
  
 <span data-ttu-id="d8bfd-145">Durante il collegamento di un database è necessario che siano disponibili tutti i file di dati (file MDF e NDF).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-145">When you attach a database, all data files (MDF and NDF files) must be available.</span></span> <span data-ttu-id="d8bfd-146">Se un file di dati si trova in un percorso diverso rispetto al momento della creazione o dell'ultimo collegamento del database, è necessario specificare il percorso corrente.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-146">If any data file has a different path from when the database was first created or last attached, you must specify the current path of the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d8bfd-147">Se il file di dati primario in corso di collegamento è di sola lettura, nel [!INCLUDE[ssDE](../../includes/ssde-md.md)] si considera il database di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-147">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] assumes that the database is read-only.</span></span>  
  
 <span data-ttu-id="d8bfd-148">Quando un database crittografato viene collegato per la prima volta a un'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , è necessario che il proprietario del database apra la chiave master del database eseguendo l'istruzione Open Master Key DEcryption by password = **' *`password`* '**.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-148">When an encrypted database is first attached to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the database owner must open the master key of the database by executing the following statement: OPEN MASTER KEY DECRYPTION BY PASSWORD = **'*`password`*'**.</span></span> <span data-ttu-id="d8bfd-149">È consigliabile abilitare la decrittografia automatica della chiave master eseguendo l'istruzione ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-149">We recommend that you enable automatic decryption of the master key by executing the following statement: ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span></span> <span data-ttu-id="d8bfd-150">Per altre informazioni, vedere [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) e [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-150">For more information, see [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) and [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span></span>  
  
 <span data-ttu-id="d8bfd-151">I requisiti necessari per il collegamento dei file di log dipendono in parte dallo stato di lettura/scrittura o di sola lettura del database, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d8bfd-151">The requirement for attaching log files depends partly on whether the database is read-write or read-only, as follows:</span></span>  
  
-   <span data-ttu-id="d8bfd-152">Per i database di lettura/scrittura è in genere possibile collegare un file di log in una nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-152">For a read-write database, you can usually attach a log file in a new location.</span></span> <span data-ttu-id="d8bfd-153">In alcuni casi, tuttavia, per ricollegare un database sono necessari i relativi file di log esistenti.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-153">However, in some cases, reattaching a database requires its existing log files.</span></span> <span data-ttu-id="d8bfd-154">È pertanto importante mantenere sempre tutti i file di log scollegati finché il database non è stato collegato correttamente senza di essi.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-154">Therefore, it is important to always keep all the detached log files until the database has been successfully attached without them.</span></span>  
  
     <span data-ttu-id="d8bfd-155">Se un database di lettura/scrittura include un singolo file di log e non se ne specifica una nuova posizione, durante l'operazione di collegamento il file viene cercato nella vecchia posizione.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-155">If a read-write database has a single log file and you do not specify a new location for the log file, the attach operation looks in the old location for the file.</span></span> <span data-ttu-id="d8bfd-156">Se viene trovato, viene utilizzato il vecchio file di log, indipendentemente dal fatto che il database sia stato o meno chiuso correttamente.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-156">If it is found, the old log file is used, regardless of whether the database was shut down cleanly.</span></span> <span data-ttu-id="d8bfd-157">Se il vecchio file di log non viene trovato, il database è stato chiuso correttamente e non è presente una catena di log attiva, con l'operazione di collegamento si tenta di compilare un nuovo file di log per il database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-157">However, if the old log file is not found and if the database was shut down cleanly and has no active log chain, the attach operation attempts to build a new log file for the database.</span></span>  
  
-   <span data-ttu-id="d8bfd-158">Se il file di dati primario associato è di sola lettura, [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] non è in grado di aggiornare il percorso del log archiviato nel file primario.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-158">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] cannot update the log location stored in the primary file.</span></span>  
  
  
  
###  <a name="metadata-changes-on-attaching-a-database"></a><a name="Metadata"></a> <span data-ttu-id="d8bfd-159">Modifiche ai metadati durante il collegamento di un database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-159">Metadata Changes on Attaching a Database</span></span>  
 <span data-ttu-id="d8bfd-160">Quando si esegue lo scollegamento e il successivo ricollegamento di un database di sola lettura, le informazioni sul backup relative alla base differenziale corrente vanno perdute.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-160">When a read-only database is detached and then reattached, the backup information about the current differential base is lost.</span></span> <span data-ttu-id="d8bfd-161">La *base differenziale* è il backup completo più recente di tutti i dati nel database o in un subset dei file o dei filegroup del database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-161">The *differential base* is the most recent full backup of all the data in the database or in a subset of the files or filegroups of the database.</span></span> <span data-ttu-id="d8bfd-162">Senza le informazioni sul backup di base, il database **master** non risulta più sincronizzato con il database di sola lettura, per cui i backup differenziali eseguiti successivamente possono restituire risultati imprevisti.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-162">Without the base-backup information, the **master** database becomes unsynchronized with the read-only database, so differential backups taken thereafter may provide unexpected results.</span></span> <span data-ttu-id="d8bfd-163">Di conseguenza, se si utilizzano backup differenziali con un database di sola lettura, è consigliabile definire una nuova base differenziale eseguendo un backup completo dopo aver ricollegato il database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-163">Therefore, if you are using differential backups with a read-only database, you should establish a new differential base by taking a full backup after you reattach the database.</span></span> <span data-ttu-id="d8bfd-164">Per informazioni sui backup differenziali, vedere [Backup differenziali &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-164">For information about differential backups, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="d8bfd-165">Al momento del collegamento, viene eseguito l'avvio del database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-165">On attach, database startup occurs.</span></span> <span data-ttu-id="d8bfd-166">In genere, il collegamento di un database non altera lo stato in cui questo si trovava al momento dello scollegamento o della copia.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-166">Generally, attaching a database places it in the same state that it was in when it was detached or copied.</span></span> <span data-ttu-id="d8bfd-167">Tuttavia, le operazioni di collegamento e scollegamento comportano la disabilitazione del concatenamento della proprietà tra database relativo al database in oggetto.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-167">However, attach-and-detach operations both disable cross-database ownership chaining for the database.</span></span> <span data-ttu-id="d8bfd-168">Per informazioni su come abilitare il concatenamento, vedere [Opzione di configurazione del server cross db ownership chaining](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-168">For information about how to enable chaining, see [cross db ownership chaining Server Configuration Option](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span></span> <span data-ttu-id="d8bfd-169">Inoltre, quando il database viene collegato, l'opzione TRUSTWORTHY è impostata su OFF.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-169">Also, TRUSTWORTHY is set to OFF whenever the database is attached.</span></span> <span data-ttu-id="d8bfd-170">Per informazioni su come impostare TRUSTWORTHY su ON, vedere [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-170">For information about how to set TRUSTWORTHY to ON, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
### <a name="backup-and-restore-and-attach"></a><span data-ttu-id="d8bfd-171">Backup e ripristino e collegamento</span><span class="sxs-lookup"><span data-stu-id="d8bfd-171">Backup and Restore and Attach</span></span>  
 <span data-ttu-id="d8bfd-172">Analogamente a qualsiasi database completamente o parzialmente offline, non è possibile collegare un database con file in fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-172">Like any database that is fully or partially offline, a database with restoring files cannot be attached.</span></span> <span data-ttu-id="d8bfd-173">Se si arresta la sequenza di ripristino, è possibile collegare il database.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-173">If you stop the restore sequence, you can attach the database.</span></span> <span data-ttu-id="d8bfd-174">Sarà quindi possibile riavviare la sequenza di ripristino.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-174">Then, you can restart the restore sequence.</span></span>  
  
###  <a name="attaching-a-database-to-another-server-instance"></a><a name="OtherServerInstance"></a> <span data-ttu-id="d8bfd-175">Collegamento di un database a un'altra istanza del server</span><span class="sxs-lookup"><span data-stu-id="d8bfd-175">Attaching a Database to Another Server Instance</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d8bfd-176">Un database creato con una versione più recente di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] non può essere collegato con versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-176">A database created by a more recent version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot be attached in earlier versions.</span></span>  
  
 <span data-ttu-id="d8bfd-177">Quando si collega un database a un'altra istanza del server, per garantire un utilizzo coerente a utenti e applicazioni, potrebbe essere necessario ricreare alcuni o tutti i metadati per il database, ad esempio account di accesso e processi, nell'altra istanza del server.</span><span class="sxs-lookup"><span data-stu-id="d8bfd-177">When you attach a database onto another server instance, to provide a consistent experience to users and applications, you might have to re-create some or all of the metadata for the database, such as logins and jobs, on the other server instance.</span></span> <span data-ttu-id="d8bfd-178">Per altre informazioni, vedere [Gestione dei metadati quando si rende disponibile un database in un'altra istanza del server &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span><span class="sxs-lookup"><span data-stu-id="d8bfd-178">For more information, see [Manage Metadata When Making a Database Available on Another Server Instance &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="d8bfd-179">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="d8bfd-179">Related Tasks</span></span>  
 <span data-ttu-id="d8bfd-180">**Per scollegare un database**</span><span class="sxs-lookup"><span data-stu-id="d8bfd-180">**To detach a database**</span></span>  
  
-   [<span data-ttu-id="d8bfd-181">sp_detach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-181">sp_detach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql)  
  
-   [<span data-ttu-id="d8bfd-182">Scollegamento di un database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-182">Detach a Database</span></span>](detach-a-database.md)  
  
 <span data-ttu-id="d8bfd-183">**Per collegare un database**</span><span class="sxs-lookup"><span data-stu-id="d8bfd-183">**To attach a database**</span></span>  
  
-   [<span data-ttu-id="d8bfd-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
-   [<span data-ttu-id="d8bfd-185">Collegare un database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-185">Attach a Database</span></span>](attach-a-database.md)  
  
-   [<span data-ttu-id="d8bfd-186">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-186">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
-   [<span data-ttu-id="d8bfd-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
 <span data-ttu-id="d8bfd-188">**Per aggiornare un database utilizzando le operazioni di scollegamento e collegamento**</span><span class="sxs-lookup"><span data-stu-id="d8bfd-188">**To upgrade a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="d8bfd-189">Aggiornamento di un database utilizzando le operazioni di scollegamento e collegamento &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-189">Upgrade a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](upgrade-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="d8bfd-190">**Per spostare un database utilizzando le operazioni di scollegamento e collegamento**</span><span class="sxs-lookup"><span data-stu-id="d8bfd-190">**To move a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="d8bfd-191">Spostamento di un database tramite la funzionalità di scollegamento e collegamento &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-191">Move a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](move-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="d8bfd-192">**Per eliminare uno snapshot del database**</span><span class="sxs-lookup"><span data-stu-id="d8bfd-192">**To delete a database snapshot**</span></span>  
  
-   [<span data-ttu-id="d8bfd-193">Eliminare uno snapshot del database &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8bfd-193">Drop a Database Snapshot &#40;Transact-SQL&#41;</span></span>](drop-a-database-snapshot-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="d8bfd-194">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="d8bfd-194">See Also</span></span>  
 [<span data-ttu-id="d8bfd-195">Filegroup e file di database</span><span class="sxs-lookup"><span data-stu-id="d8bfd-195">Database Files and Filegroups</span></span>](database-files-and-filegroups.md)  
  
  
