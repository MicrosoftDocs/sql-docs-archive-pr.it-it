---
title: Filegroup e file di database | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- databases [SQL Server], files
- filegroups [SQL Server]
- transaction logs [SQL Server], about
- transaction logs [SQL Server], files
- .mdf files
- data files [SQL Server]
- default filegroups
- files [SQL Server], about files and filegroups
- secondary files [SQL Server]
- log files [SQL Server]
- .ndf files
- files [SQL Server]
- .ldf files
- database files [SQL Server]
- databases [SQL Server], filegroups
- filegroups [SQL Server], types
- primary filegroups [SQL Server]
- user-defined filegroups [SQL Server]
- filegroups [SQL Server], about filegroups
- primary files [SQL Server]
- file types [SQL Server]
ms.assetid: 9ca11918-480d-4838-9198-cec221ef6ad0
author: stevestein
ms.author: sstein
ms.openlocfilehash: 91e22e536a91878609feedf2977ffa7d78a54d61
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87627821"
---
# <a name="database-files-and-filegroups"></a><span data-ttu-id="174e8-102">Filegroup e file di database</span><span class="sxs-lookup"><span data-stu-id="174e8-102">Database Files and Filegroups</span></span>
  <span data-ttu-id="174e8-103">Ogni database di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] contiene almeno due file del sistema operativo: un file di dati e un file di log.</span><span class="sxs-lookup"><span data-stu-id="174e8-103">At a minimum, every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database has two operating system files: a data file and a log file.</span></span> <span data-ttu-id="174e8-104">I file di dati contengono dati e oggetti come tabelle, indici, stored procedure e viste.</span><span class="sxs-lookup"><span data-stu-id="174e8-104">Data files contain data and objects such as tables, indexes, stored procedures, and views.</span></span> <span data-ttu-id="174e8-105">I file di log contengono le informazioni necessarie per il recupero di tutte le transazioni del database.</span><span class="sxs-lookup"><span data-stu-id="174e8-105">Log files contain the information that is required to recover all transactions in the database.</span></span> <span data-ttu-id="174e8-106">I file di dati possono essere raggruppati in filegroup ai fini dell'allocazione e dell'amministrazione.</span><span class="sxs-lookup"><span data-stu-id="174e8-106">Data files can be grouped together in filegroups for allocation and administration purposes.</span></span>  
  
## <a name="database-files"></a><span data-ttu-id="174e8-107">File di database</span><span class="sxs-lookup"><span data-stu-id="174e8-107">Database Files</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="174e8-108">i database contengono tre tipi di file, come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="174e8-108">databases have three types of files, as shown in the following table.</span></span>  
  
|<span data-ttu-id="174e8-109">File</span><span class="sxs-lookup"><span data-stu-id="174e8-109">File</span></span>|<span data-ttu-id="174e8-110">Descrizione</span><span class="sxs-lookup"><span data-stu-id="174e8-110">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="174e8-111">Primaria</span><span class="sxs-lookup"><span data-stu-id="174e8-111">Primary</span></span>|<span data-ttu-id="174e8-112">Il file di dati primario contiene le informazioni di avvio del database e punta agli altri file del database.</span><span class="sxs-lookup"><span data-stu-id="174e8-112">The primary data file contains the startup information for the database and points to the other files in the database.</span></span> <span data-ttu-id="174e8-113">I dati e gli oggetti degli utenti possono essere archiviati in questo file o nei file di dati secondari.</span><span class="sxs-lookup"><span data-stu-id="174e8-113">User data and objects can be stored in this file or in secondary data files.</span></span> <span data-ttu-id="174e8-114">In ogni database è disponibile un unico file di dati primario.</span><span class="sxs-lookup"><span data-stu-id="174e8-114">Every database has one primary data file.</span></span> <span data-ttu-id="174e8-115">L'estensione consigliata per i file di dati primari è mdf.</span><span class="sxs-lookup"><span data-stu-id="174e8-115">The recommended file name extension for primary data files is .mdf.</span></span>|  
|<span data-ttu-id="174e8-116">Secondari</span><span class="sxs-lookup"><span data-stu-id="174e8-116">Secondary</span></span>|<span data-ttu-id="174e8-117">I file di dati secondari sono facoltativi e definiti dall'utente e vengono utilizzati per archiviare i dati dell'utente.</span><span class="sxs-lookup"><span data-stu-id="174e8-117">Secondary data files are optional, are user-defined, and store user data.</span></span> <span data-ttu-id="174e8-118">Possono essere utilizzati per suddividere i dati su più dischi, memorizzandoli in unità disco distinte.</span><span class="sxs-lookup"><span data-stu-id="174e8-118">Secondary files can be used to spread data across multiple disks by putting each file on a different disk drive.</span></span> <span data-ttu-id="174e8-119">Se un database supera le dimensioni massime consentite per un singolo file di Windows, è inoltre possibile utilizzare i file di dati secondari per consentire l'aumento di dimensioni del database.</span><span class="sxs-lookup"><span data-stu-id="174e8-119">Additionally, if a database exceeds the maximum size for a single Windows file, you can use secondary data files so the database can continue to grow.</span></span><br /><br /> <span data-ttu-id="174e8-120">L'estensione consigliata per i file di dati secondari è ndf.</span><span class="sxs-lookup"><span data-stu-id="174e8-120">The recommended file name extension for secondary data files is .ndf.</span></span>|  
|<span data-ttu-id="174e8-121">Log delle transazioni</span><span class="sxs-lookup"><span data-stu-id="174e8-121">Transaction Log</span></span>|<span data-ttu-id="174e8-122">I file di log delle transazioni contengono le informazioni necessarie per il recupero del database.</span><span class="sxs-lookup"><span data-stu-id="174e8-122">The transaction log files hold the log information that is used to recover the database.</span></span> <span data-ttu-id="174e8-123">È necessario che sia disponibile almeno un file di log per ogni database.</span><span class="sxs-lookup"><span data-stu-id="174e8-123">There must be at least one log file for each database.</span></span> <span data-ttu-id="174e8-124">L'estensione consigliata per i file di log è ldf.</span><span class="sxs-lookup"><span data-stu-id="174e8-124">The recommended file name extension for transaction logs is .ldf.</span></span>|  
  
 <span data-ttu-id="174e8-125">Ad esempio, è possibile creare un database semplice, denominato **Sales** , con un file primario che include tutti i dati e gli oggetti e un file di log che include le informazioni del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="174e8-125">For example, a simple database named **Sales** can be created that includes one primary file that contains all data and objects and a log file that contains the transaction log information.</span></span> <span data-ttu-id="174e8-126">In alternativa, è possibile creare un database più complesso, denominato **Orders** , con un file primario e cinque file secondari.</span><span class="sxs-lookup"><span data-stu-id="174e8-126">Alternatively, a more complex database named **Orders** can be created that includes one primary file and five secondary files.</span></span> <span data-ttu-id="174e8-127">I dati e gli oggetti all'interno del database vengono suddivisi nei sei file e i quattro file di log includono le informazioni del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="174e8-127">The data and objects within the database spread across all six files, and the four log files contain the transaction log information.</span></span>  
  
 <span data-ttu-id="174e8-128">Per impostazione predefinita, i dati e i log delle transazioni vengono archiviati nella stessa unità e nello stesso percorso.</span><span class="sxs-lookup"><span data-stu-id="174e8-128">By default, the data and transaction logs are put on the same drive and path.</span></span> <span data-ttu-id="174e8-129">Ciò consente la gestione nei sistemi a disco singolo,</span><span class="sxs-lookup"><span data-stu-id="174e8-129">This is done to handle single-disk systems.</span></span> <span data-ttu-id="174e8-130">ma può non essere la soluzione ottimale per gli ambienti di produzione.</span><span class="sxs-lookup"><span data-stu-id="174e8-130">However, this may not be optimal for production environments.</span></span> <span data-ttu-id="174e8-131">È consigliabile archiviare i dati e i file di log in dischi separati.</span><span class="sxs-lookup"><span data-stu-id="174e8-131">We recommend that you put data and log files on separate disks.</span></span>  
  
## <a name="filegroups"></a><span data-ttu-id="174e8-132">Filegroup</span><span class="sxs-lookup"><span data-stu-id="174e8-132">Filegroups</span></span>  
 <span data-ttu-id="174e8-133">Ogni database contiene un filegroup primario,</span><span class="sxs-lookup"><span data-stu-id="174e8-133">Every database has a primary filegroup.</span></span> <span data-ttu-id="174e8-134">che include il file di dati primario e gli eventuali file secondari non inclusi in altri filegroup.</span><span class="sxs-lookup"><span data-stu-id="174e8-134">This filegroup contains the primary data file and any secondary files that are not put into other filegroups.</span></span> <span data-ttu-id="174e8-135">È possibile creare filegroup definiti dall'utente per raggruppare i file di dati a fini amministrativi e di allocazione e posizione dei dati.</span><span class="sxs-lookup"><span data-stu-id="174e8-135">User-defined filegroups can be created to group data files together for administrative, data allocation, and placement purposes.</span></span>  
  
 <span data-ttu-id="174e8-136">Ad esempio, è possibile creare tre file, Data1.ndf, Data2.ndf e Data3.ndf su tre unità disco distinte e assegnarli al filegroup **fgroup1**.</span><span class="sxs-lookup"><span data-stu-id="174e8-136">For example, three files, Data1.ndf, Data2.ndf, and Data3.ndf, can be created on three disk drives, respectively, and assigned to the filegroup **fgroup1**.</span></span> <span data-ttu-id="174e8-137">È quindi possibile creare una tabella specifica nel filegroup **fgroup1**.</span><span class="sxs-lookup"><span data-stu-id="174e8-137">A table can then be created specifically on the filegroup **fgroup1**.</span></span> <span data-ttu-id="174e8-138">Le query sui dati della tabella verranno suddivise sui tre dischi con il conseguente miglioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="174e8-138">Queries for data from the table will be spread across the three disks; this will improve performance.</span></span> <span data-ttu-id="174e8-139">È possibile ottenere lo stesso risultato in termini di prestazioni utilizzando un singolo file creato su un set di striping RAID.</span><span class="sxs-lookup"><span data-stu-id="174e8-139">The same performance improvement can be accomplished by using a single file created on a RAID (redundant array of independent disks) stripe set.</span></span> <span data-ttu-id="174e8-140">File e filegroup, tuttavia, consentono di aggiungere nuovi file su nuovi dischi in modo semplice.</span><span class="sxs-lookup"><span data-stu-id="174e8-140">However, files and filegroups let you easily add new files to new disks.</span></span>  
  
 <span data-ttu-id="174e8-141">Tutti i file di dati vengono archiviati nei filegroup elencati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="174e8-141">All data files are stored in the filegroups listed in the following table.</span></span>  
  
|<span data-ttu-id="174e8-142">Filegroup</span><span class="sxs-lookup"><span data-stu-id="174e8-142">Filegroup</span></span>|<span data-ttu-id="174e8-143">Descrizione</span><span class="sxs-lookup"><span data-stu-id="174e8-143">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="174e8-144">Primaria</span><span class="sxs-lookup"><span data-stu-id="174e8-144">Primary</span></span>|<span data-ttu-id="174e8-145">Il filegroup che contiene il file primario.</span><span class="sxs-lookup"><span data-stu-id="174e8-145">The filegroup that contains the primary file.</span></span> <span data-ttu-id="174e8-146">Tutte le tabelle di sistema vengono allocate al filegroup primario.</span><span class="sxs-lookup"><span data-stu-id="174e8-146">All system tables are allocated to the primary filegroup.</span></span>|  
|<span data-ttu-id="174e8-147">Route definite dall'utente</span><span class="sxs-lookup"><span data-stu-id="174e8-147">User-defined</span></span>|<span data-ttu-id="174e8-148">Qualsiasi filegroup creato specificamente dall'utente in fase di creazione o di successiva modifica del database.</span><span class="sxs-lookup"><span data-stu-id="174e8-148">Any filegroup that is specifically created by the user when the user first creates or later modifies the database.</span></span>|  
  
### <a name="default-filegroup"></a><span data-ttu-id="174e8-149">Filegroup predefinito</span><span class="sxs-lookup"><span data-stu-id="174e8-149">Default Filegroup</span></span>  
 <span data-ttu-id="174e8-150">Gli oggetti di database creati senza specificare un filegroup di appartenenza vengono assegnati al filegroup predefinito.</span><span class="sxs-lookup"><span data-stu-id="174e8-150">When objects are created in the database without specifying which filegroup they belong to, they are assigned to the default filegroup.</span></span> <span data-ttu-id="174e8-151">Viene designato sempre e solo un filegroup predefinito.</span><span class="sxs-lookup"><span data-stu-id="174e8-151">At any time, exactly one filegroup is designated as the default filegroup.</span></span> <span data-ttu-id="174e8-152">I file nel filegroup predefinito devono essere di dimensioni sufficienti a contenere tutti i nuovi oggetti non allocati ad altri filegroup.</span><span class="sxs-lookup"><span data-stu-id="174e8-152">The files in the default filegroup must be large enough to hold any new objects not allocated to other filegroups.</span></span>  
  
 <span data-ttu-id="174e8-153">A meno che non venga modificato tramite l'istruzione ALTER DATABASE, PRIMARY è il filegroup predefinito.</span><span class="sxs-lookup"><span data-stu-id="174e8-153">The PRIMARY filegroup is the default filegroup unless it is changed by using the ALTER DATABASE statement.</span></span> <span data-ttu-id="174e8-154">Gli oggetti e le tabelle di sistema, tuttavia, restano allocati all'interno del filegroup PRIMARY e non all'interno del nuovo filegroup predefinito.</span><span class="sxs-lookup"><span data-stu-id="174e8-154">Allocation for the system objects and tables remains within the PRIMARY filegroup, not the new default filegroup.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="174e8-155">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="174e8-155">Related Content</span></span>  
 [<span data-ttu-id="174e8-156">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="174e8-156">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
 [<span data-ttu-id="174e8-157">Opzioni per file e filegroup ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="174e8-157">ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options)  
  
 [<span data-ttu-id="174e8-158">Collegamento e scollegamento di un database &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="174e8-158">Database Detach and Attach &#40;SQL Server&#41;</span></span>](database-detach-and-attach-sql-server.md)  
  
  
