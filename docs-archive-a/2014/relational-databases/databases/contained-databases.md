---
title: Database indipendenti | Microsoft Docs
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- contained database
- database_uncontained_usage event
- partially contained database
- contained database, understanding
ms.assetid: 36af59d7-ce96-4a02-8598-ffdd78cdc948
author: stevestein
ms.author: sstein
ms.openlocfilehash: 3efd231a1aa4d2b348bcfe887bd05825fcd40c90
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87718246"
---
# <a name="contained-databases"></a><span data-ttu-id="f8c8b-102">Database indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-102">Contained Databases</span></span>
  <span data-ttu-id="f8c8b-103">Un*database indipendente* è un database isolato dagli altri database e dall'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] che ospita il database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-103">A*contained database* is a database that is isolated from other databases and from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that hosts the database.</span></span>  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="f8c8b-104">offre all'utente quattro modalità per isolare il database dall'istanza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-104">helps user to isolate their database from the instance in 4 ways.</span></span>  
  
-   <span data-ttu-id="f8c8b-105">Molti dei metadati che descrivono un database vengono gestiti nel database,</span><span class="sxs-lookup"><span data-stu-id="f8c8b-105">Much of the metadata that describes a database is maintained in the database.</span></span> <span data-ttu-id="f8c8b-106">oltre a (o anziché) essere gestiti nel database master.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-106">(In addition to, or instead of, maintaining metadata in the master database.)</span></span>  
  
-   <span data-ttu-id="f8c8b-107">Tutti metadati sono definiti usando le stesse regole di confronto.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-107">All metadata are defined using the same collation.</span></span>  
  
-   <span data-ttu-id="f8c8b-108">L'autenticazione degli utenti può essere eseguita dal database, riducendo la dipendenza del database dagli account di accesso dell'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-108">User authentication can be performed by the database, reducing the databases dependency on the logins of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="f8c8b-109">L'ambiente [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] consente di creare report (DMV, XEvents e così via) e agire in base alle informazioni di indipendenza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-109">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] environment (DMV's, XEvents, etc.) reports and can act upon containment information.</span></span>  
  
 <span data-ttu-id="f8c8b-110">Alcune funzionalità dei database parzialmente indipendenti, ad esempio l'archiviazione dei metadati nel database, si applicano a tutti i database di [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f8c8b-110">Some features of partially contained databases, such as storing metadata in the database, apply to all [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] databases.</span></span> <span data-ttu-id="f8c8b-111">Alcuni vantaggi dei database parzialmente indipendenti, ad esempio l'autenticazione a livello di database e le regole di confronto del catalogo, devono essere abilitati per poter essere disponibili.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-111">Some benefits of partially contained databases, such as database level authentication and catalog collation, must be enabled before they are available.</span></span> <span data-ttu-id="f8c8b-112">L'indipendenza parziale si abilita tramite le istruzioni `CREATE DATABASE` e `ALTER DATABASE` o usando [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-112">Partial containment is enabled using the `CREATE DATABASE` and `ALTER DATABASE` statements or by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="f8c8b-113">Per altre informazioni sull'abilitazione dell'indipendenza parziale del database, vedere [Migrate to a Partially Contained Database](migrate-to-a-partially-contained-database.md).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-113">For more information about how to enable partial database containment, see [Migrate to a Partially Contained Database](migrate-to-a-partially-contained-database.md).</span></span>  
  
 <span data-ttu-id="f8c8b-114">In questo argomento sono contenute le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-114">This topic contains the following sections.</span></span>  
  
-   [<span data-ttu-id="f8c8b-115">Concetti di database parzialmente indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-115">Partially Contained Database Concepts</span></span>](#Concepts)  
  
-   [<span data-ttu-id="f8c8b-116">Contenimento</span><span class="sxs-lookup"><span data-stu-id="f8c8b-116">Containment</span></span>](#containment)  
  
-   [<span data-ttu-id="f8c8b-117">Vantaggi dell'utilizzo di database parzialmente indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-117">Benefits of using Partially Contained Databases</span></span>](#benefits)  
  
-   [<span data-ttu-id="f8c8b-118">Limitazioni</span><span class="sxs-lookup"><span data-stu-id="f8c8b-118">Limitations</span></span>](#Limitations)  
  
-   [<span data-ttu-id="f8c8b-119">Identificazione del contenimento del database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-119">Identifying Database Containment</span></span>](#Identifying)  
  
##  <a name="partially-contained-database-concepts"></a><a name="Concepts"></a> <span data-ttu-id="f8c8b-120">Concetti di database parzialmente indipendente</span><span class="sxs-lookup"><span data-stu-id="f8c8b-120">Partially Contained Database Concepts</span></span>  
 <span data-ttu-id="f8c8b-121">In un database totalmente indipendente sono incluse tutte le impostazioni del database e i metadati necessari per definire il database, mentre non sono presenti dipendenze di configurazione nell'istanza del [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] in cui è installato il database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-121">A fully contained database includes all the settings and metadata required to define the database and has no configuration dependencies on the instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] where the database is installed.</span></span> <span data-ttu-id="f8c8b-122">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], la separazione di un database dall'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] può risultare un'operazione dispendiosa in termini di tempo e richiedere una conoscenza dettagliata della relazione tra il database e l'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-122">In previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], separating a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] could be time consuming and required detailed knowledge of the relationship between the database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f8c8b-123">Con i database parzialmente indipendenti è più semplice la separazione di un database dall'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] e dagli altri database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-123">Partially contained databases make it easier to separate a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and other databases.</span></span>  
  
 <span data-ttu-id="f8c8b-124">In un database indipendente le funzionalità vengono considerate in relazione all'indipendenza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-124">The contained database considers features with regard to containment.</span></span> <span data-ttu-id="f8c8b-125">Qualsiasi entità definita dall'utente basata solo su funzioni che risiedono nel database è considerata completamente indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-125">Any user-defined entity that relies only on functions that reside in the database is considered fully contained.</span></span> <span data-ttu-id="f8c8b-126">Qualsiasi entità definita dall'utente basata su funzioni che risiedono all'esterno del database è considerata non indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-126">Any user-defined entity that relies on functions that reside outside the database is considered uncontained.</span></span> <span data-ttu-id="f8c8b-127">Per altre informazioni, vedere la sezione [Indipendenza](#containment) più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-127">(For more information, see the [Containment](#containment) section later in this topic.)</span></span>  
  
 <span data-ttu-id="f8c8b-128">I termini seguenti si applicano al modello di database indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-128">The following terms apply to the contained database model.</span></span>  
  
 <span data-ttu-id="f8c8b-129">Limite del database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-129">Database boundary</span></span>  
 <span data-ttu-id="f8c8b-130">Limite tra un database e l'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-130">The boundary between a database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f8c8b-131">Limite tra un database e altri database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-131">The boundary between a database and other databases.</span></span>  
  
 <span data-ttu-id="f8c8b-132">Contenuto</span><span class="sxs-lookup"><span data-stu-id="f8c8b-132">Contained</span></span>  
 <span data-ttu-id="f8c8b-133">Elemento completamente esistente entro il limite del database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-133">An element that exists entirely in the database boundary.</span></span>  
  
 <span data-ttu-id="f8c8b-134">Non contenuto</span><span class="sxs-lookup"><span data-stu-id="f8c8b-134">Uncontained</span></span>  
 <span data-ttu-id="f8c8b-135">Elemento che varca il limite del database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-135">An element that crosses the database boundary.</span></span>  
  
 <span data-ttu-id="f8c8b-136">Database non indipendente</span><span class="sxs-lookup"><span data-stu-id="f8c8b-136">Non-contained database</span></span>  
 <span data-ttu-id="f8c8b-137">Database con lo stato di indipendenza impostato su **NESSUNO**.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-137">A database that has containment set to **NONE**.</span></span> <span data-ttu-id="f8c8b-138">Tutti i database delle versioni precedenti di [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] sono non indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-138">All databases in versions earlier than [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] are non-contained.</span></span> <span data-ttu-id="f8c8b-139">Per impostazione predefinita, per tutti i database di [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] e versioni successive lo stato di indipendenza è impostato su **NESSUNO**.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-139">By default, all [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later databases have a containment set to **NONE**.</span></span>  
  
 <span data-ttu-id="f8c8b-140">Database parzialmente indipendente</span><span class="sxs-lookup"><span data-stu-id="f8c8b-140">Partially contained database</span></span>  
 <span data-ttu-id="f8c8b-141">Un database parzialmente indipendente è un database indipendente in cui sono supportate funzionalità che superano il limite del database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-141">A partially contained database is a contained database that can allow some features that cross the database boundary.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f8c8b-142">è inclusa la possibilità di determinare quando il limite di indipendenza viene superato.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-142">includes the ability to determine when the containment boundary is crossed.</span></span>  
  
 <span data-ttu-id="f8c8b-143">Utente indipendente</span><span class="sxs-lookup"><span data-stu-id="f8c8b-143">Contained user</span></span>  
 <span data-ttu-id="f8c8b-144">Per i database indipendenti sono previsti due tipi di utenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-144">There are two types of users for contained databases.</span></span>  
  
-   <span data-ttu-id="f8c8b-145">**Utente del database indipendente con password**</span><span class="sxs-lookup"><span data-stu-id="f8c8b-145">**Contained database user with password**</span></span>  
  
     <span data-ttu-id="f8c8b-146">Gli utenti del database indipendente con password vengono autenticati dal database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-146">Contained database users with passwords are authenticated by the database.</span></span>  
  
-   <span data-ttu-id="f8c8b-147">**Entità di Windows**</span><span class="sxs-lookup"><span data-stu-id="f8c8b-147">**Windows principals**</span></span>  
  
     <span data-ttu-id="f8c8b-148">Gli utenti di Windows autorizzati e i membri dei gruppi di Windows autorizzati possono connettersi direttamente al database e non devono disporre di account di accesso nel database **master** .</span><span class="sxs-lookup"><span data-stu-id="f8c8b-148">Authorized Windows users and members of authorized Windows groups can connect directly to the database and do not need logins in the **master** database.</span></span> <span data-ttu-id="f8c8b-149">Il database considera attendibile l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-149">The database trusts the authentication by Windows.</span></span>  
  
 <span data-ttu-id="f8c8b-150">Agli utenti con account di accesso nel database **master** può essere concesso l'accesso a un database indipendente, ma si creerebbe una dipendenza dall'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="f8c8b-150">Users based on logins in the **master** database can be granted access to a contained database, but that would create a dependency on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="f8c8b-151">Pertanto, per la creazione di utenti in base agli account di accesso, vedere il commento per i database parzialmente indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-151">Therefore, creating users based on logins see comment for partially contained databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f8c8b-152">L'abilitazione dei delegati di database parzialmente indipendenti controlla l'accesso all'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] per i proprietari del database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-152">Enabling partially contained databases delegates control over access to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the owners of the database.</span></span> <span data-ttu-id="f8c8b-153">Per altre informazioni, vedere [Security Best Practices with Contained Databases](security-best-practices-with-contained-databases.md).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-153">For more information, see [Security Best Practices with Contained Databases](security-best-practices-with-contained-databases.md).</span></span>  
  
 <span data-ttu-id="f8c8b-154">Limite del database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-154">Database Boundary</span></span>  
 <span data-ttu-id="f8c8b-155">Considerato che nei database parzialmente indipendenti le funzionalità del database sono separate da quelle dell'istanza, tra questi due elementi esiste una netta linea di demarcazione detta *limite del database*.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-155">Because partially contained databases separate the database functionality from those of the instance, there is a clearly defined line between these two elements called the *database boundary*.</span></span>  
  
 <span data-ttu-id="f8c8b-156">All'interno del limite del database è presente il *modello di database*, nel quale i database vengono sviluppati e gestiti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-156">Inside of the database boundary is the *database model*, where the databases are developed and managed.</span></span> <span data-ttu-id="f8c8b-157">Esempi di entità che si trovano all'interno del database includono tabelle di sistema, ad esempio **sys.tables**, utenti del database indipendente con password e tabelle utente nel database corrente a cui viene fatto riferimento con un nome in due parti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-157">Examples of entities located inside of the database include, system tables like **sys.tables**, contained database users with passwords, and user tables in the current database referenced by a two-part name.</span></span>  
  
 <span data-ttu-id="f8c8b-158">All'esterno del limite del database è presente il *modello di gestione*che si riferisce alla gestione e alle funzioni a livello di istanza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-158">Outside of the database boundary is the *management model*, which pertains to instance-level functions and management.</span></span> <span data-ttu-id="f8c8b-159">Esempi di entità che si trovano all'esterno del limite del database includono tabelle di sistema, ad esempio **sys.endpoints**, utenti su cui viene eseguito il mapping ad account di accesso e tabelle utente in un altro database a cui viene fatto riferimento con un nome in tre parti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-159">Examples of entities located outside of the database boundary include, system tables like **sys.endpoints**, users mapped to logins, and user tables in another database referenced by a three-part-name.</span></span>  
  
##  <a name="containment"></a><a name="containment"></a> <span data-ttu-id="f8c8b-160">Indipendenza</span><span class="sxs-lookup"><span data-stu-id="f8c8b-160">Containment</span></span>  
 <span data-ttu-id="f8c8b-161">Le entità utente completamente residenti all'interno del database sono considerate *indipendenti*.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-161">User entities that reside entirely within the database are considered *contained*.</span></span> <span data-ttu-id="f8c8b-162">Qualsiasi entità residente all'esterno del database o basata sull'interazione con le funzioni esterne al database è considerata *non indipendente*.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-162">Any entities that reside outside of the database, or rely on interaction with functions outside of the database, are considered *uncontained*.</span></span>  
  
 <span data-ttu-id="f8c8b-163">In generale, le entità utente rientrano nelle categorie di indipendenza seguenti:</span><span class="sxs-lookup"><span data-stu-id="f8c8b-163">In general, user entities fall into the following categories of containment:</span></span>  
  
-   <span data-ttu-id="f8c8b-164">Entità utente completamente indipendenti, ovvero quelle che non superano mai il limite del database, ad esempio sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-164">Fully contained user entities (those that never cross the database boundary), for example sys.indexes.</span></span> <span data-ttu-id="f8c8b-165">Qualsiasi struttura di codice in cui vengano usate queste funzionalità o qualsiasi oggetto che faccia riferimento solo a queste entità è anch'esso completamente contenuto.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-165">Any code that uses these features or any object that references only these entities is also fully contained.</span></span>  
  
-   <span data-ttu-id="f8c8b-166">Entità utente non indipendenti, ovvero quelle che superano il limite del database, ad esempio sys.server_principals o una stessa entità server (accesso).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-166">Uncontained user entities (those that cross the database boundary), for example sys.server_principals or a server principal (login) itself.</span></span> <span data-ttu-id="f8c8b-167">Qualsiasi struttura di codice in cui vengano usate queste entità o qualsiasi funzione che faccia riferimento a queste entità è anch'essa non indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-167">Any code that uses these entities or any functions that references these entities are uncontained.</span></span>  
  
###  <a name="partially-contained-database"></a><a name="partial"></a> <span data-ttu-id="f8c8b-168">Partially Contained Database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-168">Partially Contained Database</span></span>  
 <span data-ttu-id="f8c8b-169">La caratteristica di database indipendente è attualmente disponibile solo in uno stato parzialmente indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-169">The contained database feature is currently available only in a partially contained state.</span></span> <span data-ttu-id="f8c8b-170">Un database parzialmente indipendente è un database indipendente in cui è supportato l'utilizzo di funzionalità non indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-170">A partially contained database is a contained database that allows the use of uncontained features.</span></span>  
  
 <span data-ttu-id="f8c8b-171">Usare le viste [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) e [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) per restituire informazioni relative a oggetti o funzionalità non indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-171">Use the [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) and [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) view to return information about uncontained objects or features.</span></span> <span data-ttu-id="f8c8b-172">Determinando lo stato di indipendenza degli elementi del database, è possibile individuare gli oggetti o le funzionalità che è necessario sostituire o modificare ai fini dell'indipendenza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-172">By determining the containment status of the elements of your database, you can discover what objects or features must be replaced or altered to promote containment.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f8c8b-173">Poiché l'impostazione di indipendenza predefinita di determinati oggetti è **NESSUNO**, è possibile che in questa vista vengano restituiti falsi positivi.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-173">Because certain objects have a default containment setting of **NONE**, this view can return false positives.</span></span>  
  
 <span data-ttu-id="f8c8b-174">In termini di regole di confronto, il comportamento dei database parzialmente indipendenti è nettamente diverso da quello dei database non indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-174">The behavior of partially contained databases differs most distinctly from that of non-contained databases with regard to collation.</span></span> <span data-ttu-id="f8c8b-175">Per altre informazioni sui problemi relativi alle regole di confronto, vedere [Contained Database Collations](contained-database-collations.md).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-175">For more information about collation issues, see [Contained Database Collations](contained-database-collations.md).</span></span>  
  
##  <a name="benefits-of-using-partially-contained-databases"></a><a name="benefits"></a> <span data-ttu-id="f8c8b-176">Vantaggi dell'utilizzo di database parzialmente indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-176">Benefits of using Partially Contained Databases</span></span>  
 <span data-ttu-id="f8c8b-177">Alcuni problemi e complessità associati ai database non indipendenti possono essere risolti con un database parzialmente indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-177">There are issues and complications associated with the non-contained databases that can be resolved by using a partially contained database.</span></span>  
  
### <a name="database-movement"></a><span data-ttu-id="f8c8b-178">Spostamento di database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-178">Database Movement</span></span>  
 <span data-ttu-id="f8c8b-179">Uno dei problemi che si verifica quando un database viene spostato da un'istanza a un'altra è che importanti informazioni possono non essere disponibili.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-179">One of the problems that occurs when moving databases, is that some important information can be unavailable when a database is moved from one instance to another.</span></span> <span data-ttu-id="f8c8b-180">Ad esempio, le informazioni di accesso sono archiviate all'interno dell'istanza anziché nel database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-180">For example, login information is stored within the instance instead of in the database.</span></span> <span data-ttu-id="f8c8b-181">Quando si sposta un database non indipendente da un'istanza a un'altra di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], tali informazioni vengono ignorate.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-181">When you move a non-contained database from one instance to another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], this information is left behind.</span></span> <span data-ttu-id="f8c8b-182">È necessario identificare le informazioni mancanti e spostarle insieme al database nella nuova istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-182">You must identify the missing information and move it with your database to the new instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f8c8b-183">Questo processo può richiedere tempi lunghi e risultare difficile.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-183">This process can be difficult and time-consuming.</span></span>  
  
 <span data-ttu-id="f8c8b-184">È possibile archiviare importanti informazioni nel database parzialmente indipendente in modo che dopo lo spostamento le informazioni siano ancora disponibili nel database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-184">The partially contained database can store important information in the database so the database still has the information after it is moved.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f8c8b-185">Un database parzialmente indipendente può fornire la documentazione che descrive le funzionalità usate da un database che non possono essere separate dall'istanza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-185">A partially contained database can provide documentation describing those features that are used by a database that cannot be separated from the instance.</span></span> <span data-ttu-id="f8c8b-186">tra cui un elenco di altri database correlati, le impostazioni di sistema richieste dal database ma non indipendenti e così via.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-186">This includes a list of other interrelated databases, system settings that the database requires but cannot be contained, and so on.</span></span>  
  
### <a name="benefit-of-contained-database-users-with-alwayson"></a><span data-ttu-id="f8c8b-187">Vantaggi degli utenti di database indipendenti con AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="f8c8b-187">Benefit of Contained Database Users with AlwaysOn</span></span>  
 <span data-ttu-id="f8c8b-188">Riducendo i valori equivalenti all'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], i database parzialmente indipendenti possono essere utili durante il failover quando si usano [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f8c8b-188">By reducing the ties to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], partially contained databases can be useful during failover when you use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span></span>  
  
 <span data-ttu-id="f8c8b-189">La creazione di utenti indipendenti consente all'utente di connettersi direttamente al database indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-189">Creating contained users enables the user to connect directly to the contained database.</span></span> <span data-ttu-id="f8c8b-190">Si tratta di una funzionalità molto significativa in scenari a disponibilità elevata e di ripristino di emergenza, ad esempio in una soluzione AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-190">This is a very significant feature in high availability and disaster recovery scenarios such as in an AlwaysOn solution.</span></span> <span data-ttu-id="f8c8b-191">Se gli utenti sono indipendenti, in caso di failover può essere possibile connettersi al database secondario senza creare account di accesso sull'istanza che ospita il database secondario.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-191">If the users are contained users, in case of failover, people would be able to connect to the secondary without creating logins on the instance hosting the secondary.</span></span> <span data-ttu-id="f8c8b-192">Questo rappresenta un vantaggio immediato.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-192">This provides an immediate benefit.</span></span> <span data-ttu-id="f8c8b-193">Per altre informazioni, vedere [Panoramica di Gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) e [Prerequisiti, restrizioni e consigli per i gruppi di disponibilità AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-193">For more information, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) and [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
### <a name="initial-database-development"></a><span data-ttu-id="f8c8b-194">Sviluppo iniziale di database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-194">Initial Database Development</span></span>  
 <span data-ttu-id="f8c8b-195">Poiché è possibile che uno sviluppatore non conosca l'ambiente nel quale verrà distribuita un nuovo database, limitando gli impatti ambientali distribuiti al database sarà possibile ridurre il lavoro e le problematiche per lo sviluppatore.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-195">Because a developer may not know where a new database will be deployed, limiting the deployed environmental impacts on the database lessens the work and concern for the developer.</span></span> <span data-ttu-id="f8c8b-196">Nel modello non indipendente lo sviluppatore deve quindi considerare i possibili impatti ambientali sul nuovo database e programmare di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-196">In the non-contained model, the developer must consider possible environmental impacts on the new database and program accordingly.</span></span> <span data-ttu-id="f8c8b-197">Tuttavia, usando i database parzialmente indipendenti, gli sviluppatori possono rilevare l'impatto a livello di istanza sul database e le problematiche a livello di istanza che è necessario affrontare.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-197">However, by using partially contained databases, developers can detect instance-level impacts on the database and instance-level concerns for the developer.</span></span>  
  
### <a name="database-administration"></a><span data-ttu-id="f8c8b-198">Amministrazione del database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-198">Database Administration</span></span>  
 <span data-ttu-id="f8c8b-199">La gestione delle impostazioni del database nel database, anziché nel database master, consente a ogni proprietario di database di avere più controllo sul database, senza fornire al proprietario di database l'autorizzazione **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="f8c8b-199">Maintaining database settings in the database, instead of in the master database, lets each database owner have more control over their database, without giving the database owner **sysadmin** permission.</span></span>  
  
##  <a name="limitations"></a><a name="Limitations"></a> <span data-ttu-id="f8c8b-200">Limitazioni</span><span class="sxs-lookup"><span data-stu-id="f8c8b-200">Limitations</span></span>  
 <span data-ttu-id="f8c8b-201">I database parzialmente indipendenti non supportano le funzionalità indicate di seguito.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-201">Partially contained databases do not allow the following features.</span></span>  
  
-   <span data-ttu-id="f8c8b-202">Nei database parzialmente indipendenti non è supportato l'utilizzo di funzionalità di replica, di rilevamento modifiche o Change Data Capture.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-202">Partially contained databases cannot use replication, change data capture, or change tracking.</span></span>  
  
-   <span data-ttu-id="f8c8b-203">Procedure numerate</span><span class="sxs-lookup"><span data-stu-id="f8c8b-203">Numbered procedures</span></span>  
  
-   <span data-ttu-id="f8c8b-204">Oggetti associati a schema che dipendono da funzioni predefinite con modifiche delle regole di confronto</span><span class="sxs-lookup"><span data-stu-id="f8c8b-204">Schema-bound objects that depend on built-in functions with collation changes</span></span>  
  
-   <span data-ttu-id="f8c8b-205">Modifica di associazione a seguito di modifiche delle regole di confronto, inclusi riferimenti a oggetti, colonne, simboli o tipi.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-205">Binding change resulting from collation changes, including references to objects, columns, symbols, or types.</span></span>  
  
-   <span data-ttu-id="f8c8b-206">Replica, Change Data Capture e rilevamento modifiche.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-206">Replication, change data capture, and change tracking.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="f8c8b-207">Le stored procedure temporanee sono attualmente consentite.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-207">Temporary stored procedures are currently permitted.</span></span> <span data-ttu-id="f8c8b-208">Poiché le stored procedure temporanee violano l'indipendenza, non ne è previsto il supporto nelle versioni future del database indipendente.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-208">Because temporary stored procedures breach containment, they are not expected to be supported in future versions of contained database.</span></span>  
  
##  <a name="identifying-database-containment"></a><a name="Identifying"></a> <span data-ttu-id="f8c8b-209">Identificazione dell'indipendenza del database</span><span class="sxs-lookup"><span data-stu-id="f8c8b-209">Identifying Database Containment</span></span>  
 <span data-ttu-id="f8c8b-210">Per consentire l'identificazione dello stato di indipendenza del database sono disponibili due strumenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-210">There are two tools to help identify the containment status of the database.</span></span> <span data-ttu-id="f8c8b-211">[sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) è una vista in cui sono riportate tutte le entità potenzialmente non indipendenti nel database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-211">The [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) is a view that shows all the potentially uncontained entities in the database.</span></span> <span data-ttu-id="f8c8b-212">L'evento database_uncontained_usage si verifica quando viene identificata un'entità effettivamente non contenuta in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-212">The database_uncontained_usage event occurs when any actual uncontained entity is identified at run time.</span></span>  
  
### <a name="sysdm_db_uncontained_entities"></a><span data-ttu-id="f8c8b-213">sys.dm_db_uncontained_entities</span><span class="sxs-lookup"><span data-stu-id="f8c8b-213">sys.dm_db_uncontained_entities</span></span>  
 <span data-ttu-id="f8c8b-214">In questa vista vengono riportate tutte entità presenti nel database che potrebbero essere non indipendenti, ad esempio quelle che superano il limite del database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-214">This view shows any entities in the database that have the potential to be uncontained, such as those that cross-the database boundary.</span></span> <span data-ttu-id="f8c8b-215">Sono incluse le entità utente che potrebbero usare oggetti al di fuori del modello di database.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-215">This includes those user entities that may use objects outside the database model.</span></span> <span data-ttu-id="f8c8b-216">Poiché non è tuttavia possibile determinare lo stato di indipendenza di alcune entità, ad esempio quelle che usano SQL dinamico, fino alla fase di esecuzione, nella vista potrebbero essere presenti alcune entità che non sono effettivamente non indipendenti.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-216">However, because the containment of some entities (for example, those using dynamic SQL) cannot be determined until run time, the view may show some entities that are not actually uncontained.</span></span> <span data-ttu-id="f8c8b-217">Per altre informazioni, vedere [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f8c8b-217">For more information, see [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span></span>  
  
### <a name="database_uncontained_usage-event"></a><span data-ttu-id="f8c8b-218">database_uncontained_usage - evento</span><span class="sxs-lookup"><span data-stu-id="f8c8b-218">database_uncontained_usage event</span></span>  
 <span data-ttu-id="f8c8b-219">L'evento XEvent viene generato quando viene identificata un'entità non indipendente in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-219">This XEvent occurs whenever an uncontained entity is identified at run time.</span></span> <span data-ttu-id="f8c8b-220">Sono incluse le entità che hanno origine nel codice client.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-220">This includes entities originated in client code.</span></span> <span data-ttu-id="f8c8b-221">Questo evento XEvent verrà generato solo per le entità effettivamente non indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-221">This XEvent will occur only for actual uncontained entities.</span></span> <span data-ttu-id="f8c8b-222">e solo in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-222">However, the event only occurs at run time.</span></span> <span data-ttu-id="f8c8b-223">Pertanto, qualsiasi entità utente non indipendente non eseguita non sarà identificata da questo XEvent.</span><span class="sxs-lookup"><span data-stu-id="f8c8b-223">Therefore, any uncontained user entities you have not run will not be identified by this XEvent</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="f8c8b-224">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="f8c8b-224">Related Content</span></span>  
 [<span data-ttu-id="f8c8b-225">Funzionalità modificate &#40;database indipendente&#41;</span><span class="sxs-lookup"><span data-stu-id="f8c8b-225">Modified Features &#40;Contained Database&#41;</span></span>](modified-features-contained-database.md)  
  
 [<span data-ttu-id="f8c8b-226">Regole di confronto dei database indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-226">Contained Database Collations</span></span>](contained-database-collations.md)  
  
 [<span data-ttu-id="f8c8b-227">Procedure consigliate per la sicurezza in database indipendenti</span><span class="sxs-lookup"><span data-stu-id="f8c8b-227">Security Best Practices with Contained Databases</span></span>](security-best-practices-with-contained-databases.md)  
  
 [<span data-ttu-id="f8c8b-228">Eseguire la migrazione in un database parzialmente indipendente</span><span class="sxs-lookup"><span data-stu-id="f8c8b-228">Migrate to a Partially Contained Database</span></span>](migrate-to-a-partially-contained-database.md)  
  
  
