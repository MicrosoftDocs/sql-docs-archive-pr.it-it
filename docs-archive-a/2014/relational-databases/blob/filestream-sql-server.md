---
title: FILESTREAM (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: filestream
ms.topic: conceptual
helpviewer_keywords:
- FILESTREAM [SQL Server]
- FILESTREAM [SQL Server], about
- FILESTREAM [SQL Server], overview
ms.assetid: 9a5a8166-bcbe-4680-916c-26276253eafa
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 971f45fd69f381a8997bb2f8f08444f4d9c107c4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87723943"
---
# <a name="filestream-sql-server"></a><span data-ttu-id="7982a-102">FILESTREAM (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7982a-102">FILESTREAM (SQL Server)</span></span>
  <span data-ttu-id="7982a-103">FILESTREAM consente l'archiviazione nel file system di dati non strutturati, ad esempio documenti e immagini, da parte delle applicazioni basate su [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7982a-103">FILESTREAM enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]-based applications to store unstructured data, such as documents and images, on the file system.</span></span> <span data-ttu-id="7982a-104">Le applicazioni possono sfruttare le numerose API di flusso e le prestazioni del file system e contemporaneamente mantenere la coerenza transazionale tra i dati non strutturati e i corrispondenti dati strutturati.</span><span class="sxs-lookup"><span data-stu-id="7982a-104">Applications can leverage the rich streaming APIs and performance of the file system and at the same time maintain transactional consistency between the unstructured data and corresponding structured data.</span></span>  
  
 <span data-ttu-id="7982a-105">FILESTREAM integra [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] con un file system NTFS archiviando `varbinary(max)` dati BLOB (Binary Large Object) come file nel file System.</span><span class="sxs-lookup"><span data-stu-id="7982a-105">FILESTREAM integrates the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] with an NTFS file system by storing `varbinary(max)` binary large object (BLOB) data as files on the file system.</span></span> [!INCLUDE[tsql](../../includes/tsql-md.md)] <span data-ttu-id="7982a-106">offre istruzioni che consentono di inserire, aggiornare ed eseguire query, ricerche e back up dei dati FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-106">statements can insert, update, query, search, and back up FILESTREAM data.</span></span> <span data-ttu-id="7982a-107">Le interfacce del file system Win32 forniscono accesso ai dati tramite flusso.</span><span class="sxs-lookup"><span data-stu-id="7982a-107">Win32 file system interfaces provide streaming access to the data.</span></span>  
  
 <span data-ttu-id="7982a-108">FILESTREAM utilizza la cache di sistema NT per memorizzare nella cache i dati del file.</span><span class="sxs-lookup"><span data-stu-id="7982a-108">FILESTREAM uses the NT system cache for caching file data.</span></span> <span data-ttu-id="7982a-109">Ciò consente di ridurre qualsiasi effetto che i dati FILESTREAM potrebbero avere sulle prestazioni del [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7982a-109">This helps reduce any effect that FILESTREAM data might have on [!INCLUDE[ssDE](../../includes/ssde-md.md)] performance.</span></span> <span data-ttu-id="7982a-110">Il pool di buffer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] non è utilizzato; pertanto questa memoria è disponibile per l'elaborazione di query.</span><span class="sxs-lookup"><span data-stu-id="7982a-110">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool is not used; therefore, this memory is available for query processing.</span></span>  
  
 <span data-ttu-id="7982a-111">Poiché FILESTREAM non viene abilitato automaticamente al momento dell'installazione o dell'aggiornamento di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)],</span><span class="sxs-lookup"><span data-stu-id="7982a-111">FILESTREAM is not automatically enabled when you install or upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7982a-112">è necessario abilitarlo usando Gestione configurazione SQL Server e [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7982a-112">You must enable FILESTREAM by using SQL Server Configuration Manager and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="7982a-113">Per utilizzare FILESTREAM, è necessario creare o modificare un database in modo che contenga un tipo speciale di filegroup</span><span class="sxs-lookup"><span data-stu-id="7982a-113">To use FILESTREAM, you must create or modify a database to contain a special type of filegroup.</span></span> <span data-ttu-id="7982a-114">e quindi creare o modificare una tabella in modo che contenga una colonna `varbinary(max)` con l'attributo FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-114">Then, create or modify a table so that it contains a `varbinary(max)` column with the FILESTREAM attribute.</span></span> <span data-ttu-id="7982a-115">Dopo avere completato queste attività, è possibile usare [!INCLUDE[tsql](../../includes/tsql-md.md)] e Win32 per gestire i dati FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-115">After you complete these tasks, you can use [!INCLUDE[tsql](../../includes/tsql-md.md)] and Win32 to manage the FILESTREAM data.</span></span>  
  
 <span data-ttu-id="7982a-116">Per ulteriori informazioni sull'installazione e sull'utilizzo di FILESTREAM, vedere l'elenco di [attività correlate](#reltasks).</span><span class="sxs-lookup"><span data-stu-id="7982a-116">For more information about installing and using FILESTREAM, see the list of [Related Tasks](#reltasks).</span></span>  
  
##  <a name="when-to-use-filestream"></a><a name="whentouse"></a><span data-ttu-id="7982a-117">Quando utilizzare FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-117">When to Use FILESTREAM</span></span>  
 <span data-ttu-id="7982a-118">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], i BLOB possono essere dati standard `varbinary(max)` che archiviano i dati nelle tabelle oppure oggetti `varbinary(max)` di FILESTREAM che archiviano i dati nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-118">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], BLOBs can be standard `varbinary(max)` data that stores the data in tables, or FILESTREAM `varbinary(max)` objects that store the data in the file system.</span></span> <span data-ttu-id="7982a-119">La dimensione e l'utilizzo dei dati determinano se è necessario utilizzare l'archiviazione nel database o l'archiviazione nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-119">The size and use of the data determines whether you should use database storage or file system storage.</span></span> <span data-ttu-id="7982a-120">Se le condizioni indicate di seguito vengono soddisfatte, è necessario utilizzare FILESTREAM:</span><span class="sxs-lookup"><span data-stu-id="7982a-120">If the following conditions are true, you should consider using FILESTREAM:</span></span>  
  
-   <span data-ttu-id="7982a-121">Gli oggetti che si stanno archiviando sono, in media, più grandi di 1 MB.</span><span class="sxs-lookup"><span data-stu-id="7982a-121">Objects that are being stored are, on average, larger than 1 MB.</span></span>  
  
-   <span data-ttu-id="7982a-122">La rapidità dell'accesso in lettura è importante.</span><span class="sxs-lookup"><span data-stu-id="7982a-122">Fast read access is important.</span></span>  
  
-   <span data-ttu-id="7982a-123">Si stanno sviluppando applicazioni che utilizzano un livello intermedio per la logica dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-123">You are developing applications that use a middle tier for application logic.</span></span>  
  
 <span data-ttu-id="7982a-124">Per oggetti più piccoli, l'archiviazione di BLOB `varbinary(max)` nel database offre spesso migliori prestazioni di flusso.</span><span class="sxs-lookup"><span data-stu-id="7982a-124">For smaller objects, storing `varbinary(max)` BLOBs in the database often provides better streaming performance.</span></span>  
  
  
##  <a name="filestream-storage"></a><a name="storage"></a><span data-ttu-id="7982a-125">Archiviazione FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-125">FILESTREAM Storage</span></span>  
 <span data-ttu-id="7982a-126">L'archiviazione FILESTREAM viene implementata come una colonna `varbinary(max)` nella quale i dati sono archiviati come BLOB nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-126">FILESTREAM storage is implemented as a `varbinary(max)` column in which the data is stored as BLOBs in the file system.</span></span> <span data-ttu-id="7982a-127">Le dimensioni dei BLOB sono limitate solo dalle dimensioni del volume del file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-127">The sizes of the BLOBs are limited only by the volume size of the file system.</span></span> <span data-ttu-id="7982a-128">Il limite `varbinary(max)` standard di 2 GB delle dimensioni del file non si applica ai BLOB archiviati nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-128">The standard `varbinary(max)` limitation of 2-GB file sizes does not apply to BLOBs that are stored in the file system.</span></span>  
  
 <span data-ttu-id="7982a-129">Per indicare che una colonna deve archiviare dati nel file system, specificare l'attributo FILESTREAM in una colonna `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="7982a-129">To specify that a column should store data on the file system, specify the FILESTREAM attribute on a `varbinary(max)` column.</span></span> <span data-ttu-id="7982a-130">In questo modo [!INCLUDE[ssDE](../../includes/ssde-md.md)] archivia tutti i dati per quella colonna nel file system, ma non nel file di database.</span><span class="sxs-lookup"><span data-stu-id="7982a-130">This causes the [!INCLUDE[ssDE](../../includes/ssde-md.md)] to store all data for that column on the file system, but not in the database file.</span></span>  
  
 <span data-ttu-id="7982a-131">I dati FILESTREAM devono essere archiviati nei filegroup FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-131">FILESTREAM data must be stored in FILESTREAM filegroups.</span></span> <span data-ttu-id="7982a-132">Un filegroup FILESTREAM è un filegroup speciale che contiene directory del file system anziché dei file stessi.</span><span class="sxs-lookup"><span data-stu-id="7982a-132">A FILESTREAM filegroup is a special filegroup that contains file system directories instead of the files themselves.</span></span> <span data-ttu-id="7982a-133">Queste directory del file system vengono chiamate *contenitori di dati*.</span><span class="sxs-lookup"><span data-stu-id="7982a-133">These file system directories are called *data containers*.</span></span> <span data-ttu-id="7982a-134">I contenitori di dati rappresentano l'interfaccia tra archiviazione nel [!INCLUDE[ssDE](../../includes/ssde-md.md)] e archiviazione nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-134">Data containers are the interface between [!INCLUDE[ssDE](../../includes/ssde-md.md)] storage and file system storage.</span></span>  
  
 <span data-ttu-id="7982a-135">Se si utilizza l'archiviazione FILESTREAM, considerare gli aspetti indicati di seguito:</span><span class="sxs-lookup"><span data-stu-id="7982a-135">When you use FILESTREAM storage, consider the following:</span></span>  
  
-   <span data-ttu-id="7982a-136">Se una tabella contiene una colonna FILESTREAM, ogni riga deve avere un ID riga univoco con valore diverso da Null.</span><span class="sxs-lookup"><span data-stu-id="7982a-136">When a table contains a FILESTREAM column, each row must have a nonnull unique row ID.</span></span>  
  
-   <span data-ttu-id="7982a-137">È possibile aggiungere più contenitori di dati a un filegroup FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-137">Multiple data containers can be added to a FILESTREAM filegroup.</span></span>  
  
-   <span data-ttu-id="7982a-138">I contenitori di dati FILESTREAM non possono essere nidificati.</span><span class="sxs-lookup"><span data-stu-id="7982a-138">FILESTREAM data containers cannot be nested.</span></span>  
  
-   <span data-ttu-id="7982a-139">Se si utilizza il clustering di failover, i filegroup FILESTREAM devono trovarsi su risorse disco condivise.</span><span class="sxs-lookup"><span data-stu-id="7982a-139">When you are using failover clustering, the FILESTREAM filegroups must be on shared disk resources.</span></span>  
  
-   <span data-ttu-id="7982a-140">I filegroup FILESTREAM possono essere su volumi compressi.</span><span class="sxs-lookup"><span data-stu-id="7982a-140">FILESTREAM filegroups can be on compressed volumes.</span></span>  
  
### <a name="integrated-management"></a><span data-ttu-id="7982a-141">Gestione integrata</span><span class="sxs-lookup"><span data-stu-id="7982a-141">Integrated Management</span></span>  
 <span data-ttu-id="7982a-142">Poiché FILESTREAM viene implementato come colonna `varbinary(max)` e integrato direttamente nel [!INCLUDE[ssDE](../../includes/ssde-md.md)], la maggior parte degli strumenti e delle funzioni di gestione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] funziona senza alcuna modifica dei dati FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-142">Because FILESTREAM is implemented as a `varbinary(max)` column and integrated directly into the [!INCLUDE[ssDE](../../includes/ssde-md.md)], most [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] management tools and functions work without modification for FILESTREAM data.</span></span> <span data-ttu-id="7982a-143">Ad esempio, è possibile utilizzare tutti i modelli di backup e di recupero con i dati FILESTREAM e per questo viene eseguito il backup con i dati strutturati nel database.</span><span class="sxs-lookup"><span data-stu-id="7982a-143">For example, you can use all backup and recovery models with FILESTREAM data, and the FILESTREAM data is backed up with the structured data in the database.</span></span> <span data-ttu-id="7982a-144">Se non si desidera eseguire il backup dei dati FILESTREAM con i dati relazionali, è possibile utilizzare un backup parziale per escludere i filegroup FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-144">If you do not want to back up FILESTREAM data with relational data, you can use a partial backup to exclude FILESTREAM filegroups.</span></span>  

  
### <a name="integrated-security"></a><span data-ttu-id="7982a-145">Sicurezza integrata</span><span class="sxs-lookup"><span data-stu-id="7982a-145">Integrated Security</span></span>  
 <span data-ttu-id="7982a-146">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], i dati FILESTREAM sono protetti così come avviene per gli altri dati, ossia tramite la concessione di autorizzazioni ai livelli di tabella o colonna.</span><span class="sxs-lookup"><span data-stu-id="7982a-146">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], FILESTREAM data is secured just like other data is secured: by granting permissions at the table or column levels.</span></span> <span data-ttu-id="7982a-147">Se un utente dispone delle autorizzazioni per la colonna FILESTREAM in una tabella, può aprire i file associati.</span><span class="sxs-lookup"><span data-stu-id="7982a-147">If a user has permission to the FILESTREAM column in a table, the user can open the associated files.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7982a-148">La crittografia non è supportata sui dati FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-148">Encryption is not supported on FILESTREAM data.</span></span>  
  
 <span data-ttu-id="7982a-149">Solo all'account con il quale viene eseguito l'account del servizio [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sono concesse autorizzazioni NTFS al contenitore FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-149">Only the account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account runs is granted NTFS permissions to the FILESTREAM container.</span></span> <span data-ttu-id="7982a-150">È consigliabile non concedere altre autorizzazioni per il contenitore di dati ad altri account.</span><span class="sxs-lookup"><span data-stu-id="7982a-150">We recommend that no other account be granted permissions on the data container.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7982a-151">Gli account di accesso SQL non funzioneranno con contenitori FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-151">SQL logins will not work with FILESTREAM containers.</span></span> <span data-ttu-id="7982a-152">Solo l'autenticazione NTFS funziona con contenitori FILESTREAM.</span><span class="sxs-lookup"><span data-stu-id="7982a-152">Only NTFS authentication will work with FILESTREAM containers.</span></span>  
  
##  <a name="accessing-blob-data-with-transact-sql-and-file-system-streaming-access"></a><a name="dual"></a> <span data-ttu-id="7982a-153">Accesso a dati BLOB con Transact-SQL e accesso tramite flusso al file system</span><span class="sxs-lookup"><span data-stu-id="7982a-153">Accessing BLOB Data with Transact-SQL and File System Streaming Access</span></span>  
 <span data-ttu-id="7982a-154">Dopo avere archiviato dati in una colonna FILESTREAM, è possibile accedere ai file usando le transazioni [!INCLUDE[tsql](../../includes/tsql-md.md)] oppure le API Win32.</span><span class="sxs-lookup"><span data-stu-id="7982a-154">After you store data in a FILESTREAM column, you can access the files by using [!INCLUDE[tsql](../../includes/tsql-md.md)] transactions or by using Win32 APIs.</span></span>  
  
### <a name="transact-sql-access"></a><span data-ttu-id="7982a-155">Accesso Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7982a-155">Transact-SQL Access</span></span>  
 <span data-ttu-id="7982a-156">Utilizzando [!INCLUDE[tsql](../../includes/tsql-md.md)], è possibile inserire, aggiornare ed eliminare i dati FILESTREAM:</span><span class="sxs-lookup"><span data-stu-id="7982a-156">By using [!INCLUDE[tsql](../../includes/tsql-md.md)], you can insert, update, and delete FILESTREAM data:</span></span>  
  
-   <span data-ttu-id="7982a-157">È possibile utilizzare un'operazione di inserimento per il popolamento preliminare di un campo FILESTREAM con un valore null, un valore vuoto, o dati inline relativamente brevi.</span><span class="sxs-lookup"><span data-stu-id="7982a-157">You can use an insert operation to prepopulate a FILESTREAM field with a null value, empty value, or relatively short inline data.</span></span> <span data-ttu-id="7982a-158">Tuttavia, una grande quantità di dati viene trasmessa in modo più efficace in un file che utilizza interfacce Win32.</span><span class="sxs-lookup"><span data-stu-id="7982a-158">However, a large amount of data is more efficiently streamed into a file that uses Win32 interfaces.</span></span>  
  
-   <span data-ttu-id="7982a-159">Quando si aggiorna un campo FILESTREAM, si modificano i dati BLOB sottostanti nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-159">When you update a FILESTREAM field, you modify the underlying BLOB data in the file system.</span></span> <span data-ttu-id="7982a-160">Quando un campo FILESTREAM viene impostato su NULL, i dati BLOB associati al campo vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="7982a-160">When a FILESTREAM field is set to NULL, the BLOB data associated with the field is deleted.</span></span> <span data-ttu-id="7982a-161">Non è possibile usare un aggiornamento Chunked di [!INCLUDE[tsql](../../includes/tsql-md.md)] , implementato come UPDATE **.** Write() per eseguire aggiornamenti parziali dei dati.</span><span class="sxs-lookup"><span data-stu-id="7982a-161">You cannot use a [!INCLUDE[tsql](../../includes/tsql-md.md)] chunked update, implemented as UPDATE **.** Write(), to perform partial updates to the data.</span></span>  
  
-   <span data-ttu-id="7982a-162">Quando si elimina una riga oppure si elimina o si tronca una tabella che contiene i dati FILESTREAM, si eliminano i dati BLOB sottostanti nel file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-162">When you delete a row or delete or truncate a table that contains FILESTREAM data, you delete the underlying BLOB data in the file system.</span></span>  
  
### <a name="file-system-streaming-access"></a><span data-ttu-id="7982a-163">Accesso di flusso al file system</span><span class="sxs-lookup"><span data-stu-id="7982a-163">File System Streaming Access</span></span>  
 <span data-ttu-id="7982a-164">Il supporto di flusso di Win32 funziona nel contesto di una transazione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7982a-164">The Win32 streaming support works in the context of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] transaction.</span></span> <span data-ttu-id="7982a-165">All'interno di una transazione, è possibile utilizzare funzioni FILESTREAM per ottenere un percorso di file system UNC logico di un file.</span><span class="sxs-lookup"><span data-stu-id="7982a-165">Within a transaction, you can use FILESTREAM functions to obtain a logical UNC file system path of a file.</span></span> <span data-ttu-id="7982a-166">Si usa quindi l'API OpenSqlFilestream per ottenere un handle di file.</span><span class="sxs-lookup"><span data-stu-id="7982a-166">You then use the OpenSqlFilestream API to obtain a file handle.</span></span> <span data-ttu-id="7982a-167">Questo handle può essere usato quindi dalle interfacce di flusso dei file Win32, ad esempio ReadFile() e WriteFile(), per accedere e aggiornare il file con il file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-167">This handle can then be used by Win32 file streaming interfaces, such as ReadFile() and WriteFile(), to access and update the file by way of the file system.</span></span>  
  
 <span data-ttu-id="7982a-168">Dato che le operazioni con i file sono transazionali, non è possibile eliminare o rinominare i file FILESTREAM tramite il file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-168">Because file operations are transactional, you cannot delete or rename FILESTREAM files through the file system.</span></span>  
  
 <span data-ttu-id="7982a-169">**Modello istruzione**</span><span class="sxs-lookup"><span data-stu-id="7982a-169">**Statement Model**</span></span>  
  
 <span data-ttu-id="7982a-170">L'accesso al file system di FILESTREAM consente di modellare un'istruzione [!INCLUDE[tsql](../../includes/tsql-md.md)] utilizzando le operazioni di apertura e chiusura dei file.</span><span class="sxs-lookup"><span data-stu-id="7982a-170">The FILESTREAM file system access models a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement by using file open and close.</span></span> <span data-ttu-id="7982a-171">L'istruzione si avvia quando un handle di file è aperto e termina quando l'handle è chiuso.</span><span class="sxs-lookup"><span data-stu-id="7982a-171">The statement starts when a file handle is opened and ends when the handle is closed.</span></span> <span data-ttu-id="7982a-172">Ad esempio, se un handle di scrittura è chiuso, qualsiasi possibile trigger AFTER registrato nella tabella si attiva come se un'istruzione UPDATE fosse completata.</span><span class="sxs-lookup"><span data-stu-id="7982a-172">For example, when a write handle is closed, any possible AFTER trigger that is registered on the table fires as if an UPDATE statement is completed.</span></span>  
  
 <span data-ttu-id="7982a-173">**Spazio dei nomi dell'archiviazione**</span><span class="sxs-lookup"><span data-stu-id="7982a-173">**Storage Namespace**</span></span>  
  
 <span data-ttu-id="7982a-174">In FILESTREAM, [!INCLUDE[ssDE](../../includes/ssde-md.md)] consente di controllare lo spazio dei nomi del file system fisico di BLOB.</span><span class="sxs-lookup"><span data-stu-id="7982a-174">In FILESTREAM, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] controls the BLOB physical file system namespace.</span></span> <span data-ttu-id="7982a-175">Una nuova funzione intrinseca [PathName](/sql/relational-databases/system-functions/pathname-transact-sql)fornisce il percorso UNC logico di BLOB che corrisponde a ogni cella di FILESTREAM nella tabella.</span><span class="sxs-lookup"><span data-stu-id="7982a-175">A new intrinsic function, [PathName](/sql/relational-databases/system-functions/pathname-transact-sql), provides the logical UNC path of the BLOB that corresponds to each FILESTREAM cell in the table.</span></span> <span data-ttu-id="7982a-176">L'applicazione usa questo percorso logico per ottenere l'handle Win32 e operare sui dati BLOB con le normali interfacce del file system Win32.</span><span class="sxs-lookup"><span data-stu-id="7982a-176">The application uses this logical path to obtain the Win32 handle and operate on the BLOB data by using regular Win32 file system interfaces.</span></span> <span data-ttu-id="7982a-177">La funzione restituisce NULL se il valore della colonna FILESTREAM è NULL.</span><span class="sxs-lookup"><span data-stu-id="7982a-177">The function returns NULL if the value of the FILESTREAM column is NULL.</span></span>  
  
 <span data-ttu-id="7982a-178">**Accesso al file system transazionale**</span><span class="sxs-lookup"><span data-stu-id="7982a-178">**Transacted File System Access**</span></span>  
  
 <span data-ttu-id="7982a-179">Una nuova funzione intrinseca [GET_FILESTREAM_TRANSACTION_CONTEXT()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql)fornisce il token che rappresenta la transazione corrente alla quale è associata la sessione.</span><span class="sxs-lookup"><span data-stu-id="7982a-179">A new intrinsic function, [GET_FILESTREAM_TRANSACTION_CONTEXT()](/sql/t-sql/functions/get-filestream-transaction-context-transact-sql), provides the token that represents the current transaction that the session is associated with.</span></span> <span data-ttu-id="7982a-180">È necessario che la transazione sia stata avviata e non sia stata ancora interrotta o non ne sia stato ancora eseguito il commit.</span><span class="sxs-lookup"><span data-stu-id="7982a-180">The transaction must have been started and not yet aborted or committed.</span></span> <span data-ttu-id="7982a-181">Ottenendo un token, l'applicazione associa le operazioni di flusso del file system di FILESTREAM con una transazione avviata.</span><span class="sxs-lookup"><span data-stu-id="7982a-181">By obtaining a token, the application binds the FILESTREAM file system streaming operations with a started transaction.</span></span> <span data-ttu-id="7982a-182">La funzione restituisce NULL se non esistono transazioni esplicitamente avviate.</span><span class="sxs-lookup"><span data-stu-id="7982a-182">The function returns NULL in case of no explicitly started transaction.</span></span>  
  
 <span data-ttu-id="7982a-183">Tutti gli handle di file devono essere chiusi prima che la transazione venga interrotta o ne venga eseguito il commit.</span><span class="sxs-lookup"><span data-stu-id="7982a-183">All file handles must be closed before the transaction commits or aborts.</span></span> <span data-ttu-id="7982a-184">Se un handle viene lasciato aperto oltre l'ambito della transazione, le letture aggiuntive sull'handle causeranno un errore, mentre le scritture aggiuntive sull'handle riusciranno, ma in realtà i dati non saranno scritti su disco.</span><span class="sxs-lookup"><span data-stu-id="7982a-184">If a handle is left open beyond the transaction scope, additional reads against the handle will cause a failure; additional writes against the handle will succeed, but the actual data will not be written to disk.</span></span> <span data-ttu-id="7982a-185">Allo stesso modo, se il database o l'istanza del [!INCLUDE[ssDE](../../includes/ssde-md.md)] si chiude, tutti gli handle aperti non sono più validi.</span><span class="sxs-lookup"><span data-stu-id="7982a-185">Similarly, if the database or instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] shuts down, all open handles are invalidated.</span></span>  
  
 <span data-ttu-id="7982a-186">**Durabilità delle transazioni**</span><span class="sxs-lookup"><span data-stu-id="7982a-186">**Transactional Durability**</span></span>  
  
 <span data-ttu-id="7982a-187">Con FILESTREAM, su commit della transazione, viene assicurata nel [!INCLUDE[ssDE](../../includes/ssde-md.md)] la durevolezza delle transazioni per i dati BLOB di FILESTREAM modificati dall'accesso di flusso al file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-187">With FILESTREAM, upon transaction commit, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] ensures transaction durability for FILESTREAM BLOB data that is modified from the file system streaming access.</span></span>  
  
 <span data-ttu-id="7982a-188">**Semantica dell'isolamento**</span><span class="sxs-lookup"><span data-stu-id="7982a-188">**Isolation Semantics**</span></span>  
  
 <span data-ttu-id="7982a-189">La semantica dell'isolamento è gestita dai livelli di isolamento delle transazioni del [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7982a-189">The isolation semantics are governed by [!INCLUDE[ssDE](../../includes/ssde-md.md)] transaction isolation levels.</span></span> <span data-ttu-id="7982a-190">Il livello di isolamento Read Committed è supportato per [!INCLUDE[tsql](../../includes/tsql-md.md)] e per l'accesso al file system.</span><span class="sxs-lookup"><span data-stu-id="7982a-190">Read-committed isolation level is supported for [!INCLUDE[tsql](../../includes/tsql-md.md)] and file system access.</span></span> <span data-ttu-id="7982a-191">Sono supportati le operazioni di lettura ripetibili e gli isolamenti serializzabili e degli snapshot.</span><span class="sxs-lookup"><span data-stu-id="7982a-191">Repeatable read operations, and also serializable and snapshot isolations, are supported.</span></span> <span data-ttu-id="7982a-192">La lettura dirty non è supportata.</span><span class="sxs-lookup"><span data-stu-id="7982a-192">Dirty read is not supported.</span></span>  
  
 <span data-ttu-id="7982a-193">Le operazioni di apertura dell'accesso al file system non attendono alcun blocco,</span><span class="sxs-lookup"><span data-stu-id="7982a-193">The file system access open operations do not wait for any locks.</span></span> <span data-ttu-id="7982a-194">ma non riescono immediatamente se non possono accedere ai dati a causa dell'isolamento della transazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-194">Instead, the open operations fail immediately if they cannot access the data because of transaction isolation.</span></span> <span data-ttu-id="7982a-195">Le chiamate API di flusso non riescono con ERROR_SHARING_VIOLATION se l'operazione di apertura non può continuare a causa della violazione dell'isolamento.</span><span class="sxs-lookup"><span data-stu-id="7982a-195">The streaming API calls fail with ERROR_SHARING_VIOLATION if the open operation cannot continue because of isolation violation.</span></span>  
  
 <span data-ttu-id="7982a-196">Per consentire l'esecuzione di aggiornamenti parziali, l'applicazione può eseguire un controllo FS del dispositivo (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) per recuperare il contenuto obsoleto nel file a cui fa riferimento l'handle aperto.</span><span class="sxs-lookup"><span data-stu-id="7982a-196">To allow for partial updates to be made, the application can issue a device FS control (FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT) to fetch the old content into the file that the opened handle references.</span></span> <span data-ttu-id="7982a-197">In questo modo verrà attivata una copia del contenuto obsoleto sul lato server.</span><span class="sxs-lookup"><span data-stu-id="7982a-197">This will trigger a server-side old content copy.</span></span> <span data-ttu-id="7982a-198">Per ottenere migliori prestazioni dell'applicazione ed evitare di causare timeout potenziali quando si utilizzano file molto grandi, si consiglia di utilizzare I/O asincroni.</span><span class="sxs-lookup"><span data-stu-id="7982a-198">For better application performance and to avoid running into potential time-outs when you are working with very large files, we recommend that you use asynchronous I/O.</span></span>  
  
 <span data-ttu-id="7982a-199">Se FSCTL viene eseguito dopo la scrittura sull'handle, l'ultima operazione di scrittura verrà resa persistente e le scritture precedenti eseguite sull'handle andranno perdute.</span><span class="sxs-lookup"><span data-stu-id="7982a-199">If the FSCTL is issued after the handle has been written to, the last write operation will persist, and prior writes that were made to the handle are lost.</span></span>  
  
 <span data-ttu-id="7982a-200">**API del file system e livelli di isolamento supportati**</span><span class="sxs-lookup"><span data-stu-id="7982a-200">**File System APIs and Supported Isolation Levels**</span></span>  
  
 <span data-ttu-id="7982a-201">Quando una API del file system non può aprire un file a causa di una violazione dell'isolamento, viene restituita un'eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-201">When a file system API cannot open a file because of an isolation violation, an ERROR_SHARING_VIOLATION exception is returned.</span></span> <span data-ttu-id="7982a-202">Si verifica questa violazione dell'isolamento quando due transazioni tentano di accedere allo stesso file.</span><span class="sxs-lookup"><span data-stu-id="7982a-202">This isolation violation occurs when two transactions try to access the same file.</span></span> <span data-ttu-id="7982a-203">Il risultato dell'operazione di accesso dipende dalla modalità in cui è stato aperto il file e dalla versione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in cui viene eseguita la transazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-203">The outcome of the access operation depends on the mode the file was opened in and the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the transaction is running on.</span></span> <span data-ttu-id="7982a-204">Nella tabella seguente vengono illustrati i possibili risultati se due transazioni accedono allo stesso file.</span><span class="sxs-lookup"><span data-stu-id="7982a-204">The following table outlines the possibly outcomes for two transactions that are accessing the same file.</span></span>  
  
|<span data-ttu-id="7982a-205">Transazione 1</span><span class="sxs-lookup"><span data-stu-id="7982a-205">Transaction 1</span></span>|<span data-ttu-id="7982a-206">Transazione 2</span><span class="sxs-lookup"><span data-stu-id="7982a-206">Transaction 2</span></span>|<span data-ttu-id="7982a-207">Risultato in SQL Server 2008</span><span class="sxs-lookup"><span data-stu-id="7982a-207">Outcome on SQL Server 2008</span></span>|<span data-ttu-id="7982a-208">Risultato in SQL Server 2008 R2 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="7982a-208">Outcome on SQL Server 2008 R2 and later versions</span></span>|  
|-------------------|-------------------|--------------------------------|------------------------------------------------------|  
|<span data-ttu-id="7982a-209">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-209">Open for read.</span></span>|<span data-ttu-id="7982a-210">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-210">Open for read.</span></span>|<span data-ttu-id="7982a-211">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-211">Both succeed.</span></span>|<span data-ttu-id="7982a-212">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-212">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-213">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-213">Open for read.</span></span>|<span data-ttu-id="7982a-214">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-214">Open for write.</span></span>|<span data-ttu-id="7982a-215">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-215">Both succeed.</span></span> <span data-ttu-id="7982a-216">Le operazioni di scrittura nella transazione 2 non influiscono sulle operazioni di lettura eseguite nella transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-216">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="7982a-217">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-217">Both succeed.</span></span> <span data-ttu-id="7982a-218">Le operazioni di scrittura nella transazione 2 non influiscono sulle operazioni di lettura eseguite nella transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-218">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="7982a-219">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-219">Open for write.</span></span>|<span data-ttu-id="7982a-220">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-220">Open for read.</span></span>|<span data-ttu-id="7982a-221">L'apertura per la transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-221">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="7982a-222">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-222">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-223">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-223">Open for write.</span></span>|<span data-ttu-id="7982a-224">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-224">Open for write.</span></span>|<span data-ttu-id="7982a-225">L'apertura per la transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-225">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="7982a-226">L'apertura per la transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-226">Open for transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="7982a-227">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-227">Open for read.</span></span>|<span data-ttu-id="7982a-228">Aperta per SELECT.</span><span class="sxs-lookup"><span data-stu-id="7982a-228">Open for SELECT.</span></span>|<span data-ttu-id="7982a-229">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-229">Both succeed.</span></span>|<span data-ttu-id="7982a-230">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-230">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-231">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-231">Open for read.</span></span>|<span data-ttu-id="7982a-232">Aperta per UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="7982a-232">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="7982a-233">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-233">Both succeed.</span></span> <span data-ttu-id="7982a-234">Le operazioni di scrittura nella transazione 2 non influiscono sulle operazioni di lettura eseguite nella transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-234">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|<span data-ttu-id="7982a-235">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-235">Both succeed.</span></span> <span data-ttu-id="7982a-236">Le operazioni di scrittura nella transazione 2 non influiscono sulle operazioni di lettura eseguite nella transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-236">Write operations under transaction 2 do not affect read operations performed in transaction 1.</span></span>|  
|<span data-ttu-id="7982a-237">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-237">Open for write.</span></span>|<span data-ttu-id="7982a-238">Aperta per SELECT.</span><span class="sxs-lookup"><span data-stu-id="7982a-238">open for SELECT.</span></span>|<span data-ttu-id="7982a-239">La transazione 2 viene bloccata fino al commit o alla fine della transazione 1 o fino a quando non si verifica il timeout del blocco della transazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-239">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="7982a-240">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-240">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-241">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-241">Open for write.</span></span>|<span data-ttu-id="7982a-242">Aperta per UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="7982a-242">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="7982a-243">La transazione 2 viene bloccata fino al commit o alla fine della transazione 1 o fino a quando non si verifica il timeout del blocco della transazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-243">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|<span data-ttu-id="7982a-244">La transazione 2 viene bloccata fino al commit o alla fine della transazione 1 o fino a quando non si verifica il timeout del blocco della transazione.</span><span class="sxs-lookup"><span data-stu-id="7982a-244">Transaction 2 blocks until transaction 1 commits or ends the transaction, or the transaction lock times out.</span></span>|  
|<span data-ttu-id="7982a-245">Aperta per SELECT.</span><span class="sxs-lookup"><span data-stu-id="7982a-245">Open for SELECT.</span></span>|<span data-ttu-id="7982a-246">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-246">Open for read.</span></span>|<span data-ttu-id="7982a-247">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-247">Both succeed.</span></span>|<span data-ttu-id="7982a-248">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-248">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-249">Aperta per SELECT.</span><span class="sxs-lookup"><span data-stu-id="7982a-249">Open for SELECT.</span></span>|<span data-ttu-id="7982a-250">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-250">Open for write.</span></span>|<span data-ttu-id="7982a-251">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-251">Both succeed.</span></span> <span data-ttu-id="7982a-252">Le operazioni di scrittura nella transazione 2 non interessano la transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-252">Write operations under transaction 2 do not affect transaction 1.</span></span>|<span data-ttu-id="7982a-253">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-253">Both succeed.</span></span> <span data-ttu-id="7982a-254">Le operazioni di scrittura nella transazione 2 non interessano la transazione 1.</span><span class="sxs-lookup"><span data-stu-id="7982a-254">Write operations under transaction 2 do not affect transaction 1.</span></span>|  
|<span data-ttu-id="7982a-255">Aperta per UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="7982a-255">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="7982a-256">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-256">Open for read.</span></span>|<span data-ttu-id="7982a-257">L'operazione di apertura nella transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-257">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="7982a-258">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-258">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-259">Aperta per UPDATE o DELETE.</span><span class="sxs-lookup"><span data-stu-id="7982a-259">Open for UPDATE or DELETE.</span></span>|<span data-ttu-id="7982a-260">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-260">Open for write.</span></span>|<span data-ttu-id="7982a-261">L'operazione di apertura nella transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-261">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="7982a-262">L'operazione di apertura nella transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-262">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
|<span data-ttu-id="7982a-263">Aperta per SELECT con lettura ripetibile.</span><span class="sxs-lookup"><span data-stu-id="7982a-263">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="7982a-264">Aperta per la lettura.</span><span class="sxs-lookup"><span data-stu-id="7982a-264">Open for read.</span></span>|<span data-ttu-id="7982a-265">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-265">Both succeed.</span></span>|<span data-ttu-id="7982a-266">Riescono entrambe.</span><span class="sxs-lookup"><span data-stu-id="7982a-266">Both succeed.</span></span>|  
|<span data-ttu-id="7982a-267">Aperta per SELECT con lettura ripetibile.</span><span class="sxs-lookup"><span data-stu-id="7982a-267">Open for SELECT with repeatable read.</span></span>|<span data-ttu-id="7982a-268">Aperta per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="7982a-268">Open for write.</span></span>|<span data-ttu-id="7982a-269">L'operazione di apertura nella transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-269">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|<span data-ttu-id="7982a-270">L'operazione di apertura nella transazione 2 non riesce con eccezione ERROR_SHARING_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="7982a-270">The open operation on transaction 2 fails with an ERROR_SHARING_VIOLATION exception.</span></span>|  
  
 <span data-ttu-id="7982a-271">**Write-through da client remoti**</span><span class="sxs-lookup"><span data-stu-id="7982a-271">**Write-Through from Remote Clients**</span></span>  
  
 <span data-ttu-id="7982a-272">L'accesso remoto al file system per i dati FILESTREAM è abilitato tramite il protocollo SMB (Server Message Block).</span><span class="sxs-lookup"><span data-stu-id="7982a-272">Remote file system access to FILESTREAM data is enabled over the Server Message Block (SMB) protocol.</span></span> <span data-ttu-id="7982a-273">Se il client è remoto, nella cache non vengono memorizzate operazioni di scrittura lato client.</span><span class="sxs-lookup"><span data-stu-id="7982a-273">If the client is remote, no write operations are cached by the client side.</span></span> <span data-ttu-id="7982a-274">Le operazioni di scrittura saranno inviate sempre al server.</span><span class="sxs-lookup"><span data-stu-id="7982a-274">The write operations will always be sent to the server.</span></span> <span data-ttu-id="7982a-275">I dati possono essere memorizzati nella cache sul lato server.</span><span class="sxs-lookup"><span data-stu-id="7982a-275">The data can be cached on the server side.</span></span> <span data-ttu-id="7982a-276">Si consiglia di far consolidare alle applicazioni eseguite sui client remoti piccole operazioni di scrittura per effettuarne un numero minore con dati di dimensioni superiori.</span><span class="sxs-lookup"><span data-stu-id="7982a-276">We recommend that applications that are running on remote clients consolidate small write operations to make fewer write operations using larger data size.</span></span>  
  
 <span data-ttu-id="7982a-277">La creazione di viste con mapping alla memoria (I/O con mapping alla memoria) utilizzando handle FILESTREAM non è supportata.</span><span class="sxs-lookup"><span data-stu-id="7982a-277">Creating memory mapped views (memory mapped I/O) by using a FILESTREAM handle is not supported.</span></span> <span data-ttu-id="7982a-278">Se il mapping di memoria viene usato per i dati FILESTREAM, il [!INCLUDE[ssDE](../../includes/ssde-md.md)] non può garantire coerenza e durabilità dei dati o l'integrità del database.</span><span class="sxs-lookup"><span data-stu-id="7982a-278">If memory mapping is used for FILESTREAM data, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] cannot guarantee consistency and durability of the data or the integrity of the database.</span></span>  
  
##  <a name="related-tasks"></a><a name="reltasks"></a> <span data-ttu-id="7982a-279">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="7982a-279">Related Tasks</span></span>  
 [<span data-ttu-id="7982a-280">Abilitare e configurare FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-280">Enable and Configure FILESTREAM</span></span>](enable-and-configure-filestream.md)  
  [<span data-ttu-id="7982a-281">Creazione di un database abilitato per FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-281">Create a FILESTREAM-Enabled Database</span></span>](create-a-filestream-enabled-database.md)  
  [<span data-ttu-id="7982a-282">Creazione di una tabella per archiviare dati FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-282">Create a Table for Storing FILESTREAM Data</span></span>](create-a-table-for-storing-filestream-data.md)  
  [<span data-ttu-id="7982a-283">Accedere a Dati FILESTREAM con Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7982a-283">Access FILESTREAM Data with Transact-SQL</span></span>](access-filestream-data-with-transact-sql.md)  
  [<span data-ttu-id="7982a-284">Creazione di applicazioni client per dati FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-284">Create Client Applications for FILESTREAM Data</span></span>](create-client-applications-for-filestream-data.md)  
  [<span data-ttu-id="7982a-285">Accesso ai dati FILESTREAM con OpenSqlFilestream</span><span class="sxs-lookup"><span data-stu-id="7982a-285">Access FILESTREAM Data with OpenSqlFilestream</span></span>](access-filestream-data-with-opensqlfilestream.md)  
  [<span data-ttu-id="7982a-286">Esecuzione di aggiornamenti parziali di dati FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-286">Make Partial Updates to FILESTREAM Data</span></span>](make-partial-updates-to-filestream-data.md)  
  [<span data-ttu-id="7982a-287">Evitare conflitti con le operazioni del database nelle applicazioni di FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-287">Avoid Conflicts with Database Operations in FILESTREAM Applications</span></span>](avoid-conflicts-with-database-operations-in-filestream-applications.md)  
  [<span data-ttu-id="7982a-288">Spostamento di un database abilitato per FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-288">Move a FILESTREAM-Enabled Database</span></span>](move-a-filestream-enabled-database.md)  
  [<span data-ttu-id="7982a-289">Configurazione di FILESTREAM in un cluster di failover</span><span class="sxs-lookup"><span data-stu-id="7982a-289">Set Up FILESTREAM on a Failover Cluster</span></span>](set-up-filestream-on-a-failover-cluster.md)  
  [<span data-ttu-id="7982a-290">Configurare un firewall per l'accesso FILESTREAM</span><span class="sxs-lookup"><span data-stu-id="7982a-290">Configure a Firewall for FILESTREAM Access</span></span>](configure-a-firewall-for-filestream-access.md)  
  
##  <a name="related-content"></a><a name="relcontent"></a> <span data-ttu-id="7982a-291">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="7982a-291">Related Content</span></span>  
 [<span data-ttu-id="7982a-292">Compatibilità FILESTREAM con altre funzionalità di SQL Server</span><span class="sxs-lookup"><span data-stu-id="7982a-292">FILESTREAM Compatibility with Other SQL Server Features</span></span>](filestream-compatibility-with-other-sql-server-features.md)  
  
