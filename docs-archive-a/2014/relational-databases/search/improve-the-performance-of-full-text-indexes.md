---
title: Migliorare le prestazioni degli indici full-text | Microsoft Docs
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- performance [SQL Server], full-text search
- full-text queries [SQL Server], performance
- crawls [full-text search]
- full-text indexes [SQL Server], performance
- full-text search [SQL Server], performance
- batches [SQL Server], full-text search
ms.assetid: ef39ef1f-f0b7-4582-8e9c-31d4bd0ad35d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51b5913e9c3ce65faa5a1fddc5846cc7c94d149f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87717742"
---
# <a name="improve-the-performance-of-full-text-indexes"></a><span data-ttu-id="7c4e9-102">Miglioramento delle prestazioni di indici full-text</span><span class="sxs-lookup"><span data-stu-id="7c4e9-102">Improve the Performance of Full-Text Indexes</span></span>
  <span data-ttu-id="7c4e9-103">Le prestazioni di esecuzione dell'indicizzazione e delle query full-text possono dipendere da risorse hardware quali memoria e velocità del disco e della CPU, nonché dall'architettura del computer.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-103">Performance for full-text indexing and full-text queries is influenced by hardware resources, such as memory, disk speed, CPU speed, and machine architecture.</span></span>  
  
##  <a name="common-causes-of-performance-issues"></a><a name="causes"></a><span data-ttu-id="7c4e9-104">Cause comuni dei problemi di prestazioni</span><span class="sxs-lookup"><span data-stu-id="7c4e9-104">Common Causes of Performance Issues</span></span>  
 <span data-ttu-id="7c4e9-105">La causa principale del calo delle prestazioni di esecuzione dell'indicizzazione full-text è data dai limiti delle risorse hardware:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-105">The main cause for reduced full-text indexing performance is hardware-resource limits:</span></span>  
  
-   <span data-ttu-id="7c4e9-106">Se l'uso della CPU da parte del processo host del daemon di filtri (fdhost.exe) o del processo [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (sqlservr.exe) ha quasi raggiunto il 100%, il collo di bottiglia è rappresentato dalla CPU stessa.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-106">If CPU usage by the filter daemon host process (fdhost.exe) or the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process (sqlservr.exe) is close to 100 percent, the CPU is the bottleneck.</span></span>  
  
-   <span data-ttu-id="7c4e9-107">Se la lunghezza media della coda di attesa del disco è superiore al doppio del numero di testine, il collo di bottiglia è rappresentato dal disco.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-107">If the average disk-waiting queue length is more than two times the number of disk heads, there is a bottleneck on the disk.</span></span> <span data-ttu-id="7c4e9-108">La soluzione alternativa principale consiste nella creazione di cataloghi full-text separati dai file e dai log del database di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-108">The primary workaround is to create full-text catalogs that are separate from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files and logs.</span></span> <span data-ttu-id="7c4e9-109">Posizionare i log, i file di database e i cataloghi full-text su dischi separati.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-109">Put the logs, database files, and full-text catalogs on separate disks.</span></span> <span data-ttu-id="7c4e9-110">Per migliorare le prestazioni di esecuzione dell'indicizzazione, è inoltre possibile acquistare dischi più veloci e utilizzare RAID.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-110">Buying faster disks and using RAID can also help improve indexing performance.</span></span>  
  
-   <span data-ttu-id="7c4e9-111">In caso di memoria fisica insufficiente (limite di 3 GB), il collo di bottiglia è rappresentato dalla memoria.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-111">If there is a shortage of physical memory (3-GB limit), memory might be the bottleneck.</span></span> <span data-ttu-id="7c4e9-112">I limiti di memoria fisica sono possibili in tutti i sistemi e nei sistemi a 32 bit la pressione della memoria virtuale può rallentare l'indicizzazione full-text.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-112">Physical memory limitations are possible on all systems, and on 32-bit systems, virtual memory pressure can slow down full-text indexing.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7c4e9-113">A partire da [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], il motore di ricerca full-text, in quanto parte del processo sqlservr.exe, può utilizzare memoria AWE.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-113">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the Full-Text Engine can use AWE memory because the Full-Text Engine is part of the sqlservr.exe.</span></span>  
  
 <span data-ttu-id="7c4e9-114">Se nel sistema non vengono rilevati colli di bottiglia a livello dell'hardware, le prestazioni di indicizzazione della ricerca full-text dipendono principalmente dagli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-114">If the system has no hardware bottlenecks, the indexing performance of full-text search mostly depends on the following:</span></span>  
  
-   <span data-ttu-id="7c4e9-115">Tempo necessario per la creazione di batch full-text in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-115">How long it takes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to create full-text batches.</span></span>  
  
-   <span data-ttu-id="7c4e9-116">Velocità di utilizzo di tali batch da parte del daemon di filtri.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-116">How quickly the filter daemon can consume those batches.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7c4e9-117">A differenza del popolamento completo, i popolamenti incrementale, manuale e con rilevamento automatico delle modifiche non sono progettati per ottimizzare le risorse hardware ai fini di una maggiore velocità.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-117">Unlike full population, incremental, manual, and auto change tracking population are not designed to maximize hardware resources to achieve faster speed.</span></span> <span data-ttu-id="7c4e9-118">Di conseguenza, questi suggerimenti di ottimizzazione potrebbero non migliorare le prestazioni di esecuzione dell'indicizzazione full-text.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-118">Therefore, these tuning suggestions may not enhance performance for full-text indexing.</span></span>  
  
 <span data-ttu-id="7c4e9-119">Al termine di un popolamento, viene attivato un processo di unione conclusivo che associa i frammenti di indice in un singolo indice full-text master.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-119">When a population has completed, a final merge process is triggered that merges the index fragments together into one master full-text index.</span></span> <span data-ttu-id="7c4e9-120">Ciò consente prestazioni di query superiori poiché è necessario eseguire query solo sull'indice master anziché su alcuni frammenti di indice ed è possibile utilizzare statistiche di punteggio migliori per la classificazione della pertinenza.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-120">This results in improved query performance since only the master index needs to be queried rather than a number of index fragments, and better scoring statistics may be used for relevance ranking.</span></span> <span data-ttu-id="7c4e9-121">Si noti che l'unione nell'indice master può richiedere l'esecuzione di molte operazioni di I/O, in quanto è necessario leggere e scrivere grandi quantità di dati, ma questa operazione non blocca le query in entrata.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-121">Note that the master merge can be I/O intensive, because large amounts of data must be written and read when index fragments are merged, though it does not block incoming queries.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7c4e9-122">L'unione nell'indice master di una grande quantità di dati può comportare la creazione di una transazione con esecuzione prolungata, con il conseguente ritardo del troncamento del log delle transazioni durante il checkpoint.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-122">Master merging a large amount of data can create a long running transaction, delaying truncation of the transaction log during checkpoint.</span></span> <span data-ttu-id="7c4e9-123">In questo caso, le dimensioni del log delle transazioni potrebbero aumentare notevolmente, se si utilizza il modello di recupero con registrazione completa.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-123">In this case, under the full recovery model, the transaction log might grow significantly.</span></span> <span data-ttu-id="7c4e9-124">È consigliabile verificare che il log delle transazioni contenga spazio sufficiente per una transazione con esecuzione prolungata prima di riorganizzare un indice full-text di grandi dimensioni in un database in cui viene utilizzato il modello di recupero con registrazione completa.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-124">As a best practice, before reorganizing a large full-text index in a database that uses the full recovery model, ensure that your transaction log contains sufficient space for a long-running transaction.</span></span> <span data-ttu-id="7c4e9-125">Per altre informazioni, vedere [Gestione delle dimensioni del file di log delle transazioni](../logs/manage-the-size-of-the-transaction-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-125">For more information, see [Manage the Size of the Transaction Log File](../logs/manage-the-size-of-the-transaction-log-file.md).</span></span>  
  
  
  
##  <a name="tuning-the-performance-of-full-text-indexes"></a><a name="tuning"></a><span data-ttu-id="7c4e9-126">Ottimizzazione delle prestazioni degli indici full-text</span><span class="sxs-lookup"><span data-stu-id="7c4e9-126">Tuning the Performance of Full-Text Indexes</span></span>  
 <span data-ttu-id="7c4e9-127">Per ottimizzare le prestazioni degli indici full-text, implementare le procedure consigliate seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-127">To maximize the performance of your full-text indexes, implement the following best practices:</span></span>  
  
-   <span data-ttu-id="7c4e9-128">Per usare tutti i processori o i core al massimo, impostare [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)' `max full-text crawl ranges` ' sul numero di CPU nel sistema.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-128">To use all processors or cores to the maximum, set [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)'`max full-text crawl ranges`' to the number of CPUs on the system.</span></span> <span data-ttu-id="7c4e9-129">Per informazioni su questa opzione di configurazione, vedere [Opzione di configurazione del server max full-text crawl range](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-129">For information about this configuration option, see [max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span></span>  
  
-   <span data-ttu-id="7c4e9-130">Verificare che la tabella di base includa un indice cluster.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-130">Make sure that the base table has a clustered index.</span></span> <span data-ttu-id="7c4e9-131">Utilizzare un tipo di dati integer per la prima colonna dell'indice cluster.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-131">Use an integer data type for the first column of the clustered index.</span></span> <span data-ttu-id="7c4e9-132">Evitare l'utilizzo di GUID nella prima colonna dell'indice cluster.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-132">Avoid using GUIDs in the first column of the clustered index.</span></span> <span data-ttu-id="7c4e9-133">Un popolamento a più intervalli in un indice cluster garantisce la massima velocità di popolamento.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-133">A multi-range population on a clustered index can produce the highest population speed.</span></span> <span data-ttu-id="7c4e9-134">È consigliabile che la colonna utilizzata come chiave full-text sia di un tipo di dati integer.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-134">We recommend that the column serving as the full-text key be an integer data type.</span></span>  
  
-   <span data-ttu-id="7c4e9-135">Aggiornare le statistiche della tabella di base utilizzando l'istruzione [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-135">Update the statistics of the base table by using the [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) statement.</span></span> <span data-ttu-id="7c4e9-136">Un'operazione ancora più importante consiste nell'aggiornamento delle statistiche nell'indice cluster o nella chiave full-text per un popolamento completo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-136">More important, update the statistics on the clustered index or the full-text key for a full population.</span></span> <span data-ttu-id="7c4e9-137">In questo modo, tramite un popolamento a più intervalli è possibile generare partizioni ottimali nella tabella.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-137">This helps a multi-range population to generate good partitions on the table.</span></span>  
  
-   <span data-ttu-id="7c4e9-138">Compilare un indice secondario in una colonna `timestamp` per migliorare le prestazioni di esecuzione del popolamento incrementale.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-138">Build a secondary index on a `timestamp` column if you want to improve the performance of incremental population.</span></span>  
  
-   <span data-ttu-id="7c4e9-139">Prima di eseguire un popolamento completo in un computer di grandi dimensioni con più CPU, è consigliabile limitare temporaneamente la dimensione del pool di buffer impostando il valore `max server memory` in modo tale da lasciare una quantità di memoria sufficiente per il processo fdhost.exe e il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-139">Before you perform a full population on a large multi-CPU computer, we recommend that you temporarily limit the size of the buffer pool by setting the `max server memory` value to leave enough memory for the fdhost.exe process and operating system use.</span></span> <span data-ttu-id="7c4e9-140">Per ulteriori informazioni, vedere "Stima dei requisiti di memoria del processo host del daemon di filtri (fdhost.exe)" più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-140">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span>  
  
  
  
##  <a name="troubleshooting-the-performance-of-full-populations"></a><a name="full"></a><span data-ttu-id="7c4e9-141">Risoluzione dei problemi relativi alle prestazioni di popolamenti completi</span><span class="sxs-lookup"><span data-stu-id="7c4e9-141">Troubleshooting the Performance of Full Populations</span></span>  
 <span data-ttu-id="7c4e9-142">Per diagnosticare problemi di prestazioni, analizzare i log della ricerca per indicizzazione full-text.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-142">To diagnose performance problems, look at the full-text crawl logs.</span></span> <span data-ttu-id="7c4e9-143">Per informazioni sui log di ricerca per indicizzazione, vedere [Popolamento degli indici full-text](../indexes/indexes.md).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-143">For information about crawl logs, see [Populate Full-Text Indexes](../indexes/indexes.md).</span></span>  
  
 <span data-ttu-id="7c4e9-144">Nel caso in cui le prestazioni dei popolamenti completi non raggiungano livelli soddisfacenti, è consigliabile eseguire la procedura di risoluzione dei problemi illustrata di seguito nell'ordine in cui è riportata.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-144">It is recommended that the following order of troubleshooting be followed if the performance of full populations is not satisfactory.</span></span>  
  
### <a name="physical-memory-usage"></a><span data-ttu-id="7c4e9-145">Utilizzo della memoria fisica</span><span class="sxs-lookup"><span data-stu-id="7c4e9-145">Physical Memory Usage</span></span>  
 <span data-ttu-id="7c4e9-146">Durante un popolamento full-text, è possibile che la memoria disponibile per fdhost.exe o sqlservr.exe diventi insufficiente o si esaurisca.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-146">During a full-text population, it is possible for fdhost.exe or sqlservr.exe to run low on memory or to run out of memory.</span></span> <span data-ttu-id="7c4e9-147">Se il log delle ricerche per indicizzazione full-text indica il riavvio frequente del processo fdhost.exe o la restituzione frequente del codice di errore 8007008, uno di questi processi non dispone di memoria sufficiente.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-147">If the full-text crawl log shows that fdhost.exe is being restarted often or that error code 8007008 is being returned it means one of these processes is running out of memory.</span></span> <span data-ttu-id="7c4e9-148">Se fdhost.exe produce dump, in particolare in computer di grandi dimensioni con più CPU, è possibile che la memoria si esaurisca.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-148">If fdhost.exe is producing dumps, particularly on large, multi-CPU computers, it might be running out of memory.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7c4e9-149">Per informazioni sui buffer di memoria usati da una ricerca per indicizzazione full-text, vedere [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-149">To obtain information about memory buffers used by a full-text crawl, see [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span></span>  
  
 <span data-ttu-id="7c4e9-150">I motivi possibili sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-150">The possible causes are as follows:</span></span>  
  
-   <span data-ttu-id="7c4e9-151">Se la quantità di memoria fisica disponibile durante un popolamento completo è pari a zero, è possibile che il pool di buffer di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] stia utilizzando la maggior parte della memoria fisica presente nel sistema.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-151">If amount of physical memory that is available during a full population is zero, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool might be consuming most of the physical memory on the system.</span></span>  
  
     <span data-ttu-id="7c4e9-152">Il processo sqlservr.exe tenta di acquisire tutta la memoria disponibile per il pool di buffer, fino alla quantità massima di memoria del server configurata.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-152">The sqlservr.exe process tries to grab all available memory for the buffer pool, up to the configured maximum server memory.</span></span> <span data-ttu-id="7c4e9-153">Se l'allocazione di `max server memory` è eccessiva, per il processo fdhost.exe possono verificarsi condizioni di memoria insufficiente e l'impossibilità di allocare memoria condivisa.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-153">If the `max server memory` allocation is too large, out-of-memory conditions and failure to allocate shared memory can occur for the fdhost.exe process.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7c4e9-154">Durante un popolamento full-text in un computer con più CPU, tra fdhost.exe e sqlservr.exe può verificarsi una contesa per la memoria del pool di buffer.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-154">During a full-text population on a multi-CPU computer, contention for the buffer pool memory can occur between fdhost.exe or sqlservr.exe.</span></span> <span data-ttu-id="7c4e9-155">La conseguente mancanza di memoria condivisa genera tentativi batch, sovraccarico della memoria e dump da parte del processo fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-155">The resulting lack of shared memory causes batch retries, memory thrashing, and dumps by the fdhost.exe process.</span></span>  
  
     <span data-ttu-id="7c4e9-156">È possibile risolvere questo problema impostando in modo appropriato il valore `max server memory` del pool di buffer di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7c4e9-156">You can solve this problem by setting the `max server memory` value of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool appropriately.</span></span> <span data-ttu-id="7c4e9-157">Per ulteriori informazioni, vedere "Stima dei requisiti di memoria del processo host del daemon di filtri (fdhost.exe)" più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-157">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span> <span data-ttu-id="7c4e9-158">Può inoltre risultare utile ridurre la dimensione del batch per l'indicizzazione full-text.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-158">Reducing the batch size used for full-text indexing may also help.</span></span>  
  
-   <span data-ttu-id="7c4e9-159">Problema di paging</span><span class="sxs-lookup"><span data-stu-id="7c4e9-159">A paging issue</span></span>  
  
     <span data-ttu-id="7c4e9-160">Anche le dimensioni insufficienti del file di paging, ad esempio in un sistema con un file di paging ridotto con crescita limitata, possono generare condizioni di memoria insufficiente per fdhost.exe o sqlservr.exe.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-160">Insufficient page-file size, such as on a system that has a small page file with restricted growth, can also cause the fdhost.exe or sqlservr.exe to run out of memory.</span></span>  
  
     <span data-ttu-id="7c4e9-161">Se nei log delle ricerche per indicizzazione full-text non sono riportati errori di memoria, è probabile che le prestazioni non siano ottimali a causa del paging eccessivo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-161">If the crawl logs do not indicate any memory-related failures, it is likely that performance is slow due to excessive paging.</span></span>  
  
  
  
### <a name="estimating-the-memory-requirements-of-the-filter-daemon-host-process-fdhostexe"></a><span data-ttu-id="7c4e9-162">Stima dei requisiti di memoria per il processo host del daemon di filtri (fdhost.exe)</span><span class="sxs-lookup"><span data-stu-id="7c4e9-162">Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)</span></span>  
 <span data-ttu-id="7c4e9-163">La quantità di memoria richiesta dal processo fdhost.exe per un popolamento dipende principalmente dal numero di intervalli di ricerca per indicizzazione full-text utilizzati, dalla dimensione della memoria condivisa in ingresso e dal numero massimo di istanze di tale memoria.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-163">The amount of memory required by the fdhost.exe process for a population depends mainly on the number of full-text crawl ranges it uses, the size of inbound shared memory (ISM), and the maximum number of ISM instances.</span></span>  
  
 <span data-ttu-id="7c4e9-164">È possibile stimare approssimativamente la quantità di memoria (in byte) utilizzata dall'host del daemon di filtri tramite la formula seguente:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-164">The amount of memory (in bytes) consumed by the filter daemon host can be roughly estimated by using the following formula:</span></span>  
  
 <span data-ttu-id="7c4e9-165">*number_of_crawl_ranges* \` ism_size '*max_outstanding_isms* \* 2</span><span class="sxs-lookup"><span data-stu-id="7c4e9-165">*number_of_crawl_ranges* \`ism_size\`*max_outstanding_isms*\* 2</span></span>  
  
 <span data-ttu-id="7c4e9-166">I valori predefiniti delle variabili nella formula precedente sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-166">The default values of the variables in the preceding formula are as follows:</span></span>  
  
|<span data-ttu-id="7c4e9-167">**Variabile**</span><span class="sxs-lookup"><span data-stu-id="7c4e9-167">**Variable**</span></span>|<span data-ttu-id="7c4e9-168">**Valore predefinito**</span><span class="sxs-lookup"><span data-stu-id="7c4e9-168">**Default value**</span></span>|  
|------------------|-----------------------|  
|<span data-ttu-id="7c4e9-169">*number_of_crawl_ranges*</span><span class="sxs-lookup"><span data-stu-id="7c4e9-169">*number_of_crawl_ranges*</span></span>|<span data-ttu-id="7c4e9-170">Numero di CPU</span><span class="sxs-lookup"><span data-stu-id="7c4e9-170">The number of CPUs</span></span>|  
|<span data-ttu-id="7c4e9-171">*ism_size*</span><span class="sxs-lookup"><span data-stu-id="7c4e9-171">*ism_size*</span></span>|<span data-ttu-id="7c4e9-172">1 MB per computer x86</span><span class="sxs-lookup"><span data-stu-id="7c4e9-172">1 MB for x86 computers</span></span><br /><br /> <span data-ttu-id="7c4e9-173">4 MB, 8 MB o 16 MB per computer x64, a seconda della memoria fisica totale</span><span class="sxs-lookup"><span data-stu-id="7c4e9-173">4 MB, 8 MB, or 16MB for x64 computers, depending on the total physical memory</span></span>|  
|<span data-ttu-id="7c4e9-174">*max_outstanding_isms*</span><span class="sxs-lookup"><span data-stu-id="7c4e9-174">*max_outstanding_isms*</span></span>|<span data-ttu-id="7c4e9-175">25 per computer x86</span><span class="sxs-lookup"><span data-stu-id="7c4e9-175">25 for x86 computers</span></span><br /><br /> <span data-ttu-id="7c4e9-176">5 per computer x64</span><span class="sxs-lookup"><span data-stu-id="7c4e9-176">5 for x64 computers</span></span>|  
  
 <span data-ttu-id="7c4e9-177">Nella tabella seguente vengono illustrate le linee guida da seguire per stimare i requisiti di memoria di fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-177">The following table presents guidelines about how to estimate the memory requirements of fdhost.exe.</span></span> <span data-ttu-id="7c4e9-178">Le formule contenute in questa tabella utilizzano i valori riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-178">The formulas in this table use the following values:</span></span>  
  
-   <span data-ttu-id="7c4e9-179">*F*: stima della memoria richiesta da fdhost.exe (in MB).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-179">*F*, which is an estimate of memory needed by fdhost.exe (in MB).</span></span>  
  
-   <span data-ttu-id="7c4e9-180">*T*: memoria fisica totale disponibile nel sistema (in MB).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-180">*T*, which is the total physical memory available on the system (in MB).</span></span>  
  
-   <span data-ttu-id="7c4e9-181">*M*, che rappresenta l' `max server memory` impostazione ottimale.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-181">*M*, which is the optimal `max server memory` setting.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7c4e9-182">Per informazioni essenziali sulle formule, vedere <sup>1</sup>, <sup>2</sup>e <sup>3</sup>sotto.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-182">For essential information about the formulas, see <sup>1</sup>, <sup>2</sup>, and <sup>3</sup>, below.</span></span>  
  
|<span data-ttu-id="7c4e9-183">Piattaforma</span><span class="sxs-lookup"><span data-stu-id="7c4e9-183">Platform</span></span>|<span data-ttu-id="7c4e9-184">Stima dei requisiti di memoria fdhost.exe in MB-*F*<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7c4e9-184">Estimating fdhost.exe memory requirements in MB-*F*<sup>1</sup></span></span>|<span data-ttu-id="7c4e9-185">Formula per il calcolo di max server memory-*M*<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7c4e9-185">Formula for calculating max server memory-*M*<sup>2</sup></span></span>|  
|--------------|---------------------------------------------------------------------|---------------------------------------------------------------|  
|<span data-ttu-id="7c4e9-186">x86</span><span class="sxs-lookup"><span data-stu-id="7c4e9-186">x86</span></span>|<span data-ttu-id="7c4e9-187">_F_ **=** _Numero F di intervalli di ricerca per indicizzazione_ **&#42;** 50</span><span class="sxs-lookup"><span data-stu-id="7c4e9-187">_F_ **=** _Number of crawl ranges_ **&#42;** 50</span></span>|<span data-ttu-id="7c4e9-188">_M_ **= minimo (** _T_ **,** 2000 \*\*)- *`F`* - \*\* 500</span><span class="sxs-lookup"><span data-stu-id="7c4e9-188">_M_ **=minimum(** _T_ **,** 2000 **)-*`F`*-** 500</span></span>|  
|<span data-ttu-id="7c4e9-189">x64</span><span class="sxs-lookup"><span data-stu-id="7c4e9-189">x64</span></span>|<span data-ttu-id="7c4e9-190">_F_ **=** _Numero F di intervalli di ricerca per indicizzazione_ **&#42;** 10 **&#42;** 8</span><span class="sxs-lookup"><span data-stu-id="7c4e9-190">_F_ **=** _Number of crawl ranges_ **&#42;** 10 **&#42;** 8</span></span>|<span data-ttu-id="7c4e9-191">_M_ **=** _T_ **-** _F_ **-** 500</span><span class="sxs-lookup"><span data-stu-id="7c4e9-191">_M_ **=** _T_ **-** _F_ **-** 500</span></span>|  
  
 <span data-ttu-id="7c4e9-192"><sup>1</sup> se sono in corso più popolamenti completi, calcolare i requisiti di memoria fdhost.exe per ognuno separatamente, ad esempio *F1*, *F2*e così via.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-192"><sup>1</sup> If multiple full populations are in progress, calculate the fdhost.exe memory requirements of each separately, as *F1*, *F2*, and so forth.</span></span> <span data-ttu-id="7c4e9-193">Calcolare quindi *M* come _T_ **-** sigma **(** _F_i **)** .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-193">Then calculate *M* as _T_**-** sigma **(**_F_i **)**.</span></span>  
  
 <span data-ttu-id="7c4e9-194"><sup>2</sup> 500 MB è una stima della memoria richiesta da altri processi nel sistema.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-194"><sup>2</sup> 500 MB is an estimate of the memory required by other processes in the system.</span></span> <span data-ttu-id="7c4e9-195">Se nel sistema sono in corso processi aggiuntivi, aumentare questo valore di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-195">If the system is doing additional work, increase this value accordingly.</span></span>  
  
 <span data-ttu-id="7c4e9-196"><sup>3</sup> . si presuppone che *ism_size* sia 8 MB per le piattaforme x64.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-196"><sup>3</sup> .*ism_size* is assumed to be 8 MB for x64 platforms.</span></span>  
  
 <span data-ttu-id="7c4e9-197">**Esempio: Stima dei requisiti di memoria di fdhost.exe**</span><span class="sxs-lookup"><span data-stu-id="7c4e9-197">**Example: Estimating the Memory Requirements of fdhost.exe**</span></span>  
  
 <span data-ttu-id="7c4e9-198">Questo esempio è relativo a un computer AMD64 con 8 GB di RAM e 4 processori dual core.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-198">This example is for an AMD64 computer that has 8GM of RAM and 4 dual core processors.</span></span> <span data-ttu-id="7c4e9-199">Il primo calcolo consente di stimare i requisiti di memoria di fdhost.exe, ovvero*F*.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-199">The first calculation estimates of memory needed by fdhost.exe-*F*.</span></span> <span data-ttu-id="7c4e9-200">Il numero di intervalli di ricerca per indicizzazione è `8`.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-200">The number of crawl ranges is `8`.</span></span>  
  
 `F = 8*10*8=640`  
  
 <span data-ttu-id="7c4e9-201">Il calcolo successivo ottiene il valore ottimale per `max server memory` - *M*.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-201">The next calculation obtains the optimal value for `max server memory`-*M*.</span></span> <span data-ttu-id="7c4e9-202">*T*Il totale della memoria fisica disponibile in questo sistema in MB-*T*-è `8192` .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-202">*T*he total physical memory available on this system in MB-*T*-is `8192`.</span></span>  
  
 `M = 8192-640-500=7052`  
  
 <span data-ttu-id="7c4e9-203">**Esempio: impostazione della memoria massima del server**</span><span class="sxs-lookup"><span data-stu-id="7c4e9-203">**Example: Setting max server memory**</span></span>  
  
 <span data-ttu-id="7c4e9-204">Questo esempio usa le istruzioni [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) e [RECONFIGURE](/sql/t-sql/language-elements/reconfigure-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] per impostare sul `max server memory` valore calcolato per *M* nell'esempio precedente, `7052` :</span><span class="sxs-lookup"><span data-stu-id="7c4e9-204">This example uses the [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) and [RECONFIGURE](/sql/t-sql/language-elements/reconfigure-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statements to set `max server memory` to the value calculated for *M* in the preceding example, `7052`:</span></span>  
  
```  
USE master;  
GO  
EXEC sp_configure 'max server memory', 7052;  
GO  
RECONFIGURE;  
GO  
```  
  
 <span data-ttu-id="7c4e9-205">**Per impostare l'opzione di configurazione max server memory**</span><span class="sxs-lookup"><span data-stu-id="7c4e9-205">**To set the max server memory configuration option**</span></span>  
  
-   [<span data-ttu-id="7c4e9-206">Opzioni di configurazione del server Server Memory</span><span class="sxs-lookup"><span data-stu-id="7c4e9-206">Server Memory Server Configuration Options</span></span>](../../database-engine/configure-windows/server-memory-server-configuration-options.md)  
  
  
  
### <a name="factors-that-can-reduce-cpu-consumption"></a><span data-ttu-id="7c4e9-207">Fattori che possono ridurre l'utilizzo della CPU</span><span class="sxs-lookup"><span data-stu-id="7c4e9-207">Factors that Can Reduce CPU Consumption</span></span>  
 <span data-ttu-id="7c4e9-208">È previsto che le prestazioni di esecuzione dei popolamenti completi non siano ottimali quando l'utilizzo medio della CPU è inferiore al 30 percento.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-208">We expect that the performance of full populations is not optimal when the average CPU consumption is lower than about 30 percent.</span></span> <span data-ttu-id="7c4e9-209">In questa sezione vengono illustrati alcuni fattori che influiscono sull'utilizzo della CPU.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-209">This section discusses some factors that affect CPU consumption.</span></span>  
  
-   <span data-ttu-id="7c4e9-210">Lunga attesa di pagine</span><span class="sxs-lookup"><span data-stu-id="7c4e9-210">High wait for pages</span></span>  
  
     <span data-ttu-id="7c4e9-211">Per determinare il tempo di attesa delle pagine, eseguire l'istruzione [!INCLUDE[tsql](../../../includes/tsql-md.md)] seguente:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-211">To find out whether a page wait time is high, execute the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>  
  
    ```  
    Execute SELECT TOP 10 * FROM sys.dm_os_wait_stats ORDER BY wait_time_ms DESC;  
    ```  
  
     <span data-ttu-id="7c4e9-212">Nella tabella seguente vengono descritti i tipi di attesa relativi a questo contesto.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-212">The following table describes the wait types of interest here.</span></span>  
  
    |<span data-ttu-id="7c4e9-213">Tipo di attesa</span><span class="sxs-lookup"><span data-stu-id="7c4e9-213">Wait type</span></span>|<span data-ttu-id="7c4e9-214">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7c4e9-214">Description</span></span>|<span data-ttu-id="7c4e9-215">Possibile soluzione</span><span class="sxs-lookup"><span data-stu-id="7c4e9-215">Possible resolution</span></span>|  
    |---------------|-----------------|-------------------------|  
    |<span data-ttu-id="7c4e9-216">PAGEIO_LATCH_SH (_EX o _UP)</span><span class="sxs-lookup"><span data-stu-id="7c4e9-216">PAGEIO_LATCH_SH (_EX or _UP)</span></span>|<span data-ttu-id="7c4e9-217">Può indicare un collo di bottiglia a livello di IO, caso in cui anche la lunghezza media della coda del disco sarebbe elevata.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-217">This could indicate an IO bottleneck, in which case you would typically also see a high average disk-queue length.</span></span>|<span data-ttu-id="7c4e9-218">Lo spostamento dell'indice full-text in un filegroup diverso in un disco diverso potrebbe contribuire a ridurre il collo di bottiglia a livello di IO.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-218">Moving the full-text index to a different filegroup on a different disk could help reduce the IO bottleneck.</span></span>|  
    |<span data-ttu-id="7c4e9-219">PAGELATCH_EX (o _UP)</span><span class="sxs-lookup"><span data-stu-id="7c4e9-219">PAGELATCH_EX (or _UP)</span></span>|<span data-ttu-id="7c4e9-220">Può indicare contese tra i thread che tentano di scrivere nello stesso file di database.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-220">This could indicate a lot of contention among threads that are trying to write to the same database file.</span></span>|<span data-ttu-id="7c4e9-221">L'aggiunta di file al filegroup in cui risiede l'indice full-text potrebbe contribuire ad attenuare queste contese.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-221">Adding files to the filegroup on which the fulltext index resides could help alleviate such contention.</span></span>|  
  
     <span data-ttu-id="7c4e9-222">Per altre informazioni, vedere [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-222">For more information, see [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span></span>  
  
-   <span data-ttu-id="7c4e9-223">Analisi inefficaci della tabella di base</span><span class="sxs-lookup"><span data-stu-id="7c4e9-223">Inefficiencies in scanning the base table</span></span>  
  
     <span data-ttu-id="7c4e9-224">Un popolamento completo esegue l'analisi della tabella di base per produrre batch.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-224">A full population scans the base table to produce batches.</span></span> <span data-ttu-id="7c4e9-225">Tali analisi potrebbero risultare inefficaci negli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c4e9-225">This table scanning could be inefficient in the following scenarios:</span></span>  
  
    -   <span data-ttu-id="7c4e9-226">Se la tabella di base dispone di una percentuale elevata di colonne esterne alle righe sottoposte a indicizzazione full-text, il collo di bottiglia potrebbe essere causato proprio dall'analisi della tabella di base per produrre batch.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-226">If the base table has a high percentage of out-of-row columns that are being full-text indexed, scanning the base table to produce batches might be the bottleneck.</span></span> <span data-ttu-id="7c4e9-227">In questo caso, lo spostamento dei dati di dimensioni inferiori all'interno delle righe tramite `varchar(max)` o `nvarchar(max)` potrebbe risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-227">In this case, moving the smaller data in-row using `varchar(max)` or `nvarchar(max)` might help.</span></span>  
  
    -   <span data-ttu-id="7c4e9-228">Se la tabella di base è molto frammentata, l'analisi potrebbe risultare inefficace.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-228">If the base table is very fragmented, scanning might be inefficient.</span></span> <span data-ttu-id="7c4e9-229">Per informazioni sul calcolo dei dati esterni alle righe e sulla frammentazione dell'indice, vedere [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) e [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-229">For information about computing out-of-row data and index fragmentation, see [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) and [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span></span>  
  
         <span data-ttu-id="7c4e9-230">Per ridurre la frammentazione, è possibile riorganizzare o ricompilare l'indice cluster.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-230">To reduce fragmentation, you can reorganize or rebuild the clustered index.</span></span> <span data-ttu-id="7c4e9-231">Per altre informazioni, vedere [Riorganizzare e ricompilare gli indici](../indexes/reorganize-and-rebuild-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-231">For more information, see [Reorganize and Rebuild Indexes](../indexes/reorganize-and-rebuild-indexes.md).</span></span>  
  
  
  
##  <a name="troubleshooting-slow-indexing-performance-due-to-filters"></a><a name="filters"></a><span data-ttu-id="7c4e9-232">Risoluzione dei problemi relativi alle prestazioni dell'indicizzazione lenta a causa di filtri</span><span class="sxs-lookup"><span data-stu-id="7c4e9-232">Troubleshooting Slow Indexing Performance Due to Filters</span></span>  
 <span data-ttu-id="7c4e9-233">Durante il popolamento di un indice full-text, il motore di ricerca full-text utilizza due tipi di filtri, a thread singolo e multithread.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-233">When populating a full-text index, the Full-Text Engine uses two types of filters: multithreaded and single-threaded.</span></span> <span data-ttu-id="7c4e9-234">Alcuni documenti, quali i documenti di [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word, vengono filtrati utilizzando un filtro multithread,</span><span class="sxs-lookup"><span data-stu-id="7c4e9-234">Some documents, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word documents, are filtered using a multithreaded filter.</span></span> <span data-ttu-id="7c4e9-235">mentre altri, ad esempio i documenti PDF (Portable Document Format) di Adobe Acrobat, vengono filtrati utilizzando un filtro a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-235">Other documents, such as Adobe Acrobat Portable Document Format (PDF) documents, are filtered using a single-threaded filter.</span></span>  
  
 <span data-ttu-id="7c4e9-236">Ai fini della sicurezza, i filtri vengono caricati dai processi dell'host del daemon di filtri.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-236">For security reasons, filters are loaded by filter daemon host processes.</span></span> <span data-ttu-id="7c4e9-237">In un'istanza del server viene utilizzato un processo a thread multipli per tutti i filtri a thread multipli e un processo a thread singolo per tutti i filtri a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-237">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span> <span data-ttu-id="7c4e9-238">Quando un documento che utilizza un filtro multithread contiene un documento incorporato che utilizza un filtro a thread singolo, il motore di ricerca full-text avvia un processo a thread singolo per il documento incorporato.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-238">When a document that uses a multithreaded filter contains an embedded document that uses a single-threaded filter, the Full-Text Engine launches a single-threaded process for the embedded document.</span></span> <span data-ttu-id="7c4e9-239">Nel caso di un documento di Word che contiene un documento PDF, il motore di ricerca full-text usa il processo multithread per esaminare il contenuto in formato Word e avvia un processo a thread singolo per esaminare il contenuto in formato PDF.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-239">For example, on encountering a Word document that contains a PDF document, the Full-Text Engine uses the multithreaded process for the Word content and launches a single-threaded process for the PDF content.</span></span> <span data-ttu-id="7c4e9-240">Un filtro a thread singolo potrebbe tuttavia non funzionare in modo corretto in questo ambiente e potrebbe destabilizzare il processo di filtraggio.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-240">A single-threaded filter might not work well in this environment, however, and could destabilize the filtering process.</span></span> <span data-ttu-id="7c4e9-241">In alcune situazioni in cui i documenti incorporati rappresentano una prassi comune, la destabilizzazione potrebbe provocare errori irreversibili nel processo di filtraggio.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-241">In certain circumstances where such embedding is common, destabilization might lead to filtering-process crashes.</span></span> <span data-ttu-id="7c4e9-242">In questo caso, il motore di ricerca full-text reindirizza tutti i documenti che hanno provocato l'errore, ad esempio un documento di Word in cui è incorporato contenuto in formato PDF, al processo di filtraggio a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-242">When this occurs, the Full-Text Engine re-routes any failed document (for example, a Word document that contains embedded PDF content) to the single-threaded filtering process.</span></span> <span data-ttu-id="7c4e9-243">Se il reindirizzamento viene eseguito di frequente, le prestazioni del processo di indicizzazione full-text risultano ridotte.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-243">If re-routing occurs frequently, it results in performance degradation of the full-text indexing process.</span></span>  
  
 <span data-ttu-id="7c4e9-244">Per risolvere questo problema, è necessario contrassegnare il filtro per il documento contenitore, in questo caso il documento di Word, come filtro a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-244">To work around this problem, mark the filter for the container document (Word in this case) as a single-threaded filter.</span></span> <span data-ttu-id="7c4e9-245">È possibile modificare il valore del Registro di sistema per il filtro per contrassegnare un filtro specifico come filtro a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="7c4e9-245">You can change the filter registry value to mark a given filter as a single-threaded filter.</span></span> <span data-ttu-id="7c4e9-246">Per contrassegnare un filtro come filtro a thread singolo, è necessario impostare il valore del registro di sistema **ThreadingModel** per il filtro su `Apartment Threaded` .</span><span class="sxs-lookup"><span data-stu-id="7c4e9-246">To mark a filter as a single-threaded filter, you need to set the **ThreadingModel** registry value for the filter to `Apartment Threaded`.</span></span> <span data-ttu-id="7c4e9-247">Per informazioni sugli apartment a thread singolo, vedere il white paper [Understanding and Using COM Threading Models](https://go.microsoft.com/fwlink/?LinkId=209159).</span><span class="sxs-lookup"><span data-stu-id="7c4e9-247">For information about single-threaded apartments, see the white paper [Understanding and Using COM Threading Models](https://go.microsoft.com/fwlink/?LinkId=209159).</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="7c4e9-248">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7c4e9-248">See Also</span></span>  
 <span data-ttu-id="7c4e9-249">[Opzioni di configurazione del server Server Memory](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-249">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="7c4e9-250">[Opzione di configurazione del server max full-text crawl range](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-250">[max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span></span>  
 <span data-ttu-id="7c4e9-251">[Popolamento degli indici full-text](populate-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-251">[Populate Full-Text Indexes](populate-full-text-indexes.md) </span></span>  
 <span data-ttu-id="7c4e9-252">[Creazione e gestione di indici full-text](create-and-manage-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-252">[Create and Manage Full-Text Indexes](create-and-manage-full-text-indexes.md) </span></span>  
 <span data-ttu-id="7c4e9-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span></span>  
 <span data-ttu-id="7c4e9-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="7c4e9-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span></span>  
 [<span data-ttu-id="7c4e9-255">Risoluzione dei problemi nell'indicizzazione full-text</span><span class="sxs-lookup"><span data-stu-id="7c4e9-255">Troubleshoot Full-Text Indexing</span></span>](troubleshoot-full-text-indexing.md)  
  
  
