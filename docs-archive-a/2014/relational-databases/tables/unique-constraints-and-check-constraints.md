---
title: Vincoli UNIQUE e CHECK | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- constraints [SQL Server], Visual Database Tools
- Visual Database Tools [SQL Server], constraints
ms.assetid: 637098af-2567-48f8-90f4-b41df059833e
author: stevestein
ms.author: sstein
ms.openlocfilehash: 205e4ae3d6f89f10a933bf357d1eeda458852584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87711804"
---
# <a name="unique-constraints-and-check-constraints"></a><span data-ttu-id="806a9-102">Vincoli UNIQUE e CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-102">Unique Constraints and Check Constraints</span></span>
  <span data-ttu-id="806a9-103">I vincoli UNIQUE e CHECK sono due tipi di vincoli che possono essere utilizzati per applicare l'integrità dei dati nelle tabelle di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="806a9-103">UNIQUE constraints and CHECK constraints are two types of constraints that can be used to enforce data integrity in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tables.</span></span> <span data-ttu-id="806a9-104">Si tratta di importanti oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="806a9-104">These are important database objects.</span></span>  
  
 <span data-ttu-id="806a9-105">In questo argomento sono contenute le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="806a9-105">This topic contains the following sections.</span></span>  
  
 [<span data-ttu-id="806a9-106">Vincoli UNIQUE</span><span class="sxs-lookup"><span data-stu-id="806a9-106">UNIQUE Constraints</span></span>](#Unique)  
  
 [<span data-ttu-id="806a9-107">Vincoli CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-107">CHECK Constraints</span></span>](#Check)  
  
 [<span data-ttu-id="806a9-108">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="806a9-108">Related Tasks</span></span>](#Tasks)  
  
##  <a name="unique-constraints"></a><a name="Unique"></a> <span data-ttu-id="806a9-109">Vincoli UNIQUE</span><span class="sxs-lookup"><span data-stu-id="806a9-109">UNIQUE Constraints</span></span>  
 <span data-ttu-id="806a9-110">I vincoli sono regole attivate dal [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="806a9-110">Constraints are rules that the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] enforces for you.</span></span> <span data-ttu-id="806a9-111">È possibile ad esempio utilizzare i vincoli UNIQUE per garantire che non vengano immessi valori duplicati in colonne specifiche che non fanno parte di una chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="806a9-111">For example, you can use UNIQUE constraints to make sure that no duplicate values are entered in specific columns that do not participate in a primary key.</span></span> <span data-ttu-id="806a9-112">Sebbene sia i vincoli UNIQUE che i vincoli PRIMARY KEY applichino l'univocità, utilizzare un vincolo UNIQUE anziché un vincolo PRIMARY KEY se si desidera applicare l'univocità di una colonna, o di una combinazione di colonne, che non costituisce la chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="806a9-112">Although both a UNIQUE constraint and a PRIMARY KEY constraint enforce uniqueness, use a UNIQUE constraint instead of a PRIMARY KEY constraint when you want to enforce the uniqueness of a column, or combination of columns, that is not the primary key.</span></span>  
  
 <span data-ttu-id="806a9-113">A differenza dei vincoli PRIMARY KEY, i vincoli UNIQUE supportano il valore NULL.</span><span class="sxs-lookup"><span data-stu-id="806a9-113">Unlike PRIMARY KEY constraints, UNIQUE constraints allow for the value NULL.</span></span> <span data-ttu-id="806a9-114">Tuttavia, come per qualsiasi valore che fa parte di un vincolo UNIQUE, è consentito un solo valore Null per colonna.</span><span class="sxs-lookup"><span data-stu-id="806a9-114">However, as with any value participating in a UNIQUE constraint, only one null value is allowed per column.</span></span> <span data-ttu-id="806a9-115">A un vincolo UNIQUE può fare riferimento un vincolo FOREIGN KEY.</span><span class="sxs-lookup"><span data-stu-id="806a9-115">A UNIQUE constraint can be referenced by a FOREIGN KEY constraint.</span></span>  
  
 <span data-ttu-id="806a9-116">Quando un vincolo UNIQUE viene aggiunto a una o più colonne esistenti nella tabella, per impostazione predefinita i dati esistenti nelle colonne vengono esaminati dal [!INCLUDE[ssDE](../../includes/ssde-md.md)] per verificare che tutti i valori siano univoci.</span><span class="sxs-lookup"><span data-stu-id="806a9-116">When a UNIQUE constraint is added to an existing column or columns in the table, by default, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] examines the existing data in the columns to make sure all values are unique.</span></span> <span data-ttu-id="806a9-117">Se un vincolo UNIQUE viene aggiunto a una colonna che contiene valori duplicati, [!INCLUDE[ssDE](../../includes/ssde-md.md)] restituisce un errore e il vincolo non viene aggiunto.</span><span class="sxs-lookup"><span data-stu-id="806a9-117">If a UNIQUE constraint is added to a column that has duplicated values, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error and does not add the constraint.</span></span>  
  
 <span data-ttu-id="806a9-118">In [!INCLUDE[ssDE](../../includes/ssde-md.md)] viene creato automaticamente un indice UNIQUE per imporre il requisito di univocità del vincolo UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="806a9-118">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a UNIQUE index to enforce the uniqueness requirement of the UNIQUE constraint.</span></span> <span data-ttu-id="806a9-119">Se, pertanto, si tenta di inserire una riga duplicata, in [!INCLUDE[ssDE](../../includes/ssde-md.md)] viene restituito un messaggio di errore che indica che il vincolo UNIQUE è stato violato e che la riga non verrà aggiunta alla tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-119">Therefore, if an attempt to insert a duplicate row is made, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error message that states the UNIQUE constraint has been violated and does not add the row to the table.</span></span> <span data-ttu-id="806a9-120">Se non si specifica in modo esplicito un indice cluster, per impostazione predefinita viene creato un indice univoco non cluster per applicare il vincolo UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="806a9-120">Unless a clustered index is explicitly specified, a unique, nonclustered index is created by default to enforce the UNIQUE constraint.</span></span>  
  
##  <a name="check-constraints"></a><a name="Check"></a> <span data-ttu-id="806a9-121">Vincoli CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-121">CHECK Constraints</span></span>  
 <span data-ttu-id="806a9-122">I vincoli CHECK assicurano l'integrità di dominio limitando i valori accettati da una o più colonne.</span><span class="sxs-lookup"><span data-stu-id="806a9-122">CHECK constraints enforce domain integrity by limiting the values that are accepted by one or more columns.</span></span> <span data-ttu-id="806a9-123">È possibile creare un vincolo CHECK con qualsiasi espressione logica (booleana) che restituisce TRUE o FALSE in base agli operatori logici.</span><span class="sxs-lookup"><span data-stu-id="806a9-123">You can create a CHECK constraint with any logical (Boolean) expression that returns TRUE or FALSE based on the logical operators.</span></span> <span data-ttu-id="806a9-124">È ad esempio possibile limitare l'intervallo di valori di una colonna **salary** creando un vincolo CHECK che consente solo dati compresi tra 15.000 e 100.000 euro.</span><span class="sxs-lookup"><span data-stu-id="806a9-124">For example, the range of values for a **salary** column can be limited by creating a CHECK constraint that allows for only data that ranges from $15,000 through $100,000.</span></span> <span data-ttu-id="806a9-125">In questo modo si evita di inserire stipendi con valori non compresi nell'intervallo regolare.</span><span class="sxs-lookup"><span data-stu-id="806a9-125">This prevents salaries from being entered beyond the regular salary range.</span></span> <span data-ttu-id="806a9-126">L'espressione logica potrebbe essere la seguente: `salary >= 15000 AND salary <= 100000`.</span><span class="sxs-lookup"><span data-stu-id="806a9-126">The logical expression would be the following: `salary >= 15000 AND salary <= 100000`.</span></span>  
  
 <span data-ttu-id="806a9-127">È possibile applicare più vincoli CHECK a una colonna</span><span class="sxs-lookup"><span data-stu-id="806a9-127">You can apply multiple CHECK constraints to a single column.</span></span> <span data-ttu-id="806a9-128">e inoltre applicare un singolo vincolo CHECK a più colonne creandolo a livello di tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-128">You can also apply a single CHECK constraint to multiple columns by creating it at the table level.</span></span> <span data-ttu-id="806a9-129">È ad esempio possibile usare un vincolo CHECK in più colonne per confermare che a ogni riga con un valore di colonna **country_region** pari a **USA** corrisponda un valore di due caratteri nella colonna **state** .</span><span class="sxs-lookup"><span data-stu-id="806a9-129">For example, a multiple-column CHECK constraint could be used to confirm that any row with a **country_region** column value of **USA** also has a two-character value in the **state** column.</span></span> <span data-ttu-id="806a9-130">In questo modo è possibile verificare più condizioni simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="806a9-130">This allows for multiple conditions to be checked in one location.</span></span>  
  
 <span data-ttu-id="806a9-131">I vincoli CHECK simili ai vincoli FOREIGN KEY perché controllano i valori inseriti in una colonna.</span><span class="sxs-lookup"><span data-stu-id="806a9-131">CHECK constraints are similar to FOREIGN KEY constraints in that they control the values that are put in a column.</span></span> <span data-ttu-id="806a9-132">La differenza consiste nel modo in cui vengono determinati i valori validi. I vincoli FOREIGN KEY ottengono l'elenco di valori validi da un'altra tabella, mentre i vincoli CHECK determinano i valori validi da un'espressione logica.</span><span class="sxs-lookup"><span data-stu-id="806a9-132">The difference is in how they determine which values are valid: FOREIGN KEY constraints obtain the list of valid values from another table, while CHECK constraints determine the valid values from a logical expression.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="806a9-133">I vincoli che prevedono la conversione implicita o esplicita di tipi di dati possono impedire l'esecuzione di operazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="806a9-133">Constraints that include implicit or explicit data type conversion may cause certain operations to fail.</span></span> <span data-ttu-id="806a9-134">Ad esempio, i vincoli definiti nelle tabelle di origine per il cambio di partizione possono impedire l'esecuzione di un'operazione ALTER TABLE...SWITCH.</span><span class="sxs-lookup"><span data-stu-id="806a9-134">For example, such constraints defined on tables that are sources of partition switching may cause an ALTER TABLE...SWITCH operation to fail.</span></span> <span data-ttu-id="806a9-135">Evitare la conversione di tipi di dati nelle definizioni dei vincoli.</span><span class="sxs-lookup"><span data-stu-id="806a9-135">Avoid data type conversion in constraint definitions.</span></span>  
  
### <a name="limitations-of-check-constraints"></a><span data-ttu-id="806a9-136">Limitazioni per i vincoli CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-136">Limitations of CHECK Constraints</span></span>  
 <span data-ttu-id="806a9-137">I vincoli CHECK non accettano i valori che restituiscono FALSE.</span><span class="sxs-lookup"><span data-stu-id="806a9-137">CHECK constraints reject values that evaluate to FALSE.</span></span> <span data-ttu-id="806a9-138">I valori Null restituiscono UNKNOWN e pertanto se vengono inseriti in un'espressione è possibile che un vincolo venga ignorato.</span><span class="sxs-lookup"><span data-stu-id="806a9-138">Because null values evaluate to UNKNOWN, their presence in expressions may override a constraint.</span></span> <span data-ttu-id="806a9-139">Si supponga, ad esempio, di inserire un vincolo su una `int` colonna column che specifica che la **colonna** può contenere solo il valore 10 (**colonna = 10**). **MyColumn**</span><span class="sxs-lookup"><span data-stu-id="806a9-139">For example, suppose you place a constraint on an `int` column **MyColumn** specifying that **MyColumn** can contain only the value 10 (**MyColumn=10**).</span></span> <span data-ttu-id="806a9-140">Se si inserisce il valore NULL in **MyColumn**, [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserisce NULL e non restituisce un errore.</span><span class="sxs-lookup"><span data-stu-id="806a9-140">If you insert the value NULL into **MyColumn**, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts NULL and does not return an error.</span></span>  
  
 <span data-ttu-id="806a9-141">Un vincolo CHECK restituisce TRUE se la verifica della condizione controllata non restituisce FALSE per nessuna riga della tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-141">A CHECK constraint returns TRUE when the condition it is checking is not FALSE for any row in the table.</span></span> <span data-ttu-id="806a9-142">Un vincolo CHECK viene utilizzato a livello di riga.</span><span class="sxs-lookup"><span data-stu-id="806a9-142">A CHECK constraint works at the row level.</span></span> <span data-ttu-id="806a9-143">Se una tabella appena creata non contiene righe, tutti i vincoli CHECK sulla tabella sono considerati validi.</span><span class="sxs-lookup"><span data-stu-id="806a9-143">If a table that has just been created does not have any rows, any CHECK constraint on this table is considered valid.</span></span> <span data-ttu-id="806a9-144">Questa situazione può generare risultati imprevisti, come è illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="806a9-144">This situation can produce unexpected results, as in the following example.</span></span>  
  
```  
CREATE TABLE CheckTbl (col1 int, col2 int);  
GO  
CREATE FUNCTION CheckFnctn()  
RETURNS int  
AS   
BEGIN  
   DECLARE @retval int  
   SELECT @retval = COUNT(*) FROM CheckTbl  
   RETURN @retval  
END;  
GO  
ALTER TABLE CheckTbl  
ADD CONSTRAINT chkRowCount CHECK (dbo.CheckFnctn() >= 1 );  
GO  
```  
  
 <span data-ttu-id="806a9-145">Il vincolo `CHECK` inserito specifica che deve essere presente almeno una riga nella tabella `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="806a9-145">The `CHECK` constraint being added specifies that there must be at least one row in table `CheckTbl`.</span></span> <span data-ttu-id="806a9-146">Poiché nella tabella non sono presenti righe per le quali è possibile verificare la condizione del vincolo, l'istruzione ALTER TABLE ha tuttavia esito positivo.</span><span class="sxs-lookup"><span data-stu-id="806a9-146">However, because there are no rows in the table against which to check the condition of this constraint, the ALTER TABLE statement succeeds.</span></span>  
  
 <span data-ttu-id="806a9-147">I vincoli CHECK non vengono convalidati durante l'esecuzione di istruzioni DELETE.</span><span class="sxs-lookup"><span data-stu-id="806a9-147">CHECK constraints are not validated during DELETE statements.</span></span> <span data-ttu-id="806a9-148">L'esecuzione di istruzioni DELETE su tabelle che includono tipi di vincoli CHECK specifici può pertanto generare risultati imprevisti.</span><span class="sxs-lookup"><span data-stu-id="806a9-148">Therefore, executing DELETE statements on tables with certain types of check constraints may produce unexpected results.</span></span> <span data-ttu-id="806a9-149">Ad esempio, si considerino le istruzioni seguenti eseguite sulla tabella `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="806a9-149">For example, consider the following statements executed on table `CheckTbl`.</span></span>  
  
```  
INSERT INTO CheckTbl VALUES (10, 10);  
GO  
DELETE CheckTbl WHERE col1 = 10;  
```  
  
 <span data-ttu-id="806a9-150">L'istruzione `DELETE` ha esito positivo, anche se il vincolo `CHECK` specifica che la tabella `CheckTbl` deve contenere almeno `1` riga.</span><span class="sxs-lookup"><span data-stu-id="806a9-150">The `DELETE` statement succeeds, even though the `CHECK` constraint specifies that table `CheckTbl` must have at least `1` row.</span></span>  
  
##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="806a9-151">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="806a9-151">Related Tasks</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="806a9-152">Se la tabella viene pubblicata per la replica, è necessario apportare modifiche allo schema usando l'istruzione [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) di Transact-SQL oppure SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="806a9-152">If the table is published for replication, you must make schema changes using the Transact-SQL statement [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) or SQL Server Management Objects (SMO).</span></span> <span data-ttu-id="806a9-153">Quando si apportano modifiche allo schema utilizzando Progettazione tabelle o Progettazione diagrammi di database, viene effettuato il tentativo di rimuovere e rigenerare la tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-153">When schema changes are made using the Table Designer or the Database Diagram Designer, it attempts to drop and recreate the table.</span></span> <span data-ttu-id="806a9-154">La modifica allo schema non riuscirà, poiché non è consentita la rimozione di oggetti pubblicati.</span><span class="sxs-lookup"><span data-stu-id="806a9-154">You cannot drop published objects, therefore the schema change will fail.</span></span>  
  
|<span data-ttu-id="806a9-155">Attività</span><span class="sxs-lookup"><span data-stu-id="806a9-155">Task</span></span>|<span data-ttu-id="806a9-156">Argomento</span><span class="sxs-lookup"><span data-stu-id="806a9-156">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="806a9-157">Viene descritto come creare un vincolo UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="806a9-157">Describes how to create a unique constraint.</span></span>|[<span data-ttu-id="806a9-158">Creare vincoli UNIQUE</span><span class="sxs-lookup"><span data-stu-id="806a9-158">Create Unique Constraints</span></span>](../tables/create-unique-constraints.md)|  
|<span data-ttu-id="806a9-159">Viene descritto come modificare un vincolo UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="806a9-159">Describes how to modify a unique constraint.</span></span>|[<span data-ttu-id="806a9-160">Modificare vincoli UNIQUE</span><span class="sxs-lookup"><span data-stu-id="806a9-160">Modify Unique Constraints</span></span>](../tables/modify-unique-constraints.md)|  
|<span data-ttu-id="806a9-161">Viene descritto come eliminare un vincolo UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="806a9-161">Describes how to delete a unique constraint.</span></span>|[<span data-ttu-id="806a9-162">Eliminare vincoli UNIQUE</span><span class="sxs-lookup"><span data-stu-id="806a9-162">Delete Unique Constraints</span></span>](../tables/delete-unique-constraints.md)|  
|<span data-ttu-id="806a9-163">Viene descritto come disabilitare un vincolo CHECK quando un agente di replica inserisce o aggiorna i dati nella tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-163">Describes how to disable a check constraint when a replication agent inserts or updates data in your table.</span></span>|[<span data-ttu-id="806a9-164">Disabilitare un vincolo CHECK per la replica</span><span class="sxs-lookup"><span data-stu-id="806a9-164">Disable Check Constraints for Replication</span></span>](../tables/disable-check-constraints-for-replication.md)|  
|<span data-ttu-id="806a9-165">Viene descritto come disabilitare un vincolo CHECK quando vengono aggiunti, aggiornati o eliminati dati in una tabella.</span><span class="sxs-lookup"><span data-stu-id="806a9-165">Describes how to disable a check constraint when data is added to, updated in, or deleted from a table.</span></span>|[<span data-ttu-id="806a9-166">Disabilitare i vincoli CHECK con le istruzioni INSERT e UPDATE</span><span class="sxs-lookup"><span data-stu-id="806a9-166">Disable Check Constraints with INSERT and UPDATE Statements</span></span>](../tables/disable-check-constraints-with-insert-and-update-statements.md)|  
|<span data-ttu-id="806a9-167">Viene descritto come modificare l'espressione del vincolo o le opzioni che abilitano o disabilitano il vincolo se si verificano determinate condizioni.</span><span class="sxs-lookup"><span data-stu-id="806a9-167">Describes how to change the constraint expression or the options that enable or disable the constraint for specific conditions.</span></span>|[<span data-ttu-id="806a9-168">Modificare vincoli CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-168">Modify Check Constraints</span></span>](../tables/modify-check-constraints.md)|  
|<span data-ttu-id="806a9-169">Viene descritto come eliminare un vincolo CHECK.</span><span class="sxs-lookup"><span data-stu-id="806a9-169">Describes how to delete a check constraint.</span></span>|[<span data-ttu-id="806a9-170">Eliminare vincoli CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-170">Delete Check Constraints</span></span>](../tables/delete-check-constraints.md)|  
|<span data-ttu-id="806a9-171">Viene descritto come visualizzare le proprietà di un vincolo CHECK.</span><span class="sxs-lookup"><span data-stu-id="806a9-171">Describes how to view the properties of a check constraint.</span></span>|[<span data-ttu-id="806a9-172">Vincoli UNIQUE e CHECK</span><span class="sxs-lookup"><span data-stu-id="806a9-172">Unique Constraints and Check Constraints</span></span>](../tables/unique-constraints-and-check-constraints.md)|  
  
  
