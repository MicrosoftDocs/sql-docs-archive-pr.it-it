---
title: Configurazione dell'archiviazione per le tabelle con ottimizzazione per la memoria | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 6e005de0-3a77-4b91-b497-14cc0f9f6605
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 4e6e5f5a931669e2fc07cb957e60fd9c77b9b735
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724688"
---
# <a name="configuring-storage-for-memory-optimized-tables"></a><span data-ttu-id="8261e-102">Configurazione dell'archiviazione per le tabelle con ottimizzazione per la memoria</span><span class="sxs-lookup"><span data-stu-id="8261e-102">Configuring Storage for Memory-Optimized Tables</span></span>
  <span data-ttu-id="8261e-103">È necessario configurare la capacità di archiviazione e le operazioni di input/output al secondo (IOPS).</span><span class="sxs-lookup"><span data-stu-id="8261e-103">You need to configure storage capacity and input/output operations per second (IOPS).</span></span>  
  
## <a name="storage-capacity"></a><span data-ttu-id="8261e-104">Capacità di archiviazione</span><span class="sxs-lookup"><span data-stu-id="8261e-104">Storage Capacity</span></span>  
 <span data-ttu-id="8261e-105">Usare le informazioni in [Stimare i requisiti di memoria delle tabelle ottimizzate per la memoria](memory-optimized-tables.md) per stimare le dimensioni in memoria delle tabelle ottimizzate per la memoria durevoli del database.</span><span class="sxs-lookup"><span data-stu-id="8261e-105">Use the information in [Estimate Memory Requirements for Memory-Optimized Tables](memory-optimized-tables.md) to estimate the in-memory size of the database's durable memory-optimized tables.</span></span> <span data-ttu-id="8261e-106">Poiché gli indici non vengono mantenuti per le tabelle ottimizzate per la memoria, non includere le dimensioni degli indici.</span><span class="sxs-lookup"><span data-stu-id="8261e-106">Because indexes are not persisted for memory-optimized tables, do not include the size of indexes.</span></span> <span data-ttu-id="8261e-107">Una volta determinata la dimensione, è necessario fornire uno spazio libero su disco quattro volte superiore alla dimensione delle tabelle in memoria durevoli.</span><span class="sxs-lookup"><span data-stu-id="8261e-107">Once you determine the size, you need to provide disk space that is four times the size of durable, in-memory tables.</span></span>  
  
## <a name="storage-performance"></a><span data-ttu-id="8261e-108">Prestazioni di archiviazione</span><span class="sxs-lookup"><span data-stu-id="8261e-108">Storage Performance</span></span>  
 [!INCLUDE[hek_2](../../includes/hek-2-md.md)] <span data-ttu-id="8261e-109">consente di aumentare notevolmente la velocità effettiva del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8261e-109">can significantly increase your workload throughput.</span></span> <span data-ttu-id="8261e-110">Pertanto, è importante verificare che le operazioni di IO non rappresentino un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="8261e-110">Therefore, it is important to ensure that IO is not a bottleneck.</span></span>  
  
-   <span data-ttu-id="8261e-111">Quando si esegue la migrazione delle tabelle basate su disco nelle tabelle ottimizzate per la memoria, verificare che il log delle transazioni sia in un supporto di archiviazione che supporti l'attività aumentata del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8261e-111">When migrating disk-based tables to memory-optimized tables, make sure that the transaction log is on a storage media that can support increased transaction log activity.</span></span> <span data-ttu-id="8261e-112">Ad esempio, se il supporto di archiviazione supporta le operazioni del log delle transazioni a 100 MB/sec e le tabelle ottimizzate per la memoria restituiscono prestazioni cinque volte superiori, anche il supporto di archiviazione del log delle transazioni deve essere in grado di supportare un incremento di cinque volte delle prestazioni, per impedire all'attività del log delle transazioni di diventare un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="8261e-112">For example, if your storage media supports transaction log operations at 100 MB/sec, and memory-optimized tables result in five times greater performance, the transaction log's storage media must be able to also support five times performance improvement, to prevent the transaction log activity from becoming a performance bottleneck.</span></span>  
  
-   <span data-ttu-id="8261e-113">Le tabelle con ottimizzazione per la memoria sono persistenti nei file distribuiti in uno o più contenitori.</span><span class="sxs-lookup"><span data-stu-id="8261e-113">Memory-optimized tables are persisted in files distributed across one or more containers.</span></span> <span data-ttu-id="8261e-114">In genere è necessario eseguire il mapping al proprio spindle di ogni contenitore, che viene usato per aumentare la capacità di archiviazione e migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="8261e-114">Each container should typically be mapped to its own spindle and is used both for increased storage capacity and improved performance.</span></span> <span data-ttu-id="8261e-115">È necessario assicurarsi che gli IOPS sequenziali del supporto di archiviazione possano supportare un aumento di 3 volte nella velocità effettiva del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8261e-115">You need to ensure that sequential IOPS of the storage media can support a 3 times increase in transaction log throughput.</span></span>  
  
     <span data-ttu-id="8261e-116">Ad esempio, se le tabelle ottimizzate per la memoria generano 500MB/sec di attività nel log delle transazioni, l'archiviazione per le tabelle ottimizzate per la memoria deve supportare 1,5 GB/sec. La necessità di supportare un aumento di 3 volte nella velocità effettiva del log delle transazioni deriva dall'osservazione che le coppie di file di dati e differenziali vengono prima scritti con i dati iniziali e quindi devono essere letti/riscritti come parte di un'operazione di merge.</span><span class="sxs-lookup"><span data-stu-id="8261e-116">For example, if memory-optimized tables generate 500MB/sec of activity in the transaction log, the storage for memory-optimized tables must support 1.5GB/sec. The need to support a 3 times increase in transaction log throughput comes from the observation that the data and delta file pairs are first written with the initial data and then need to be read/re-written as part of a merge operation.</span></span>  
  
     <span data-ttu-id="8261e-117">Un altro fattore per stimare la velocità effettiva per l'archiviazione è il tempo di recupero per le tabelle ottimizzate per la memoria.</span><span class="sxs-lookup"><span data-stu-id="8261e-117">Another factor in estimating throughput for storage is the recovery time for memory-optimized tables.</span></span> <span data-ttu-id="8261e-118">I dati delle tabelle durevoli devono essere letti in memoria prima che un database viene reso disponibile alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="8261e-118">Data from durable tables must be read into memory before a database is made available to applications.</span></span> <span data-ttu-id="8261e-119">In genere, il caricamento dei dati nelle tabelle ottimizzate per la memoria può essere eseguito alla velocità delle operazioni di IOPS.</span><span class="sxs-lookup"><span data-stu-id="8261e-119">Commonly, loading data into memory-optimized tables can be done at the speed of IOPS.</span></span> <span data-ttu-id="8261e-120">Pertanto se l'archiviazione totale per le tabelle ottimizzate per la memoria durevoli è di 60 GB e si desidera essere in grado di caricare i dati in 1 minuto, le operazioni di IOPS per l'archiviazione devono essere impostati su 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="8261e-120">So if the total storage for durable, memory-optimized tables is 60 GB and you want to be able to load this data in 1 minute, the IOPS for the storage must be set at 1 GB/sec.</span></span>  
  
-   <span data-ttu-id="8261e-121">Se si dispone di un numero pari di spindle, è necessario creare due volte il numero dei contenitori, eseguendo per ogni coppia il mapping allo stesso spindle.</span><span class="sxs-lookup"><span data-stu-id="8261e-121">If you have even number of spindles, you should create two times the number of containers, each pair mapped to the same spindle.</span></span> <span data-ttu-id="8261e-122">Ciò è necessario per ripartire le operazioni di IOPS e l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="8261e-122">This is needed to spread the IOPS and the storage.</span></span> <span data-ttu-id="8261e-123">Per ulteriori informazioni, vedere [il filegroup con ottimizzazione per la memoria](the-memory-optimized-filegroup.md).</span><span class="sxs-lookup"><span data-stu-id="8261e-123">For more information, see [The Memory Optimized Filegroup](the-memory-optimized-filegroup.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8261e-124">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="8261e-124">See Also</span></span>  
 [<span data-ttu-id="8261e-125">Creazione e gestione dell'archiviazione per gli oggetti ottimizzati per la memoria</span><span class="sxs-lookup"><span data-stu-id="8261e-125">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
