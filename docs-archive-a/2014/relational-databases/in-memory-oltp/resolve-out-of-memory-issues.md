---
title: Risolvere i problemi di memoria insufficiente | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: f855e931-7502-44bd-8a8b-b8543645c7f4
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: f5f57725d559b0cd62679550e2bb7c04dbd7e2bd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87627261"
---
# <a name="resolve-out-of-memory-issues"></a><span data-ttu-id="fac3e-102">Risolvere i problemi di memoria insufficiente</span><span class="sxs-lookup"><span data-stu-id="fac3e-102">Resolve Out Of Memory Issues</span></span>
  [!INCLUDE[hek_1](../../includes/hek-1-md.md)] <span data-ttu-id="fac3e-103">usa più memoria e in modi diversi rispetto a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fac3e-103">uses more memory and in different ways than does [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="fac3e-104">È possibile che la quantità di memoria installata e allocata per [!INCLUDE[hek_2](../../includes/hek-2-md.md)] diventi inadeguata con l'aumentare delle esigenze.</span><span class="sxs-lookup"><span data-stu-id="fac3e-104">It is possible that the amount of memory you installed and allocated for [!INCLUDE[hek_2](../../includes/hek-2-md.md)] becomes inadequate for your growing needs.</span></span> <span data-ttu-id="fac3e-105">In tal caso, è possibile che la memoria risulti insufficiente.</span><span class="sxs-lookup"><span data-stu-id="fac3e-105">If so, you could run out of memory.</span></span> <span data-ttu-id="fac3e-106">In questo argomento viene descritto come risolvere una situazione di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="fac3e-106">This topic covers how to recover from an OOM situation.</span></span> <span data-ttu-id="fac3e-107">Per le linee guida che consentono di evitare molte situazioni di memoria insufficiente, vedere [Monitorare e risolvere i problemi relativi all'utilizzo della memoria](monitor-and-troubleshoot-memory-usage.md) .</span><span class="sxs-lookup"><span data-stu-id="fac3e-107">See [Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) for guidance that can help you avoid many OOM situations.</span></span>  
  
## <a name="covered-in-this-topic"></a><span data-ttu-id="fac3e-108">Sezioni dell'argomento</span><span class="sxs-lookup"><span data-stu-id="fac3e-108">Covered in this topic</span></span>  
  
|<span data-ttu-id="fac3e-109">Argomento</span><span class="sxs-lookup"><span data-stu-id="fac3e-109">Topic</span></span>|<span data-ttu-id="fac3e-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="fac3e-110">Overview</span></span>|  
|-----------|--------------|  
| [<span data-ttu-id="fac3e-111">Risoluzione degli errori di ripristino del database dovuti a memoria insufficiente</span><span class="sxs-lookup"><span data-stu-id="fac3e-111">Resolve database restore failures due to OOM</span></span>](#resolve-database-restore-failures-due-to-oom) |<span data-ttu-id="fac3e-112">Operazioni da eseguire se viene visualizzato il messaggio di errore "Operazione di ripristino non riuscita per il database ' *\<databaseName>* '. Memoria insufficiente nel pool di risorse ' *\<resourcePoolName>* '."</span><span class="sxs-lookup"><span data-stu-id="fac3e-112">What to do if you get the error message, "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'."</span></span>|  
| [<span data-ttu-id="fac3e-113">Risoluzione dell'impatto delle condizioni di memoria insufficiente sul carico di lavoro</span><span class="sxs-lookup"><span data-stu-id="fac3e-113">Resolve impact of low memory or OOM conditions on the workload</span></span>](#resolve-impact-of-low-memory-or-oom-conditions-on-the-workload)|<span data-ttu-id="fac3e-114">Operazioni da eseguire nel caso in cui i problemi di memoria insufficiente incidono negativamente sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="fac3e-114">What to do if you find low memory issues are negatively impacting performance.</span></span>|  
| [<span data-ttu-id="fac3e-115">Risoluzione degli errori di allocazione della pagina dovuti a memoria insufficiente quando è disponibile memoria sufficiente</span><span class="sxs-lookup"><span data-stu-id="fac3e-115">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>](#resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available) |<span data-ttu-id="fac3e-116">Operazioni da eseguire se viene visualizzato il messaggio di errore "È in corso la disabilitazione delle allocazioni di pagine per il database ' *\<databaseName>* ' Memoria insufficiente nel pool di risorse ' *\<resourcePoolName>* '.</span><span class="sxs-lookup"><span data-stu-id="fac3e-116">What to do if you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="fac3e-117">..." quando la memoria disponibile è sufficiente per l'operazione.</span><span class="sxs-lookup"><span data-stu-id="fac3e-117">..." when available memory is sufficient for the operation.</span></span>|  
  
## <a name="resolve-database-restore-failures-due-to-oom"></a><span data-ttu-id="fac3e-118">Risoluzione degli errori di ripristino del database dovuti a memoria insufficiente</span><span class="sxs-lookup"><span data-stu-id="fac3e-118">Resolve database restore failures due to OOM</span></span>  
 <span data-ttu-id="fac3e-119">Quando si tenta di ripristinare un database, è possibile che venga ricevuto il messaggio di errore "operazione di ripristino non riuscita per il database ' *\<databaseName>* ' a causa di memoria insufficiente nel pool di risorse ' *\<resourcePoolName>* '". Prima di poter ripristinare correttamente il database, è necessario risolvere il problema di memoria insufficiente rendendo disponibile una maggiore quantità di memoria.</span><span class="sxs-lookup"><span data-stu-id="fac3e-119">When you attempt to restore a database you may get the error message: "Restore operation failed for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'." Before you can successfully restore the database you must resolve the insufficient memory issue by making more memory available.</span></span>  
  
 <span data-ttu-id="fac3e-120">Per risolvere l'errore di recupero a causa delle memoria insufficiente, aumentare la memoria disponibile usando uno o tutti questi metodi per aumentare temporaneamente la memoria disponibile per l'operazione di recupero.</span><span class="sxs-lookup"><span data-stu-id="fac3e-120">To resolve recovery failure due to OOM increase available memory using any or al of these means to temporarily increase memory available for the recovery operation.</span></span>  
  
-   <span data-ttu-id="fac3e-121">Chiudere temporaneamente le applicazioni in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="fac3e-121">Temporarily close running applications.</span></span>   
    <span data-ttu-id="fac3e-122">Chiudendo una o più applicazioni in esecuzione, ad esempio Visual Studio, Internet Explorer, OneNote e altre, si libera la memoria usata da tali applicazioni rendendola disponibile per l'operazione di ripristino.</span><span class="sxs-lookup"><span data-stu-id="fac3e-122">By closing one or more running applications, such as Visual Studio, Internet Explorer, OneNote, and others, you make the memory they were using available for the restore operation.</span></span> <span data-ttu-id="fac3e-123">È possibile riavviarle dopo il completamento del ripristino.</span><span class="sxs-lookup"><span data-stu-id="fac3e-123">You can restart them following the successful restore.</span></span>  
  
-   <span data-ttu-id="fac3e-124">Aumentare il valore di MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="fac3e-124">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
    <span data-ttu-id="fac3e-125">Nel frammento di codice seguente il valore di MAX_MEMORY_PERCENT per il pool di risorse PoolHk viene modificato al 70% della memoria installata.</span><span class="sxs-lookup"><span data-stu-id="fac3e-125">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="fac3e-126">Se il server è in esecuzione in una VM e non è dedicato, impostare il valore di MIN_MEMORY_PERCENT sullo stesso valore di MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="fac3e-126">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT to the same value as MAX_MEMORY_PERCENT.</span></span>   
    > <span data-ttu-id="fac3e-127">Per altre informazioni, vedere l'argomento [Procedure consigliate: Uso di OLTP in memoria in un ambiente di VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md).</span><span class="sxs-lookup"><span data-stu-id="fac3e-127">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
    ```sql  
  
    -- disable resource governor  
    ALTER RESOURCE GOVERNOR DISABLE  
  
    -- change the value of MAX_MEMORY_PERCENT  
    ALTER RESOURCE POOL PoolHk  
    WITH  
         ( MAX_MEMORY_PERCENT = 70 )  
    GO  
  
    -- reconfigure the Resource Governor  
    --    RECONFIGURE enables resource governor  
    ALTER RESOURCE GOVERNOR RECONFIGURE  
    GO  
  
    ```  
  
     <span data-ttu-id="fac3e-128">Per informazioni sui valori massimi per MAX_MEMORY_PERCENT vedere la sezione relativa alla [percentuale di memoria disponibile per gli indici e le tabelle ottimizzate per la memoria.](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes)</span><span class="sxs-lookup"><span data-stu-id="fac3e-128">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes)</span></span>
  
-   <span data-ttu-id="fac3e-129">Riconfigurare **max server memory**.</span><span class="sxs-lookup"><span data-stu-id="fac3e-129">Reconfigure **max server memory**.</span></span>  
    <span data-ttu-id="fac3e-130">Per informazioni sulla configurazione di **max server memory** vedere l'argomento [Ottimizzazione delle prestazioni del server tramite le opzioni di configurazione della memoria](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span><span class="sxs-lookup"><span data-stu-id="fac3e-130">For information on configuring **max server memory** see the topic [Optimizing Server Performance Using Memory Configuration Options](https://technet.microsoft.com/library/ms177455\(v=SQL.105\).aspx).</span></span>  
  
## <a name="resolve-impact-of-low-memory-or-oom-conditions-on-the-workload"></a><span data-ttu-id="fac3e-131">Risoluzione dell'impatto delle condizioni di memoria insufficiente sul carico di lavoro</span><span class="sxs-lookup"><span data-stu-id="fac3e-131">Resolve impact of low memory or OOM conditions on the workload</span></span>  
 <span data-ttu-id="fac3e-132">Ovviamente, è consigliabile non trovarsi in una situazione di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="fac3e-132">Obviously, it is best to not get into a low memory or OOM (Out of Memory) situation.</span></span> <span data-ttu-id="fac3e-133">Una buona pianificazione e un buon monitoraggio consentono di evitare le situazioni di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="fac3e-133">Good planning and monitoring can help avoid OOM situations.</span></span> <span data-ttu-id="fac3e-134">Tuttavia, nonostante l'accurata pianificazione non sempre è possibile prevedere le effettive esigenze e potrebbero verificarsi situazioni di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="fac3e-134">Still, the best planning does not always foresee what actually happens and you might end up with low memory or OOM.</span></span> <span data-ttu-id="fac3e-135">Sono disponibili due passaggi per risolvere una situazione di memoria insufficiente:</span><span class="sxs-lookup"><span data-stu-id="fac3e-135">There are two steps to recovering from OOM:</span></span>  
  
1.  [<span data-ttu-id="fac3e-136">Aprire una connessione amministrativa dedicata (DAC)</span><span class="sxs-lookup"><span data-stu-id="fac3e-136">Open a DAC (Dedicated Administrator Connection)</span></span>](#open-a-dac-dedicated-administrator-connection) 
  
2.  [<span data-ttu-id="fac3e-137">Intraprendere un'azione correttiva</span><span class="sxs-lookup"><span data-stu-id="fac3e-137">Take corrective action</span></span>](#take-corrective-action) 
  
### <a name="open-a-dac-dedicated-administrator-connection"></a><span data-ttu-id="fac3e-138">Aprire una connessione amministrativa dedicata (DAC)</span><span class="sxs-lookup"><span data-stu-id="fac3e-138">Open a DAC (Dedicated Administrator Connection)</span></span>  
 <span data-ttu-id="fac3e-139">Microsoft SQL Server fornisce una connessione amministrativa dedicata (DAC).</span><span class="sxs-lookup"><span data-stu-id="fac3e-139">Microsoft SQL Server provides a dedicated administrator connection (DAC).</span></span> <span data-ttu-id="fac3e-140">La connessione DAC consente a un amministratore di accedere a un'istanza in esecuzione del motore di database di SQL Server per risolvere i problemi presenti nel server, anche quando il server non risponde ad altre connessioni client.</span><span class="sxs-lookup"><span data-stu-id="fac3e-140">The DAC allows an administrator to access a running instance of SQL Server Database Engine to troubleshoot problems on the server-even when the server is unresponsive to other client connections.</span></span> <span data-ttu-id="fac3e-141">La connessione DAC è disponibile tramite l'utilità `sqlcmd` e SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="fac3e-141">The DAC is available through the `sqlcmd` utility and SQL Server Management Studio (SSMS).</span></span>  
  
 <span data-ttu-id="fac3e-142">Per informazioni sull'uso di `sqlcmd` e della connessione DAC, vedere [Utilizzo di una connessione amministrativa dedicata](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="fac3e-142">For guidance on using `sqlcmd` and DAC see [Using a Dedicated Administrator Connection](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span> <span data-ttu-id="fac3e-143">Per informazioni sull'uso della connessione DAC tramite SSMS, vedere [Procedura: Utilizzo della connessione amministrativa dedicata con SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span><span class="sxs-lookup"><span data-stu-id="fac3e-143">For guidance on using DAC through SSMS see [How to: Use the Dedicated Administrator Connection with SQL Server Management Studio](https://msdn.microsoft.com/library/ms178068.aspx).</span></span>  
  
### <a name="take-corrective-action"></a><span data-ttu-id="fac3e-144">Intraprendere un'azione correttiva</span><span class="sxs-lookup"><span data-stu-id="fac3e-144">Take corrective action</span></span>  
 <span data-ttu-id="fac3e-145">Per risolvere la condizione di memoria insufficiente, è necessario liberare la memoria esistente riducendone l'utilizzo o rendere disponibile una maggiore quantità di memoria per le tabelle in memoria.</span><span class="sxs-lookup"><span data-stu-id="fac3e-145">To resolve your OOM condition you need to either free up existing memory by reducing usage, or make more memory available to your in-memory tables.</span></span>  
  
#### <a name="free-up-existing-memory"></a><span data-ttu-id="fac3e-146">Liberare memoria esistente</span><span class="sxs-lookup"><span data-stu-id="fac3e-146">Free up existing memory</span></span>  
  
##### <a name="delete-non-essential-memory-optimized-table-rows-and-wait-for-garbage-collection"></a><span data-ttu-id="fac3e-147">Eliminare le righe non essenziali delle tabelle con ottimizzazione per la memoria e attendere la procedura di Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="fac3e-147">Delete non-essential memory optimized table rows and wait for garbage collection</span></span>  
 <span data-ttu-id="fac3e-148">È possibile rimuovere le righe non essenziali da una tabella con ottimizzazione per la memoria.</span><span class="sxs-lookup"><span data-stu-id="fac3e-148">You can remove non-essential rows from a memory optimized table.</span></span> <span data-ttu-id="fac3e-149">Il Garbage Collector restituisce la memoria usata da queste righe alla memoria disponibile.</span><span class="sxs-lookup"><span data-stu-id="fac3e-149">The garbage collector returns the memory used by these rows to available memory.</span></span> <span data-ttu-id="fac3e-150">.</span><span class="sxs-lookup"><span data-stu-id="fac3e-150">.</span></span> <span data-ttu-id="fac3e-151">Il motore OLTP in memoria raccoglie rapidamente le righe di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="fac3e-151">In-memory OLTP engine collects garbage rows aggressively.</span></span> <span data-ttu-id="fac3e-152">Tuttavia, una transazione con esecuzione prolungata può impedire il processo di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="fac3e-152">However, a long running transaction can prevent garbage collection.</span></span> <span data-ttu-id="fac3e-153">Ad esempio, nel caso di una transazione in esecuzione per 5 minuti, le versioni di riga create a causa delle operazioni di aggiornamento/eliminazione mentre la transazione era attiva non possono essere sottoposte al processo di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="fac3e-153">For example, if you have a transaction that runs for 5 minutes, any row versions created due to update/delete operations while the transaction was active can't be garbage collected.</span></span>  
  
##### <a name="move-one-or-more-rows-to-a-disk-based-table"></a><span data-ttu-id="fac3e-154">Spostare una o più righe in una tabella basata su disco</span><span class="sxs-lookup"><span data-stu-id="fac3e-154">Move one or more rows to a disk-based table</span></span>  
 <span data-ttu-id="fac3e-155">Gli articoli di Technet riportati di seguito offrono istruzioni sullo spostamento di righe da una tabella ottimizzata per la memoria a una tabella basata su disco.</span><span class="sxs-lookup"><span data-stu-id="fac3e-155">The following TechNet articles provide guidance on moving rows from a memory-optimized table to a disk-based table.</span></span>  
  
-   <span data-ttu-id="fac3e-156">[Partizionamento a livello di applicazione](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="fac3e-156">[Application-Level Partitioning](https://technet.microsoft.com/library/dn296452\(v=sql.120\).aspx)</span></span>  
  
-   <span data-ttu-id="fac3e-157">[Modello di applicazione per il partizionamento di tabelle con ottimizzazione per la memoria](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span><span class="sxs-lookup"><span data-stu-id="fac3e-157">[Application Pattern for Partitioning Memory-Optimized Tables](https://technet.microsoft.com/library/dn133171\(v=sql.120\).aspx)</span></span>  
  
#### <a name="increase-available-memory"></a><span data-ttu-id="fac3e-158">Aumentare la memoria disponibile</span><span class="sxs-lookup"><span data-stu-id="fac3e-158">Increase available memory</span></span>  
  
##### <a name="increase-value-of-max_memory_percent-on-the-resource-pool"></a><span data-ttu-id="fac3e-159">Aumentare il valore di MAX_MEMORY_PERCENT nel pool di risorse</span><span class="sxs-lookup"><span data-stu-id="fac3e-159">Increase value of MAX_MEMORY_PERCENT on the resource pool</span></span>  
 <span data-ttu-id="fac3e-160">Se non è stato creato un pool di risorse denominato per le tabelle in memoria, è consigliabile eseguire tale operazione e associare al pool i database di [!INCLUDE[hek_2](../../includes/hek-2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fac3e-160">If you have not created a named resource pool for your in-memory tables you should do that and bind your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to it.</span></span> <span data-ttu-id="fac3e-161">Per istruzioni sulla creazione e l'associazione dei database [a un pool di risorse, vedere l'argomento](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) Associazione di un database con tabelle con ottimizzazione per la memoria a un pool di risorse [!INCLUDE[hek_2](../../includes/hek-2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fac3e-161">See the topic [Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) for guidance on creating and binding your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] databases to a resource pool.</span></span>  
  
 <span data-ttu-id="fac3e-162">Se il database di [!INCLUDE[hek_2](../../includes/hek-2-md.md)] è associato a un pool di risorse, è possibile aumentare la percentuale di memoria a cui il pool può accedere.</span><span class="sxs-lookup"><span data-stu-id="fac3e-162">If your [!INCLUDE[hek_2](../../includes/hek-2-md.md)] database is bound to a resource pool you may be able to increase the percent of memory the pool can access.</span></span> <span data-ttu-id="fac3e-163">Per informazioni sulla modifica del valore di MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT per un pool di risorse, vedere l'argomento secondario [Cambiare MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT in un pool esistente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) .</span><span class="sxs-lookup"><span data-stu-id="fac3e-163">See the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool) for guidance on changing the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT for a resource pool.</span></span>  
  
 <span data-ttu-id="fac3e-164">Aumentare il valore di MAX_MEMORY_PERCENT.</span><span class="sxs-lookup"><span data-stu-id="fac3e-164">Increase the value of MAX_MEMORY_PERCENT.</span></span>   
<span data-ttu-id="fac3e-165">Nel frammento di codice seguente il valore di MAX_MEMORY_PERCENT per il pool di risorse PoolHk viene modificato al 70% della memoria installata.</span><span class="sxs-lookup"><span data-stu-id="fac3e-165">This code snippet changes MAX_MEMORY_PERCENT for the resource pool PoolHk to 70% of installed memory.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="fac3e-166">Se il server è in esecuzione in una VM e non è dedicato, impostare il valore di MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="fac3e-166">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="fac3e-167">Per altre informazioni, vedere l'argomento [Procedure consigliate: Uso di OLTP in memoria in un ambiente di VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md).</span><span class="sxs-lookup"><span data-stu-id="fac3e-167">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
```sql  
  
-- disable resource governor  
ALTER RESOURCE GOVERNOR DISABLE  
  
-- change the value of MAX_MEMORY_PERCENT  
ALTER RESOURCE POOL PoolHk  
WITH  
     ( MAX_MEMORY_PERCENT = 70 )  
GO  
  
-- reconfigure the Resource Governor  
--    RECONFIGURE enables resource governor  
ALTER RESOURCE GOVERNOR RECONFIGURE  
GO  
  
```  
  
 <span data-ttu-id="fac3e-168">Per informazioni sui valori massimi per MAX_MEMORY_PERCENT, vedere la sezione dell'argomento che riporta le [percentuali di memoria disponibile per indici e tabelle ottimizzate per la memoria](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span><span class="sxs-lookup"><span data-stu-id="fac3e-168">For information on maximum values for MAX_MEMORY_PERCENT see the topic section [Percent of memory available for memory-optimized tables and indexes](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#percent-of-memory-available-for-memory-optimized-tables-and-indexes).</span></span>  
  
##### <a name="install-additional-memory"></a><span data-ttu-id="fac3e-169">Installare memoria aggiuntiva</span><span class="sxs-lookup"><span data-stu-id="fac3e-169">Install additional memory</span></span>  
 <span data-ttu-id="fac3e-170">Infine, la soluzione migliore, se possibile, prevede l'installazione di ulteriore memoria fisica.</span><span class="sxs-lookup"><span data-stu-id="fac3e-170">Ultimately the best solution, if possible, is to install additional physical memory.</span></span> <span data-ttu-id="fac3e-171">In questo caso, tenere presente che probabilmente sarà possibile aumentare anche il valore di MAX_MEMORY_PERCENT (vedere l'argomento [Modificare il valore di MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT in un pool esistente](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)) poiché [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] potrebbe non necessitare di ulteriore memoria, consentendo di rendere disponibile la maggior parte se non tutta la memoria appena installata per il pool di risorse.</span><span class="sxs-lookup"><span data-stu-id="fac3e-171">If you do this, remember that you will probably be able to also increase the value of MAX_MEMORY_PERCENT (see the sub-topic [Change MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT on an existing pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md#change-min-memory-percent-and-max-memory-percent-on-an-existing-pool)) since [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] won't likely need more memory, allowing you to make most if not all of the newly installed memory available to the resource pool.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="fac3e-172">Se il server è in esecuzione in una VM e non è dedicato, impostare il valore di MIN_MEMORY_PERCENT e MAX_MEMORY_PERCENT sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="fac3e-172">If the server is running on a VM and is not dedicated, set the value of MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT to the same value.</span></span>   
> <span data-ttu-id="fac3e-173">Per altre informazioni, vedere l'argomento [Procedure consigliate: Uso di OLTP in memoria in un ambiente di VM](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md).</span><span class="sxs-lookup"><span data-stu-id="fac3e-173">See the topic [Best Practices: Using In-Memory OLTP in a VM environment](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md) for more information.</span></span>  
  
## <a name="resolve-page-allocation-failures-due-to-insufficient-memory-when-sufficient-memory-is-available"></a><span data-ttu-id="fac3e-174">Risoluzione degli errori di allocazione della pagina dovuti a memoria insufficiente quando è disponibile memoria sufficiente</span><span class="sxs-lookup"><span data-stu-id="fac3e-174">Resolve page allocation failures due to insufficient memory when sufficient memory is available</span></span>  
 <span data-ttu-id="fac3e-175">Se viene ricevuto il messaggio di errore "non è possibile consentire le allocazioni di pagine per il database ' *\<databaseName>* ' a causa di memoria insufficiente nel pool di risorse ' *\<resourcePoolName>* '.</span><span class="sxs-lookup"><span data-stu-id="fac3e-175">If you get the error message, "Disallowing page allocations for database '*\<databaseName>*' due to insufficient memory in the resource pool '*\<resourcePoolName>*'.</span></span> <span data-ttu-id="fac3e-176"><https://go.microsoft.com/fwlink/?LinkId=330673>Per ulteriori informazioni, vedere ''.</span><span class="sxs-lookup"><span data-stu-id="fac3e-176">See '<https://go.microsoft.com/fwlink/?LinkId=330673>' for more information."</span></span> <span data-ttu-id="fac3e-177">nel log degli errori quando la memoria fisica disponibile è sufficiente per allocare pagina, il problema può essere dovuto a Resource Governor disabilitato.</span><span class="sxs-lookup"><span data-stu-id="fac3e-177">in the error log when the available physical memory is sufficient to allocate the page, it may be due to a disabled Resource Governor.</span></span> <span data-ttu-id="fac3e-178">Quando Resource Governor è disabilitato MEMORYBROKER_FOR_RESERVE genera richieste di memoria artificiali.</span><span class="sxs-lookup"><span data-stu-id="fac3e-178">When the Resource Governor is disabled MEMORYBROKER_FOR_RESERVE induces artificial memory pressure.</span></span>  
  
 <span data-ttu-id="fac3e-179">Per risolvere questo problema, è necessario abilitare Resource Governor.</span><span class="sxs-lookup"><span data-stu-id="fac3e-179">To resolve this you need to enable the Resource Governor.</span></span>  
  
 <span data-ttu-id="fac3e-180">Per informazioni sui limiti e sulle restrizioni e per istruzioni sull'abilitazione di Resource Governor usando Esplora oggetti, proprietà di Resource Governor o Transact-SQL, vedere [Abilitare Resource Governor](https://technet.microsoft.com/library/bb895149.aspx) .</span><span class="sxs-lookup"><span data-stu-id="fac3e-180">See [Enable Resource Governor](https://technet.microsoft.com/library/bb895149.aspx) for information on Limits and Restrictions as well as guidance on enabling Resource Governor using Object Explorer, Resource Governor properties, or Transact-SQL.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fac3e-181">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="fac3e-181">See Also</span></span>  
 <span data-ttu-id="fac3e-182">[Gestione della memoria per OLTP in memoria](../../database-engine/managing-memory-for-in-memory-oltp.md) </span><span class="sxs-lookup"><span data-stu-id="fac3e-182">[Managing Memory for In-Memory OLTP](../../database-engine/managing-memory-for-in-memory-oltp.md) </span></span>  
 <span data-ttu-id="fac3e-183">[Monitorare e risolvere i problemi relativi all'utilizzo della memoria](monitor-and-troubleshoot-memory-usage.md) </span><span class="sxs-lookup"><span data-stu-id="fac3e-183">[Monitor and Troubleshoot Memory Usage](monitor-and-troubleshoot-memory-usage.md) </span></span>  
 <span data-ttu-id="fac3e-184">[a un pool di risorse, vedere l'argomento](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span><span class="sxs-lookup"><span data-stu-id="fac3e-184">[Bind a Database with Memory-Optimized Tables to a Resource Pool](bind-a-database-with-memory-optimized-tables-to-a-resource-pool.md) </span></span>  
 [<span data-ttu-id="fac3e-185">Procedure consigliate: uso di OLTP in memoria in un ambiente di macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="fac3e-185">Best Practices: Using In-Memory OLTP in a VM environment</span></span>](../../database-engine/using-in-memory-oltp-in-a-vm-environment.md)  
  
  
