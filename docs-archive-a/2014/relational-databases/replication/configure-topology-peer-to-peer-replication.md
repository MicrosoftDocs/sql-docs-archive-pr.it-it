---
title: Configura topologia (replica peer-to-peer) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql12.rep.p2pwizard.peers.f1
ms.assetid: 5377c59f-2e25-4852-a306-c87ae3dca9fd
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 2dfc09f5ae7f488afd46f29c301d11b7687e0a4b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624085"
---
# <a name="configure-topology-peer-to-peer-replication"></a><span data-ttu-id="94dca-102">Configura topologia (replica peer-to-peer)</span><span class="sxs-lookup"><span data-stu-id="94dca-102">Configure Topology (Peer-to-Peer Replication)</span></span>
  <span data-ttu-id="94dca-103">La pagina **Configura topologia** consente di eseguire attività di configurazione comuni, ad esempio l'aggiunta di nuovi nodi, l'eliminazione di nodi e l'aggiunta di nuove connessioni tra nodi esistenti.</span><span class="sxs-lookup"><span data-stu-id="94dca-103">Use the **Configure topology** page to perform common configuration tasks, such as adding new nodes, deleting nodes, and adding new connections between existing nodes.</span></span> <span data-ttu-id="94dca-104">Il nodo selezionato nella pagina **Pubblicazione** di questa procedura guidata viene visualizzato nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-104">The node you selected on the **Publication** page of this wizard is displayed on the design surface.</span></span> <span data-ttu-id="94dca-105">Per specificare le opzioni di configurazione, fare clic con il pulsante destro del mouse su un nodo, su una connessione o sull'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-105">To specify configuration options, right-click a node, a connection, or the design surface.</span></span>

> [!NOTE]
>  <span data-ttu-id="94dca-106">La Configurazione guidata topologia peer-to-peer richiede informazioni sulla topologia quando viene chiusa.</span><span class="sxs-lookup"><span data-stu-id="94dca-106">The Configure Peer to Peer Topology Wizard requests topology information when the wizard is closed.</span></span> <span data-ttu-id="94dca-107">Se la procedura guidata viene chiusa e riaperta prima che tutti i nodi rispondano alla richiesta di informazioni, è possibile che venga visualizzata una rete parziale.</span><span class="sxs-lookup"><span data-stu-id="94dca-107">If the wizard is closed and reopened before all nodes respond to the request for information, the wizard might show a partial network.</span></span>

## <a name="options"></a><span data-ttu-id="94dca-108">Opzioni</span><span class="sxs-lookup"><span data-stu-id="94dca-108">Options</span></span>
 <span data-ttu-id="94dca-109">La pagina **Configura topologia** contiene elementi e opzioni dell'interfaccia che sono disponibili quando si fa clic con il pulsante destro del mouse su un elemento.</span><span class="sxs-lookup"><span data-stu-id="94dca-109">The **Configure topology** page contains interface elements and options that are available when you right-click an element.</span></span> <span data-ttu-id="94dca-110">Nella tabella riportata di seguito viene descritto ogni elemento dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="94dca-110">The following table describes each interface element.</span></span>

|<span data-ttu-id="94dca-111">Elemento dell'interfaccia</span><span class="sxs-lookup"><span data-stu-id="94dca-111">Interface Element</span></span>|<span data-ttu-id="94dca-112">Descrizione</span><span class="sxs-lookup"><span data-stu-id="94dca-112">Description</span></span>|
|-----------------------|-----------------|
|<span data-ttu-id="94dca-113">Area di progettazione</span><span class="sxs-lookup"><span data-stu-id="94dca-113">Design surface</span></span>|<span data-ttu-id="94dca-114">Consente di visualizzare gli altri elementi dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="94dca-114">Displays other interface elements.</span></span> <span data-ttu-id="94dca-115">Per aggiungere elementi, fare clic con il pulsante destro del mouse sull'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-115">To add elements, right-click the design surface.</span></span>|
|<span data-ttu-id="94dca-116">![Primo nodo di una topologia](media/p2pwizard-firstnode.gif "Primo nodo di una topologia")</span><span class="sxs-lookup"><span data-stu-id="94dca-116">![The first node in a topology](media/p2pwizard-firstnode.gif "The first node in a topology")</span></span>|<span data-ttu-id="94dca-117">Nodo originale nella topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-117">The original node in the topology.</span></span> <span data-ttu-id="94dca-118">I nuovi nodi vengono inizializzati utilizzando una copia del database di pubblicazione dal nodo originale.</span><span class="sxs-lookup"><span data-stu-id="94dca-118">New nodes are initialized by using a copy of the publication database from the original node.</span></span>|
|<span data-ttu-id="94dca-119">![Nodo per il quale sono disponibili informazioni complete](media/p2pwizard-complete.gif "Nodo per cui si dispone di informazioni complete") o una versione successiva, per cui la replica dispone di informazioni complete.</span><span class="sxs-lookup"><span data-stu-id="94dca-119">![A node for which we have complete information](media/p2pwizard-complete.gif "A node for which we have complete information") or a later version, for which replication has complete information.</span></span> <span data-ttu-id="94dca-120">Per specificare le opzioni di configurazione, fare clic con il pulsante destro del mouse sul nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-120">To specify configuration options, right-click the node.</span></span>|
|<span data-ttu-id="94dca-121">![Nodo per cui si dispone di informazioni incomplete](media/p2pwizard-incomplete.gif "Nodo per cui si dispone di informazioni incomplete")</span><span class="sxs-lookup"><span data-stu-id="94dca-121">![A node for which we have incomplete information](media/p2pwizard-incomplete.gif "A node for which we have incomplete information")</span></span>|<span data-ttu-id="94dca-122">Nodo per cui la replica dispone di informazioni incomplete.</span><span class="sxs-lookup"><span data-stu-id="94dca-122">A node for which replication has incomplete information.</span></span> <span data-ttu-id="94dca-123">Per specificare le opzioni di configurazione, fare clic con il pulsante destro del mouse sul nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-123">To specify configuration options, right-click the node.</span></span> <span data-ttu-id="94dca-124">La replica dispone di informazioni incomplete a causa di una delle ragioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="94dca-124">Replication has incomplete information because of one of the following reasons:</span></span><br /><br /> <span data-ttu-id="94dca-125">Nel nodo viene eseguita un'istanza di [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] che non archivia tutti i metadati richiesti dalla procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="94dca-125">The node is running an instance of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], which does not store all the metadata required by the wizard.</span></span><br /><br /> <span data-ttu-id="94dca-126">Nel nodo viene eseguita una versione più recente di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], ma la replica non è in grado di recuperare le informazioni sulla sottoscrizione dal nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-126">The node is running a later version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], but replication cannot retrieve subscription information from the node.</span></span> <span data-ttu-id="94dca-127">Per risolvere questa situazione:</span><span class="sxs-lookup"><span data-stu-id="94dca-127">To troubleshoot this situation:</span></span><br /><span data-ttu-id="94dca-128">-Verificare che il database nel nodo sia online e che sia possibile connettersi utilizzando le stesse credenziali degli agenti di distribuzione che si connettono al nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-128">-Make sure that the database at the node is online and that you can connect to it by using the same credentials as the Distribution Agents that connect to the node.</span></span><br /><span data-ttu-id="94dca-129">-Assicurarsi che il agente di lettura log e tutti gli agenti di distribuzione che si connettono al nodo siano in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="94dca-129">-Make sure that the Log Reader Agent and all Distribution Agents that connect to the node are running.</span></span><br /><span data-ttu-id="94dca-130">-Assicurarsi che il timeout di aggiornamento sia impostato su un livello sufficientemente elevato per raccogliere tutte le informazioni sulla topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-130">-Make sure that the refresh timeout is set high enough to gather all topology information.</span></span> <span data-ttu-id="94dca-131">Per impostare il timeout, fare clic con il pulsante destro del mouse sull'area di progettazione, quindi scegliere **Imposta timeout aggiornamento**.</span><span class="sxs-lookup"><span data-stu-id="94dca-131">To set the time-out, right-click the design surface, and click **Set Refresh Timeout**.</span></span>|
|<span data-ttu-id="94dca-132">Linea grigia con frecce</span><span class="sxs-lookup"><span data-stu-id="94dca-132">Gray line with arrows</span></span>|<span data-ttu-id="94dca-133">Connessione tra due nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-133">The connection between two nodes.</span></span> <span data-ttu-id="94dca-134">Per aggiungere una connessione, fare clic con il pulsante destro del mouse su uno dei nodi che si desidera connettere.</span><span class="sxs-lookup"><span data-stu-id="94dca-134">To add a connection, right-click one of the nodes that you want to connect.</span></span> <span data-ttu-id="94dca-135">Per rimuovere una connessione, fare clic con il pulsante destro del mouse sulla connessione.</span><span class="sxs-lookup"><span data-stu-id="94dca-135">To remove a connection, right-click the connection.</span></span><br /><br /> <span data-ttu-id="94dca-136">Se la linea ha una sola freccia, la replica dispone di informazioni incomplete per uno dei nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-136">If the line has a single arrow, replication has incomplete information for one of the nodes.</span></span>|

### <a name="options-for-the-design-surface"></a><span data-ttu-id="94dca-137">Opzioni per l'area di progettazione</span><span class="sxs-lookup"><span data-stu-id="94dca-137">Options for the Design Surface</span></span>
 <span data-ttu-id="94dca-138">**Ridisegna grafico** Ridisegnare gli oggetti nell'area di progettazione senza aggiornare la topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-138">**Redraw Graph** Redraw the objects on the design surface without refreshing the topology.</span></span> <span data-ttu-id="94dca-139">Questa operazione potrebbe offrire una vista migliore della topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-139">Redrawing might provide a better view of the topology.</span></span>

 <span data-ttu-id="94dca-140">**Aggiorna topologia** Eseguire una query su ogni nodo della topologia e visualizzare informazioni aggiornate su ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-140">**Refresh Topology** Query each node in the topology, and display updated information about each node.</span></span> <span data-ttu-id="94dca-141">Se vi sono molti nodi, questo processo può richiedere parecchi minuti.</span><span class="sxs-lookup"><span data-stu-id="94dca-141">With many nodes, this process can take several minutes.</span></span>

 <span data-ttu-id="94dca-142">Se durante la procedura guidata vengono richieste informazioni sulla topologia e si chiude e si riapre la procedura guidata prima che tutti i nodi rispondano alla richiesta, in questa pagina potrebbero non essere visualizzati tutti i nodi della topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-142">If the wizard requests topology information, and then you close and reopen the wizard before all nodes respond to the request, this page might not display all nodes in the topology.</span></span>

 <span data-ttu-id="94dca-143">**Aggiungere un nuovo nodo peer** Aggiungere un'istanza di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] alla topologia peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="94dca-143">**Add a New Peer Node** Add an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the peer-to-peer topology.</span></span> <span data-ttu-id="94dca-144">L'aggiunta di un'istanza come nodo consente di creare una pubblicazione in tale istanza dopo il completamento della procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="94dca-144">Adding an instance as a node creates a publication at that instance after the wizard completes.</span></span> <span data-ttu-id="94dca-145">Dopo avere aggiunto il nodo, fare clic con il pulsante destro del mouse su di esso per aggiungere una connessione tra il nuovo nodo e un nodo esistente.</span><span class="sxs-lookup"><span data-stu-id="94dca-145">After you add the node, right-click it to add a connection between the new node and an existing node.</span></span>

 <span data-ttu-id="94dca-146">Per partecipare a una topologia peer-to-peer, l'istanza deve soddisfare i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="94dca-146">To participate in a peer-to-peer topology, the instance must meet the following requirements:</span></span>

-   <span data-ttu-id="94dca-147">Deve essere già configurata come server di distribuzione o deve essere associata a un server di distribuzione remoto.</span><span class="sxs-lookup"><span data-stu-id="94dca-147">It must already be configured as a Distributor or be associated with a remote Distributor.</span></span>

-   <span data-ttu-id="94dca-148">Deve contenere una copia del database coinvolto nella replica.</span><span class="sxs-lookup"><span data-stu-id="94dca-148">It must contain a copy of the database involved in replication.</span></span> <span data-ttu-id="94dca-149">Questa copia è in genere un backup ripristinato del database di pubblicazione originale.</span><span class="sxs-lookup"><span data-stu-id="94dca-149">This copy is typically a restored backup of the original publication database.</span></span>

 <span data-ttu-id="94dca-150">**Selezionare i nodi da visualizzare** Consente di selezionare i nodi da visualizzare nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-150">**Select Node(s) to View** Select which nodes to view on the design surface.</span></span> <span data-ttu-id="94dca-151">Questa opzione è utile se la topologia include molti di nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-151">This option is useful if the topology has a large number of nodes.</span></span> <span data-ttu-id="94dca-152">Tenere presente che è possibile aggiungere connessioni solo tra nodi visibili nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-152">Be aware that you can add connections only between nodes that are visible on the design surface.</span></span>

 <span data-ttu-id="94dca-153">**Imposta timeout aggiornamento** Specificare il periodo di tempo durante il quale il processo di aggiornamento può essere eseguito prima del timeout dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-153">**Set Refresh Timeout** Specify how long the refresh process can run before the operation times out.</span></span>

### <a name="options-for-each-node"></a><span data-ttu-id="94dca-154">Opzioni per ogni nodo</span><span class="sxs-lookup"><span data-stu-id="94dca-154">Options for Each Node</span></span>
 <span data-ttu-id="94dca-155">**Aggiungi una nuova connessione peer** Aggiungere una connessione tra due nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-155">**Add a New Peer Connection** Add a connection between two nodes.</span></span> <span data-ttu-id="94dca-156">Se, ad esempio, si aggiunge una connessione tra Nodo A e Nodo B, tramite la replica vengono aggiunte due sottoscrizioni: la prima consente a Nodo A di ricevere le modifiche dalla pubblicazione in Nodo B e la seconda consente a Nodo B di ricevere le modifiche dalla pubblicazione in Nodo A.</span><span class="sxs-lookup"><span data-stu-id="94dca-156">For example, if you add a connection between Node A and Node B, replication adds two subscriptions: The first enables Node A to receive changes from the publication at Node B, and the second enables Node B to receive changes from the publication at Node A.</span></span>

 <span data-ttu-id="94dca-157">**Elimina nodo peer** Rimuove un nodo dalla topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-157">**Delete Peer Node** Removes a node from the topology.</span></span> <span data-ttu-id="94dca-158">Se, ad esempio, si rimuove Nodo C, la pubblicazione in quel nodo viene rimossa.</span><span class="sxs-lookup"><span data-stu-id="94dca-158">For example, if you remove Node C, the publication at that node is removed.</span></span> <span data-ttu-id="94dca-159">Vengono rimosse anche le sottoscrizioni tra Nodo A e Nodo C e tra Nodo B e Nodo C.</span><span class="sxs-lookup"><span data-stu-id="94dca-159">Subscriptions between Node A and Node C, and Node B and Node C are also removed.</span></span> <span data-ttu-id="94dca-160">Il database in Nodo C non viene eliminato e la pubblicazione e la distribuzione non vengono disabilitate.</span><span class="sxs-lookup"><span data-stu-id="94dca-160">The database at Node C is not deleted, and publishing and distribution are not disabled.</span></span>

> [!NOTE]
>  <span data-ttu-id="94dca-161">Quando si configura la replica peer-to-peer, viene specificato un ID per ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="94dca-161">When you configure peer-to-peer replication, you specify an ID for each node.</span></span> <span data-ttu-id="94dca-162">Tale ID, che deve essere univoco in tutti i nodi nella topologia, viene archiviato nella colonna originator_id della tabella di sistema [MSpeer_originatorid_history](/sql/relational-databases/system-tables/mspeer-originatorid-history-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="94dca-162">This ID, which must be unique across all nodes in the topology, is stored in the originator_id column in the [MSpeer_originatorid_history](/sql/relational-databases/system-tables/mspeer-originatorid-history-transact-sql) system table.</span></span> <span data-ttu-id="94dca-163">Se un nodo viene rimosso dalla topologia, l'ID viene comunque conservato nella tabella della cronologia</span><span class="sxs-lookup"><span data-stu-id="94dca-163">If a node is removed from the topology, the ID is still retained in the history table.</span></span> <span data-ttu-id="94dca-164">per impedire falsi conflitti, qualora siano presenti modifiche provenienti dal nodo rimosso che continuano ad essere replicate nella topologia.</span><span class="sxs-lookup"><span data-stu-id="94dca-164">The ID is retained to prevent false conflicts from occurring if there are changes from the removed node that are still being replicated across the topology.</span></span> <span data-ttu-id="94dca-165">Se si desidera riutilizzare l'ID per un nuovo nodo, è necessario prima eliminarlo manualmente dalla tabella MSpeer_originatorid_history in tutti i nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-165">If you want to reuse the ID for a new node, you must first manually delete the ID from the MSpeer_originatorid_history table at all nodes.</span></span> <span data-ttu-id="94dca-166">Prima di eliminare un ID per un nodo, eseguire [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) per verificare che tutte le modifiche provenienti dal nodo siano state replicate.</span><span class="sxs-lookup"><span data-stu-id="94dca-166">Before you delete an ID for a node, execute [sp_requestpeerresponse](/sql/relational-databases/system-stored-procedures/sp-requestpeerresponse-transact-sql) to verify that all changes that originated from that node have been replicated.</span></span>

 <span data-ttu-id="94dca-167">**Connetti a tutti i nodi visualizzati** Consente di aggiungere connessioni tra il nodo selezionato e tutti gli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-167">**Connect to ALL Displayed Nodes** Adds connections between the selected node and all other nodes.</span></span> <span data-ttu-id="94dca-168">Se, ad esempio, si seleziona questa opzione per Nodo C in una topologia a tre nodi, tramite la replica vengono aggiunte quattro sottoscrizioni: due che consentono a Nodo A e Nodo B di ricevere le modifiche dalla pubblicazione in Nodo C e due che consentono a Nodo C di ricevere le modifiche dalle pubblicazioni in Nodo A e Nodo B.</span><span class="sxs-lookup"><span data-stu-id="94dca-168">For example, if you selected this option for Node C in a three node topology, replication adds four subscriptions: two that enable Node A and Node B to receive changes from the publication at Node C, and two that enable Node C to receive changes from the publications at Node A and Node B.</span></span>

 <span data-ttu-id="94dca-169">**Selezionare i nodi da visualizzare** Consente di selezionare i nodi da visualizzare nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-169">**Select Node(s) to View** Select which nodes to view on the design surface.</span></span> <span data-ttu-id="94dca-170">Questa opzione è utile se la topologia include molti di nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-170">This option is useful if the topology has a large number of nodes.</span></span> <span data-ttu-id="94dca-171">Tenere presente che è possibile aggiungere connessioni solo tra nodi visibili nell'area di progettazione.</span><span class="sxs-lookup"><span data-stu-id="94dca-171">Be aware that you can add connections only between nodes that are visible on the design surface.</span></span>

### <a name="options-for-the-connection-arrows"></a><span data-ttu-id="94dca-172">Opzioni per le frecce di connessione</span><span class="sxs-lookup"><span data-stu-id="94dca-172">Options for the Connection Arrows</span></span>
 <span data-ttu-id="94dca-173">**Rimuovi connessione peer** Rimuovere una connessione tra due nodi.</span><span class="sxs-lookup"><span data-stu-id="94dca-173">**Remove Peer Connection** Remove a connection between two nodes.</span></span> <span data-ttu-id="94dca-174">Se, ad esempio, si rimuove una connessione tra Nodo A e Nodo B, tramite la replica vengono eliminate due sottoscrizioni: quella che consente a Nodo A di ricevere le modifiche dalla pubblicazione in Nodo B e quella che consente a Nodo B di ricevere le modifiche dalla pubblicazione in Nodo A.</span><span class="sxs-lookup"><span data-stu-id="94dca-174">For example, if you remove a connection between Node A and Node B, replication drops two subscriptions: the one that enables Node A to receive changes from the publication at Node B, and the one that enables Node B to receive changes from the publication at Node A.</span></span>

## <a name="see-also"></a><span data-ttu-id="94dca-175">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="94dca-175">See Also</span></span>
 <span data-ttu-id="94dca-176">[Configurare la pubblicazione e la distribuzione](configure-publishing-and-distribution.md) [amministrare una topologia peer-to-peer &#40;la programmazione Transact-SQL della replica&#41;la](administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) [replica transazionale peer-to-peer](transactional/peer-to-peer-transactional-replication.md)</span><span class="sxs-lookup"><span data-stu-id="94dca-176">[Configure Publishing and Distribution](configure-publishing-and-distribution.md) [Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) [Peer-to-Peer Transactional Replication](transactional/peer-to-peer-transactional-replication.md)</span></span>


