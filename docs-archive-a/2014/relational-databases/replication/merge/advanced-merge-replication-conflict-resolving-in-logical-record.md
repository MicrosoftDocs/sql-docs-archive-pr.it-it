---
title: Rilevamento e risoluzione dei conflitti nei record logici | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- logical records [SQL Server replication]
- conflict resolution [SQL Server replication], merge replication
ms.assetid: f2e55040-ca69-4ccf-97d1-c362e1633f26
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f9822cd153af67538a36a894de0ec1b4716e54cf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87623220"
---
# <a name="detecting-and-resolving-conflicts-in-logical-records"></a><span data-ttu-id="43ec8-102">Rilevamento e risoluzione dei conflitti nei record logici</span><span class="sxs-lookup"><span data-stu-id="43ec8-102">Detecting and Resolving Conflicts in Logical Records</span></span>
  <span data-ttu-id="43ec8-103">In questo argomento vengono illustrate le varie combinazioni di metodi possibili per il rilevamento e la risoluzione dei conflitti nell'utilizzo di record logici.</span><span class="sxs-lookup"><span data-stu-id="43ec8-103">This topic covers the various combinations of conflict detection and conflict resolution approaches possible when using logical records.</span></span> <span data-ttu-id="43ec8-104">Nella replica di merge si verificano conflitti quando più di un nodo modifica gli stessi dati oppure quando, durante la replica di modifiche, si riscontrano determinati tipi di errori, ad esempio la violazione di un vincolo.</span><span class="sxs-lookup"><span data-stu-id="43ec8-104">A conflict in merge replication occurs when more than one node changes the same data, or merge replication encounters certain types of errors, such as a constraint violation, when replicating changes.</span></span> <span data-ttu-id="43ec8-105">Per ulteriori informazioni sul rilevamento e sulla risoluzione dei conflitti, vedere [Advanced Merge Replication Conflict Detection and Resolution](advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="43ec8-105">For more information about conflict detection and resolution, see [Advanced Merge Replication Conflict Detection and Resolution](advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>

 <span data-ttu-id="43ec8-106">Per specificare il livello di rilevamento e risoluzione dei conflitti di un articolo, vedere [Specifica del livello di rilevamento e risoluzione dei conflitti per gli articoli di merge](../publish/specify-merge-replication-properties.md#interactive-conflict-resolution).</span><span class="sxs-lookup"><span data-stu-id="43ec8-106">To specify the conflict tracking and resolution level for an article, see [Specify the Conflict Tracking and Resolution Level for Merge Articles](../publish/specify-merge-replication-properties.md#interactive-conflict-resolution).</span></span>

## <a name="conflict-detection"></a><span data-ttu-id="43ec8-107">Rilevamento dei conflitti</span><span class="sxs-lookup"><span data-stu-id="43ec8-107">Conflict Detection</span></span>
 <span data-ttu-id="43ec8-108">La modalità con cui vengono rilevati i conflitti per i record logici è determinata da due proprietà degli articoli: **column_tracking** e **logical_record_level_conflict_detection**.</span><span class="sxs-lookup"><span data-stu-id="43ec8-108">The way in which conflicts are detected for logical records is determined by two article properties: **column_tracking** and **logical_record_level_conflict_detection**.</span></span> [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] <span data-ttu-id="43ec8-109">e versioni successive supportano anche rilevamento a livello di record logico.</span><span class="sxs-lookup"><span data-stu-id="43ec8-109">and later versions also support logical record-level detection.</span></span>

 <span data-ttu-id="43ec8-110">La proprietà articolo **logical_record_level_conflict_detection** può essere impostata su TRUE o FALSE.</span><span class="sxs-lookup"><span data-stu-id="43ec8-110">The **logical_record_level_conflict_detection** article property can be set to TRUE or FALSE.</span></span> <span data-ttu-id="43ec8-111">Il valore deve essere impostato solo per l'articolo padre di livello principale e verrà ignorato per gli articoli figlio.</span><span class="sxs-lookup"><span data-stu-id="43ec8-111">The value should only be set for the top-level parent article and will be ignored by child articles.</span></span> <span data-ttu-id="43ec8-112">Se questo valore è impostato su FALSE, nella replica di tipo merge i conflitti vengono rilevati come nelle precedenti versioni di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], ovvero esclusivamente in base al valore della proprietà **column_tracking** dell'articolo.</span><span class="sxs-lookup"><span data-stu-id="43ec8-112">If this value is FALSE, merge replication detects conflicts as in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], based solely on the value of the **column_tracking** property for the article.</span></span> <span data-ttu-id="43ec8-113">Se il valore è impostato su TRUE, la proprietà **column_tracking** dell'articolo viene ignorata e qualora vengano apportate modifiche in qualsiasi punto del record logico viene rilevato un conflitto.</span><span class="sxs-lookup"><span data-stu-id="43ec8-113">If this value is TRUE, merge replication will ignore the **column_tracking** property of the article, and detect a conflict if changes are made anywhere in the logical record.</span></span> <span data-ttu-id="43ec8-114">Ad esempio, si consideri lo scenario seguente:</span><span class="sxs-lookup"><span data-stu-id="43ec8-114">For example, consider this scenario:</span></span>

 <span data-ttu-id="43ec8-115">![Record logico per tre tabelle con valori](../media/logical-records-05.gif "Record logico per tre tabelle con valori")</span><span class="sxs-lookup"><span data-stu-id="43ec8-115">![Three table logical record with values](../media/logical-records-05.gif "Three table logical record with values")</span></span>

 <span data-ttu-id="43ec8-116">Viene rilevato un conflitto se due utenti modificano uno qualsiasi dei valori del record logico Customer2 nelle tabelle **Customers**, **Orders**o **OrderItems** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-116">A conflict is detected if two users change any values for the Customer2 logical record in the **Customers**, **Orders**, or **OrderItems** tables.</span></span> <span data-ttu-id="43ec8-117">In questo esempio vengono considerate modifiche apportate mediante un'istruzione UPDATE, tuttavia è possibile rilevare anche conflitti causati da modifiche apportate con istruzioni INSERT o DELETE.</span><span class="sxs-lookup"><span data-stu-id="43ec8-117">This example involves changes made via an UPDATE statement, but the conflict can also be detected by changes made with INSERT or DELETE statements.</span></span>

## <a name="conflict-resolution"></a><span data-ttu-id="43ec8-118">Risoluzione dei conflitti</span><span class="sxs-lookup"><span data-stu-id="43ec8-118">Conflict Resolution</span></span>
 <span data-ttu-id="43ec8-119">Per impostazione predefinita nella replica di tipo merge per risolvere i conflitti si utilizza logica basata su priorità.</span><span class="sxs-lookup"><span data-stu-id="43ec8-119">By default, merge replication uses priority-based logic to resolve conflicts.</span></span> <span data-ttu-id="43ec8-120">Se in due database di sottoscrizione viene apportata una modifica in conflitto, ha la priorità la modifica del Sottoscrittore con la priorità di sottoscrizione più elevata. Nel caso in cui la priorità sia uguale, viene applicata per prima la modifica che raggiunge il server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="43ec8-120">If a conflicting change is made in two Subscriber databases, the change for the Subscriber with the higher subscription priority wins, or if the priority is the same, the first change to reach the Publisher wins.</span></span> <span data-ttu-id="43ec8-121">Nel rilevamento a livello di riga e di colonna, la riga confermata sovrascrive interamente la riga non confermata.</span><span class="sxs-lookup"><span data-stu-id="43ec8-121">With row-level and column-level detection, the entire winning row always overwrites the losing row.</span></span>

 <span data-ttu-id="43ec8-122">La proprietà articolo **logical_record_level_conflict_resolution** può essere impostata su TRUE o FALSE.</span><span class="sxs-lookup"><span data-stu-id="43ec8-122">The **logical_record_level_conflict_resolution** article property can be set to TRUE or FALSE.</span></span> <span data-ttu-id="43ec8-123">Il valore deve essere impostato solo per l'articolo padre di livello principale e verrà ignorato per gli articoli figlio.</span><span class="sxs-lookup"><span data-stu-id="43ec8-123">The value should only be set for the top-level parent article and will be ignored by child articles.</span></span> <span data-ttu-id="43ec8-124">Se il valore è impostato su TRUE, il record logico confermato sovrascrive interamente il record logico non confermato.</span><span class="sxs-lookup"><span data-stu-id="43ec8-124">If the value is TRUE, the entire winning logical record overwrites the losing logical record.</span></span> <span data-ttu-id="43ec8-125">Se il valore è impostato su FALSE, le singole righe confermate possono provenire da diversi Sottoscrittori o server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="43ec8-125">If it is FALSE, individual winning rows can come from different Subscribers or Publishers.</span></span> <span data-ttu-id="43ec8-126">Ad esempio, il Sottoscrittore A può prevalere in un conflitto in una riga della tabella **Orders** , mentre il Sottoscrittore B può prevalere in una riga correlata nella tabella **OrderItems** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-126">For example, Subscriber A could win a conflict on a row from the **Orders** table, and Subscriber B could win on a related row from the **OrderItems** table.</span></span> <span data-ttu-id="43ec8-127">Il risultato è un record logico contenente la riga **Orders** del Sottoscrittore A e la riga **OrderItems** del Sottoscrittore B.</span><span class="sxs-lookup"><span data-stu-id="43ec8-127">The result is a logical record with the **Orders** row from Subscriber A and the **OrderItems** row from Subscriber B.</span></span>

## <a name="interaction-of-conflict-resolution-and-detection-settings"></a><span data-ttu-id="43ec8-128">Interazione delle impostazioni di rilevamento e risoluzione dei conflitti</span><span class="sxs-lookup"><span data-stu-id="43ec8-128">Interaction of Conflict Resolution and Detection Settings</span></span>
 <span data-ttu-id="43ec8-129">Il risultato dei conflitti dipende dall'interazione delle impostazioni di rilevamento e risoluzione dei conflitti.</span><span class="sxs-lookup"><span data-stu-id="43ec8-129">The outcome of conflicts depends on the interaction of conflict detection and resolution settings.</span></span> <span data-ttu-id="43ec8-130">Negli esempi seguenti si presuppone l'utilizzo della risoluzione dei conflitti basata sulle priorità.</span><span class="sxs-lookup"><span data-stu-id="43ec8-130">For the examples below, it is assumed that the priority-based conflict resolution is being used.</span></span> <span data-ttu-id="43ec8-131">Nel caso di record logici esistono le possibilità seguenti:</span><span class="sxs-lookup"><span data-stu-id="43ec8-131">When using logical records, the possibilities are:</span></span>

-   <span data-ttu-id="43ec8-132">Rilevamento a livello di riga o di colonna, risoluzione a livello di riga</span><span class="sxs-lookup"><span data-stu-id="43ec8-132">Row or column level detection, row level resolution</span></span>

-   <span data-ttu-id="43ec8-133">Rilevamento a livello di colonna, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-133">Column level detection, logical record resolution</span></span>

-   <span data-ttu-id="43ec8-134">Rilevamento a livello di riga, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-134">Row level detection, logical record resolution</span></span>

-   <span data-ttu-id="43ec8-135">Rilevamento a livello di record logico, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-135">Logical record detection, logical record resolution</span></span>

### <a name="row-or-column-level-detection-row-level-resolution"></a><span data-ttu-id="43ec8-136">Rilevamento a livello di riga o di colonna, risoluzione a livello di riga</span><span class="sxs-lookup"><span data-stu-id="43ec8-136">Row or Column Level Detection, Row Level Resolution</span></span>
 <span data-ttu-id="43ec8-137">In questo esempio, la pubblicazione è configurata come segue:</span><span class="sxs-lookup"><span data-stu-id="43ec8-137">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="43ec8-138">**column_tracking** è impostata su TRUE o FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-138">**column_tracking** is TRUE or FALSE</span></span>

-   <span data-ttu-id="43ec8-139">**logical_record_level_conflict_detection** è impostata su FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-139">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="43ec8-140">**logical_record_level_conflict_resolution** è impostata su FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-140">**logical_record_level_conflict_resolution** is FALSE</span></span>

 <span data-ttu-id="43ec8-141">In questo caso, il rilevamento è a livello di riga o di colonna e la risoluzione è a livello di riga.</span><span class="sxs-lookup"><span data-stu-id="43ec8-141">In this case, detection is at the row or column level and resolution is at the row level.</span></span> <span data-ttu-id="43ec8-142">Queste impostazioni consentono di replicare tutte le modifiche apportate a un record logico come singola unità, senza rilevare o risolvere conflitti a livello del record logico.</span><span class="sxs-lookup"><span data-stu-id="43ec8-142">These settings are used to take advantage of having all changes to a logical record replicate as a unit, but without conflict detection or resolution at the logical record level.</span></span>

### <a name="column-level-detection-logical-record-resolution"></a><span data-ttu-id="43ec8-143">Rilevamento a livello di colonna, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-143">Column Level Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="43ec8-144">In questo esempio, la pubblicazione è configurata come segue:</span><span class="sxs-lookup"><span data-stu-id="43ec8-144">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="43ec8-145">**column_tracking** è impostata su TRUE</span><span class="sxs-lookup"><span data-stu-id="43ec8-145">**column_tracking** is TRUE</span></span>

-   <span data-ttu-id="43ec8-146">**logical_record_level_conflict_detection** è impostata su FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-146">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="43ec8-147">**logical_record_level_conflict_resolution** è impostata su TRUE</span><span class="sxs-lookup"><span data-stu-id="43ec8-147">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="43ec8-148">Un server di pubblicazione e un Sottoscrittore dispongono dello stesso set di dati iniziale e tra le tabelle **orders** e **customers** viene definito un record logico.</span><span class="sxs-lookup"><span data-stu-id="43ec8-148">A Publisher and Subscriber start with the same data set, and a logical record is defined between the **orders** and **customers** tables.</span></span> <span data-ttu-id="43ec8-149">Il server di pubblicazione modifica la colonna **custcol1** della tabella **customers** e la colonna **ordercol1** della tabella **orders** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-149">The Publisher changes the **custcol1** column in the **customers** table and the **ordercol1** in the **orders** table.</span></span> <span data-ttu-id="43ec8-150">Il Sottoscrittore modifica la stessa riga della colonna **custcol1** nella tabella **customers** e la stessa riga della colonna **ordercol2** nella tabella **orders** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-150">The Subscriber changes **custcol1** in the same row of the **customers** table and the **ordercol2** column in the same row of the **orders** table.</span></span> <span data-ttu-id="43ec8-151">Le modifiche apportate alla stessa colonna della tabella **customers** risultano in conflitto, mentre le modifiche apportate alla tabella **orders** non lo sono.</span><span class="sxs-lookup"><span data-stu-id="43ec8-151">The changes to the same column in the **customer** table result in a conflict, but the changes to the **orders** table are not in conflict.</span></span>

 <span data-ttu-id="43ec8-152">Dato che i conflitti vengono risolti a livello dei record logici, le modifiche confermate apportate nel server di pubblicazione sostituiscono le modifiche inserite nelle tabelle del Sottoscrittore durante l'elaborazione della replica.</span><span class="sxs-lookup"><span data-stu-id="43ec8-152">Because the conflicts are resolved at the logical record level, the winning changes made at the Publisher replace the changes made in the Subscriber tables during replication processing.</span></span>

 <span data-ttu-id="43ec8-153">![Serie di tabelle che visualizzano le modifiche alle righe correlate](../media/logical-records-06.gif "Serie di tabelle che visualizzano le modifiche alle righe correlate")</span><span class="sxs-lookup"><span data-stu-id="43ec8-153">![Series of tables showing changes to related rows](../media/logical-records-06.gif "Series of tables showing changes to related rows")</span></span>

### <a name="row-level-detection-logical-record-resolution"></a><span data-ttu-id="43ec8-154">Rilevamento a livello di riga, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-154">Row Level Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="43ec8-155">In questo esempio, la pubblicazione è configurata come segue:</span><span class="sxs-lookup"><span data-stu-id="43ec8-155">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="43ec8-156">**column_tracking** è impostata su FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-156">**column_tracking** is FALSE</span></span>

-   <span data-ttu-id="43ec8-157">**logical_record_level_conflict_detection** è impostata su FALSE</span><span class="sxs-lookup"><span data-stu-id="43ec8-157">**logical_record_level_conflict_detection** is FALSE</span></span>

-   <span data-ttu-id="43ec8-158">**logical_record_level_conflict_resolution** è impostata su TRUE</span><span class="sxs-lookup"><span data-stu-id="43ec8-158">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="43ec8-159">Un server di pubblicazione e un Sottoscrittore dispongono dello stesso set di dati iniziale.</span><span class="sxs-lookup"><span data-stu-id="43ec8-159">A Publisher and Subscriber start with the same data set.</span></span> <span data-ttu-id="43ec8-160">Il server di pubblicazione modifica la colonna **custcol1** della tabella **customers** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-160">The Publisher changes the **custcol1** column in the **customers** table.</span></span> <span data-ttu-id="43ec8-161">Il Sottoscrittore modifica la colonna **custcol12** della tabella **customers** e la colonna **ordercol2** della tabella **orders** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-161">The Subscriber changes **custcol2** in the **customers** table and the **ordercol2** column in the **orders** table.</span></span> <span data-ttu-id="43ec8-162">Le modifiche apportate alla stessa riga della tabella **customers** risultano in conflitto, mentre le modifiche apportate nel Sottoscrittore alla tabella **orders** non lo sono.</span><span class="sxs-lookup"><span data-stu-id="43ec8-162">The changes to the same row in the **customers** table result in a conflict, but the Subscriber changes to the **orders** table are not in conflict.</span></span>

 <span data-ttu-id="43ec8-163">Dato che i conflitti vengono risolti a livello dei record logici, le modifiche confermate apportate nel server di pubblicazione sostituiscono le modifiche inserite nelle tabelle del Sottoscrittore durante la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="43ec8-163">Because the conflicts are resolved at the logical record level, during synchronization the winning changes made at the Publisher replace the changes made in the Subscriber tables.</span></span>

 <span data-ttu-id="43ec8-164">![Serie di tabelle che visualizzano le modifiche alle righe correlate](../media/logical-records-07.gif "Serie di tabelle che visualizzano le modifiche alle righe correlate")</span><span class="sxs-lookup"><span data-stu-id="43ec8-164">![Series of tables showing changes to related rows](../media/logical-records-07.gif "Series of tables showing changes to related rows")</span></span>

### <a name="logical-record-detection-logical-record-resolution"></a><span data-ttu-id="43ec8-165">Rilevamento a livello di record logico, risoluzione a livello di record logico</span><span class="sxs-lookup"><span data-stu-id="43ec8-165">Logical Record Detection, Logical Record Resolution</span></span>
 <span data-ttu-id="43ec8-166">In questo esempio, la pubblicazione è configurata come segue:</span><span class="sxs-lookup"><span data-stu-id="43ec8-166">In this example, the publication is configured with:</span></span>

-   <span data-ttu-id="43ec8-167">**logical_record_level_conflict_detection** è impostata su TRUE</span><span class="sxs-lookup"><span data-stu-id="43ec8-167">**logical_record_level_conflict_detection** is TRUE</span></span>

-   <span data-ttu-id="43ec8-168">**logical_record_level_conflict_resolution** è impostata su TRUE</span><span class="sxs-lookup"><span data-stu-id="43ec8-168">**logical_record_level_conflict_resolution** is TRUE</span></span>

 <span data-ttu-id="43ec8-169">Un server di pubblicazione e un Sottoscrittore dispongono dello stesso set di dati iniziale.</span><span class="sxs-lookup"><span data-stu-id="43ec8-169">A Publisher and Subscriber start with the same data set.</span></span> <span data-ttu-id="43ec8-170">Il server di pubblicazione modifica la colonna **custcol1** della tabella **customers** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-170">The Publisher changes the **custcol1** column in the **customers** table.</span></span> <span data-ttu-id="43ec8-171">Il Sottoscrittore modifica la colonna **ordercol1** della tabella **orders** .</span><span class="sxs-lookup"><span data-stu-id="43ec8-171">The Subscriber changes the **ordercol1** column in the **orders** table.</span></span> <span data-ttu-id="43ec8-172">Non vi sono modifiche alla stessa riga o colonna. Tuttavia, dato che le modifiche sono state apportate allo stesso record logico per **custid**=1, le modifiche vengono rilevate come conflitto a livello dei record logici.</span><span class="sxs-lookup"><span data-stu-id="43ec8-172">There are no changes to the same row or columns, but because the changes are made in the same logical record for **custid**=1, the changes are detected as a conflict at the logical record level.</span></span>

 <span data-ttu-id="43ec8-173">Dato che i conflitti vengono ugualmente risolti a livello dei record logici, la modifica confermata apportata nel server di pubblicazione sostituisce la modifica inserita nelle tabelle del Sottoscrittore durante la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="43ec8-173">Because the conflicts are also resolved at the logical record level, during synchronization the winning change made at the Publisher replaces the change made in the Subscriber tables.</span></span>

 <span data-ttu-id="43ec8-174">![Serie di tabelle che visualizzano le modifiche alle righe correlate](../media/logical-records-08.gif "Serie di tabelle che visualizzano le modifiche alle righe correlate")</span><span class="sxs-lookup"><span data-stu-id="43ec8-174">![Series of tables showing changes to related rows](../media/logical-records-08.gif "Series of tables showing changes to related rows")</span></span>

## <a name="see-also"></a><span data-ttu-id="43ec8-175">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="43ec8-175">See Also</span></span>
 [<span data-ttu-id="43ec8-176">Raggruppare modifiche alle righe correlate con record logici</span><span class="sxs-lookup"><span data-stu-id="43ec8-176">Group Changes to Related Rows with Logical Records</span></span>](group-changes-to-related-rows-with-logical-records.md)


