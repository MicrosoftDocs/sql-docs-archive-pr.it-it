---
title: Filtri di riga con parametri | Microsoft Docs
ms.custom: ''
ms.date: 06/02/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], dynamic filters
- merge replication [SQL Server replication], dynamic filters
- parameterized filters [SQL Server replication]
- filters [SQL Server replication], dynamic
- merge replication parameterized filters [SQL Server replication]
- publications [SQL Server replication], parameterized filters
- parameterized filters [SQL Server replication], about parameterized filters
- filters [SQL Server replication], parameterized
- dynamic filters [SQL Server replication]
ms.assetid: b48a6825-068f-47c8-afdc-c83540da4639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a293d5dfc6bfbdf66afb680f0604117e2cc02b2d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624076"
---
# <a name="parameterized-row-filters"></a><span data-ttu-id="22fd9-102">Filtri di riga con parametri</span><span class="sxs-lookup"><span data-stu-id="22fd9-102">Parameterized Row Filters</span></span>
  <span data-ttu-id="22fd9-103">I filtri di riga con parametri consentono l'invio di partizioni di dati diverse a Sottoscrittori diversi senza che sia necessario creare più pubblicazioni. Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], i filtri con parametri vengono definiti filtri dinamici.</span><span class="sxs-lookup"><span data-stu-id="22fd9-103">Parameterized row filters allow different partitions of data to be sent to different Subscribers without requiring multiple publications to be created (parameterized filters were referred to as dynamic filters in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="22fd9-104">Una partizione è un subset delle righe di una tabella. In base alle impostazioni scelte durante la creazione di un filtro di riga con parametri, ogni riga di una tabella pubblicata può appartenere a un'unica partizione, con la conseguente produzione di partizioni non sovrapposte, o a due o più partizioni, con la conseguente produzione di partizioni sovrapposte.</span><span class="sxs-lookup"><span data-stu-id="22fd9-104">A partition is a subset of the rows in a table; depending on the settings chosen when creating a parameterized row filter, each row in a published table can belong to one partition only (which produces nonoverlapping partitions) or to two or more partitions (which produces overlapping partitions).</span></span>  
  
 <span data-ttu-id="22fd9-105">È possibile condividere le partizioni non sovrapposte tra sottoscrizioni oppure limitarle in modo che solo una sottoscrizione riceva una determinata partizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-105">Nonoverlapping partitions can be shared among subscriptions or they can be restricted so that only one subscription receives a given partition.</span></span> <span data-ttu-id="22fd9-106">Le impostazioni che controllano il comportamento delle partizioni vengono descritte nella sezione "Utilizzo delle opzioni di filtro appropriate" di seguito in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="22fd9-106">The settings that control partition behavior are described in "Using the Appropriate Filtering Options" later in this topic.</span></span> <span data-ttu-id="22fd9-107">L'utilizzo di tali impostazioni consente di personalizzare il filtro con parametri in base ai requisiti dell'applicazione e delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="22fd9-107">Using these settings you can tailor parameterized filtering according to application and performance requirements.</span></span> <span data-ttu-id="22fd9-108">In generale, le partizioni sovrapposte offrono maggiore flessibilità, mentre le partizioni non sovrapposte replicate in una singola sottoscrizione garantiscono prestazioni superiori.</span><span class="sxs-lookup"><span data-stu-id="22fd9-108">In general, overlapping partitions allow for greater flexibility, and nonoverlapping partitions replicated to a single subscription provide better performance.</span></span>  
  
 <span data-ttu-id="22fd9-109">I filtri con parametri vengono utilizzati in una tabella singola e vengono in genere uniti ai filtri join per estendere il filtro alle tabelle correlate.</span><span class="sxs-lookup"><span data-stu-id="22fd9-109">Parameterized filters are used on a single table and are typically combined with join filters to extend filtering to related tables.</span></span> <span data-ttu-id="22fd9-110">Per altre informazioni, vedere [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-110">For more information, see [Join Filters](join-filters.md).</span></span>  
  
 <span data-ttu-id="22fd9-111">Per definire o modificare un filtro di riga con parametri, vedere [Definizione e modifica di un filtro di riga con parametri per un articolo di merge](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-111">To define or modify a parameterized row filter, see [Define and Modify a Parameterized Row Filter for a Merge Article](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
## <a name="how-parameterized-filters-work"></a><span data-ttu-id="22fd9-112">Modalità di funzionamento dei filtri con parametri</span><span class="sxs-lookup"><span data-stu-id="22fd9-112">How Parameterized Filters Work</span></span>  
 <span data-ttu-id="22fd9-113">Un filtro di riga con parametri utilizza una clausola WHERE per selezionare i dati appropriati da pubblicare.</span><span class="sxs-lookup"><span data-stu-id="22fd9-113">A parameterized row filter uses a WHERE clause to select the appropriate data to be published.</span></span> <span data-ttu-id="22fd9-114">Anziché specificare un valore letterale nella clausola, come avviene con il filtro di riga statico, si specificano una o entrambe le funzioni di sistema seguenti: SUSER_SNAME() e HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="22fd9-114">Rather than specifying a literal value in the clause (as you do with a static row filter), you specify one or both of the following system functions: SUSER_SNAME() and HOST_NAME().</span></span> <span data-ttu-id="22fd9-115">È anche possibile utilizzare funzioni definite dall'utente, ma è necessario che le funzioni di sistema SUSER_SNAME() o HOST_NAME() siano incluse nel corpo della funzione oppure vengano valutate, ad esempio `MyUDF(SUSER_SNAME()`.</span><span class="sxs-lookup"><span data-stu-id="22fd9-115">User-defined functions can also be used, but they must include SUSER_SNAME() or HOST_NAME() in the body of the function, or evaluate one of these system functions (such as `MyUDF(SUSER_SNAME()`).</span></span> <span data-ttu-id="22fd9-116">Se una funzione definita dall'utente include SUSER_SNAME() o HOST_NAME() nel corpo della funzione, non è possibile passare parametri alla funzione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-116">If a user-defined function includes SUSER_SNAME() or HOST_NAME() in the body of the function, you cannot pass parameters to the function.</span></span>  
  
 <span data-ttu-id="22fd9-117">Le funzioni di sistema SUSER_SNAME() e HOST_NAME() non sono specifiche della replica di tipo merge, ma vengono utilizzate da questo tipo di replica per il filtro con parametri:</span><span class="sxs-lookup"><span data-stu-id="22fd9-117">The system functions SUSER_SNAME() and HOST_NAME() are not specific to merge replication, but they are used by merge replication for parameterized filtering:</span></span>  
  
-   <span data-ttu-id="22fd9-118">SUSER_SNAME() restituisce informazioni di accesso per le connessioni stabilite a un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22fd9-118">SUSER_SNAME() returns login information for connections made to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22fd9-119">Quando viene impiegata in un filtro con parametri, restituisce le informazioni di accesso utilizzate dall'agente di merge per connettersi al server di pubblicazione. Le informazioni di accesso vengono specificate quando si crea una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-119">When used in a parameterized filter, it returns the login used by the Merge Agent to connect to the Publisher (you specify a login when you create a subscription).</span></span>  
  
-   <span data-ttu-id="22fd9-120">HOST_NAME() restituisce il nome del computer che sta effettuando la connessione a un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22fd9-120">HOST_NAME() returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22fd9-121">Quando viene impiegata in un filtro con parametri, per impostazione predefinita restituisce il nome del computer in cui è in esecuzione l'agente di merge.</span><span class="sxs-lookup"><span data-stu-id="22fd9-121">When used in a parameterized filter, by default it returns the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="22fd9-122">Per le sottoscrizioni pull è il nome del Sottoscrittore, mentre per le sottoscrizioni push è il nome del server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-122">For pull subscriptions it is the name of the Subscriber; for push subscriptions it is the name of the Distributor.</span></span>  
  
     <span data-ttu-id="22fd9-123">È inoltre possibile sostituire questa funzione con un valore diverso dal nome del Sottoscrittore o del server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-123">It is also possible to override this function with a value other than the name of the Subscriber or Distributor.</span></span> <span data-ttu-id="22fd9-124">In genere il valore di questa funzione viene sostituito con valori più significativi, ad esempio il nome o l'ID del venditore.</span><span class="sxs-lookup"><span data-stu-id="22fd9-124">Typically applications override this function with more meaningful values, such as a salesperson name or salesperson ID.</span></span> <span data-ttu-id="22fd9-125">Per ulteriori informazioni, vedere la sezione relativa alla sostituzione del valore di HOST_NAME() in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="22fd9-125">For more information, see the section "Overriding the HOST_NAME() Value" in this topic.</span></span>  
  
 <span data-ttu-id="22fd9-126">Il valore restituito dalla funzione di sistema viene confrontato con una colonna specificata nella tabella in cui viene applicato il filtro e i dati appropriati vengono scaricati nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="22fd9-126">The value returned by the system function is compared to a column you specify in the table you are filtering, and the appropriate data is downloaded to the Subscriber.</span></span> <span data-ttu-id="22fd9-127">Il confronto viene effettuato quando la sottoscrizione è inizializzata, in modo che solo i dati appropriati siano contenuti nello snapshot iniziale, e ogni volta che la sottoscrizione viene sincronizzata.</span><span class="sxs-lookup"><span data-stu-id="22fd9-127">This comparison is made when the subscription is initialized (so only the appropriate data is contained in the initial snapshot) and every time the subscription is synchronized.</span></span> <span data-ttu-id="22fd9-128">Per impostazione predefinita, se una modifica nel server di pubblicazione comporta lo spostamento di una riga all'esterno di una partizione, la riga viene eliminata nel Sottoscrittore. questo comportamento viene controllato utilizzando il **@allow_partition_realignment** parametro di [sp_addmergepublication &#40;&#41;Transact-SQL ](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="22fd9-128">By default, if a change at the Publisher results in a row being moved out of a partition, the row is deleted at the Subscriber (this behavior is controlled using the **@allow_partition_realignment** parameter of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="22fd9-129">Quando i confronti vengono effettuati per i filtri con parametri, vengono sempre utilizzate le regole di confronto del database.</span><span class="sxs-lookup"><span data-stu-id="22fd9-129">When comparisons are made for parameterized filters, the database collation is always used.</span></span> <span data-ttu-id="22fd9-130">Se, ad esempio, nelle regole di confronto del database non viene fatta distinzione tra maiuscole e minuscole, mentre in quelle della colonna o della tabella sì, durante il confronto non viene fatta tale distinzione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-130">For example, if the database collation is case insensitive, but the table or column collation is case sensitive, the comparison will be case insensitive.</span></span>  
  
### <a name="filtering-with-suser_sname"></a><span data-ttu-id="22fd9-131">Applicazione del filtro con SUSER_SNAME()</span><span class="sxs-lookup"><span data-stu-id="22fd9-131">Filtering with SUSER_SNAME()</span></span>  
 <span data-ttu-id="22fd9-132">Si consideri la tabella **Employee Table** nel database di esempio [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="22fd9-132">Consider the **Employee Table** in the [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] sample database.</span></span> <span data-ttu-id="22fd9-133">In questa tabella è inclusa la colonna **LoginID**, contenente l'account di accesso per ogni dipendente nel formato*dominio\account accesso*.</span><span class="sxs-lookup"><span data-stu-id="22fd9-133">This table includes the column **LoginID**, which contains the login for each employee in the form '*domain\login*'.</span></span> <span data-ttu-id="22fd9-134">Per filtrare questa tabella in modo che i dipendenti ricevano solo i dati pertinenti, specificare una clausola di filtro:</span><span class="sxs-lookup"><span data-stu-id="22fd9-134">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
LoginID = SUSER_SNAME()  
```  
  
 <span data-ttu-id="22fd9-135">Il valore per uno dei dipendenti è, ad esempio, "adventure-works\john5".</span><span class="sxs-lookup"><span data-stu-id="22fd9-135">For example, the value for one of the employees is 'adventure-works\john5'.</span></span> <span data-ttu-id="22fd9-136">Quando l'agente di merge si connette al server di pubblicazione, utilizza l'account di accesso specificato durante la creazione della sottoscrizione, in questo caso "adventure-works\john5".</span><span class="sxs-lookup"><span data-stu-id="22fd9-136">When the Merge Agent connects to the Publisher, it uses the login you specified when creating the subscription (in this case 'adventure-works\john5').</span></span> <span data-ttu-id="22fd9-137">L'agente di merge confronta quindi il valore restituito da SUSER_SNAME() con i valori nella tabella e scarica solo la riga che contiene un valore di "adventure-works\john5" nella colonna **LoginID** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-137">The Merge Agent then compares the value returned by SUSER_SNAME() to the values in the table and downloads only the row that contains a value of 'adventure-works\john5' in the **LoginID** column.</span></span>  
  
### <a name="filtering-with-host_name"></a><span data-ttu-id="22fd9-138">Applicazione del filtro con HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="22fd9-138">Filtering with HOST_NAME()</span></span>  
 <span data-ttu-id="22fd9-139">Si consideri la tabella **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-139">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="22fd9-140">Si supponga che in questa tabella sia inclusa una colonna **ComputerName** con il nome del computer di ogni dipendente nel formato*nome_tipo di computer*.</span><span class="sxs-lookup"><span data-stu-id="22fd9-140">Suppose this table contained a column such as **ComputerName** with the name of each employee's computer in the form '*name_computertype*'.</span></span> <span data-ttu-id="22fd9-141">Per filtrare questa tabella in modo che i dipendenti ricevano solo i dati pertinenti, specificare una clausola di filtro:</span><span class="sxs-lookup"><span data-stu-id="22fd9-141">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="22fd9-142">Il valore per uno dei dipendenti potrebbe ad esempio essere "john5_laptop".</span><span class="sxs-lookup"><span data-stu-id="22fd9-142">For example, the value for one of the employees could be 'john5_laptop'.</span></span> <span data-ttu-id="22fd9-143">Quando l'agente di merge si connette al server di pubblicazione, confronta il valore restituito da HOST_NAME() con i valori nella tabella e scarica solo la riga che contiene un valore di "john5_laptop" nella colonna **ComputerName** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-143">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 'john5_laptop' in the **ComputerName** column.</span></span>  
  
 <span data-ttu-id="22fd9-144">Le funzioni possono inoltre essere combinate in un filtro.</span><span class="sxs-lookup"><span data-stu-id="22fd9-144">It is also possible to combine the functions in a filter.</span></span> <span data-ttu-id="22fd9-145">Per essere certi che un dipendente riceva i dati solo nel caso utilizzi il proprio account di accesso nel computer, ad esempio, la clausola di filtro sarà:</span><span class="sxs-lookup"><span data-stu-id="22fd9-145">For example, if you wanted to ensure that an employee received data only if they used their login on their computer, the filter clause could be:</span></span>  
  
```  
LoginID = SUSER_SNAME() AND ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="22fd9-146">A meno che non si sostituisca il valore di HOST_NAME(), il filtro con HOST_NAME() viene in genere utilizzato solo con le sottoscrizioni pull.</span><span class="sxs-lookup"><span data-stu-id="22fd9-146">Unless you are overriding the HOST_NAME() value, filtering with HOST_NAME() is typically used only with pull subscriptions.</span></span> <span data-ttu-id="22fd9-147">Il valore restituito dalla funzione è il nome del computer in cui è in esecuzione l'agente di merge.</span><span class="sxs-lookup"><span data-stu-id="22fd9-147">The value returned by the function is the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="22fd9-148">Per quanto riguarda le sottoscrizioni pull, il valore è diverso per ogni sottoscrizione, mentre per quanto riguarda le sottoscrizioni push il valore è identico. Per le sottoscrizioni push tutti gli agenti di merge vengono eseguiti nel server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-148">For pull subscriptions, the value is different for each subscription, but for push subscriptions, the value is the same (all Merge Agents run at the Distributor for push subscriptions).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="22fd9-149">Poiché è possibile sostituire il valore della funzione HOST_NAME(), per controllare l'accesso a partizioni di dati non è possibile utilizzare filtri che includano HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="22fd9-149">The value for the HOST_NAME() function can be overridden; therefore it is not possible to use filters that include HOST_NAME() to control access to partitions of data.</span></span> <span data-ttu-id="22fd9-150">Per controllare l'accesso a partizioni di dati, utilizzare SUSER_SNAME(), SUSER_SNAME() in combinazione con HOST_NAME() oppure filtri di riga statici.</span><span class="sxs-lookup"><span data-stu-id="22fd9-150">To control access to partitions of data, use SUSER_SNAME(), SUSER_SNAME() in combination with HOST_NAME(), or use static row filters.</span></span>  
  
#### <a name="overriding-the-host_name-value"></a><span data-ttu-id="22fd9-151">Sostituzione del valore di HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="22fd9-151">Overriding the HOST_NAME() Value</span></span>  
 <span data-ttu-id="22fd9-152">Come già evidenziato, per impostazione predefinita HOST_NAME() restituisce il nome del computer che sta effettuando la connessione a un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22fd9-152">As noted earlier, HOST_NAME() by default returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22fd9-153">Quando vengono utilizzati filtri con parametri, è normale sostituire questo valore fornendo un valore durante la creazione di una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-153">When using parameterized filters, it is common to override this value by supplying a value when you create a subscription.</span></span> <span data-ttu-id="22fd9-154">La funzione HOST_NAME() restituisce quindi il valore specificato anziché il nome del computer.</span><span class="sxs-lookup"><span data-stu-id="22fd9-154">The HOST_NAME() function then returns the value you specify rather than the name of the computer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="22fd9-155">Se si sostituisce il valore HOST_NAME(), tutte le chiamate alla funzione HOST_NAME() restituiranno il valore specificato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="22fd9-155">If you override HOST_NAME(), all calls to the HOST_NAME() function will return the value you specify.</span></span> <span data-ttu-id="22fd9-156">Verificare che il funzionamento di altre applicazioni non dipenda dal fatto che HOST_NAME() restituisca il nome del computer.</span><span class="sxs-lookup"><span data-stu-id="22fd9-156">Ensure that other applications are not depending on HOST_NAME() returning the computer name.</span></span>  
  
 <span data-ttu-id="22fd9-157">Si consideri la tabella **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-157">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="22fd9-158">In questa tabella è inclusa la colonna **EmployeeID**.</span><span class="sxs-lookup"><span data-stu-id="22fd9-158">This table includes the column **EmployeeID**.</span></span> <span data-ttu-id="22fd9-159">Per filtrare questa tabella in modo che ogni dipendente riceva solo i dati di pertinenza, specificare una clausola di filtro:</span><span class="sxs-lookup"><span data-stu-id="22fd9-159">To filter this table so that each employee receives only the data related to them, specify a filter clause of:</span></span>  
  
 `EmployeeID = CONVERT(int,HOST_NAME())`  
  
 <span data-ttu-id="22fd9-160">Alla dipendente Pamela Ansman-Wolfe, ad esempio, è stato associato l'ID 280.</span><span class="sxs-lookup"><span data-stu-id="22fd9-160">For example, employee Pamela Ansman-Wolfe has been assigned an employee ID of 280.</span></span> <span data-ttu-id="22fd9-161">Specificare il valore dell'ID del dipendente (280 nell'esempio) come valore di HOST_NAME() durante la creazione di una sottoscrizione per questo dipendente.</span><span class="sxs-lookup"><span data-stu-id="22fd9-161">Specify the value of the employee ID (280 in our example) for the HOST_NAME() value when creating a subscription for this employee.</span></span> <span data-ttu-id="22fd9-162">Quando l'agente di merge si connette al server di pubblicazione, confronta il valore restituito da HOST_NAME() con i valori nella tabella e scarica solo la riga che contiene un valore di 280 nella colonna **EmployeeID** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-162">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 280 in the **EmployeeID** column.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="22fd9-163">La funzione HOST_NAME() restituisce un valore `nchar`. Se la colonna nella clausola di filtro è di un tipo di dati numerico, come nell'esempio sopra riportato, è pertanto necessario utilizzare CONVERT.</span><span class="sxs-lookup"><span data-stu-id="22fd9-163">The HOST_NAME() function returns an `nchar` value, so you must use CONVERT if the column in the filter clause is of a numeric data type, as it is in the example above.</span></span> <span data-ttu-id="22fd9-164">Per motivi relativi alle prestazioni, è consigliabile non applicare funzioni ai nomi di colonna nelle clausole di filtro di riga con parametri, come `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span><span class="sxs-lookup"><span data-stu-id="22fd9-164">For performance reasons, we recommended that you do not apply functions to column names in parameterized row filter clauses, such as `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span></span> <span data-ttu-id="22fd9-165">È consigliabile invece utilizzare l'approccio indicato nell'esempio: `EmployeeID = CONVERT(int,HOST_NAME())`.</span><span class="sxs-lookup"><span data-stu-id="22fd9-165">Instead, we recommend using the approach shown in the example: `EmployeeID = CONVERT(int,HOST_NAME())`.</span></span> <span data-ttu-id="22fd9-166">Questa clausola può essere utilizzata per il **@subset_filterclause** parametro di [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), ma in genere non può essere utilizzata nella creazione guidata nuova pubblicazione (la procedura guidata esegue la clausola di filtro per convalidarla, operazione che non riesce perché il nome del computer non può essere convertito in `int` ).</span><span class="sxs-lookup"><span data-stu-id="22fd9-166">This clause can be used for the **@subset_filterclause** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), but it typically cannot be used in the New Publication Wizard (the wizard executes the filter clause to validate it, which fails because the computer name cannot be converted to an `int`).</span></span> <span data-ttu-id="22fd9-167">Se si utilizza la Creazione guidata nuova pubblicazione, è consigliabile specificare `CONVERT(nchar,EmployeeID) = HOST_NAME()` nella procedura guidata e quindi utilizzare [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) per modificare la clausola in `EmployeeID = CONVERT(int,HOST_NAME())` prima della creazione di uno snapshot per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-167">If you use the New Publication Wizard, we recommend specifying `CONVERT(nchar,EmployeeID) = HOST_NAME()` in the wizard and then use [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) to change the clause to `EmployeeID = CONVERT(int,HOST_NAME())` before creating a snapshot for the publication.</span></span>  
  
 <span data-ttu-id="22fd9-168">**Per sostituire il valore di HOST_NAME()**</span><span class="sxs-lookup"><span data-stu-id="22fd9-168">**To override the HOST_NAME() value**</span></span>  
  
 <span data-ttu-id="22fd9-169">Utilizzare uno dei metodi seguenti per sostituire il valore di HOST_NAME():</span><span class="sxs-lookup"><span data-stu-id="22fd9-169">Use one of the following methods to override the HOST_NAME() value:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="22fd9-170">: specificare un valore nella pagina **Valori HOST\_NAME\(\)** della Creazione guidata nuova sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-170">: specify a value on the **HOST\_NAME\(\) Values** page of the New Subscription Wizard.</span></span> <span data-ttu-id="22fd9-171">Per altre informazioni sulla creazione di sottoscrizioni, vedere [Sottoscrivere le pubblicazioni](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-171">For more information about creating subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="22fd9-172">[!INCLUDE[tsql](../../../includes/tsql-md.md)]Programmazione della replica: specificare un valore per il **@hostname** parametro di [Sp_addmergesubscription &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (per le sottoscrizioni push) o [SP_ADDMERGEPULLSUBSCRIPTION_AGENT &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (per le sottoscrizioni pull).</span><span class="sxs-lookup"><span data-stu-id="22fd9-172">Replication [!INCLUDE[tsql](../../../includes/tsql-md.md)] programming: specify a value for the **@hostname** parameter of [sp_addmergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (for push subscriptions) or [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (for pull subscriptions).</span></span>  
  
-   <span data-ttu-id="22fd9-173">Agente di merge: specificare un valore per il parametro **-Hostname** nella riga di comando o tramite un profilo agente.</span><span class="sxs-lookup"><span data-stu-id="22fd9-173">Merge Agent: specify a value for the **-Hostname** parameter at the command line or through an agent profile.</span></span> <span data-ttu-id="22fd9-174">Per ulteriori informazioni sull'agente di merge, vedere [Replication Merge Agent](../agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-174">For more information about the Merge Agent, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span> <span data-ttu-id="22fd9-175">Per ulteriori informazioni sui profili agenti, vedere [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-175">For more information about agent profiles, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="initializing-a-subscription-to-a-publication-with-parameterized-filters"></a><span data-ttu-id="22fd9-176">Inizializzazione di una sottoscrizione di una pubblicazione con filtri con parametri</span><span class="sxs-lookup"><span data-stu-id="22fd9-176">Initializing a Subscription to a Publication with Parameterized Filters</span></span>  
 <span data-ttu-id="22fd9-177">Quando si utilizzano filtri di riga con parametri nelle pubblicazioni di tipo merge, ogni sottoscrizione con uno snapshot in due parti viene inizializzata dalla replica.</span><span class="sxs-lookup"><span data-stu-id="22fd9-177">When parameterized row filters are used in merge publications, replication initializes each subscription with a two-part snapshot.</span></span> <span data-ttu-id="22fd9-178">Per altre informazioni, vedere [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-178">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="using-the-appropriate-filtering-options"></a><span data-ttu-id="22fd9-179">Utilizzo delle opzioni di filtro appropriate</span><span class="sxs-lookup"><span data-stu-id="22fd9-179">Using the Appropriate Filtering Options</span></span>  
 <span data-ttu-id="22fd9-180">Quando si utilizzano filtri con parametri, è possibile avere il controllo su due aree principali:</span><span class="sxs-lookup"><span data-stu-id="22fd9-180">There are two key areas over which you have control when using parameterized filters:</span></span>  
  
-   <span data-ttu-id="22fd9-181">La modalità di elaborazione dei filtri da parte della replica di tipo merge, operazione che viene controllata da una delle due impostazioni di pubblicazione: **use partition groups** e **keep partition changes**.</span><span class="sxs-lookup"><span data-stu-id="22fd9-181">How the filters are processed by merge replication, which is controlled by one of two publication settings: **use partition groups** and **keep partition changes**.</span></span>  
  
-   <span data-ttu-id="22fd9-182">La modalità di condivisione dei dati tra i Sottoscrittori, che deve essere riflessa dall'impostazione dell'articolo **partition options**.</span><span class="sxs-lookup"><span data-stu-id="22fd9-182">How the data is shared among Subscribers, which must be reflected by the article setting **partition options**.</span></span>  
  
 <span data-ttu-id="22fd9-183">Per impostare le opzioni di filtro, vedere [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-183">To set filtering options, see [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span></span>  
  
### <a name="setting-use-partition-groups-and-keep-partition-changes"></a><span data-ttu-id="22fd9-184">Impostazione di "use partition groups" e "keep partition changes"</span><span class="sxs-lookup"><span data-stu-id="22fd9-184">Setting 'use partition groups' and 'keep partition changes'</span></span>  
 <span data-ttu-id="22fd9-185">Entrambe le opzioni **use partition groups** e **keep partition changes** consentono di migliorare le prestazioni di sincronizzazione delle pubblicazioni con gli articoli filtrati tramite l'archiviazione di metadati aggiuntivi nel database di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-185">Both the **use partition groups** and **keep partition changes** options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="22fd9-186">L'opzione **use partition groups** offre prestazioni superiori tramite l'utilizzo della funzionalità delle partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="22fd9-186">The **use partition groups** option provides greater performance improvement through the use of the precomputed partitions feature.</span></span> <span data-ttu-id="22fd9-187">Questa opzione viene impostata su `true` per impostazione predefinita, se gli articoli nella pubblicazione sono conformi a un set di requisiti.</span><span class="sxs-lookup"><span data-stu-id="22fd9-187">This option is set to `true` by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="22fd9-188">Per altre informazioni su questi requisiti, vedere [Ottimizzare le prestazioni dei filtri con parametri con le partizioni pre-calcolate](parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-188">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="22fd9-189">Se gli articoli non soddisfano i requisiti per l'utilizzo di partizioni pre-calcolate, l'opzione **Mantieni partizioni cambia** su è impostata su `true` .</span><span class="sxs-lookup"><span data-stu-id="22fd9-189">If your articles do not meet the requirements for using precomputed partitions, the **keep partition changes** option to is set to `true`.</span></span>  
  
### <a name="setting-partition-options"></a><span data-ttu-id="22fd9-190">Impostazione di "partition options"</span><span class="sxs-lookup"><span data-stu-id="22fd9-190">Setting 'partition options'</span></span>  
 <span data-ttu-id="22fd9-191">Durante la creazione di un articolo, si specifica un valore per la proprietà **partition options** in base al modo in cui i dati nella tabella filtrata verranno condivisi dai Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="22fd9-191">You specify a value for the **partition options** property when creating an article, according to the way in which data in the filtered table will be shared by Subscribers.</span></span> <span data-ttu-id="22fd9-192">È possibile impostare la proprietà su uno di quattro valori utilizzando [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)e la finestra di dialogo **Proprietà articolo** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-192">The property can be set to one of four values using [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), and the **Article Properties** dialog box.</span></span> <span data-ttu-id="22fd9-193">La proprietà può essere impostata su uno dei due valori utilizzando la finestra di dialogo **Aggiungi filtro** o **Modifica filtro** , disponibile nella Creazione guidata nuova pubblicazione, e nella finestra di dialogo **Proprietà pubblicazione** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-193">The property can be set to one of two values using the **Add Filter** or **Edit Filter** dialog boxes, which are available from the New Publication Wizard and the **Publication Properties** dialog box.</span></span> <span data-ttu-id="22fd9-194">Nella tabella seguente vengono descritti i valori disponibili.</span><span class="sxs-lookup"><span data-stu-id="22fd9-194">The following table summarizes the available values:</span></span>  
  
|<span data-ttu-id="22fd9-195">Descrizione</span><span class="sxs-lookup"><span data-stu-id="22fd9-195">Description</span></span>|<span data-ttu-id="22fd9-196">Valore in Aggiungi filtro e Modifica filtro</span><span class="sxs-lookup"><span data-stu-id="22fd9-196">Value in Add Filter and Edit Filter</span></span>|<span data-ttu-id="22fd9-197">Valore in Proprietà articolo</span><span class="sxs-lookup"><span data-stu-id="22fd9-197">Value in Article Properties</span></span>|<span data-ttu-id="22fd9-198">Valore nelle stored procedure</span><span class="sxs-lookup"><span data-stu-id="22fd9-198">Value in stored procedures</span></span>|  
|-----------------|-----------------------------------------|---------------------------------|--------------------------------|  
|<span data-ttu-id="22fd9-199">I dati nelle partizioni sono sovrapposti e il Sottoscrittore può aggiornare le colonne a cui si fa riferimento in un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="22fd9-199">Data in the partitions is overlapping, and the Subscriber can update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22fd9-200">**Una riga di questa tabella verrà inviata a più sottoscrizioni**</span><span class="sxs-lookup"><span data-stu-id="22fd9-200">**A row from this table will go to multiple subscriptions**</span></span>|<span data-ttu-id="22fd9-201">**Sovrapposte**</span><span class="sxs-lookup"><span data-stu-id="22fd9-201">**Overlapping**</span></span>|<span data-ttu-id="22fd9-202">**0**</span><span class="sxs-lookup"><span data-stu-id="22fd9-202">**0**</span></span>|  
|<span data-ttu-id="22fd9-203">I dati nelle partizioni sono sovrapposti e il Sottoscrittore non può aggiornare le colonne a cui si fa riferimento in un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="22fd9-203">Data in the partitions is overlapping, and the Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22fd9-204">N/D<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="22fd9-204">N/A<sup>1</sup></span></span>|<span data-ttu-id="22fd9-205">**Sovrapposte, non ammesse modifiche dei dati fuori partizione**</span><span class="sxs-lookup"><span data-stu-id="22fd9-205">**Overlapping, disallow out-of-partition data changes**</span></span>|<span data-ttu-id="22fd9-206">**1**</span><span class="sxs-lookup"><span data-stu-id="22fd9-206">**1**</span></span>|  
|<span data-ttu-id="22fd9-207">I dati nelle partizioni non sono sovrapposti e vengono condivisi dalle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="22fd9-207">Data in the partitions is not overlapping, and the data is shared between subscriptions.</span></span> <span data-ttu-id="22fd9-208">Il Sottoscrittore non può aggiornare le colonne a cui si fa riferimento in un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="22fd9-208">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22fd9-209">N/D<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="22fd9-209">N/A<sup>1</sup></span></span>|<span data-ttu-id="22fd9-210">**Non sovrapposte, condivise dalle sottoscrizioni**</span><span class="sxs-lookup"><span data-stu-id="22fd9-210">**Nonoverlapping, shared between subscriptions**</span></span>|<span data-ttu-id="22fd9-211">**2**</span><span class="sxs-lookup"><span data-stu-id="22fd9-211">**2**</span></span>|  
|<span data-ttu-id="22fd9-212">I dati nelle partizioni non sono sovrapposti ed esiste un'unica sottoscrizione per partizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-212">Data in the partitions is not overlapping, and there is a single subscription per partition.</span></span> <span data-ttu-id="22fd9-213">Il Sottoscrittore non può aggiornare le colonne a cui fa riferimento un filtro con parametri. <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="22fd9-213">The Subscriber cannot update columns referenced in a parameterized filter.<sup>2</sup></span></span>|<span data-ttu-id="22fd9-214">**Una riga di questa tabella verrà inviata a una sola sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="22fd9-214">**A row from this table will go to only one subscription**</span></span>|<span data-ttu-id="22fd9-215">**Non sovrapposte, sottoscrizione unica**</span><span class="sxs-lookup"><span data-stu-id="22fd9-215">**Nonoverlapping, single subscription**</span></span>|<span data-ttu-id="22fd9-216">**3**</span><span class="sxs-lookup"><span data-stu-id="22fd9-216">**3**</span></span>|  
  
 <span data-ttu-id="22fd9-217"><sup>1</sup> se l'opzione di filtro sottostante è impostata **su 0**o **1**o **2**, nelle finestre di dialogo **Aggiungi filtro** e **Modifica filtro** verrà visualizzata **una riga di questa tabella che verrà inviata a più sottoscrizioni**.</span><span class="sxs-lookup"><span data-stu-id="22fd9-217"><sup>1</sup> If the underlying filtering option is set to **0**, or **1**, or **2**, the **Add Filter** and **Edit Filter** dialog boxes will display **A row from this table will go to multiple subscriptions**.</span></span>  
  
 <span data-ttu-id="22fd9-218"><sup>2</sup> se si specifica questa opzione, può essere presente una sola sottoscrizione per ogni partizione di dati nell'articolo.</span><span class="sxs-lookup"><span data-stu-id="22fd9-218"><sup>2</sup> If you specify this option, there can only be a single subscription for each partition of data in that article.</span></span> <span data-ttu-id="22fd9-219">Se si crea una seconda sottoscrizione nella quale il criterio di filtro porta alla restituzione della stessa partizione della sottoscrizione esistente, quest'ultima viene eliminata.</span><span class="sxs-lookup"><span data-stu-id="22fd9-219">If a second subscription is created in which the filtering criterion of the new subscription resolves to the same partition as the existing subscription, the existing subscription is dropped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="22fd9-220">È necessario che il valore di **partition options** venga impostato in base alla modalità con cui i dati vengono condivisi dai Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="22fd9-220">The **partition options** value must be set according to how data is shared by Subscribers.</span></span> <span data-ttu-id="22fd9-221">Se, ad esempio, si specifica che una partizione non sia sovrapposta, con una sola sottoscrizione per partizione, ma successivamente i dati vengono aggiornati in un altro Sottoscrittore, è possibile che si verifichi un errore nell'agente di merge durante la sincronizzazione e che quindi i dati non siano convergenti.</span><span class="sxs-lookup"><span data-stu-id="22fd9-221">If, for example, you specify that a partition is nonoverlapping with a single subscription per partition, but data is then updated at another Subscriber, the Merge Agent can fail during synchronization and non-convergence can occur.</span></span>  
  
#### <a name="selecting-the-appropriate-partition-option"></a><span data-ttu-id="22fd9-222">Selezione dell'opzione di partizione appropriata</span><span class="sxs-lookup"><span data-stu-id="22fd9-222">Selecting the Appropriate Partition Option</span></span>  
 <span data-ttu-id="22fd9-223">Le partizioni non sovrapposte vengono utilizzate insieme alle partizioni pre-calcolate per migliorare le prestazioni in situazioni in cui alcuni limiti funzionali sono accettabili.</span><span class="sxs-lookup"><span data-stu-id="22fd9-223">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance in situations where some functional limitations are acceptable.</span></span> <span data-ttu-id="22fd9-224">Le partizioni pre-calcolate consentono di velocizzare i download nei Sottoscrittori, ma rallentano le operazioni di caricamento.</span><span class="sxs-lookup"><span data-stu-id="22fd9-224">Precomputed partitions quicken downloads to Subscribers, but slow uploads.</span></span> <span data-ttu-id="22fd9-225">Le partizioni non sovrapposte riducono al minimo il costo di caricamento associato alle partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="22fd9-225">Nonoverlapping partitions minimize the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="22fd9-226">Il vantaggio a livello di prestazioni delle partizioni non sovrapposte è più evidente quando i filtri con parametri e i filtri join utilizzati sono più complessi.</span><span class="sxs-lookup"><span data-stu-id="22fd9-226">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span>  
  
 <span data-ttu-id="22fd9-227">Quando si scelgono le opzioni di partizione da utilizzare in una pubblicazione, considerare gli scenari seguenti.</span><span class="sxs-lookup"><span data-stu-id="22fd9-227">Consider the following scenarios when deciding which partition options to use in a publication.</span></span>  
  
-   [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] <span data-ttu-id="22fd9-228">dispone di una forza vendite mobile in cui ogni venditore è responsabile dei clienti appartenenti a un determinato codice postale.</span><span class="sxs-lookup"><span data-stu-id="22fd9-228">has a mobile sales force with each sales person responsible for customers in a given zip code.</span></span> <span data-ttu-id="22fd9-229">L'applicazione richiede l'aggiornamento del codice postale nel caso un cliente passi da un territorio di vendita a un altro, affinché il cliente venga assegnato a un altro venditore.</span><span class="sxs-lookup"><span data-stu-id="22fd9-229">The application requires that  the zip code be updated if a customer moves from one sales territory to another, so that the customer is assigned to a different sales person.</span></span> <span data-ttu-id="22fd9-230">Il filtro con parametri è basato sul codice postale del cliente e l'aggiornamento determina la rimozione del codice postale dalla partizione di un venditore e il relativo inserimento nella partizione di un altro venditore.</span><span class="sxs-lookup"><span data-stu-id="22fd9-230">The parameterized filter is based on the customer's zip code, and the update removes the zip code from one sales person's partition and inserts it into another sales person's partition.</span></span> <span data-ttu-id="22fd9-231">A tale scopo, sono necessarie partizioni sovrapposte che consentano di aggiornare le colonne a cui si fa riferimento in un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="22fd9-231">This requires overlapping partitions with the ability to update columns referenced in a parameterized filter.</span></span> <span data-ttu-id="22fd9-232">Questa opzione ottimizza la flessibilità, ma il funzionamento potrebbe non essere ottimale come quello delle partizioni non sovrapposte.</span><span class="sxs-lookup"><span data-stu-id="22fd9-232">This option maximizes flexibility but might not perform as well as nonoverlapping partitions.</span></span>  
  
-   <span data-ttu-id="22fd9-233">Un'agenzia di collocamento dispone di dati che vengono inviati alle filiali di ogni regione dello stato.</span><span class="sxs-lookup"><span data-stu-id="22fd9-233">An employment agency has data that is supplied to regional offices in each county of the state.</span></span> <span data-ttu-id="22fd9-234">I dati non si sovrappongono e ogni riga della tabella nella sede centrale dell'agenzia è inclusa in un'unica partizione, ma tale partizione viene inviata a più uffici della stessa regione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-234">The data does not overlap; each row in the table at the agency's headquarters is included in only one partition, but that partition is sent to multiple offices in the same county.</span></span> <span data-ttu-id="22fd9-235">L'opzione che prevede partizioni non sovrapposte con partizioni condivise dalle sottoscrizioni è appropriata, poiché garantisce prestazioni migliori rispetto alle partizioni sovrapposte soddisfacendo al tempo stesso i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-235">The nonoverlapping partition option with partitions shared between subscriptions is appropriate, providing a performance improvement over overlapping partitions while satisfying the application requirements.</span></span>  
  
-   <span data-ttu-id="22fd9-236">Se si dispone di partizioni non sovrapposte e una sola sottoscrizione riceve e aggiorna i dati in una partizione, sarà possibile ottenere ulteriori vantaggi a livello di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="22fd9-236">If you have nonoverlapping partitions and only one subscription receives and updates the data in a partition, further performance benefits can be realized.</span></span> <span data-ttu-id="22fd9-237">Questo scenario è tipico dei sistemi POS e delle applicazioni relative al personale esterno in cui i dati vengono raccolti principalmente nel Sottoscrittore e caricati nel server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-237">This scenario is common for point of sale systems, and field force applications in which data is primarily collected at the Subscriber and uploaded to the Publisher.</span></span> <span data-ttu-id="22fd9-238">Si consideri una tabella **Package** in un'applicazione di recapito: quando ogni pacco viene caricato su un furgone, lo stato del pacco viene modificato nella tabella **Package** e la modifica viene replicata nella sede centrale.</span><span class="sxs-lookup"><span data-stu-id="22fd9-238">Consider a **Package** table in a delivery application: as each package is loaded onto a truck, the status of the package is changed in the **Package** table, and the change is replicated back to headquarters.</span></span> <span data-ttu-id="22fd9-239">Gli autisti non aggiornerebbero lo stato dello stesso pacco su due furgoni diversi, quindi per la tabella **Package** è ideale ricorrere a una partizione non sovrapposta con una sola sottoscrizione per partizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-239">Drivers would not update the status of the same package on two different trucks, so the **Package** table is a good candidate for a nonoverlapping partition with a single subscription per partition.</span></span>  
  
#### <a name="considerations-for-nonoverlapping-partitions"></a><span data-ttu-id="22fd9-240">Considerazioni sulle partizioni non sovrapposte</span><span class="sxs-lookup"><span data-stu-id="22fd9-240">Considerations for Nonoverlapping Partitions</span></span>  
 <span data-ttu-id="22fd9-241">Quando si utilizzano le partizioni non sovrapposte, tenere presenti le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="22fd9-241">Keep the following considerations in mind when using nonoverlapping partitions.</span></span>  
  
##### <a name="general-considerations"></a><span data-ttu-id="22fd9-242">Considerazioni generali</span><span class="sxs-lookup"><span data-stu-id="22fd9-242">General Considerations</span></span>  
  
-   <span data-ttu-id="22fd9-243">È necessario che nella pubblicazione vengano utilizzate partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="22fd9-243">The publication must use precomputed partitions.</span></span>  
  
-   <span data-ttu-id="22fd9-244">È necessario che una riga appartenga a una sola partizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-244">A row must belong to only one partition.</span></span>  
  
-   <span data-ttu-id="22fd9-245">Gli articoli non possono fare parte di un record logico.</span><span class="sxs-lookup"><span data-stu-id="22fd9-245">Articles cannot be part of a logical record.</span></span>  
  
-   <span data-ttu-id="22fd9-246">I partner di sincronizzazione alternativi non sono supportati. Questa funzionalità è deprecata.</span><span class="sxs-lookup"><span data-stu-id="22fd9-246">Alternate synchronization partners are not supported (this feature is deprecated).</span></span>  
  
-   <span data-ttu-id="22fd9-247">Il Sottoscrittore non può aggiornare le colonne a cui si fa riferimento in un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="22fd9-247">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>  
  
-   <span data-ttu-id="22fd9-248">Se un'operazione di inserimento nel Sottoscrittore non appartiene alla partizione, non viene eliminata.</span><span class="sxs-lookup"><span data-stu-id="22fd9-248">If an insert at a Subscriber does not belong to the partition, it is not deleted.</span></span> <span data-ttu-id="22fd9-249">Tuttavia, non verrà replicata in altri Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="22fd9-249">However, it will not be replicated to other Subscribers.</span></span>  
  
-   <span data-ttu-id="22fd9-250">In alcuni casi con le partizioni sovrapposte, gli intervalli di valori Identity vengono modificati quando vengono inseriti dati tramite l'agente di merge.</span><span class="sxs-lookup"><span data-stu-id="22fd9-250">In some circumstances with overlapping partitions, identity ranges are adjusted when the Merge Agent inserts data.</span></span> <span data-ttu-id="22fd9-251">Con le partizioni non sovrapposte, gli intervalli possono essere modificati solo durante le operazioni di inserimento di un utente che dispone dell'autorizzazione necessaria per modificare gli intervalli di valori Identity nel database di sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="22fd9-251">With nonoverlapping partitions, ranges can only be adjusted during inserts by a user who has permission to adjust identity ranges in the subscription database.</span></span> <span data-ttu-id="22fd9-252">L'utente deve essere il proprietario della tabella oppure un membro del ruolo predefinito del server **sysadmin** o del ruolo predefinito del database **db_owner** o **db_ddladmin** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-252">The user must either own the table, or be a member of the **sysadmin** fixed server role, the **db_owner** fixed database role, or the **db_ddladmin** fixed database role.</span></span>  
  
##### <a name="additional-considerations-for-nonoverlapping-partitions-with-a-single-subscription-per-partition"></a><span data-ttu-id="22fd9-253">Considerazioni aggiuntive sulle partizioni non sovrapposte con una sola sottoscrizione per partizione</span><span class="sxs-lookup"><span data-stu-id="22fd9-253">Additional Considerations for Nonoverlapping Partitions with a Single Subscription per Partition</span></span>  
  
-   <span data-ttu-id="22fd9-254">Gli articoli possono esistere in una sola pubblicazione e non possono essere ripubblicati.</span><span class="sxs-lookup"><span data-stu-id="22fd9-254">Articles can exist in only one publication; articles cannot be republished.</span></span>  
  
-   <span data-ttu-id="22fd9-255">La pubblicazione deve consentire ai Sottoscrittori di avviare l'elaborazione degli snapshot.</span><span class="sxs-lookup"><span data-stu-id="22fd9-255">The publication must allow Subscribers to initiate the snapshot process.</span></span> <span data-ttu-id="22fd9-256">Per altre informazioni, vedere [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-256">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##### <a name="additional-considerations-for-join-filters"></a><span data-ttu-id="22fd9-257">Considerazione aggiuntive sui filtri join</span><span class="sxs-lookup"><span data-stu-id="22fd9-257">Additional Considerations for Join Filters</span></span>  
  
-   <span data-ttu-id="22fd9-258">In una gerarchia di filtri join un articolo con una partizione sovrapposta non può trovarsi sopra un articolo con una partizione non sovrapposta.</span><span class="sxs-lookup"><span data-stu-id="22fd9-258">In a join filter hierarchy, an article with an overlapping partition cannot appear above an article with a nonoverlapping partition.</span></span> <span data-ttu-id="22fd9-259">In altre parole, un articolo padre deve utilizzare partizioni non sovrapposte se queste sono utilizzate dall'articolo figlio.</span><span class="sxs-lookup"><span data-stu-id="22fd9-259">In other words, a parent article must use nonoverlapping partitions if the child article does.</span></span> <span data-ttu-id="22fd9-260">Per informazioni sui filtri join, vedere [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-260">For information about join filters, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="22fd9-261">È necessario che in un filtro join in cui la partizione non sovrapposta è un elemento figlio, la proprietà **join unique key** sia impostata su 1.</span><span class="sxs-lookup"><span data-stu-id="22fd9-261">A join filter in which the nonoverlapping partition is a child must have the **join unique key** property set to 1.</span></span> <span data-ttu-id="22fd9-262">Per altre informazioni, vedere [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22fd9-262">For more information, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="22fd9-263">È necessario che l'articolo abbia un solo filtro con parametri o un solo filtro join.</span><span class="sxs-lookup"><span data-stu-id="22fd9-263">The article should only have one parameterized filter or join filter.</span></span> <span data-ttu-id="22fd9-264">L'articolo può avere un filtro con parametri ed essere l'elemento padre in un filtro join.</span><span class="sxs-lookup"><span data-stu-id="22fd9-264">Having a parameterized filter and being the parent in a join filter is allowed.</span></span> <span data-ttu-id="22fd9-265">Non può invece avere un filtro con parametri ed essere l'elemento figlio in un filtro join.</span><span class="sxs-lookup"><span data-stu-id="22fd9-265">Having a parameterized filter and being the child in a join filter is not allowed.</span></span> <span data-ttu-id="22fd9-266">Non può inoltre avere più di un filtro join.</span><span class="sxs-lookup"><span data-stu-id="22fd9-266">Having more than one join filter is also not allowed.</span></span>  
  
-   <span data-ttu-id="22fd9-267">Se due tabelle nel server di pubblicazione hanno una relazione tra filtri join e la tabella figlio contiene righe che non hanno una riga corrispondente nella tabella padre, un'operazione di inserimento della riga padre mancante non avrà come conseguenza il download delle righe correlate nel Sottoscrittore. Le righe verrebbero invece scaricate con partizioni sovrapposte.</span><span class="sxs-lookup"><span data-stu-id="22fd9-267">If two tables at the Publisher have a join filter relationship and the child table has rows that have no corresponding row in the parent table, an insert of the missing parent row will not result in the related rows being downloaded to the Subscriber (the rows would be downloaded with overlapping partitions).</span></span> <span data-ttu-id="22fd9-268">Se ad esempio la tabella **SalesOrderDetail** contiene righe che non dispongono di alcuna riga corrispondente nella tabella **SalesOrderHeader** e si inserisce la riga mancante in **SalesOrderHeader**, tale riga viene scaricata nel Sottoscrittore, mentre non vengono scaricate le righe corrispondenti presenti in **SalesOrderDetail** .</span><span class="sxs-lookup"><span data-stu-id="22fd9-268">For example, if the **SalesOrderDetail** table has rows with no corresponding row in the **SalesOrderHeader** table, and you insert the missing row in **SalesOrderHeader**, the row is downloaded to the Subscriber, but the corresponding rows in **SalesOrderDetail** are not.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="22fd9-269">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="22fd9-269">See Also</span></span>  
 <span data-ttu-id="22fd9-270">[Procedure consigliate per i filtri di riga basati sul tempo](best-practices-for-time-based-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="22fd9-270">[Best Practices for Time-Based Row Filters](best-practices-for-time-based-row-filters.md) </span></span>  
 <span data-ttu-id="22fd9-271">[Filtrare i dati pubblicati](../publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="22fd9-271">[Filter Published Data](../publish/filter-published-data.md) </span></span>  
 [<span data-ttu-id="22fd9-272">Filtrare i dati pubblicati per la replica di tipo merge</span><span class="sxs-lookup"><span data-stu-id="22fd9-272">Filter Published Data for Merge Replication</span></span>](filter-published-data-for-merge-replication.md)  
  
  
