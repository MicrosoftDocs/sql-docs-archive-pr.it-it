---
title: Procedure consigliate per la sicurezza della replica | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- security [SQL Server replication], best practices
- security [SQL Server replication], between domains
- authentication [SQL Server replication]
- Internet [SQL Server replication], security
ms.assetid: 1ab2635d-0992-4c99-b17d-041d02ec9a7c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8e5918bfed52a6ed1befd81d2fdb7910062060e6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87623139"
---
# <a name="replication-security-best-practices"></a><span data-ttu-id="7f3a4-102">Procedure consigliate per la sicurezza della replica</span><span class="sxs-lookup"><span data-stu-id="7f3a4-102">Replication Security Best Practices</span></span>
  <span data-ttu-id="7f3a4-103">La replica implica lo spostamento di dati in ambienti distribuiti che includono reti Intranet in un singolo dominio, applicazioni che accedono a dati tra domini non attendibili e Internet.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-103">Replication moves data in distributed environments ranging from intranets on a single domain to applications that access data between untrusted domains and over the Internet.</span></span> <span data-ttu-id="7f3a4-104">È importante individuare l'approccio migliore per la protezione delle connessioni di replica in queste diverse circostanze.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-104">It is important to understand the best approach for securing replication connections under these different circumstances.</span></span>  
  
 <span data-ttu-id="7f3a4-105">Le informazioni seguenti sono applicabili alla replica in qualsiasi ambiente:</span><span class="sxs-lookup"><span data-stu-id="7f3a4-105">The following information is relevant to replication in all environments:</span></span>  
  
-   <span data-ttu-id="7f3a4-106">Crittografare le connessioni tra computer in una topologia di replica utilizzano un metodo standard, ad esempio le reti private virtuali (VPN, Virtual Private Network), la crittografia SSL (Secure Sockets Layer) o lo standard IPSec (Internet Protocol Security).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-106">Encrypt the connections between computers in a replication topology using an industry standard method, such as Virtual Private Networks (VPN), Secure Sockets Layer (SSL), or IP Security (IPSEC).</span></span> <span data-ttu-id="7f3a4-107">Per altre informazioni, vedere [Abilitare le connessioni crittografate al motore di database &#40;Gestione configurazione SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-107">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span> <span data-ttu-id="7f3a4-108">Per informazioni sull'utilizzo di reti VPN e del protocollo SSL per la replica di dati su Internet, vedere [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-108">For information about using VPN and SSL for replicating data over the Internet, see [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span></span>  
  
     <span data-ttu-id="7f3a4-109">Se si usa SSL per proteggere le connessioni tra computer in una topologia di replica, specificare un valore pari a **1** o **2** per il parametro **-EncryptionLevel** di ogni agente di replica. È consigliabile usare un valore pari a **2** .</span><span class="sxs-lookup"><span data-stu-id="7f3a4-109">If you use SSL to secure the connections between computers in a replication topology, specify a value of **1** or **2** for the **-EncryptionLevel** parameter of each replication agent (a value of **2** is recommended).</span></span> <span data-ttu-id="7f3a4-110">Un valore pari a **1** indica che è utilizzata la crittografia, ma l'agente non verifica che il certificato SSL del server sia firmato da un'autorità emittente attendibile; un valore pari a **2** indica che il certificato viene verificato.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-110">A value of **1** specifies that encryption is used, but the agent does not verify that the SSL server certificate is signed by a trusted issuer; a value of **2** specifies that the certificate is verified.</span></span> <span data-ttu-id="7f3a4-111">I parametri degli agenti possono essere specificati nei profili agente e dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-111">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="7f3a4-112">Per altre informazioni, vedere:</span><span class="sxs-lookup"><span data-stu-id="7f3a4-112">For more information, see:</span></span>  
  
    -   [<span data-ttu-id="7f3a4-113">Usare i profili agenti di replica</span><span class="sxs-lookup"><span data-stu-id="7f3a4-113">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
    -   [<span data-ttu-id="7f3a4-114">Visualizzare e modificare i parametri del prompt dei comandi dell'agente di replica &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="7f3a4-114">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
    -   [<span data-ttu-id="7f3a4-115">Replication Agent Executables Concepts</span><span class="sxs-lookup"><span data-stu-id="7f3a4-115">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
-   <span data-ttu-id="7f3a4-116">Eseguire ogni agente di replica con un diverso account di Windows e utilizzare l'autenticazione di Windows per tutte le connessioni agli agenti di replica.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-116">Run each replication agent under a different Windows account, and use Windows Authentication for all replication agent connections.</span></span> <span data-ttu-id="7f3a4-117">Per altre informazioni su come specificare gli account, vedere [Gestire gli account di accesso e le password nella replica](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-117">For more information about specifying accounts, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
-   <span data-ttu-id="7f3a4-118">Concedere agli agenti solo le autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-118">Grant only the required permissions to each agent.</span></span> <span data-ttu-id="7f3a4-119">Per ulteriori informazioni, vedere la sezione relativa alle autorizzazioni necessarie per gli agenti in [Replication Agent Security Model](replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-119">For more information, see the "Permissions Required by Agents" section of [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="7f3a4-120">Verificare che tutti gli account degli agenti di merge e di distribuzione siano inclusi nell'elenco di accesso alla pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-120">Ensure all Merge Agent and Distribution Agent accounts are in the publication access list (PAL).</span></span> <span data-ttu-id="7f3a4-121">Per altre informazioni, vedere [Proteggere il server di pubblicazione](secure-the-publisher.md).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-121">For more information, see [Secure the Publisher](secure-the-publisher.md).</span></span>  
  
-   <span data-ttu-id="7f3a4-122">Attenersi al principio dei privilegi minimi, concedendo agli account nell'elenco di accesso alla pubblicazione solo le autorizzazioni necessarie per eseguire le attività di replica.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-122">Follow the principle of least privilege by allowing accounts in the PAL only the permissions they need to perform replication tasks.</span></span> <span data-ttu-id="7f3a4-123">Non aggiungere gli account di accesso ad alcun ruolo predefinito del server che non sia necessario per la replica.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-123">Do not add the logins to any fixed server roles that are not required for replication.</span></span>  
  
-   <span data-ttu-id="7f3a4-124">Configurare la condivisione snapshot in modo da consentire l'accesso in lettura a tutti gli agenti di merge e di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-124">Configure the snapshot share to allow read access by all Merge Agents and Distribution Agents.</span></span> <span data-ttu-id="7f3a4-125">Se vengono utilizzati snapshot per pubblicazioni con filtri con parametri, verificare che ogni cartella sia configurata per l'accesso in lettura solo per gli account degli agenti di merge appropriati.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-125">In the case of snapshots for publications with parameterized filters, ensure that each folder is configured to allow access only to the appropriate Merge Agent accounts.</span></span>  
  
-   <span data-ttu-id="7f3a4-126">Configurare la condivisione snapshot per consentire l'accesso in scrittura all'agente snapshot.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-126">Configure the snapshot share to allow write access by the Snapshot Agent.</span></span>  
  
-   <span data-ttu-id="7f3a4-127">Se si utilizzano sottoscrizioni pull, inserire la cartella snapshot in una condivisione di rete anziché in un percorso locale.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-127">If you use pull subscriptions, use a network share rather than a local path for the snapshot folder.</span></span>  
  
 <span data-ttu-id="7f3a4-128">Se nella topologia di replica sono inclusi computer di domini diversi o di domini che non hanno relazioni di trust, è possibile utilizzare l'autenticazione di Windows o l'autenticazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per le connessioni eseguite dagli agenti. Per ulteriori informazioni sui domini, vedere la documentazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-128">If your replication topology includes computers that are not in the same domain or are in domains that do not have trust relationships with each other, you can use Windows Authentication or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication for the connections made by agents (For more information about domains, see the Windows documentation).</span></span> <span data-ttu-id="7f3a4-129">È consigliabile, dal punto di vista della sicurezza, utilizzare l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-129">It is recommended as a security best practice that you use Windows Authentication.</span></span>  
  
-   <span data-ttu-id="7f3a4-130">Per utilizzare l'autenticazione di Windows:</span><span class="sxs-lookup"><span data-stu-id="7f3a4-130">To use Windows Authentication:</span></span>  
  
    -   <span data-ttu-id="7f3a4-131">Aggiungere un account di Windows locale (non un account di dominio) per ogni agente nei nodi appropriati, utilizzando lo stesso nome e password per ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-131">Add a local Windows account (not a domain account) for each agent at the appropriate nodes (use the same name and password at each node).</span></span> <span data-ttu-id="7f3a4-132">Ad esempio, l'agente di distribuzione per una sottoscrizione push viene eseguito nel server di distribuzione e stabilisce connessioni al server di distribuzione e al Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-132">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="7f3a4-133">L'account di Windows per l'agente di distribuzione deve essere aggiunto al server di distribuzione e al Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-133">The Windows account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="7f3a4-134">Verificare che un determinato agente, ad esempio l'agente di distribuzione per una sottoscrizione, venga eseguito con lo stesso account in ogni computer.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-134">Ensure that a given agent (for example the Distribution Agent for a subscription) runs under the same account at each computer.</span></span>  
  
-   <span data-ttu-id="7f3a4-135">Per utilizzare l'autenticazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="7f3a4-135">To use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication:</span></span>  
  
    -   <span data-ttu-id="7f3a4-136">Aggiungere un account di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per ogni agente nei nodi appropriati, utilizzando lo stesso nome e password per ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-136">Add a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for each agent at the appropriate nodes (use the same account name and password at each node).</span></span> <span data-ttu-id="7f3a4-137">Ad esempio, l'agente di distribuzione per una sottoscrizione push viene eseguito nel server di distribuzione e stabilisce connessioni al server di distribuzione e al Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-137">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="7f3a4-138">L'account di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per l'agente di distribuzione deve essere aggiunto al server di distribuzione e al Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-138">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="7f3a4-139">Verificare che un determinato agente, ad esempio l'agente di distribuzione per una sottoscrizione, stabilisca connessioni utilizzando lo stesso account in ogni computer.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-139">Ensure that a given agent (for example the Distribution Agent for a subscription) makes connections under the same account at each computer.</span></span>  
  
    -   <span data-ttu-id="7f3a4-140">Nei casi in cui è necessaria l'autenticazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , l'accesso alle condivisioni snapshot UNC spesso non è disponibile, ad esempio, può essere bloccato da un firewall.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-140">In situations that require [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication, access to UNC snapshot shares is often not available (for example access might be blocked by a firewall).</span></span> <span data-ttu-id="7f3a4-141">In tal caso, è possibile trasferire lo snapshot ai Sottoscrittori tramite FTP.</span><span class="sxs-lookup"><span data-stu-id="7f3a4-141">In this case, you can transfer the snapshot to Subscribers through file transfer protocol (FTP).</span></span> <span data-ttu-id="7f3a4-142">Per altre informazioni, vedere [Trasferire snapshot tramite FTP](../transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="7f3a4-142">For more information, see [Transfer Snapshots Through FTP](../transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7f3a4-143">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7f3a4-143">See Also</span></span>  
 <span data-ttu-id="7f3a4-144">[Abilitare connessioni crittografate al motore di database &#40;Gestione configurazione SQL Server&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="7f3a4-144">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="7f3a4-145">[Replica su Internet](../replication-over-the-internet.md) </span><span class="sxs-lookup"><span data-stu-id="7f3a4-145">[Replication over the Internet](../replication-over-the-internet.md) </span></span>  
 <span data-ttu-id="7f3a4-146">[Proteggere il Sottoscrittore](secure-the-subscriber.md) </span><span class="sxs-lookup"><span data-stu-id="7f3a4-146">[Secure the Subscriber](secure-the-subscriber.md) </span></span>  
 <span data-ttu-id="7f3a4-147">[Proteggere il database di distribuzione](secure-the-distributor.md) </span><span class="sxs-lookup"><span data-stu-id="7f3a4-147">[Secure the Distributor](secure-the-distributor.md) </span></span>  
 <span data-ttu-id="7f3a4-148">[Proteggere il server di pubblicazione](secure-the-publisher.md) </span><span class="sxs-lookup"><span data-stu-id="7f3a4-148">[Secure the Publisher](secure-the-publisher.md) </span></span>  
 [<span data-ttu-id="7f3a4-149">Sicurezza replica di SQL Server</span><span class="sxs-lookup"><span data-stu-id="7f3a4-149">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
