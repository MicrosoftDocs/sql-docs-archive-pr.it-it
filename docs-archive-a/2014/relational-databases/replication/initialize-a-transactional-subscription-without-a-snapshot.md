---
title: Inizializzare una sottoscrizione transazionale senza uno snapshot | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, initializing
- replication [SQL Server], initializing
- initializing subscriptions [SQL Server replication], without snapshots
ms.assetid: 75c8c1f8-60bc-44a8-944b-d18d1f6bda11
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 88e240b75cdbb239548cfcb8e5d8df5eb2af2973
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624583"
---
# <a name="initialize-a-transactional-subscription-without-a-snapshot"></a><span data-ttu-id="4a87e-102">Inizializzazione di una sottoscrizione transazionale senza uno snapshot</span><span class="sxs-lookup"><span data-stu-id="4a87e-102">Initialize a Transactional Subscription Without a Snapshot</span></span>
  <span data-ttu-id="4a87e-103">Per impostazione predefinita, una sottoscrizione di una pubblicazione transazionale viene inizializzata con uno snapshot generato dall'agente snapshot e applicato dall'agente di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-103">By default, a subscription to a transactional publication is initialized with a snapshot, which is generated by the Snapshot Agent and applied by the Distribution Agent.</span></span> <span data-ttu-id="4a87e-104">In alcuni scenari, ad esempio quelli che comportano l'utilizzo di set di dati iniziali di grandi dimensioni, è preferibile inizializzare una sottoscrizione utilizzando un altro metodo.</span><span class="sxs-lookup"><span data-stu-id="4a87e-104">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using another method.</span></span> <span data-ttu-id="4a87e-105">Altri metodi di inizializzazione di un Sottoscrittore includono:</span><span class="sxs-lookup"><span data-stu-id="4a87e-105">Other methods of initializing a Subscriber include:</span></span>  
  
-   <span data-ttu-id="4a87e-106">Specifica di un backup.</span><span class="sxs-lookup"><span data-stu-id="4a87e-106">Specifying a backup.</span></span> <span data-ttu-id="4a87e-107">Ripristinare il backup sul Sottoscrittore in modo che l'agente di distribuzione possa quindi copiare le procedure di sistema e i metadati di replica richiesti.</span><span class="sxs-lookup"><span data-stu-id="4a87e-107">Restore the backup on the Subscriber, and then the Distribution Agent copies any required replication metadata and system procedures.</span></span> <span data-ttu-id="4a87e-108">L'inizializzazione con un backup rappresenta la procedura più rapida per il recapito dei dati al Sottoscrittore ed è conveniente in quanto è possibile utilizzare qualsiasi backup recente purché sia stato eseguito in seguito all'abilitazione della pubblicazione per l'inizializzazione con un backup.</span><span class="sxs-lookup"><span data-stu-id="4a87e-108">Initializing with a backup is the fastest way to deliver data to the Subscriber and is convenient, because any recent backup can be used if it was taken after the publication was enabled for initialization with a backup.</span></span>  
  
-   <span data-ttu-id="4a87e-109">Copia di un set di dati iniziali nel Sottoscrittore mediante un altro meccanismo, quale l'associazione di un database.</span><span class="sxs-lookup"><span data-stu-id="4a87e-109">Copying an initial dataset to the Subscriber through another mechanism, such as attaching a database.</span></span> <span data-ttu-id="4a87e-110">È necessario accertarsi che nel Sottoscrittore siano presenti lo schema e i dati corretti. Successivamente, l'agente di distribuzione copierà le procedure di sistema e i metadati richiesti.</span><span class="sxs-lookup"><span data-stu-id="4a87e-110">You must ensure the correct data and schema are at the Subscriber, and then the Distribution Agent copies any required metadata and system procedures.</span></span>  
  
## <a name="initializing-a-subscription-with-a-backup"></a><span data-ttu-id="4a87e-111">Inizializzazione di una sottoscrizione con un backup</span><span class="sxs-lookup"><span data-stu-id="4a87e-111">Initializing a subscription with a backup</span></span>  
 <span data-ttu-id="4a87e-112">Un backup contiene un intero database. Ogni database di sottoscrizione conterrà pertanto una copia completa del database di pubblicazione dopo l'inizializzazione:</span><span class="sxs-lookup"><span data-stu-id="4a87e-112">A backup contains an entire database; therefore each subscription database will contain a complete copy of the publication database when it is initialized:</span></span>  
  
-   <span data-ttu-id="4a87e-113">Il backup include tabelle non specificate come articoli per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-113">The backup includes tables not specified as articles for the publication.</span></span>  
  
-   <span data-ttu-id="4a87e-114">Il backup include tutti i dati, anche se in una tabella sono specificati filtri di riga o di colonna.</span><span class="sxs-lookup"><span data-stu-id="4a87e-114">The backup includes all data, even if row or column filters are specified on a table.</span></span>  
  
 <span data-ttu-id="4a87e-115">L'operazione di rimozione degli oggetti o dei dati non desiderati in seguito al ripristino del backup è a carico dell'amministratore o dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-115">It is the responsibility of the administrator or application to remove any unwanted objects or data after the backup has been restored.</span></span> <span data-ttu-id="4a87e-116">Nelle sincronizzazioni successive le modifiche ai dati vengono replicate solo se si riferiscono a tabelle specificate come articoli e se le modifiche soddisfano i criteri di filtro specificati.</span><span class="sxs-lookup"><span data-stu-id="4a87e-116">In subsequent synchronizations, data changes are only replicated if they apply to tables specified as articles, and the changes meet any filtering criteria you specified.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4a87e-117">Durante il ripristino di un backup, è necessario accertarsi che il backup provenga dal server di pubblicazione se si desidera sincronizzare automaticamente il Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="4a87e-117">When restoring a backup, you must ensure that the backup came from the Publisher if you want the Subscriber to automatically synchronize.</span></span> <span data-ttu-id="4a87e-118">Nel backup i valori dei numeri di sequenza del file di log (LSN), utilizzati per impostare il punto in cui avviare la sincronizzazione, sono specifici del server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-118">The log sequence number (LSN) values in the backup (which are used to set the point at which to start synchronizing) are specific to the Publisher.</span></span>  
  
 <span data-ttu-id="4a87e-119">**Per inizializzare una sottoscrizione con un backup**</span><span class="sxs-lookup"><span data-stu-id="4a87e-119">**To initialize a subscription with a backup**</span></span>  
  
 <span data-ttu-id="4a87e-120">Per inizializzare una sottoscrizione con un backup, è innanzitutto necessario abilitare l'opzione al momento della creazione di una pubblicazione, quindi specificare i valori per diverse opzioni al momento della creazione di una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-120">To initialize a subscription with a backup, you first must enable the option when you create a publication, and then specify values for a number of options when you create a subscription.</span></span> <span data-ttu-id="4a87e-121">Le pubblicazioni possono essere abilitate mediante la Creazione guidata nuova pubblicazione o a livello di programmazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-121">Publications can be enabled through the New Publication Wizard or programmatically.</span></span> <span data-ttu-id="4a87e-122">I valori richiesti per le opzioni di sottoscrizione, tuttavia, possono essere specificati solo a livello di programmazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-122">However, the values required for the subscription options can only be specified programmatically.</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="4a87e-123">: [Abilitare l'inizializzazione con un backup per le pubblicazioni transazionali &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span><span class="sxs-lookup"><span data-stu-id="4a87e-123">: [Enable Initialization with a Backup for Transactional Publications &#40;SQL Server Management Studio&#41;](enable-initialization-with-backup-for-transactional-publications.md)</span></span>  
  
-   <span data-ttu-id="4a87e-124">Programmazione Transact-SQL della replica: [Inizializzare una sottoscrizione transazionale da un backup &#40;programmazione Transact-SQL della replica&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span><span class="sxs-lookup"><span data-stu-id="4a87e-124">Replication Transact-SQL programming: [Initialize a Transactional Subscription from a Backup &#40;Replication Transact-SQL Programming&#41;](initialize-a-transactional-subscription-from-a-backup.md)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4a87e-125">Se una sottoscrizione viene inizializzata senza utilizzare uno snapshot, l'account con il quale viene eseguito il servizio SQL Server nel server di pubblicazione dovrà disporre delle autorizzazioni di scrittura sulla cartella snapshot del server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-125">If a subscription is initialized without using a snapshot, the account under which the SQL Server service runs at the Publisher must have write permissions on the snapshot folder at the Distributor.</span></span> <span data-ttu-id="4a87e-126">Per ulteriori informazioni sulle autorizzazioni, vedere [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="4a87e-126">For more information about permissions, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
### <a name="ensuring-the-suitability-of-a-backup"></a><span data-ttu-id="4a87e-127">Verifica dell'idoneità di un backup</span><span class="sxs-lookup"><span data-stu-id="4a87e-127">Ensuring the suitability of a backup</span></span>  
 <span data-ttu-id="4a87e-128">Un backup è idoneo per l'inizializzazione di un Sottoscrittore se tutte le transazioni che hanno luogo dopo la relativa esecuzione vengono archiviate nel server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-128">A backup is suitable for initializing a Subscriber if all transactions that occur after the backup was taken are stored at the Distributor.</span></span> <span data-ttu-id="4a87e-129">Se il backup non è idoneo, durante la replica verrà visualizzato un messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="4a87e-129">Replication will display an error message if the backup is not suitable.</span></span>  
  
 <span data-ttu-id="4a87e-130">Per accertarsi che un backup sia idoneo per l'utilizzo, attenersi alle seguenti indicazioni:</span><span class="sxs-lookup"><span data-stu-id="4a87e-130">To help ensure that a backup is suitable for use, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="4a87e-131">Utilizzare l'ultimo backup disponibile e, se è precedente al periodo massimo di memorizzazione della distribuzione, creare un nuovo backup prima di tentare di inizializzare una sottoscrizione con un backup.</span><span class="sxs-lookup"><span data-stu-id="4a87e-131">Use the latest backup available, and if the latest backup is older than the maximum distribution retention period, create a new backup before attempting to initialize a subscription with a backup.</span></span> <span data-ttu-id="4a87e-132">Per ulteriori informazioni sul periodo di memorizzazione, vedere [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span><span class="sxs-lookup"><span data-stu-id="4a87e-132">For more information about retention period, see [Subscription Expiration and Deactivation](subscription-expiration-and-deactivation.md).</span></span>  
  
-   <span data-ttu-id="4a87e-133">Per impostazione predefinita, il processo di pulizia della distribuzione cancella dal database di distribuzione le transazioni che risalgono a più di 72 ore.</span><span class="sxs-lookup"><span data-stu-id="4a87e-133">By default, the distribution cleanup job clears transactions older than 72 hours from the distribution database.</span></span> <span data-ttu-id="4a87e-134">La pulizia si basa sul periodo di memorizzazione impostato per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-134">Cleanup is based on the retention period set for the publication.</span></span> <span data-ttu-id="4a87e-135">Durante la sincronizzazione con backup precedenti, provare a disabilitare temporaneamente il processo prima del backup che si desidera ripristinare e a riabilitarlo in seguito alla creazione della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-135">When synchronizing with older backups, consider temporarily disabling the job before the backup you would like to restore and re-enabling it after the subscription is successfully created.</span></span> <span data-ttu-id="4a87e-136">In questo modo si impedisce la rimozione dal database di distribuzione delle transazioni che potrebbero essere necessarie per la corretta sincronizzazione dal backup.</span><span class="sxs-lookup"><span data-stu-id="4a87e-136">This prevents removal of transactions from the distribution database that might be needed to synchronize successfully from the backup.</span></span> <span data-ttu-id="4a87e-137">Per informazioni sull'esecuzione di processi di pulizia, vedere [Eseguire processi di manutenzione della replica &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="4a87e-137">For information about running cleanup jobs, see [Run Replication Maintenance Jobs &#40;SQL Server Management Studio&#41;](administration/run-replication-maintenance-jobs-sql-server-management-studio.md).</span></span>  
  
 <span data-ttu-id="4a87e-138">In alcuni casi è necessario eseguire manualmente le personalizzazioni nel database del Sottoscrittore ripristinato dopo aver impostato le sottoscrizioni inizializzate con un backup.</span><span class="sxs-lookup"><span data-stu-id="4a87e-138">In some cases you must manually perform customizations in the restored Subscriber database after setting up subscriptions that are initialized with a backup.</span></span> <span data-ttu-id="4a87e-139">In genere, le modifiche manuali nel database del Sottoscrittore ripristinato sono necessarie se il server di pubblicazione è definito in modo che il contenuto del database del Sottoscrittore sia diverso da quello del database del server di pubblicazione, in base alle previsioni.</span><span class="sxs-lookup"><span data-stu-id="4a87e-139">In general, manual modifications at the restored Subscriber database are required if the Publication is defined in such a way that the Subscriber database content is expected to be different from the Publisher database content.</span></span>  
  
-   <span data-ttu-id="4a87e-140">Le viste indicizzate nel database ripristinato devono essere convertite in tabelle se vengono pubblicate come articoli di viste indicizzate di tabelle basati su log</span><span class="sxs-lookup"><span data-stu-id="4a87e-140">Indexed-views at the restored database have to be converted to tables if they are published as log-based indexed-view-to-table articles</span></span>  
  
-   <span data-ttu-id="4a87e-141">Le colonne di tipo timestamp sottoscritte nel database ripristinato devono essere convertite in colonne **binary(8)** . A tale scopo, copiare il contenuto delle tabelle contenenti colonne di tipo timestamp nelle nuove tabelle con schemi corrispondenti, ad eccezione delle colonne **binary(8)** che sostituiscono le colonne di tipo timestamp, eliminare le tabelle originali e rinominare le nuove tabelle con gli stessi nomi delle tabelle originali.</span><span class="sxs-lookup"><span data-stu-id="4a87e-141">Subscribed timestamp columns at the restored database must be converted to **binary(8)** columns: copy the content of the tables containing timestamp columns to new tables with matching schemas except having **binary(8)** columns in place of the timestamp columns, drop the original tables, and rename the new tables with the same names as the original tables.</span></span>  
  
## <a name="initializing-a-subscription-with-an-alternative-method"></a><span data-ttu-id="4a87e-142">Inizializzazione di una sottoscrizione con un metodo alternativo</span><span class="sxs-lookup"><span data-stu-id="4a87e-142">Initializing a subscription with an alternative method</span></span>  
 <span data-ttu-id="4a87e-143">È possibile inizializzare una sottoscrizione utilizzando qualsiasi metodo che consenta di copiare nel Sottoscrittore i dati e lo schema del database di pubblicazione, come [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4a87e-143">It is possible to initialize a subscription using any method that allows you to copy the publication database schema and data to the Subscriber, such as [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)].</span></span> <span data-ttu-id="4a87e-144">Quando si utilizza un metodo alternativo per inizializzare il Sottoscrittore, gli oggetti di supporto della replica vengono copiati nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="4a87e-144">When you use an alternative method to initialize the Subscriber, replication support objects are copied to the Subscriber.</span></span>  
  
 <span data-ttu-id="4a87e-145">Diversamente dall'inizializzazione con un backup, è necessario assicurarsi personalmente o mediante l'applicazione che i dati e lo schema vengano sincronizzati correttamente al momento dell'aggiunta della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="4a87e-145">Unlike initializing with a backup, you or your application must ensure the data and schema are properly synchronized at the time you add the subscription.</span></span> <span data-ttu-id="4a87e-146">Ad esempio, in presenza di attività nel server di pubblicazione tra il momento in cui i dati e lo schema vengono copiati nel Sottoscrittore e il momento in cui viene aggiunta la sottoscrizione, le modifiche risultanti da questa attività potrebbero non essere replicate nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="4a87e-146">If, for example, there is activity on the Publisher between the time data and schema are copied to the Subscriber and the time at which the subscription is added, changes resulting from this activity might not be replicated to the Subscriber.</span></span>  
  
 <span data-ttu-id="4a87e-147">Per inizializzare una sottoscrizione con un metodo alternativo, vedere [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span><span class="sxs-lookup"><span data-stu-id="4a87e-147">To initialize a subscription with an alternative method, see [Initialize a Subscription Manually](initialize-a-subscription-manually.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a87e-148">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="4a87e-148">See Also</span></span>  
 [<span data-ttu-id="4a87e-149">Inizializzare una sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="4a87e-149">Initialize a Subscription</span></span>](initialize-a-subscription.md)  
  
  
