---
title: Amministrazione dell'agente di replica | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Snapshot Agent, administering
- Log Reader Agent, administering
- Queue Reader Agent, administering
- shared agents [SQL Server replication]
- Merge Agent, administering
- Distribution Agent, administering
- agents [SQL Server replication], administering
- replication cleanup jobs [SQL Server]
- administering replication, agents
- replication [SQL Server], administering
- independent agents [SQL Server replication]
ms.assetid: f27186b8-b1b2-4da0-8b2b-91f632c2ab7e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 99cf9be6b31310e5ae0ebac3c096851ac4f63452
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87626665"
---
# <a name="replication-agent-administration"></a><span data-ttu-id="ee9c4-102">Amministrazione dell'agente di replica</span><span class="sxs-lookup"><span data-stu-id="ee9c4-102">Replication Agent Administration</span></span>
  <span data-ttu-id="ee9c4-103">Gli agenti di replica eseguono numerose attività associate alla replica, tra cui la creazione di copie di schemi e di dati, il rilevamento di aggiornamenti nel server di pubblicazione o nel Sottoscrittore e la distribuzione delle modifiche tra i server.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-103">Replication agents carry out many of the tasks associated with replication, including creating copies of schema and data, detecting updates at the Publisher or Subscriber, and propagating changes between servers.</span></span> <span data-ttu-id="ee9c4-104">Per impostazione predefinita, gli agenti di replica eseguono passaggi di processo di [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-104">By default, replication agents run under [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent job steps.</span></span> <span data-ttu-id="ee9c4-105">Gli agenti sono semplici file eseguibili che possono essere chiamati direttamente dalla riga di comando e dagli script batch.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-105">The agents are simply executables, so they can also be called directly from the command line and from batch scripts.</span></span> <span data-ttu-id="ee9c4-106">Ogni agente di replica supporta un set di parametri run-time utilizzati per controllarne il funzionamento. Tali parametri vengono specificati nei profili degli agenti o dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-106">Each replication agent supports a set of run-time parameters used to control how it runs; these parameters are specified in an agent profile or on the command line.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="ee9c4-107">Per impostazione predefinita, il servizio [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent è disabilitato durante l'installazione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] a meno che non si scelga in modo esplicito di avviarlo automaticamente durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-107">By default, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent service is disabled when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed unless you explicitly choose to autostart the service during installation.</span></span>  
  
 <span data-ttu-id="ee9c4-108">I file dell'agente di replica si trovano in [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-108">Replication agent files are located under [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM.</span></span> <span data-ttu-id="ee9c4-109">Nella tabella seguente vengono riportati gli eseguibili di replica disponibili insieme al nome di file corrispondente.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-109">The following table lists the replication executable names and file names.</span></span> <span data-ttu-id="ee9c4-110">Fare clic sul collegamento corrispondente a ogni agente per visualizzarne i parametri di riferimento.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-110">Click the link for an agent to view its parameter reference.</span></span>  
  
|<span data-ttu-id="ee9c4-111">Eseguibile agente</span><span class="sxs-lookup"><span data-stu-id="ee9c4-111">Agent Executable</span></span>|<span data-ttu-id="ee9c4-112">File Name</span><span class="sxs-lookup"><span data-stu-id="ee9c4-112">File Name</span></span>|  
|----------------------|---------------|  
|[<span data-ttu-id="ee9c4-113">Replication Snapshot Agent</span><span class="sxs-lookup"><span data-stu-id="ee9c4-113">Replication Snapshot Agent</span></span>](replication-snapshot-agent.md)|<span data-ttu-id="ee9c4-114">snapshot.exe</span><span class="sxs-lookup"><span data-stu-id="ee9c4-114">snapshot.exe</span></span>|  
|[<span data-ttu-id="ee9c4-115">Replication Distribution Agent</span><span class="sxs-lookup"><span data-stu-id="ee9c4-115">Replication Distribution Agent</span></span>](replication-distribution-agent.md)|<span data-ttu-id="ee9c4-116">distrib.exe</span><span class="sxs-lookup"><span data-stu-id="ee9c4-116">distrib.exe</span></span>|  
|[<span data-ttu-id="ee9c4-117">Agente lettura log repliche</span><span class="sxs-lookup"><span data-stu-id="ee9c4-117">Replication Log Reader Agent</span></span>](replication-log-reader-agent.md)|<span data-ttu-id="ee9c4-118">logread.exe</span><span class="sxs-lookup"><span data-stu-id="ee9c4-118">logread.exe</span></span>|  
|[<span data-ttu-id="ee9c4-119">Agente di lettura coda repliche</span><span class="sxs-lookup"><span data-stu-id="ee9c4-119">Replication Queue Reader Agent</span></span>](replication-queue-reader-agent.md)|<span data-ttu-id="ee9c4-120">qrdrsvc.exe</span><span class="sxs-lookup"><span data-stu-id="ee9c4-120">qrdrsvc.exe</span></span>|  
|[<span data-ttu-id="ee9c4-121">Replication Merge Agent</span><span class="sxs-lookup"><span data-stu-id="ee9c4-121">Replication Merge Agent</span></span>](replication-merge-agent.md)|<span data-ttu-id="ee9c4-122">replmerg.exe</span><span class="sxs-lookup"><span data-stu-id="ee9c4-122">replmerg.exe</span></span>|  
  
 <span data-ttu-id="ee9c4-123">Oltre agli agenti di replica, la replica è caratterizzata da vari processi che eseguono operazioni di manutenzione pianificata e su richiesta.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-123">In addition to replication agents, replication has a number of jobs that perform scheduled and on-demand maintenance.</span></span>  
  
 <span data-ttu-id="ee9c4-124">**Per eseguire gli agenti e i processi di manutenzione**</span><span class="sxs-lookup"><span data-stu-id="ee9c4-124">**To run agents and maintenance jobs**</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="ee9c4-125">e monitoraggio replica: [avviare e arrestare un agente di replica &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-125">and Replication Monitor: [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="ee9c4-126">Programmazione della replica: [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md)</span><span class="sxs-lookup"><span data-stu-id="ee9c4-126">Replication programming: [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md)</span></span>  
  
## <a name="agent-profiles"></a><span data-ttu-id="ee9c4-127">Profili agenti</span><span class="sxs-lookup"><span data-stu-id="ee9c4-127">Agent Profiles</span></span>  
 <span data-ttu-id="ee9c4-128">Durante la configurazione della replica viene installato nel server di distribuzione un set di profili agenti.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-128">When replication is configured, a set of agent profiles is installed on the Distributor.</span></span> <span data-ttu-id="ee9c4-129">Un profilo agente contiene un set di parametri utilizzati a ogni esecuzione dell'agente. Durante il processo di avvio ogni agente esegue l'accesso al server di distribuzione ed esegue una query dei parametri nel proprio profilo.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-129">An agent profile contains a set of parameters that are used each time an agent runs: each agent logs in to the Distributor during its startup process and queries for the parameters in its profile.</span></span> <span data-ttu-id="ee9c4-130">Per ogni agente viene fornito un profilo predefinito, mentre per l'agente di lettura log, l'agente di distribuzione e l'agente di merge vengono creati profili predefiniti aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-130">Replication provides a default profile for each agent and additional predefined profiles for the Log Reader Agent, Distribution Agent, and Merge Agent.</span></span> <span data-ttu-id="ee9c4-131">Oltre a questi profili, è possibile creare profili specifici in base alle esigenze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-131">In addition to the profiles provided, you can create profiles suited to your application requirements.</span></span> <span data-ttu-id="ee9c4-132">Per altre informazioni, vedere [Replication Agent Profiles](replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-132">For more information, see [Replication Agent Profiles](replication-agent-profiles.md).</span></span>  
  
 <span data-ttu-id="ee9c4-133">Per informazioni su come specificare i parametri dalla riga di comando, vedere [Concetti di base relativi ai file eseguibili dell'agente di replica](../concepts/replication-agent-executables-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-133">For information about specifying command line parameters directly, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
## <a name="monitoring-replication-agents"></a><span data-ttu-id="ee9c4-134">Monitoraggio degli agenti di replica</span><span class="sxs-lookup"><span data-stu-id="ee9c4-134">Monitoring Replication Agents</span></span>  
 <span data-ttu-id="ee9c4-135">Monitoraggio replica consente di visualizzare informazioni ed eseguire operazioni associate a ogni agente di replica.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-135">Replication Monitor allows you to view information and perform tasks associated with each replication agent.</span></span> <span data-ttu-id="ee9c4-136">Nell'elenco seguente vengono inclusi tutti gli agenti, le relative schede di Monitoraggio replica e un collegamento all'argomento in cui si spiega come accedere a queste schede:</span><span class="sxs-lookup"><span data-stu-id="ee9c4-136">The following list includes each agent, the tabs in the Replication Monitor on which it can be found, and a link to a topic that explains how to access these tabs:</span></span>  
  
-   <span data-ttu-id="ee9c4-137">Gli agenti seguenti sono associati alle pubblicazioni in Monitoraggio replica:</span><span class="sxs-lookup"><span data-stu-id="ee9c4-137">The following agents are associated with publications in Replication Monitor:</span></span>  
  
    -   <span data-ttu-id="ee9c4-138">agente snapshot</span><span class="sxs-lookup"><span data-stu-id="ee9c4-138">Snapshot Agent</span></span>  
  
    -   <span data-ttu-id="ee9c4-139">Agente di lettura log</span><span class="sxs-lookup"><span data-stu-id="ee9c4-139">Log Reader Agent</span></span>  
  
    -   <span data-ttu-id="ee9c4-140">Agente di lettura coda</span><span class="sxs-lookup"><span data-stu-id="ee9c4-140">Queue Reader Agent</span></span>  
  
     <span data-ttu-id="ee9c4-141">Accedere alle informazioni e alle attività associate a questi agenti tramite la scheda **agenti** . Per ulteriori informazioni, vedere [visualizzare le informazioni ed eseguire attività tramite Monitoraggio replica](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-141">Access information and tasks associated with these agents through the **Agents** tab. For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
-   <span data-ttu-id="ee9c4-142">Gli agenti seguenti sono associati alle sottoscrizioni in Monitoraggio replica:</span><span class="sxs-lookup"><span data-stu-id="ee9c4-142">The following agents are associated with subscriptions in Replication Monitor:</span></span>  
  
    -   <span data-ttu-id="ee9c4-143">Agente di distribuzione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-143">Distribution Agent</span></span>  
  
    -   <span data-ttu-id="ee9c4-144">Agente di merge</span><span class="sxs-lookup"><span data-stu-id="ee9c4-144">Merge Agent</span></span>  
  
     <span data-ttu-id="ee9c4-145">Accedere a informazioni e attività associate a questi agenti tramite le schede seguenti: **Elenco verifica sottoscrizioni** (disponibile per ogni server di pubblicazione) o **Tutte le sottoscrizioni** (disponibile per ogni pubblicazione).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-145">Access information and tasks associated with these agents through the following tabs: **Subscription Watch List** (available for each Publisher) or the **All Subscriptions** tab (available for each publication).</span></span> <span data-ttu-id="ee9c4-146">Per altre informazioni, vedere [Visualizzare le informazioni ed eseguire attività usando Monitoraggio replica](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-146">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="independent-and-shared-agents"></a><span data-ttu-id="ee9c4-147">Agenti indipendenti e condivisi</span><span class="sxs-lookup"><span data-stu-id="ee9c4-147">Independent and Shared Agents</span></span>  
 <span data-ttu-id="ee9c4-148">Gli agenti indipendenti elaborano una sola sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-148">An independent agent is an agent that services one subscription.</span></span> <span data-ttu-id="ee9c4-149">Gli agenti condivisi elaborano più sottoscrizioni. Se è necessario sincronizzare più sottoscrizioni utilizzando lo stesso agente condiviso, per impostazione predefinita le sottoscrizioni vengono poste in attesa in una coda e quindi elaborate dall'agente una alla volta.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-149">A shared agent services multiple subscriptions; if multiple subscriptions using the same shared agent need to synchronize, by default they wait in a queue, and the shared agent services them one at a time.</span></span> <span data-ttu-id="ee9c4-150">Quando si utilizzano gli agenti indipendenti si ottiene una riduzione della latenza in quanto ciò consente di sincronizzare immediatamente la sottoscrizione ogni volta che è necessario.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-150">Latency is reduced when using independent agents because the agent is ready whenever the subscription needs to be synchronized.</span></span> <span data-ttu-id="ee9c4-151">Per la replica di tipo merge vengono sempre utilizzati agenti indipendenti, mentre per la replica transazionale gli agenti indipendenti vengono utilizzati per impostazione predefinita per le pubblicazioni create con Creazione guidata nuova pubblicazione (nelle precedenti versioni di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]per la replica transazionale vengono utilizzati per impostazione predefinita gli agenti condivisi).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-151">Merge replication always uses independent agents, and transactional replication uses independent agents by default for publications created in the New Publication Wizard (in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], transactional replication used shared agents by default).</span></span>  
  
## <a name="replication-maintenance-jobs"></a><span data-ttu-id="ee9c4-152">Processi di manutenzione della replica</span><span class="sxs-lookup"><span data-stu-id="ee9c4-152">Replication Maintenance Jobs</span></span>  
 <span data-ttu-id="ee9c4-153">Per eseguire operazioni di manutenzione pianificata e su richiesta vengono utilizzati i processi seguenti.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-153">Replication uses the following jobs to perform scheduled and on-demand maintenance.</span></span>  
  
|<span data-ttu-id="ee9c4-154">Processo di eliminazione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-154">Clean up job</span></span>|<span data-ttu-id="ee9c4-155">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-155">Description</span></span>|<span data-ttu-id="ee9c4-156">Pianificazione predefinita</span><span class="sxs-lookup"><span data-stu-id="ee9c4-156">Default schedule</span></span>|  
|------------------|-----------------|----------------------|  
|<span data-ttu-id="ee9c4-157">Eliminazione del contenuto della cronologia dell'agente: Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-157">Agent History Clean Up: Distribution</span></span>|<span data-ttu-id="ee9c4-158">Rimuove la cronologia degli agenti di replica dal database di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-158">Removes replication agent history from the distribution database.</span></span>|<span data-ttu-id="ee9c4-159">Viene eseguito ogni dieci minuti.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-159">Runs every ten minutes</span></span>|  
|<span data-ttu-id="ee9c4-160">Eliminazione del contenuto della distribuzione: Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-160">Distribution Clean Up: Distribution</span></span>|<span data-ttu-id="ee9c4-161">Rimuove le transazioni replicate dal database di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-161">Removes replicated transactions from the distribution database.</span></span> <span data-ttu-id="ee9c4-162">Disattiva le sottoscrizioni che non sono state sincronizzate entro il periodo massimo di memorizzazione per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-162">Deactivates subscriptions that have not been synchronized within the maximum distribution retention period.</span></span>|<span data-ttu-id="ee9c4-163">Viene eseguito ogni dieci minuti.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-163">Runs every ten minutes</span></span>|  
|<span data-ttu-id="ee9c4-164">Pulizia dei riferimenti alla sottoscrizione scaduta</span><span class="sxs-lookup"><span data-stu-id="ee9c4-164">Expired Subscription Clean Up</span></span>|<span data-ttu-id="ee9c4-165">Rileva e rimuove le sottoscrizioni scadute dai database di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-165">Detects and removes expired subscriptions from publication databases.</span></span>|<span data-ttu-id="ee9c4-166">Viene eseguito ogni giorno alle ore 1.00 del mattino.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-166">Runs every day at 1:00 A.M.</span></span>|  
|<span data-ttu-id="ee9c4-167">Reinizializzazione delle sottoscrizioni con errori di convalida dei dati</span><span class="sxs-lookup"><span data-stu-id="ee9c4-167">Reinitialize Subscriptions Having Data Validation Failures</span></span>|<span data-ttu-id="ee9c4-168">Rileva tutte le sottoscrizioni in cui si sono verificati errori di convalida dei dati e le contrassegna per la reinizializzazione.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-168">Detects all subscriptions that have data validation failures and marks them for reinitialization.</span></span> <span data-ttu-id="ee9c4-169">Alla successiva esecuzione dell'agente di merge o dell'agente di distribuzione verrà applicato ai Sottoscrittori un nuovo snapshot.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-169">The next time the Merge Agent or Distribution Agent runs, a new snapshot will be applied at the Subscribers.</span></span>|<span data-ttu-id="ee9c4-170">Nessuna pianificazione predefinita (per impostazione predefinita è disabilitato).</span><span class="sxs-lookup"><span data-stu-id="ee9c4-170">No default schedule (not enabled by default).</span></span>|  
|<span data-ttu-id="ee9c4-171">Controllo degli agenti di replica</span><span class="sxs-lookup"><span data-stu-id="ee9c4-171">Replication Agents Checkup</span></span>|<span data-ttu-id="ee9c4-172">Rileva gli agenti di replica che non registrano attivamente una cronologia.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-172">Detects replication agents that are not actively logging history.</span></span> <span data-ttu-id="ee9c4-173">Scrive nel registro eventi di [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows l'eventuale esito negativo di un passaggio del processo.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-173">It writes to the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows event log if a job step fails.</span></span>|<span data-ttu-id="ee9c4-174">Viene eseguito ogni dieci minuti.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-174">Runs every ten minutes.</span></span>|  
|<span data-ttu-id="ee9c4-175">Aggiornamento del monitoraggio della replica per la distribuzione</span><span class="sxs-lookup"><span data-stu-id="ee9c4-175">Replication monitoring refresher for distribution</span></span>|<span data-ttu-id="ee9c4-176">Aggiorna le query memorizzate nella cache utilizzate da Monitoraggio replica.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-176">Refreshes cached queries used by Replication Monitor..</span></span>|<span data-ttu-id="ee9c4-177">Viene eseguito continuamente.</span><span class="sxs-lookup"><span data-stu-id="ee9c4-177">Runs continuously.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ee9c4-178">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ee9c4-178">See Also</span></span>  
 [<span data-ttu-id="ee9c4-179">Monitoraggio della replica</span><span class="sxs-lookup"><span data-stu-id="ee9c4-179">Monitoring Replication</span></span>](../monitoring-replication.md)  
  
  
