---
title: Configurare la sincronizzazione Web | Microsoft Docs
ms.custom: ''
ms.date: 01/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- SQL10.REP.CONFIGWEBSYNCWIZARD.SUBTYPE.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.CLIENTAUTH.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.WEBSERV.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.DIRACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.VIRDIRINFO.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.AUTHACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.COMPLETEWIZ.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.ANONACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.SNAPSHARE.F1
helpviewer_keywords:
- Web synchronization, security best practices
- Web synchronization, configuring
ms.assetid: 21f8e4d4-cd07-4856-98f0-9c9890ebbc82
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 406175533b92d13dce8c14b91b654fbb6099dc22
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624083"
---
# <a name="configure-web-synchronization"></a><span data-ttu-id="e04c6-102">Configurazione della sincronizzazione Web</span><span class="sxs-lookup"><span data-stu-id="e04c6-102">Configure Web Synchronization</span></span>
  <span data-ttu-id="e04c6-103">L'opzione di sincronizzazione Web per la replica di tipo merge di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] consente la replica dei dati tramite il protocollo HTTPS su Internet.</span><span class="sxs-lookup"><span data-stu-id="e04c6-103">The Web synchronization option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Merge Replication enables data replication using the HTTPS protocol over the Internet.</span></span> <span data-ttu-id="e04c6-104">Per utilizzare la sincronizzazione Web, è innanzitutto necessario eseguire le azioni di configurazione riportate di seguito:</span><span class="sxs-lookup"><span data-stu-id="e04c6-104">To use Web synchronization, you first need to perform the following configuration actions:</span></span>  
  
1.  <span data-ttu-id="e04c6-105">Creare nuovi account di dominio ed eseguire il mapping degli account di accesso di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e04c6-105">Create new domain accounts and map [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] logins.</span></span>  
  
2.  <span data-ttu-id="e04c6-106">Configurare il computer che esegue [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) per la sincronizzazione delle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="e04c6-106">Configure the computer that is running [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) to synchronize subscriptions.</span></span>  
  
3.  <span data-ttu-id="e04c6-107">Configurare una pubblicazione di tipo merge per consentire la sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-107">Configure a merge publication to allow Web synchronization.</span></span>  
  
4.  <span data-ttu-id="e04c6-108">Configurare una o più sottoscrizioni per l'utilizzo della sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-108">Configure one or more subscriptions to use Web synchronization.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e04c6-109">Se si intende replicare volumi elevati di dati o utilizzare tipi di dati di grandi dimensioni, ad esempio `varchar(max)`, leggere la sezione "Replica di volumi elevati di dati" in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="e04c6-109">If you plan to replicate large volumes of data or use large data types such as `varchar(max)`, read the section "Replicating Large Volumes of Data" in this topic.</span></span>  
  
 <span data-ttu-id="e04c6-110">Per configurare correttamente la sincronizzazione Web, è necessario decidere come verrà configurata la sicurezza per soddisfare requisiti e criteri specifici.</span><span class="sxs-lookup"><span data-stu-id="e04c6-110">To successfully set up Web synchronization, you must decide how you will configure security to meet your particular requirements and policies.</span></span> <span data-ttu-id="e04c6-111">È preferibile prendere queste decisioni e creare gli account necessari prima di configurare IIS, la pubblicazione e le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="e04c6-111">It is best to make these decisions and create the necessary accounts before you attempt to configure IIS, the publication, and subscriptions.</span></span>  
  
 <span data-ttu-id="e04c6-112">Nelle procedure riportate di seguito viene descritta una configurazione della sicurezza semplificata in cui vengono utilizzati account locali, per motivi di brevità.</span><span class="sxs-lookup"><span data-stu-id="e04c6-112">In the procedures that follow, a simplified security configuration using local accounts is described, for brevity.</span></span> <span data-ttu-id="e04c6-113">Questa configurazione semplificata è adatta per installazioni in cui sia IIS sia il server di pubblicazione e il server di distribuzione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] vengono eseguiti nello stesso computer, anche se è più probabile (e consigliabile) utilizzare una topologia a più server per un'installazione di produzione.</span><span class="sxs-lookup"><span data-stu-id="e04c6-113">This simplified configuration is suitable for installations where both IIS and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Publisher and Distributor are running on the same computer, even though it is much more likely (and recommended) that you will use a multiple-server topology for a production installation.</span></span> <span data-ttu-id="e04c6-114">È possibile sostituire gli account locali indicati nelle procedure con account di dominio.</span><span class="sxs-lookup"><span data-stu-id="e04c6-114">You can substitute domain accounts for the local accounts in the procedures.</span></span>  
  
## <a name="creating-new-accounts-and-mapping-sql-server-logins"></a><span data-ttu-id="e04c6-115">Creazione di nuovi account e mapping di account di accesso di SQL Server</span><span class="sxs-lookup"><span data-stu-id="e04c6-115">Creating New Accounts and Mapping SQL Server Logins</span></span>  
 <span data-ttu-id="e04c6-116">Il listener per la replica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (replisapi.dll) si connette al server di pubblicazione rappresentando l'account specificato per il pool di applicazioni associato al sito Web di replica.</span><span class="sxs-lookup"><span data-stu-id="e04c6-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) connects to the Publisher by impersonating the account specified for the application pool that is associated with the replication web site.</span></span>  
  
 <span data-ttu-id="e04c6-117">L'account utilizzato per il listener per la replica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve disporre di autorizzazioni come descritto in [Merge Agent Security](merge-agent-security.md), nella sezione relativa alla connessione al server di pubblicazione o al server di distribuzione".</span><span class="sxs-lookup"><span data-stu-id="e04c6-117">The account used for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener must have permissions as described in [Merge Agent Security](merge-agent-security.md), under the section "Connect to the Publisher or Distributor."</span></span> <span data-ttu-id="e04c6-118">In breve è necessario che l'account:</span><span class="sxs-lookup"><span data-stu-id="e04c6-118">In summary, the account must:</span></span>  
  
-   <span data-ttu-id="e04c6-119">sia membro dell'elenco di accesso alla pubblicazione;</span><span class="sxs-lookup"><span data-stu-id="e04c6-119">Be a member of the Publication Access List (PAL).</span></span>  
  
-   <span data-ttu-id="e04c6-120">sia sottoposto a mapping a un account di accesso associato a un utente nel database di pubblicazione;</span><span class="sxs-lookup"><span data-stu-id="e04c6-120">Be mapped to a login associated with a user in the publication database.</span></span>  
  
-   <span data-ttu-id="e04c6-121">sia sottoposto a mapping a un account di accesso associato a un utente nel database di distribuzione;</span><span class="sxs-lookup"><span data-stu-id="e04c6-121">Be mapped to a login associated with a user in the distribution database.</span></span>  
  
-   <span data-ttu-id="e04c6-122">disponga delle autorizzazioni di lettura per la condivisione snapshot.</span><span class="sxs-lookup"><span data-stu-id="e04c6-122">Have Read permissions on the snapshot share.</span></span>  
  
 <span data-ttu-id="e04c6-123">Se si utilizza la replica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] per la prima volta è inoltre necessario creare account e account di accesso per gli agenti di replica.</span><span class="sxs-lookup"><span data-stu-id="e04c6-123">If this is the first time you are using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication, you will also need to create accounts and logins for the replication agents.</span></span> <span data-ttu-id="e04c6-124">Per ulteriori informazioni, vedere le sezioni "Configurazione della pubblicazione" e "Configurazione della sottoscrizione" in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="e04c6-124">For more information, see the "Configuring the Publication" and "Configuring the Subscription" sections in this topic.</span></span>  
  
 <span data-ttu-id="e04c6-125">Prima di configurare la sincronizzazione Web, vedere la sezione "Procedure consigliate per la sicurezza nella sincronizzazione Web" in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="e04c6-125">Before you configure Web synchronization, we recommend that you read the "Security Best Practices for Web Synchronization" section in this topic.</span></span> <span data-ttu-id="e04c6-126">Per ulteriori informazioni sulla sicurezza della sincronizzazione Web, vedere [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-126">For more information about Web synchronization security, see [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span></span>  
  
## <a name="configuring-the-computer-that-is-running-iis"></a><span data-ttu-id="e04c6-127">Configurazione del computer che esegue IIS</span><span class="sxs-lookup"><span data-stu-id="e04c6-127">Configuring the Computer That Is Running IIS</span></span>  
 <span data-ttu-id="e04c6-128">La sincronizzazione Web richiede l'installazione e la configurazione di IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-128">Web synchronization requires that you install and configure IIS.</span></span> <span data-ttu-id="e04c6-129">Prima di poter configurare una pubblicazione per l'utilizzo della sincronizzazione Web, è necessario l'URL del sito Web di replica.</span><span class="sxs-lookup"><span data-stu-id="e04c6-129">You will need the URL to the replication Web site before you can configure a publication to use Web synchronization.</span></span>  
  
<span data-ttu-id="e04c6-130">La sincronizzazione Web è supportata in IIS a partire dalla versione 5.0.</span><span class="sxs-lookup"><span data-stu-id="e04c6-130">Web synchronization is supported on IIS beginning with version 5.0.</span></span> <span data-ttu-id="e04c6-131">La Configurazione guidata sincronizzazione Web non è supportata in IIS versione 7.0.</span><span class="sxs-lookup"><span data-stu-id="e04c6-131">The Configure Web Synchronization Wizard is not supported on IIS version 7.0.</span></span> <span data-ttu-id="e04c6-132">A partire da SQL Server 2012, per usare il componente di sincronizzazione Web nel server IIS, è consigliabile installare SQL Server con la replica.</span><span class="sxs-lookup"><span data-stu-id="e04c6-132">Beginning with SQL Server 2012, to use the web sync component on IIS server, we recommend users install SQL Server with replication.</span></span> <span data-ttu-id="e04c6-133">Ad esempio, è possibile installare l'edizione gratuita SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e04c6-133">This can be the free SQL Server Express edition.</span></span>  
  
 <span data-ttu-id="e04c6-134">Per la sincronizzazione Web è richiesto SSL.</span><span class="sxs-lookup"><span data-stu-id="e04c6-134">SSL is required for Web synchronization.</span></span> <span data-ttu-id="e04c6-135">È necessario un certificato di sicurezza rilasciato da un'autorità di certificazione.</span><span class="sxs-lookup"><span data-stu-id="e04c6-135">You will need a security certificate issued by a certification authority.</span></span> <span data-ttu-id="e04c6-136">Solo ai fini del test, è possibile utilizzare un certificato di sicurezza autocertificato.</span><span class="sxs-lookup"><span data-stu-id="e04c6-136">For testing purposes only, you can use a self-issued security certificate.</span></span>  
  
  
 <span data-ttu-id="e04c6-137">**Per configurare IIS per la sincronizzazione Web**</span><span class="sxs-lookup"><span data-stu-id="e04c6-137">**To configure IIS for Web synchronization**</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="e04c6-138">: [Configurare IIS per la sincronizzazione Web](configure-iis-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="e04c6-138">: [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="e04c6-139">: [Configurare IIS 7 per la sincronizzazione Web](configure-iis-7-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="e04c6-139">: [Configure IIS 7 for Web Synchronization](configure-iis-7-for-web-synchronization.md)</span></span>  
  
## <a name="creating-a-web-garden"></a><span data-ttu-id="e04c6-140">Creazione di un Web garden</span><span class="sxs-lookup"><span data-stu-id="e04c6-140">Creating a Web Garden</span></span>  
 <span data-ttu-id="e04c6-141">Il listener per la replica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] supporta due operazioni di sincronizzazione simultanee per thread.</span><span class="sxs-lookup"><span data-stu-id="e04c6-141">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener supports two concurrent synchronization operations per thread.</span></span> <span data-ttu-id="e04c6-142">Il superamento di questo limite potrebbe causare interruzioni nella risposta del listener.</span><span class="sxs-lookup"><span data-stu-id="e04c6-142">Exceeding this limit may cause the Replication Listener to stop responding.</span></span> <span data-ttu-id="e04c6-143">Il numero di thread allocato a replisapi.dll è determinato dalla proprietà Numero massimo di processi di lavoro del pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e04c6-143">The number of threads allocated to replisapi.dll is determined by the application pool Maximum Worker Processes property.</span></span> <span data-ttu-id="e04c6-144">Il valore predefinito della proprietà è 1.</span><span class="sxs-lookup"><span data-stu-id="e04c6-144">By default, this property is set at 1.</span></span>  
  
 <span data-ttu-id="e04c6-145">È possibile supportare un numero maggiore di operazioni di sincronizzazione simultanee per CPU aumentando il valore della proprietà Numero massimo di processi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e04c6-145">You can support a greater number of concurrent synchronization operations per CPU by increasing the Maximum Worker Process property value.</span></span> <span data-ttu-id="e04c6-146">L'operazione di scalabilità orizzontale applicata attraverso l'aumento del numero di processi di lavoro per CPU è nota come creazione di un Web garden.</span><span class="sxs-lookup"><span data-stu-id="e04c6-146">Scaling out by increasing the number of worker processes per CPU is known as creating a "Web garden."</span></span>  
  
 <span data-ttu-id="e04c6-147">Il Web garden consente la sincronizzazione di più di due sottoscrittori contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="e04c6-147">Web gardening will allow more than two Subscribers to synchronize at the same time.</span></span> <span data-ttu-id="e04c6-148">Aumenterà inoltre l'utilizzo della CPU da parte di replisapi.dll, con un potenziale impatto negativo sulle prestazioni complessive del server.</span><span class="sxs-lookup"><span data-stu-id="e04c6-148">It will also increase CPU utilization by replisapi.dll, which can negatively impact overall server performance.</span></span> <span data-ttu-id="e04c6-149">È importante valutare queste considerazioni quando si sceglie un valore per la proprietà Numero massimo di processi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e04c6-149">It is important to balance these considerations when you choose a value for Maximum Worker Processes.</span></span>  
  
#### <a name="to-increase-maximum-worker-processes-in-iis-7"></a><span data-ttu-id="e04c6-150">Per aumentare il valore di Numero massimo di processi di lavoro in IIS 7</span><span class="sxs-lookup"><span data-stu-id="e04c6-150">To increase Maximum Worker Processes in IIS 7</span></span>  
  
1.  <span data-ttu-id="e04c6-151">In **Gestione Internet Information Services (IIS)** espandere il nodo del server locale, quindi fare clic sul nodo **Pool di applicazioni** .</span><span class="sxs-lookup"><span data-stu-id="e04c6-151">In **Internet Information Services (IIS) Manager**, expand the local server node, and then click on the **Application Pool** node.</span></span>  
  
2.  <span data-ttu-id="e04c6-152">Selezionare il pool di applicazioni associato al sito di sincronizzazione Web, quindi fare clic su **Impostazioni avanzate** nel riquadro **Azioni** .</span><span class="sxs-lookup"><span data-stu-id="e04c6-152">Select the application pool associated with the Web synchronization site, and then click **Advanced Settings** on the **Actions** pane.</span></span>  
  
3.  <span data-ttu-id="e04c6-153">Nella finestra di dialogo Impostazioni avanzate, sotto l'intestazione **Elabora modello** , fare clic sulla riga **Numero massimo di processi di lavoro**.</span><span class="sxs-lookup"><span data-stu-id="e04c6-153">On the Advanced Settings dialog, under the **Process Model** heading, click the row labeled **Maximum Worker Processes**.</span></span> <span data-ttu-id="e04c6-154">Modificare il valore della proprietà, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="e04c6-154">Change the property value, and then click **OK**.</span></span>  
  
## <a name="configuring-the-publication"></a><span data-ttu-id="e04c6-155">Configurazione della pubblicazione</span><span class="sxs-lookup"><span data-stu-id="e04c6-155">Configuring the Publication</span></span>  
 <span data-ttu-id="e04c6-156">Per utilizzare la sincronizzazione Web, creare una pubblicazione con le stesse modalità utilizzate per una topologia di merge standard.</span><span class="sxs-lookup"><span data-stu-id="e04c6-156">To use Web synchronization, create a publication in the same way that you would for a standard merge topology.</span></span> <span data-ttu-id="e04c6-157">Per altre informazioni, vedere [Pubblicare dati e oggetti di database](publish/publish-data-and-database-objects.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-157">For more information, see [Publish Data and Database Objects](publish/publish-data-and-database-objects.md).</span></span>  
  
 <span data-ttu-id="e04c6-158">Dopo la creazione della pubblicazione, abilitare l'opzione che consente la sincronizzazione Web utilizzando [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]o gli oggetti RMO (Replication Management Objects).</span><span class="sxs-lookup"><span data-stu-id="e04c6-158">After the publication is created, enable the option to allow for Web synchronization by using one of the following methods: [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span> <span data-ttu-id="e04c6-159">Per abilitare la sincronizzazione Web, è necessario fornire l'indirizzo del server Web per le connessioni del sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="e04c6-159">To enable Web synchronization, you will need to supply the Web server address for Subscriber connections.</span></span>  
  
 <span data-ttu-id="e04c6-160">Se si utilizza un server di pubblicazione per la prima volta, è necessario configurare un server di distribuzione e una condivisione snapshot.</span><span class="sxs-lookup"><span data-stu-id="e04c6-160">If you are using a Publisher for the first time, you must also configure a Distributor and a snapshot share.</span></span> <span data-ttu-id="e04c6-161">L'agente di merge in ogni sottoscrittore deve disporre delle autorizzazioni di lettura per la condivisione snapshot.</span><span class="sxs-lookup"><span data-stu-id="e04c6-161">The Merge Agent at each Subscriber must have read permissions on the snapshot share.</span></span> <span data-ttu-id="e04c6-162">Per altre informazioni, vedere [Configurare la distribuzione](configure-distribution.md) e [Proteggere la cartella snapshot](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-162">For more information, see [Configure Distribution](configure-distribution.md) and [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
 <span data-ttu-id="e04c6-163">`gen` è una parola riservata nei file XML websync.</span><span class="sxs-lookup"><span data-stu-id="e04c6-163">`gen` is a reserved word in websync xml files.</span></span> <span data-ttu-id="e04c6-164">Non tentare di pubblicare tabelle contenenti colonne denominate `gen`.</span><span class="sxs-lookup"><span data-stu-id="e04c6-164">Do not attempt to publish tables containing columns named `gen`.</span></span>  
  
## <a name="configuring-the-subscription"></a><span data-ttu-id="e04c6-165">Configurazione della sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="e04c6-165">Configuring the Subscription</span></span>  
 <span data-ttu-id="e04c6-166">Dopo avere abilitato una pubblicazione e configurato IIS, creare una sottoscrizione pull e specificare che deve essere sincronizzata utilizzando IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-166">After you enable a publication and configure IIS, create a pull subscription and specify that the pull subscription should synchronize by using IIS.</span></span> <span data-ttu-id="e04c6-167">La sincronizzazione Web è supportata solo per le sottoscrizioni pull.</span><span class="sxs-lookup"><span data-stu-id="e04c6-167">(Web synchronization is supported only for pull subscriptions.)</span></span>  
  
## <a name="upgrading-from-an-earlier-version-of-sql-server"></a><span data-ttu-id="e04c6-168">Aggiornamento da una versione precedente di SQL Server</span><span class="sxs-lookup"><span data-stu-id="e04c6-168">Upgrading from an Earlier Version of SQL Server</span></span>  
 <span data-ttu-id="e04c6-169">Se una topologia di sincronizzazione Web è presente e configurata e si aggiorna [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], è necessario assicurarsi che la versione più recente di Replisapi.dll venga copiata nella directory virtuale utilizzata dalla sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-169">If you have an existing Web synchronization topology configured and you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must ensure that the latest version of Replisapi.dll is copied to the virtual directory used by Web synchronization.</span></span> <span data-ttu-id="e04c6-170">Per impostazione predefinita, la versione più recente di Replisapi.dll si trova in C:\Programmi\ Microsoft SQL Server\\<nnn\>\COM.</span><span class="sxs-lookup"><span data-stu-id="e04c6-170">By default, the latest version of Replisapi.dll is located in C:\Program Files\Microsoft SQL Server\\<nnn\>\COM.</span></span>  
  
## <a name="replicating-large-volumes-of-data"></a><span data-ttu-id="e04c6-171">Replica di volumi elevati di dati</span><span class="sxs-lookup"><span data-stu-id="e04c6-171">Replicating Large Volumes of Data</span></span>  
 <span data-ttu-id="e04c6-172">Per evitare potenziali problemi di memoria nei computer sottoscrittori, nella sincronizzazione Web si utilizza una dimensione massima predefinita di 100 MB per il file XML utilizzato per trasferire le modifiche.</span><span class="sxs-lookup"><span data-stu-id="e04c6-172">To help avoid potential memory problems on Subscriber computers Web synchronization uses a default maximum size of 100 MB for the XML file used to transfer changes.</span></span> <span data-ttu-id="e04c6-173">Il limite può essere aumentato impostando la chiave del Registro di sistema seguente:</span><span class="sxs-lookup"><span data-stu-id="e04c6-173">The limit can be raised by setting the following registry key:</span></span>  
  
 <span data-ttu-id="e04c6-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span><span class="sxs-lookup"><span data-stu-id="e04c6-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span></span>  
  
 <span data-ttu-id="e04c6-175">**WebSyncMaxXmlSize DWORD 2000000**</span><span class="sxs-lookup"><span data-stu-id="e04c6-175">**WebSyncMaxXmlSize DWORD 2000000**</span></span>  
  
 <span data-ttu-id="e04c6-176">L'intervallo di valori accettabili per questa chiave è compreso tra 100 MB e 4 GB.</span><span class="sxs-lookup"><span data-stu-id="e04c6-176">The range of acceptable values for this key is 100 MB to 4GB.</span></span> <span data-ttu-id="e04c6-177">Il valore è espresso in KB.</span><span class="sxs-lookup"><span data-stu-id="e04c6-177">The value is specified in KB.</span></span> <span data-ttu-id="e04c6-178">L'impostazione di questo parametro su un valore elevato non garantisce che sia possibile sincronizzare tale quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="e04c6-178">Setting this parameter to a high value does not guarantee that you can synchronize that amount of data.</span></span> <span data-ttu-id="e04c6-179">Il limite effettivo è vincolato dalla quantità di memoria contigua disponibile nel computer del Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="e04c6-179">The effective limit is constrained by how much contiguous memory is available on the Subscriber computer.</span></span> <span data-ttu-id="e04c6-180">Se è necessario impostare un valore maggiore di 100 MB, si consiglia di aumentare il valore in modo incrementale e testare l'utilizzo della memoria con un carico di lavoro tipico nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="e04c6-180">If you must have a value larger than 100 MB, we recommend that you increase the value incrementally and test memory consumption with a typical workload on the Subscriber.</span></span>  
  
 <span data-ttu-id="e04c6-181">La dimensione massima per il file XML è 4 GB, ma la replica sincronizza le modifiche di quel file in batch.</span><span class="sxs-lookup"><span data-stu-id="e04c6-181">The maximum size for the XML file is 4 GB, but replication synchronizes the changes from that file in batches.</span></span> <span data-ttu-id="e04c6-182">La dimensione massima dei batch di dati e metadati è di 25 MB.</span><span class="sxs-lookup"><span data-stu-id="e04c6-182">The maximum batch size of data and metadata is 25 MB.</span></span> <span data-ttu-id="e04c6-183">È necessario assicurarsi che i dati di ciascun batch non superino approssimativamente i 20 MB di dimensioni, per tenere conto dell'overhead dei metadati e di altro tipo.</span><span class="sxs-lookup"><span data-stu-id="e04c6-183">You must ensure that the data in each batch does not exceed approximately 20 MB, which allows for metadata and any other overhead.</span></span> <span data-ttu-id="e04c6-184">Questo limite presenta le implicazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="e04c6-184">This limit has the following implications:</span></span>  
  
-   <span data-ttu-id="e04c6-185">Non è possibile replicare colonne che causano il superamento del limite di 25 MB per dati e metadati.</span><span class="sxs-lookup"><span data-stu-id="e04c6-185">You cannot replicate any column that causes the data and metadata to exceed 25 MB.</span></span> <span data-ttu-id="e04c6-186">Questo potrebbe essere un problema quando si replicano righe contenenti tipi di dati di grandi dimensioni, ad esempio `varchar(max)`.</span><span class="sxs-lookup"><span data-stu-id="e04c6-186">This might be an issue when you are replicating rows that contain large data types, such as `varchar(max)`.</span></span>  
  
-   <span data-ttu-id="e04c6-187">Se si replicano volumi elevati di dati, può essere necessario regolare la dimensione dei batch dell'agente di merge.</span><span class="sxs-lookup"><span data-stu-id="e04c6-187">If you replicate large volumes of data, you might have to adjust the Merge Agent batch size.</span></span>  
  
 <span data-ttu-id="e04c6-188">La dimensione dei batch per la replica di tipo merge è misurata in *generazioni*, ovvero raccolte di modifiche per ogni articolo.</span><span class="sxs-lookup"><span data-stu-id="e04c6-188">Batch size for merge replication is measured in *generations*, which are collections of changes per article.</span></span> <span data-ttu-id="e04c6-189">Il numero di generazioni in un batch viene specificato usando i parametri- `DownloadGenerationsPerBatch` e- `UploadGenerationsPerBatch` del agente di merge.</span><span class="sxs-lookup"><span data-stu-id="e04c6-189">The number of generations in a batch is specified by using the-`DownloadGenerationsPerBatch` and -`UploadGenerationsPerBatch` parameters of the Merge Agent.</span></span> <span data-ttu-id="e04c6-190">Per altre informazioni, vedere [Replication Merge Agent](agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-190">For more information, see [Replication Merge Agent](agents/replication-merge-agent.md).</span></span>  
  
 <span data-ttu-id="e04c6-191">Per volumi elevati di dati, specificare un numero basso per ognuno dei parametri di batch.</span><span class="sxs-lookup"><span data-stu-id="e04c6-191">For large volumes of data, specify a small number for each of the batching parameters.</span></span> <span data-ttu-id="e04c6-192">Si consiglia di iniziare con il valore 10, quindi regolarlo in base alle esigenze e alle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e04c6-192">We recommend that you start with a value of 10, and then tune based on application needs and performance.</span></span> <span data-ttu-id="e04c6-193">In genere, questi parametri sono specificati in un profilo dell'agente.</span><span class="sxs-lookup"><span data-stu-id="e04c6-193">Typically, these parameters are specified in an agent profile.</span></span> <span data-ttu-id="e04c6-194">Per ulteriori informazioni sui profili, vedere [Replication Agent Profiles](agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-194">For more information about profiles, see [Replication Agent Profiles](agents/replication-agent-profiles.md).</span></span>  
  
## <a name="security-best-practices-for-web-synchronization"></a><span data-ttu-id="e04c6-195">Procedure consigliate per la sicurezza nella sincronizzazione Web</span><span class="sxs-lookup"><span data-stu-id="e04c6-195">Security Best Practices for Web Synchronization</span></span>  
 <span data-ttu-id="e04c6-196">Sono disponibili numerose impostazioni relative alla sicurezza nella sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-196">There are many choices for security-related settings in Web synchronization.</span></span> <span data-ttu-id="e04c6-197">È consigliabile adottare l'approccio seguente:</span><span class="sxs-lookup"><span data-stu-id="e04c6-197">We recommend the following approach:</span></span>  
  
-   <span data-ttu-id="e04c6-198">Il server di distribuzione e il server di pubblicazione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] devono trovarsi nello stesso computer. Si tratta della configurazione tipica nella replica di tipo merge.</span><span class="sxs-lookup"><span data-stu-id="e04c6-198">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributor and Publisher can be on the same computer (a typical setup for merge replication).</span></span> <span data-ttu-id="e04c6-199">È tuttavia necessario che IIS sia installato in un computer separato.</span><span class="sxs-lookup"><span data-stu-id="e04c6-199">However, IIS should be installedon a separate computer.</span></span>  
  
-   <span data-ttu-id="e04c6-200">Utilizzare SSL (Secure Sockets Layer) per la crittografia della connessione tra il sottoscrittore e il computer che esegue IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-200">Use Secure Sockets Layer (SSL) to encrypt the connection between the Subscriber and the computer running IIS.</span></span> <span data-ttu-id="e04c6-201">Questa operazione è necessaria per la sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-201">This is required for Web synchronization.</span></span>  
  
-   <span data-ttu-id="e04c6-202">Utilizzare l'autenticazione di base per le connessioni dal sottoscrittore a IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-202">Use Basic Authentication for connections from the Subscriber to IIS.</span></span> <span data-ttu-id="e04c6-203">Con l'autenticazione di base, IIS è in grado di eseguire connessioni al server di pubblicazione/distribuzione per conto del Sottoscrittore senza alcuna delega.</span><span class="sxs-lookup"><span data-stu-id="e04c6-203">Using Basic Authentication, IIS can make connections to the Publisher/Distributor on behalf of the Subscriber without requiring delegation.</span></span> <span data-ttu-id="e04c6-204">La delega è necessaria se si utilizza l'autenticazione integrata.</span><span class="sxs-lookup"><span data-stu-id="e04c6-204">Delegation is required if you use Integrated Authentication.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e04c6-205">L'autenticazione di base è il metodo mediante il quale vengono passate le credenziali a IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-205">Basic Authentication is the method by which credentials are passed to IIS.</span></span> <span data-ttu-id="e04c6-206">L'autenticazione di base non impedisce di specificare account di dominio di Windows per le connessioni a IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-206">Basic Authentication does not prevent specifying Windows domain accounts for connections that are made to IIS.</span></span>  
  
-   <span data-ttu-id="e04c6-207">Specificare che l'agente snapshot deve essere eseguito con un account di dominio di Windows e che deve utilizzare tale account per le connessioni.</span><span class="sxs-lookup"><span data-stu-id="e04c6-207">Specify that the Snapshot Agent should run under a Windows domain account, and specify that the agent should make connections as that account.</span></span> <span data-ttu-id="e04c6-208">Si tratta della configurazione predefinita. Specificare che ogni agente di merge deve essere eseguito con l'account di dominio dell'utente che utilizza il computer Sottoscrittore e che deve utilizzare tale account per le connessioni.</span><span class="sxs-lookup"><span data-stu-id="e04c6-208">(This is the default configuration.) Specify that each Merge Agent should run under the domain account of the user that uses the Subscriber computer, and specify that the agent should make connections as that account.</span></span>  
  
     <span data-ttu-id="e04c6-209">Per ulteriori informazioni sulle autorizzazioni richieste dagli agenti, vedere [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-209">For more information about the permissions that are required by agents, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="e04c6-210">Specificare lo stesso account di dominio utilizzato dal agente di merge quando si specifica un account e una password nella pagina **informazioni server Web** della creazione guidata nuova sottoscrizione o quando si specificano i valori per i **@internet_url** **@internet_login** parametri e di [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e04c6-210">Specify the same domain account as the one the Merge Agent uses when you specify an account and password on the **Web Server Information** page of the New Subscription Wizard or when you specify values for the **@internet_url** and **@internet_login** parameters of [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="e04c6-211">Questo account deve disporre delle autorizzazioni di lettura per la condivisione snapshot.</span><span class="sxs-lookup"><span data-stu-id="e04c6-211">This account must have read permissions for the snapshot share.</span></span>  
  
-   <span data-ttu-id="e04c6-212">Ogni pubblicazione deve utilizzare una directory virtuale separata per IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-212">Each publication should use a separate virtual directory for IIS.</span></span>  
  
-   <span data-ttu-id="e04c6-213">L'account con cui viene eseguito il listener per la replica di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (Replisapi.dll) è anche l'account utilizzato per la connessione al server di pubblicazione e al server di distribuzione durante la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="e04c6-213">The account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (Replisapi.dll) runs is also the account that will connect to the Publisher and Distributor during synchronization.</span></span> <span data-ttu-id="e04c6-214">Deve essere eseguito il mapping di questo account a un account di accesso di SQL nel server di pubblicazione e nel server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e04c6-214">This account must be mapped to a SQL Login account on the Publisher and Distributor.</span></span> <span data-ttu-id="e04c6-215">Per altre informazioni, vedere la sezione "Impostazione delle autorizzazioni per Listener per la replica di SQL Server" in [Configurare IIS per la sincronizzazione Web](configure-iis-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-215">For more information, see the "Setting Permissions for the SQL Server Replication Listener" section in the [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md).</span></span>  
  
-   <span data-ttu-id="e04c6-216">È possibile utilizzare la connessione FTP per trasferire lo snapshot dal server di pubblicazione al computer che esegue IIS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-216">You can use FTP to deliver the snapshot from the Publisher to the computer that is running IIS.</span></span> <span data-ttu-id="e04c6-217">Lo snapshot viene sempre trasferito dal computer che esegue IIS al Sottoscrittore tramite HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e04c6-217">The snapshot is always delivered from the computer that is running IIS to the Subscriber by using HTTPS.</span></span> <span data-ttu-id="e04c6-218">Per altre informazioni, vedere [Trasferire snapshot tramite FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-218">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
-   <span data-ttu-id="e04c6-219">Se i server nella topologia di replica sono protetti da un firewall, potrebbe essere necessario aprire porte nel firewall per consentire la sincronizzazione Web.</span><span class="sxs-lookup"><span data-stu-id="e04c6-219">If servers in the replication topology are behind a firewall, you might need to open ports in the firewall to enable Web synchronization.</span></span>  
  
    -   <span data-ttu-id="e04c6-220">Il computer sottoscrittore si connette al computer che esegue IIS tramite HTTPS utilizzando SSL. In questo caso è in genere configurato l'utilizzo della porta 443.</span><span class="sxs-lookup"><span data-stu-id="e04c6-220">The Subscriber computer connects to the computer that is running IIS over HTTPS using SSL, which is typically configured to use port 443.</span></span> <span data-ttu-id="e04c6-221">I Sottoscrittori di[!INCLUDE[ssEW](../../includes/ssew-md.md)] possono inoltre connettersi tramite HTTP, in genere configurato per l'utilizzo della porta 80.</span><span class="sxs-lookup"><span data-stu-id="e04c6-221">[!INCLUDE[ssEW](../../includes/ssew-md.md)] Subscribers can also connect over HTTP, which is typically configured to use port 80.</span></span>  
  
    -   <span data-ttu-id="e04c6-222">Il computer che esegue IIS si connette in genere al server di pubblicazione o al server di distribuzione mediante la porta 1433 (istanza predefinita).</span><span class="sxs-lookup"><span data-stu-id="e04c6-222">The computer that is running IIS typically connects to the Publisher or Distributor using port 1433 (default instance).</span></span> <span data-ttu-id="e04c6-223">Quando il server di pubblicazione o di distribuzione corrisponde a un'istanza denominata in un server con un'altra istanza predefinita, per la connessione all'istanza denominata viene in genere utilizzata la porta 1500.</span><span class="sxs-lookup"><span data-stu-id="e04c6-223">When the Publisher or Distributor is a named instance on a server with another default instance, port 1500 is typically used to connect to the named instance.</span></span>  
  
    -   <span data-ttu-id="e04c6-224">Se il computer che esegue IIS e il server di distribuzione sono separati da un firewall e per il recapito di snapshot viene utilizzata una condivisione FTP, è necessario aprire le porte utilizzate per FTP.</span><span class="sxs-lookup"><span data-stu-id="e04c6-224">If the computer running IIS is separated from the Distributor by a firewall and an FTP share is used for snapshot delivery, the ports used for FTP must be opened.</span></span> <span data-ttu-id="e04c6-225">Per altre informazioni, vedere [Trasferire snapshot tramite FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-225">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e04c6-226">L'apertura di porte nel firewall potrebbe esporre il server ad attacchi dannosi.</span><span class="sxs-lookup"><span data-stu-id="e04c6-226">Opening ports in your firewall can leave your server exposed to malicious attacks.</span></span> <span data-ttu-id="e04c6-227">Prima di aprire una porta, verificare di comprenderne le implicazioni per un sistema firewall.</span><span class="sxs-lookup"><span data-stu-id="e04c6-227">Make sure that you understand firewall systems before you open ports.</span></span> <span data-ttu-id="e04c6-228">Per altre informazioni, vedere [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="e04c6-228">For more information, see [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e04c6-229">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="e04c6-229">See Also</span></span>  
 [<span data-ttu-id="e04c6-230">Sincronizzazione Web per la replica di tipo merge</span><span class="sxs-lookup"><span data-stu-id="e04c6-230">Web Synchronization for Merge Replication</span></span>](web-synchronization-for-merge-replication.md)  
  
  
