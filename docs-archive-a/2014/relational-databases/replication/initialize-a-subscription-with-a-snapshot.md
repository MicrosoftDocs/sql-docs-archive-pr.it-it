---
title: Inizializzare una sottoscrizione con uno snapshot | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- snapshots [SQL Server replication], initializing subscriptions
- initializing subscriptions [SQL Server replication], snapshots
ms.assetid: 77a9ade2-cdc0-4ae9-a02d-6e29d7c2ada0
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f8b776e71e9d1197bc174169aee8ccf692884308
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624588"
---
# <a name="initialize-a-subscription-with-a-snapshot"></a><span data-ttu-id="70c92-102">Inizializzazione di una sottoscrizione con uno snapshot</span><span class="sxs-lookup"><span data-stu-id="70c92-102">Initialize a Subscription with a Snapshot</span></span>
  <span data-ttu-id="70c92-103">Al termine della creazione di una pubblicazione, uno snapshot iniziale viene in genere creato e copiato nella cartella snapshot. Per impostazione predefinita, queste operazioni vengono eseguite per le pubblicazioni di tipo merge create mediante la Creazione guidata nuova pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="70c92-103">After a publication has been created, an initial snapshot is typically created and copied to the snapshot folder (this occurs by default for merge publications created with the New Publication Wizard).</span></span> <span data-ttu-id="70c92-104">Viene quindi applicato al Sottoscrittore dall'agente di distribuzione (per le pubblicazioni transazionali e snapshot) o dall'agente di merge (per le pubblicazioni di tipo merge) durante la sincronizzazione iniziale della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="70c92-104">It is then applied to the Subscriber by the Distribution Agent (for transactional and snapshot publications) or the Merge Agent (for merge publications) during the initial synchronization of the subscription.</span></span> <span data-ttu-id="70c92-105">Il processo di snapshot dipende dal tipo di pubblicazione:</span><span class="sxs-lookup"><span data-stu-id="70c92-105">The snapshot process depends on the type of publication:</span></span>  
  
-   <span data-ttu-id="70c92-106">Se lo snapshot è per una pubblicazione snapshot, una pubblicazione transazionale o una pubblicazione di tipo merge che non utilizza filtri con parametri, lo snapshot contiene lo schema e i dati nei file di programma per la copia bulk, nonché vincoli, proprietà estese, indici, trigger e le tabelle di sistema necessarie per la replica.</span><span class="sxs-lookup"><span data-stu-id="70c92-106">If the snapshot is for a snapshot publication, a transactional publication, or a merge publication that doesn't use parameterized filters, the snapshot contains the schema and data in bulk copy program (bcp) files, as well as constraints, extended properties, indexes, triggers, and the system tables necessary for replication.</span></span> <span data-ttu-id="70c92-107">Per altre informazioni sulla creazione e l'applicazione dello snapshot, vedere [Creare e applicare lo snapshot](create-and-apply-the-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="70c92-107">For more information about creating and applying the snapshot, see [Create and Apply the Snapshot](create-and-apply-the-snapshot.md).</span></span>  
  
-   <span data-ttu-id="70c92-108">Se lo snapshot è per una pubblicazione di tipo merge che utilizza filtri con parametri, verrà creato utilizzando un processo a due fasi.</span><span class="sxs-lookup"><span data-stu-id="70c92-108">If the snapshot is for a merge publication that uses parameterized filters, the snapshot is created using a two-part process.</span></span> <span data-ttu-id="70c92-109">Viene innanzitutto creato uno snapshot dello schema contenente gli script di replica e lo schema degli oggetti pubblicati, ma non i dati.</span><span class="sxs-lookup"><span data-stu-id="70c92-109">First a schema snapshot is created that contains the replication scripts and the schema of the published objects, but not the data.</span></span> <span data-ttu-id="70c92-110">Ogni sottoscrizione viene quindi inizializzata con uno snapshot che include gli script e lo schema copiati dallo snapshot dello schema e i dati appartenenti alla partizione della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="70c92-110">Each subscription is then initialized with a snapshot that includes the scripts and schema copied from the schema snapshot and the data that belongs to the subscription's partition.</span></span> <span data-ttu-id="70c92-111">Per altre informazioni, vedere [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="70c92-111">For more information, see [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
 <span data-ttu-id="70c92-112">Lo snapshot è costituito da file diversi a seconda del tipo di replica e degli articoli contenuti nella pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="70c92-112">The snapshot consists of different files depending on the type of replication and the articles in your publication.</span></span> <span data-ttu-id="70c92-113">Tali file vengono copiati nella cartella snapshot predefinita specificata al momento della configurazione del server di distribuzione o in quella alternativa specificata al momento della creazione della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="70c92-113">These files are copied to the default snapshot folder specified when the Distributor was configured or the alternate snapshot folder specified when the publication was created.</span></span>  
  
|<span data-ttu-id="70c92-114">Tipo di replica</span><span class="sxs-lookup"><span data-stu-id="70c92-114">Type of Replication</span></span>|<span data-ttu-id="70c92-115">File di snapshot comuni</span><span class="sxs-lookup"><span data-stu-id="70c92-115">Common Snapshot Files</span></span>|  
|-------------------------|---------------------------|  
|<span data-ttu-id="70c92-116">Replica snapshot o transazionale</span><span class="sxs-lookup"><span data-stu-id="70c92-116">Snapshot Replication or Transactional Replication</span></span>|<span data-ttu-id="70c92-117">schema (sch), dati (bcp), vincoli e indici (dri), vincoli (idx), trigger (trg) solo per l'aggiornamento dei Sottoscrittori, file di snapshot compressi (cab)</span><span class="sxs-lookup"><span data-stu-id="70c92-117">schema (.sch); data (.bcp); constraints and indexes (.dri); constraints (.idx); triggers (.trg):for updating Subscribers only; compressed snapshot files (.cab).</span></span>|  
|<span data-ttu-id="70c92-118">Replica di tipo merge</span><span class="sxs-lookup"><span data-stu-id="70c92-118">Merge Replication</span></span>|<span data-ttu-id="70c92-119">schema (sch), dati (bcp), vincoli e indici (dri), trigger (trg), dati di tabelle di sistema (sys), tabelle dei conflitti (cft), file di snapshot compressi (cab)</span><span class="sxs-lookup"><span data-stu-id="70c92-119">schema (.sch); data (.bcp); constraints and indexes (.dri); triggers (.trg); system table data (.sys); conflict tables (.cft); compressed snapshot files (.cab).</span></span>|  
  
 <span data-ttu-id="70c92-120">Se il trasferimento dello snapshot viene interrotto in un punto, verrà ripreso automaticamente senza rinviare i file il cui trasferimento è stato completato.</span><span class="sxs-lookup"><span data-stu-id="70c92-120">If the snapshot transfer is interrupted at any point, it will automatically resume and will not resend any files that have already been completely transferred.</span></span> <span data-ttu-id="70c92-121">L'unità di recapito per l'agente snapshot è il file con estensione bcp per ogni articolo della pubblicazione e pertanto i file recapitati solo in parte devono essere recapitati nuovamente per intero.</span><span class="sxs-lookup"><span data-stu-id="70c92-121">The unit of delivery for the Snapshot Agent is the bcp file for each publication article, so files that are partially delivered must be completely redelivered.</span></span> <span data-ttu-id="70c92-122">Il ripristino dello snapshot, tuttavia, può comportare una riduzione significativa della quantità di dati trasmessi e garantire il recapito dello snapshot in tempo utile anche se la connessione non è affidabile.</span><span class="sxs-lookup"><span data-stu-id="70c92-122">However, resuming the snapshot can significantly reduce the amount of data transmitted and ensure timely snapshot delivery even if the connection is unreliable.</span></span>  
  
## <a name="snapshot-options"></a><span data-ttu-id="70c92-123">Opzioni per gli snapshot</span><span class="sxs-lookup"><span data-stu-id="70c92-123">Snapshot Options</span></span>  
 <span data-ttu-id="70c92-124">Quando si inizializza una sottoscrizione con uno snapshot</span><span class="sxs-lookup"><span data-stu-id="70c92-124">There are a number of options available when initializing a subscription with a snapshot.</span></span> <span data-ttu-id="70c92-125">È possibile:</span><span class="sxs-lookup"><span data-stu-id="70c92-125">You can:</span></span>  
  
-   <span data-ttu-id="70c92-126">Specificare una posizione alternativa per la cartella snapshot in aggiunta a quella predefinita o al posto di questa.</span><span class="sxs-lookup"><span data-stu-id="70c92-126">Specify an alternate snapshot folder location instead of, or in addition, to the default snapshot folder location.</span></span> <span data-ttu-id="70c92-127">Per altre informazioni, vedere [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span><span class="sxs-lookup"><span data-stu-id="70c92-127">For more information, see [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span></span>  
  
-   <span data-ttu-id="70c92-128">Comprimere gli snapshot per l'archiviazione sui supporti rimovibili o il trasferimento su una rete lenta.</span><span class="sxs-lookup"><span data-stu-id="70c92-128">Compress snapshots for storage on removable media or for transfer over a slow network.</span></span> <span data-ttu-id="70c92-129">Per altre informazioni, vedere [Compressed Snapshots](compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="70c92-129">For more information, see [Compressed Snapshots](compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="70c92-130">Eseguire gli script Transact-SQL prima o dopo aver applicato lo snapshot.</span><span class="sxs-lookup"><span data-stu-id="70c92-130">Execute Transact-SQL scripts before or after the snapshot is applied.</span></span> <span data-ttu-id="70c92-131">Per altre informazioni, vedere [Eseguire gli script prima e dopo l'applicazione dello snapshot](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span><span class="sxs-lookup"><span data-stu-id="70c92-131">For more information, see [Execute Scripts Before and After the Snapshot Is Applied](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span></span>  
  
-   <span data-ttu-id="70c92-132">Trasferire i file di snapshot mediante il protocollo FTP (File Transfer Protocol).</span><span class="sxs-lookup"><span data-stu-id="70c92-132">Transfer snapshot files using File Transfer Protocol (FTP).</span></span> <span data-ttu-id="70c92-133">Per altre informazioni, vedere [Trasferire snapshot tramite FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="70c92-133">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="70c92-134">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="70c92-134">See Also</span></span>  
 <span data-ttu-id="70c92-135">[Inizializzare una sottoscrizione](initialize-a-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="70c92-135">[Initialize a Subscription](initialize-a-subscription.md) </span></span>  
 [<span data-ttu-id="70c92-136">Proteggere la cartella snapshot</span><span class="sxs-lookup"><span data-stu-id="70c92-136">Secure the Snapshot Folder</span></span>](security/secure-the-snapshot-folder.md)  
  
  
