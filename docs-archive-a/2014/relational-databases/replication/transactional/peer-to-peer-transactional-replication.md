---
title: Replica transazionale peer-to-peer | Microsoft Docs
ms.custom: ''
ms.date: 08/29/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- bidirectional replication
- transactional replication, bidirectional replication
- bidirectional transactional replication
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication
ms.assetid: 23e7e8c1-002f-4e69-8c99-d63e4100de64
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f61db9a8e7cecb107fd1b27fae966d133e043c8b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87629336"
---
# <a name="peer-to-peer-transactional-replication"></a><span data-ttu-id="1dd9b-102">Replica transazionale peer-to-peer</span><span class="sxs-lookup"><span data-stu-id="1dd9b-102">Peer-to-Peer Transactional Replication</span></span>
  <span data-ttu-id="1dd9b-103">La replica peer-to-peer rappresenta una soluzione per la scalabilità orizzontale ad elevata disponibilità in quanto consente di gestire copie dei dati in più istanze del server, definite *nodi*.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-103">Peer-to-peer replication provides a scale-out and high-availability solution by maintaining copies of data across multiple server instances, also referred to as *nodes*.</span></span> <span data-ttu-id="1dd9b-104">Compilata sulle basi della replica transazionale, la replica peer-to-peer propaga quasi in tempo reale modifiche coerenti dal punto di vista transazionale.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-104">Built on the foundation of transactional replication, peer-to-peer replication propagates transactionally consistent changes in near real-time.</span></span> <span data-ttu-id="1dd9b-105">In tal modo le applicazioni che richiedono la scalabilità orizzontale delle operazioni di lettura possono distribuire le operazioni di lettura dei client in più nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-105">This enables applications that require scale-out of read operations to distribute the reads from clients across multiple nodes.</span></span> <span data-ttu-id="1dd9b-106">Perché i dati vengono gestiti nei nodi quasi in tempo reale, la replica peer-to-peer offre quella funzionalità di ridondanza dei dati che consente di aumentare la disponibilità dei dati.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-106">Because data is maintained across the nodes in near real-time, peer-to-peer replication provides data redundancy, which increases the availability of data.</span></span>  
  
 <span data-ttu-id="1dd9b-107">Un'applicazione Web</span><span class="sxs-lookup"><span data-stu-id="1dd9b-107">Consider a Web application.</span></span> <span data-ttu-id="1dd9b-108">può ad esempio trarre vantaggio dalla replica peer-to-peer nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-108">This can benefit from peer-to-peer replication in the following ways:</span></span>  
  
-   <span data-ttu-id="1dd9b-109">Query sul catalogo e altre operazioni di lettura vengono estese a più nodi,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-109">Catalog queries and other reads are spread across multiple nodes.</span></span> <span data-ttu-id="1dd9b-110">garantendo in tal modo prestazioni coerenti anche in caso di aumento delle operazioni di lettura.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-110">This enables performance to remain consistent as reads increase.</span></span>  
  
-   <span data-ttu-id="1dd9b-111">In caso di errore in un nodo del sistema, un livello dell'applicazione può reindirizzare a un altro nodo le operazioni di scrittura destinate a tale nodo,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-111">If one of the nodes in the system fails, an application layer can redirect the writes for that node to another node.</span></span> <span data-ttu-id="1dd9b-112">garantendo in tal modo la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-112">This maintains availability.</span></span>  
  
-   <span data-ttu-id="1dd9b-113">Se è necessario eseguire la manutenzione di un nodo o un aggiornamento dell'intero sistema, è possibile portare offline il singolo nodo riaggiungerlo al sistema senza influire sulla disponibilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-113">If a node requires maintenance or the whole system requires an upgrade, each node can be taken offline and added back to the system without affecting the availability of the application.</span></span>  
  
 <span data-ttu-id="1dd9b-114">Anche se la replica peer-to-peer consente di abilitare la scalabilità orizzontale per le operazioni di lettura, le prestazioni delle operazioni di scrittura eseguite nella topologia sono simili a quelle di un singolo nodo,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-114">Although peer-to-peer replication enables scaling out of read operations, write performance for the topology is like that for a single node.</span></span> <span data-ttu-id="1dd9b-115">poiché alla fine tutti gli inserimenti, gli aggiornamenti e le eliminazioni vengono propagati in tutti i nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-115">This is because ultimately all inserts, updates, and deletes are propagated to all nodes.</span></span> <span data-ttu-id="1dd9b-116">La replica è in grado di stabilire quando una modifica è stata applicata a un determinato nodo e quindi di impedire che le modifiche passino da un nodo all'altro più volte.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-116">Replication recognizes when a change has been applied to a given node and prevents changes from cycling through the nodes more than one time.</span></span> <span data-ttu-id="1dd9b-117">È consigliabile eseguire nel solo nodo le operazioni di scrittura a livello di singola riga per i motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-117">We strongly recommend that write operations for each row be performed at only node, for the following reasons:</span></span>  
  
-   <span data-ttu-id="1dd9b-118">Se una riga viene modificata in più nodi, può causare un conflitto o persino la perdita di un aggiornamento quando viene propagata in altri nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-118">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
-   <span data-ttu-id="1dd9b-119">La replica delle modifiche implica sempre una certa latenza.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-119">There is always some latency involved when changes are replicated.</span></span> <span data-ttu-id="1dd9b-120">Per le applicazioni che richiedono la disponibilità immediata dell'ultima modifica, il bilanciamento dinamico carico dell'applicazione in più nodi può risultare problematico.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-120">For applications that require the latest change to be seen immediately, dynamically load balancing the application across multiple nodes can be problematic.</span></span>  
  
 <span data-ttu-id="1dd9b-121">La replica peer-to-peer include l'opzione che consente di abilitare il rilevamento dei conflitti in una topologia peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-121">Peer-to-peer replication includes the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="1dd9b-122">Questa opzione consente di prevenire i problemi causati da conflitti non rilevati, incluso il comportamento incoerente dell'applicazione e la perdita di aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-122">This option helps prevent the issues that are caused from undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="1dd9b-123">Se questa opzione è attivata, per impostazione predefinita, una modifica in conflitto viene considerata come un errore critico che impedisce il corretto funzionamento dell'agente di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-123">By enabling this option, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="1dd9b-124">In caso di conflitto la topologia rimane in uno stato incoerente finché il conflitto non viene risolto manualmente e i dati non vengono resi coerenti nell'intera topologia.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-124">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved manually and the data is made consistent across the topology.</span></span> <span data-ttu-id="1dd9b-125">Per altre informazioni, vedere [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-125">For more information, see [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1dd9b-126">Per prevenire potenziali incoerenze dei dati, evitare che si verifichino conflitti in una topologia peer-to-peer, anche quando il rilevamento dei conflitti è abilitato.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-126">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="1dd9b-127">Per garantire che le operazioni di scrittura relative a una determinata riga vengano eseguite in un unico nodo, le applicazioni che accedono e modificano i dati devono partizionare le operazioni di inserimento, aggiornamento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-127">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="1dd9b-128">Tale partizionamento assicura che modifiche apportate a una determinata riga in un singolo nodo vengano sincronizzate con tutti gli altri nodi della topologia prima che la riga venga modificata da un nodo diverso.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-128">This partitioning ensures that modifications to a given row originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="1dd9b-129">Se un'applicazione richiede funzionalità avanzate di rilevamento e risoluzione dei conflitti, utilizzare la replica di tipo merge.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-129">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="1dd9b-130">Per altre informazioni, vedere [Replica di tipo merge](../merge/merge-replication.md) e [Rilevare e risolvere i conflitti tra repliche di tipo merge](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-130">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="peer-to-peer-topologies"></a><span data-ttu-id="1dd9b-131">Topologie peer-to-peer</span><span class="sxs-lookup"><span data-stu-id="1dd9b-131">Peer-to-Peer Topologies</span></span>  
 <span data-ttu-id="1dd9b-132">Negli scenari seguenti vengono illustrati gli utilizzi tipici della replica peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-132">The following scenarios illustrate typical uses for peer-to-peer replication.</span></span>  
  
### <a name="topology-that-has-two-participating-databases"></a><span data-ttu-id="1dd9b-133">Topologia con due database</span><span class="sxs-lookup"><span data-stu-id="1dd9b-133">Topology That Has Two Participating Databases</span></span>  
 <span data-ttu-id="1dd9b-134">![Replica peer-to-peer, due nodi](../media/repl-multinode-01.gif "Replica peer-to-peer, due nodi")</span><span class="sxs-lookup"><span data-stu-id="1dd9b-134">![Peer-to-peer replication, two nodes](../media/repl-multinode-01.gif "Peer-to-peer replication, two nodes")</span></span>  
  
 <span data-ttu-id="1dd9b-135">In entrambe le figure precedenti vengono illustrati due database coinvolti e il traffico di dati utente viene diretto ai database tramite un server applicazioni.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-135">Both of the preceding illustrations show two participating databases, with user traffic directed to the databases through an application server.</span></span> <span data-ttu-id="1dd9b-136">Questa configurazione può essere utilizzata per numerose applicazioni diverse, dai siti Web alle applicazioni per gruppi di lavoro e offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-136">This configuration can be used for a variety of applications, from Web sites to workgroup applications, and provides the following benefits:</span></span>  
  
-   <span data-ttu-id="1dd9b-137">Migliori prestazioni di lettura, poiché le operazioni di lettura sono distribuite a due server.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-137">Improved read performance, because reads are spread out over two servers.</span></span>  
  
-   <span data-ttu-id="1dd9b-138">Maggiore disponibilità in caso di manutenzione o di errore in uno dei nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-138">Higher availability if maintenance is required or in case of failure at one node.</span></span>  
  
 <span data-ttu-id="1dd9b-139">In entrambe le figure il carico dell'attività di lettura è bilanciato tra i database partecipanti, mentre gli aggiornamenti sono gestiti diversamente:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-139">In both illustrations, read activity is load-balanced between the participating databases, but updates are handled differently:</span></span>  
  
-   <span data-ttu-id="1dd9b-140">A sinistra, gli aggiornamenti vengono partizionati tra due server.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-140">On the left, updates are partitioned between the two servers.</span></span> <span data-ttu-id="1dd9b-141">Ad esempio, se nel database fosse disponibile un catalogo dei prodotti, un'applicazione personalizzata potrebbe dirigere gli aggiornamenti al nodo **A** per i prodotti con nomi che iniziano per A-M e al nodo **B** per i prodotti con nomi che iniziano per N-Z. Gli aggiornamenti verrebbero quindi replicati all'altro nodo.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-141">If the database contained a product catalog, you could, for example, have a custom application direct updates to node **A** for product names that start with A through M, and direct updates to node **B** for product names that start with N through Z. Updates are then replicated to the other node.</span></span>  
  
-   <span data-ttu-id="1dd9b-142">A destra tutti gli aggiornamenti vengono diretti al nodo **B** e da questo nodo vengono quindi replicati al nodo **A**. Se **B** è offline, ad esempio per manutenzione, il server applicazioni può dirigere tutte le attività al nodo **A**. Quando **B** sarà nuovamente online, potrà essere raggiunto dagli aggiornamenti e il server applicazioni potrà spostare tutti gli aggiornamenti a **B** o continuare a dirigerli ad **A**.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-142">On the right, all updates are directed to node **B**. From there, updates are replicated to node **A**. If **B** is offline (for example, for maintenance), the application server can direct all activity to **A**. When **B** is back online, updates can flow to it, and the application server can move all updates back to **B** or keep directing them to **A**.</span></span>  
  
 <span data-ttu-id="1dd9b-143">La replica peer-to-peer può supportare entrambi gli approcci, ma l'esempio di aggiornamento centrale illustrato a destra viene spesso utilizzato nella replica transazionale standard.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-143">Peer-to-peer replication can support either approach, but the central update example on the right is also often used with standard transactional replication.</span></span>  
  
### <a name="topologies-that-have-three-or-more-participating-databases"></a><span data-ttu-id="1dd9b-144">Topologie con tre o più database</span><span class="sxs-lookup"><span data-stu-id="1dd9b-144">Topologies That Have Three or More Participating Databases</span></span>  
 <span data-ttu-id="1dd9b-145">![Replica peer-to-peer in posizioni diverse](../media/repl-multinode-02.gif "Replica peer-to-peer in posizioni diverse")</span><span class="sxs-lookup"><span data-stu-id="1dd9b-145">![Peer-to-peer replication to dispersed locations](../media/repl-multinode-02.gif "Peer-to-peer replication to dispersed locations")</span></span>  
  
 <span data-ttu-id="1dd9b-146">Nella figura precedente vengono illustrati tre database partecipanti che rappresentano i dati per un'organizzazione di assistenza software internazionale, con uffici a Los Angeles, Londra e Taipei.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-146">The preceding illustration shows three participating databases that provide data for a worldwide software support organization, with offices in Los Angeles, London, and Taipei.</span></span> <span data-ttu-id="1dd9b-147">I tecnici del supporto tecnico in tutti gli uffici ricevono le chiamate dei clienti e immettono o aggiornano informazioni su ogni chiamata.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-147">The support engineers at each office take customer calls and enter and update information about each customer call.</span></span> <span data-ttu-id="1dd9b-148">I fusi orari dei tre uffici sono separati da un intervallo di otto ore, quindi non si verificano sovrapposizioni nella giornata lavorativa.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-148">The time zones for the three offices are eight hours apart, so there is no overlap in the workday.</span></span> <span data-ttu-id="1dd9b-149">Quando l'ufficio di Taipei chiude, quello di Londra apre.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-149">As the Taipei office closes, the London office is opening for the day.</span></span> <span data-ttu-id="1dd9b-150">Se è in corso una chiamata al momento della chiusura di un ufficio, la chiamata viene trasferita all'operatore dell'altro ufficio.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-150">If a call is still in progress as one office is closing, the call is transferred to a representative at the next office to open.</span></span>  
  
 <span data-ttu-id="1dd9b-151">Ogni sede dispone di un database e di un server applicazioni, che vengono utilizzati dai tecnici del supporto tecnico per l'immissione e l'aggiornamento delle informazioni sulle chiamate dei clienti.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-151">Each location has a database and an application server, which are used by the support engineers as they enter and update information about customer calls.</span></span> <span data-ttu-id="1dd9b-152">La topologia viene partizionata in base al tempo,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-152">The topology is partitioned by time.</span></span> <span data-ttu-id="1dd9b-153">pertanto gli aggiornamenti vengono eseguiti solo nel nodo in uso e successivamente vengono distribuiti agli altri database coinvolti.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-153">Therefore, updates occur only at the node that is currently open for business, and then the updates flow to the other participating databases.</span></span> <span data-ttu-id="1dd9b-154">Questa topologia offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-154">This topology provides the following benefits:</span></span>  
  
-   <span data-ttu-id="1dd9b-155">Indipendenza senza isolamento: ogni ufficio può inserire, aggiornare o eliminare dati in modo indipendente e, al contempo, condividere i dati poiché essi vengono replicati in tutti gli altri database coinvolti.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-155">Independence without isolation: Each office can insert, update, or delete data independently but can also share the data because it is replicated to all other participating databases.</span></span>  
  
-   <span data-ttu-id="1dd9b-156">Maggiore disponibilità in caso di errore o manutenzione in uno o più dei database coinvolti.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-156">Higher availability in case of failure or to allow maintenance at one or more of the participating databases.</span></span>  
  
     <span data-ttu-id="1dd9b-157">![Replica peer-to-peer, tre e quattro nodi](../media/repl-multinode-04.gif "Replica peer-to-peer, tre e quattro nodi")</span><span class="sxs-lookup"><span data-stu-id="1dd9b-157">![Peer-to-peer replication, three and four nodes](../media/repl-multinode-04.gif "Peer-to-peer replication, three and four nodes")</span></span>  
  
 <span data-ttu-id="1dd9b-158">Nella figura precedente viene illustrata l'aggiunta di un nodo alla topologia a tre nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-158">The preceding illustration shows the addition of a node to the three-node topology.</span></span> <span data-ttu-id="1dd9b-159">È possibile scegliere di aggiungere un nodo in questo scenario per i motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-159">A node could be added in this scenario for the following reasons:</span></span>  
  
-   <span data-ttu-id="1dd9b-160">All'apertura di un altro ufficio.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-160">Because another office is opened.</span></span>  
  
-   <span data-ttu-id="1dd9b-161">Per garantire maggiore disponibilità in caso di manutenzione o per incrementare la tolleranza di errore in caso di errore del disco o di altro errore grave.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-161">To provide higher availability to support maintenance or increase fault tolerance if a disk failure or other major failure occurs.</span></span>  
  
 <span data-ttu-id="1dd9b-162">Si noti che nelle topologie a tre e quattro nodi tutti i database pubblicano e sottoscrivono dati in tutti gli altri database,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-162">Notice that in both the three- and four-node topologies, all databases publish and subscribe to all other databases.</span></span> <span data-ttu-id="1dd9b-163">garantendo così la massima disponibilità in caso di manutenzione o di errore in uno o più nodi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-163">This provides maximum availability in case of maintenance needs or failure of one or more nodes.</span></span> <span data-ttu-id="1dd9b-164">In seguito all'aggiunta di nodi, è necessario bilanciare le esigenze di disponibilità e scalabilità in base alle prestazioni e alla complessità della distribuzione e dell'amministrazione.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-164">As nodes are added, you must balance availability and scalability needs against performance and the complexity of deployment and administration.</span></span>  
  
## <a name="configuring-peer-to-peer-replication"></a><span data-ttu-id="1dd9b-165">Configurazione della replica peer-to-peer</span><span class="sxs-lookup"><span data-stu-id="1dd9b-165">Configuring Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="1dd9b-166">La configurazione di una topologia di replica peer-to-peer è molto simile alla configurazione di una serie di pubblicazioni e sottoscrizioni transazionali standard.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-166">Configuring a peer-to-peer replication topology is very similar to configuring a series of standard transactional publications and subscriptions.</span></span> <span data-ttu-id="1dd9b-167">La procedura descritta negli argomenti seguenti illustra la configurazione di un sistema a tre nodi, simile alla configurazione illustrata nel diagramma precedente a sinistra in cui è raffigurata la topologia peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-167">The steps described in the following topics show the configuration of a three-node system, similar to the configuration shown on the left in the previous illustration that shows peer-to-peer topology.</span></span>  
  
## <a name="considerations-for-using-peer-to-peer-replication"></a><span data-ttu-id="1dd9b-168">Considerazioni per l'utilizzo della replica peer-to-peer</span><span class="sxs-lookup"><span data-stu-id="1dd9b-168">Considerations for Using Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="1dd9b-169">In questa sezione vengono fornite informazioni e linee guida da considerare quando si utilizza la replica peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-169">This section provides information and guidelines to consider when you use peer-to-peer replication.</span></span>  
  
### <a name="general-considerations"></a><span data-ttu-id="1dd9b-170">Considerazioni generali</span><span class="sxs-lookup"><span data-stu-id="1dd9b-170">General Considerations</span></span>  
  
-   <span data-ttu-id="1dd9b-171">La replica peer-to-peer è disponibile solo nelle versioni Enterprise di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1dd9b-171">Peer-to-peer replication is available only in Enterprise versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="1dd9b-172">Tutti i database coinvolti nella replica peer-to-peer devono contenere lo stesso schema e gli stessi dati:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-172">All databases that participate in peer-to-peer replication should contain identical schema and data:</span></span>  
  
    -   <span data-ttu-id="1dd9b-173">I nomi degli oggetti, lo schema degli oggetti e i nomi delle pubblicazioni devono essere identici.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-173">Object names, object schema, and publication names should be identical.</span></span>  
  
    -   <span data-ttu-id="1dd9b-174">Le pubblicazioni devono consentire la replica delle modifiche dello schema.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-174">Publications must allow schema changes to be replicated.</span></span> <span data-ttu-id="1dd9b-175">Il valore è **1** per la proprietà della pubblicazione **replicate_ddl**, che corrisponde all'impostazione predefinita. Per altre informazioni, vedere [Apportare modifiche allo schema nei database di pubblicazione](../publish/make-schema-changes-on-publication-databases.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-175">(This is a setting of **1** for the publication property **replicate_ddl**, which is the default setting.) For more information, see [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md).</span></span>  
  
    -   <span data-ttu-id="1dd9b-176">Non è supportata l'applicazioni di filtri alle righe e alle colonne.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-176">Row and column filtering are not supported.</span></span>  
  
-   <span data-ttu-id="1dd9b-177">È consigliabile configurare la replica in modo che ogni nodo utilizzi un database di distribuzione specifico.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-177">We recommend that each node use its own distribution database.</span></span> <span data-ttu-id="1dd9b-178">In questo modo si evita il rischio che si verifichi un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-178">This eliminates the potential of having a single point of failure.</span></span>  
  
-   <span data-ttu-id="1dd9b-179">Non è possibile includere tabelle e altri oggetti in più pubblicazioni peer-to-peer di un singolo database di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-179">Tables and other objects cannot be included in multiple peer-to-peer publications in a single publication database.</span></span>  
  
-   <span data-ttu-id="1dd9b-180">Per poter creare sottoscrizioni, è necessario abilitare una pubblicazione per la replica peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-180">A publication must be enabled for peer-to-peer replication before any subscriptions are created.</span></span>  
  
-   <span data-ttu-id="1dd9b-181">Le sottoscrizioni devono essere inizializzate mediante una copia di backup o tramite l'opzione **'replication support only'** .</span><span class="sxs-lookup"><span data-stu-id="1dd9b-181">Subscriptions must be initialized by using a backup or with the **'replication support only'** option.</span></span> <span data-ttu-id="1dd9b-182">Per altre informazioni, vedere [Inizializzazione di una sottoscrizione transazionale senza uno snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-182">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
-   <span data-ttu-id="1dd9b-183">L'utilizzo di colonne Identity non è consigliato.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-183">We do not recommend the use of identity columns.</span></span> <span data-ttu-id="1dd9b-184">Quando si utilizzano valori Identity, è necessario unire manualmente gli intervalli assegnati alle tabelle in ogni database coinvolto.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-184">When using identities, you must manually manage the ranges assigned to the tables at each participating database.</span></span> <span data-ttu-id="1dd9b-185">Per altre informazioni, vedere la sezione "Assegnazione di intervalli per la gestione manuale degli intervalli di valori Identity" nell'argomento [Replicare colonne Identity](../publish/replicate-identity-columns.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-185">For more information, see the section "Assigning Ranges for Manual Identity Range Management" in [Replicate Identity Columns](../publish/replicate-identity-columns.md).</span></span>  
  
### <a name="feature-restrictions"></a><span data-ttu-id="1dd9b-186">Limitazioni delle funzionalità</span><span class="sxs-lookup"><span data-stu-id="1dd9b-186">Feature Restrictions</span></span>  
 <span data-ttu-id="1dd9b-187">La replica peer-to-peer supporta le funzionalità di base della replica transazionale, ma non le opzioni descritte di seguito:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-187">Peer-to-peer replication supports the core features of transactional replication, but does not support the following options:</span></span>  
  
-   <span data-ttu-id="1dd9b-188">Inizializzazione e reinizializzazione con uno snapshot.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-188">Initialization and reinitialization with a snapshot.</span></span>  
  
-   <span data-ttu-id="1dd9b-189">Filtri di riga e colonna.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-189">Row and column filters.</span></span>  
  
-   <span data-ttu-id="1dd9b-190">Colonne di tipo timestamp.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-190">Timestamp columns.</span></span>  
  
-   <span data-ttu-id="1dd9b-191">Server di pubblicazione e Sottoscrittori non[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1dd9b-191">Non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers and Subscribers.</span></span>  
  
-   <span data-ttu-id="1dd9b-192">Aggiornamento immediato e sottoscrizioni ad aggiornamento in coda.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-192">Immediate updating and queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="1dd9b-193">Sottoscrizioni anonime.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-193">Anonymous subscriptions.</span></span>  
  
-   <span data-ttu-id="1dd9b-194">Sottoscrizioni parziali.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-194">Partial subscriptions.</span></span>  
  
-   <span data-ttu-id="1dd9b-195">Sottoscrizioni collegabili e trasformabili</span><span class="sxs-lookup"><span data-stu-id="1dd9b-195">Attachable subscriptions and transformable subscriptions.</span></span> <span data-ttu-id="1dd9b-196">(opzioni entrambe deprecate in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-196">(Both of these options were deprecated in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].)</span></span>  
  
-   <span data-ttu-id="1dd9b-197">Agenti di distribuzione condivisi.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-197">Shared Distribution Agents.</span></span>  
  
-   <span data-ttu-id="1dd9b-198">Il parametro **-SubscriptionStreams** dell'agente di distribuzione e il parametro **-MaxCmdsInTran**dell'agente di lettura log.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-198">The Distribution Agent parameter **-SubscriptionStreams** and the Log Reader Agent parameter **-MaxCmdsInTran**.</span></span>  
  
-   <span data-ttu-id="1dd9b-199">Le proprietà degli articoli \*\* \@ destination_owner\*\* e \*\* \@ destination_table\*\*.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-199">The article properties **\@destination_owner** and **\@destination_table**.</span></span>  

-   <span data-ttu-id="1dd9b-200">La replica transazionale peer-to-peer non supporta la creazione di una sottoscrizione transazionale unidirezionale di una pubblicazione peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-200">Peer-to-Peer transactional replication does not support creating a one-way transactional subscription to a Peer-to-Peer publication</span></span>
  
 <span data-ttu-id="1dd9b-201">Per le proprietà indicate di seguito sono presenti considerazioni speciali:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-201">The following properties have special considerations:</span></span>  
  
-   <span data-ttu-id="1dd9b-202">La proprietà di pubblicazione \*\* \@ allow_initialize_from_backup\*\* richiede un valore di `true` .</span><span class="sxs-lookup"><span data-stu-id="1dd9b-202">The publication property **\@allow_initialize_from_backup** requires a value of `true`.</span></span>  
  
-   <span data-ttu-id="1dd9b-203">La proprietà di articolo \*\* \@ replicate_ddl\*\* richiede un valore di `true` . \*\* \@ identityrangemanagementoption\*\* richiede un valore di `manual` . \*\* \@ lo stato\*\* richiede che l'opzione **24** sia impostata.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-203">The article property **\@replicate_ddl** requires a value of `true`; **\@identityrangemanagementoption** requires a value of `manual`; and **\@status** requires that option **24** is set.</span></span>  
  
-   <span data-ttu-id="1dd9b-204">Il valore per le proprietà degli articoli \*\* \@ ins_cmd**, \*\* \@ del_cmd**e \*\* \@ upd_cmd\*\* non può essere impostato su `SQL` .</span><span class="sxs-lookup"><span data-stu-id="1dd9b-204">The value for article properties **\@ins_cmd**, **\@del_cmd**, and **\@upd_cmd** cannot be set to `SQL`.</span></span>  
  
-   <span data-ttu-id="1dd9b-205">La proprietà della sottoscrizione \*\* \@ sync_type\*\* richiede un valore di `none` o `automatic` .</span><span class="sxs-lookup"><span data-stu-id="1dd9b-205">The subscription property **\@sync_type** requires a value of `none` or `automatic`.</span></span>  
  
### <a name="maintenance-considerations"></a><span data-ttu-id="1dd9b-206">Considerazioni relative alla manutenzione</span><span class="sxs-lookup"><span data-stu-id="1dd9b-206">Maintenance Considerations</span></span>  
 <span data-ttu-id="1dd9b-207">Per le operazioni seguenti è necessario mettere il sistema in stato di inattività,</span><span class="sxs-lookup"><span data-stu-id="1dd9b-207">The following actions require the system to be quiesced.</span></span> <span data-ttu-id="1dd9b-208">ovvero arrestare le attività sulle tabelle pubblicate in tutti i nodi e verificare che ogni nodo abbia ricevuto tutte le modifiche dagli altri nodi:</span><span class="sxs-lookup"><span data-stu-id="1dd9b-208">This means stopping activity on published tables at all nodes and making sure that each node has received all changes from all other nodes.</span></span>  
  
-   <span data-ttu-id="1dd9b-209">Aggiunta [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] di un nodo a una topologia esistente</span><span class="sxs-lookup"><span data-stu-id="1dd9b-209">Adding a [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] node to an existing topology</span></span>  
  
-   <span data-ttu-id="1dd9b-210">Aggiunta di un articolo a una pubblicazione esistente</span><span class="sxs-lookup"><span data-stu-id="1dd9b-210">Adding an article to an existing publication</span></span>  
  
-   <span data-ttu-id="1dd9b-211">Esecuzione di modifiche nello schema</span><span class="sxs-lookup"><span data-stu-id="1dd9b-211">Making schema changes</span></span>  
  
-   <span data-ttu-id="1dd9b-212">Ripristino di un nodo dal backup</span><span class="sxs-lookup"><span data-stu-id="1dd9b-212">Restoring a node from a backup</span></span>  
  
 <span data-ttu-id="1dd9b-213">Per altre informazioni, vedere [Come mettere una topologia di replica in stato di inattività &#40;programmazione Transact-SQL della replica&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) e [Amministrare una topologia peer-to-peer &#40;programmazione Transact-SQL della replica&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="1dd9b-213">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) and [Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="1dd9b-214">Se si aggiunge un nuovo nodo a una topologia peer-to-peer, è necessario eseguire il ripristino solo dai backup creati dopo l'aggiunta del nuovo nodo.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-214">If you add a new node to a peer-to-peer topology, you should restore only from backups that were created after the new node was added.</span></span>  
  
-   <span data-ttu-id="1dd9b-215">Non è possibile reinizializzare le sottoscrizioni in una topologia peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-215">You cannot reinitialize subscriptions in a peer-to-peer topology.</span></span> <span data-ttu-id="1dd9b-216">Per garantire che un nodo disponga di una nuova copia dei dati, ripristinare un backup nel nodo stesso.</span><span class="sxs-lookup"><span data-stu-id="1dd9b-216">If you have to ensure that a node has a new copy of the data, restore a backup at the node.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1dd9b-217">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="1dd9b-217">See Also</span></span>  
 <span data-ttu-id="1dd9b-218">[Amministrare una topologia peer-to-peer &#40;programmazione Transact-SQL della replica&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span><span class="sxs-lookup"><span data-stu-id="1dd9b-218">[Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span></span>  
 <span data-ttu-id="1dd9b-219">[Strategie per il backup e il ripristino della replica snapshot e della replica transazionale](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="1dd9b-219">[Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span></span>  
 [<span data-ttu-id="1dd9b-220">Tipi di pubblicazioni per la replica transazionale</span><span class="sxs-lookup"><span data-stu-id="1dd9b-220">Publication Types for Transactional Replication</span></span>](transactional-replication.md)  
  
  
