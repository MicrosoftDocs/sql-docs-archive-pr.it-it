---
title: Ottimizzare i filtri di riga con parametri | Microsoft Docs
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- precomputed partitions [SQL Server replication]
- filters [SQL Server replication], parameterized
- merge replication precomputed partitions [SQL Server replication], SQL Server Management Studio
- parameterized filters [SQL Server replication], optimizing
ms.assetid: 49349605-ebd0-4757-95be-c0447f30ba13
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f1c6448d8e2dba7a68fab441d4d08fd4a4a1db4d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724499"
---
# <a name="optimize-parameterized-row-filters"></a><span data-ttu-id="bd6ce-102">Ottimizzazione dei filtri di riga con parametri</span><span class="sxs-lookup"><span data-stu-id="bd6ce-102">Optimize Parameterized Row Filters</span></span>
  <span data-ttu-id="bd6ce-103">In questo argomento si descrive come ottimizzare i filtri di riga con parametri in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] utilizzando [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] o [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bd6ce-103">This topic describes how to optimize parameterized row filters in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
 <span data-ttu-id="bd6ce-104">**Contenuto dell'articolo**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-104">**In This Topic**</span></span>  
  
-   <span data-ttu-id="bd6ce-105">**Prima di iniziare:**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-105">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="bd6ce-106">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="bd6ce-106">Recommendations</span></span>](#Recommendations)  
  
-   <span data-ttu-id="bd6ce-107">**Per ottimizzare i filtri di riga con parametri, utilizzando:**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-107">**To optimize parameterized row filters, using:**</span></span>  
  
     [<span data-ttu-id="bd6ce-108">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bd6ce-108">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="bd6ce-109">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="bd6ce-109">Transact-SQL</span></span>](#TsqlProcedure)  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="bd6ce-110">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="bd6ce-110">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="bd6ce-111">Indicazioni</span><span class="sxs-lookup"><span data-stu-id="bd6ce-111">Recommendations</span></span>  
  
-   <span data-ttu-id="bd6ce-112">Quando si utilizzano filtri con parametri, è possibile controllare in che modo i filtri vengono elaborati dalla replica di tipo merge specificando l'opzione **use partition groups** o **keep partition changes** durante la creazione di una pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-112">When you use parameterized filters, you can control how the filters are processed by merge replication by specifying either the **use partition groups** option or the **keep partition changes** option when you create a publication.</span></span> <span data-ttu-id="bd6ce-113">Queste opzioni consentono di migliorare le prestazioni di sincronizzazione delle pubblicazioni con gli articoli filtrati tramite l'archiviazione di metadati aggiuntivi nel database di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-113">These options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="bd6ce-114">È possibile controllare la modalità di condivisione dei dati tra i Sottoscrittori impostando l'opzione **partition options** durante la creazione di un articolo.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-114">You can control how the data is shared among Subscribers by setting **partition options** when you create an article.</span></span> <span data-ttu-id="bd6ce-115">Per altre informazioni su tali requisiti, vedere [Filtri di riga con parametri](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-115">For more information about these requirements, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
     <span data-ttu-id="bd6ce-116">Con i Sottoscrittori [!INCLUDE[ssEW](../../../includes/ssew-md.md)], keep_partition_changes deve essere impostato su true per assicurarsi che le eliminazioni vengano propagate correttamente.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-116">With [!INCLUDE[ssEW](../../../includes/ssew-md.md)]SQL Server Compact subscribers, keep_partition_changes must be set to true to ensure that deletes are correctly propagated.</span></span> <span data-ttu-id="bd6ce-117">Se impostato su false, nel Sottoscrittore potrebbero essere presenti più righe rispetto al previsto.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-117">When set to false, the subscriber might have more rows than expected.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="bd6ce-118">Utilizzo di SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="bd6ce-118">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="bd6ce-119">È possibile utilizzare le impostazioni seguenti per ottimizzare i filtri di riga con parametri:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-119">The following settings can be used to optimize parameterized row filters:</span></span>  
  
 <span data-ttu-id="bd6ce-120">**Partition Options**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-120">**Partition Options**</span></span>  
 <span data-ttu-id="bd6ce-121">Impostare questa opzione nella pagina **Proprietà** della finestra di dialogo **Proprietà articolo - \<Article>** o nella finestra di dialogo **Aggiungi filtro**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-121">Set this option on the **Properties** page of the **Article Properties - \<Article>** dialog box, or in the **Add Filter** dialog box.</span></span> <span data-ttu-id="bd6ce-122">Entrambe le finestre di dialogo sono disponibili nella Creazione guidata nuova pubblicazione e nella finestra di dialogo **Proprietà pubblicazione - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="bd6ce-122">Both dialog boxes are available in the New Publication Wizard and the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="bd6ce-123">La finestra di dialogo **Proprietà articolo - \<Article>** consente di specificare altri valori per questa opzione, che non sono disponibili nella finestra di dialogo **Aggiungi filtro**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-123">The **Article Properties - \<Article>** dialog box allows you to specify additional values for this option that are not available in the **Add Filter** dialog box.</span></span>  
  
 <span data-ttu-id="bd6ce-124">**Pre-calcola partizioni**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-124">**Precompute Partitions**</span></span>  
 <span data-ttu-id="bd6ce-125">Per impostazione predefinita, questa opzione viene impostata su **True** se gli articoli nella pubblicazione rispondono a una serie di requisiti.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-125">This option is set to **True** by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="bd6ce-126">Per altre informazioni su questi requisiti, vedere [Ottimizzare le prestazioni dei filtri con parametri con le partizioni pre-calcolate](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-126">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="bd6ce-127">Modificare questa opzione nella pagina **Opzioni sottoscrizione** della finestra di dialogo **Proprietà pubblicazione - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="bd6ce-127">Modify this option on the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
 <span data-ttu-id="bd6ce-128">**Ottimizza sincronizzazione**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-128">**Optimize Synchronization**</span></span>  
 <span data-ttu-id="bd6ce-129">Questa opzione deve essere impostata su **True** solo se **Pre-calcola partizioni** viene impostata su **False**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-129">This option should be set to **True** only if **Precompute Partitions** is set to **False**.</span></span> <span data-ttu-id="bd6ce-130">Impostare questa opzione nella pagina **Opzioni sottoscrizione** della finestra di dialogo **Proprietà pubblicazione - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="bd6ce-130">Set this option on the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
 <span data-ttu-id="bd6ce-131">Per altre informazioni sull'uso della Creazione guidata nuova pubblicazione e sull'accesso alla finestra di dialogo **Proprietà pubblicazione - \<Publication>** , vedere [Creare una pubblicazione](create-a-publication.md) e [Visualizzare e modificare le proprietà della pubblicazione](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-131">For more information about using the New Publication Wizard and accessing the **Publication Properties - \<Publication>** dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-set-partition-options-in-the-add-filter-or-edit-filter-dialog-box"></a><span data-ttu-id="bd6ce-132">Per impostare le opzioni delle partizioni nella finestra di dialogo Aggiungi filtro o Modifica filtro</span><span class="sxs-lookup"><span data-stu-id="bd6ce-132">To set Partition options in the Add Filter or Edit Filter dialog box</span></span>  
  
1.  <span data-ttu-id="bd6ce-133">Nella pagina **Filtro righe tabella** della Creazione guidata nuova pubblicazione o nella pagina **Filtra righe** della finestra di dialogo **Proprietà pubblicazione - \<Publication>** fare clic su **Aggiungi** e quindi su **Aggiungi filtro**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-133">On the **Filter Table Rows** page of the New Publication Wizard or the **Filter Rows** page of the **Publication Properties - \<Publication>** dialog box, click **Add**, and then click **Add Filter**.</span></span>  
  
2.  <span data-ttu-id="bd6ce-134">Creare un filtro con parametri.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-134">Create a parameterized filter.</span></span> <span data-ttu-id="bd6ce-135">Per altre informazioni, vedere [Definizione e modifica di un filtro di riga con parametri per un articolo di merge](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-135">For more information, see [Define and Modify a Parameterized Row Filter for a Merge Article](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
3.  <span data-ttu-id="bd6ce-136">Selezionare l'opzione corrispondente alla modalità desiderata di condivisione dei dati tra i Sottoscrittori:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-136">Select the option that matches how data will be shared among Subscribers:</span></span>  
  
    -   <span data-ttu-id="bd6ce-137">**Una riga di questa tabella verrà inviata a più sottoscrizioni**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-137">**A row from this table will go to multiple subscriptions**</span></span>  
  
    -   <span data-ttu-id="bd6ce-138">**Una riga di questa tabella verrà inviata a una sola sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-138">**A row from this table will go to only one subscription**</span></span>  
  
     <span data-ttu-id="bd6ce-139">Selezionando **Una riga di questa tabella verrà inviata a una sola sottoscrizione**è possibile ottimizzare le prestazioni della replica di tipo merge archiviando ed elaborando una minore quantità di metadati.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-139">If you select **A row from this table will go to only one subscription**, merge replication can optimize performance by storing and processing less metadata.</span></span> <span data-ttu-id="bd6ce-140">È tuttavia necessario garantire che i dati vengano partizionati in modo da non consentire la replica di una riga in più Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-140">However, you must ensure that the data is partitioned in such a way that a row cannot be replicated to more than one Subscriber.</span></span> <span data-ttu-id="bd6ce-141">Per altre informazioni, vedere la sezione relativa all'impostazione delle opzioni delle partizioni nell'argomento [Filtri di riga con parametri](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-141">For more information, see the section "Setting 'partition options'" in the topic [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="bd6ce-142">Se è visualizzata la finestra di dialogo **Proprietà pubblicazione - \<Publication>** fare clic su **OK** per salvare e chiudere la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-142">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
#### <a name="to-set-partition-options-in-the-article-properties---article-dialog-box"></a><span data-ttu-id="bd6ce-143">Per impostare Opzioni partizioni nella finestra di dialogo Proprietà articolo - \<Article></span><span class="sxs-lookup"><span data-stu-id="bd6ce-143">To set Partition Options in the Article Properties - \<Article> dialog box</span></span>  
  
1.  <span data-ttu-id="bd6ce-144">Nella pagina **Articoli** della Creazione guidata nuova pubblicazione o nella finestra di dialogo **Proprietà pubblicazione - \<Publication>** selezionare una tabella e quindi fare clic su **Proprietà articolo**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-144">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table, and then click **Article Properties**.</span></span>  
  
2.  <span data-ttu-id="bd6ce-145">Fare clic su **Imposta proprietà dell'articolo di tabelle evidenziato** o su **Imposta proprietà di tutti gli articoli di tabelle**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-145">Click **Set Properties of Highlighted Table Article** or **Set Properties of All Table Articles**.</span></span>  
  
3.  <span data-ttu-id="bd6ce-146">Nella sezione **Oggetto di destinazione** della scheda **Proprietà** della finestra di dialogo **Proprietà articolo - \<Article>** specificare uno dei seguenti valori per **Opzioni partizioni**:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-146">In the **Destination Object** section of the **Properties** tab of the **Article Properties - \<Article>** dialog box, specify one of the following values for **Partition Options**:</span></span>  
  
    -   <span data-ttu-id="bd6ce-147">**Sovrapposte**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-147">**Overlapping**</span></span>  
  
    -   <span data-ttu-id="bd6ce-148">**Sovrapposte, non ammesse modifiche dei dati fuori partizione**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-148">**Overlapping, disallow out-of-partition data changes**</span></span>  
  
    -   <span data-ttu-id="bd6ce-149">**Non sovrapposte, sottoscrizione unica**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-149">**Nonoverlapping, single subscription**</span></span>  
  
    -   <span data-ttu-id="bd6ce-150">**Non sovrapposte, condivise dalle sottoscrizioni**</span><span class="sxs-lookup"><span data-stu-id="bd6ce-150">**Nonoverlapping, shared between subscriptions**</span></span>  
  
     <span data-ttu-id="bd6ce-151">Per ulteriori informazioni su queste opzioni e sulla loro relazione con le opzioni disponibili nelle finestre di dialogo **Aggiungi filtro** e **Modifica filtro** , vedere la sezione relativa all'impostazione delle opzioni partizioni nell'argomento [i filtri di riga con parametri](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-151">For more information about these options and how they relate to the options available in the **Add Filter** and **Edit Filter** dialog boxes, see the "Setting 'partition options'" section of [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="bd6ce-152">Se è visualizzata la finestra di dialogo **Proprietà pubblicazione - \<Publication>** fare clic su **OK** per salvare e chiudere la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-152">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
#### <a name="to-set-precompute-partitions"></a><span data-ttu-id="bd6ce-153">Per impostare Pre-calcola partizioni</span><span class="sxs-lookup"><span data-stu-id="bd6ce-153">To set Precompute Partitions</span></span>  
  
1.  <span data-ttu-id="bd6ce-154">Nella pagina **Opzioni sottoscrizione** della finestra di dialogo **Proprietà pubblicazione - \<Publication>** selezionare un valore per l'opzione **Pre-calcola partizioni**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-154">On the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box, select a value for the **Precompute Partitions** option.</span></span> <span data-ttu-id="bd6ce-155">Questa proprietà è in sola lettura se:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-155">The property is read-only if:</span></span>  
  
    -   <span data-ttu-id="bd6ce-156">La pubblicazione non soddisfa i requisiti delle partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-156">The publication does not meet the requirements for precomputed partitions.</span></span>  
  
    -   <span data-ttu-id="bd6ce-157">Non è ancora stato generato lo snapshot per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-157">A snapshot has not yet been generated for the publication.</span></span> <span data-ttu-id="bd6ce-158">In questo caso, l'opzione visualizza il valore **Imposta automaticamente alla creazione di uno snapshot**.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-158">In this case, the option displays a value of **Set automatically when a snapshot is created**.</span></span>  
  
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-set-optimize-synchronization"></a><span data-ttu-id="bd6ce-159">Per impostare Ottimizza sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="bd6ce-159">To set Optimize Synchronization</span></span>  
  
1.  <span data-ttu-id="bd6ce-160">Nella pagina **Opzioni sottoscrizione** della finestra di dialogo **Proprietà pubblicazione \<Publication> -** selezionare il valore **true** per l'opzione **Ottimizza sincronizzazione** .</span><span class="sxs-lookup"><span data-stu-id="bd6ce-160">On the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box, select a value of **True** for the **Optimize Synchronization** option.</span></span>  
  
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="bd6ce-161">Uso di Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="bd6ce-161">Using Transact-SQL</span></span>  
 <span data-ttu-id="bd6ce-162">Per le definizioni delle opzioni di filtro per \*\* \@ keep_partition_changes\*\* e \*\* \@ use_partition_groups\*\*, vedere [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-162">For definitions of the filtering options for **\@keep_partition_changes** and **\@use_partition_groups**, see [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span>  
  
#### <a name="to-specify-merge-filter-optimizations-when-creating-a-new-publication"></a><span data-ttu-id="bd6ce-163">Per specificare le ottimizzazioni del filtro di merge durante la creazione di una nuova pubblicazione</span><span class="sxs-lookup"><span data-stu-id="bd6ce-163">To specify merge filter optimizations when creating a new publication</span></span>  
  
1.  <span data-ttu-id="bd6ce-164">Nel database di pubblicazione del server di pubblicazione eseguire [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-164">At the Publisher on the publication database, execute [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span> <span data-ttu-id="bd6ce-165">Specificare \*\* \@ Publication\*\* e il valore `true` per uno dei parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-165">Specify **\@publication** and a value of `true` for one the following parameters:</span></span>  
  
    -   <span data-ttu-id="bd6ce-166">\*\* \@ use_partition_groups\*\*: la massima ottimizzazione delle prestazioni, purché gli articoli siano conformi ai requisiti per le partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-166">**\@use_partition_groups**: - the highest performance optimization, provided that the articles conform to the requirements for precomputed partitions.</span></span> <span data-ttu-id="bd6ce-167">Per altre informazioni, vedere [Ottimizzare le prestazioni dei filtri con parametri con le partizioni pre-calcolate](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-167">For more information, see [Optimize Parameterized Filter Performance with Precomputed Partitions](../merge/parameterized-filters-optimize-for-precomputed-partitions.md).</span></span>  
  
    -   <span data-ttu-id="bd6ce-168">\*\* \@ keep_partition_changes\*\* : utilizzare questa ottimizzazione se non è possibile utilizzare le partizioni pre-calcolate.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-168">**\@keep_partition_changes** - use this optimization if precomputed partitions cannot be used.</span></span>  
  
2.  <span data-ttu-id="bd6ce-169">Aggiungere un processo snapshot per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-169">Add a snapshot job for the publication.</span></span> <span data-ttu-id="bd6ce-170">Per altre informazioni, vedere [Creare una pubblicazione](create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-170">For more information see [Create a Publication](create-a-publication.md).</span></span>  
  
3.  <span data-ttu-id="bd6ce-171">Nel database di pubblicazione del server di pubblicazione eseguire [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)specificando i parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="bd6ce-171">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), specifying the following parameters:</span></span>  
  
    -   <span data-ttu-id="bd6ce-172">\*\* \@ Publication\*\* : nome della pubblicazione del passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-172">**\@publication** - the name of the publication from step 1.</span></span>  
  
    -   <span data-ttu-id="bd6ce-173">\*\* \@ article\*\* : nome dell'articolo</span><span class="sxs-lookup"><span data-stu-id="bd6ce-173">**\@article** - a name for the article</span></span>  
  
    -   <span data-ttu-id="bd6ce-174">\*\* \@ source_object\*\* -l'oggetto di database da pubblicare.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-174">**\@source_object** - the database object being published.</span></span>  
  
    -   <span data-ttu-id="bd6ce-175">\*\* \@ subset_filterclause\*\* : clausola di filtro con parametri facoltativa utilizzata per filtrare orizzontalmente l'articolo.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-175">**\@subset_filterclause** - the optional parameterized filter clause used to horizontally filter the article.</span></span>  
  
    -   <span data-ttu-id="bd6ce-176">\*\* \@ partition_options\*\* : opzioni di partizione per l'articolo filtrato.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-176">**\@partition_options** - the partition options for the filtered article.</span></span>  
  
4.  <span data-ttu-id="bd6ce-177">Ripetere il passaggio 3 per ogni articolo della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-177">Repeat step 3 for each article in the publication.</span></span>  
  
5.  <span data-ttu-id="bd6ce-178">(Facoltativo) Nel database di pubblicazione del server di pubblicazione eseguire [sp_addmergefilter](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql) per definire un filtro di join tra due articoli.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-178">(Optional) At the Publisher on the publication database, execute [sp_addmergefilter](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql) to define a join filter between two articles.</span></span> <span data-ttu-id="bd6ce-179">Per altre informazioni, vedere [Definizione e modifica di un filtro di join tra articoli di merge](define-and-modify-a-join-filter-between-merge-articles.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-179">For more information, see [Define and Modify a Join Filter Between Merge Articles](define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
#### <a name="to-view-and-modify-merge-filter-behaviors-for-an-existing-publication"></a><span data-ttu-id="bd6ce-180">Per visualizzare e modificare i comportamenti del filtro di merge per una pubblicazione esistente</span><span class="sxs-lookup"><span data-stu-id="bd6ce-180">To view and modify merge filter behaviors for an existing publication</span></span>  
  
1.  <span data-ttu-id="bd6ce-181">Opzionale Nel database di pubblicazione del server di pubblicazione eseguire [sp_helpmergepublication](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql), specificando \*\* \@ Publication\*\*.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-181">(Optional) At the Publisher on the publication database, execute [sp_helpmergepublication](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql), specifying **\@publication**.</span></span> <span data-ttu-id="bd6ce-182">Si noti il valore di **keep_partition_changes** e **use_partition_groups** nel set di risultati.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-182">Note the value of **keep_partition_changes** and **use_partition_groups** in the result set.</span></span>  
  
2.  <span data-ttu-id="bd6ce-183">(Facoltativo) Nel database di pubblicazione del server di pubblicazione eseguire [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-183">(Optional) At the Publisher on the publication database, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span></span> <span data-ttu-id="bd6ce-184">Specificare il valore **use_partition_groups** per la \*\* \@ proprietà\*\* e `true` o `false` per \*\* \@ value\*\*.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-184">Specify a value of **use_partition_groups** for **\@property** and either `true` or `false` for **\@value**.</span></span>  
  
3.  <span data-ttu-id="bd6ce-185">(Facoltativo) Nel database di pubblicazione del server di pubblicazione eseguire [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-185">(Optional) At the Publisher on the publication database, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span></span> <span data-ttu-id="bd6ce-186">Specificare il valore **keep_partition_changes** per la \*\* \@ proprietà\*\* e `true` o `false` per \*\* \@ value\*\*.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-186">Specify a value of **keep_partition_changes** for **\@property** and either `true` or `false` for **\@value**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="bd6ce-187">Quando si abilita **keep_partition_changes**, è necessario disabilitare prima **use_partition_groups** e specificare il valore **1** per \*\* \@ force_reinit_subscription\*\*.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-187">When enabling **keep_partition_changes**, you must first disable **use_partition_groups** and specify a value of **1** for **\@force_reinit_subscription**.</span></span>  
  
4.  <span data-ttu-id="bd6ce-188">(Facoltativo) Nel database di pubblicazione del server di pubblicazione eseguire [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-188">(Optional) At the Publisher on the publication database, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="bd6ce-189">Specificare il valore **partition_options** per \*\* \@ Property\*\* e il valore appropriato per \*\* \@ value\*\*.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-189">Specify a value of **partition_options** for **\@property** and the appropriate value for **\@value**.</span></span> <span data-ttu-id="bd6ce-190">Per le definizioni di queste opzioni di filtro, vedere [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="bd6ce-190">See [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) for definitions of these filtering options.</span></span>  
  
5.  <span data-ttu-id="bd6ce-191">(Facoltativo) Avviare l'agente snapshot per rigenerare lo snapshot se necessario.</span><span class="sxs-lookup"><span data-stu-id="bd6ce-191">(Optional) Start the Snapshot Agent to regenerate the snapshot if necessary.</span></span> <span data-ttu-id="bd6ce-192">Per informazioni sulle modifiche necessarie per la generazione di un nuovo snapshot, vedere [Modificare le proprietà di pubblicazioni e articoli](change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="bd6ce-192">For information about which changes require a new snapshot to be generated, see [Change Publication and Article Properties](change-publication-and-article-properties.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bd6ce-193">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="bd6ce-193">See Also</span></span>  
 <span data-ttu-id="bd6ce-194">[Generare automaticamente un set di filtri di join tra gli articoli di merge &#40;SQL Server Management Studio&#41;](automatically-generate-join-filters-between-merge-articles.md) </span><span class="sxs-lookup"><span data-stu-id="bd6ce-194">[Automatically Generate a Set of Join Filters Between Merge Articles &#40;SQL Server Management Studio&#41;](automatically-generate-join-filters-between-merge-articles.md) </span></span>  
 <span data-ttu-id="bd6ce-195">[Definizione e modifica di un filtro di riga con parametri per un articolo di merge](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md) </span><span class="sxs-lookup"><span data-stu-id="bd6ce-195">[Define and Modify a Parameterized Row Filter for a Merge Article](define-and-modify-a-parameterized-row-filter-for-a-merge-article.md) </span></span>  
 [<span data-ttu-id="bd6ce-196">Filtri di riga con parametri</span><span class="sxs-lookup"><span data-stu-id="bd6ce-196">Parameterized Row Filters</span></span>](../merge/parameterized-filters-parameterized-row-filters.md)  
  
  
