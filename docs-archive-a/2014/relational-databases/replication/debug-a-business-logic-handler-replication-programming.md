---
title: Eseguire il debug di un gestore della logica di business | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- VB
- CSharp
helpviewer_keywords:
- merge replication business logic handlers [SQL Server replication]
- business logic handlers [SQL Server replication]
- BusinessLogicModule class
ms.assetid: edd0d17a-0e9c-4c28-8395-a7d47e8ce3d6
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 7b255407783b1e52a376e562ec910f8b123e42c1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87624646"
---
# <a name="debug-a-business-logic-handler-replication-programming"></a><span data-ttu-id="c31c3-102">Debug di un gestore della logica di business (programmazione della replica)</span><span class="sxs-lookup"><span data-stu-id="c31c3-102">Debug a Business Logic Handler (Replication Programming)</span></span>
  <span data-ttu-id="c31c3-103">Utilizzare un gestore della logica di business per richiamare logica di business personalizzata quando viene sincronizzata una sottoscrizione di tipo merge.</span><span class="sxs-lookup"><span data-stu-id="c31c3-103">Use a business logic handler to invoke custom business logic when a merge subscription is synchronized.</span></span> <span data-ttu-id="c31c3-104">Per altre informazioni, vedere [Eseguire logiche di business durante la sincronizzazione di tipo merge](merge/execute-business-logic-during-merge-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="c31c3-104">For more information, see [Execute Business Logic During Merge Synchronization](merge/execute-business-logic-during-merge-synchronization.md).</span></span>  
  
 <span data-ttu-id="c31c3-105">Il Riconciliatore replica di tipo merge (replrec.dll) chiama l'assembly del codice gestito contenente la logica di business.</span><span class="sxs-lookup"><span data-stu-id="c31c3-105">The Merge Replication Reconciler (replrec.dll) calls the managed code assembly containing the business logic.</span></span> <span data-ttu-id="c31c3-106">Nella maggior parte dei casi, replrec.dll e la logica di business personalizzata vengono eseguiti nello stesso computer dell'agente di merge, ovvero nel Sottoscrittore per una sottoscrizione pull o nel server di distribuzione per una sottoscrizione push.</span><span class="sxs-lookup"><span data-stu-id="c31c3-106">In most cases, replrec.dll and the custom business logic is executed on the computer where the Merge Agent runs (at the Subscriber for a pull subscription or at the Distributor for a push subscription).</span></span> <span data-ttu-id="c31c3-107">Nel caso della sincronizzazione tramite il Web o nel caso di un Sottoscrittore [!INCLUDE[ssEW](../../includes/ssew-md.md)] , il riconciliatore e la logica di business personalizzata vengono eseguiti nel server Web.</span><span class="sxs-lookup"><span data-stu-id="c31c3-107">In the case of Web synchronization, or in the case of a [!INCLUDE[ssEW](../../includes/ssew-md.md)] Subscriber, the reconciler and the custom business logic is executed on the Web server.</span></span>  
  
### <a name="to-debug-a-business-logic-handler-on-a-local-computer"></a><span data-ttu-id="c31c3-108">Per eseguire il debug di un gestore della logica di business in un computer locale</span><span class="sxs-lookup"><span data-stu-id="c31c3-108">To debug a business logic handler on a local computer</span></span>  
  
1.  <span data-ttu-id="c31c3-109">Configurare la pubblicazione e la distribuzione, creare una pubblicazione, quindi creare una sottoscrizione della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-109">Configure publishing and distribution, create a publication, and create a subscription to the publication.</span></span> <span data-ttu-id="c31c3-110">Per altre informazioni, vedere [Configurare la pubblicazione e la distribuzione](configure-publishing-and-distribution.md) e [Creare una pubblicazione](publish/create-a-publication.md).</span><span class="sxs-lookup"><span data-stu-id="c31c3-110">For more information, see [Configure Publishing and Distribution](configure-publishing-and-distribution.md) and [Create a Publication](publish/create-a-publication.md).</span></span>  
  
2.  <span data-ttu-id="c31c3-111">Creare e registrare un gestore della logica di business.</span><span class="sxs-lookup"><span data-stu-id="c31c3-111">Create and register a business logic handler.</span></span> <span data-ttu-id="c31c3-112">Per altre informazioni, vedere [Implementare un gestore della logica di business per un articolo di merge](implement-a-business-logic-handler-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="c31c3-112">For more information, see [Implement a Business Logic Handler for a Merge Article](implement-a-business-logic-handler-for-a-merge-article.md).</span></span>  
  
3.  <span data-ttu-id="c31c3-113">Creare un progetto RMO (Replication Management Objects) in [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Studio che avvia a livello di programmazione l'agente di merge in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="c31c3-113">Create a Replication Management Objects (RMO) project in [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Studio that programmatically starts the Merge Agent synchronously.</span></span> <span data-ttu-id="c31c3-114">Per altre informazioni, vedere [Sincronizzazione di una sottoscrizione pull](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="c31c3-114">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span>  
  
4.  <span data-ttu-id="c31c3-115">Impostare un punto di interruzione nel codice del gestore della logica di business, in particolare nel metodo sottoposto a debug o nel costruttore della classe.</span><span class="sxs-lookup"><span data-stu-id="c31c3-115">Set a breakpoint in the business logic handler code, either in the method being debugged or in the class constructor.</span></span> <span data-ttu-id="c31c3-116">Per ulteriori informazioni sui metodi che è possibile implementare in un gestore della logica di business, vedere gli argomenti relativi ai metodi degli oggetti <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> .</span><span class="sxs-lookup"><span data-stu-id="c31c3-116">For more information about the methods that can be implemented in a business logic handler, see the <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> methods topic.</span></span>  
  
5.  <span data-ttu-id="c31c3-117">Compilare il gestore della logica di business in modalità debug e distribuire il file di simboli (pdb) del debug e dell'assembly nel percorso registrato nel passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="c31c3-117">Build the business logic handler in debug mode and deploy the assembly and debugging symbol file (.pdb) in the location registered in step 1.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c31c3-118">Per semplificare il debug, creare una singola soluzione di Visual Studio .NET che contiene sia il progetto di gestore della logica di business che il progetto per la sincronizzazione della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-118">To simplify debugging, create a single Visual Studio .NET solution that contains both the business logic handler project and the project that synchronizes the subscription.</span></span> <span data-ttu-id="c31c3-119">In questo caso, impostare il progetto di sincronizzazione come progetto di avvio e configurare l'ambiente di compilazione per la distribuzione dell'assembly della logica di business nel percorso registrato nel passaggio 1 durante il debug.</span><span class="sxs-lookup"><span data-stu-id="c31c3-119">In this case, set the synchronization project as the startup project, and configure the build environment to deploy the business logic assembly to the location registered in step 1 during debugging.</span></span>  
  
6.  <span data-ttu-id="c31c3-120">Eseguire comandi di inserimento, aggiornamento o eliminazione sul database di sottoscrizione o pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-120">Execute insert, update, or delete commands against the subscription or publication database.</span></span> <span data-ttu-id="c31c3-121">Il comando e il percorso di esecuzione dipendono dal metodo da sottoporre a debug.</span><span class="sxs-lookup"><span data-stu-id="c31c3-121">The command and execution location depends on the method being debugged.</span></span>  
  
7.  <span data-ttu-id="c31c3-122">Avviare il progetto dal passaggio 3 in modalità debug per sincronizzare la sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-122">Start the project from step 3 in debug mode to synchronize the subscription.</span></span>  
  
8.  <span data-ttu-id="c31c3-123">Presupponendo che non siano stati impostati altri punti di interruzione e che vengano replicati i comandi appropriati, l'esecuzione si arresta quando raggiunge il punto di interruzione nel gestore della logica di business.</span><span class="sxs-lookup"><span data-stu-id="c31c3-123">Assuming that no other breakpoints are set and the proper commands are replicated, the execution stops when it reaches the breakpoint in the business logic handler.</span></span>  
  
### <a name="to-debug-a-business-logic-handler-on-a-web-server-using-web-synchronization-or-for-a-sql-server-compact-subscriber"></a><span data-ttu-id="c31c3-124">Per eseguire il debug di un gestore della logica di business in un server Web utilizzando la sincronizzazione tramite il Web oppure per un Sottoscrittore di SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="c31c3-124">To debug a business logic handler on a Web server using Web synchronization, or for a SQL Server Compact Subscriber</span></span>  
  
1.  <span data-ttu-id="c31c3-125">Configurare la pubblicazione e la distribuzione, creare una pubblicazione, quindi creare una sottoscrizione pull della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-125">Configure publishing and distribution, create a publication, and create a pull subscription to the publication.</span></span> <span data-ttu-id="c31c3-126">La pubblicazione deve supportare la sincronizzazione Web o i Sottoscrittori [!INCLUDE[ssEW](../../includes/ssew-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c31c3-126">The publication must support Web synchronization or [!INCLUDE[ssEW](../../includes/ssew-md.md)] Subscribers.</span></span>  
  
2.  <span data-ttu-id="c31c3-127">Creare e registrare un gestore della logica di business.</span><span class="sxs-lookup"><span data-stu-id="c31c3-127">Create and register a business logic handler.</span></span> <span data-ttu-id="c31c3-128">Per altre informazioni, vedere [Implementare un gestore della logica di business per un articolo di merge](implement-a-business-logic-handler-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="c31c3-128">For more information, see [Implement a Business Logic Handler for a Merge Article](implement-a-business-logic-handler-for-a-merge-article.md).</span></span>  
  
3.  <span data-ttu-id="c31c3-129">Impostare un punto di interruzione nel codice del gestore della logica di business, in particolare nel metodo sottoposto a debug o nel costruttore della classe.</span><span class="sxs-lookup"><span data-stu-id="c31c3-129">Set a breakpoint in the business logic handler code, either in the method being debugged or in the class constructor.</span></span> <span data-ttu-id="c31c3-130">Per ulteriori informazioni sui metodi che è possibile implementare in un gestore della logica di business, vedere gli argomenti relativi ai metodi degli oggetti <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> .</span><span class="sxs-lookup"><span data-stu-id="c31c3-130">For more information about the methods that can be implemented in a business logic handler, see the <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> methods topic.</span></span>  
  
4.  <span data-ttu-id="c31c3-131">Compilare il gestore della logica di business in modalità debug e distribuire il file di simboli (pdb) del debug e dell'assembly nel server Web nel percorso registrato nel passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="c31c3-131">Build the business logic handler in debug mode and deploy the assembly and debugging symbol file (.pdb) at the Web server in the location registered in step 1.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c31c3-132">Se è impossibile compilare il gestore della logica di business perché l'assembly è in uso, digitare il comando `iisreset` al prompt dei comandi del server Web per reimpostare il server Web.</span><span class="sxs-lookup"><span data-stu-id="c31c3-132">If the business logic handler fails to build because the assembly is in use, type the command `iisreset` on the Web server at the command prompt to reset the Web server.</span></span>  
  
5.  <span data-ttu-id="c31c3-133">Sincronizzare la sottoscrizione con la sincronizzazione tramite il Web abilitata.</span><span class="sxs-lookup"><span data-stu-id="c31c3-133">Synchronize the subscription with Web synchronization enabled.</span></span> <span data-ttu-id="c31c3-134">Durante la sincronizzazione, il server Web carica l'assembly registrato.</span><span class="sxs-lookup"><span data-stu-id="c31c3-134">During synchronization, the Web server loads the registered assembly.</span></span>  
  
6.  <span data-ttu-id="c31c3-135">Utilizzando il debugger Visual Studio .NET, collegarsi a uno dei processi seguenti nel server Web:</span><span class="sxs-lookup"><span data-stu-id="c31c3-135">Using the Visual Studio .NET debugger, attach to the one of the following processes on the Web server:</span></span>  
  
    -   <span data-ttu-id="c31c3-136">w3wp.exe - Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="c31c3-136">w3wp.exe - Windows Server 2003.</span></span>  
  
    -   <span data-ttu-id="c31c3-137">inetinfo.exe - Windows 2000 e Windows XP.</span><span class="sxs-lookup"><span data-stu-id="c31c3-137">inetinfo.exe - Windows 2000 and Windows XP.</span></span>  
  
7.  <span data-ttu-id="c31c3-138">Nella finestra **Output** controllare l'output di debug per verificare che i simboli per l'assembly registrato siano stati caricati correttamente.</span><span class="sxs-lookup"><span data-stu-id="c31c3-138">In the **Output** window, check the debug output to verify that the symbols for the registered assembly loaded properly.</span></span> <span data-ttu-id="c31c3-139">Se i simboli non sono stati caricati, assicurarsi che nel passaggio 4 sia stato copiato il file con estensione pbd corretto, quindi ripetere il passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="c31c3-139">If the symbols were not loaded, ensure that the correct .pdb file was copied in step 4, and repeat step 5.</span></span>  
  
8.  <span data-ttu-id="c31c3-140">Eseguire comandi di inserimento, aggiornamento o eliminazione sul database di sottoscrizione o pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="c31c3-140">Execute insert, update, or delete commands against the subscription or publication database.</span></span> <span data-ttu-id="c31c3-141">Il comando e il percorso di esecuzione dipendono dal metodo da sottoporre a debug.</span><span class="sxs-lookup"><span data-stu-id="c31c3-141">The command and execution location depends on the method being debugged.</span></span>  
  
9. <span data-ttu-id="c31c3-142">Utilizzando il debugger di Visual Studio, collegarsi al processo w3wp.exe.</span><span class="sxs-lookup"><span data-stu-id="c31c3-142">Using the Visual Studio debugger, attach to the w3wp.exe process.</span></span>  
  
10. <span data-ttu-id="c31c3-143">Sincronizzare nuovamente la sottoscrizione utilizzando la sincronizzazione tramite il Web.</span><span class="sxs-lookup"><span data-stu-id="c31c3-143">Synchronize the subscription again, using Web synchronization.</span></span>  
  
11. <span data-ttu-id="c31c3-144">Presupponendo che non siano stati impostati altri punti di interruzione e che vengano replicati i comandi appropriati, l'esecuzione si arresta quando raggiunge il punto di interruzione nel gestore della logica di business.</span><span class="sxs-lookup"><span data-stu-id="c31c3-144">Assuming that no other breakpoints are set and the proper commands are replicated, the execution stops when it reaches the breakpoint in the business logic handler.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c31c3-145">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="c31c3-145">See Also</span></span>  
 [<span data-ttu-id="c31c3-146">Implementare un gestore della logica di business per un articolo di merge</span><span class="sxs-lookup"><span data-stu-id="c31c3-146">Implement a Business Logic Handler for a Merge Article</span></span>](implement-a-business-logic-handler-for-a-merge-article.md)  
  
  
