---
title: Migliorare le prestazioni generali della replica | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], design and performance
- designing databases [SQL Server], replication performance
- Snapshot Agent, performance
- snapshots [SQL Server replication], performance considerations
- merge replication performance [SQL Server replication]
- snapshot replication [SQL Server], performance
- subscriptions [SQL Server replication], performance considerations
- agents [SQL Server replication], performance
- performance [SQL Server replication], general considerations
- transactional replication, performance
ms.assetid: 895b1ad7-ffb9-4a5c-bda6-e1dfbd56d9bf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0a85519a947e7d5d03f324b71984d2ffb40bcefe
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87725559"
---
# <a name="enhance-general-replication-performance"></a><span data-ttu-id="4b38a-102">Miglioramento delle prestazioni generali della replica</span><span class="sxs-lookup"><span data-stu-id="4b38a-102">Enhance General Replication Performance</span></span>
  <span data-ttu-id="4b38a-103">È possibile migliorare le prestazioni generali di tutti i tipi di replica nell'applicazione e nella rete attenendosi alle istruzioni riportate in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="4b38a-103">You can enhance the general performance for all types of replication in your application and on your network by using the guidelines described in this topic.</span></span>  
  
## <a name="server-and-network"></a><span data-ttu-id="4b38a-104">Server e rete</span><span class="sxs-lookup"><span data-stu-id="4b38a-104">Server and Network</span></span>  
  
-   <span data-ttu-id="4b38a-105">Impostare la quantità minima e massima di memoria allocata a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4b38a-105">Set the minimum and maximum amount of memory allocated to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span></span>  
  
     <span data-ttu-id="4b38a-106">Per impostazione predefinita, nel [!INCLUDE[ssDE](../../../includes/ssde-md.md)] i requisiti di memoria possono variare dinamicamente in base alle risorse di sistema disponibili.</span><span class="sxs-lookup"><span data-stu-id="4b38a-106">By default, the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] changes its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="4b38a-107">Per evitare che durante le attività di replica la memoria risulti insufficiente, impostare la quantità minima di memoria disponibile tramite l'opzione **min server memory** .</span><span class="sxs-lookup"><span data-stu-id="4b38a-107">To avoid low memory availability during replication activities, use the **min server memory** option to set the minimum available memory.</span></span> <span data-ttu-id="4b38a-108">Per evitare che il sistema operativo richieda memoria del disco, è inoltre possibile impostare una quantità massima di memoria mediante l'opzione **max server memory** .</span><span class="sxs-lookup"><span data-stu-id="4b38a-108">To avoid having the operating system page to disc for memory, you can also set a maximum amount of memory with the **max server memory** option.</span></span> <span data-ttu-id="4b38a-109">Per altre informazioni, vedere [Opzioni di configurazione del server Server Memory](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-109">For more information, see [Server Memory Server Configuration Options](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span></span>  
  
-   <span data-ttu-id="4b38a-110">Verificare la corretta allocazione dei file di dati e dei file di log del database.</span><span class="sxs-lookup"><span data-stu-id="4b38a-110">Ensure proper allocation of database data files and log files.</span></span> <span data-ttu-id="4b38a-111">Utilizzare un'unità disco distinta per il log delle transazioni di tutti i database interessati dalla replica.</span><span class="sxs-lookup"><span data-stu-id="4b38a-111">Use a separate disk drive for the transaction log for all databases involved in replication.</span></span>  
  
     <span data-ttu-id="4b38a-112">Per ridurre i tempi di scrittura delle transazioni, archiviare i file di log in un'unità disco diversa da quella in cui è archiviato il database.</span><span class="sxs-lookup"><span data-stu-id="4b38a-112">You can decrease the time it takes to write transactions by storing the log files on a disk drive different than the one used to store the database.</span></span> <span data-ttu-id="4b38a-113">È possibile eseguire il mirroring dell'unità utilizzando la modalità 1 della tecnologia RAID (Redundant Array of Inexpensive Disks), se è necessario implementare la tolleranza di errore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-113">You can mirror that drive, using a Redundant Array of Inexpensive Disks (RAID)-1, if you require fault tolerance.</span></span> <span data-ttu-id="4b38a-114">Per gli altri file di database utilizzare RAID 0 o 0+1, a seconda delle esigenze specifiche di tolleranza di errore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-114">Use RAID 0 or 0+1 (depending on your need for fault tolerance) for other database files.</span></span> <span data-ttu-id="4b38a-115">Questo metodo è ottimale indipendentemente dal fatto che venga utilizzata o meno la replica.</span><span class="sxs-lookup"><span data-stu-id="4b38a-115">This is a good practice regardless of whether or not replication is being used.</span></span>  
  
-   <span data-ttu-id="4b38a-116">Valutare l'opportunità di aggiungere memoria ai server utilizzati per la replica, in particolare al server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-116">Consider adding memory to servers used in replication, particularly the Distributor.</span></span>  
  
-   <span data-ttu-id="4b38a-117">Utilizzare computer multiprocessore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-117">Use multiprocessor computers.</span></span>  
  
     <span data-ttu-id="4b38a-118">Gli agenti di replica sono in grado di utilizzare processori aggiuntivi del server.</span><span class="sxs-lookup"><span data-stu-id="4b38a-118">Replication agents can take advantage of additional processors on the server.</span></span> <span data-ttu-id="4b38a-119">In sistemi con utilizzo elevato della CPU è consigliabile installare una CPU più veloce o più CPU.</span><span class="sxs-lookup"><span data-stu-id="4b38a-119">If you are running at high CPU usage, consider installing a faster CPU or multiple CPUs.</span></span>  
  
-   <span data-ttu-id="4b38a-120">Utilizzare una rete veloce.</span><span class="sxs-lookup"><span data-stu-id="4b38a-120">Use a fast network.</span></span>  
  
     <span data-ttu-id="4b38a-121">La rete può rappresentare un significativo collo di bottiglia per le prestazioni, in particolare per la replica transazionale.</span><span class="sxs-lookup"><span data-stu-id="4b38a-121">The network can be a significant performance bottleneck, particularly for transactional replication.</span></span> <span data-ttu-id="4b38a-122">È possibile migliorare notevolmente la propagazione delle modifiche nei Sottoscrittori utilizzando una rete veloce pari a 100 megabit al secondo (Mbps) o superiore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-122">The propagation of changes to Subscribers can be significantly enhanced by using a fast network of 100 megabits per second (Mbps) or faster.</span></span> <span data-ttu-id="4b38a-123">Se la rete è lenta, specificare le impostazioni di rete e i parametri degli agenti appropriati.</span><span class="sxs-lookup"><span data-stu-id="4b38a-123">If the network is slow, specify appropriate network settings and agent parameters.</span></span>  
  
## <a name="database-design"></a><span data-ttu-id="4b38a-124">Progettazione di database</span><span class="sxs-lookup"><span data-stu-id="4b38a-124">Database Design</span></span>  
  
-   <span data-ttu-id="4b38a-125">Seguire le procedure consigliate per la progettazione del database.</span><span class="sxs-lookup"><span data-stu-id="4b38a-125">Follow best practices for database design.</span></span>  
  
     <span data-ttu-id="4b38a-126">Un database replicato generalmente usufruisce delle stesse ottimizzazioni delle prestazioni di un database non replicato.</span><span class="sxs-lookup"><span data-stu-id="4b38a-126">A replicated database generally benefits from the same performance optimizations as a non-replicated database.</span></span> <span data-ttu-id="4b38a-127">È tuttavia consigliabile utilizzare gli indici con attenzione nel Sottoscrittore, tenendo presente che è necessario indicizzare la colonna chiave primaria nel Sottoscrittore, ma che ulteriori indici possono influire sulle prestazioni relative alle operazioni di inserimento, aggiornamento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-127">However, indexes should be used with caution at the Subscriber: the primary key column at the Subscriber should be indexed, but additional indexes can affect insert, update, and delete performance.</span></span>  
  
-   <span data-ttu-id="4b38a-128">Valutare l'opportunità di impostare l'opzione di database READ_COMMITTED_SNAPSHOT.</span><span class="sxs-lookup"><span data-stu-id="4b38a-128">Consider setting the READ_COMMITTED_SNAPSHOT database option.</span></span>  
  
     <span data-ttu-id="4b38a-129">Per ridurre la contesa tra l'attività dell'utente e quella dell'agente di replica, impostare questa opzione per i database di pubblicazione e sottoscrizione:</span><span class="sxs-lookup"><span data-stu-id="4b38a-129">To help reduce contention between user activity and replication agent activity, set this option for the publication and subscription databases:</span></span>  
  
    ```  
    ALTER DATABASE AdventureWorks  
    SET READ_COMMITTED_SNAPSHOT ON  
    ```  
  
     <span data-ttu-id="4b38a-130">Per altre informazioni, vedere [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4b38a-130">For more information, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="4b38a-131">Prestare attenzione alla logica dell'applicazione nei trigger.</span><span class="sxs-lookup"><span data-stu-id="4b38a-131">Be cautious with application logic in triggers.</span></span>  
  
     <span data-ttu-id="4b38a-132">La logica di business nei trigger definiti dall'utente nel Sottoscrittore può rallentare la replica delle modifiche in quest'ultimo:</span><span class="sxs-lookup"><span data-stu-id="4b38a-132">Business logic in user-defined triggers at the Subscriber can slow down the replication of changes to the Subscriber:</span></span>  
  
    -   <span data-ttu-id="4b38a-133">Per la replica transazionale, può essere più conveniente includere tale logica in stored procedure personalizzate che consentono di applicare i comandi replicati.</span><span class="sxs-lookup"><span data-stu-id="4b38a-133">For transactional replication, it can be more efficient to include this logic in custom stored procedures used to apply the replicated commands.</span></span> <span data-ttu-id="4b38a-134">Per altre informazioni, vedere [Specificare la modalità di propagazione delle modifiche per gli articoli transazionali](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-134">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
    -   <span data-ttu-id="4b38a-135">Per la replica di tipo merge, può essere più conveniente utilizzare i gestori delle logiche di business.</span><span class="sxs-lookup"><span data-stu-id="4b38a-135">For merge replication, it can be more efficient to use business logic handlers.</span></span> <span data-ttu-id="4b38a-136">Per altre informazioni, vedere [Eseguire logiche di business durante la sincronizzazione di tipo merge](../merge/execute-business-logic-during-merge-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-136">For more information, see [Execute Business Logic During Merge Synchronization](../merge/execute-business-logic-during-merge-synchronization.md).</span></span>  
  
     <span data-ttu-id="4b38a-137">Se si utilizzano trigger per mantenere l'integrità referenziale in tabelle pubblicate per la replica di tipo merge, specificare l'ordine di elaborazione delle tabelle in modo da ridurre il numero di tentativi necessari per l'agente di merge.</span><span class="sxs-lookup"><span data-stu-id="4b38a-137">If you use triggers to maintain referential integrity in tables published for merge replication, specify the processing order of tables to reduce the number of retries required for the Merge Agent.</span></span> <span data-ttu-id="4b38a-138">Per altre informazioni, vedere [Specificare le proprietà della replica di tipo merge](../publish/specify-merge-replication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-138">For more information, see [Specify Merge Replication properties](../publish/specify-merge-replication-properties.md).</span></span>  
  
-   <span data-ttu-id="4b38a-139">Limitare l'utilizzo dei tipi di dati LOB (Large Object).</span><span class="sxs-lookup"><span data-stu-id="4b38a-139">Limit the use of Large Object (LOB) data types.</span></span>  
  
     <span data-ttu-id="4b38a-140">Tali dati richiedono uno spazio di archiviazione e un'elaborazione maggiori rispetto ad altri tipi di dati di colonna.</span><span class="sxs-lookup"><span data-stu-id="4b38a-140">LOBs require more storage space and processing than other column data types.</span></span> <span data-ttu-id="4b38a-141">Non includere queste colonne negli articoli a meno che non sia necessario per l'applicazione in uso.</span><span class="sxs-lookup"><span data-stu-id="4b38a-141">Do not include these columns in articles unless necessary for your application.</span></span> <span data-ttu-id="4b38a-142">I tipi di dati `text`, `ntext` e `image` sono deprecati.</span><span class="sxs-lookup"><span data-stu-id="4b38a-142">The data types `text`, `ntext`, and `image` are deprecated.</span></span> <span data-ttu-id="4b38a-143">Se è necessario includere dati LOB, è consigliabile utilizzare rispettivamente i tipi di dati `varchar(max)`, `nvarchar(max)` e `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="4b38a-143">If you do include LOBs, we recommend that you use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)`, respectively.</span></span>  
  
     <span data-ttu-id="4b38a-144">Per la replica transazionale, provare a utilizzare il profilo dell'agente di distribuzione denominato **Profilo di distribuzione per flussi OLEDB**.</span><span class="sxs-lookup"><span data-stu-id="4b38a-144">For transactional replication, consider using the Distribution Agent profile called **Distribution Profile for OLEDB streaming**.</span></span> <span data-ttu-id="4b38a-145">Per altre informazioni, vedere [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-145">For more information, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="publication-design"></a><span data-ttu-id="4b38a-146">Progettazione della pubblicazione</span><span class="sxs-lookup"><span data-stu-id="4b38a-146">Publication Design</span></span>  
  
-   <span data-ttu-id="4b38a-147">Pubblicare solo i dati necessari.</span><span class="sxs-lookup"><span data-stu-id="4b38a-147">Publish only the data required.</span></span>  
  
     <span data-ttu-id="4b38a-148">La semplicità di impostazione della replica favorisce la tendenza a pubblicare una quantità di dati maggiore di quella effettivamente necessaria</span><span class="sxs-lookup"><span data-stu-id="4b38a-148">Because replication is easy to set up, there is a tendency to publish more data than is actually required.</span></span> <span data-ttu-id="4b38a-149">con il conseguente utilizzo di risorse aggiuntive nei database di distribuzione e nei file di snapshot e la diminuzione della velocità effettiva dei dati richiesti.</span><span class="sxs-lookup"><span data-stu-id="4b38a-149">This can consume additional resources within the distribution databases and snapshot files, and can lower the throughput for required data.</span></span> <span data-ttu-id="4b38a-150">Evitare la pubblicazione di tabelle non necessarie e aggiornare le pubblicazioni con una frequenza minore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-150">Avoid publishing unnecessary tables and consider updating publications less frequently.</span></span>  
  
-   <span data-ttu-id="4b38a-151">Ridurre i conflitti mediante la progettazione della pubblicazione e il comportamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-151">Minimize conflicts through publication design and application behavior.</span></span>  
  
     <span data-ttu-id="4b38a-152">La modifica dei dati nei Sottoscrittori è consentita nella replica di tipo merge, nella replica transazionale con sottoscrizioni aggiornabili e nella replica transazionale peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="4b38a-152">The following types of replication allow data to be changed at Subscribers: merge replication, transactional replication with updatable subscriptions, and peer-to-peer transactional replication.</span></span> <span data-ttu-id="4b38a-153">La replica di tipo merge e la replica transazionale con sottoscrizioni aggiornabili supportano conflitti di dati se una determinata riga viene aggiornata in più nodi tra le sincronizzazioni.</span><span class="sxs-lookup"><span data-stu-id="4b38a-153">Merge replication and transactional replication with updatable subscriptions support data conflicts if a given row is updated at more than one node between synchronizations.</span></span> <span data-ttu-id="4b38a-154">La replica peer-to-peer non supporta conflitti di dati e le modifiche dei dati devono essere partizionate.</span><span class="sxs-lookup"><span data-stu-id="4b38a-154">Peer-to-peer replication does not support data conflicts; data changes must be partitioned.</span></span> <span data-ttu-id="4b38a-155">Indipendentemente dal tipo di replica utilizzato, è consigliabile partizionare le modifiche quando possibile, in modo da ridurre l'elaborazione richiesta per il rilevamento e la risoluzione dei conflitti.</span><span class="sxs-lookup"><span data-stu-id="4b38a-155">Regardless of the type of replication used, we recommend that you partition changes whenever possible, because this reduces the processing required for conflict detection and resolution.</span></span>  
  
     <span data-ttu-id="4b38a-156">Le modifiche possono essere partizionate pubblicando subset di dati in ogni Sottoscrittore oppure facendo in modo che un'applicazione indirizzi le modifiche relative a una specifica riga a uno determinato nodo:</span><span class="sxs-lookup"><span data-stu-id="4b38a-156">Changes can be partitioned by publishing subsets of data to each Subscriber or by having an application direct changes for a given row to a given node:</span></span>  
  
    -   <span data-ttu-id="4b38a-157">La replica di tipo merge supporta la pubblicazione dei subset di dati utilizzando filtri con parametri con una singola pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-157">Merge replication supports publishing subsets of data using parameterized filters with a single publication.</span></span> <span data-ttu-id="4b38a-158">Per altre informazioni sui filtri di riga con parametri, vedere [Filtri di riga con parametri](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-158">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
    -   <span data-ttu-id="4b38a-159">La replica transazionale supporta la pubblicazione dei subset di dati utilizzando filtri statici con più pubblicazioni.</span><span class="sxs-lookup"><span data-stu-id="4b38a-159">Transactional replication supports publishing subsets of data using static filters with multiple publications.</span></span> <span data-ttu-id="4b38a-160">Per altre informazioni, vedere [Filtrare i dati pubblicati](../publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-160">For more information, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
-   <span data-ttu-id="4b38a-161">Utilizzare i filtri di riga in modo razionale.</span><span class="sxs-lookup"><span data-stu-id="4b38a-161">Use row filters judiciously.</span></span>  
  
     <span data-ttu-id="4b38a-162">Quando una pubblicazione transazionale include uno o più articoli che utilizzano filtri di riga, l'agente di lettura log deve applicare il filtro a ogni riga interessata da un aggiornamento relativo alla tabella durante l'analisi del log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="4b38a-162">When a transactional publication includes one or more articles that use row filters, the Log Reader Agent must apply the filter to each row affected by an update to the table as it scans the transaction log.</span></span> <span data-ttu-id="4b38a-163">Questo, pertanto, influisce sulla velocità effettiva dell'agente di lettura log.</span><span class="sxs-lookup"><span data-stu-id="4b38a-163">The throughput of the Log Reader Agent is therefore affected.</span></span>  
  
     <span data-ttu-id="4b38a-164">Analogamente, la replica di tipo merge deve valutare le righe modificate o eliminate per stabilire quali Sottoscrittori devono riceverle.</span><span class="sxs-lookup"><span data-stu-id="4b38a-164">Similarly, merge replication must evaluate changed or deleted rows to determine which Subscribers should receive those rows.</span></span> <span data-ttu-id="4b38a-165">Se si utilizzano i filtri di riga per ridurre i dati richiesti da un Sottoscrittore, questo tipo di elaborazione risulta più complesso e lento rispetto alla pubblicazione di tutte le righe di una tabella.</span><span class="sxs-lookup"><span data-stu-id="4b38a-165">When row filters are employed to reduce the data required at a Subscriber, this processing is more complex and can be slower than when you publish all rows in a table.</span></span> <span data-ttu-id="4b38a-166">Tenere conto che i minori requisiti di archiviazione in ogni Sottoscrittore sono controbilanciati dalla necessità di ottimizzazione della velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="4b38a-166">Consider carefully the tradeoff between reduced storage requirements at each Subscriber and the need for achieving maximum throughput.</span></span> <span data-ttu-id="4b38a-167">Per altre informazioni sui filtri, vedere [Filtrare i dati pubblicati](../publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-167">For more information on filtering, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
## <a name="subscription-considerations"></a><span data-ttu-id="4b38a-168">Considerazioni sulle sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="4b38a-168">Subscription Considerations</span></span>  
  
-   <span data-ttu-id="4b38a-169">Utilizzare sottoscrizioni pull se il numero di Sottoscrittori è elevato.</span><span class="sxs-lookup"><span data-stu-id="4b38a-169">Use pull subscriptions when there are a large number of Subscribers.</span></span>  
  
     <span data-ttu-id="4b38a-170">L'agente di distribuzione e l'agente di merge vengono eseguiti nel server di distribuzione per le sottoscrizioni push e nei Sottoscrittori per le sottoscrizioni pull.</span><span class="sxs-lookup"><span data-stu-id="4b38a-170">The Distribution Agent and Merge Agent run at the Distributor for push subscriptions, and at Subscribers for pull subscriptions.</span></span> <span data-ttu-id="4b38a-171">L'utilizzo delle sottoscrizioni pull può migliorare le prestazioni spostando l'elaborazione dell'agente dal server di distribuzione ai Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="4b38a-171">Using pull subscriptions can improve performance by moving agent processing from the Distributor to Subscribers.</span></span> <span data-ttu-id="4b38a-172">Per altre informazioni, vedere [Sottoscrivere le pubblicazioni](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-172">For more information, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="4b38a-173">Provare a reinizializzare la sottoscrizione in caso di forte ritardo dei Sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="4b38a-173">Consider reinitialization of the subscription if Subscribers are too far behind.</span></span>  
  
     <span data-ttu-id="4b38a-174">Se è necessario inviare ai Sottoscrittori quantità di modifiche elevate, può essere più conveniente reinizializzarle tutte con un nuovo snapshot anziché utilizzare la replica per spostare le singole modifiche.</span><span class="sxs-lookup"><span data-stu-id="4b38a-174">When large amounts of changes need to be sent to Subscribers, reinitializing them with a new snapshot might be faster than using replication to move the individual changes.</span></span> <span data-ttu-id="4b38a-175">Per altre informazioni, vedere [Reinizializzare le sottoscrizioni](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-175">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
     <span data-ttu-id="4b38a-176">Per la replica transazionale, nella scheda **Comandi non distribuiti** di Monitoraggio replica vengono visualizzate informazioni relative al numero di transazioni presenti nel database di distribuzione e non ancora distribuite in un Sottoscrittore e al tempo stimato per la relativa distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-176">For transactional replication, Replication Monitor displays on the **Undistributed Commands** tab information about: the number of transactions in the distribution database that have not yet been distributed to a Subscriber; and the estimated time for distributing these transactions.</span></span> <span data-ttu-id="4b38a-177">Per altre informazioni, vedere [Visualizzare le informazioni ed eseguire attività usando Monitoraggio replica](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-177">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="snapshot-considerations"></a><span data-ttu-id="4b38a-178">Considerazioni sugli snapshot</span><span class="sxs-lookup"><span data-stu-id="4b38a-178">Snapshot Considerations</span></span>  
  
-   <span data-ttu-id="4b38a-179">Eseguire l'agente snapshot solo quando è necessario e non nei periodi di massima attività.</span><span class="sxs-lookup"><span data-stu-id="4b38a-179">Run the Snapshot Agent only when necessary and at off-peak times.</span></span>  
  
     <span data-ttu-id="4b38a-180">L'agente snapshot esegue la copia bulk dei dati provenienti dalla tabella pubblicata del server di pubblicazione in un file incluso nella cartella snapshot del server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-180">The Snapshot Agent bulk copies data from the published table on the Publisher to a file in the snapshot folder on the Distributor.</span></span> <span data-ttu-id="4b38a-181">Il processo di generazione di uno snapshot può richiedere un utilizzo elevato delle risorse e pertanto se ne sconsiglia la pianificazione nei periodi di massima attività.</span><span class="sxs-lookup"><span data-stu-id="4b38a-181">Generating a snapshot can be a resource intensive process and is best scheduled during off-peak times.</span></span>  
  
-   <span data-ttu-id="4b38a-182">Utilizzare uno snapshot in modalità nativa a meno che non sia richiesto uno snapshot in modalità carattere.</span><span class="sxs-lookup"><span data-stu-id="4b38a-182">Use a native mode snapshot unless a character mode snapshot is required.</span></span>  
  
     <span data-ttu-id="4b38a-183">Utilizzare lo snapshot predefinito in modalità nativa per tutti i Sottoscrittori tranne quelli non[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e quelli che eseguono [!INCLUDE[ssEW](../../../includes/ssew-md.md)], i quali richiedono uno snapshot in modalità carattere.</span><span class="sxs-lookup"><span data-stu-id="4b38a-183">Use the default native mode snapshot for all Subscribers except non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Subscribers and Subscribers running [!INCLUDE[ssEW](../../../includes/ssew-md.md)], which require a character mode snapshot.</span></span>  
  
-   <span data-ttu-id="4b38a-184">Utilizzare un'unica cartella snapshot per pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4b38a-184">Use a single snapshot folder for a publication.</span></span>  
  
     <span data-ttu-id="4b38a-185">Quando si specificano le proprietà di una pubblicazione correlate alla posizione dello snapshot, è possibile scegliere di generare file di snapshot nella cartella snapshot predefinita e/o alternativa.</span><span class="sxs-lookup"><span data-stu-id="4b38a-185">When specifying the publication properties related to snapshot location, you can choose to generate snapshot files to the default snapshot folder, to an alternate snapshot folder, or to both.</span></span> <span data-ttu-id="4b38a-186">Per generare file di snapshot in entrambe le posizioni è necessario spazio di archiviazione aggiuntivo e un'ulteriore elaborazione durante l'esecuzione dell'agente snapshot.</span><span class="sxs-lookup"><span data-stu-id="4b38a-186">Generating snapshot files in both locations requires additional disk space and more processing when the Snapshot Agent runs.</span></span>  
  
-   <span data-ttu-id="4b38a-187">Installare la cartella snapshot in un'unità locale sul server di distribuzione non utilizzata per l'archiviazione di file di database o di log.</span><span class="sxs-lookup"><span data-stu-id="4b38a-187">Place the snapshot folder on a drive local to the Distributor that is not used to store database or log files.</span></span>  
  
     <span data-ttu-id="4b38a-188">L'agente snapshot esegue una scrittura sequenziale dei dati nella cartella snapshot.</span><span class="sxs-lookup"><span data-stu-id="4b38a-188">The Snapshot Agent performs a sequential write of data to the snapshot folder.</span></span> <span data-ttu-id="4b38a-189">Installando la cartella snapshot in un'unità separata da quella in cui risiedono i file di database o di log è possibile ridurre la contesa tra i dischi e completare più rapidamente il processo di snapshot.</span><span class="sxs-lookup"><span data-stu-id="4b38a-189">Placing the snapshot folder on a separate drive from any database or log files reduces contention among the disks and helps the snapshot process complete faster.</span></span>  
  
-   <span data-ttu-id="4b38a-190">Quando si crea il database di sottoscrizione nel Sottoscrittore, provare a specificare un modello di recupero con registrazione minima o con registrazione minima delle operazioni bulk.</span><span class="sxs-lookup"><span data-stu-id="4b38a-190">When you create the subscription database at the Subscriber, consider specifying a recovery model of simple or bulk-logged.</span></span> <span data-ttu-id="4b38a-191">Questo consente la registrazione minima degli inserimenti bulk eseguiti durante l'applicazione dello snapshot nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="4b38a-191">This allows minimal logging of the bulk inserts performed during the application of the snapshot at the Subscriber.</span></span> <span data-ttu-id="4b38a-192">Se necessario, dopo aver applicato lo snapshot al database di sottoscrizione, è possibile passare a un modello di recupero differente (con i database replicati è consentito l'utilizzo di uno qualsiasi dei modelli di recupero).</span><span class="sxs-lookup"><span data-stu-id="4b38a-192">After the snapshot has been applied to the subscription database, you can change to a different recovery model if necessary (replicated databases can use any of the recovery models).</span></span> <span data-ttu-id="4b38a-193">Per informazioni sulla selezione di un modello di recupero, vedere [Panoramica del ripristino e del recupero &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-193">For more information about selecting a recovery model, see [Restore and Recovery Overview &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span></span>  
  
-   <span data-ttu-id="4b38a-194">Provare a utilizzare la cartella snapshot alternativa e gli snapshot compressi sui supporti rimovibili per le reti a larghezza di banda ridotta.</span><span class="sxs-lookup"><span data-stu-id="4b38a-194">Consider using the alternate snapshot folder and compressed snapshots on removable media for low-bandwidth networks.</span></span>  
  
     <span data-ttu-id="4b38a-195">La compressione dei file di snapshot nella cartella snapshot alternativa può ridurre i requisiti di archiviazione su disco degli snapshot e semplificare il trasferimento dei file di snapshot sui supporti rimovibili.</span><span class="sxs-lookup"><span data-stu-id="4b38a-195">Compressing snapshot files in the alternate snapshot folder can reduce snapshot disk storage requirements and make it easier to transfer snapshot files on removable media.</span></span>  
  
     <span data-ttu-id="4b38a-196">Gli snapshot compressi, in alcuni casi, consentono di migliorare le prestazioni relative al trasferimento di file di snapshot in rete.</span><span class="sxs-lookup"><span data-stu-id="4b38a-196">Compressed snapshots can, in some cases, improve the performance of transferring snapshot files across the network.</span></span> <span data-ttu-id="4b38a-197">La compressione dello snapshot richiede, tuttavia, un'ulteriore elaborazione da parte dell'agente snapshot per la generazione dei file di snapshot e da parte dell'agente di distribuzione o dell'agente di merge per l'applicazione di tali file.</span><span class="sxs-lookup"><span data-stu-id="4b38a-197">However, compressing the snapshot requires additional processing by the Snapshot Agent when generating the snapshot files, and by the Distribution Agent or Merge Agent when applying the snapshot files.</span></span> <span data-ttu-id="4b38a-198">Questo può rallentare il processo di generazione degli snapshot e, in alcuni casi, aumentare il tempo necessario per applicarli.</span><span class="sxs-lookup"><span data-stu-id="4b38a-198">This may slow down snapshot generation and increase the time it takes to apply a snapshot in some cases.</span></span> <span data-ttu-id="4b38a-199">Inoltre, poiché non è possibile riprendere gli snapshot compressi in caso di errore della rete, tali snapshot non sono adatti per le reti non affidabili.</span><span class="sxs-lookup"><span data-stu-id="4b38a-199">Additionally, compressed snapshots cannot be resumed if a network failure occurs; therefore they are not suitable for unreliable networks.</span></span> <span data-ttu-id="4b38a-200">Quando si utilizzano snapshot compressi in rete, è necessario considerare tutti i pro e contro.</span><span class="sxs-lookup"><span data-stu-id="4b38a-200">Consider these tradeoffs carefully when using compressed snapshots across a network.</span></span> <span data-ttu-id="4b38a-201">Per ulteriori informazioni, vedere [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) e [Compressed Snapshots](../compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-201">For more information, see [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) and [Compressed Snapshots](../compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="4b38a-202">Provare a inizializzare una sottoscrizione manualmente.</span><span class="sxs-lookup"><span data-stu-id="4b38a-202">Consider initializing a subscription manually.</span></span>  
  
     <span data-ttu-id="4b38a-203">In alcuni scenari, ad esempio quelli che comportano l'utilizzo di set di dati iniziali di grandi dimensioni, è preferibile inizializzare una sottoscrizione utilizzando un metodo diverso dallo snapshot.</span><span class="sxs-lookup"><span data-stu-id="4b38a-203">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using a method other than a snapshot.</span></span> <span data-ttu-id="4b38a-204">Per altre informazioni, vedere [Inizializzazione di una sottoscrizione transazionale senza uno snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-204">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
## <a name="agent-parameters"></a><span data-ttu-id="4b38a-205">Parametri degli agenti</span><span class="sxs-lookup"><span data-stu-id="4b38a-205">Agent Parameters</span></span>  
  
-   <span data-ttu-id="4b38a-206">Ridurre i livelli di dettaglio degli agenti di replica eccetto durante le operazioni iniziali di verifica, monitoraggio o debug.</span><span class="sxs-lookup"><span data-stu-id="4b38a-206">Reduce the verbose levels of replication agents except during initial testing, monitoring, or debugging.</span></span>  
  
     <span data-ttu-id="4b38a-207">Ridurre i parametri **-HistoryVerboseLevel** e **-OutputVerboseLevel** degli agenti di distribuzione o di merge.</span><span class="sxs-lookup"><span data-stu-id="4b38a-207">Reduce the **-HistoryVerboseLevel** parameter and the **-OutputVerboseLevel** parameter of the Distribution Agents or Merge Agents.</span></span> <span data-ttu-id="4b38a-208">per ridurre il numero di nuove righe inserite ai fini del rilevamento della cronologia e dell'output degli agenti.</span><span class="sxs-lookup"><span data-stu-id="4b38a-208">This reduces the number of new rows inserted to track agent history and output.</span></span> <span data-ttu-id="4b38a-209">I messaggi precedenti sulla cronologia con lo stesso stato vengono invece aggiornati in base alle nuove informazioni relative alla cronologia.</span><span class="sxs-lookup"><span data-stu-id="4b38a-209">Instead, previous history messages with the same status are updated to the new history information.</span></span> <span data-ttu-id="4b38a-210">Aumentare i livelli di dettaglio ai fini della verifica, del monitoraggio e del debug in modo da ottenere il maggior numero possibile di informazioni sull'attività degli agenti.</span><span class="sxs-lookup"><span data-stu-id="4b38a-210">Increase the verbose levels for testing, monitoring, and debugging so that you have as much information about agent activity as possible.</span></span>  
  
-   <span data-ttu-id="4b38a-211">Usare il parametro **-MaxBCPThreads** dell'agente snapshot, dell'agente di merge e dell'agente di distribuzione in modo che il numero di thread specificati non superi il numero di processori installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="4b38a-211">Use the **-MaxBCPThreads** parameter of the Snapshot Agent, Merge Agent, and Distribution Agent (the number of threads specified should not exceed the number of processors on the computer).</span></span> <span data-ttu-id="4b38a-212">Questo parametro specifica il numero di operazioni di copia bulk che è possibile eseguire in parallelo quando lo snapshot viene creato e applicato.</span><span class="sxs-lookup"><span data-stu-id="4b38a-212">This parameter specifies the number of bulk copy operations that can be performed in parallel when the snapshot is created and applied.</span></span>  
  
-   <span data-ttu-id="4b38a-213">Usare il parametro **-UseInprocLoader** dell'agente di distribuzione e dell'agente di merge, tenendo presente che non è possibile usarlo se le tabelle pubblicate includono colonne XML.</span><span class="sxs-lookup"><span data-stu-id="4b38a-213">Use the **-UseInprocLoader** parameter of the Distribution Agent and the Merge Agent (this parameter cannot be used if published tables include XML columns).</span></span> <span data-ttu-id="4b38a-214">Grazie alla specifica di tale parametro, l'agente utilizzerà il comando BULK INSERT al momento dell'applicazione dello snapshot.</span><span class="sxs-lookup"><span data-stu-id="4b38a-214">This parameter causes the agent to use the BULK INSERT command when the snapshot is applied.</span></span>  
  
 <span data-ttu-id="4b38a-215">I parametri degli agenti possono essere specificati nei profili agente e dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="4b38a-215">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="4b38a-216">Per altre informazioni, vedere:</span><span class="sxs-lookup"><span data-stu-id="4b38a-216">For more information, see:</span></span>  
  
-   [<span data-ttu-id="4b38a-217">Usare i profili agenti di replica</span><span class="sxs-lookup"><span data-stu-id="4b38a-217">Work with Replication Agent Profiles</span></span>](../agents/work-with-replication-agent-profiles.md)  
  
-   [<span data-ttu-id="4b38a-218">Visualizzare e modificare i parametri del prompt dei comandi dell'agente di replica &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="4b38a-218">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   <span data-ttu-id="4b38a-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="4b38a-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
  
