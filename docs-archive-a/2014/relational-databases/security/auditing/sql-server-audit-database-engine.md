---
title: Controllo di SQL Server (motore di database) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
f1_keywords:
- audit
helpviewer_keywords:
- SQL Server Audit
- audits [SQL Server], SQL Server Audit
ms.assetid: 0c1fca2e-f22b-4fe8-806f-c87806664f00
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: 2f4f291e5dc4aaa8a240757713cc65bd2a6a8230
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87625278"
---
# <a name="sql-server-audit-database-engine"></a><span data-ttu-id="70438-102">SQL Server Audit (Database Engine)</span><span class="sxs-lookup"><span data-stu-id="70438-102">SQL Server Audit (Database Engine)</span></span>
  <span data-ttu-id="70438-103">Il*controllo* di un'istanza del [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] o di un database individuale comporta il rilevamento e la registrazione di eventi che si verificano nel [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="70438-103">*Auditing* an instance of the [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] or an individual database involves tracking and logging events that occur on the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="70438-104">Audit consente di creare controlli del server che possono contenere specifiche del controllo del server per gli eventi a livello di server e specifiche del controllo del database per gli eventi a livello di database.</span><span class="sxs-lookup"><span data-stu-id="70438-104">audit lets you create server audits, which can contain server audit specifications for server level events, and database audit specifications for database level events.</span></span> <span data-ttu-id="70438-105">Gli eventi controllati possono essere scritti nei log eventi o in file di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-105">Audited events can be written to the event logs or to audit files.</span></span>  
  
 <span data-ttu-id="70438-106">Per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]sono disponibili numerosi livelli di controllo, a seconda dei requisiti legislativi o standard previsti per la propria installazione.</span><span class="sxs-lookup"><span data-stu-id="70438-106">There are several levels of auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], depending on government or standards requirements for your installation.</span></span> <span data-ttu-id="70438-107">In[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit sono disponibili gli strumenti e i processi necessari per abilitare, archiviare e visualizzare controlli in vari oggetti server e di database.</span><span class="sxs-lookup"><span data-stu-id="70438-107">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit provides the tools and processes you must have to enable, store, and view audits on various server and database objects.</span></span>  
  
 <span data-ttu-id="70438-108">È possibile registrare gruppi di azioni di controllo del server per istanza e gruppi di azioni di controllo del database o azioni di controllo del database per database.</span><span class="sxs-lookup"><span data-stu-id="70438-108">You can record server audit action groups per-instance, and either database audit action groups or database audit actions per database.</span></span> <span data-ttu-id="70438-109">L'evento di controllo si verificherà ogni volta che viene rilevata un'azione controllabile.</span><span class="sxs-lookup"><span data-stu-id="70438-109">The audit event will occur every time that the auditable action is encountered.</span></span>  
  
 <span data-ttu-id="70438-110">Tutte le edizioni dei controlli a livello server di supporto [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-110">All editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support server level audits.</span></span> <span data-ttu-id="70438-111">I controlli a livello di database sono limitati alle edizioni Enterprise, Developer e alle copie di valutazione.</span><span class="sxs-lookup"><span data-stu-id="70438-111">Database level auditing is limited to Enterprise, Developer, and Evaluation editions.</span></span> <span data-ttu-id="70438-112">Per ulteriori informazioni, vedere [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="70438-112">For more information, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="sql-server-audit-components"></a><span data-ttu-id="70438-113">Componenti di SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="70438-113">SQL Server Audit Components</span></span>  
 <span data-ttu-id="70438-114">Per *controllo* si intende la combinazione di più elementi in un unico pacchetto per un gruppo specifico di azioni server o del database.</span><span class="sxs-lookup"><span data-stu-id="70438-114">An *audit* is the combination of several elements into a single package for a specific group of server actions or database actions.</span></span> <span data-ttu-id="70438-115">Tramite la combinazione dei componenti di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit viene generato un output denominato controllo, così come tramite la combinazione della definizione del report con elementi grafici e dati viene generato un report.</span><span class="sxs-lookup"><span data-stu-id="70438-115">The components of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit combine to produce an output that is called an audit, just as a report definition combined with graphics and data elements produces a report.</span></span>  
  
 <span data-ttu-id="70438-116">Per creare un controllo, in[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit vengono usati gli *eventi estesi* .</span><span class="sxs-lookup"><span data-stu-id="70438-116">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit uses *Extended Events* to help create an audit.</span></span> <span data-ttu-id="70438-117">Per ulteriori informazioni sugli eventi estesi, vedere [eventi estesi](../../extended-events/extended-events.md).</span><span class="sxs-lookup"><span data-stu-id="70438-117">For more information about Extended Events, see [Extended Events](../../extended-events/extended-events.md).</span></span>  
  
### <a name="sql-server-audit"></a><span data-ttu-id="70438-118">SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="70438-118">SQL Server Audit</span></span>  
 <span data-ttu-id="70438-119">L'oggetto *SQL Server Audit* raccoglie un'unica istanza di azioni a livello di server o di database e gruppi di azioni da monitorare.</span><span class="sxs-lookup"><span data-stu-id="70438-119">The *SQL Server Audit* object collects a single instance of server or database-level actions and groups of actions to monitor.</span></span> <span data-ttu-id="70438-120">Il controllo si trova a livello dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-120">The audit is at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance level.</span></span> <span data-ttu-id="70438-121">Per ogni istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] è possibile disporre di più controlli.</span><span class="sxs-lookup"><span data-stu-id="70438-121">You can have multiple audits per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="70438-122">Quando si definisce un controllo, è necessario specificare il percorso per l'output dei risultati,</span><span class="sxs-lookup"><span data-stu-id="70438-122">When you define an audit, you specify the location for the output of the results.</span></span> <span data-ttu-id="70438-123">ovvero la destinazione del controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-123">This is the audit destination.</span></span> <span data-ttu-id="70438-124">Il controllo viene creato con stato *disabilitato* e non controlla alcuna azione in modo automatico.</span><span class="sxs-lookup"><span data-stu-id="70438-124">The audit is created in a *disabled* state, and does not automatically audit any actions.</span></span> <span data-ttu-id="70438-125">In seguito all'abilitazione del controllo, la relativa destinazione riceve dati dal controllo stesso.</span><span class="sxs-lookup"><span data-stu-id="70438-125">After the audit is enabled, the audit destination receives data from the audit.</span></span>  
  
### <a name="server-audit-specification"></a><span data-ttu-id="70438-126">Specifica controllo server</span><span class="sxs-lookup"><span data-stu-id="70438-126">Server Audit Specification</span></span>  
 <span data-ttu-id="70438-127">L'oggetto *specifica controllo server* appartiene a un controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-127">The *Server Audit Specification* object belongs to an audit.</span></span> <span data-ttu-id="70438-128">È possibile creare una specifica del controllo del server per ogni controllo, poiché entrambi vengono creati nell'ambito dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-128">You can create one server audit specification per audit, because both are created at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance scope.</span></span>  
  
 <span data-ttu-id="70438-129">Nella specifica del controllo del server vengono raccolti molti gruppi di azioni a livello di server, generati dalla funzionalità degli eventi estesi.</span><span class="sxs-lookup"><span data-stu-id="70438-129">The server audit specification collects many server-level action groups raised by the Extended Events feature.</span></span> <span data-ttu-id="70438-130">In una specifica del controllo del server è possibile includere *gruppi di azioni di controllo* ,</span><span class="sxs-lookup"><span data-stu-id="70438-130">You can include *audit action groups* in a server audit specification.</span></span> <span data-ttu-id="70438-131">ovvero gruppi predefiniti di azioni che rappresentano gli eventi atomici che si verificano nel [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="70438-131">Audit action groups are predefined groups of actions, which are atomic events occurring in the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="70438-132">Tali azioni vengono inviate al controllo che le registra nella destinazione.</span><span class="sxs-lookup"><span data-stu-id="70438-132">These actions are sent to the audit, which records them in the target.</span></span>  
  
 <span data-ttu-id="70438-133">I gruppi di azioni di controllo a livello di server sono descritti nell'argomento [Azioni e gruppi di azioni di SQL Server Audit](sql-server-audit-action-groups-and-actions.md).</span><span class="sxs-lookup"><span data-stu-id="70438-133">Server-level audit action groups are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="database-audit-specification"></a><span data-ttu-id="70438-134">Specifica controllo database</span><span class="sxs-lookup"><span data-stu-id="70438-134">Database Audit Specification</span></span>  
 <span data-ttu-id="70438-135">Anche l'oggetto *specifica controllo database* appartiene a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="70438-135">The *Database Audit Specification* object also belongs to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit.</span></span> <span data-ttu-id="70438-136">È possibile creare una specifica del controllo del database per ogni database di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] e per ogni controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-136">You can create one database audit specification per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database per audit.</span></span>  
  
 <span data-ttu-id="70438-137">Nella specifica del controllo del database vengono raccolte azioni di controllo a livello di database generate dalla funzionalità degli eventi estesi.</span><span class="sxs-lookup"><span data-stu-id="70438-137">The database audit specification collects database-level audit actions raised by the Extended Events feature.</span></span> <span data-ttu-id="70438-138">A questa specifica è possibile aggiungere gruppi di azioni di controllo o eventi di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-138">You can add either audit action groups or audit events to a database audit specification.</span></span> <span data-ttu-id="70438-139">Gli*eventi di controllo* sono le azioni atomiche che possono essere controllate dal motore di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ,</span><span class="sxs-lookup"><span data-stu-id="70438-139">*Audit events* are the atomic actions that can be audited by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] engine.</span></span> <span data-ttu-id="70438-140">mentre i*gruppi di azioni di controllo* sono gruppi predefiniti di azioni.</span><span class="sxs-lookup"><span data-stu-id="70438-140">*Audit action groups* are predefined groups of actions.</span></span> <span data-ttu-id="70438-141">Sia gli eventi di controllo che i gruppi di azioni si trovano nell'ambito del database di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-141">Both are at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database scope.</span></span> <span data-ttu-id="70438-142">Tali azioni vengono inviate al controllo che le registra nella destinazione.</span><span class="sxs-lookup"><span data-stu-id="70438-142">These actions are sent to the audit, which records them in the target.</span></span> <span data-ttu-id="70438-143">In una specifica del controllo di un database utente non includere oggetti con ambito server, ad esempio viste di sistema.</span><span class="sxs-lookup"><span data-stu-id="70438-143">Do not include server-scoped objects, such as the system views, in a user database audit specification.</span></span>  
  
 <span data-ttu-id="70438-144">I gruppi di azioni di controllo a livello di database e le azioni di controllo sono descritti nell'argomento [Azioni e gruppi di azioni di SQL Server Audit](sql-server-audit-action-groups-and-actions.md).</span><span class="sxs-lookup"><span data-stu-id="70438-144">Database-level audit action groups and audit actions are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="target"></a><span data-ttu-id="70438-145">Destinazione</span><span class="sxs-lookup"><span data-stu-id="70438-145">Target</span></span>  
 <span data-ttu-id="70438-146">I risultati di un controllo vengono inviati a una destinazione, che può essere un file, il registro eventi di sicurezza o il registro eventi applicazioni di Windows.</span><span class="sxs-lookup"><span data-stu-id="70438-146">The results of an audit are sent to a target, which can be a file, the Windows Security event log, or the Windows Application event log.</span></span> <span data-ttu-id="70438-147">È necessario esaminare e archiviare periodicamente tali registri per garantire che nella destinazione sia disponibile spazio sufficiente per scrivere record aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="70438-147">Logs must be reviewed and archived periodically to make sure that the target has sufficient space to write additional records.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="70438-148">Qualsiasi utente autenticato può leggere e scrivere nel registro eventi applicazioni di Windows,</span><span class="sxs-lookup"><span data-stu-id="70438-148">Any authenticated user can read and write to the Windows Application event log.</span></span> <span data-ttu-id="70438-149">per cui sono necessarie autorizzazioni inferiori rispetto al registro eventi di sicurezza di Windows e risulta pertanto meno sicuro di quest'ultimo.</span><span class="sxs-lookup"><span data-stu-id="70438-149">The Application event log requires lower permissions than the Windows Security event log and is less secure than the Windows Security event log.</span></span>  
  
 <span data-ttu-id="70438-150">Per scrivere nel registro eventi di sicurezza di Windows, è necessario che l'account di servizio di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] venga aggiunto ai criteri **Generazione controlli di sicurezza** .</span><span class="sxs-lookup"><span data-stu-id="70438-150">Writing to the Windows Security log requires the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account to be added to the **Generate security audits** policy.</span></span> <span data-ttu-id="70438-151">Per impostazione predefinita, gli account di sistema locale, Servizio Locale e Servizio di rete appartengono a tali criteri.</span><span class="sxs-lookup"><span data-stu-id="70438-151">By default, the Local System, Local Service, and Network Service are part of this policy.</span></span> <span data-ttu-id="70438-152">Questa impostazione può essere configurata tramite lo snap-in dei criteri di sicurezza (secpol.msc)</span><span class="sxs-lookup"><span data-stu-id="70438-152">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="70438-153">È inoltre necessario che i criteri di sicurezza **Controlla accesso agli oggetti** siano abilitati sia per **Esito positivo** che per **Esito negativo**.</span><span class="sxs-lookup"><span data-stu-id="70438-153">Additionally, the **Audit object access** security policy must be enabled for both **Success** and **Failure**.</span></span> <span data-ttu-id="70438-154">Questa impostazione può essere configurata tramite lo snap-in dei criteri di sicurezza (secpol.msc)</span><span class="sxs-lookup"><span data-stu-id="70438-154">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="70438-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] o Windows Server 2008, è possibile impostare i criteri più granulari **generati dall'applicazione** dalla riga di comando tramite il programma criteri di controllo ( `AuditPol.exe)` .</span><span class="sxs-lookup"><span data-stu-id="70438-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] or Windows Server 2008, you can set the more granular **application generated** policy from the command line by using the audit policy program (`AuditPol.exe)`.</span></span> <span data-ttu-id="70438-156">Per altre informazioni sulla procedura per abilitare la scrittura nel registro di protezione di Windows, vedere [Scrittura di eventi di controllo di SQL Server nel registro di sicurezza](write-sql-server-audit-events-to-the-security-log.md).</span><span class="sxs-lookup"><span data-stu-id="70438-156">For more information about the steps to enable writing to the Windows Security log, see [Write SQL Server Audit Events to the Security Log](write-sql-server-audit-events-to-the-security-log.md).</span></span> <span data-ttu-id="70438-157">Per ulteriori informazioni sul programma Auditpol.exe, vedere l'articolo 921469 della Microsoft Knowledge Base, [Utilizzo dei Criteri di gruppo per configurare impostazioni di controllo della sicurezza dettagliate](https://support.microsoft.com/kb/921469/).</span><span class="sxs-lookup"><span data-stu-id="70438-157">For more information about the Auditpol.exe program, see Knowledge Base article 921469, [How to use Group Policy to configure detailed security auditing](https://support.microsoft.com/kb/921469/).</span></span> <span data-ttu-id="70438-158">I registri eventi di Windows sono globali nel sistema operativo Windows.</span><span class="sxs-lookup"><span data-stu-id="70438-158">The Windows event logs are global to the Windows operating system.</span></span> <span data-ttu-id="70438-159">Per ulteriori informazioni sui registri eventi di Windows, vedere la pagina relativa ai [cenni preliminari sul Visualizzatore eventi](https://go.microsoft.com/fwlink/?LinkId=101455).</span><span class="sxs-lookup"><span data-stu-id="70438-159">For more information about the Windows event logs, see [Event Viewer Overview](https://go.microsoft.com/fwlink/?LinkId=101455).</span></span> <span data-ttu-id="70438-160">Se sono necessarie autorizzazioni più specifiche sul controllo, utilizzare la destinazione del file binario.</span><span class="sxs-lookup"><span data-stu-id="70438-160">If you need more precise permissions on the audit, use the binary file target.</span></span>  
  
 <span data-ttu-id="70438-161">Quando si salvano informazioni di controllo in un file, per contribuire a impedirne l'alterazione, è possibile limitare l'accesso al percorso del file nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="70438-161">When you are saving audit information to a file, to help prevent tampering, you can restrict access to the file location in the following ways:</span></span>  
  
-   <span data-ttu-id="70438-162">L'account del servizio [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] deve disporre dell'autorizzazione in lettura e in scrittura.</span><span class="sxs-lookup"><span data-stu-id="70438-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service Account must have both Read and Write permission.</span></span>  
  
-   <span data-ttu-id="70438-163">Gli amministratori di controllo richiedono in genere l'autorizzazione in lettura e in scrittura.</span><span class="sxs-lookup"><span data-stu-id="70438-163">Audit Administrators typically require Read and Write permission.</span></span> <span data-ttu-id="70438-164">Ciò presuppone che gli amministratori di controllo siano account di Windows per quanto riguarda l'amministrazione dei file di controllo, ad esempio per la copia in diverse condivisioni, per il backup e così via.</span><span class="sxs-lookup"><span data-stu-id="70438-164">This assumes that the Audit Administrators are Windows accounts for administration of audit files, such as: copying them to different shares, backing them up, and so on.</span></span>  
  
-   <span data-ttu-id="70438-165">I lettori di controllo autorizzati a leggere i file di controllo devono disporre dell'autorizzazione in lettura.</span><span class="sxs-lookup"><span data-stu-id="70438-165">Audit Readers that are authorized to read audit files must have Read permission.</span></span>  
  
 <span data-ttu-id="70438-166">Se dispongono dell'autorizzazione, gli altri utenti di Windows possono leggere il file di controllo anche quando si verifica un'operazione di scrittura in un file da parte del [!INCLUDE[ssDE](../../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-166">Even when the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] is writing to a file, other Windows users can read the audit file if they have permission.</span></span> <span data-ttu-id="70438-167">[!INCLUDE[ssDE](../../../includes/ssde-md.md)] non accetta un blocco esclusivo che impedisce le operazioni di lettura.</span><span class="sxs-lookup"><span data-stu-id="70438-167">The [!INCLUDE[ssDE](../../../includes/ssde-md.md)] does not take an exclusive lock that prevents read operations.</span></span>  
  
 <span data-ttu-id="70438-168">Poiché [!INCLUDE[ssDE](../../../includes/ssde-md.md)] può accedere al file, gli accessi [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] che dispongono dell'autorizzazione CONTROL SERVER possono utilizzare [!INCLUDE[ssDE](../../../includes/ssde-md.md)] per accedere ai file di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-168">Because the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] can access the file, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] logins that have CONTROL SERVER permission can use the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] to access the audit files.</span></span> <span data-ttu-id="70438-169">Per registrare un utente che sta leggendo il file di controllo, definire un controllo in master.sys.fn_get_audit_file.</span><span class="sxs-lookup"><span data-stu-id="70438-169">To record any user that is reading the audit file, define an audit on master.sys.fn_get_audit_file.</span></span> <span data-ttu-id="70438-170">In tal modo viene registrato l'accesso al file di controllo tramite [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]effettuato dagli account di accesso dotati dell'autorizzazione CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="70438-170">This records the logins with CONTROL SERVER permission that have accessed the audit file through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="70438-171">Se un amministratore di controllo copia il file in un percorso diverso (ad esempio, per scopi di archiviazione e così via), gli ACL sul nuovo percorso devono avere solo le autorizzazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="70438-171">If an Audit Administrator copies the file to a different location (for archive purposes, and so on), the ACLs on the new location should be reduced to the following permissions:</span></span>  
  
-   <span data-ttu-id="70438-172">Amministratore di controllo: lettura/scrittura</span><span class="sxs-lookup"><span data-stu-id="70438-172">Audit Administrator - Read / Write</span></span>  
  
-   <span data-ttu-id="70438-173">Lettore di controllo: lettura</span><span class="sxs-lookup"><span data-stu-id="70438-173">Audit Reader - Read</span></span>  
  
 <span data-ttu-id="70438-174">Si consiglia di generare i report di controllo da un'istanza separata di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], ad esempio un'istanza di [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)]a cui hanno accesso solo gli amministratori di controllo o i lettori di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-174">We recommend that you generate audit reports from a separate instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], such as an instance of [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], to which only Audit Administrators or Audit Readers have access.</span></span> <span data-ttu-id="70438-175">Utilizzando un'istanza di [!INCLUDE[ssDE](../../../includes/ssde-md.md)] separata per la segnalazione, è possibile evitare che utenti non autorizzati abbiano accesso al record di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-175">By using a separate instance of the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for reporting, you can help prevent unauthorized users from obtaining access to the audit record.</span></span>  
  
 <span data-ttu-id="70438-176">È possibile offrire protezione aggiuntiva contro l'accesso non autorizzato crittografando la cartella in cui viene archiviato il file di controllo tramite la crittografia unità BitLocker di Windows o Encrypting File System di Windows.</span><span class="sxs-lookup"><span data-stu-id="70438-176">You can offer additional protection against unauthorized access by encrypting the folder in which the audit file is stored by using Windows BitLocker Drive Encryption or Windows Encrypting File System.</span></span>  
  
 <span data-ttu-id="70438-177">Per ulteriori informazioni sui record di controllo scritti nella destinazione, vedere [SQL Server Audit Records](sql-server-audit-records.md).</span><span class="sxs-lookup"><span data-stu-id="70438-177">For more information about the audit records that are written to the target, see [SQL Server Audit Records](sql-server-audit-records.md).</span></span>  
  
## <a name="overview-of-using-sql-server-audit"></a><span data-ttu-id="70438-178">Panoramica sull'utilizzo di SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="70438-178">Overview of Using SQL Server Audit</span></span>  
 <span data-ttu-id="70438-179">Per definire un controllo, è possibile utilizzare [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] o [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-179">You can use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] to define an audit.</span></span> <span data-ttu-id="70438-180">In seguito alla creazione e all'abilitazione del controllo, la destinazione riceverà le voci.</span><span class="sxs-lookup"><span data-stu-id="70438-180">After the audit is created and enabled, the target will receive entries.</span></span>  
  
 <span data-ttu-id="70438-181">L'utilità **Visualizzatore eventi** disponibile in Windows consente di leggere i registri eventi di Windows.</span><span class="sxs-lookup"><span data-stu-id="70438-181">You can read the Windows event logs by using the **Event Viewer** utility in Windows.</span></span> <span data-ttu-id="70438-182">Per le destinazioni file, è possibile usare il **Visualizzatore file di log** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] o la funzione [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) per leggere il file di destinazione.</span><span class="sxs-lookup"><span data-stu-id="70438-182">For file targets, you can use either the **Log File Viewer** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or the [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) function to read the target file.</span></span>  
  
 <span data-ttu-id="70438-183">Di seguito viene descritto il processo generale di creazione e utilizzo di un controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-183">The general process for creating and using an audit is as follows.</span></span>  
  
1.  <span data-ttu-id="70438-184">Creare un controllo e definire la destinazione.</span><span class="sxs-lookup"><span data-stu-id="70438-184">Create an audit and define the target.</span></span>  
  
2.  <span data-ttu-id="70438-185">Creare una specifica del controllo del server o una specifica del controllo del database che esegue il mapping al controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-185">Create either a server audit specification or database audit specification that maps to the audit.</span></span> <span data-ttu-id="70438-186">Abilitare la specifica del controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-186">Enable the audit specification.</span></span>  
  
3.  <span data-ttu-id="70438-187">Abilitare il controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-187">Enable the audit.</span></span>  
  
4.  <span data-ttu-id="70438-188">Leggere gli eventi di controllo tramite il **Visualizzatore eventi**di Windows, il **Visualizzatore file di log**o la funzione fn_get_audit_file.</span><span class="sxs-lookup"><span data-stu-id="70438-188">Read the audit events by using the Windows **Event Viewer**, **Log File Viewe**r, or the fn_get_audit_file function.</span></span>  
  
 <span data-ttu-id="70438-189">Per ulteriori informazioni, vedere [Creazione di un controllo del server e di una specifica del controllo del server](create-a-server-audit-and-server-audit-specification.md) e [Creazione di un controllo del server e di una specifica del controllo del database](create-a-server-audit-and-database-audit-specification.md).</span><span class="sxs-lookup"><span data-stu-id="70438-189">For more information, see [Create a Server Audit and Server Audit Specification](create-a-server-audit-and-server-audit-specification.md) and [Create a Server Audit and Database Audit Specification](create-a-server-audit-and-database-audit-specification.md).</span></span>  
  
## <a name="considerations"></a><span data-ttu-id="70438-190">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="70438-190">Considerations</span></span>  
 <span data-ttu-id="70438-191">Se durante la fase iniziale del controllo si verifica un errore, il server non si avvierà.</span><span class="sxs-lookup"><span data-stu-id="70438-191">In the case of a failure during audit initiation, the server will not start.</span></span> <span data-ttu-id="70438-192">In questo caso, per avviare il server è possibile usare l'opzione **-f** della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="70438-192">In this case, the server can be started by using the **-f** option at the command line.</span></span>  
  
 <span data-ttu-id="70438-193">Se in seguito a un errore a livello del controllo il server si arresta o non si avvia perché per il controllo è specificata l'impostazione ON_FAILURE=SHUTDOWN, l'evento MSG_AUDIT_FORCED_SHUTDOWN verrà scritto nel registro.</span><span class="sxs-lookup"><span data-stu-id="70438-193">When an audit failure causes the server to shut down or not to start because ON_FAILURE=SHUTDOWN is specified for the audit, the MSG_AUDIT_FORCED_SHUTDOWN event will be written to the log.</span></span> <span data-ttu-id="70438-194">Poiché l'arresto si verificherà quando questa impostazione viene incontrata la prima volta, l'evento verrà scritto solo una volta.</span><span class="sxs-lookup"><span data-stu-id="70438-194">Because the shutdown will occur on the first encounter of this setting, the event will be written one time.</span></span> <span data-ttu-id="70438-195">Tale evento viene scritto dopo il messaggio di errore relativo al controllo che provoca l'arresto.</span><span class="sxs-lookup"><span data-stu-id="70438-195">This event is written after the failure message for the audit causing the shutdown.</span></span> <span data-ttu-id="70438-196">Per ignorare l'arresto provocato dal controllo, un amministratore può avviare [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in modalità utente singolo usando il flag **-m**.</span><span class="sxs-lookup"><span data-stu-id="70438-196">An administrator can bypass audit-induced shutdowns by starting [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in Single User mode using the **-m** flag.</span></span> <span data-ttu-id="70438-197">Se l'avvio viene eseguito in modalità utente singolo, verrà effettuato il downgrade di qualsiasi controllo per la cui sessione è specificata l'esecuzione di ON_FAILURE=SHUTDOWN come ON_FAILURE=CONTINUE.</span><span class="sxs-lookup"><span data-stu-id="70438-197">If you start in Single User mode, you will downgrade any audit where ON_FAILURE=SHUTDOWN is specified to run in that session as ON_FAILURE=CONTINUE.</span></span> <span data-ttu-id="70438-198">Se [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] viene avviato con il flag **-m**, nel log degli errori verrà scritto il messaggio MSG_AUDIT_SHUTDOWN_BYPASSED.</span><span class="sxs-lookup"><span data-stu-id="70438-198">When [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is started by using the **-m** flag, the MSG_AUDIT_SHUTDOWN_BYPASSED message will be written to the error log.</span></span>  
  
 <span data-ttu-id="70438-199">Per altre informazioni sulle opzioni di avvio del servizio, vedere [Opzioni di avvio del servizio del motore di database](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span><span class="sxs-lookup"><span data-stu-id="70438-199">For more information about service startup options, see [Database Engine Service Startup Options](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span></span>  
  
### <a name="attaching-a-database-with-an-audit-defined"></a><span data-ttu-id="70438-200">Collegamento di un database con un controllo definito</span><span class="sxs-lookup"><span data-stu-id="70438-200">Attaching a Database with an Audit Defined</span></span>  
 <span data-ttu-id="70438-201">Il collegamento di un database che dispone di una specifica del controllo e per cui è specificato un GUID che non esiste nel server provocherà una specifica del controllo *orfana* .</span><span class="sxs-lookup"><span data-stu-id="70438-201">Attaching a database that has an audit specification and specifies a GUID that does not exist on the server will cause an *orphaned* audit specification.</span></span> <span data-ttu-id="70438-202">Poiché nell'istanza del server non esiste un controllo con GUID corrispondente, non verrà registrato alcun evento di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-202">Because an audit with a matching GUID does not exist on the server instance, no audit events will be recorded.</span></span> <span data-ttu-id="70438-203">Per risolvere questo problema, utilizzare il comando ALTER DATABASE AUDIT SPECIFICATION per connettere la specifica del controllo orfana a un controllo del server esistente</span><span class="sxs-lookup"><span data-stu-id="70438-203">To correct this situation, use the ALTER DATABASE AUDIT SPECIFICATION command to connect the orphaned audit specification to an existing server audit.</span></span> <span data-ttu-id="70438-204">oppure utilizzare il comando CREATE SERVER AUDIT per creare un nuovo controllo del server con il GUID specificato.</span><span class="sxs-lookup"><span data-stu-id="70438-204">Or, use the CREATE SERVER AUDIT command to create a new server audit with the specified GUID.</span></span>  
  
 <span data-ttu-id="70438-205">È possibile collegare un database per cui è definita una specifica di controllo a un'altra edizione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] che non supporta [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit, ad esempio [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] , ma gli eventi di controllo non verranno registrati.</span><span class="sxs-lookup"><span data-stu-id="70438-205">You can attach a database that has an audit specification defined on it to another edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that does not support [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit, such as [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] but it will not record audit events.</span></span>  
  
### <a name="database-mirroring-and-sql-server-audit"></a><span data-ttu-id="70438-206">Mirroring del database e SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="70438-206">Database Mirroring and SQL Server Audit</span></span>  
 <span data-ttu-id="70438-207">Un database che dispone di una specifica del controllo del database definita e che utilizza il mirroring del database includerà la specifica del controllo del database.</span><span class="sxs-lookup"><span data-stu-id="70438-207">A database that has a database audit specification defined and that uses database mirroring will include the database audit specification.</span></span> <span data-ttu-id="70438-208">Per funzionare correttamente sull'istanza SQL Server con mirroring, è necessario che siano configurati gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="70438-208">To work correctly on the mirrored SQL instance, the following items must be configured:</span></span>  
  
-   <span data-ttu-id="70438-209">Il server mirror deve disporre di un controllo con lo stesso GUID per consentire alla specifica del controllo del database di scrivere i record di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-209">The mirror server must have an audit with the same GUID to enable the database audit specification to write audit records.</span></span> <span data-ttu-id="70438-210">Questa configurazione può essere eseguita usando il comando CREATE AUDIT WITH GUID `=` \* \<GUID from source Server Audit*> .</span><span class="sxs-lookup"><span data-stu-id="70438-210">This can be configured by using the command CREATE AUDIT WITH GUID`=`\*\<GUID from source Server Audit*>.</span></span>  
  
-   <span data-ttu-id="70438-211">Per le destinazioni del file binario, l'account di servizio del server mirror deve disporre delle autorizzazioni appropriate per il percorso in cui verrà scritto l'itinerario di controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-211">For binary file targets, the mirror server service account must have appropriate permissions to the location where the audit trail is being written.</span></span>  
  
-   <span data-ttu-id="70438-212">Per le destinazioni del registro eventi di Windows, i criteri di sicurezza nel computer in cui si trova il server mirror devono consentire all'account di servizio di accedere al registro eventi applicazioni o di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="70438-212">For Windows event log targets, the security policy on the computer where the mirror server is located must allow for service account access to the security or application event log.</span></span>  
  
### <a name="auditing-administrators"></a><span data-ttu-id="70438-213">Controllo degli amministratori</span><span class="sxs-lookup"><span data-stu-id="70438-213">Auditing Administrators</span></span>  
 <span data-ttu-id="70438-214">I membri del `sysadmin` ruolo predefinito del server vengono identificati come utente **dbo** in ogni database.</span><span class="sxs-lookup"><span data-stu-id="70438-214">Members of the `sysadmin` fixed server role are identified as the **dbo** user in each database.</span></span> <span data-ttu-id="70438-215">Per controllare le azioni degli amministratori, controllare le azioni dell'utente **dbo** .</span><span class="sxs-lookup"><span data-stu-id="70438-215">To audit actions of the administrators, audit the actions of the **dbo** user.</span></span>  
  
## <a name="creating-and-managing-audits-with-transact-sql"></a><span data-ttu-id="70438-216">Creazione e gestione di controlli con Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="70438-216">Creating and Managing Audits with Transact-SQL</span></span>  
 <span data-ttu-id="70438-217">È possibile utilizzare istruzioni DDL, DMV e funzioni, nonché viste del catalogo per implementare tutti gli aspetti di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="70438-217">You can use DDL statements, dynamic management views and functions, and catalog views to implement all aspects of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>  
  
### <a name="data-definition-language-statements"></a><span data-ttu-id="70438-218">Istruzioni DDL (Data Definition Language)</span><span class="sxs-lookup"><span data-stu-id="70438-218">Data Definition Language Statements</span></span>  
 <span data-ttu-id="70438-219">Per creare, modificare ed eliminare specifiche del controllo, è possibile utilizzare le istruzioni DDL seguenti:</span><span class="sxs-lookup"><span data-stu-id="70438-219">You can use the following DDL statements to create, alter, and drop audit specifications:</span></span>  
  
|||  
|-|-|  
|[<span data-ttu-id="70438-220">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="70438-220">ALTER AUTHORIZATION</span></span>](/sql/t-sql/statements/alter-authorization-transact-sql)|[<span data-ttu-id="70438-221">CREATE SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="70438-221">CREATE SERVER AUDIT</span></span>](/sql/t-sql/statements/create-server-audit-transact-sql)|  
|[<span data-ttu-id="70438-222">ALTER DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-222">ALTER DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-database-audit-specification-transact-sql)|[<span data-ttu-id="70438-223">CREATE SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-223">CREATE SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-server-audit-specification-transact-sql)|  
|[<span data-ttu-id="70438-224">ALTER SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="70438-224">ALTER SERVER AUDIT</span></span>](/sql/t-sql/statements/alter-server-audit-specification-transact-sql)|[<span data-ttu-id="70438-225">DROP DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-225">DROP DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-database-encryption-key-transact-sql)|  
|[<span data-ttu-id="70438-226">ALTER SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-226">ALTER SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-server-audit-transact-sql)|[<span data-ttu-id="70438-227">DROP SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="70438-227">DROP SERVER AUDIT</span></span>](/sql/t-sql/statements/drop-server-audit-transact-sql)|  
|[<span data-ttu-id="70438-228">CREATE DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-228">CREATE DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-database-audit-specification-transact-sql)|[<span data-ttu-id="70438-229">DROP SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="70438-229">DROP SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-server-audit-specification-transact-sql)|  
  
### <a name="dynamic-views-and-functions"></a><span data-ttu-id="70438-230">Viste e funzioni dinamiche</span><span class="sxs-lookup"><span data-stu-id="70438-230">Dynamic Views and Functions</span></span>  
 <span data-ttu-id="70438-231">Nella tabella seguente vengono elencate le viste e le funzioni dinamiche che è possibile utilizzare per il controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-231">The following table lists the dynamic views and function that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Auditing.</span></span>  
  
|<span data-ttu-id="70438-232">Viste e funzioni dinamiche</span><span class="sxs-lookup"><span data-stu-id="70438-232">Dynamic views and functions</span></span>|<span data-ttu-id="70438-233">Descrizione</span><span class="sxs-lookup"><span data-stu-id="70438-233">Description</span></span>|  
|---------------------------------|-----------------|  
|[<span data-ttu-id="70438-234">sys.dm_audit_actions</span><span class="sxs-lookup"><span data-stu-id="70438-234">sys.dm_audit_actions</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-actions-transact-sql)|<span data-ttu-id="70438-235">Restituisce una riga per ogni azione di controllo che può essere segnalata nel log di controllo e per ogni gruppo di azioni di controllo che possono essere configurate come parte di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="70438-235">Returns a row for every audit action that can be reported in the audit log and every audit action group that can be configured as part of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>|  
|[<span data-ttu-id="70438-236">sys.dm_server_audit_status</span><span class="sxs-lookup"><span data-stu-id="70438-236">sys.dm_server_audit_status</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-server-audit-status-transact-sql)|<span data-ttu-id="70438-237">Fornisce informazioni sullo stato corrente del controllo.</span><span class="sxs-lookup"><span data-stu-id="70438-237">Provides information about the current state of the audit.</span></span>|  
|[<span data-ttu-id="70438-238">sys.dm_audit_class_type_map</span><span class="sxs-lookup"><span data-stu-id="70438-238">sys.dm_audit_class_type_map</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-class-type-map-transact-sql)|<span data-ttu-id="70438-239">Restituisce una tabella che esegue il mapping del campo class_type nel log di controllo al campo class_desc in sys.dm_audit_actions.</span><span class="sxs-lookup"><span data-stu-id="70438-239">Returns a table that maps the class_type field in the audit log to the class_desc field in sys.dm_audit_actions.</span></span>|  
|[<span data-ttu-id="70438-240">fn_get_audit_file</span><span class="sxs-lookup"><span data-stu-id="70438-240">fn_get_audit_file</span></span>](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql)|<span data-ttu-id="70438-241">Restituisce informazioni da un file di controllo creato da un controllo del server.</span><span class="sxs-lookup"><span data-stu-id="70438-241">Returns information from an audit file created by a server audit.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="70438-242">Viste del catalogo</span><span class="sxs-lookup"><span data-stu-id="70438-242">Catalog Views</span></span>  
 <span data-ttu-id="70438-243">Nella tabella seguente vengono elencate le viste del catalogo che è possibile utilizzare per il controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-243">The following table lists the catalog views that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] auditing.</span></span>  
  
|<span data-ttu-id="70438-244">Viste del catalogo</span><span class="sxs-lookup"><span data-stu-id="70438-244">Catalog views</span></span>|<span data-ttu-id="70438-245">Descrizione</span><span class="sxs-lookup"><span data-stu-id="70438-245">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="70438-246">sys.database_ audit_specifications</span><span class="sxs-lookup"><span data-stu-id="70438-246">sys.database_ audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specifications-transact-sql)|<span data-ttu-id="70438-247">Contiene informazioni sulle specifiche del controllo del database in un controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="70438-247">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="70438-248">sys.database_audit_specification_details</span><span class="sxs-lookup"><span data-stu-id="70438-248">sys.database_audit_specification_details</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specification-details-transact-sql)|<span data-ttu-id="70438-249">Contiene informazioni sulle specifiche del controllo del database in un controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server per tutti i database.</span><span class="sxs-lookup"><span data-stu-id="70438-249">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance for all databases.</span></span>|  
|[<span data-ttu-id="70438-250">sys.server_audits</span><span class="sxs-lookup"><span data-stu-id="70438-250">sys.server_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audits-transact-sql)|<span data-ttu-id="70438-251">Contiene una riga per ogni controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="70438-251">Contains one row for each [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit in a server instance.</span></span>|  
|[<span data-ttu-id="70438-252">sys.server_audit_specifications</span><span class="sxs-lookup"><span data-stu-id="70438-252">sys.server_audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specifications-transact-sql)|<span data-ttu-id="70438-253">Contiene informazioni sulle specifiche del controllo del server in un controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="70438-253">Contains information about the server audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="70438-254">sys.server_audit_specifications_details</span><span class="sxs-lookup"><span data-stu-id="70438-254">sys.server_audit_specifications_details</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specification-details-transact-sql)|<span data-ttu-id="70438-255">Contiene informazioni sui dettagli (azioni) delle specifiche del controllo del server in un controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="70438-255">Contains information about the server audit specification details (actions) in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="70438-256">sys.server_file_audits</span><span class="sxs-lookup"><span data-stu-id="70438-256">sys.server_file_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-file-audits-transact-sql)|<span data-ttu-id="70438-257">Contiene informazioni estese sul tipo di controllo dei file in un controllo di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="70438-257">Contains stores extended information about the file audit type in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="70438-258">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="70438-258">Permissions</span></span>  
 <span data-ttu-id="70438-259">A ogni funzionalità e comando per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit sono associati requisiti di autorizzazione singoli.</span><span class="sxs-lookup"><span data-stu-id="70438-259">Each feature and command for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit has individual permission requirements.</span></span>  
  
 <span data-ttu-id="70438-260">Per creare, modificare o eliminare un controllo del server o una specifica del controllo del server, le entità server devono disporre dell'autorizzazione ALTER ANY SERVER AUDIT o CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="70438-260">To create, alter, or drop a Server Audit or Server Audit Specification, server principals require the ALTER ANY SERVER AUDIT or the CONTROL SERVER permission.</span></span> <span data-ttu-id="70438-261">Per creare, modificare o eliminare una specifica del controllo del database, le entità di database devono disporre dell'autorizzazione ALTER ANY DATABASE AUDIT o dell'autorizzazione ALTER o CONTROL per il database.</span><span class="sxs-lookup"><span data-stu-id="70438-261">To create, alter, or drop a Database Audit Specification, database principals require the ALTER ANY DATABASE AUDIT permission or the ALTER or CONTROL permission on the database.</span></span> <span data-ttu-id="70438-262">Le entità devono inoltre disporre dell'autorizzazione necessaria per connettersi al database o dell'autorizzazione ALTER ANY SERVER AUDIT o CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="70438-262">In addition, principals must have permission to connect to the database, or ALTER ANY SERVER AUDIT or CONTROL SERVER permissions.</span></span>  
  
 <span data-ttu-id="70438-263">Se non specificato diversamente, per visualizzare le viste del catalogo un'entità deve disporre di uno degli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="70438-263">Unless otherwise specified, viewing catalog views requires a principal to have one of the following:</span></span>  
  
-   <span data-ttu-id="70438-264">Appartenenza al ruolo predefinito del server sysadmin.</span><span class="sxs-lookup"><span data-stu-id="70438-264">Membership in the sysadmin fixed server role.</span></span>  
  
-   <span data-ttu-id="70438-265">Autorizzazione CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="70438-265">The CONTROL SERVER permission.</span></span>  
  
-   <span data-ttu-id="70438-266">Autorizzazione VIEW SERVER STATE.</span><span class="sxs-lookup"><span data-stu-id="70438-266">The VIEW SERVER STATE permission.</span></span>  
  
-   <span data-ttu-id="70438-267">Autorizzazione ALTER ANY AUDIT.</span><span class="sxs-lookup"><span data-stu-id="70438-267">The ALTER ANY AUDIT permission.</span></span>  
  
-   <span data-ttu-id="70438-268">Autorizzazione VIEW AUDIT STATE, che concede all'entità solo l'accesso alla vista del catalogo sys.server_audits.</span><span class="sxs-lookup"><span data-stu-id="70438-268">The VIEW AUDIT STATE permission (gives only the principal access to the sys.server_audits catalog view).</span></span>  
  
 <span data-ttu-id="70438-269">Per utilizzare le viste a gestione dinamica, un'entità deve disporre dell'autorizzazione VIEW SERVER STATE o ALTER ANY AUDIT.</span><span class="sxs-lookup"><span data-stu-id="70438-269">A principal must have the VIEW SERVER STATE or ALTER ANY AUDIT permission to use the Dynamic Management Views.</span></span>  
  
 <span data-ttu-id="70438-270">Per altre informazioni su come concedere diritti e autorizzazioni, vedere [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="70438-270">For more information about how to grant rights and permissions, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="70438-271">Le entità nel ruolo sysadmin possono alterare qualsiasi componente del controllo, mentre quelle nel ruolo db_owner possono alterare le specifiche del controllo in un database.</span><span class="sxs-lookup"><span data-stu-id="70438-271">Principals in the sysadmin role can tamper with any audit component and those in the db_owner role can tamper with audit specifications in a database.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="70438-272">Audit convaliderà una situazione in cui un accesso che crea o modifica una specifica del controllo dispone almeno dell'autorizzazione ALTER ANY DATABASE AUDIT,</span><span class="sxs-lookup"><span data-stu-id="70438-272">Audit will validate that a logon that creates or alters an audit specification has at least the ALTER ANY DATABASE AUDIT permission.</span></span> <span data-ttu-id="70438-273">ma non esegue alcuna convalida quando si collega un database.</span><span class="sxs-lookup"><span data-stu-id="70438-273">However, it does no validation when you attach a database.</span></span> <span data-ttu-id="70438-274">È necessario presupporre che tutte le specifiche del controllo del database siano attendibile come le entità nel ruolo sysadmin o db_owner.</span><span class="sxs-lookup"><span data-stu-id="70438-274">You should assume all Database Audit Specifications are only as trustworthy as those principals in the sysadmin or db_owner role.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="70438-275">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="70438-275">Related Tasks</span></span>  
 [<span data-ttu-id="70438-276">Creazione di un controllo del server e di una specifica del controllo del server</span><span class="sxs-lookup"><span data-stu-id="70438-276">Create a Server Audit and Server Audit Specification</span></span>](create-a-server-audit-and-server-audit-specification.md)  
  
 [<span data-ttu-id="70438-277">Creazione di un controllo del server e di una specifica del controllo del database</span><span class="sxs-lookup"><span data-stu-id="70438-277">Create a Server Audit and Database Audit Specification</span></span>](create-a-server-audit-and-database-audit-specification.md)  
  
 [<span data-ttu-id="70438-278">Visualizzazione di un log di controllo di SQL Server</span><span class="sxs-lookup"><span data-stu-id="70438-278">View a SQL Server Audit Log</span></span>](view-a-sql-server-audit-log.md)  
  
 [<span data-ttu-id="70438-279">Scrittura di eventi di controllo di SQL Server nel registro di sicurezza</span><span class="sxs-lookup"><span data-stu-id="70438-279">Write SQL Server Audit Events to the Security Log</span></span>](write-sql-server-audit-events-to-the-security-log.md)  
  
## <a name="topics-closely-related-to-auditing"></a><span data-ttu-id="70438-280">Argomenti strettamente correlati al controllo</span><span class="sxs-lookup"><span data-stu-id="70438-280">Topics Closely Related to Auditing</span></span>  
 [<span data-ttu-id="70438-281">Proprietà server &#40;pagina Sicurezza&#41;</span><span class="sxs-lookup"><span data-stu-id="70438-281">Server Properties &#40;Security Page&#41;</span></span>](../../../database-engine/configure-windows/server-properties-security-page.md)  
 <span data-ttu-id="70438-282">Viene illustrato come attivare il controllo degli account di accesso per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="70438-282">Explains how to turn on login auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="70438-283">I record di controllo vengono archiviati nel registro applicazioni di Windows.</span><span class="sxs-lookup"><span data-stu-id="70438-283">The audit records are stored in the Windows application log.</span></span>  
  
 [<span data-ttu-id="70438-284">Opzione di configurazione del server c2 audit mode</span><span class="sxs-lookup"><span data-stu-id="70438-284">c2 audit mode Server Configuration Option</span></span>](../../../database-engine/configure-windows/c2-audit-mode-server-configuration-option.md)  
 <span data-ttu-id="70438-285">Viene illustrata la modalità di controllo conforme alla sicurezza C2 in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="70438-285">Explains the C2 security compliance auditing mode in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 [<span data-ttu-id="70438-286">Categoria di eventi Security Audit &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="70438-286">Security Audit Event Category &#40;SQL Server Profiler&#41;</span></span>](../../../relational-databases/event-classes/security-audit-event-category-sql-server-profiler.md)  
 <span data-ttu-id="70438-287">Vengono illustrati gli eventi di controllo che è possibile utilizzare in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="70438-287">Explains the audit events you can use in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="70438-288">Per altre informazioni, vedere [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="70438-288">For more information, see [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span></span>  
  
 [<span data-ttu-id="70438-289">Traccia SQL</span><span class="sxs-lookup"><span data-stu-id="70438-289">SQL Trace</span></span>](../../sql-trace/sql-trace.md)  
 <span data-ttu-id="70438-290">Illustrate le modalità di uso di Traccia SQL all'interno di applicazioni personalizzate per creare tracce manualmente anziché tramite [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span><span class="sxs-lookup"><span data-stu-id="70438-290">Explains how SQL Trace can be used from within your own applications to create traces manually, instead of using [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span></span>  
  
 [<span data-ttu-id="70438-291">Trigger DDL</span><span class="sxs-lookup"><span data-stu-id="70438-291">DDL Triggers</span></span>](../../triggers/ddl-triggers.md)  
 <span data-ttu-id="70438-292">Vengono illustrate le modalità di utilizzo di trigger DDL (Data Definition Language) per tenere traccia delle modifiche apportate ai database.</span><span class="sxs-lookup"><span data-stu-id="70438-292">Explains how you can use Data Definition Language (DDL) triggers to track changes to your databases.</span></span>  
  
 [<span data-ttu-id="70438-293">Microsoft TechNet: TechCenter di SQL Server: Sicurezza e protezione di SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="70438-293">Microsoft TechNet: SQL Server TechCenter: SQL Server 2005 Security and Protection</span></span>](https://go.microsoft.com/fwlink/?LinkId=101152)  
 <span data-ttu-id="70438-294">Fornisce informazioni aggiornate sulla sicurezza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="70438-294">Provides up-to-date information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="70438-295">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="70438-295">See Also</span></span>  
 <span data-ttu-id="70438-296">[Azioni e gruppi di azioni di SQL Server Audit](sql-server-audit-action-groups-and-actions.md) </span><span class="sxs-lookup"><span data-stu-id="70438-296">[SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md) </span></span>  
 [<span data-ttu-id="70438-297">Record di SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="70438-297">SQL Server Audit Records</span></span>](sql-server-audit-records.md)  
  
  
