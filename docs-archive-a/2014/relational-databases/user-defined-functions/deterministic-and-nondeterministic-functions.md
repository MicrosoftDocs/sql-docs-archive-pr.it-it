---
title: Funzioni deterministiche e non deterministiche | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- built-in functions [SQL Server]
- nondeterministic functions
- extended stored procedures [SQL Server], functions that call
- deterministic functions
- user-defined functions [SQL Server], deterministic
ms.assetid: 2f3ce5f5-c81c-4470-8141-8144d4f218dd
author: rothja
ms.author: jroth
ms.openlocfilehash: 9e755532e06d64e273408c7e81936a1c2d370697
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724460"
---
# <a name="deterministic-and-nondeterministic-functions"></a><span data-ttu-id="41003-102">Funzioni deterministiche e non deterministiche</span><span class="sxs-lookup"><span data-stu-id="41003-102">Deterministic and Nondeterministic Functions</span></span>
  <span data-ttu-id="41003-103">Le funzioni deterministiche restituiscono sempre lo stesso risultato quando vengono chiamate con un set di valori di input specifico e se lo stato del database rimane invariato.</span><span class="sxs-lookup"><span data-stu-id="41003-103">Deterministic functions always return the same result any time they are called with a specific set of input values and given the same state of the database.</span></span> <span data-ttu-id="41003-104">Le funzioni non deterministiche possono restituire risultati diversi quando vengono chiamate con un set di valori di input specifico, anche se lo stato del database a cui accedono rimane invariato.</span><span class="sxs-lookup"><span data-stu-id="41003-104">Nondeterministic functions may return different results each time they are called with a specific set of input values even if the database state that they access remains the same.</span></span> <span data-ttu-id="41003-105">Ad esempio, tramite la funzione AVG viene restituito sempre lo stesso risultato in base alle condizioni indicate in precedenza, ma tramite la funzione GETDATE, mediante la quale viene restituito il valore datetime corrente, viene sempre restituito un risultato diverso.</span><span class="sxs-lookup"><span data-stu-id="41003-105">For example, the function AVG always returns the same result given the qualifications stated above, but the GETDATE function, which returns the current datetime value, always returns a different result.</span></span>  
  
 <span data-ttu-id="41003-106">Le funzioni definite dall'utente includono diverse proprietà che influiscono sulla capacità del [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] di indicizzare i risultati della funzione, tramite gli indici nelle colonne calcolate che chiamano la funzione o tramite le viste indicizzate che fanno riferimento alla funzione.</span><span class="sxs-lookup"><span data-stu-id="41003-106">There are several properties of user-defined functions that determine the ability of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to index the results of the function, either through indexes on computed columns that call the function, or through indexed views that reference the function.</span></span> <span data-ttu-id="41003-107">Una di queste proprietà è la proprietà deterministica di una funzione.</span><span class="sxs-lookup"><span data-stu-id="41003-107">The determinism of a function is one such property.</span></span> <span data-ttu-id="41003-108">Non è, ad esempio, possibile creare un indice cluster in una vista se la vista fa riferimento a funzioni non deterministiche.</span><span class="sxs-lookup"><span data-stu-id="41003-108">For example, a clustered index cannot be created on a view if the view references any nondeterministic functions.</span></span> <span data-ttu-id="41003-109">Per altre informazioni sulle proprietà delle funzioni, inclusa la proprietà deterministica, vedere [Funzioni definite dall'utente](user-defined-functions.md).</span><span class="sxs-lookup"><span data-stu-id="41003-109">For more information about the properties of functions, including determinism, see [User-Defined Functions](user-defined-functions.md).</span></span>  
  
 <span data-ttu-id="41003-110">In questo argomento vengono illustrati la proprietà deterministica delle funzioni di sistema predefinite e l'effetto sulla proprietà deterministica delle funzioni definite dall'utente quando contiene una chiamata a stored procedure estese.</span><span class="sxs-lookup"><span data-stu-id="41003-110">This topic identifies the determinism of built-in system functions and the effect on the deterministic property of user-defined functions when it contains a call to extended stored procedures.</span></span>  
  
## <a name="built-in-function-determinism"></a><span data-ttu-id="41003-111">Proprietà deterministica delle funzioni predefinite</span><span class="sxs-lookup"><span data-stu-id="41003-111">Built-in Function Determinism</span></span>  
 <span data-ttu-id="41003-112">Non è possibile influenzare la proprietà deterministica di alcuna funzione predefinita.</span><span class="sxs-lookup"><span data-stu-id="41003-112">You cannot influence the determinism of any built-in function.</span></span> <span data-ttu-id="41003-113">Ogni funzione predefinita è deterministica o non deterministica in base al modo in cui viene implementata da [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="41003-113">Each built-in function is deterministic or nondeterministic based on how the function is implemented by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="41003-114">Ad esempio, la specifica di una clausola ORDER BY in una query non comporta la modifica del determinismo di una funzione utilizzata nella query in questione.</span><span class="sxs-lookup"><span data-stu-id="41003-114">For example, specifying an ORDER BY clause in a query does not change the determinism of a function that used in that query.</span></span>  
  
 <span data-ttu-id="41003-115">Tutte le funzioni per i valori stringa predefinite sono deterministiche.</span><span class="sxs-lookup"><span data-stu-id="41003-115">All of the string built-in functions are deterministic.</span></span> <span data-ttu-id="41003-116">Per un elenco di queste funzioni, vedere [Funzioni per i valori stringa &#40;Transact-SQL&#41;](/sql/t-sql/functions/string-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="41003-116">For a list of these functions, see [String Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/string-functions-transact-sql).</span></span>  
  
 <span data-ttu-id="41003-117">Le funzioni riportate di seguito, appartenenti alle categorie di funzioni predefinite diverse da quelle per i valori stringa, sono sempre deterministiche.</span><span class="sxs-lookup"><span data-stu-id="41003-117">The following built-in functions from categories of built-in functions other than string functions are always deterministic.</span></span>  
  
||||  
|-|-|-|  
|<span data-ttu-id="41003-118">ABS</span><span class="sxs-lookup"><span data-stu-id="41003-118">ABS</span></span>|<span data-ttu-id="41003-119">DATEDIFF</span><span class="sxs-lookup"><span data-stu-id="41003-119">DATEDIFF</span></span>|<span data-ttu-id="41003-120">POWER</span><span class="sxs-lookup"><span data-stu-id="41003-120">POWER</span></span>|  
|<span data-ttu-id="41003-121">ACOS</span><span class="sxs-lookup"><span data-stu-id="41003-121">ACOS</span></span>|<span data-ttu-id="41003-122">DAY</span><span class="sxs-lookup"><span data-stu-id="41003-122">DAY</span></span>|<span data-ttu-id="41003-123">RADIANS</span><span class="sxs-lookup"><span data-stu-id="41003-123">RADIANS</span></span>|  
|<span data-ttu-id="41003-124">ASIN</span><span class="sxs-lookup"><span data-stu-id="41003-124">ASIN</span></span>|<span data-ttu-id="41003-125">DEGREES</span><span class="sxs-lookup"><span data-stu-id="41003-125">DEGREES</span></span>|<span data-ttu-id="41003-126">ROUND</span><span class="sxs-lookup"><span data-stu-id="41003-126">ROUND</span></span>|  
|<span data-ttu-id="41003-127">ATAN</span><span class="sxs-lookup"><span data-stu-id="41003-127">ATAN</span></span>|<span data-ttu-id="41003-128">EXP</span><span class="sxs-lookup"><span data-stu-id="41003-128">EXP</span></span>|<span data-ttu-id="41003-129">SIGN</span><span class="sxs-lookup"><span data-stu-id="41003-129">SIGN</span></span>|  
|<span data-ttu-id="41003-130">ATN2</span><span class="sxs-lookup"><span data-stu-id="41003-130">ATN2</span></span>|<span data-ttu-id="41003-131">FLOOR</span><span class="sxs-lookup"><span data-stu-id="41003-131">FLOOR</span></span>|<span data-ttu-id="41003-132">SIN</span><span class="sxs-lookup"><span data-stu-id="41003-132">SIN</span></span>|  
|<span data-ttu-id="41003-133">CEILING</span><span class="sxs-lookup"><span data-stu-id="41003-133">CEILING</span></span>|<span data-ttu-id="41003-134">ISNULL</span><span class="sxs-lookup"><span data-stu-id="41003-134">ISNULL</span></span>|<span data-ttu-id="41003-135">SQUARE</span><span class="sxs-lookup"><span data-stu-id="41003-135">SQUARE</span></span>|  
|<span data-ttu-id="41003-136">COALESCE</span><span class="sxs-lookup"><span data-stu-id="41003-136">COALESCE</span></span>|<span data-ttu-id="41003-137">ISNUMERIC</span><span class="sxs-lookup"><span data-stu-id="41003-137">ISNUMERIC</span></span>|<span data-ttu-id="41003-138">SQRT</span><span class="sxs-lookup"><span data-stu-id="41003-138">SQRT</span></span>|  
|<span data-ttu-id="41003-139">COS</span><span class="sxs-lookup"><span data-stu-id="41003-139">COS</span></span>|<span data-ttu-id="41003-140">LOG</span><span class="sxs-lookup"><span data-stu-id="41003-140">LOG</span></span>|<span data-ttu-id="41003-141">TAN</span><span class="sxs-lookup"><span data-stu-id="41003-141">TAN</span></span>|  
|<span data-ttu-id="41003-142">COT</span><span class="sxs-lookup"><span data-stu-id="41003-142">COT</span></span>|<span data-ttu-id="41003-143">LOG10</span><span class="sxs-lookup"><span data-stu-id="41003-143">LOG10</span></span>|<span data-ttu-id="41003-144">YEAR</span><span class="sxs-lookup"><span data-stu-id="41003-144">YEAR</span></span>|  
|<span data-ttu-id="41003-145">DATALENGTH</span><span class="sxs-lookup"><span data-stu-id="41003-145">DATALENGTH</span></span>|<span data-ttu-id="41003-146">MONTH</span><span class="sxs-lookup"><span data-stu-id="41003-146">MONTH</span></span>||  
|<span data-ttu-id="41003-147">DATEADD</span><span class="sxs-lookup"><span data-stu-id="41003-147">DATEADD</span></span>|<span data-ttu-id="41003-148">NULLIF</span><span class="sxs-lookup"><span data-stu-id="41003-148">NULLIF</span></span>||  
  
 <span data-ttu-id="41003-149">Le funzioni elencate di seguito non sono sempre deterministiche, ma possono essere utilizzate in viste indicizzate o indici in colonne calcolate quando vengono specificate in modo deterministico.</span><span class="sxs-lookup"><span data-stu-id="41003-149">The following functions are not always deterministic, but can be used in indexed views or indexes on computed columns when they are specified in a deterministic manner.</span></span>  
  
|<span data-ttu-id="41003-150">Funzione</span><span class="sxs-lookup"><span data-stu-id="41003-150">Function</span></span>|<span data-ttu-id="41003-151">Commenti</span><span class="sxs-lookup"><span data-stu-id="41003-151">Comments</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="41003-152">Tutte le funzioni di aggregazione</span><span class="sxs-lookup"><span data-stu-id="41003-152">all aggregate functions</span></span>|<span data-ttu-id="41003-153">Tutte le funzioni di aggregazione sono deterministiche a meno che non vengano specificate con le clausole OVER e ORDER BY.</span><span class="sxs-lookup"><span data-stu-id="41003-153">All aggregate functions are deterministic unless they are specified with the OVER and ORDER BY clauses.</span></span> <span data-ttu-id="41003-154">Per un elenco di queste funzioni, vedere [Funzioni di aggregazione &#40;Transact-SQL&#41;](/sql/t-sql/functions/aggregate-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="41003-154">For a list of these functions, see [Aggregate Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/aggregate-functions-transact-sql).</span></span>|  
|<span data-ttu-id="41003-155">CAST</span><span class="sxs-lookup"><span data-stu-id="41003-155">CAST</span></span>|<span data-ttu-id="41003-156">Deterministica a meno che non venga utilizzata con `datetime`, `smalldatetime` o `sql_variant`.</span><span class="sxs-lookup"><span data-stu-id="41003-156">Deterministic unless used with `datetime`, `smalldatetime`, or `sql_variant`.</span></span>|  
|<span data-ttu-id="41003-157">CONVERT</span><span class="sxs-lookup"><span data-stu-id="41003-157">CONVERT</span></span>|<span data-ttu-id="41003-158">Deterministica a meno che non si verifichi una delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="41003-158">Deterministic unless one of these conditions exists:</span></span><br /><br /> <span data-ttu-id="41003-159">Il tipo di origine è `sql_variant`.</span><span class="sxs-lookup"><span data-stu-id="41003-159">Source type is `sql_variant`.</span></span><br /><br /> <span data-ttu-id="41003-160">Il tipo di destinazione è `sql_variant` e il relativo tipo di origine è non deterministico.</span><span class="sxs-lookup"><span data-stu-id="41003-160">Target type is `sql_variant` and its source type is nondeterministic.</span></span><br /><br /> <span data-ttu-id="41003-161">Il tipo di origine o di destinazione è `datetime` o `smalldatetime`, l'altro tipo di origine o di destinazione è una stringa di caratteri. Inoltre è specificato uno stile non deterministico.</span><span class="sxs-lookup"><span data-stu-id="41003-161">Source or target type is `datetime` or `smalldatetime`, the other source or target type is a character string, and a nondeterministic style is specified.</span></span> <span data-ttu-id="41003-162">Per essere deterministico, il parametro di stile deve essere una costante.</span><span class="sxs-lookup"><span data-stu-id="41003-162">To be deterministic, the style parameter must be a constant.</span></span> <span data-ttu-id="41003-163">Gli stili minori o uguali a 100 sono non deterministici, ad eccezione degli stili 20 e 21.</span><span class="sxs-lookup"><span data-stu-id="41003-163">Additionally, styles less than or equal to 100 are nondeterministic, except for styles 20 and 21.</span></span> <span data-ttu-id="41003-164">Gli stili maggiori di 100 sono deterministici, ad eccezione degli stili 106, 107, 109 e 113.</span><span class="sxs-lookup"><span data-stu-id="41003-164">Styles greater than 100 are deterministic, except for styles 106, 107, 109 and 113.</span></span>|  
|<span data-ttu-id="41003-165">CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="41003-165">CHECKSUM</span></span>|<span data-ttu-id="41003-166">Deterministica, ad eccezione di CHECKSUM(\*).</span><span class="sxs-lookup"><span data-stu-id="41003-166">Deterministic, with the exception of CHECKSUM(\*).</span></span>|  
|<span data-ttu-id="41003-167">ISDATE</span><span class="sxs-lookup"><span data-stu-id="41003-167">ISDATE</span></span>|<span data-ttu-id="41003-168">Deterministica solo se utilizzata con la funzione CONVERT, se è specificato il parametro di stile CONVERT e se lo stile non equivale a 0, 100, 9 o 109.</span><span class="sxs-lookup"><span data-stu-id="41003-168">Deterministic only if used with the CONVERT function, the CONVERT style parameter is specified and style is not equal to 0, 100, 9, or 109.</span></span>|  
|<span data-ttu-id="41003-169">RAND</span><span class="sxs-lookup"><span data-stu-id="41003-169">RAND</span></span>|<span data-ttu-id="41003-170">RAND risulta deterministica solo quando si specifica un parametro per il *valore di inizializzazione* .</span><span class="sxs-lookup"><span data-stu-id="41003-170">RAND is deterministic only when a *seed* parameter is specified.</span></span>|  
  
 <span data-ttu-id="41003-171">Tutte le funzioni statistiche di sistema, di configurazione, per i cursori, per i metadati e di sicurezza sono di tipo non deterministico.</span><span class="sxs-lookup"><span data-stu-id="41003-171">All the configuration, cursor, metadata, security, and system statistical functions are nondeterministic.</span></span> <span data-ttu-id="41003-172">Per un elenco di queste funzioni, vedere [Funzioni di configurazione &#40;Transact-SQL&#41;](/sql/t-sql/functions/configuration-functions-transact-sql), [Funzioni per i cursori &#40;Transact-SQL&#41;](/sql/t-sql/functions/cursor-functions-transact-sql), [Funzioni per i metadati &#40;Transact-SQL&#41;](/sql/t-sql/functions/metadata-functions-transact-sql), [Funzioni di sicurezza &#40;Transact-SQL&#41;](/sql/t-sql/functions/security-functions-transact-sql) e [Funzioni statistiche di sistema &#40;Transact-SQL&#41;](/sql/t-sql/functions/system-statistical-functions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="41003-172">For a list of these functions, see [Configuration Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/configuration-functions-transact-sql), [Cursor Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/cursor-functions-transact-sql), [Metadata Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/metadata-functions-transact-sql), [Security Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/security-functions-transact-sql), and [System Statistical Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/system-statistical-functions-transact-sql).</span></span>  
  
 <span data-ttu-id="41003-173">Di seguito sono elencate le funzioni predefinite di altre categorie che sono sempre non deterministiche.</span><span class="sxs-lookup"><span data-stu-id="41003-173">The following built-in functions from other categories are always nondeterministic.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="41003-174">@@CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="41003-174">@@CONNECTIONS</span></span>|<span data-ttu-id="41003-175">GETDATE</span><span class="sxs-lookup"><span data-stu-id="41003-175">GETDATE</span></span>|  
|<span data-ttu-id="41003-176">@@CPU_BUSY</span><span class="sxs-lookup"><span data-stu-id="41003-176">@@CPU_BUSY</span></span>|<span data-ttu-id="41003-177">GETUTCDATE</span><span class="sxs-lookup"><span data-stu-id="41003-177">GETUTCDATE</span></span>|  
|<span data-ttu-id="41003-178">@@DBTS</span><span class="sxs-lookup"><span data-stu-id="41003-178">@@DBTS</span></span>|<span data-ttu-id="41003-179">GET_TRANSMISSION_STATUS</span><span class="sxs-lookup"><span data-stu-id="41003-179">GET_TRANSMISSION_STATUS</span></span>|  
|<span data-ttu-id="41003-180">@@IDLE</span><span class="sxs-lookup"><span data-stu-id="41003-180">@@IDLE</span></span>|<span data-ttu-id="41003-181">LAG</span><span class="sxs-lookup"><span data-stu-id="41003-181">LAG</span></span>|  
|<span data-ttu-id="41003-182">@@IO_BUSY</span><span class="sxs-lookup"><span data-stu-id="41003-182">@@IO_BUSY</span></span>|<span data-ttu-id="41003-183">LAST_VALUE</span><span class="sxs-lookup"><span data-stu-id="41003-183">LAST_VALUE</span></span>|  
|<span data-ttu-id="41003-184">@@MAX_CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="41003-184">@@MAX_CONNECTIONS</span></span>|<span data-ttu-id="41003-185">LEAD</span><span class="sxs-lookup"><span data-stu-id="41003-185">LEAD</span></span>|  
|<span data-ttu-id="41003-186">@@PACK_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="41003-186">@@PACK_RECEIVED</span></span>|<span data-ttu-id="41003-187">MIN_ACTIVE_ROWVERSION</span><span class="sxs-lookup"><span data-stu-id="41003-187">MIN_ACTIVE_ROWVERSION</span></span>|  
|<span data-ttu-id="41003-188">@@PACK_SENT</span><span class="sxs-lookup"><span data-stu-id="41003-188">@@PACK_SENT</span></span>|<span data-ttu-id="41003-189">NEWID</span><span class="sxs-lookup"><span data-stu-id="41003-189">NEWID</span></span>|  
|<span data-ttu-id="41003-190">@@PACKET_ERRORS</span><span class="sxs-lookup"><span data-stu-id="41003-190">@@PACKET_ERRORS</span></span>|<span data-ttu-id="41003-191">NEWSEQUENTIALID</span><span class="sxs-lookup"><span data-stu-id="41003-191">NEWSEQUENTIALID</span></span>|  
|<span data-ttu-id="41003-192">@@TIMETICKS</span><span class="sxs-lookup"><span data-stu-id="41003-192">@@TIMETICKS</span></span>|<span data-ttu-id="41003-193">NEXT VALUE FOR</span><span class="sxs-lookup"><span data-stu-id="41003-193">NEXT VALUE FOR</span></span>|  
|<span data-ttu-id="41003-194">@@TOTAL_ERRORS</span><span class="sxs-lookup"><span data-stu-id="41003-194">@@TOTAL_ERRORS</span></span>|<span data-ttu-id="41003-195">NTILE</span><span class="sxs-lookup"><span data-stu-id="41003-195">NTILE</span></span>|  
|<span data-ttu-id="41003-196">@@TOTAL_READ</span><span class="sxs-lookup"><span data-stu-id="41003-196">@@TOTAL_READ</span></span>|<span data-ttu-id="41003-197">PARSENAME</span><span class="sxs-lookup"><span data-stu-id="41003-197">PARSENAME</span></span>|  
|<span data-ttu-id="41003-198">@@TOTAL_WRITE</span><span class="sxs-lookup"><span data-stu-id="41003-198">@@TOTAL_WRITE</span></span>|<span data-ttu-id="41003-199">PERCENTILE_CONT</span><span class="sxs-lookup"><span data-stu-id="41003-199">PERCENTILE_CONT</span></span>|  
|<span data-ttu-id="41003-200">CUME_DIST</span><span class="sxs-lookup"><span data-stu-id="41003-200">CUME_DIST</span></span>|<span data-ttu-id="41003-201">PERCENTILE_DISC</span><span class="sxs-lookup"><span data-stu-id="41003-201">PERCENTILE_DISC</span></span>|  
|<span data-ttu-id="41003-202">CURRENT_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="41003-202">CURRENT_TIMESTAMP</span></span>|<span data-ttu-id="41003-203">PERCENT_RANK</span><span class="sxs-lookup"><span data-stu-id="41003-203">PERCENT_RANK</span></span>|  
|<span data-ttu-id="41003-204">DENSE_RANK</span><span class="sxs-lookup"><span data-stu-id="41003-204">DENSE_RANK</span></span>|<span data-ttu-id="41003-205">RAND</span><span class="sxs-lookup"><span data-stu-id="41003-205">RAND</span></span>|  
|<span data-ttu-id="41003-206">FIRST_VALUE</span><span class="sxs-lookup"><span data-stu-id="41003-206">FIRST_VALUE</span></span>|<span data-ttu-id="41003-207">RANK</span><span class="sxs-lookup"><span data-stu-id="41003-207">RANK</span></span>|  
||<span data-ttu-id="41003-208">ROW_NUMBER</span><span class="sxs-lookup"><span data-stu-id="41003-208">ROW_NUMBER</span></span>|  
||<span data-ttu-id="41003-209">TEXTPTR</span><span class="sxs-lookup"><span data-stu-id="41003-209">TEXTPTR</span></span>|  
  
## <a name="calling-extended-stored-procedures-from-functions"></a><span data-ttu-id="41003-210">Chiamata di stored procedure estese da funzioni</span><span class="sxs-lookup"><span data-stu-id="41003-210">Calling Extended Stored Procedures from Functions</span></span>  
 <span data-ttu-id="41003-211">Le funzioni che chiamano stored procedure estese sono non deterministiche, in quanto le stored procedure estese possono avere effetti collaterali sul database,</span><span class="sxs-lookup"><span data-stu-id="41003-211">Functions that call extended stored procedures are nondeterministic, because the extended stored procedures can cause side effects on the database.</span></span> <span data-ttu-id="41003-212">ovvero possono comportare modifiche di uno stato globale del database, quale un aggiornamento di una tabella o di una risorsa esterna, come un file o la rete, tramite, ad esempio, la modifica di un file o l'invio di un messaggio di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="41003-212">Side effects are changes to a global state of the database, such as an update to a table, or to an external resource, such as a file or the network; for example, modifying a file or sending an e-mail message.</span></span> <span data-ttu-id="41003-213">Quando si esegue una stored procedure estesa da una funzione definita dall'utente, il set di risultati restituito potrebbe non essere coerente.</span><span class="sxs-lookup"><span data-stu-id="41003-213">You should not rely on returning a consistent result set when executing an extended stored procedure from a user-defined function.</span></span> <span data-ttu-id="41003-214">Le funzioni definite dall'utente che creano effetti collaterali sul database non sono consigliate.</span><span class="sxs-lookup"><span data-stu-id="41003-214">User-defined functions that create side effects on the database are not recommended.</span></span>  
  
 <span data-ttu-id="41003-215">Quando viene chiamata dall'interno di una funzione, una stored procedure estesa non può restituire set di risultati al client.</span><span class="sxs-lookup"><span data-stu-id="41003-215">When called from inside a function, the extended stored procedure cannot return result sets to the client.</span></span> <span data-ttu-id="41003-216">Qualsiasi API ODS che restituisca set di risultati al client restituirà il codice FAIL.</span><span class="sxs-lookup"><span data-stu-id="41003-216">Any Open Data Services API that returns result sets to the client will have a return code of FAIL.</span></span>  
  
 <span data-ttu-id="41003-217">La stored procedure estesa può connettersi nuovamente a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="41003-217">The extended stored procedure can connect back to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="41003-218">Tuttavia, la procedura non può unire in join la stessa transazione della funzione originale che ha richiamato la stored procedure estesa.</span><span class="sxs-lookup"><span data-stu-id="41003-218">However, the procedure cannot join the same transaction as the original function that invoked the extended stored procedure.</span></span>  
  
 <span data-ttu-id="41003-219">In modo analogo a una chiamata da un batch o da una stored procedure, la stored procedure estesa viene eseguita nel contesto dell'account di sicurezza di [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows in cui è in esecuzione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="41003-219">Similar to invocations from a batch or stored procedure, the extended stored procedure is executed in the context of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows security account under which [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="41003-220">Questo aspetto deve essere tenuto presente dal proprietario della stored procedure estesa quando vengono concesse ad altri utenti le autorizzazioni per eseguire la procedura.</span><span class="sxs-lookup"><span data-stu-id="41003-220">The owner of the extended stored procedure should consider this when granting permissions to other users to execute the procedure.</span></span>  
  
  
