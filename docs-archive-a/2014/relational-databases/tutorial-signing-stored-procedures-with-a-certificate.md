---
title: 'Esercitazione: Firma di stored procedure con un certificato | Microsoft Docs'
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- signing stored procedures tutorial [SQL Server]
ms.assetid: a4b0f23b-bdc8-425f-b0b9-e0621894f47e
author: rothja
ms.author: jroth
ms.openlocfilehash: 6fe387c43431436ba5fba5bcab879584ecdad533
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87637718"
---
# <a name="tutorial-signing-stored-procedures-with-a-certificate"></a><span data-ttu-id="c626c-102">Esercitazione: Firma di stored procedure tramite un certificato</span><span class="sxs-lookup"><span data-stu-id="c626c-102">Tutorial: Signing Stored Procedures with a Certificate</span></span>
  <span data-ttu-id="c626c-103">In questa esercitazione viene illustrata la firma di stored procedure tramite un certificato generato da [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c626c-103">This tutorial illustrates signing stored procedures using a certificate generated by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c626c-104">Per eseguire il codice dell'esercitazione deve essere configurata la sicurezza a modalità mista e deve essere installato il database [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c626c-104">To run the code in this tutorial you must have both Mixed Mode security configured and the [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] database installed.</span></span> <span data-ttu-id="c626c-105">Scenario</span><span class="sxs-lookup"><span data-stu-id="c626c-105">Scenario</span></span>  
  
 <span data-ttu-id="c626c-106">La firma di stored procedure tramite un certificato si rivela utile quando si desidera richiedere autorizzazioni per la stored procedure ma non concedere esplicitamente tali diritti all'utente.</span><span class="sxs-lookup"><span data-stu-id="c626c-106">Signing stored procedures using a certificate is useful when you want to require permissions on the stored procedure but you do not want to explicitly grant a user those rights.</span></span> <span data-ttu-id="c626c-107">Nonostante sia possibile completare questa attività in altri modi, ad esempio mediante l'istruzione EXECUTE AS, l'utilizzo di un certificato consente di disporre di una traccia per individuare il chiamante originale della stored procedure.</span><span class="sxs-lookup"><span data-stu-id="c626c-107">Although you can accomplish this task in other ways, such as using the EXECUTE AS statement, using a certificate allows you to use a trace to find the original caller of the stored procedure.</span></span> <span data-ttu-id="c626c-108">Ciò offre un elevato livello di controllo, in particolare durante operazioni DDL (Data Definition Language) o di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="c626c-108">This provides a high level of auditing, especially during security or Data Definition Language (DDL) operations.</span></span>  
  
 <span data-ttu-id="c626c-109">È possibile creare un certificato nel database master per concedere autorizzazioni a livello di server oppure in qualsiasi database utente per concedere autorizzazioni a livello di database.</span><span class="sxs-lookup"><span data-stu-id="c626c-109">You can create a certificate in the master database to allow server-level permissions, or you can create a certificate in any user databases to allow database-level permissions.</span></span> <span data-ttu-id="c626c-110">In questo scenario, un utente che non dispone di diritti per le tabelle di base deve accedere a una stored procedure nel database [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] e si desidera controllare l'itinerario di accesso agli oggetti.</span><span class="sxs-lookup"><span data-stu-id="c626c-110">In this scenario, a user with no rights to base tables must access a stored procedure in the [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] database, and you want to audit the object access trail.</span></span> <span data-ttu-id="c626c-111">Anziché utilizzare altri metodi delle catene di proprietà, verranno creati un account utente del server e del database senza alcun diritto per gli oggetti di base e un account utente del database con diritti per una tabella e una stored procedure.</span><span class="sxs-lookup"><span data-stu-id="c626c-111">Rather than using other ownership chain methods, you will create a server and database user account with no rights to the base objects, and a database user account with rights to a table and a stored procedure.</span></span> <span data-ttu-id="c626c-112">Sia la stored procedure che il secondo account utente del database verranno protetti con un certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-112">Both the stored procedure and the second database user account will be secured with a certificate.</span></span> <span data-ttu-id="c626c-113">Il secondo account del database disporrà dell'accesso a tutti gli oggetti e concederà l'accesso alla stored procedure al primo account utente del database.</span><span class="sxs-lookup"><span data-stu-id="c626c-113">The second database account will have access to all objects, and grant access to the stored procedure to the first database user account.</span></span>  
  
 <span data-ttu-id="c626c-114">In questo scenario, verranno innanzitutto creati un certificato del database, una stored procedure e un utente e quindi verrà testato il processo eseguendo la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="c626c-114">In this scenario you will first create a database certificate, a stored procedure, and a user, and then you will test the process following these steps:</span></span>  
  
1.  <span data-ttu-id="c626c-115">Configurare l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="c626c-115">Configure the environment.</span></span>  
  
2.  <span data-ttu-id="c626c-116">Creare un certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-116">Create a certificate.</span></span>  
  
3.  <span data-ttu-id="c626c-117">Creare e firmare una stored procedure utilizzando il certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-117">Create and sign a stored procedure using the certificate.</span></span>  
  
4.  <span data-ttu-id="c626c-118">Creare un account del certificato utilizzando il certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-118">Create a certificate account using the certificate.</span></span>  
  
5.  <span data-ttu-id="c626c-119">Concedere i diritti per il database dell'account del certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-119">Grant the certificate account database rights.</span></span>  
  
6.  <span data-ttu-id="c626c-120">Visualizzare il contesto di accesso.</span><span class="sxs-lookup"><span data-stu-id="c626c-120">Display the access context.</span></span>  
  
7.  <span data-ttu-id="c626c-121">Reimpostare l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="c626c-121">Reset the environment.</span></span>  
  
 <span data-ttu-id="c626c-122">Ogni blocco di codice dell'esempio è illustrato sulla stessa riga.</span><span class="sxs-lookup"><span data-stu-id="c626c-122">Each code block in this example is explained in line.</span></span> <span data-ttu-id="c626c-123">Per copiare l'esempio completo, vedere [Esempio completo](#CompleteExample) alla fine dell'esercitazione.</span><span class="sxs-lookup"><span data-stu-id="c626c-123">To copy the complete example, see [Complete Example](#CompleteExample) at the end of this tutorial.</span></span>  
  
## <a name="1-configure-the-environment"></a><span data-ttu-id="c626c-124">1. Configurazione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="c626c-124">1. Configure the Environment</span></span>  
 <span data-ttu-id="c626c-125">Per impostare il contesto iniziale dell'esempio, in [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] aprire una nuova query ed eseguire il codice seguente per aprire il database [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c626c-125">To set the initial context of the example, in [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] open a new Query and run the following code to open the [!INCLUDE[ssSampleDBobject](../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="c626c-126">Con questo codice, il contesto di database viene modificato in `AdventureWorks2012` e viene creato un nuovo account di accesso al server e utente del database (`TestCreditRatingUser`) con una password.</span><span class="sxs-lookup"><span data-stu-id="c626c-126">This code changes the database context to `AdventureWorks2012` and creates a new server login and database user account (`TestCreditRatingUser`), using a password.</span></span>  
  
```  
USE AdventureWorks2012;  
GO  
-- Set up a login for the test user  
CREATE LOGIN TestCreditRatingUser  
   WITH PASSWORD = 'ASDECd2439587y'  
GO  
CREATE USER TestCreditRatingUser  
FOR LOGIN TestCreditRatingUser;  
GO  
```  
  
 <span data-ttu-id="c626c-127">Per altre informazioni sull'istruzione CREATE USER, vedere [CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-127">For more information on the CREATE USER statement, see [CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql).</span></span> <span data-ttu-id="c626c-128">Per altre informazioni sull'istruzione CREATE LOGIN, vedere [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-128">For more information on the CREATE LOGIN statement, see [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span></span>  
  
## <a name="2-create-a-certificate"></a><span data-ttu-id="c626c-129">2. Creazione di un certificato</span><span class="sxs-lookup"><span data-stu-id="c626c-129">2. Create a Certificate</span></span>  
 <span data-ttu-id="c626c-130">È possibile creare certificati nel server utilizzando il database master come contesto, un database utente o entrambi.</span><span class="sxs-lookup"><span data-stu-id="c626c-130">You can create certificates in the server using the master database as the context, using a user database, or both.</span></span> <span data-ttu-id="c626c-131">Per la sicurezza del certificato sono disponibili più opzioni.</span><span class="sxs-lookup"><span data-stu-id="c626c-131">There are multiple options for securing the certificate.</span></span> <span data-ttu-id="c626c-132">Per altre informazioni sui certificati, vedere [CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-132">For more information on certificates, see [CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql).</span></span>  
  
 <span data-ttu-id="c626c-133">Eseguire questo codice per creare un certificato del database e proteggerlo tramite una password.</span><span class="sxs-lookup"><span data-stu-id="c626c-133">Run this code to create a database certificate and secure it using a password.</span></span>  
  
```  
CREATE CERTIFICATE TestCreditRatingCer  
   ENCRYPTION BY PASSWORD = 'pGFD4bb925DGvbd2439587y'  
      WITH SUBJECT = 'Credit Rating Records Access',   
      EXPIRY_DATE = '12/05/2014';  
GO  
```  
  
## <a name="3-create-and-sign-a-stored-procedure-using-the-certificate"></a><span data-ttu-id="c626c-134">3. Creazione e firma di una stored procedure utilizzando il certificato</span><span class="sxs-lookup"><span data-stu-id="c626c-134">3. Create and Sign a Stored Procedure Using the Certificate</span></span>  
 <span data-ttu-id="c626c-135">Utilizzare il codice seguente per creare una stored procedure che selezioni i dati dalla tabella `Vendor` nello schema di database `Purchasing` , limitando l'accesso alle sole aziende con posizione creditizia 1.</span><span class="sxs-lookup"><span data-stu-id="c626c-135">Use the following code to create a stored procedure that selects data from the `Vendor` table in the `Purchasing` database schema, restricting access to only the companies with a credit rating of 1.</span></span> <span data-ttu-id="c626c-136">Si noti che nella prima sezione della stored procedure viene visualizzato il contesto dell'account utente che esegue la stored procedure, al solo scopo di dimostrare i concetti.</span><span class="sxs-lookup"><span data-stu-id="c626c-136">Note that the first section of the stored procedure displays the context of the user account running the stored procedure, which is to demonstrate the concepts only.</span></span> <span data-ttu-id="c626c-137">Non è necessario per soddisfare i requisiti.</span><span class="sxs-lookup"><span data-stu-id="c626c-137">It is not required to satisfy the requirements.</span></span>  
  
```  
CREATE PROCEDURE TestCreditRatingSP  
AS  
BEGIN  
   -- Show who is running the stored procedure  
   SELECT SYSTEM_USER 'system Login'  
   , USER AS 'Database Login'  
   , NAME AS 'Context'  
   , TYPE  
   , USAGE   
   FROM sys.user_token     
  
   -- Now get the data  
   SELECT AccountNumber, Name, CreditRating   
   FROM Purchasing.Vendor  
   WHERE CreditRating = 1  
END  
GO  
```  
  
 <span data-ttu-id="c626c-138">Eseguire questo codice per firmare la stored procedure con il certificato del database, utilizzando una password.</span><span class="sxs-lookup"><span data-stu-id="c626c-138">Run this code to sign the stored procedure with the database certificate, using a password.</span></span>  
  
```  
ADD SIGNATURE TO TestCreditRatingSP   
   BY CERTIFICATE TestCreditRatingCer  
    WITH PASSWORD = 'pGFD4bb925DGvbd2439587y';  
GO  
```  
  
 <span data-ttu-id="c626c-139">Per altre informazioni sulle stored procedure, vedere [Stored procedure &#40;motore di database&#41;](stored-procedures/stored-procedures-database-engine.md).</span><span class="sxs-lookup"><span data-stu-id="c626c-139">For more information on stored procedures, see [Stored Procedures &#40;Database Engine&#41;](stored-procedures/stored-procedures-database-engine.md).</span></span>  
  
 <span data-ttu-id="c626c-140">Per altre informazioni sulla firma di stored procedure, vedere [ADD SIGNATURE &#40;Transact-SQL&#41;](/sql/t-sql/statements/add-signature-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-140">For more information on signing stored procedures, see [ADD SIGNATURE &#40;Transact-SQL&#41;](/sql/t-sql/statements/add-signature-transact-sql).</span></span>  
  
## <a name="4-create-a-certificate-account-using-the-certificate"></a><span data-ttu-id="c626c-141">4. Creazione di un account del certificato utilizzando il certificato</span><span class="sxs-lookup"><span data-stu-id="c626c-141">4. Create a Certificate Account Using the Certificate</span></span>  
 <span data-ttu-id="c626c-142">Eseguire questo codice per creare un utente del database (`TestCreditRatingcertificateAccount`) dal certificato.</span><span class="sxs-lookup"><span data-stu-id="c626c-142">Run this code to create a database user (`TestCreditRatingcertificateAccount`) from the certificate.</span></span> <span data-ttu-id="c626c-143">Tale account non dispone di accesso server e controllerà l'accesso alle tabelle sottostanti.</span><span class="sxs-lookup"><span data-stu-id="c626c-143">This account has no server login, and will ultimately control access to the underlying tables.</span></span>  
  
```  
USE AdventureWorks2012;  
GO  
CREATE USER TestCreditRatingcertificateAccount  
   FROM CERTIFICATE TestCreditRatingCer;  
GO  
```  
  
## <a name="5-grant-the-certificate-account-database-rights"></a><span data-ttu-id="c626c-144">5. Concessione dei diritti per il database dell'account del certificato</span><span class="sxs-lookup"><span data-stu-id="c626c-144">5. Grant the Certificate Account Database Rights</span></span>  
 <span data-ttu-id="c626c-145">Eseguire questo codice per concedere a `TestCreditRatingcertificateAccount` diritti per la tabella di base e la stored procedure.</span><span class="sxs-lookup"><span data-stu-id="c626c-145">Run this code to grant `TestCreditRatingcertificateAccount` rights to the base table and the stored procedure.</span></span>  
  
```  
GRANT SELECT   
   ON Purchasing.Vendor   
   TO TestCreditRatingcertificateAccount;  
GO  
  
GRANT EXECUTE   
   ON TestCreditRatingSP   
   TO TestCreditRatingcertificateAccount;  
GO  
```  
  
 <span data-ttu-id="c626c-146">Per altre informazioni sulla concessione di autorizzazioni per gli oggetti, vedere [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-146">For more information on granting permissions to objects, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
## <a name="6-display-the-access-context"></a><span data-ttu-id="c626c-147">6. Visualizzazione del contesto di accesso</span><span class="sxs-lookup"><span data-stu-id="c626c-147">6. Display the Access Context</span></span>  
 <span data-ttu-id="c626c-148">Per visualizzare i diritti associati all'accesso alla stored procedure, eseguire il codice seguente per concedere i diritti per l'esecuzione della stored procedure all'utente `TestCreditRatingUser` .</span><span class="sxs-lookup"><span data-stu-id="c626c-148">To display the rights associated with the stored procedure access, run the following code to grant the rights to run the stored procedure to the `TestCreditRatingUser` user.</span></span>  
  
```  
GRANT EXECUTE   
   ON TestCreditRatingSP   
   TO TestCreditRatingUser;  
GO  
```  
  
 <span data-ttu-id="c626c-149">Eseguire quindi il codice seguente per eseguire la stored procedure con l'account di accesso dbo utilizzato nel server.</span><span class="sxs-lookup"><span data-stu-id="c626c-149">Next, run the following code to run the stored procedure as the dbo login you used on the server.</span></span> <span data-ttu-id="c626c-150">Osservare l'output delle informazioni sul contesto utente.</span><span class="sxs-lookup"><span data-stu-id="c626c-150">Observe the output of the user context information.</span></span> <span data-ttu-id="c626c-151">L'account dbo verrà riportato come contesto con diritti propri e non tramite l'appartenenza a un gruppo.</span><span class="sxs-lookup"><span data-stu-id="c626c-151">It will show the dbo account as the context with its own rights and not through a group membership.</span></span>  
  
```  
EXECUTE TestCreditRatingSP;  
GO  
```  
  
 <span data-ttu-id="c626c-152">Eseguire il codice seguente per utilizzare l'istruzione `EXECUTE AS` per eseguire la stored procedure tramite l'account `TestCreditRatingUser`</span><span class="sxs-lookup"><span data-stu-id="c626c-152">Run the following code to use the `EXECUTE AS` statement to become the `TestCreditRatingUser` account and run the stored procedure.</span></span> <span data-ttu-id="c626c-153">In questo caso, il contesto utente sarà impostato sul contesto USER MAPPED TO CERTIFICATE.</span><span class="sxs-lookup"><span data-stu-id="c626c-153">This time you will see the user context is set to the USER MAPPED TO CERTIFICATE context.</span></span>  
  
```  
EXECUTE AS LOGIN = 'TestCreditRatingUser';  
GO  
EXECUTE TestCreditRatingSP;  
GO  
```  
  
 <span data-ttu-id="c626c-154">Ciò illustra il livello di controllo disponibile grazie alla firma della stored procedure.</span><span class="sxs-lookup"><span data-stu-id="c626c-154">This shows you the auditing available because you signed the stored procedure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c626c-155">Usare EXECUTE AS per cambiare contesto all'interno di un database.</span><span class="sxs-lookup"><span data-stu-id="c626c-155">Use EXECUTE AS to switch contexts within a database.</span></span>  
  
## <a name="7-reset-the-environment"></a><span data-ttu-id="c626c-156">7. Reimpostazione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="c626c-156">7. Reset the Environment</span></span>  
 <span data-ttu-id="c626c-157">Nel codice seguente viene utilizzata l'istruzione `REVERT` per ripristinare dbo come contesto dell'account corrente e quindi viene reimpostato l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="c626c-157">The following code uses the `REVERT` statement to return the context of the current account to dbo, and resets the environment.</span></span>  
  
```  
REVERT;  
GO  
DROP PROCEDURE TestCreditRatingSP;  
GO  
DROP USER TestCreditRatingcertificateAccount;  
GO  
DROP USER TestCreditRatingUser;  
GO  
DROP LOGIN TestCreditRatingUser;  
GO  
DROP CERTIFICATE TestCreditRatingCer;  
GO  
```  
  
 <span data-ttu-id="c626c-158">Per altre informazioni sull'istruzione REVERT, vedere [REVERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/revert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c626c-158">For more information about the REVERT statement, see [REVERT &#40;Transact-SQL&#41;](/sql/t-sql/statements/revert-transact-sql).</span></span>  
  
##  <a name="complete-example"></a><a name="CompleteExample"></a><span data-ttu-id="c626c-159">Esempio completo</span><span class="sxs-lookup"><span data-stu-id="c626c-159">Complete Example</span></span>  
 <span data-ttu-id="c626c-160">In questa sezione è riportato il codice completo dell'esempio.</span><span class="sxs-lookup"><span data-stu-id="c626c-160">This section displays the complete example code.</span></span>  
  
```  
/* Step 1 - Open the AdventureWorks2012 database */  
USE AdventureWorks2012;  
GO  
-- Set up a login for the test user  
CREATE LOGIN TestCreditRatingUser  
   WITH PASSWORD = 'ASDECd2439587y'  
GO  
CREATE USER TestCreditRatingUser  
FOR LOGIN TestCreditRatingUser;  
GO  
  
/* Step 2 - Create a certificate in the AdventureWorks2012 database */  
CREATE CERTIFICATE TestCreditRatingCer  
   ENCRYPTION BY PASSWORD = 'pGFD4bb925DGvbd2439587y'  
      WITH SUBJECT = 'Credit Rating Records Access',   
      EXPIRY_DATE = '12/05/2014';  
GO  
  
/* Step 3 - Create a stored procedure and  
sign it using the certificate */  
CREATE PROCEDURE TestCreditRatingSP  
AS  
BEGIN  
   -- Shows who is running the stored procedure  
   SELECT SYSTEM_USER 'system Login'  
   , USER AS 'Database Login'  
   , NAME AS 'Context'  
   , TYPE  
   , USAGE   
   FROM sys.user_token;     
  
   -- Now get the data  
   SELECT AccountNumber, Name, CreditRating   
   FROM Purchasing.Vendor  
   WHERE CreditRating = 1;  
END  
GO  
  
ADD SIGNATURE TO TestCreditRatingSP   
   BY CERTIFICATE TestCreditRatingCer  
    WITH PASSWORD = 'pGFD4bb925DGvbd2439587y';  
GO  
  
/* Step 4 - Create a database user for the certificate.   
This user has the ownership chain associated with it. */  
USE AdventureWorks2012;  
GO  
CREATE USER TestCreditRatingcertificateAccount  
   FROM CERTIFICATE TestCreditRatingCer;  
GO  
  
/* Step 5 - Grant the user database rights */  
GRANT SELECT   
   ON Purchasing.Vendor   
   TO TestCreditRatingcertificateAccount;  
GO  
  
GRANT EXECUTE  
   ON TestCreditRatingSP   
   TO TestCreditRatingcertificateAccount;  
GO  
  
/* Step 6 - Test, using the EXECUTE AS statement */  
GRANT EXECUTE   
   ON TestCreditRatingSP   
   TO TestCreditRatingUser;  
GO  
  
-- Run the procedure as the dbo user, notice the output for the type  
EXEC TestCreditRatingSP;  
GO  
  
EXECUTE AS LOGIN = 'TestCreditRatingUser';  
GO  
EXEC TestCreditRatingSP;  
GO  
  
/* Step 7 - Clean up the example */  
REVERT;  
GO  
DROP PROCEDURE TestCreditRatingSP;  
GO  
DROP USER TestCreditRatingcertificateAccount;  
GO  
DROP USER TestCreditRatingUser;  
GO  
DROP LOGIN TestCreditRatingUser;  
GO  
DROP CERTIFICATE TestCreditRatingCer;  
GO  
```  
  
## <a name="see-also"></a><span data-ttu-id="c626c-161">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="c626c-161">See Also</span></span>  
 [<span data-ttu-id="c626c-162">Centro sicurezza per il motore di Database di SQL Server e il Database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="c626c-162">Security Center for SQL Server Database Engine and Azure SQL Database</span></span>](security/security-center-for-sql-server-database-engine-and-azure-sql-database.md)  
  
  
