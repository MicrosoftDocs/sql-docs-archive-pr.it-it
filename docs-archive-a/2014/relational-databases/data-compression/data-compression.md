---
title: Compressione dei dati | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- page compression [Database Engine]
- indexes [SQL Server], compressed
- compressed indexes [SQL Server]
- storage compression [Database Engine]
- tables [SQL Server], compressed
- storage [SQL Server], compressed
- compression [SQL Server]
- row compression [Database Engine]
- compression [SQL Server], about compressed tables and indexes
- data compression [Database Engine]
- compressed tables [SQL Server]
ms.assetid: 5f33e686-e115-4687-bd39-a00c48646513
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 48c4b11963d8e05ff7787ce9200329daf2e899ba
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87636219"
---
# <a name="data-compression"></a><span data-ttu-id="3af4d-102">Compressione dei dati</span><span class="sxs-lookup"><span data-stu-id="3af4d-102">Data Compression</span></span>
  <span data-ttu-id="3af4d-103">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] è supportata la compressione delle righe e delle pagine per gli indici e le tabelle rowstore e la compressione dell'archivio columnstore e columnstore per le tabelle e gli indici columnstore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-103">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] supports row and page compression for rowstore tables and indexes, and supports columnstore and columnstore archival compression for columnstore tables and indexes.</span></span>  
  
 <span data-ttu-id="3af4d-104">Per le tabelle e gli indici rowstore, utilizzare la funzionalità di compressione dei dati per ridurre le dimensioni del database.</span><span class="sxs-lookup"><span data-stu-id="3af4d-104">For rowstore tables and indexes, use the data compression feature to help reduce the size of the database.</span></span> <span data-ttu-id="3af4d-105">Oltre a risparmiare spazio, la compressione dei dati migliora le prestazioni dei carichi di lavoro di I/O a utilizzo elevato di memoria perché i dati vengono archiviati in un numero inferiore di pagine e le query devono leggere un numero inferiore di pagine dal disco.</span><span class="sxs-lookup"><span data-stu-id="3af4d-105">In addition to saving space, data compression can help improve performance of I/O intensive workloads because the data is stored in fewer pages and queries need to read fewer pages from disk.</span></span> <span data-ttu-id="3af4d-106">Sono tuttavia necessarie risorse della CPU aggiuntive nel server di database per comprimere e decomprimere i dati, mentre i dati vengono scambiati con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-106">However, extra CPU resources are required on the database server to compress and decompress the data, while data is exchanged with the application.</span></span> <span data-ttu-id="3af4d-107">È possibile configurare la compressione di righe e pagine sugli oggetti di database seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-107">You can configure row and page compression on the following database objects:</span></span>  
  
-   <span data-ttu-id="3af4d-108">Un'intera tabella archiviata come heap.</span><span class="sxs-lookup"><span data-stu-id="3af4d-108">A whole table that is stored as a heap.</span></span>  
  
-   <span data-ttu-id="3af4d-109">Un'intera tabella archiviata come indice cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-109">A whole table that is stored as a clustered index.</span></span>  
  
-   <span data-ttu-id="3af4d-110">Un intero indice non cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-110">A whole nonclustered index.</span></span>  
  
-   <span data-ttu-id="3af4d-111">Un'intera vista indicizzata.</span><span class="sxs-lookup"><span data-stu-id="3af4d-111">A whole indexed view.</span></span>  
  
-   <span data-ttu-id="3af4d-112">Per gli indici e le tabelle partizionati, è possibile configurare l'opzione di compressione per ogni partizione. Non è inoltre necessario che per le varie partizioni di un oggetto sia configurata la stessa impostazione di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-112">For partitioned tables and indexes, you can configure the compression option for each partition, and the various partitions of an object do not have to have the same compression setting.</span></span>  
  
 <span data-ttu-id="3af4d-113">Per gli indici e le tabelle columnstore, tutti gli indici e le tabelle columnstore utilizzano sempre la compressione columnstore che non è configurabile dall'utente.</span><span class="sxs-lookup"><span data-stu-id="3af4d-113">For columnstore tables and indexes, all columnstore tables and indexes always use columnstore compression and this is not user configurable.</span></span> <span data-ttu-id="3af4d-114">Utilizzare la compressione dell'archivio columnstore per ridurre ulteriormente le dimensioni dei dati in situazioni in cui è possibile concedere altro tempo e altre risorse della CPU per archiviare e recuperare i dati.</span><span class="sxs-lookup"><span data-stu-id="3af4d-114">Use columnstore archival compression to further reduce the data size for situations when you can afford extra time and CPU resources to store and retrieve the data.</span></span>  <span data-ttu-id="3af4d-115">È possibile configurare la compressione dell'archivio columnstore sugli oggetti di database seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-115">You can configure columnstore archival compression on the following database objects:</span></span>  
  
-   <span data-ttu-id="3af4d-116">Un'intera tabella columnstore o un intero indice columnstore cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-116">A whole columnstore table or a whole clustered columnstore index.</span></span>  <span data-ttu-id="3af4d-117">Poiché una tabella columnstore viene archiviata come indice columnstore cluster, entrambi gli approcci producono gli stessi risultati.</span><span class="sxs-lookup"><span data-stu-id="3af4d-117">Since a columnstore table is stored as a clustered columnstore index, both approaches have the same results.</span></span>  
  
-   <span data-ttu-id="3af4d-118">Un intero indice columnstore non cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-118">A whole nonclustered columnstore index.</span></span>  
  
-   <span data-ttu-id="3af4d-119">Per gli indici columnstore e le tabelle columnstore partizionati, è possibile configurare l'opzione di compressione dell'archivio per ogni partizione. Non è inoltre necessario che per le varie partizioni sia configurata la stessa impostazione di compressione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="3af4d-119">For partitioned columnstore tables and columnstore indexes, you can configure the archival compression option for each partition, and the various partitions do not have to have the same archival compression setting.</span></span>  
  
## <a name="considerations-for-when-you-use-row-and-page-compression"></a><span data-ttu-id="3af4d-120">Considerazioni relative all'utilizzo della compressione di riga e di pagina</span><span class="sxs-lookup"><span data-stu-id="3af4d-120">Considerations for When You Use Row and Page Compression</span></span>  
 <span data-ttu-id="3af4d-121">Quando si utilizza la compressione di riga e di pagina, tenere presente le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-121">When you use row and page compression, be aware the following considerations:</span></span>  
  
-   <span data-ttu-id="3af4d-122">I dettagli relativi alla compressione dei dati sono soggetti a modifiche senza preavviso nei Service Pack o nelle versioni successive.</span><span class="sxs-lookup"><span data-stu-id="3af4d-122">The details of data compression are subject to change without notice in service packs or subsequent releases.</span></span>  
  
-   <span data-ttu-id="3af4d-123">La compressione non è disponibile in ogni edizione di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3af4d-123">Compression is not available in every edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3af4d-124">Per ulteriori informazioni, vedere [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="3af4d-124">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="3af4d-125">La compressione non è disponibile per le tabelle di sistema.</span><span class="sxs-lookup"><span data-stu-id="3af4d-125">Compression is not available for system tables.</span></span>  
  
-   <span data-ttu-id="3af4d-126">La compressione consente di archiviare più righe in una pagina, ma non di modificare le dimensioni massime delle righe di una tabella o di un indice.</span><span class="sxs-lookup"><span data-stu-id="3af4d-126">Compression can allow more rows to be stored on a page, but does not change the maximum row size of a table or index.</span></span>  
  
-   <span data-ttu-id="3af4d-127">Una tabella non può essere abilitata per la compressione quando la somma delle dimensioni massime delle righe e dell'overhead relativo alla compressione supera le dimensioni massime di 8.060 byte delle righe.</span><span class="sxs-lookup"><span data-stu-id="3af4d-127">A table cannot be enabled for compression when the maximum row size plus the compression overhead exceeds the maximum row size of 8060 bytes.</span></span> <span data-ttu-id="3af4d-128">Una tabella con le colonne C1 e C2, ad esempio, `char(8000)` `char(53)` non può essere compressa a causa dell'overhead aggiuntivo della compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-128">For example, a table that has the columns c1`char(8000)` and c2`char(53)` cannot be compressed because of the additional compression overhead.</span></span> <span data-ttu-id="3af4d-129">Se si utilizza il formato di archiviazione vardecimal, il controllo delle dimensioni delle righe viene eseguito al momento dell'abilitazione del formato stesso.</span><span class="sxs-lookup"><span data-stu-id="3af4d-129">When the vardecimal storage format is used, the row-size check is performed when the format is enabled.</span></span> <span data-ttu-id="3af4d-130">Per la compressione di riga e di pagina, il controllo delle dimensioni delle righe viene eseguito quando l'oggetto viene compresso inizialmente e successivamente in occasione dell'inserimento o della modifica di ogni riga.</span><span class="sxs-lookup"><span data-stu-id="3af4d-130">For row and page compression, the row-size check is performed when the object is initially compressed, and then checked as each row is inserted or modified.</span></span> <span data-ttu-id="3af4d-131">Quando viene utilizzata la compressione, vengono applicate le due regole seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-131">Compression enforces the following two rules:</span></span>  
  
    -   <span data-ttu-id="3af4d-132">Un aggiornamento a un tipo a lunghezza fissa deve sempre avere esito positivo.</span><span class="sxs-lookup"><span data-stu-id="3af4d-132">An update to a fixed-length type must always succeed.</span></span>  
  
    -   <span data-ttu-id="3af4d-133">La disabilitazione della compressione dei dati deve sempre avere esito positivo.</span><span class="sxs-lookup"><span data-stu-id="3af4d-133">Disabling data compression must always succeed.</span></span> <span data-ttu-id="3af4d-134">Anche se la riga compressa rientra nella pagina, ovvero se le dimensioni della riga sono minori di 8.060 byte, in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] vengono impediti gli aggiornamenti che non sarebbe possibile includere nella riga non compressa.</span><span class="sxs-lookup"><span data-stu-id="3af4d-134">Even if the compressed row fits on the page, which means that it is less than 8060 bytes; [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] prevents updates that would not fit on the row when it is uncompressed.</span></span>  
  
-   <span data-ttu-id="3af4d-135">Quando viene specificato un elenco di partizioni, il tipo di compressione può essere impostato su ROW, PAGE o NONE per ogni singola partizione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-135">When a list of partitions is specified, the compression type can be set to ROW, PAGE, or NONE on individual partitions.</span></span> <span data-ttu-id="3af4d-136">Se l'elenco di partizioni non è specificato, tutte le partizioni vengono impostate in base alla proprietà di compressione dei dati specificata nell'istruzione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-136">If the list of partitions is not specified, all partitions are set with the data compression property that is specified in the statement.</span></span> <span data-ttu-id="3af4d-137">Quando viene creato un indice o una tabella, la compressione dei dati viene impostata su NONE se non specificato diversamente.</span><span class="sxs-lookup"><span data-stu-id="3af4d-137">When a table or index is created, data compression is set to NONE unless otherwise specified.</span></span> <span data-ttu-id="3af4d-138">Quando una tabella viene modificata, viene mantenuta la compressione esistente se non specificato diversamente.</span><span class="sxs-lookup"><span data-stu-id="3af4d-138">When a table is modified, the existing compression is preserved unless otherwise specified.</span></span>  
  
-   <span data-ttu-id="3af4d-139">Se si specifica un elenco di partizioni o una partizione non compresa nell'intervallo, verrà generato un errore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-139">If you specify a list of partitions or a partition that is out of range, an error will be generated.</span></span>  
  
-   <span data-ttu-id="3af4d-140">Gli indici non cluster non ereditano la proprietà di compressione della tabella.</span><span class="sxs-lookup"><span data-stu-id="3af4d-140">Nonclustered indexes do not inherit the compression property of the table.</span></span> <span data-ttu-id="3af4d-141">Per comprimere gli indici, è necessario impostarne in modo esplicito la proprietà di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-141">To compress indexes, you must explicitly set the compression property of the indexes.</span></span> <span data-ttu-id="3af4d-142">Per impostazione predefinita, al momento della creazione dell'indice la compressione verrà impostata su NONE.</span><span class="sxs-lookup"><span data-stu-id="3af4d-142">By default, the compression setting for indexes will set to NONE when the index is created.</span></span>  
  
-   <span data-ttu-id="3af4d-143">Quando un indice cluster viene creato in un heap, tale indice eredita lo stato di compressione dell'heap, a meno che non venga specificato uno stato di compressione alternativo.</span><span class="sxs-lookup"><span data-stu-id="3af4d-143">When a clustered index is created on a heap, the clustered index inherits the compression state of the heap unless an alternative compression state is specified.</span></span>  
  
-   <span data-ttu-id="3af4d-144">Quando un heap è configurato per la compressione a livello di pagina, le pagine vengono compresse solo nelle modalità seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-144">When a heap is configured for page-level compression, pages receive page-level compression only in the following ways:</span></span>  
  
    -   <span data-ttu-id="3af4d-145">Viene eseguita l'importazione bulk dei dati con l'ottimizzazione delle operazioni bulk abilitata.</span><span class="sxs-lookup"><span data-stu-id="3af4d-145">Data is bulk imported with bulk optimizations enabled.</span></span>  
  
    -   <span data-ttu-id="3af4d-146">I dati vengono inseriti utilizzando la sintassi INSERT INTO ... WITH (TABLOCK) e la tabella non contiene un indice non cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-146">Data is inserted using INSERT INTO ... WITH (TABLOCK) syntax and the table does not have a nonclustered index.</span></span>  
  
    -   <span data-ttu-id="3af4d-147">Una tabella viene ricompilata eseguendo l'istruzione ALTER TABLE ... REBUILD con l'opzione di compressione PAGE.</span><span class="sxs-lookup"><span data-stu-id="3af4d-147">A table is rebuilt by executing the ALTER TABLE ... REBUILD statement with the PAGE compression option.</span></span>  
  
-   <span data-ttu-id="3af4d-148">Le nuove pagine allocate in un heap nel corso di operazioni DML non utilizzeranno la compressione PAGE finché l'heap non viene ricompilato.</span><span class="sxs-lookup"><span data-stu-id="3af4d-148">New pages allocated in a heap as part of DML operations will not use PAGE compression until the heap is rebuilt.</span></span> <span data-ttu-id="3af4d-149">Ricompilare l'heap rimuovendo e riapplicando la compressione oppure creando e rimuovendo un indice cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-149">Rebuild the heap by removing and reapplying compression, or by creating and removing a clustered index.</span></span>  
  
-   <span data-ttu-id="3af4d-150">Per modificare l'impostazione di compressione di un heap, è necessario ricompilare tutti gli indici non cluster della tabella in modo che dispongano di puntatori ai nuovi percorsi delle righe nell'heap.</span><span class="sxs-lookup"><span data-stu-id="3af4d-150">Changing the compression setting of a heap requires all nonclustered indexes on the table to be rebuilt so that they have pointers to the new row locations in the heap.</span></span>  
  
-   <span data-ttu-id="3af4d-151">È possibile abilitare o disabilitare l'impostazione di compressione ROW o PAGE online oppure offline.</span><span class="sxs-lookup"><span data-stu-id="3af4d-151">You can enable or disable ROW or PAGE compression online or offline.</span></span> <span data-ttu-id="3af4d-152">L'abilitazione della compressione in un heap è un'operazione a thread singolo se eseguita online.</span><span class="sxs-lookup"><span data-stu-id="3af4d-152">Enabling compression on a heap is single threaded for an online operation.</span></span>  
  
-   <span data-ttu-id="3af4d-153">I requisiti di spazio su disco per l'abilitazione o la disabilitazione della compressione di riga o di pagina sono gli stessi necessari per la creazione o la ricompilazione di un indice.</span><span class="sxs-lookup"><span data-stu-id="3af4d-153">The disk space requirements for enabling or disabling row or page compression are the same as for creating or rebuilding an index.</span></span> <span data-ttu-id="3af4d-154">Per i dati partizionati, è possibile ridurre lo spazio richiesto abilitando o disabilitando la compressione per una partizione alla volta.</span><span class="sxs-lookup"><span data-stu-id="3af4d-154">For partitioned data, you can reduce the space that is required by enabling or disabling compression for one partition at a time.</span></span>  
  
-   <span data-ttu-id="3af4d-155">Per determinare lo stato della compressione delle partizioni in una tabella partizionata, eseguire una query sulla colonna data_compression della vista del catalogo sys.partitions.</span><span class="sxs-lookup"><span data-stu-id="3af4d-155">To determine the compression state of partitions in a partitioned table, query the data_compression column of the sys.partitions catalog view.</span></span>  
  
-   <span data-ttu-id="3af4d-156">Durante la compressione di indici, alle pagine a livello foglia è possibile applicare sia la compressione di riga che quella di pagina,</span><span class="sxs-lookup"><span data-stu-id="3af4d-156">When you are compressing indexes, leaf-level pages can be compressed with both row and page compression.</span></span> <span data-ttu-id="3af4d-157">mentre alle pagine a livello non foglia non è possibile applicare la compressione di pagina.</span><span class="sxs-lookup"><span data-stu-id="3af4d-157">Non-leaf-level pages do not receive page compression.</span></span>  
  
-   <span data-ttu-id="3af4d-158">A causa della dimensione, i tipi di dati per valori di grandi dimensioni vengono a volte archiviati separatamente rispetto ai dati delle righe normali in pagine specifiche.</span><span class="sxs-lookup"><span data-stu-id="3af4d-158">Because of their size, large-value data types are sometimes stored separately from the normal row data on special purpose pages.</span></span> <span data-ttu-id="3af4d-159">La compressione dei dati non è disponibile per i dati archiviati separatamente.</span><span class="sxs-lookup"><span data-stu-id="3af4d-159">Data compression is not available for the data that is stored separately.</span></span>  
  
-   <span data-ttu-id="3af4d-160">Le tabelle per cui era implementato il formato di archiviazione vardecimal in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] manterranno questa impostazione anche in seguito all'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="3af4d-160">Tables which implemented the vardecimal storage format in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] will retain that setting when upgraded.</span></span> <span data-ttu-id="3af4d-161">È possibile applicare la compressione di riga a una tabella che utilizza il formato di archiviazione vardecimal.</span><span class="sxs-lookup"><span data-stu-id="3af4d-161">You can apply row compression to a table that has the vardecimal storage format.</span></span> <span data-ttu-id="3af4d-162">Tuttavia, poiché la compressione di riga è un superset del formato di archiviazione vardecimal, non è necessario mantenere quest'ultimo.</span><span class="sxs-lookup"><span data-stu-id="3af4d-162">However, because row compression is a superset of the vardecimal storage format, there is no reason to retain the vardecimal storage format.</span></span> <span data-ttu-id="3af4d-163">Quando si utilizza il formato di archiviazione vardecimal con la compressione di riga, per i valori decimali non si ottiene alcun miglioramento in termini di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-163">Decimal values gain no additional compression when you combine the vardecimal storage format with row compression.</span></span> <span data-ttu-id="3af4d-164">Sebbene sia possibile inoltre applicare la compressione di pagina a una tabella per cui è implementato il formato di archiviazione vardecimal, per le colonne che utilizzano tale formato probabilmente non è possibile ottenere compressione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="3af4d-164">You can apply page compression to a table that has the vardecimal storage format; however, the vardecimal storage format columns probably will not achieve additional compression.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3af4d-165">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] è supportato il formato di archiviazione vardecimal. Tuttavia, poiché la compressione a livello di riga consente di ottenere gli stessi risultati, tale formato viene deprecato.</span><span class="sxs-lookup"><span data-stu-id="3af4d-165">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] supports the vardecimal storage format; however, because row-level compression achieves the same goals, the vardecimal storage format is deprecated.</span></span> [!INCLUDE[ssNoteDepFutureAvoid](../../includes/ssnotedepfutureavoid-md.md)]  
  
## <a name="using-columnstore-and-columnstore-archive-compression"></a><span data-ttu-id="3af4d-166">Utilizzo della compressione dell'archivio Columnstore e della compressione Columnstore</span><span class="sxs-lookup"><span data-stu-id="3af4d-166">Using Columnstore and Columnstore Archive Compression</span></span>  
  
||  
|-|  
|<span data-ttu-id="3af4d-167">**Si applica a**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (da[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] a [versione corrente](https://go.microsoft.com/fwlink/p/?LinkId=299658)).</span><span class="sxs-lookup"><span data-stu-id="3af4d-167">**Applies to**: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] through [current version](https://go.microsoft.com/fwlink/p/?LinkId=299658)).</span></span>|  
  
### <a name="basics"></a><span data-ttu-id="3af4d-168">Nozioni di base</span><span class="sxs-lookup"><span data-stu-id="3af4d-168">Basics</span></span>  
 <span data-ttu-id="3af4d-169">Gli indici e le tabelle columnstore vengono sempre archiviati con la compressione columnstore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-169">Columnstore tables and indexes are always stored with columnstore compression.</span></span> <span data-ttu-id="3af4d-170">È possibile ridurre ulteriormente le dimensioni dei dati columnstore configurando una compressione aggiuntiva denominata compressione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="3af4d-170">You can further reduce the size of columnstore data by configuring an additional compression called archival compression.</span></span>  <span data-ttu-id="3af4d-171">Per eseguire la compressione dell'archivio, in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] viene eseguito l'algoritmo di compressione Microsoft XPRESS sui dati.</span><span class="sxs-lookup"><span data-stu-id="3af4d-171">To perform archival compression, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] runs the Microsoft XPRESS compression algorithm on the data.</span></span> <span data-ttu-id="3af4d-172">Aggiungere o rimuovere la compressione dell'archivio utilizzando i tipi di compressione dati seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-172">Add or remove archival compression by using the following data compression types:</span></span>  
  
-   <span data-ttu-id="3af4d-173">Utilizzare la compressione dei dati `COLUMNSTORE_ARCHIVE` per comprimere i dati columnstore con la compressione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="3af4d-173">Use `COLUMNSTORE_ARCHIVE` data compression to compress columnstore data with archival compression.</span></span>  
  
-   <span data-ttu-id="3af4d-174">Utilizzare la compressione dati **COLUMNSTORE** per decomprimere la compressione dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="3af4d-174">Use **COLUMNSTORE** data compression to decompress archival compression.</span></span> <span data-ttu-id="3af4d-175">I dati risultanti verranno compressi con la compressione columnstore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-175">This resulting data will continue to be compressed with columnstore compression.</span></span>  
  
 <span data-ttu-id="3af4d-176">Per aggiungere la compressione dell'archivio, usare [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) o [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) con l'opzione REBUILD e DATA COMPRESSION = COLUMNSTORE.</span><span class="sxs-lookup"><span data-stu-id="3af4d-176">To add archival compression, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) or [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) with the REBUILD option and DATA COMPRESSION = COLUMNSTORE.</span></span>  
  
 <span data-ttu-id="3af4d-177">Esempi:</span><span class="sxs-lookup"><span data-stu-id="3af4d-177">Examples:</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE_ARCHIVE ON PARTITIONS (2,4)) ;  
  
```  
  
 <span data-ttu-id="3af4d-178">Per rimuovere la compressione dell'archivio e ripristinare i dati nella compressione columnstoe, usare [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) o [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) con l'opzione REBUILD e DATA COMPRESSION = COLUMNSTORE.</span><span class="sxs-lookup"><span data-stu-id="3af4d-178">To remove archival compression and restore the data to columnstore compression, use [ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) or [ALTER INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-index-transact-sql) with the REBUILD option and DATA COMPRESSION = COLUMNSTORE.</span></span>  
  
 <span data-ttu-id="3af4d-179">Esempi:</span><span class="sxs-lookup"><span data-stu-id="3af4d-179">Examples:</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  COLUMNSTORE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE) ;  
  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (DATA_COMPRESSION =  COLUMNSTORE ON PARTITIONS (2,4) ) ;  
  
```  
  
 <span data-ttu-id="3af4d-180">Nell'esempio seguente la compressione dei dati viene impostata su columnstore in alcune partizioni e su archivio columnstore in altre.</span><span class="sxs-lookup"><span data-stu-id="3af4d-180">This next example sets the data compression to columnstore on some partitions, and to columnstore archival on other partitions.</span></span>  
  
```  
ALTER TABLE ColumnstoreTable1   
REBUILD PARTITION = ALL WITH (  
    DATA_COMPRESSION =  COLUMNSTORE ON PARTITIONS (4,5),  
    DATA COMPRESSION = COLUMNSTORE_ARCHIVE ON PARTITIONS (1,2,3)  
) ;  
```  
  
### <a name="performance"></a><span data-ttu-id="3af4d-181">Prestazioni</span><span class="sxs-lookup"><span data-stu-id="3af4d-181">Performance</span></span>  
 <span data-ttu-id="3af4d-182">La compressione degli indici columnstore con la compressione dell'archivio comporta un calo delle prestazioni dell'indice rispetto agli indici columnstore compressi con un altro tipo di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-182">Compressing columnstore indexes with archival compression will cause the index to perform slower than columnstore indexes that do not have the archival compression.</span></span>  <span data-ttu-id="3af4d-183">Utilizzare la compressione dell'archivio solo quando è possibile concedere altro tempo e altre risorse della CPU per comprimere e recuperare i dati.</span><span class="sxs-lookup"><span data-stu-id="3af4d-183">Use archival compression only when you can afford to use extra time and CPU resources to compress and retrieve the data.</span></span>  
  
 <span data-ttu-id="3af4d-184">Il vantaggio che comportano prestazioni inferiori è un'archiviazione ridotta, utile per i dati a cui non si accede con frequenza.</span><span class="sxs-lookup"><span data-stu-id="3af4d-184">The benefit of slower performance is reduced storage which is useful for data that is not frequently accessed.</span></span> <span data-ttu-id="3af4d-185">Se ad esempio si dispone di una partizione per ogni mese di dati e la maggior parte dell'attività è relativa ai mesi più recenti, è possibile archiviare i mesi precedenti per ridurre i requisiti di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-185">For example, if you have a partition for each month of data, and most of your activity is for the most recent months, you could archive older months to reduce the storage requirements.</span></span>  
  
### <a name="metadata"></a><span data-ttu-id="3af4d-186">Metadati</span><span class="sxs-lookup"><span data-stu-id="3af4d-186">Metadata</span></span>  
 <span data-ttu-id="3af4d-187">Nelle viste di sistema seguenti sono contenute informazioni sulla compressione dei dati per gli indici cluster:</span><span class="sxs-lookup"><span data-stu-id="3af4d-187">The following system views contain information about data compression for clustered indexes:</span></span>  
  
-   <span data-ttu-id="3af4d-188">[sys. indexes &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql) : `type` le `type_desc` colonne e includono COLUMNStore cluster e columnstore non cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-188">[sys.indexes &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-indexes-transact-sql) - The `type` and `type_desc` columns include CLUSTERED COLUMNSTORE and NONCLUSTERED COLUMNSTORE.</span></span>  
  
-   <span data-ttu-id="3af4d-189">[sys. partitions &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-partitions-transact-sql) : `data_compression` le `data_compression_desc` colonne e includono columnstore e COLUMNSTORE_ARCHIVE.</span><span class="sxs-lookup"><span data-stu-id="3af4d-189">[sys.partitions &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-partitions-transact-sql) - The `data_compression` and `data_compression_desc` columns include COLUMNSTORE and COLUMNSTORE_ARCHIVE.</span></span>  
  
 <span data-ttu-id="3af4d-190">La procedura [sp_estimate_data_compression_savings &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-estimate-data-compression-savings-transact-sql) non si applica agli indici columnstore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-190">The procedure [sp_estimate_data_compression_savings &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-estimate-data-compression-savings-transact-sql) does not apply to columnstore indexes.</span></span>  
  
## <a name="how-compression-affects-partitioned-tables-and-indexes"></a><span data-ttu-id="3af4d-191">Impatto della compressione su tabelle e indici partizionati</span><span class="sxs-lookup"><span data-stu-id="3af4d-191">How Compression Affects Partitioned Tables and Indexes</span></span>  
 <span data-ttu-id="3af4d-192">Quando si utilizza la compressione dei dati con tabelle e indici partizionati, tenere presente le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-192">When you use data compression with partitioned tables and indexes, be aware of the following considerations:</span></span>  
  
-   <span data-ttu-id="3af4d-193">Quando le partizioni vengono suddivise utilizzando l'istruzione ALTER PARTITION, entrambe le partizioni ereditano l'attributo di compressione dei dati della partizione originale.</span><span class="sxs-lookup"><span data-stu-id="3af4d-193">When partitions are split by using the ALTER PARTITION statement, both partitions inherit the data compression attribute of the original partition.</span></span>  
  
-   <span data-ttu-id="3af4d-194">Quando due partizioni vengono unite, la partizione risultante eredita l'attributo di compressione dei dati della partizione di destinazione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-194">When two partitions are merged, the resultant partition inherits the data compression attribute of the destination partition.</span></span>  
  
-   <span data-ttu-id="3af4d-195">Per cambiare una partizione, è necessario che la relativa proprietà di compressione dei dati corrisponda a quella della tabella.</span><span class="sxs-lookup"><span data-stu-id="3af4d-195">To switch a partition, the data compression property of the partition must match the compression property of the table.</span></span>  
  
-   <span data-ttu-id="3af4d-196">Per modificare la compressione di una tabella o di un indice partizionato, è possibile utilizzare due sintassi diverse:</span><span class="sxs-lookup"><span data-stu-id="3af4d-196">There are two syntax variations that you can use to modify the compression of a partitioned table or index:</span></span>  
  
    -   <span data-ttu-id="3af4d-197">La sintassi seguente consente di ricompilare solo la partizione cui si fa riferimento:</span><span class="sxs-lookup"><span data-stu-id="3af4d-197">The following syntax rebuilds only the referenced partition:</span></span>  
  
        ```  
        ALTER TABLE <table_name>   
        REBUILD PARTITION = 1 WITH (DATA_COMPRESSION =  <option>)  
        ```  
  
    -   <span data-ttu-id="3af4d-198">La sintassi seguente consente di ricompilare l'intera tabella utilizzando l'impostazione di compressione esistente per qualsiasi partizione cui non si fa riferimento:</span><span class="sxs-lookup"><span data-stu-id="3af4d-198">The following syntax rebuilds the whole table by using the existing compression setting for any partitions that are not referenced:</span></span>  
  
        ```  
        ALTER TABLE <table_name>   
        REBUILD PARTITION = ALL   
        WITH (DATA_COMPRESSION = PAGE ON PARTITIONS(<range>),  
        ... )  
        ```  
  
     <span data-ttu-id="3af4d-199">Per gli indici partizionati viene seguito lo stesso principio utilizzando l'istruzione ALTER INDEX.</span><span class="sxs-lookup"><span data-stu-id="3af4d-199">Partitioned indexes follow the same principle using ALTER INDEX.</span></span>  
  
-   <span data-ttu-id="3af4d-200">Quando un indice cluster viene eliminato, le partizioni di heap corrispondenti mantengono l'impostazione di compressione dei dati, a meno che lo schema di partizione non venga modificato.</span><span class="sxs-lookup"><span data-stu-id="3af4d-200">When a clustered index is dropped, the corresponding heap partitions retain their data compression setting unless the partitioning scheme is modified.</span></span> <span data-ttu-id="3af4d-201">Se lo schema di partizionamento viene modificato, tutte le partizioni vengono ricompilate in un stato non compresso.</span><span class="sxs-lookup"><span data-stu-id="3af4d-201">If the partitioning scheme is changed, all partitions are rebuilt to an uncompressed state.</span></span> <span data-ttu-id="3af4d-202">Per eliminare un indice cluster e modificare lo schema di partizionamento, è necessario effettuare le operazioni descritte nei passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-202">To drop a clustered index and change the partitioning scheme requires the following steps:</span></span>  
  
     1. <span data-ttu-id="3af4d-203">Eliminare l'indice cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-203">Drop the clustered index.</span></span>  
  
     2. <span data-ttu-id="3af4d-204">Modificare la tabella utilizzando l'opzione ALTER TABLE ... REBUILD ... che specifica l'opzione di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-204">Modify the table by using the ALTER TABLE ... REBUILD ... option that specifies the compression option.</span></span>  
  
     <span data-ttu-id="3af4d-205">L'eliminazione OFFLINE di un indice cluster è un'operazione di rapida esecuzione, poiché vengono rimossi solo i livelli superiori degli indici cluster.</span><span class="sxs-lookup"><span data-stu-id="3af4d-205">To drop a clustered index OFFLINE is a very fast operation, because only the upper levels of clustered indexes are removed.</span></span> <span data-ttu-id="3af4d-206">Quando un indice cluster viene eliminato ONLINE, in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] è necessario ricompilare l'heap due volte, una volta per l'operazione descritta nel passaggio 1 e una volta per quella descritta nel passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="3af4d-206">When a clustered index is dropped ONLINE, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must rebuild the heap two times, once for step 1 and once for step 2.</span></span>  
  
## <a name="how-compression-affects-replication"></a><span data-ttu-id="3af4d-207">Impatto della compressione sulla replica</span><span class="sxs-lookup"><span data-stu-id="3af4d-207">How Compression Affects Replication</span></span>  
 <span data-ttu-id="3af4d-208">Quando si utilizza la compressione dei dati con la replica, tenere presente le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-208">When you are using data compression with replication, be aware of the following considerations:</span></span>  
  
-   <span data-ttu-id="3af4d-209">Quando l'agente snapshot genera lo script dello schema iniziale, il nuovo schema utilizzerà le stesse impostazioni di compressione sia per la tabella che per i relativi indici.</span><span class="sxs-lookup"><span data-stu-id="3af4d-209">When the Snapshot Agent generates the initial schema script, the new schema will use the same compression settings for both the table and its indexes.</span></span> <span data-ttu-id="3af4d-210">Non è possibile abilitare la compressione solo sulla tabella e non sull'indice.</span><span class="sxs-lookup"><span data-stu-id="3af4d-210">Compression cannot be enabled on just the table and not the index.</span></span>  
  
-   <span data-ttu-id="3af4d-211">Per la replica transazionale, l'opzione dello schema dell'articolo determina gli oggetti e le proprietà dipendenti da inserire nello script.</span><span class="sxs-lookup"><span data-stu-id="3af4d-211">For transactional replication the article schema option determines what dependent objects and properties have to be scripted.</span></span> <span data-ttu-id="3af4d-212">Per altre informazioni, vedere [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="3af4d-212">For more information, see [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span>  
  
     <span data-ttu-id="3af4d-213">Quando applica gli script, l'agente di distribuzione non verifica la presenza di Sottoscrittori legacy.</span><span class="sxs-lookup"><span data-stu-id="3af4d-213">The Distribution Agent does not check for down-level Subscribers when it applies scripts.</span></span> <span data-ttu-id="3af4d-214">Se la replica della compressione è selezionata, non sarà possibile creare la tabella in Sottoscrittori legacy.</span><span class="sxs-lookup"><span data-stu-id="3af4d-214">If the replication of compression is selected, creating the table on down-level Subscribers will fail.</span></span> <span data-ttu-id="3af4d-215">Nel caso di una topologia mista, non abilitare la replica della compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-215">In the case of a mixed topology, do not enable the replication of compression.</span></span>  
  
-   <span data-ttu-id="3af4d-216">Per la replica di tipo merge, il livello di compatibilità della pubblicazione prevale sulle opzioni dello schema e determina gli oggetti dello schema che verranno inseriti nello script.</span><span class="sxs-lookup"><span data-stu-id="3af4d-216">For merge replication, publication compatibility level overrides the schema options and determines the schema objects that will be scripted.</span></span>  
  
     <span data-ttu-id="3af4d-217">Nel caso di una topologia mista, se non è necessario per supportare le nuove opzioni di compressione, il livello di compatibilità della pubblicazione deve essere impostato sulla versione del Sottoscrittore legacy.</span><span class="sxs-lookup"><span data-stu-id="3af4d-217">In the case of a mixed topology, if it is not required to support the new compression options, the publication compatibility level should be set to the down-level Subscriber version.</span></span> <span data-ttu-id="3af4d-218">Se necessario, comprimere le tabelle nel Sottoscrittore dopo che sono state create.</span><span class="sxs-lookup"><span data-stu-id="3af4d-218">If it is required, compress tables on the Subscriber after they have been created.</span></span>  
  
 <span data-ttu-id="3af4d-219">Nella tabella seguente vengono illustrate le impostazioni di replica che controllano la compressione durante la replica stessa.</span><span class="sxs-lookup"><span data-stu-id="3af4d-219">The following table shows replication settings that control compression during replication.</span></span>  
  
|<span data-ttu-id="3af4d-220">Operazione che l'utente intende eseguire</span><span class="sxs-lookup"><span data-stu-id="3af4d-220">User intent</span></span>|<span data-ttu-id="3af4d-221">Replica dello schema di partizione per una tabella o un indice</span><span class="sxs-lookup"><span data-stu-id="3af4d-221">Replicate partition scheme for a table or index</span></span>|<span data-ttu-id="3af4d-222">Replica delle impostazioni di compressione</span><span class="sxs-lookup"><span data-stu-id="3af4d-222">Replicate compression settings</span></span>|<span data-ttu-id="3af4d-223">Comportamento a livello di script</span><span class="sxs-lookup"><span data-stu-id="3af4d-223">Scripting behavior</span></span>|  
|-----------------|-----------------------------------------------------|------------------------------------|------------------------|  
|<span data-ttu-id="3af4d-224">Replicare lo schema di partizione e abilitare la compressione sulla partizione nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-224">To replicate the partition scheme and enable compression on the Subscriber on the partition.</span></span>|<span data-ttu-id="3af4d-225">True</span><span class="sxs-lookup"><span data-stu-id="3af4d-225">True</span></span>|<span data-ttu-id="3af4d-226">True</span><span class="sxs-lookup"><span data-stu-id="3af4d-226">True</span></span>|<span data-ttu-id="3af4d-227">Inserisce nello script lo schema di partizione e le impostazioni di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-227">Scripts both the partition scheme and the compression settings.</span></span>|  
|<span data-ttu-id="3af4d-228">Replicare lo schema di partizione senza comprimere i dati nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-228">To replicate the partition scheme but not compress the data on the Subscriber.</span></span>|<span data-ttu-id="3af4d-229">Vero</span><span class="sxs-lookup"><span data-stu-id="3af4d-229">True</span></span>|<span data-ttu-id="3af4d-230">Falso</span><span class="sxs-lookup"><span data-stu-id="3af4d-230">False</span></span>|<span data-ttu-id="3af4d-231">Inserimento nello script dello schema di partizione, ma non delle impostazioni di connessione per la partizione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-231">Scripts out the partition scheme but not the compression settings for the partition.</span></span>|  
|<span data-ttu-id="3af4d-232">Non replicare lo schema di partizione né comprimere i dati nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="3af4d-232">To not replicate the partition scheme and not compress the data on the Subscriber.</span></span>|<span data-ttu-id="3af4d-233">False</span><span class="sxs-lookup"><span data-stu-id="3af4d-233">False</span></span>|<span data-ttu-id="3af4d-234">False</span><span class="sxs-lookup"><span data-stu-id="3af4d-234">False</span></span>|<span data-ttu-id="3af4d-235">Non inserisce nello script né la partizione né le impostazioni di compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-235">Does not script partition or compression settings.</span></span>|  
|<span data-ttu-id="3af4d-236">Comprimere la tabella nel Sottoscrittore se tutte le partizioni sono compresse nel server di pubblicazione, senza replicare lo schema di partizione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-236">To compress the table on the Subscriber if all the partitions are compressed on the Publisher, but not replicate the partition scheme.</span></span>|<span data-ttu-id="3af4d-237">Falso</span><span class="sxs-lookup"><span data-stu-id="3af4d-237">False</span></span>|<span data-ttu-id="3af4d-238">True</span><span class="sxs-lookup"><span data-stu-id="3af4d-238">True</span></span>|<span data-ttu-id="3af4d-239">Controlla se tutte le partizioni sono abilitate per la compressione.</span><span class="sxs-lookup"><span data-stu-id="3af4d-239">Checks if all the partitions are enabled for compression.</span></span><br /><br /> <span data-ttu-id="3af4d-240">Inserisce nello script la compressione a livello di tabella.</span><span class="sxs-lookup"><span data-stu-id="3af4d-240">Scripts out compression at the table level.</span></span>|  
  
## <a name="how-compression-affects-other-sql-server-components"></a><span data-ttu-id="3af4d-241">Impatto della compressione su altri componenti di SQL Server</span><span class="sxs-lookup"><span data-stu-id="3af4d-241">How Compression Affects Other SQL Server Components</span></span>  
 <span data-ttu-id="3af4d-242">La compressione viene eseguita nel motore di archiviazione e i dati vengono presentati alla maggior parte degli altri componenti di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in uno stato non compresso,</span><span class="sxs-lookup"><span data-stu-id="3af4d-242">Compression occurs in the storage engine and the data is presented to most of the other components of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in an uncompressed state.</span></span> <span data-ttu-id="3af4d-243">limitando gli effetti della compressione negli altri componenti in relazione agli aspetti seguenti:</span><span class="sxs-lookup"><span data-stu-id="3af4d-243">This limits the effects of compression on the other components to the following:</span></span>  
  
-   <span data-ttu-id="3af4d-244">Operazioni di importazione ed esportazione bulk</span><span class="sxs-lookup"><span data-stu-id="3af4d-244">Bulk import and export operations</span></span>  
  
     <span data-ttu-id="3af4d-245">Quando i dati vengono esportati, anche in formato nativo, il relativo output è in formato di riga non compresso.</span><span class="sxs-lookup"><span data-stu-id="3af4d-245">When data is exported, even in native format, the data is output in the uncompressed row format.</span></span> <span data-ttu-id="3af4d-246">In questo modo le dimensioni del file di dati esportato potrebbero risultare molto più elevate rispetto ai dati di origine.</span><span class="sxs-lookup"><span data-stu-id="3af4d-246">This can cause the size of exported data file to be significantly larger than the source data.</span></span>  
  
     <span data-ttu-id="3af4d-247">Quando i dati vengono importati, se la tabella di destinazione è stata abilitata per la compressione i dati vengono convertiti dal motore di archiviazione in formato di riga compresso.</span><span class="sxs-lookup"><span data-stu-id="3af4d-247">When data is imported, if the target table has been enabled for compression, the data is converted by the storage engine into compressed row format.</span></span> <span data-ttu-id="3af4d-248">In questo modo l'utilizzo della CPU potrebbe aumentare rispetto a una situazione in cui i dati vengono importati in una tabella non compressa.</span><span class="sxs-lookup"><span data-stu-id="3af4d-248">This can cause increased CPU usage compared to when data is imported into an uncompressed table.</span></span>  
  
     <span data-ttu-id="3af4d-249">Quando i dati vengono importati mediante un'operazione bulk in un heap con compressione di pagina, al momento dell'inserimento dei dati l'operazione di importazione bulk tenterà di comprimerli mediante la compressione di pagina.</span><span class="sxs-lookup"><span data-stu-id="3af4d-249">When data is bulk imported into a heap with page compression, the bulk import operation will try to compress the data with page compression when the data is inserted.</span></span>  
  
-   <span data-ttu-id="3af4d-250">La compressione non influisce sulle operazioni di backup e ripristino.</span><span class="sxs-lookup"><span data-stu-id="3af4d-250">Compression does not affect backup and restore.</span></span>  
  
-   <span data-ttu-id="3af4d-251">La compressione non influisce sul log shipping.</span><span class="sxs-lookup"><span data-stu-id="3af4d-251">Compression does not affect log shipping.</span></span>  
  
-   <span data-ttu-id="3af4d-252">La compressione dei dati è incompatibile con le colonne di tipo sparse.</span><span class="sxs-lookup"><span data-stu-id="3af4d-252">Data compression is incompatible with sparse columns.</span></span> <span data-ttu-id="3af4d-253">Non è pertanto possibile comprimere le tavole contenenti colonne di tipo sparse, né aggiungere le colonne di questo tipo a una tabella compressa.</span><span class="sxs-lookup"><span data-stu-id="3af4d-253">Therefore, tables containing sparse columns cannot be compressed nor can sparse columns be added to a compressed table.</span></span>  
  
-   <span data-ttu-id="3af4d-254">L'abilitazione della compressione può provocare la modifica dei piani di query, in quanto i dati vengono archiviati tramite un numero diverso di pagine e un numero diverso di righe per pagina.</span><span class="sxs-lookup"><span data-stu-id="3af4d-254">Enabling compression can cause query plans to change because the data is stored using a different number of pages and number of rows per page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3af4d-255">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3af4d-255">See Also</span></span>  
 <span data-ttu-id="3af4d-256">[Implementazione della compressione di riga](row-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="3af4d-256">[Row Compression Implementation](row-compression-implementation.md) </span></span>  
 <span data-ttu-id="3af4d-257">[Implementazione della compressione di pagina](page-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="3af4d-257">[Page Compression Implementation](page-compression-implementation.md) </span></span>  
 <span data-ttu-id="3af4d-258">[Implementazione della compressione Unicode](unicode-compression-implementation.md) </span><span class="sxs-lookup"><span data-stu-id="3af4d-258">[Unicode Compression Implementation](unicode-compression-implementation.md) </span></span>  
 <span data-ttu-id="3af4d-259">[CREATE PARTITION SCHEME &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-scheme-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3af4d-259">[CREATE PARTITION SCHEME &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-scheme-transact-sql) </span></span>  
 <span data-ttu-id="3af4d-260">[CREATE PARTITION FUNCTION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-function-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3af4d-260">[CREATE PARTITION FUNCTION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-partition-function-transact-sql) </span></span>  
 <span data-ttu-id="3af4d-261">[CREATE TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-table-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3af4d-261">[CREATE TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-table-transact-sql) </span></span>  
 <span data-ttu-id="3af4d-262">[ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3af4d-262">[ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span></span>  
 <span data-ttu-id="3af4d-263">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="3af4d-263">[CREATE INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-index-transact-sql) </span></span>  
 [<span data-ttu-id="3af4d-264">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="3af4d-264">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
  
