---
title: Supporto del nome dell'entità servizio (SPN) nelle connessioni client | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- SQL Server Native Client, SPNs
- ODBC, SPNs
- OLE DB, SPNs
- SPNs [SQL Server]
ms.assetid: 96598c69-ce9a-4090-aacb-d546591e8af7
author: rothja
ms.author: jroth
ms.openlocfilehash: 10a64baa17bd070d9354beaf6ff8c2e460682318
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87625370"
---
# <a name="service-principal-name-spn-support-in-client-connections"></a><span data-ttu-id="260fd-102">Supporto per nomi SPN nelle connessioni client</span><span class="sxs-lookup"><span data-stu-id="260fd-102">Service Principal Name (SPN) Support in Client Connections</span></span>
  <span data-ttu-id="260fd-103">A partire da [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], il supporto per i nomi SPN è stato esteso per consentire l'autenticazione reciproca in tutti i protocolli.</span><span class="sxs-lookup"><span data-stu-id="260fd-103">Beginning with [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], support for service principal names (SPNs) has been extended to enable mutual authentication across all protocols.</span></span> <span data-ttu-id="260fd-104">Nelle versioni precedenti di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] i nomi SPN sono supportati solo per Kerberos su TCP quando il nome SPN predefinito per l'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] viene registrato con Active Directory.</span><span class="sxs-lookup"><span data-stu-id="260fd-104">In previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SPNs were only supported for Kerberos over TCP when the default SPN for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance was registered with Active Directory.</span></span>  
  
 <span data-ttu-id="260fd-105">I nomi SPN vengono usati dal protocollo di autenticazione per determinare l'account usato per l'esecuzione di un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-105">SPNs are used by the authentication protocol to determine the account in which a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs.</span></span> <span data-ttu-id="260fd-106">Se l'account dell'istanza è noto, è possibile usare l'autenticazione Kerberos per fornire autenticazione reciproca dal client e dal server.</span><span class="sxs-lookup"><span data-stu-id="260fd-106">If the instance account is known, Kerberos authentication can be used to provide mutual authentication by the client and server.</span></span> <span data-ttu-id="260fd-107">Se l'account dell'istanza non è noto, viene usata l'autenticazione NTLM, che fornisce solo l'autenticazione del client da parte del server.</span><span class="sxs-lookup"><span data-stu-id="260fd-107">If the instance account is not known, NTLM authentication, which only provides authentication of the client by the server, is used.</span></span> <span data-ttu-id="260fd-108">Attualmente, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client esegue la ricerca di autenticazione, deducendo SPN dal nome dell'istanza e dalle proprietà della connessione di rete.</span><span class="sxs-lookup"><span data-stu-id="260fd-108">Currently, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client performs the authentication lookup, deriving the SPN from the instance name and network connection properties.</span></span> <span data-ttu-id="260fd-109">Le istanze [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tenteranno di registrare i nomi SPN all'avvio ma è possibile registrarli manualmente.</span><span class="sxs-lookup"><span data-stu-id="260fd-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances will attempt to register SPNs on startup, or they can be registered manually.</span></span> <span data-ttu-id="260fd-110">La registrazione, tuttavia, non riuscirà se l'account dispone di diritti di accesso insufficienti per la registrazione dei nomi SPN.</span><span class="sxs-lookup"><span data-stu-id="260fd-110">However, registration will fail if there are insufficient access rights for the account that attempts to register the SPNs.</span></span>  
  
 <span data-ttu-id="260fd-111">Gli account di dominio e del computer vengono registrati automaticamente in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="260fd-111">Domain and computer accounts are registered automatically in Active Directory.</span></span> <span data-ttu-id="260fd-112">Questi possono essere usati come SPN oppure gli amministratori possono definire i propri SPN.</span><span class="sxs-lookup"><span data-stu-id="260fd-112">These can be used as SPNs, or administators can define their own SPNs.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="260fd-113">rende l'autenticazione più gestibile e affidabile consentendo ai client di specificare direttamente i nomi SPN da usare.</span><span class="sxs-lookup"><span data-stu-id="260fd-113">makes secure authentication more manageable and reliable by allowing clients to directly specify the SPN to use.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="260fd-114">Un nome SPN specificato da un'applicazione client viene usato solo quando viene stabilita una connessione con sicurezza integrata di Windows.</span><span class="sxs-lookup"><span data-stu-id="260fd-114">An SPN specified by a client application is only used when a connection is made with Windows integrated security.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="260fd-115">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** è uno strumento di diagnostica che semplifica la risoluzione dei problemi di connettività correlati a Kerberos con [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-115">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="260fd-116">Per altre informazioni, vedere [Microsoft Kerberos Configuration Manager per SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span><span class="sxs-lookup"><span data-stu-id="260fd-116">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="260fd-117">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** è uno strumento di diagnostica che semplifica la risoluzione dei problemi di connettività correlati a Kerberos con [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-117">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="260fd-118">Per altre informazioni, vedere [Microsoft Kerberos Configuration Manager per SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span><span class="sxs-lookup"><span data-stu-id="260fd-118">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
 <span data-ttu-id="260fd-119">Per altre informazioni su Kerberos, vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="260fd-119">For more information about Kerberos, see the following articles:</span></span>  
  
-   [<span data-ttu-id="260fd-120">Kerberos Technical Supplement for Windows</span><span class="sxs-lookup"><span data-stu-id="260fd-120">Kerberos Technical Supplement for Windows</span></span>](https://go.microsoft.com/fwlink/?LinkId=101449)  
  
-   [<span data-ttu-id="260fd-121">Microsoft Kerberos</span><span class="sxs-lookup"><span data-stu-id="260fd-121">Microsoft Kerberos</span></span>](https://go.microsoft.com/fwlink/?LinkID=100758)  
  
## <a name="usage"></a><span data-ttu-id="260fd-122">Uso</span><span class="sxs-lookup"><span data-stu-id="260fd-122">Usage</span></span>  
 <span data-ttu-id="260fd-123">Nella tabella seguente vengono descritti gli scenari più comuni in cui le applicazioni client possono abilitare l'autenticazione protetta.</span><span class="sxs-lookup"><span data-stu-id="260fd-123">The following table describes the most common scenarios in which client applications can enable secure authentication.</span></span>  
  
|<span data-ttu-id="260fd-124">Scenario</span><span class="sxs-lookup"><span data-stu-id="260fd-124">Scenario</span></span>|<span data-ttu-id="260fd-125">Descrizione</span><span class="sxs-lookup"><span data-stu-id="260fd-125">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="260fd-126">Un'applicazione legacy non specifica un nome SPN.</span><span class="sxs-lookup"><span data-stu-id="260fd-126">A legacy application does not specify an SPN.</span></span>|<span data-ttu-id="260fd-127">Questo scenario di compatibilità garantisce che non vi saranno differenze di comportamento per le applicazioni sviluppate per le versioni precedenti di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-127">This compatibility scenario guarantees that there will be no behavior change for applications developed for previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="260fd-128">Se non viene specificato alcun nome SPN, l'applicazione si basa sui nomi SPN generati e non è in grado di identificare il metodo di autenticazione usato.</span><span class="sxs-lookup"><span data-stu-id="260fd-128">If no SPN is specified, the application relies on generated SPNs and has no knowledge of which authentication method is used.</span></span>|  
|<span data-ttu-id="260fd-129">Un'applicazione client che usa la versione corrente di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client specifica un nome SPN nella stringa di connessione come utente di dominio o account del computer, come nome SPN specifico dell'istanza o come stringa definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="260fd-129">A client application using the current version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client specifies an SPN in the connection string as a domain user or computer account, as an instance-specific SPN, or as a user-defined string.</span></span>|<span data-ttu-id="260fd-130">È possibile utilizzare la parola chiave `ServerSPN` in una stringa del provider, di inizializzazione o di connessione per effettuare le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="260fd-130">The `ServerSPN` keyword can be used in a provider, initialization, or connection string to do the following:</span></span><br /><br /> <span data-ttu-id="260fd-131">-Specificare l'account utilizzato dall' [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] istanza per una connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-131">-   Specify the account used by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for a connection.</span></span> <span data-ttu-id="260fd-132">Questa operazione semplifica l'accesso all'autenticazione Kerberos.</span><span class="sxs-lookup"><span data-stu-id="260fd-132">This simplifies access to Kerberos authentication.</span></span> <span data-ttu-id="260fd-133">Se è presente un centro distribuzione chiavi (KDC, Key Distribution Center) Kerberos ed è stato specificato l'account corretto, è più probabile che venga usata l'autenticazione Kerberos anziché l'autenticazione NTLM.</span><span class="sxs-lookup"><span data-stu-id="260fd-133">If a Kerberos Key Distribution Center (KDC) is present and the correct account is specified, Kerberos authentication is more likely to be used than NTLM.</span></span> <span data-ttu-id="260fd-134">Il centro distribuzione chiavi si trova in genere nello stesso computer del controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="260fd-134">The KDC usually resides on the same computer as the domain controller.</span></span><br /><span data-ttu-id="260fd-135">-Specificare un nome SPN per cercare l'account del servizio per l' [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] istanza.</span><span class="sxs-lookup"><span data-stu-id="260fd-135">-   Specify an SPN to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="260fd-136">Per ogni istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] vengono generati due nomi SPN predefiniti che possono essere usati a questo scopo.</span><span class="sxs-lookup"><span data-stu-id="260fd-136">For every [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance, two default SPNs are generated that can be used for this purpose.</span></span> <span data-ttu-id="260fd-137">Non è tuttavia garantito che tali chiavi siano presenti in Active Directory, pertanto in questa situazione non è garantita neanche l'autenticazione Kerberos.</span><span class="sxs-lookup"><span data-stu-id="260fd-137">These keys are not guaranteed to be present in Active Directory, however, so in this situation Kerberos authentication is not guaranteed.</span></span><br /><span data-ttu-id="260fd-138">-Specificare un nome SPN che verrà utilizzato per cercare l'account del servizio per l' [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] istanza di.</span><span class="sxs-lookup"><span data-stu-id="260fd-138">-   Specify an SPN that will be used to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="260fd-139">Può trattarsi di qualsiasi stringa definita dall'utente di cui è stato eseguito il mapping all'account del servizio.</span><span class="sxs-lookup"><span data-stu-id="260fd-139">This can be any user-defined string that maps to the service account.</span></span> <span data-ttu-id="260fd-140">In questo caso, la chiave deve essere registrata manualmente nel centro distribuzione chiavi e deve essere conforme alle regole relative ai nomi SPN definiti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="260fd-140">In this case, the key must be registered manually in the KDC and must satisfy the rules for a user-defined SPN.</span></span><br /><br /> <span data-ttu-id="260fd-141">È possibile utilizzare la parola chiave `FailoverPartnerSPN` per specificare il nome SPN per il server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-141">The `FailoverPartnerSPN` keyword can be used to specify the SPN for the failover partner server.</span></span> <span data-ttu-id="260fd-142">L'intervallo di valori per gli account e per le chiavi di Active Directory coincide con i valori che è possibile specificare per il server principale.</span><span class="sxs-lookup"><span data-stu-id="260fd-142">The range of account and Active Directory key values is the same as the values you can specify for the principal server.</span></span>|  
|<span data-ttu-id="260fd-143">Un'applicazione ODBC specifica un nome SPN come attributo di connessione per il server principale o il server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-143">An ODBC application specifies an SPN as a connection attribute for the principal server or failover partner server.</span></span>|<span data-ttu-id="260fd-144">È possibile utilizzare l'attributo di connessione `SQL_COPT_SS_SERVER_SPN` per specificare il nome SPN per una connessione al server principale.</span><span class="sxs-lookup"><span data-stu-id="260fd-144">The connection attribute `SQL_COPT_SS_SERVER_SPN` can be used to specify the SPN for a connection to the principal server.</span></span><br /><br /> <span data-ttu-id="260fd-145">È possibile utilizzare l'attributo di connessione `SQL_COPT_SS_FAILOVER_PARTNER_SPN` per specificare il nome SPN per il server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-145">The connection attribute `SQL_COPT_SS_FAILOVER_PARTNER_SPN` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="260fd-146">Un'applicazione OLE DB specifica un nome SPN come proprietà di inizializzazione dell'origine dati per il server principale o per un server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-146">An OLE DB application specifies an SPN as a data source initialization property for the principal server or for a failover partner server.</span></span>|<span data-ttu-id="260fd-147">È possibile utilizzare la proprietà di connessione `SSPROP_INIT_SERVER_SPN` nel set di proprietà `DBPROPSET_SQLSERVERDBINIT` per specificare il nome SPN per una connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-147">The connection property `SSPROP_INIT_SERVER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` property set can be used to specify the SPN for a connection.</span></span><br /><br /> <span data-ttu-id="260fd-148">È possibile utilizzare la proprietà di connessione `SSPROP_INIT_FAILOVER_PARTNER_SPN` nel set di proprietà `DBPROPSET_SQLSERVERDBINIT` per specificare il nome SPN per il server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-148">The connection property `SSPROP_INIT_FAILOVER_PARTNER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="260fd-149">Un utente specifica un nome SPN per un server o per un server partner di failover in un nome di origine dati ODBC.</span><span class="sxs-lookup"><span data-stu-id="260fd-149">A user specifies an SPN for a server or failover partner server in an ODBC data source name (DSN).</span></span>|<span data-ttu-id="260fd-150">È possibile specificare il nome SPN in un nome di origine dati ODBC tramite le finestre di dialogo di configurazione del nome dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="260fd-150">The SPN can be specified in an ODBC DSN through the DSN setup dialog boxes.</span></span>|  
|<span data-ttu-id="260fd-151">L'utente specifica un nome SPN per un server o per un server partner di failover in una finestra di dialogo **Collegamento dati** o **Account di accesso** OLE DB.</span><span class="sxs-lookup"><span data-stu-id="260fd-151">The user specifies an SPN for a server or failover partner server in an OLE DB **Data Link** or **Login** dialog box.</span></span>|<span data-ttu-id="260fd-152">È possibile specificare il nome SPN in una finestra di dialogo **Collegamento dati** o **Account di accesso** .</span><span class="sxs-lookup"><span data-stu-id="260fd-152">The SPN can be specified in a **Data Link** or **Login** dialog box.</span></span> <span data-ttu-id="260fd-153">La finestra di dialogo **Account di accesso** può essere usata con ODBC o OLE DB.</span><span class="sxs-lookup"><span data-stu-id="260fd-153">The **Login** dialog box can be used with either ODBC or OLE DB.</span></span>|  
|<span data-ttu-id="260fd-154">Un'applicazione ODBC determina il metodo di autenticazione usato per stabilire una connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-154">An ODBC application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="260fd-155">Se una connessione è stata aperta correttamente, un'applicazione può eseguire una query sull'attributo di connessione `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` per determinare il metodo di autenticazione utilizzato.</span><span class="sxs-lookup"><span data-stu-id="260fd-155">When a connection has been opened successfully, an application can query the connection attribute `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` to determine which authentication method was used.</span></span> <span data-ttu-id="260fd-156">Alcuni dei valori possibili sono `NTLM` e `Kerberos`.</span><span class="sxs-lookup"><span data-stu-id="260fd-156">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
|<span data-ttu-id="260fd-157">Un'applicazione OLE DB determina il metodo di autenticazione usato per stabilire una connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-157">An OLE DB application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="260fd-158">Se una connessione è stata aperta correttamente, un'applicazione può eseguire una query sulla proprietà di connessione `SSPROP_AUTHENTICATION_METHOD` nel set di proprietà `DBPROPSET_SQLSERVERDATASOURCEINFO` per determinare il metodo di autenticazione utilizzato.</span><span class="sxs-lookup"><span data-stu-id="260fd-158">When a connection has been opened successfully, an application can query the connection property `SSPROP_AUTHENTICATION_METHOD` in the `DBPROPSET_SQLSERVERDATASOURCEINFO` property set to determine which authentication method was used.</span></span> <span data-ttu-id="260fd-159">Alcuni dei valori possibili sono `NTLM` e `Kerberos`.</span><span class="sxs-lookup"><span data-stu-id="260fd-159">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
  
## <a name="failover"></a><span data-ttu-id="260fd-160">Failover</span><span class="sxs-lookup"><span data-stu-id="260fd-160">Failover</span></span>  
 <span data-ttu-id="260fd-161">I nomi SPN non vengono archiviati nella cache di failover e pertanto non possono essere passati tra connessioni.</span><span class="sxs-lookup"><span data-stu-id="260fd-161">SPNs are not stored in the failover cache and therefore cannot be passed between connections.</span></span> <span data-ttu-id="260fd-162">I nomi SPN verranno usati in tutti i tentativi di connessione al server principale e al partner se specificati nella stringa di connessione o negli attributi di connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-162">SPNs will be used on all connection attempts to the principal and partner when specified in the connection string or connection attributes.</span></span>  
  
## <a name="connection-pooling"></a><span data-ttu-id="260fd-163">Pool di connessioni</span><span class="sxs-lookup"><span data-stu-id="260fd-163">Connection Pooling</span></span>  
 <span data-ttu-id="260fd-164">Nelle applicazioni è necessario tenere presente che la specifica dei nomi SPN solo in alcune stringhe di connessione può implicare la frammentazione del pool.</span><span class="sxs-lookup"><span data-stu-id="260fd-164">Applications should be aware that specifying SPNs in some but not all connection strings can contribute to pool fragmentation.</span></span>  
  
 <span data-ttu-id="260fd-165">Le applicazioni possono specificare a livello di programmazione i nomi SPN come attributi di connessione anziché specificare parole chiave della stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="260fd-165">Applications can programmatically specify SPNs as connection attributes, instead of specifying connection string keywords.</span></span> <span data-ttu-id="260fd-166">In questo modo, viene semplificata la gestione della frammentazione del pool di connessioni.</span><span class="sxs-lookup"><span data-stu-id="260fd-166">This can help manage connection pool fragmentation.</span></span>  
  
 <span data-ttu-id="260fd-167">Nelle applicazioni è inoltre necessario tenere presente che i nomi SPN nelle stringhe di connessione possono essere sostituiti dagli attributi di connessione corrispondenti, mentre le stringhe di connessione usate dal pool di connessioni useranno i valori della stringa di connessione ai fini del pool.</span><span class="sxs-lookup"><span data-stu-id="260fd-167">Applications should be aware that SPNs in connection strings can be overridden by setting the corresponding connection attributes, but connection strings used by connection pooling will use the connection string values for pooling purposes.</span></span>  
  
## <a name="down-level-server-behavior"></a><span data-ttu-id="260fd-168">Comportamento dei server legacy</span><span class="sxs-lookup"><span data-stu-id="260fd-168">Down-Level Server Behavior</span></span>  
 <span data-ttu-id="260fd-169">Poiché il nuovo comportamento di connessione viene implementato dal client, non è specifico di una determinata versione di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-169">The new connection behavior is implemented by the client; therefore, it is not specific to a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="linked-servers-and-delegation"></a><span data-ttu-id="260fd-170">Server collegati e delega</span><span class="sxs-lookup"><span data-stu-id="260fd-170">Linked Servers and Delegation</span></span>  
 <span data-ttu-id="260fd-171">Quando si creano server collegati, è possibile usare il parametro `@provstr` di [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) per specificare i nomi SPN del server e del server partner di failover.</span><span class="sxs-lookup"><span data-stu-id="260fd-171">When linked servers are created, the `@provstr` parameter of [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) can be used to specify the server and failover partner SPNs.</span></span> <span data-ttu-id="260fd-172">L'uso di questo parametro offre gli stessi vantaggi ottenuti specificando i nomi SPN nelle stringhe di connessione del client e consente di stabilire in modo più semplice e affidabile connessioni che usano l'autenticazione Kerberos.</span><span class="sxs-lookup"><span data-stu-id="260fd-172">The benefits of doing this are the same as specifying SPNs in client connection strings: It is simpler and more reliable to establish connections that use Kerberos authentication.</span></span>  
  
 <span data-ttu-id="260fd-173">La delega con server collegati richiede l'autenticazione Kerberos.</span><span class="sxs-lookup"><span data-stu-id="260fd-173">Delegation with linked servers requires Kerberos authentication.</span></span>  
  
## <a name="management-aspects-of-spns-specified-by-applications"></a><span data-ttu-id="260fd-174">Aspetti correlati alla gestione dei nomi SPN specificati dalle applicazioni</span><span class="sxs-lookup"><span data-stu-id="260fd-174">Management Aspects of SPNs Specified by Applications</span></span>  
 <span data-ttu-id="260fd-175">Nel determinare se specificare nomi SPN in un'applicazione (tramite stringhe di connessione) o a livello di programmazione tramite proprietà di connessione (anziché basandosi sui nomi SPN generati dal provider predefinito), considerare gli aspetti seguenti:</span><span class="sxs-lookup"><span data-stu-id="260fd-175">When choosing whether to specify SPNs in an application (through connection strings) or programmatically through connection properties (rather than relying on the defalt provider generated SPNs), consider the following factors:</span></span>  
  
-   <span data-ttu-id="260fd-176">Sicurezza: verificare se il nome SPN specificato comporta la divulgazione di informazioni protette.</span><span class="sxs-lookup"><span data-stu-id="260fd-176">Security: Does the specified SPN disclose information that is protected?</span></span>  
  
-   <span data-ttu-id="260fd-177">Affidabilità: per consentire l'uso di nomi SPN predefiniti, è necessario che l'account del servizio usato per l'esecuzione dell'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] disponga di privilegi sufficienti per l'aggiornamento di Active Directory nel Centro distribuzione chiavi.</span><span class="sxs-lookup"><span data-stu-id="260fd-177">Reliability: To enable the use of default SPNs, the service account in which the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs must have sufficient privileges to update the Active Directory on the KDC.</span></span>  
  
-   <span data-ttu-id="260fd-178">Utilità e trasparenza a livello di posizione: valutare le conseguenze sui nomi SPN di un'applicazione se il database viene spostato in un'istanza diversa di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="260fd-178">Convenience and location transparency: How will an application's SPNs be affected if its database moves to a different [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance?</span></span> <span data-ttu-id="260fd-179">Questa considerazione si applica sia al server principale sia al relativo partner di failover se si usa il mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="260fd-179">This applies to both the principal server and its failover partner if you use database mirroring.</span></span> <span data-ttu-id="260fd-180">Se una modifica apportata al server comporta la modifica dei nomi SPN, valutare le conseguenze sulle applicazioni</span><span class="sxs-lookup"><span data-stu-id="260fd-180">If a server change means that SPNs must be changed, how will this affect applications?</span></span> <span data-ttu-id="260fd-181">e determinare se sarà possibile gestire tutte le modifiche.</span><span class="sxs-lookup"><span data-stu-id="260fd-181">Will any changes be managed?</span></span>  
  
## <a name="specifying-the-spn"></a><span data-ttu-id="260fd-182">Definizione del nome SPN</span><span class="sxs-lookup"><span data-stu-id="260fd-182">Specifying the SPN</span></span>  
 <span data-ttu-id="260fd-183">È possibile specificare un nome SPN nelle finestre di dialogo e nel codice.</span><span class="sxs-lookup"><span data-stu-id="260fd-183">You can specify an SPN in dialog boxes and in code.</span></span> <span data-ttu-id="260fd-184">In questa sezione viene descritto come specificare un nome SPN.</span><span class="sxs-lookup"><span data-stu-id="260fd-184">This section discusses how you can specify an SPN.</span></span>  
  
 <span data-ttu-id="260fd-185">La lunghezza massima consentita per un nome SPN è 260 caratteri.</span><span class="sxs-lookup"><span data-stu-id="260fd-185">The maximum length for an SPN is 260 characters.</span></span>  
  
 <span data-ttu-id="260fd-186">Di seguito viene indicata la sintassi usata per i nomi SPN nella stringa di connessione o negli attributi di connessione:</span><span class="sxs-lookup"><span data-stu-id="260fd-186">The syntax that SPNs use in connection string or connection attributes is as follows:</span></span>  
  
|<span data-ttu-id="260fd-187">Sintassi</span><span class="sxs-lookup"><span data-stu-id="260fd-187">Syntax</span></span>|<span data-ttu-id="260fd-188">Descrizione</span><span class="sxs-lookup"><span data-stu-id="260fd-188">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="260fd-189">MSSQLSvc/*FQDN*</span><span class="sxs-lookup"><span data-stu-id="260fd-189">MSSQLSvc/*fqdn*</span></span>|<span data-ttu-id="260fd-190">Nome SPN predefinito generato dal provider per un'istanza predefinita quando si utilizza un protocollo diverso da TCP.</span><span class="sxs-lookup"><span data-stu-id="260fd-190">The provider-generated, default SPN for a default instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="260fd-191">*FQDN* è un nome di dominio completo.</span><span class="sxs-lookup"><span data-stu-id="260fd-191">*fqdn* is a fully-qualified domain name.</span></span>|  
|<span data-ttu-id="260fd-192">MSSQLSvc/*fqdn*:*port*</span><span class="sxs-lookup"><span data-stu-id="260fd-192">MSSQLSvc/*fqdn*:*port*</span></span>|<span data-ttu-id="260fd-193">Nome SPN predefinito generato dal provider quando si utilizza il protocollo TCP.</span><span class="sxs-lookup"><span data-stu-id="260fd-193">The provider-generated, default SPN when TCP is used.</span></span><br /><br /> <span data-ttu-id="260fd-194">*port* è un numero di porta TCP.</span><span class="sxs-lookup"><span data-stu-id="260fd-194">*port* is a TCP port number.</span></span>|  
|<span data-ttu-id="260fd-195">MSSQLSvc/*FQDN*:*NomeIstanza*</span><span class="sxs-lookup"><span data-stu-id="260fd-195">MSSQLSvc/*fqdn*:*InstanceName*</span></span>|<span data-ttu-id="260fd-196">Nome SPN predefinito generato dal provider per un'istanza denominata quando si usa un protocollo diverso da TCP.</span><span class="sxs-lookup"><span data-stu-id="260fd-196">The provider-generated, default SPN for a named instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="260fd-197">*InstanceName* è il nome di un'istanza di [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="260fd-197">*InstanceName* is a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance name.</span></span>|  
|<span data-ttu-id="260fd-198">HOST/*fqdn*</span><span class="sxs-lookup"><span data-stu-id="260fd-198">HOST/*fqdn*</span></span><br /><br /> <span data-ttu-id="260fd-199">HOST/*MachineName*</span><span class="sxs-lookup"><span data-stu-id="260fd-199">HOST/*MachineName*</span></span>|<span data-ttu-id="260fd-200">Nome SPN di cui viene eseguito il mapping ad account del computer predefiniti registrati automaticamente in Windows.</span><span class="sxs-lookup"><span data-stu-id="260fd-200">The SPN that maps to built-in computer accounts that are automatically registered by Windows.</span></span>|  
|<span data-ttu-id="260fd-201">*Nome utente* @ *Dominio*</span><span class="sxs-lookup"><span data-stu-id="260fd-201">*Username*@*Domain*</span></span>|<span data-ttu-id="260fd-202">Specifica diretta di un account di dominio.</span><span class="sxs-lookup"><span data-stu-id="260fd-202">Direct specification of a domain account.</span></span><br /><br /> <span data-ttu-id="260fd-203">*Username* è un nome di account utente di Windows.</span><span class="sxs-lookup"><span data-stu-id="260fd-203">*Username* is a Windows user account name.</span></span><br /><br /> <span data-ttu-id="260fd-204">*Domain* è un nome di dominio di Windows o un nome di dominio completo.</span><span class="sxs-lookup"><span data-stu-id="260fd-204">*Domain* is a Windows domain name or fully-qualified domain name.</span></span>|  
|<span data-ttu-id="260fd-205">*Nomecomputer* $@ *Dominio*</span><span class="sxs-lookup"><span data-stu-id="260fd-205">*MachineName*$@*Domain*</span></span>|<span data-ttu-id="260fd-206">Specifica diretta di un account del computer.</span><span class="sxs-lookup"><span data-stu-id="260fd-206">Direct specification of a computer account.</span></span><br /><br /> <span data-ttu-id="260fd-207">Se il server a cui si esegue la connessione è in esecuzione con account di sistema locale o di servizio di rete, per ottenere l'autenticazione Kerberos `ServerSPN` può essere nel formato di *MachineName* $@ *dominio* MachineName.</span><span class="sxs-lookup"><span data-stu-id="260fd-207">(If the server you are connecting to is running under LOCAL SYSTEM or NETWORK SERVICE accounts, to get Kerberos authentication, `ServerSPN` can be in the *MachineName*$@*Domain* format.)</span></span>|  
|<span data-ttu-id="260fd-208">*KDCKey* / *Nomecomputer*</span><span class="sxs-lookup"><span data-stu-id="260fd-208">*KDCKey*/*MachineName*</span></span>|<span data-ttu-id="260fd-209">Nome SPN specificato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="260fd-209">A user-specified SPN.</span></span><br /><br /> <span data-ttu-id="260fd-210">*KDCKey* è una stringa alfanumerica conforme alle regole relative alle chiavi KDC.</span><span class="sxs-lookup"><span data-stu-id="260fd-210">*KDCKey* is an alphanumeric string that conforms to the rules for a KDC key.</span></span>|  
  
## <a name="odbc-and-ole-db-syntax-supporting-spns"></a><span data-ttu-id="260fd-211">Sintassi ODBC e OLE DB con supporto di nomi SPN</span><span class="sxs-lookup"><span data-stu-id="260fd-211">ODBC and OLE DB Syntax Supporting SPNs</span></span>  
 <span data-ttu-id="260fd-212">Per informazioni specifiche della sintassi, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="260fd-212">For syntax-specific information, see the following topics:</span></span>  
  
-   [<span data-ttu-id="260fd-213">Nomi SPN &#40;Service Principal Name&#41; nelle connessioni client &#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="260fd-213">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;ODBC&#41;</span></span>](../odbc/service-principal-names-spns-in-client-connections-odbc.md)  
  
-   [<span data-ttu-id="260fd-214">Nomi SPN &#40;Service Principal Name&#41; nelle connessioni client &#40;OLE DB&#41;</span><span class="sxs-lookup"><span data-stu-id="260fd-214">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;OLE DB&#41;</span></span>](../ole-db/service-principal-names-spns-in-client-connections-ole-db.md)  
  
 <span data-ttu-id="260fd-215">Per informazioni sulle applicazioni di esempio in cui viene illustrata questa funzionalità, vedere la pagina relativa agli [esempi di programmazione dati di SQL Server](https://msftdpprodsamples.codeplex.com/).</span><span class="sxs-lookup"><span data-stu-id="260fd-215">For information about sample applications that demonstrate this feature, see [SQL Server Data Programmability Samples](https://msftdpprodsamples.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="260fd-216">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="260fd-216">See Also</span></span>  
 [<span data-ttu-id="260fd-217">Funzionalità di SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="260fd-217">SQL Server Native Client Features</span></span>](sql-server-native-client-features.md)  
  
