---
title: Uso della crittografia senza convalida | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- data access [SQL Server Native Client], encryption
- cryptography [SQL Server Native Client]
- SQLNCLI, encryption
- encryption [SQL Server Native Client]
- SQL Server Native Client, encryption
ms.assetid: f4c63206-80bb-4d31-84ae-ccfcd563effa
author: rothja
ms.author: jroth
ms.openlocfilehash: 0a6d2e8b3d696a92e3fa3e1b7de7604551d4f9ce
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87625364"
---
# <a name="using-encryption-without-validation"></a><span data-ttu-id="b8c7a-102">Utilizzo della crittografia senza convalida</span><span class="sxs-lookup"><span data-stu-id="b8c7a-102">Using Encryption Without Validation</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b8c7a-103">crittografa sempre pacchetti di rete associati all'accesso.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-103">always encrypts network packets associated with logging in.</span></span> <span data-ttu-id="b8c7a-104">Se non è stato eseguito il provisioning di nessun certificato nel server quando viene avviato, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] genera un certificato autofirmato utilizzato per crittografare pacchetti di accesso.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-104">If no certificate has been provisioned on the server when it starts up, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] generates a self-signed certificate which is used to encrypt login packets.</span></span>  
  
 <span data-ttu-id="b8c7a-105">Le applicazioni possono inoltre richiedere l'attivazione della crittografia per tutto il traffico di rete mediante le parole chiave della stringa di connessione o le proprietà di connessione.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-105">Applications may also request encryption of all network traffic by using connection string keywords or connection properties.</span></span> <span data-ttu-id="b8c7a-106">Le parole chiave sono "Encrypt" per ODBC e OLE DB quando si usa una stringa del provider con **IDbInitialize:: Initialize**o "Use Encryption for data" per ADO e OLE DB quando si usa una stringa di inizializzazione con **IDataInitialize**.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-106">The keywords are "Encrypt" for ODBC and OLE DB when using a provider string with **IDbInitialize::Initialize**, or "Use Encryption for Data" for ADO and OLE DB when using an initialization string with **IDataInitialize**.</span></span> <span data-ttu-id="b8c7a-107">Questa operazione può anche essere configurata tramite [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] l'opzione **Forza crittografia protocollo** di Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-107">This may also be configured by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager using the **Force Protocol Encryption** option.</span></span> <span data-ttu-id="b8c7a-108">Per impostazione predefinita, la crittografia di tutto il traffico di rete per una connessione richiede che nel server sia stato eseguito il provisioning di un certificato.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-108">By default, encryption of all network traffic for a connection requires that a certificate be provisioned on the server.</span></span>  
  
 <span data-ttu-id="b8c7a-109">Per informazioni sulle parole chiave della stringa di connessione, vedere [utilizzo delle parole chiave delle stringhe di connessione con SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="b8c7a-109">For information about connection string keywords, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="b8c7a-110">Per abilitare l'uso della crittografia quando nel server non è stato eseguito il provisioning di un certificato, è possibile usare Gestione configurazione [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per impostare le opzioni **Forza crittografia protocollo** e **Certificato server attendibile**.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-110">To enable encryption to be used when a certificate has not been provisioned on the server, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager can be used to set both the **Force Protocol Encryption** and the **Trust Server Certificate** options.</span></span> <span data-ttu-id="b8c7a-111">In questo caso, la crittografia utilizzerà un certificato server autofirmato senza convalida se nel server non è stato eseguito il provisioning di alcun certificato verificabile.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-111">In this case, encryption will use a self-signed server certificate without validation if no verifiable certificate has been provisioned on the server.</span></span>  
  
 <span data-ttu-id="b8c7a-112">Le applicazioni possono inoltre utilizzare la parola chiave "TrustServerCertificate" o il relativo attributo di connessione associato per garantire l'utilizzo della crittografia.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-112">Applications may also use the "TrustServerCertificate" keyword or its associated connection attribute to guarantee that encryption takes place.</span></span> <span data-ttu-id="b8c7a-113">Le impostazioni dell'applicazione non riducono mai il livello di sicurezza impostato dal client di Gestione configurazione [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], bensì possono potenziarlo.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-113">Application settings never reduce the level of security set by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Client Configuration Manager, but may strengthen it.</span></span> <span data-ttu-id="b8c7a-114">Un'applicazione può ad esempio richiedere la crittografia, se non è stata impostata l'opzione **Forza crittografia protocollo** per il client.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-114">For example, if **Force Protocol Encryption** is not set for the client, an application may request encryption itself.</span></span> <span data-ttu-id="b8c7a-115">Per garantire che la crittografia venga applicata anche quando non è stato eseguito il provisioning di un certificato server, un'applicazione può richiedere la crittografia e "TrustServerCertificate".</span><span class="sxs-lookup"><span data-stu-id="b8c7a-115">To guarantee encryption even when a server certificate has not been provisioned, an application may request encryption and "TrustServerCertificate".</span></span> <span data-ttu-id="b8c7a-116">Tuttavia, se TrustServerCertificate non è attivata nella configurazione client, è comunque necessario il provisioning di un certificato server.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-116">However, if "TrustServerCertificate" is not enabled in the client configuration, a provisioned server certificate is still required.</span></span> <span data-ttu-id="b8c7a-117">Nella tabella seguente vengono descritti tutti i casi:</span><span class="sxs-lookup"><span data-stu-id="b8c7a-117">The following table describes all cases:</span></span>  
  
|<span data-ttu-id="b8c7a-118">Impostazione client Forza crittografia protocollo</span><span class="sxs-lookup"><span data-stu-id="b8c7a-118">Force Protocol Encryption client setting</span></span>|<span data-ttu-id="b8c7a-119">Impostazione client Considera attendibile certificato server</span><span class="sxs-lookup"><span data-stu-id="b8c7a-119">Trust Server Certificate client setting</span></span>|<span data-ttu-id="b8c7a-120">Attributo/stringa di connessione Encrypt/Use Encryption for Data</span><span class="sxs-lookup"><span data-stu-id="b8c7a-120">Connection string/connection attribute Encrypt/Use Encryption for Data</span></span>|<span data-ttu-id="b8c7a-121">Attributo/stringa di connessione Trust Server Certificate</span><span class="sxs-lookup"><span data-stu-id="b8c7a-121">Connection string/connection attribute Trust Server Certificate</span></span>|<span data-ttu-id="b8c7a-122">Risultato</span><span class="sxs-lookup"><span data-stu-id="b8c7a-122">Result</span></span>|  
|----------------------------------------------|---------------------------------------------|------------------------------------------------------------------------------|----------------------------------------------------------------------|------------|  
|<span data-ttu-id="b8c7a-123">No</span><span class="sxs-lookup"><span data-stu-id="b8c7a-123">No</span></span>|<span data-ttu-id="b8c7a-124">N/D</span><span class="sxs-lookup"><span data-stu-id="b8c7a-124">N/A</span></span>|<span data-ttu-id="b8c7a-125">No (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="b8c7a-125">No (default)</span></span>|<span data-ttu-id="b8c7a-126">Ignorato</span><span class="sxs-lookup"><span data-stu-id="b8c7a-126">Ignored</span></span>|<span data-ttu-id="b8c7a-127">Nessuna crittografia.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-127">No encryption occurs.</span></span>|  
|<span data-ttu-id="b8c7a-128">No</span><span class="sxs-lookup"><span data-stu-id="b8c7a-128">No</span></span>|<span data-ttu-id="b8c7a-129">N/D</span><span class="sxs-lookup"><span data-stu-id="b8c7a-129">N/A</span></span>|<span data-ttu-id="b8c7a-130">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-130">Yes</span></span>|<span data-ttu-id="b8c7a-131">No (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="b8c7a-131">No (default)</span></span>|<span data-ttu-id="b8c7a-132">La crittografia viene applicata solo se è disponibile un certificato server verificabile; in caso contrario, il tentativo di connessione non riesce.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-132">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="b8c7a-133">No</span><span class="sxs-lookup"><span data-stu-id="b8c7a-133">No</span></span>|<span data-ttu-id="b8c7a-134">N/D</span><span class="sxs-lookup"><span data-stu-id="b8c7a-134">N/A</span></span>|<span data-ttu-id="b8c7a-135">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-135">Yes</span></span>|<span data-ttu-id="b8c7a-136">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-136">Yes</span></span>|<span data-ttu-id="b8c7a-137">La crittografia viene sempre applicata, ma può essere utilizzato un certificato server auto-firmato.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-137">Encryption always occurs, but may use a self-signed server certificate.</span></span>|  
|<span data-ttu-id="b8c7a-138">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-138">Yes</span></span>|<span data-ttu-id="b8c7a-139">No</span><span class="sxs-lookup"><span data-stu-id="b8c7a-139">No</span></span>|<span data-ttu-id="b8c7a-140">Ignorato</span><span class="sxs-lookup"><span data-stu-id="b8c7a-140">Ignored</span></span>|<span data-ttu-id="b8c7a-141">Ignorato</span><span class="sxs-lookup"><span data-stu-id="b8c7a-141">Ignored</span></span>|<span data-ttu-id="b8c7a-142">La crittografia viene applicata solo se è disponibile un certificato server verificabile; in caso contrario, il tentativo di connessione non riesce.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-142">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="b8c7a-143">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-143">Yes</span></span>|<span data-ttu-id="b8c7a-144">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-144">Yes</span></span>|<span data-ttu-id="b8c7a-145">No (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="b8c7a-145">No (default)</span></span>|<span data-ttu-id="b8c7a-146">Ignorato</span><span class="sxs-lookup"><span data-stu-id="b8c7a-146">Ignored</span></span>|<span data-ttu-id="b8c7a-147">La crittografia viene sempre applicata, ma può essere utilizzato un certificato server auto-firmato.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-147">Encryption always occurs, but may use a self-signed server certificate.</span></span>|  
|<span data-ttu-id="b8c7a-148">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-148">Yes</span></span>|<span data-ttu-id="b8c7a-149">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-149">Yes</span></span>|<span data-ttu-id="b8c7a-150">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-150">Yes</span></span>|<span data-ttu-id="b8c7a-151">No (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="b8c7a-151">No (default)</span></span>|<span data-ttu-id="b8c7a-152">La crittografia viene applicata solo se è disponibile un certificato server verificabile; in caso contrario, il tentativo di connessione non riesce.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-152">Encryption occurs only if there is a verifiable server certificate, otherwise the connection attempt fails.</span></span>|  
|<span data-ttu-id="b8c7a-153">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-153">Yes</span></span>|<span data-ttu-id="b8c7a-154">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-154">Yes</span></span>|<span data-ttu-id="b8c7a-155">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-155">Yes</span></span>|<span data-ttu-id="b8c7a-156">Sì</span><span class="sxs-lookup"><span data-stu-id="b8c7a-156">Yes</span></span>|<span data-ttu-id="b8c7a-157">La crittografia viene sempre applicata, ma può essere utilizzato un certificato server auto-firmato.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-157">Encryption always occurs, but might use a self-signed server certificate.</span></span>|  
  
## <a name="sql-server-native-client-ole-db-provider"></a><span data-ttu-id="b8c7a-158">Provider OLE DB di SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="b8c7a-158">SQL Server Native Client OLE DB Provider</span></span>  
 <span data-ttu-id="b8c7a-159">Il [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] provider di OLE DB di Native Client supporta la crittografia senza convalida tramite l'aggiunta della proprietà di inizializzazione dell'origine dati SSPROP_INIT_TRUST_SERVER_CERTIFICATE, implementata nel set di proprietà DBPROPSET_SQLSERVERDBINIT.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-159">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB provider supports encryption without validation through the addition of the SSPROP_INIT_TRUST_SERVER_CERTIFICATE data source initialization property, which is implemented in the DBPROPSET_SQLSERVERDBINIT property set.</span></span> <span data-ttu-id="b8c7a-160">È stata inoltre aggiunta una nuova parola chiave, "TrustServerCertificate", per la stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-160">In addition, a new connection string keyword, "TrustServerCertificate", as been added.</span></span> <span data-ttu-id="b8c7a-161">Accetta i valori yes o no. Il valore predefinito è no.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-161">It accepts yes or no values; no is the default.</span></span> <span data-ttu-id="b8c7a-162">Quando si utilizzano i componenti del servizio, accetta i valori true o false; false è l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-162">When using service components, it accepts true or false values; false is the default.</span></span>  
  
 <span data-ttu-id="b8c7a-163">Per altre informazioni sui miglioramenti apportati al set di proprietà DBPROPSET_SQLSERVERDBINIT, vedere [Proprietà di inizializzazione e di autorizzazione](../../native-client-ole-db-data-source-objects/initialization-and-authorization-properties.md).</span><span class="sxs-lookup"><span data-stu-id="b8c7a-163">For more information about enhancements made to the DBPROPSET_SQLSERVERDBINIT property set, see [Initialization and Authorization Properties](../../native-client-ole-db-data-source-objects/initialization-and-authorization-properties.md).</span></span>  
  
## <a name="sql-server-native-client-odbc-driver"></a><span data-ttu-id="b8c7a-164">Driver ODBC di SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="b8c7a-164">SQL Server Native Client ODBC Driver</span></span>  
 <span data-ttu-id="b8c7a-165">Il [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] driver ODBC di Native Client supporta la crittografia senza convalida tramite aggiunte alle funzioni [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md) e [SQLGetConnectAttr](../../native-client-odbc-api/sqlgetconnectattr.md) .</span><span class="sxs-lookup"><span data-stu-id="b8c7a-165">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC driver supports encryption without validation through additions to the [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md) and [SQLGetConnectAttr](../../native-client-odbc-api/sqlgetconnectattr.md) functions.</span></span> <span data-ttu-id="b8c7a-166">SQL_COPT_SS_TRUST_SERVER_CERTIFICATE è stato aggiunto per accettare SQL_TRUST_SERVER_CERTIFICATE_YES o SQL_TRUST_SERVER_CERTIFICATE_NO. SQL_TRUST_SERVER_CERTIFICATE_NO è l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-166">SQL_COPT_SS_TRUST_SERVER_CERTIFICATE has been added to accept either SQL_TRUST_SERVER_CERTIFICATE_YES or SQL_TRUST_SERVER_CERTIFICATE_NO, with SQL_TRUST_SERVER_CERTIFICATE_NO being the default.</span></span> <span data-ttu-id="b8c7a-167">È stata inoltre aggiunta una nuova parola chiave, "TrustServerCertificate", per la stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="b8c7a-167">In addition, a new connection string keyword, "TrustServerCertificate", has been added.</span></span> <span data-ttu-id="b8c7a-168">Accetta i valori yes o no. Il valore predefinito è "no".</span><span class="sxs-lookup"><span data-stu-id="b8c7a-168">It accepts yes or no values; "no" is the default.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b8c7a-169">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="b8c7a-169">See Also</span></span>  
 [<span data-ttu-id="b8c7a-170">Funzionalità di SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="b8c7a-170">SQL Server Native Client Features</span></span>](sql-server-native-client-features.md)  
  
  
