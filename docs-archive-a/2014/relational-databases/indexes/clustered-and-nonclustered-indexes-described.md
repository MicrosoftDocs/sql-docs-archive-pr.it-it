---
title: Descrizione di indici cluster e non cluster | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- query optimizer [SQL Server], index usage
- index concepts [SQL Server]
ms.assetid: b7d6b323-728d-4763-a987-92e6292f6f7a
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c9eb51a24000b8af4a466fe4330644a722ad325b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87724648"
---
# <a name="clustered-and-nonclustered-indexes-described"></a><span data-ttu-id="c8f3b-102">Descrizione di indici cluster e non cluster.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-102">Clustered and Nonclustered Indexes Described</span></span>
  <span data-ttu-id="c8f3b-103">Un indice è una struttura su disco associata a una tabella o a una vista che consente di recuperare in modo rapido le righe della tabella o della vista.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-103">An index is an on-disk structure associated with a table or view that speeds retrieval of rows from the table or view.</span></span> <span data-ttu-id="c8f3b-104">L'indice contiene chiavi costituite da una o più colonne della tabella o della vista.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-104">An index contains keys built from one or more columns in the table or view.</span></span> <span data-ttu-id="c8f3b-105">Tali chiavi vengono archiviate in una struttura (albero B) che consente a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] di individuare con rapidità ed efficienza la riga o le righe associate ai valori di chiave.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-105">These keys are stored in a structure (B-tree) that enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to find the row or rows associated with the key values quickly and efficiently.</span></span>  
  
 <span data-ttu-id="c8f3b-106">Una tabella o una vista può contenere i tipi di indici seguenti:</span><span class="sxs-lookup"><span data-stu-id="c8f3b-106">A table or view can contain the following types of indexes:</span></span>  
  
-   <span data-ttu-id="c8f3b-107">Cluster</span><span class="sxs-lookup"><span data-stu-id="c8f3b-107">Clustered</span></span>  
  
    -   <span data-ttu-id="c8f3b-108">Gli indici cluster ordinano e archiviano le righe di dati della tabella in base ai valori di chiave,</span><span class="sxs-lookup"><span data-stu-id="c8f3b-108">Clustered indexes sort and store the data rows in the table or view based on their key values.</span></span> <span data-ttu-id="c8f3b-109">ovvero alle colonne incluse nella definizione dell'indice.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-109">These are the columns included in the index definition.</span></span> <span data-ttu-id="c8f3b-110">Per ogni tabella è disponibile un solo indice cluster, poiché alle righe di dati è possibile applicare un solo tipo di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-110">There can be only one clustered index per table, because the data rows themselves can be sorted in only one order.</span></span>  
  
    -   <span data-ttu-id="c8f3b-111">Le righe di dati di una tabella vengono archiviate con ordinamento solo se la tabella contiene un indice cluster.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-111">The only time the data rows in a table are stored in sorted order is when the table contains a clustered index.</span></span> <span data-ttu-id="c8f3b-112">Una tabella con indice cluster è denominata tabella cluster.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-112">When a table has a clustered index, the table is called a clustered table.</span></span> <span data-ttu-id="c8f3b-113">Se la tabella non contiene un indice cluster, le righe di dati vengono archiviate in una struttura non ordinata denominata heap.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-113">If a table has no clustered index, its data rows are stored in an unordered structure called a heap.</span></span>  
  
-   <span data-ttu-id="c8f3b-114">Non cluster</span><span class="sxs-lookup"><span data-stu-id="c8f3b-114">Nonclustered</span></span>  
  
    -   <span data-ttu-id="c8f3b-115">Gli indici non cluster presentano una struttura distinta dalle righe di dati.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-115">Nonclustered indexes have a structure separate from the data rows.</span></span> <span data-ttu-id="c8f3b-116">Un indice non cluster contiene i valori di chiave dell'indice non cluster, ciascuno dei quali dispone di un puntatore alla riga di dati che contiene il valore di chiave.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-116">A nonclustered index contains the nonclustered index key values and each key value entry has a pointer to the data row that contains the key value.</span></span>  
  
    -   <span data-ttu-id="c8f3b-117">Il puntatore da una riga di indice non cluster a una riga di dati è denominato indicatore di posizione delle righe.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-117">The pointer from an index row in a nonclustered index to a data row is called a row locator.</span></span> <span data-ttu-id="c8f3b-118">La struttura dell'indicatore di posizione delle righe dipende dal tipo di archiviazione delle pagine di dati (heap o tabella cluster).</span><span class="sxs-lookup"><span data-stu-id="c8f3b-118">The structure of the row locator depends on whether the data pages are stored in a heap or a clustered table.</span></span> <span data-ttu-id="c8f3b-119">Nel caso di un heap, l'indicatore di posizione delle righe è un puntatore alla riga.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-119">For a heap, a row locator is a pointer to the row.</span></span> <span data-ttu-id="c8f3b-120">Nel caso di una tabella cluster, l'indicatore di posizione delle righe è la chiave di indice cluster.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-120">For a clustered table, the row locator is the clustered index key.</span></span>  
  
    -   <span data-ttu-id="c8f3b-121">È possibile aggiungere colonne non chiave al livello foglia dell'indice non cluster per ignorare i limiti esistenti di 900 byte e 16 colonne chiave ed eseguire query indicizzate completamente coperte.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-121">You can add nonkey columns to the leaf level of the nonclustered index to by-pass existing index key limits, 900 bytes and 16 key columns, and execute fully covered, indexed, queries.</span></span> <span data-ttu-id="c8f3b-122">Per altre informazioni, vedere [Creare indici con colonne incluse](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="c8f3b-122">For more information, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
 <span data-ttu-id="c8f3b-123">Sia gli indici cluster che non cluster possono essere univoci.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-123">Both clustered and nonclustered indexes can be unique.</span></span> <span data-ttu-id="c8f3b-124">In tal caso due righe possono avere lo stesso valore di chiave di indice.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-124">This means no two rows can have the same value for the index key.</span></span> <span data-ttu-id="c8f3b-125">In caso contrario, l'indice non è univoco e più righe possono condividere lo stesso valore di chiave.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-125">Otherwise, the index is not unique and multiple rows can share the same key value.</span></span> <span data-ttu-id="c8f3b-126">Per altre informazioni, vedere [Creare indici univoci](create-unique-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="c8f3b-126">For more information, see [Create Unique Indexes](create-unique-indexes.md).</span></span>  
  
 <span data-ttu-id="c8f3b-127">Gli indici di una tabella o di una vista vengono gestiti automaticamente in caso di modifica dei dati della tabella.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-127">Indexes are automatically maintained for a table or view whenever the table data is modified.</span></span>  
  
 <span data-ttu-id="c8f3b-128">Vedere [Indici](indexes.md) per altri tipi di indici usati per scopi speciali.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-128">See [Indexes](indexes.md) for additional types of special purpose indexes.</span></span>  
  
## <a name="indexes-and-constraints"></a><span data-ttu-id="c8f3b-129">Indici e vincoli</span><span class="sxs-lookup"><span data-stu-id="c8f3b-129">Indexes and Constraints</span></span>  
 <span data-ttu-id="c8f3b-130">Gli indici vengono creati automaticamente quando si definiscono vincoli PRIMARY KEY e UNIQUE sulle colonne della tabella.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-130">Indexes are automatically created when PRIMARY KEY and UNIQUE constraints are defined on table columns.</span></span> <span data-ttu-id="c8f3b-131">Quando, ad esempio, si crea una tabella e si identifica una colonna specifica da utilizzare come chiave primaria, nel [!INCLUDE[ssDE](../../includes/ssde-md.md)] verrà automaticamente creato un vincolo PRIMARY KEY e un indice su quella colonna.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-131">For example, when you create a table and identify a particular column to be the primary key, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a PRIMARY KEY constraint and index on that column.</span></span> <span data-ttu-id="c8f3b-132">Per altre informazioni, vedere [Creare chiavi primarie](../tables/create-primary-keys.md) e [Creare vincoli univoci](../tables/create-unique-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="c8f3b-132">For more information, see [Create Primary Keys](../tables/create-primary-keys.md) and [Create Unique Constraints](../tables/create-unique-constraints.md).</span></span>  
  
## <a name="how-indexes-are-used-by-the-query-optimizer"></a><span data-ttu-id="c8f3b-133">Utilizzo degli indici in Query Optimizer</span><span class="sxs-lookup"><span data-stu-id="c8f3b-133">How Indexes Are Used by the Query Optimizer</span></span>  
 <span data-ttu-id="c8f3b-134">Se correttamente progettati, gli indici contribuiscono a ridurre le operazioni di I/O su disco e l'utilizzo di risorse di sistema, migliorando pertanto le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-134">Well-designed indexes can reduce disk I/O operations and consume fewer system resources therefore improving query performance.</span></span> <span data-ttu-id="c8f3b-135">Gli indici possono inoltre risultare utili in una vasta gamma di query che contengono le istruzioni SELECT, UPDATE, DELETE o MERGE.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-135">Indexes can be helpful for a variety of queries that contain SELECT, UPDATE, DELETE, or MERGE statements.</span></span> <span data-ttu-id="c8f3b-136">Si consideri la query `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` nel database [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c8f3b-136">Consider the query `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="c8f3b-137">Quando viene eseguita questa query, Query Optimizer valuta i singoli metodi disponibili per il recupero dei dati e seleziona quello più efficace.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-137">When this query is executed, the query optimizer evaluates each available method for retrieving the data and selects the most efficient method.</span></span> <span data-ttu-id="c8f3b-138">Il metodo può prevedere un'analisi di tabella oppure di uno o più indici eventualmente esistenti.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-138">The method may be a table scan, or may be scanning one or more indexes if they exist.</span></span>  
  
 <span data-ttu-id="c8f3b-139">Durante un'analisi di tabella Query Optimizer legge tutte le righe della tabella ed estrae quelle che soddisfano i criteri della query.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-139">When performing a table scan, the query optimizer reads all the rows in the table, and extracts the rows that meet the criteria of the query.</span></span> <span data-ttu-id="c8f3b-140">Pur generando molte operazioni di I/O su disco e talvolta utilizzando un elevato numero di risorse,</span><span class="sxs-lookup"><span data-stu-id="c8f3b-140">A table scan generates many disk I/O operations and can be resource intensive.</span></span> <span data-ttu-id="c8f3b-141">un'analisi di tabella può costituire il metodo più efficace se, ad esempio, il set di risultati della query include un'elevata percentuale di righe della tabella.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-141">However, a table scan could be the most efficient method if, for example, the result set of the query is a high percentage of rows from the table.</span></span>  
  
 <span data-ttu-id="c8f3b-142">Se invece Query Optimizer utilizza un indice, esegue la ricerca delle colonne chiave dell'indice, individua la posizione di archiviazione delle righe richieste dalla query ed estrae solo quelle corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-142">When the query optimizer uses an index, it searches the index key columns, finds the storage location of the rows needed by the query and extracts the matching rows from that location.</span></span> <span data-ttu-id="c8f3b-143">La ricerca basata sull'indice è in genere più rapida rispetto a quella basata sulla tabella perché, a differenza di una tabella, un indice contiene di frequente pochissime colonne per riga e le righe sono ordinate.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-143">Generally, searching the index is much faster than searching the table because unlike a table, an index frequently contains very few columns per row and the rows are in sorted order.</span></span>  
  
 <span data-ttu-id="c8f3b-144">Query Optimizer seleziona in genere il metodo più efficace durante l'esecuzione delle query.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-144">The query optimizer typically selects the most efficient method when executing queries.</span></span> <span data-ttu-id="c8f3b-145">Se, tuttavia, non è disponibile alcun indice, verrà utilizzata un'analisi di tabella.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-145">However, if no indexes are available, the query optimizer must use a table scan.</span></span> <span data-ttu-id="c8f3b-146">L'attività consiste nel progettare e creare indici adatti all'ambiente in modo che in Query Optimizer sia presente una selezione di indici efficienti da cui effettuare una selezione.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-146">Your task is to design and create indexes that are best suited to your environment so that the query optimizer has a selection of efficient indexes from which to select.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c8f3b-147">fornisce l' [Ottimizzazione guidata motore di database](../performance/database-engine-tuning-advisor.md) per facilitare l'analisi dell'ambiente del database e la selezione di indici adatti.</span><span class="sxs-lookup"><span data-stu-id="c8f3b-147">provides the [Database Engine Tuning Advisor](../performance/database-engine-tuning-advisor.md) to help with the analysis of your database environment and in the selection of appropriate indexes.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="c8f3b-148">Attività correlate</span><span class="sxs-lookup"><span data-stu-id="c8f3b-148">Related Tasks</span></span>  
 [<span data-ttu-id="c8f3b-149">Creare indici cluster</span><span class="sxs-lookup"><span data-stu-id="c8f3b-149">Create Clustered Indexes</span></span>](create-clustered-indexes.md)  
  
 [<span data-ttu-id="c8f3b-150">Creare indici non cluster</span><span class="sxs-lookup"><span data-stu-id="c8f3b-150">Create Nonclustered Indexes</span></span>](create-nonclustered-indexes.md)  
  
  
