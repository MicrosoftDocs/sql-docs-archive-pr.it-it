---
title: Funzionamento delle operazioni sugli indici online | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- online index operations
- source indexes [SQL Server]
- preexisting indexes [SQL Server]
- target indexes [SQL Server]
- temporary mapping index [SQL Server]
- index temporary mappings [SQL Server]
ms.assetid: eef0c9d1-790d-46e4-a758-d0bf6742e6ae
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9b74690c9dfb980787087899200ffb45c2c4b6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87637302"
---
# <a name="how-online-index-operations-work"></a><span data-ttu-id="fe673-102">Funzionamento delle operazioni sugli indici online</span><span class="sxs-lookup"><span data-stu-id="fe673-102">How Online Index Operations Work</span></span>
  <span data-ttu-id="fe673-103">In questo argomento vengono descritte le strutture esistenti durante un'operazione sugli indici online e illustra le attività associate a tali strutture.</span><span class="sxs-lookup"><span data-stu-id="fe673-103">This topic defines the structures that exist during an online index operation and shows the activities associated with these structures.</span></span>  
  
## <a name="online-index-structures"></a><span data-ttu-id="fe673-104">Strutture degli indici online</span><span class="sxs-lookup"><span data-stu-id="fe673-104">Online Index Structures</span></span>  
 <span data-ttu-id="fe673-105">Per consentire attività utente simultanee durante un'operazione DDL (Data Definition Language) sull'indice, durante l'operazione sull'indice online vengono utilizzate le strutture seguenti: indici di origine e preesistente, destinazione e, per la ricompilazione di un heap o l'eliminazione di un indice cluster online, un indice di mapping temporaneo.</span><span class="sxs-lookup"><span data-stu-id="fe673-105">To allow for concurrent user activity during an index data definition language (DDL) operation, the following structures are used during the online index operation: source and preexisting indexes, target, and for rebuilding a heap or dropping a clustered index online, a temporary mapping index.</span></span>  
  
-   <span data-ttu-id="fe673-106">**Indici di origine e preesistenti**</span><span class="sxs-lookup"><span data-stu-id="fe673-106">**Source and preexisting indexes**</span></span>  
  
     <span data-ttu-id="fe673-107">L'origine è rappresentata dalla tabella originale o dai dati dell'indice cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-107">The source is the original table or clustered index data.</span></span> <span data-ttu-id="fe673-108">Gli indici preesistenti sono indici non cluster associati alla struttura di origine.</span><span class="sxs-lookup"><span data-stu-id="fe673-108">Preexisting indexes are any nonclustered indexes that are associated with the source structure.</span></span> <span data-ttu-id="fe673-109">Se ad esempio l'operazione sull'indice online consiste nella ricompilazione di un indice cluster con quattro indici non cluster associati, l'origine è l'indice cluster esistente e gli indici preesistenti sono gli indici non cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-109">For example, if the online index operation is rebuilding a clustered index that has four associated nonclustered indexes, the source is the existing clustered index and the preexisting indexes are the nonclustered indexes.</span></span>  
  
     <span data-ttu-id="fe673-110">Gli indici preesistenti sono disponibili agli utenti simultanei per operazioni di selezione, inserimento, aggiornamento ed eliminazione,</span><span class="sxs-lookup"><span data-stu-id="fe673-110">The preexisting indexes are available to concurrent users for select, insert, update, and delete operations.</span></span> <span data-ttu-id="fe673-111">inclusi inserimenti bulk (supportati ma non consigliati) e aggiornamenti impliciti mediante trigger e vincoli di integrità referenziale.</span><span class="sxs-lookup"><span data-stu-id="fe673-111">This includes bulk inserts (supported but not recommended) and implicit updates by triggers and referential integrity constraints.</span></span> <span data-ttu-id="fe673-112">Tutti gli indici preesistenti sono disponibili per l'esecuzione di query e ricerche.</span><span class="sxs-lookup"><span data-stu-id="fe673-112">All preexisting indexes are available for queries and searches.</span></span> <span data-ttu-id="fe673-113">Ciò significa che possono essere selezionati da Query Optimizer e, se necessario, specificati in hint per l'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-113">This means they may be selected by the query optimizer and, if necessary, specified in index hints.</span></span>  
  
-   <span data-ttu-id="fe673-114">**Destinazione**</span><span class="sxs-lookup"><span data-stu-id="fe673-114">**Target**</span></span>  
  
     <span data-ttu-id="fe673-115">La destinazione o le destinazioni sono rappresentate dal nuovo indice (o heap) o da un set di nuovi indici creati o ricompilati.</span><span class="sxs-lookup"><span data-stu-id="fe673-115">The target or targets is the new index (or heap) or a set of new indexes that is being created or rebuilt.</span></span> <span data-ttu-id="fe673-116">Le operazioni utente di inserimento, aggiornamento ed eliminazione sull'origine vengono applicate da [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] alla destinazione durante l'operazione sull'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-116">User insert, update, and delete operations to the source are applied by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to the target during the index operation.</span></span> <span data-ttu-id="fe673-117">Se ad esempio l'operazione sull'indice online consiste nella ricompilazione di un indice cluster, la destinazione è l'indice cluster ricompilato. [!INCLUDE[ssDE](../../includes/ssde-md.md)] non ricompila indici non cluster quando viene ricompilato un indice cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-117">For example, if the online index operation is rebuilding a clustered index, the target is the rebuilt clustered index; the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not rebuild nonclustered indexes when a clustered index is rebuilt.</span></span>  
  
     <span data-ttu-id="fe673-118">Nell'indice di destinazione non viene eseguita la ricerca durante l'elaborazione delle istruzioni SELECT finché non viene eseguito il commit dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="fe673-118">The target index is not searched while processing SELECT statements until the index operation is committed.</span></span> <span data-ttu-id="fe673-119">L'indice viene contrassegnato internamente come di sola scrittura.</span><span class="sxs-lookup"><span data-stu-id="fe673-119">Internally, the index is marked as write-only.</span></span>  
  
-   <span data-ttu-id="fe673-120">**Indice di mapping temporaneo**</span><span class="sxs-lookup"><span data-stu-id="fe673-120">**Temporary mapping index**</span></span>  
  
     <span data-ttu-id="fe673-121">Per le operazioni sugli indici online che consistono nella creazione, nell'eliminazione o nella ricompilazione di un indice cluster è inoltre necessario un indice di mapping temporaneo</span><span class="sxs-lookup"><span data-stu-id="fe673-121">Online index operations that create, drop, or rebuild a clustered index also require a temporary mapping index.</span></span> <span data-ttu-id="fe673-122">che viene utilizzato dalle transazioni simultanee per determinare i record da eliminare nei nuovi indici ricompilati quando vengono aggiornate o eliminate righe nella tabella sottostante.</span><span class="sxs-lookup"><span data-stu-id="fe673-122">This temporary index is used by concurrent transactions to determine which records to delete in the new indexes that are being built when rows in the underlying table are updated or deleted.</span></span> <span data-ttu-id="fe673-123">Questo indice non cluster viene creato contemporaneamente al nuovo indice cluster (o heap) e non richiede un'operazione di ordinamento separata.</span><span class="sxs-lookup"><span data-stu-id="fe673-123">This nonclustered index is created in the same step as the new clustered index (or heap) and does not require a separate sort operation.</span></span> <span data-ttu-id="fe673-124">Le transazioni simultanee mantengono l'indice di mapping temporaneo in tutte le operazioni di inserimento, aggiornamento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="fe673-124">Concurrent transactions also maintain the temporary mapping index in all their insert, update, and delete operations.</span></span>  
  
## <a name="online-index-activities"></a><span data-ttu-id="fe673-125">Attività sugli indici online</span><span class="sxs-lookup"><span data-stu-id="fe673-125">Online Index Activities</span></span>  
 <span data-ttu-id="fe673-126">Durante un'operazione sugli indici online semplice, ad esempio la creazione di un indice cluster in una tabella non indicizzata (heap), l'origine e la destinazione passano attraverso tre fasi: preparatoria, di compilazione e finale.</span><span class="sxs-lookup"><span data-stu-id="fe673-126">During a simple online index operation, such as creating a clustered index on a nonindexed table (heap), the source and target go through three phases: preparation, build, and final.</span></span>  
  
 <span data-ttu-id="fe673-127">Nella figura seguente si illustra il processo per la creazione di un indice cluster iniziale online.</span><span class="sxs-lookup"><span data-stu-id="fe673-127">The following illustration shows the process for creating an initial clustered index online.</span></span> <span data-ttu-id="fe673-128">L'oggetto di origine, l'heap, non presenta altri indici.</span><span class="sxs-lookup"><span data-stu-id="fe673-128">The source object (the heap) has no other indexes.</span></span> <span data-ttu-id="fe673-129">Per ogni fase sono illustrate le attività sulle strutture di origine e di destinazione, nonché le operazioni utente simultanee di selezione, inserimento, aggiornamento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="fe673-129">The source and target structure activities are shown for each phase; concurrent user select, insert, update, and delete operations are also shown.</span></span> <span data-ttu-id="fe673-130">Le fasi preparatoria, di compilazione e finale sono indicate insieme alle modalità di blocco utilizzate in ogni fase.</span><span class="sxs-lookup"><span data-stu-id="fe673-130">The preparation, build, and final phases are indicated together with the lock modes used in each phase.</span></span>  
  
 <span data-ttu-id="fe673-131">![Attività eseguite durante l'operazione sull'indice online](../../database-engine/media/online-index.gif "Attività eseguite durante l'operazione sull'indice online")</span><span class="sxs-lookup"><span data-stu-id="fe673-131">![Activities performed during online index operation](../../database-engine/media/online-index.gif "Activities performed during online index operation")</span></span>  
  
## <a name="source-structure-activities"></a><span data-ttu-id="fe673-132">Attività relative alla struttura di origine</span><span class="sxs-lookup"><span data-stu-id="fe673-132">Source Structure Activities</span></span>  
 <span data-ttu-id="fe673-133">Nella tabella seguente sono incluse le attività relative alle strutture di origine durante ogni fase dell'operazione sull'indice e la relativa strategia di blocco.</span><span class="sxs-lookup"><span data-stu-id="fe673-133">The following table lists the activities involving the source structures during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="fe673-134">Fase</span><span class="sxs-lookup"><span data-stu-id="fe673-134">Phase</span></span>|<span data-ttu-id="fe673-135">Attività di origine</span><span class="sxs-lookup"><span data-stu-id="fe673-135">Source activity</span></span>|<span data-ttu-id="fe673-136">Blocchi di origine</span><span class="sxs-lookup"><span data-stu-id="fe673-136">Source locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="fe673-137">Preparazione</span><span class="sxs-lookup"><span data-stu-id="fe673-137">Preparation</span></span><br /><br /> <span data-ttu-id="fe673-138">Fase molto breve</span><span class="sxs-lookup"><span data-stu-id="fe673-138">Very short phase</span></span>|<span data-ttu-id="fe673-139">Preparazione dei metadati di sistema per la creazione della nuova struttura vuota dell'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-139">System metadata preparation to create the new empty index structure.</span></span><br /><br /> <span data-ttu-id="fe673-140">Viene definito uno snapshot della tabella,</span><span class="sxs-lookup"><span data-stu-id="fe673-140">A snapshot of the table is defined.</span></span> <span data-ttu-id="fe673-141">ovvero viene utilizzato il controllo delle versioni delle righe per garantire la consistenza in lettura a livello di transazione.</span><span class="sxs-lookup"><span data-stu-id="fe673-141">That is, row versioning is used to provide transaction-level read consistency.</span></span><br /><br /> <span data-ttu-id="fe673-142">Le operazioni utente di scrittura simultanee sull'origine vengono bloccate per un breve periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="fe673-142">Concurrent user write operations on the source are blocked for a very short period.</span></span><br /><br /> <span data-ttu-id="fe673-143">Non sono consentite operazioni DDL simultanee, ad eccezione della creazione di più indici non cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-143">No concurrent DDL operations are allowed except creating multiple nonclustered indexes.</span></span>|<span data-ttu-id="fe673-144">S (condiviso) nella tabella\*</span><span class="sxs-lookup"><span data-stu-id="fe673-144">S (Shared) on the table\*</span></span><br /><br /> <span data-ttu-id="fe673-145">IS (preventivo condiviso)</span><span class="sxs-lookup"><span data-stu-id="fe673-145">IS (Intent Shared)</span></span><br /><br /> <span data-ttu-id="fe673-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="fe673-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="fe673-147">Compilare</span><span class="sxs-lookup"><span data-stu-id="fe673-147">Build</span></span><br /><br /> <span data-ttu-id="fe673-148">Fase principale</span><span class="sxs-lookup"><span data-stu-id="fe673-148">Main phase</span></span>|<span data-ttu-id="fe673-149">I dati vengono sottoposti ad analisi, ordinati, uniti e inseriti nella destinazione in operazioni di caricamento bulk.</span><span class="sxs-lookup"><span data-stu-id="fe673-149">The data is scanned, sorted, merged, and inserted into the target in bulk load operations.</span></span><br /><br /> <span data-ttu-id="fe673-150">Le operazioni utente simultanee di selezione, inserimento, aggiornamento ed eliminazione vengono applicate agli indici preesistenti e ai nuovi indici compilati.</span><span class="sxs-lookup"><span data-stu-id="fe673-150">Concurrent user select, insert, update, and delete operations are applied to both the preexisting indexes and any new indexes being built.</span></span>|<span data-ttu-id="fe673-151">IS</span><span class="sxs-lookup"><span data-stu-id="fe673-151">IS</span></span><br /><br /> <span data-ttu-id="fe673-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="fe673-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="fe673-153">Finale</span><span class="sxs-lookup"><span data-stu-id="fe673-153">Final</span></span><br /><br /> <span data-ttu-id="fe673-154">Fase molto breve</span><span class="sxs-lookup"><span data-stu-id="fe673-154">Very short phase</span></span>|<span data-ttu-id="fe673-155">Prima dell'avvio di questa fase, è necessario che tutte le transazioni di aggiornamento di cui non è stato eseguito il commit vengano completate.</span><span class="sxs-lookup"><span data-stu-id="fe673-155">All uncommitted update transactions must complete before this phase starts.</span></span> <span data-ttu-id="fe673-156">A seconda del blocco acquisito, tutte le nuove transazioni utente di lettura o di scrittura vengono bloccate per un breve periodo di tempo finché questa fase non viene completata.</span><span class="sxs-lookup"><span data-stu-id="fe673-156">Depending on the acquired lock, all new user read or write transactions are blocked for a very short period until this phase is completed.</span></span><br /><br /> <span data-ttu-id="fe673-157">I metadati di sistema vengono aggiornati per sostituire l'origine con la destinazione.</span><span class="sxs-lookup"><span data-stu-id="fe673-157">System metadata is updated to replace the source with the target.</span></span><br /><br /> <span data-ttu-id="fe673-158">Se necessario, l'origine viene eliminata,</span><span class="sxs-lookup"><span data-stu-id="fe673-158">The source is dropped if it is required.</span></span> <span data-ttu-id="fe673-159">ad esempio dopo la ricompilazione o l'eliminazione di un indice cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-159">For example, after rebuilding or dropping a clustered index.</span></span>|<span data-ttu-id="fe673-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="fe673-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span><br /><br /> <span data-ttu-id="fe673-161">S nella tabella se viene creato un indice non cluster.\*</span><span class="sxs-lookup"><span data-stu-id="fe673-161">S on the table if creating a nonclustered index.\*</span></span><br /><br /> <span data-ttu-id="fe673-162">SCH-M (modifica dello schema) se viene eliminata la struttura di origine (indice o tabella).\*</span><span class="sxs-lookup"><span data-stu-id="fe673-162">SCH-M (Schema Modification) if any source structure (index or table) is dropped.\*</span></span>|  
  
 <span data-ttu-id="fe673-163">\* Per l'operazione sull'indice si dovrà attendere il completamento delle transazioni di aggiornamento di cui non è stato eseguito il commit prima di acquisire il blocco S o SCH-M nella tabella.</span><span class="sxs-lookup"><span data-stu-id="fe673-163">\* The index operation will wait for any uncommitted update transactions to complete before acquiring the S lock or SCH-M lock on the table.</span></span>  
  
 <span data-ttu-id="fe673-164">\*\* Con il blocco di risorsa INDEX_BUILD_INTERNAL_RESOURCE viene impedita l'esecuzione di operazioni DDL (Data Definition Language) simultanee sulle strutture di origine e preesistenti mentre è in corso l'operazione sull'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-164">\*\* The resource lock INDEX_BUILD_INTERNAL_RESOURCE prevents the execution of concurrent data definition language (DDL) operations on the source and preexisting structures while the index operation is in progress.</span></span> <span data-ttu-id="fe673-165">Questo blocco impedisce ad esempio la ricompilazione simultanea di due indici nella stessa tabella.</span><span class="sxs-lookup"><span data-stu-id="fe673-165">For example, this lock prevents concurrent rebuild of two indexes on the same table.</span></span> <span data-ttu-id="fe673-166">Nonostante questo blocco di risorsa sia associato al blocco SCH-M, non impedisce l'esecuzione di istruzioni DML.</span><span class="sxs-lookup"><span data-stu-id="fe673-166">Although this resource lock is associated with the Sch-M lock, it does not prevent data manipulation statements.</span></span>  
  
 <span data-ttu-id="fe673-167">Nella tabella precedente è incluso un solo blocco condiviso (S) acquisito durante la fase di compilazione di un'operazione sugli indici online relativa a un singolo indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-167">The previous table shows a single Shared (S) lock acquired during the build phase of an online index operation that involves a single index.</span></span> <span data-ttu-id="fe673-168">Quando si compilano o ricompilano indici cluster e non cluster, in una singola operazione sugli indici online, ad esempio durante la creazione dell'indice cluster iniziale in una tabella contenente uno o più indici non cluster, vengono acquisiti due blocchi S di breve durata durante la fase di compilazione seguiti da blocchi preventivi condivisi (IS) di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="fe673-168">When clustered and nonclustered indexes are built, or rebuilt, in a single online index operation (for example, during the initial clustered index creation on a table that contains one or more nonclustered indexes) two short-term S locks are acquired during the build phase followed by long-term Intent Shared (IS) locks.</span></span> <span data-ttu-id="fe673-169">Viene innanzitutto acquisito un blocco S per la creazione dell'indice cluster e, quando la creazione dell'indice cluster viene completata, viene acquisito un altro blocco S di breve durata per la creazione degli indici non cluster.</span><span class="sxs-lookup"><span data-stu-id="fe673-169">One S lock is acquired first for the clustered index creation and when creating the clustered index is completed, a second short-term S lock is acquired for creating the nonclustered indexes.</span></span> <span data-ttu-id="fe673-170">Dopo la creazione degli indici non cluster, il blocco S viene abbassato di livello e portato a blocco IS fino alla fase finale dell'operazione sull'indice online.</span><span class="sxs-lookup"><span data-stu-id="fe673-170">After the nonclustered indexes are created, the S lock is downgraded to an IS lock until the final phase of the online index operation.</span></span>  
  
### <a name="target-structure-activities"></a><span data-ttu-id="fe673-171">Attività relative alla struttura di destinazione</span><span class="sxs-lookup"><span data-stu-id="fe673-171">Target Structure Activities</span></span>  
 <span data-ttu-id="fe673-172">Nella tabella seguente sono incluse le attività relative alla struttura di destinazione durante ogni fase dell'operazione sull'indice e la relativa strategia di blocco.</span><span class="sxs-lookup"><span data-stu-id="fe673-172">The following table lists the activities that involve the target structure during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="fe673-173">Fase</span><span class="sxs-lookup"><span data-stu-id="fe673-173">Phase</span></span>|<span data-ttu-id="fe673-174">Attività di destinazione</span><span class="sxs-lookup"><span data-stu-id="fe673-174">Target activity</span></span>|<span data-ttu-id="fe673-175">Blocchi di destinazione</span><span class="sxs-lookup"><span data-stu-id="fe673-175">Target locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="fe673-176">Preparazione</span><span class="sxs-lookup"><span data-stu-id="fe673-176">Preparation</span></span>|<span data-ttu-id="fe673-177">Il nuovo indice viene creato e impostato in sola scrittura.</span><span class="sxs-lookup"><span data-stu-id="fe673-177">New index is created and set to write-only.</span></span>|<span data-ttu-id="fe673-178">IS</span><span class="sxs-lookup"><span data-stu-id="fe673-178">IS</span></span>|  
|<span data-ttu-id="fe673-179">Compilare</span><span class="sxs-lookup"><span data-stu-id="fe673-179">Build</span></span>|<span data-ttu-id="fe673-180">Vengono inseriti i dati dall'origine.</span><span class="sxs-lookup"><span data-stu-id="fe673-180">Data is inserted from source.</span></span><br /><br /> <span data-ttu-id="fe673-181">Vengono applicate le modifiche utente (inserimenti, aggiornamenti, eliminazioni) apportate all'origine.</span><span class="sxs-lookup"><span data-stu-id="fe673-181">User modifications (inserts, updates, deletes) applied to the source are applied.</span></span><br /><br /> <span data-ttu-id="fe673-182">Questa attività è visibile all'utente.</span><span class="sxs-lookup"><span data-stu-id="fe673-182">This activity is transparent to the user.</span></span>|<span data-ttu-id="fe673-183">IS</span><span class="sxs-lookup"><span data-stu-id="fe673-183">IS</span></span>|  
|<span data-ttu-id="fe673-184">Finale</span><span class="sxs-lookup"><span data-stu-id="fe673-184">Final</span></span>|<span data-ttu-id="fe673-185">Vengono aggiornati i metadati dell'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-185">Index metadata is updated.</span></span><br /><br /> <span data-ttu-id="fe673-186">Viene impostato lo stato lettura/scrittura per l'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-186">Index is set to read/write status.</span></span>|<span data-ttu-id="fe673-187">S</span><span class="sxs-lookup"><span data-stu-id="fe673-187">S</span></span><br /><br /> <span data-ttu-id="fe673-188">o</span><span class="sxs-lookup"><span data-stu-id="fe673-188">or</span></span><br /><br /> <span data-ttu-id="fe673-189">SCH-M</span><span class="sxs-lookup"><span data-stu-id="fe673-189">SCH-M</span></span>|  
  
 <span data-ttu-id="fe673-190">Con le istruzioni SELECT eseguite dall'utente non è possibile accedere alla destinazione finché l'operazione sull'indice non è stata completata.</span><span class="sxs-lookup"><span data-stu-id="fe673-190">The target is not accessed by SELECT statements issued by the user until the index operation is completed.</span></span>  
  
 <span data-ttu-id="fe673-191">Dopo il completamento della fase preparatoria e della fase finale, i piani di aggiornamento e di query archiviati nella cache delle procedure vengono invalidati</span><span class="sxs-lookup"><span data-stu-id="fe673-191">After the preparation and final phase is completed, the query and update plans that are stored in the procedure cache are invalidated.</span></span> <span data-ttu-id="fe673-192">e per le query successive verrà utilizzato il nuovo indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-192">Subsequent queries will use the new index.</span></span>  
  
 <span data-ttu-id="fe673-193">La durata di un cursore dichiarato in una tabella oggetto di un'operazione su un indice online è limitata dalle fasi dell'operazione sull'indice.</span><span class="sxs-lookup"><span data-stu-id="fe673-193">The lifetime of a cursor declared on a table that is involved in an online index operation is limited by the online index phases.</span></span> <span data-ttu-id="fe673-194">I cursori di aggiornamento vengono invalidati in corrispondenza di ogni fase,</span><span class="sxs-lookup"><span data-stu-id="fe673-194">Update cursors are invalidated at each phase.</span></span> <span data-ttu-id="fe673-195">mentre i cursori di sola lettura vengono invalidati solo dopo la fase finale.</span><span class="sxs-lookup"><span data-stu-id="fe673-195">Read-only cursors are invalidated only after the final phase.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="fe673-196">Contenuto correlato</span><span class="sxs-lookup"><span data-stu-id="fe673-196">Related Content</span></span>  
 [<span data-ttu-id="fe673-197">Eseguire operazioni online sugli indici</span><span class="sxs-lookup"><span data-stu-id="fe673-197">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="fe673-198">Linee guida per le operazioni sugli indici online</span><span class="sxs-lookup"><span data-stu-id="fe673-198">Guidelines for Online Index Operations</span></span>](guidelines-for-online-index-operations.md)  
  
  
