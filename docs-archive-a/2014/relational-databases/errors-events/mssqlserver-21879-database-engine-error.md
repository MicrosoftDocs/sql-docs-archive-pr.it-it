---
title: MSSQLSERVER_21879 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- 21879 (Database Engine error)
ms.assetid: fcfab735-05ca-423a-89f1-fdee7e2ed8c0
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 08c5d4f45faf94d555ed7acedd90cc55ec4791ec
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/04/2020
ms.locfileid: "87718192"
---
# <a name="mssqlserver_21879"></a><span data-ttu-id="69719-102">MSSQLSERVER_21879</span><span class="sxs-lookup"><span data-stu-id="69719-102">MSSQLSERVER_21879</span></span>
    
## <a name="details"></a><span data-ttu-id="69719-103">Dettagli</span><span class="sxs-lookup"><span data-stu-id="69719-103">Details</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="69719-104">Nome prodotto</span><span class="sxs-lookup"><span data-stu-id="69719-104">Product Name</span></span>|<span data-ttu-id="69719-105">SQL Server</span><span class="sxs-lookup"><span data-stu-id="69719-105">SQL Server</span></span>|  
|<span data-ttu-id="69719-106">ID evento</span><span class="sxs-lookup"><span data-stu-id="69719-106">Event ID</span></span>|<span data-ttu-id="69719-107">21879</span><span class="sxs-lookup"><span data-stu-id="69719-107">21879</span></span>|  
|<span data-ttu-id="69719-108">Origine evento</span><span class="sxs-lookup"><span data-stu-id="69719-108">Event Source</span></span>|<span data-ttu-id="69719-109">MSSQLSERVER</span><span class="sxs-lookup"><span data-stu-id="69719-109">MSSQLSERVER</span></span>|  
|<span data-ttu-id="69719-110">Componente</span><span class="sxs-lookup"><span data-stu-id="69719-110">Component</span></span>|<span data-ttu-id="69719-111">SQLEngine</span><span class="sxs-lookup"><span data-stu-id="69719-111">SQLEngine</span></span>|  
|<span data-ttu-id="69719-112">Nome simbolico</span><span class="sxs-lookup"><span data-stu-id="69719-112">Symbolic Name</span></span>|<span data-ttu-id="69719-113">SQLErrorNum21879</span><span class="sxs-lookup"><span data-stu-id="69719-113">SQLErrorNum21879</span></span>|  
|<span data-ttu-id="69719-114">Testo del messaggio</span><span class="sxs-lookup"><span data-stu-id="69719-114">Message Text</span></span>|<span data-ttu-id="69719-115">Impossibile eseguire una query nel server reindirizzato '%s' per il server di pubblicazione originale '%s' e il server di pubblicazione '%s' per determinare il nome del server remoto; errore %d, messaggio di errore '%s.'</span><span class="sxs-lookup"><span data-stu-id="69719-115">Unable to query the redirected server '%s' for original publisher '%s' and publisher database '%s' to determine the name of the remote server; Error %d, Error message '%s'.</span></span>|  
  
## <a name="explanation"></a><span data-ttu-id="69719-116">Spiegazione</span><span class="sxs-lookup"><span data-stu-id="69719-116">Explanation</span></span>  
 <span data-ttu-id="69719-117">`sp_validate_redirected_publisher` utilizza un server collegato temporaneo creato per connettersi al server di pubblicazione reindirizzato per individuare il nome del server remoto.</span><span class="sxs-lookup"><span data-stu-id="69719-117">`sp_validate_redirected_publisher` uses a temporary linked server that it creates to connect to the redirected publisher in order to discover the name of the remote server.</span></span> <span data-ttu-id="69719-118">L'errore 21879 viene restituito in caso di errore della query del server collegato.</span><span class="sxs-lookup"><span data-stu-id="69719-118">Error 21879 is returned when the linked server query fails.</span></span> <span data-ttu-id="69719-119">La chiamata per richiedere il nome del server remoto è in genere il primo utilizzo del server collegato temporaneo, pertanto, se ci sono problemi di connettività, è probabile che si presentino prima con questa chiamata.</span><span class="sxs-lookup"><span data-stu-id="69719-119">The call to request the remote server name is typically the first use of the temporary linked server, so if there are connectivity problems they are likely to appear first with this call.</span></span> <span data-ttu-id="69719-120">Questa chiamata remota esegue semplicemente select `@@servername` sul server remoto.</span><span class="sxs-lookup"><span data-stu-id="69719-120">This remote call simply executes select `@@servername` at the remote server.</span></span>  
  
 <span data-ttu-id="69719-121">Il server collegato utilizzato per eseguire la query sul server di pubblicazione reindirizzato utilizza la modalità di sicurezza, l'account di accesso e la password forniti quando viene richiamato `sp_adddistpublisher` per il server di pubblicazione originale.</span><span class="sxs-lookup"><span data-stu-id="69719-121">The linked server used to query the redirected publisher uses the security mode, login, and password supplied when `sp_adddistpublisher` was called for the original publisher.</span></span>  
  
-   <span data-ttu-id="69719-122">Se l'autenticazione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] è stata utilizzata (modalità di sicurezza 0), l'account di accesso e password specificati vengono utilizzati per connettersi al server remoto.</span><span class="sxs-lookup"><span data-stu-id="69719-122">If [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authentication was used (security mode 0) then the login and password specified are used to connect to the remote server.</span></span>  
  
-   <span data-ttu-id="69719-123">Se è stata utilizzata l'autenticazione di Windows (modalità di sicurezza 1), viene utilizzata una connessione trusted per la connessione.</span><span class="sxs-lookup"><span data-stu-id="69719-123">If Windows authentication was used (security mode 1) a trusted connection is used for the connection.</span></span>  
  
    -   <span data-ttu-id="69719-124">Se `sp_validate_redirected_publisher` viene chiamato in modo esplicito da un utente, l'account di accesso di Windows con cui è in esecuzione l'utente viene utilizzato per la connessione.</span><span class="sxs-lookup"><span data-stu-id="69719-124">If `sp_validate_redirected_publisher` is called explicitly by a user, the Windows login that the user is running under is used for the connection.</span></span>  
  
    -   <span data-ttu-id="69719-125">Se il server di pubblicazione `sp_validate_redirected_`viene chiamato da un agente di replica di `sp_get_redirected_publisher`, viene utilizzato l'account di accesso di Windows associato all'agente.</span><span class="sxs-lookup"><span data-stu-id="69719-125">If `sp_validate_redirected_`publisher is called by a replication agent from `sp_get_redirected_publisher`, the Windows login associated with the agent is used.</span></span>  
  
 <span data-ttu-id="69719-126">L'errore 21879 può indicare che `sp_validate_redirected_publisher` è stato chiamato utilizzando un account di accesso che non è conosciuto sul server di pubblicazione di destinazione reindirizzato.</span><span class="sxs-lookup"><span data-stu-id="69719-126">Error 21879 can indicate that `sp_validate_redirected_publisher` was called using a login that is not known at the redirected target publisher.</span></span>  
  
## <a name="user-action"></a><span data-ttu-id="69719-127">Azione dell'utente</span><span class="sxs-lookup"><span data-stu-id="69719-127">User Action</span></span>  
 <span data-ttu-id="69719-128">Assicurarsi che l'account di accesso dell'autenticazione [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] o l'account di accesso di autenticazione di Windows sia valido su tutte le repliche del gruppo di disponibilità e disponga di autorizzazioni sufficienti per accedere alle tabelle di metadati delle sottoscrizioni (syssubscriptions e sysmergesubscriptions) nel database del server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="69719-128">Make certain that the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] authentication login or the Windows authentication login is valid at all of the availability group replicas and has sufficient authorization to access the subscription metadata tables (syssubscriptions and sysmergesubscriptions) in the publisher database.</span></span>  
  
 <span data-ttu-id="69719-129">Vi sono considerazioni particolari da fare quando l'errore 21879 viene restituito da una chiamata a `sp_get_redirected_publisher` iniziato da un agente di replica in esecuzione su un nodo diverso dal database di distribuzione; ad esempio, un agente di merge in esecuzione su un sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="69719-129">There are special considerations when error 21879 is returned from a call to `sp_get_redirected_publisher` that is initiated by a replication agent running on a node other that the distributor; such as a merge agent running at a subscriber.</span></span> <span data-ttu-id="69719-130">Se l'autenticazione di Windows viene utilizzata per la connessione al server di pubblicazione reindirizzato, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] deve essere configurato per l'autenticazione Kerberos per stabilire la corretta connessione.</span><span class="sxs-lookup"><span data-stu-id="69719-130">If Windows authentication is used for the connection to the redirected publisher, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be configured for Kerberos authentication for the connection to be successfully established.</span></span> <span data-ttu-id="69719-131">Quando viene utilizzata l'autenticazione di Windows e [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] non è configurato per l'autenticazione Kerberos, l'errore 18456 che indica il mancato accesso 'NT AUTHORITY\ANONYMOUS LOGON' viene ricevuto da un agente di merge in esecuzione su un sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="69719-131">When Windows authentication is used and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is not configured for Kerberos authentication, error 18456 indicating that the 'NT AUTHORITY\ANONYMOUS LOGON' login failed, is received by a merge agent running at a subscriber.</span></span> <span data-ttu-id="69719-132">Vi sono tre possibili modi di risoluzione di questo problema:</span><span class="sxs-lookup"><span data-stu-id="69719-132">There are three possible ways to address this issue:</span></span>  
  
-   <span data-ttu-id="69719-133">Configurare [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] per l'autenticazione Kerberos.</span><span class="sxs-lookup"><span data-stu-id="69719-133">Configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] for Kerberos authentication.</span></span> <span data-ttu-id="69719-134">Vedere **Autenticazione Kerberos e SQL Server** nella documentazione online di [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="69719-134">See **Kerberos Authentication and SQL Server** in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
-   <span data-ttu-id="69719-135">Utilizzare `sp_changedistpublisher` per modificare la modalità di sicurezza associata al server di pubblicazione originale in MSdistpublishers, nonché per specificare un account di accesso e una password da utilizzare per la connessione.</span><span class="sxs-lookup"><span data-stu-id="69719-135">Use `sp_changedistpublisher` to change the security mode associated with the original publisher in MSdistpublishers, as well as to specify a login and password to use for the connection.</span></span>  
  
-   <span data-ttu-id="69719-136">Specificare il parametro della riga di comando *BypassPublisherValidation* nella riga di comando dell'agente di merge per ignorare la convalida quando `sp_get_redirected_publisher` viene chiamato nel server di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="69719-136">Specify the command line parameter *BypassPublisherValidation* on the merge agent command line to bypass validation when `sp_get_redirected_publisher` is called at the distributor.</span></span>  
  
  
